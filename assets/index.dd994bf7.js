(function(){const ve=document.createElement("link").relList;if(ve&&ve.supports&&ve.supports("modulepreload"))return;for(const G of document.querySelectorAll('link[rel="modulepreload"]'))B(G);new MutationObserver(G=>{for(const x of G)if(x.type==="childList")for(const f of x.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&B(f)}).observe(document,{childList:!0,subtree:!0});function t(G){const x={};return G.integrity&&(x.integrity=G.integrity),G.referrerpolicy&&(x.referrerPolicy=G.referrerpolicy),G.crossorigin==="use-credentials"?x.credentials="include":G.crossorigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function B(G){if(G.ep)return;G.ep=!0;const x=t(G);fetch(G.href,x)}})();function V0(me,ve){const t=Object.create(null),B=me.split(",");for(let G=0;G<B.length;G++)t[B[G]]=!0;return ve?G=>!!t[G.toLowerCase()]:G=>!!t[G]}function H0(me){if(Ni(me)){const ve={};for(let t=0;t<me.length;t++){const B=me[t],G=ul(B)?Z2(B):H0(B);if(G)for(const x in G)ve[x]=G[x]}return ve}else{if(ul(me))return me;if(_s(me))return me}}const W2=/;(?![^(]*\))/g,X2=/:([^]+)/,j2=/\/\*.*?\*\//gs;function Z2(me){const ve={};return me.replace(j2,"").split(W2).forEach(t=>{if(t){const B=t.split(X2);B.length>1&&(ve[B[0].trim()]=B[1].trim())}}),ve}function Qp(me){let ve="";if(ul(me))ve=me;else if(Ni(me))for(let t=0;t<me.length;t++){const B=Qp(me[t]);B&&(ve+=B+" ")}else if(_s(me))for(const t in me)me[t]&&(ve+=t+" ");return ve.trim()}const K2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J2=V0(K2);function Jy(me){return!!me||me===""}const $2=me=>ul(me)?me:me==null?"":Ni(me)||_s(me)&&(me.toString===e1||!Qi(me.toString))?JSON.stringify(me,$y,2):String(me),$y=(me,ve)=>ve&&ve.__v_isRef?$y(me,ve.value):Oh(ve)?{[`Map(${ve.size})`]:[...ve.entries()].reduce((t,[B,G])=>(t[`${B} =>`]=G,t),{})}:Qy(ve)?{[`Set(${ve.size})`]:[...ve.values()]}:_s(ve)&&!Ni(ve)&&!t1(ve)?String(ve):ve,qo={},zh=[],xf=()=>{},Q2=()=>!1,q2=/^on[^a-z]/,qp=me=>q2.test(me),G0=me=>me.startsWith("onUpdate:"),Hl=Object.assign,Y0=(me,ve)=>{const t=me.indexOf(ve);t>-1&&me.splice(t,1)},ew=Object.prototype.hasOwnProperty,vo=(me,ve)=>ew.call(me,ve),Ni=Array.isArray,Oh=me=>ed(me)==="[object Map]",Qy=me=>ed(me)==="[object Set]",Qi=me=>typeof me=="function",ul=me=>typeof me=="string",W0=me=>typeof me=="symbol",_s=me=>me!==null&&typeof me=="object",qy=me=>_s(me)&&Qi(me.then)&&Qi(me.catch),e1=Object.prototype.toString,ed=me=>e1.call(me),tw=me=>ed(me).slice(8,-1),t1=me=>ed(me)==="[object Object]",X0=me=>ul(me)&&me!=="NaN"&&me[0]!=="-"&&""+parseInt(me,10)===me,Fp=V0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),td=me=>{const ve=Object.create(null);return t=>ve[t]||(ve[t]=me(t))},rw=/-(\w)/g,Bh=td(me=>me.replace(rw,(ve,t)=>t?t.toUpperCase():"")),nw=/\B([A-Z])/g,Jh=td(me=>me.replace(nw,"-$1").toLowerCase()),r1=td(me=>me.charAt(0).toUpperCase()+me.slice(1)),Qd=td(me=>me?`on${r1(me)}`:""),Iv=(me,ve)=>!Object.is(me,ve),qd=(me,ve)=>{for(let t=0;t<me.length;t++)me[t](ve)},Hp=(me,ve,t)=>{Object.defineProperty(me,ve,{configurable:!0,enumerable:!1,value:t})},n1=me=>{const ve=parseFloat(me);return isNaN(ve)?me:ve};let Bm;const aw=()=>Bm||(Bm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Pf;class a1{constructor(ve=!1){this.detached=ve,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Pf,!ve&&Pf&&(this.index=(Pf.scopes||(Pf.scopes=[])).push(this)-1)}run(ve){if(this.active){const t=Pf;try{return Pf=this,ve()}finally{Pf=t}}}on(){Pf=this}off(){Pf=this.parent}stop(ve){if(this.active){let t,B;for(t=0,B=this.effects.length;t<B;t++)this.effects[t].stop();for(t=0,B=this.cleanups.length;t<B;t++)this.cleanups[t]();if(this.scopes)for(t=0,B=this.scopes.length;t<B;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!ve){const G=this.parent.scopes.pop();G&&G!==this&&(this.parent.scopes[this.index]=G,G.index=this.index)}this.parent=void 0,this.active=!1}}}function i1(me){return new a1(me)}function iw(me,ve=Pf){ve&&ve.active&&ve.effects.push(me)}const j0=me=>{const ve=new Set(me);return ve.w=0,ve.n=0,ve},o1=me=>(me.w&xc)>0,s1=me=>(me.n&xc)>0,ow=({deps:me})=>{if(me.length)for(let ve=0;ve<me.length;ve++)me[ve].w|=xc},sw=me=>{const{deps:ve}=me;if(ve.length){let t=0;for(let B=0;B<ve.length;B++){const G=ve[B];o1(G)&&!s1(G)?G.delete(me):ve[t++]=G,G.w&=~xc,G.n&=~xc}ve.length=t}},x0=new WeakMap;let Sv=0,xc=1;const b0=30;let gf;const Xc=Symbol(""),_0=Symbol("");class Z0{constructor(ve,t=null,B){this.fn=ve,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,iw(this,B)}run(){if(!this.active)return this.fn();let ve=gf,t=gc;for(;ve;){if(ve===this)return;ve=ve.parent}try{return this.parent=gf,gf=this,gc=!0,xc=1<<++Sv,Sv<=b0?ow(this):Um(this),this.fn()}finally{Sv<=b0&&sw(this),xc=1<<--Sv,gf=this.parent,gc=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){gf===this?this.deferStop=!0:this.active&&(Um(this),this.onStop&&this.onStop(),this.active=!1)}}function Um(me){const{deps:ve}=me;if(ve.length){for(let t=0;t<ve.length;t++)ve[t].delete(me);ve.length=0}}let gc=!0;const l1=[];function $h(){l1.push(gc),gc=!1}function Qh(){const me=l1.pop();gc=me===void 0?!0:me}function Nu(me,ve,t){if(gc&&gf){let B=x0.get(me);B||x0.set(me,B=new Map);let G=B.get(t);G||B.set(t,G=j0()),u1(G)}}function u1(me,ve){let t=!1;Sv<=b0?s1(me)||(me.n|=xc,t=!o1(me)):t=!me.has(gf),t&&(me.add(gf),gf.deps.push(me))}function Kf(me,ve,t,B,G,x){const f=x0.get(me);if(!f)return;let M=[];if(ve==="clear")M=[...f.values()];else if(t==="length"&&Ni(me)){const T=n1(B);f.forEach((e,a)=>{(a==="length"||a>=T)&&M.push(e)})}else switch(t!==void 0&&M.push(f.get(t)),ve){case"add":Ni(me)?X0(t)&&M.push(f.get("length")):(M.push(f.get(Xc)),Oh(me)&&M.push(f.get(_0)));break;case"delete":Ni(me)||(M.push(f.get(Xc)),Oh(me)&&M.push(f.get(_0)));break;case"set":Oh(me)&&M.push(f.get(Xc));break}if(M.length===1)M[0]&&w0(M[0]);else{const T=[];for(const e of M)e&&T.push(...e);w0(j0(T))}}function w0(me,ve){const t=Ni(me)?me:[...me];for(const B of t)B.computed&&Vm(B);for(const B of t)B.computed||Vm(B)}function Vm(me,ve){(me!==gf||me.allowRecurse)&&(me.scheduler?me.scheduler():me.run())}const lw=V0("__proto__,__v_isRef,__isVue"),f1=new Set(Object.getOwnPropertyNames(Symbol).filter(me=>me!=="arguments"&&me!=="caller").map(me=>Symbol[me]).filter(W0)),uw=K0(),fw=K0(!1,!0),cw=K0(!0),Hm=hw();function hw(){const me={};return["includes","indexOf","lastIndexOf"].forEach(ve=>{me[ve]=function(...t){const B=bo(this);for(let x=0,f=this.length;x<f;x++)Nu(B,"get",x+"");const G=B[ve](...t);return G===-1||G===!1?B[ve](...t.map(bo)):G}}),["push","pop","shift","unshift","splice"].forEach(ve=>{me[ve]=function(...t){$h();const B=bo(this)[ve].apply(this,t);return Qh(),B}}),me}function K0(me=!1,ve=!1){return function(B,G,x){if(G==="__v_isReactive")return!me;if(G==="__v_isReadonly")return me;if(G==="__v_isShallow")return ve;if(G==="__v_raw"&&x===(me?ve?kw:d1:ve?p1:v1).get(B))return B;const f=Ni(B);if(!me&&f&&vo(Hm,G))return Reflect.get(Hm,G,x);const M=Reflect.get(B,G,x);return(W0(G)?f1.has(G):lw(G))||(me||Nu(B,"get",G),ve)?M:Ps(M)?f&&X0(G)?M:M.value:_s(M)?me?g1(M):nd(M):M}}const vw=c1(),pw=c1(!0);function c1(me=!1){return function(t,B,G,x){let f=t[B];if(Uh(f)&&Ps(f)&&!Ps(G))return!1;if(!me&&(!Gp(G)&&!Uh(G)&&(f=bo(f),G=bo(G)),!Ni(t)&&Ps(f)&&!Ps(G)))return f.value=G,!0;const M=Ni(t)&&X0(B)?Number(B)<t.length:vo(t,B),T=Reflect.set(t,B,G,x);return t===bo(x)&&(M?Iv(G,f)&&Kf(t,"set",B,G):Kf(t,"add",B,G)),T}}function dw(me,ve){const t=vo(me,ve);me[ve];const B=Reflect.deleteProperty(me,ve);return B&&t&&Kf(me,"delete",ve,void 0),B}function gw(me,ve){const t=Reflect.has(me,ve);return(!W0(ve)||!f1.has(ve))&&Nu(me,"has",ve),t}function mw(me){return Nu(me,"iterate",Ni(me)?"length":Xc),Reflect.ownKeys(me)}const h1={get:uw,set:vw,deleteProperty:dw,has:gw,ownKeys:mw},yw={get:cw,set(me,ve){return!0},deleteProperty(me,ve){return!0}},xw=Hl({},h1,{get:fw,set:pw}),J0=me=>me,rd=me=>Reflect.getPrototypeOf(me);function _p(me,ve,t=!1,B=!1){me=me.__v_raw;const G=bo(me),x=bo(ve);t||(ve!==x&&Nu(G,"get",ve),Nu(G,"get",x));const{has:f}=rd(G),M=B?J0:t?q0:Fv;if(f.call(G,ve))return M(me.get(ve));if(f.call(G,x))return M(me.get(x));me!==G&&me.get(ve)}function wp(me,ve=!1){const t=this.__v_raw,B=bo(t),G=bo(me);return ve||(me!==G&&Nu(B,"has",me),Nu(B,"has",G)),me===G?t.has(me):t.has(me)||t.has(G)}function Tp(me,ve=!1){return me=me.__v_raw,!ve&&Nu(bo(me),"iterate",Xc),Reflect.get(me,"size",me)}function Gm(me){me=bo(me);const ve=bo(this);return rd(ve).has.call(ve,me)||(ve.add(me),Kf(ve,"add",me,me)),this}function Ym(me,ve){ve=bo(ve);const t=bo(this),{has:B,get:G}=rd(t);let x=B.call(t,me);x||(me=bo(me),x=B.call(t,me));const f=G.call(t,me);return t.set(me,ve),x?Iv(ve,f)&&Kf(t,"set",me,ve):Kf(t,"add",me,ve),this}function Wm(me){const ve=bo(this),{has:t,get:B}=rd(ve);let G=t.call(ve,me);G||(me=bo(me),G=t.call(ve,me)),B&&B.call(ve,me);const x=ve.delete(me);return G&&Kf(ve,"delete",me,void 0),x}function Xm(){const me=bo(this),ve=me.size!==0,t=me.clear();return ve&&Kf(me,"clear",void 0,void 0),t}function Ap(me,ve){return function(B,G){const x=this,f=x.__v_raw,M=bo(f),T=ve?J0:me?q0:Fv;return!me&&Nu(M,"iterate",Xc),f.forEach((e,a)=>B.call(G,T(e),T(a),x))}}function Mp(me,ve,t){return function(...B){const G=this.__v_raw,x=bo(G),f=Oh(x),M=me==="entries"||me===Symbol.iterator&&f,T=me==="keys"&&f,e=G[me](...B),a=t?J0:ve?q0:Fv;return!ve&&Nu(x,"iterate",T?_0:Xc),{next(){const{value:i,done:n}=e.next();return n?{value:i,done:n}:{value:M?[a(i[0]),a(i[1])]:a(i),done:n}},[Symbol.iterator](){return this}}}}function hc(me){return function(...ve){return me==="delete"?!1:this}}function bw(){const me={get(x){return _p(this,x)},get size(){return Tp(this)},has:wp,add:Gm,set:Ym,delete:Wm,clear:Xm,forEach:Ap(!1,!1)},ve={get(x){return _p(this,x,!1,!0)},get size(){return Tp(this)},has:wp,add:Gm,set:Ym,delete:Wm,clear:Xm,forEach:Ap(!1,!0)},t={get(x){return _p(this,x,!0)},get size(){return Tp(this,!0)},has(x){return wp.call(this,x,!0)},add:hc("add"),set:hc("set"),delete:hc("delete"),clear:hc("clear"),forEach:Ap(!0,!1)},B={get(x){return _p(this,x,!0,!0)},get size(){return Tp(this,!0)},has(x){return wp.call(this,x,!0)},add:hc("add"),set:hc("set"),delete:hc("delete"),clear:hc("clear"),forEach:Ap(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(x=>{me[x]=Mp(x,!1,!1),t[x]=Mp(x,!0,!1),ve[x]=Mp(x,!1,!0),B[x]=Mp(x,!0,!0)}),[me,t,ve,B]}const[_w,ww,Tw,Aw]=bw();function $0(me,ve){const t=ve?me?Aw:Tw:me?ww:_w;return(B,G,x)=>G==="__v_isReactive"?!me:G==="__v_isReadonly"?me:G==="__v_raw"?B:Reflect.get(vo(t,G)&&G in B?t:B,G,x)}const Mw={get:$0(!1,!1)},Ew={get:$0(!1,!0)},Sw={get:$0(!0,!1)},v1=new WeakMap,p1=new WeakMap,d1=new WeakMap,kw=new WeakMap;function Cw(me){switch(me){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lw(me){return me.__v_skip||!Object.isExtensible(me)?0:Cw(tw(me))}function nd(me){return Uh(me)?me:Q0(me,!1,h1,Mw,v1)}function Pw(me){return Q0(me,!1,xw,Ew,p1)}function g1(me){return Q0(me,!0,yw,Sw,d1)}function Q0(me,ve,t,B,G){if(!_s(me)||me.__v_raw&&!(ve&&me.__v_isReactive))return me;const x=G.get(me);if(x)return x;const f=Lw(me);if(f===0)return me;const M=new Proxy(me,f===2?B:t);return G.set(me,M),M}function mc(me){return Uh(me)?mc(me.__v_raw):!!(me&&me.__v_isReactive)}function Uh(me){return!!(me&&me.__v_isReadonly)}function Gp(me){return!!(me&&me.__v_isShallow)}function m1(me){return mc(me)||Uh(me)}function bo(me){const ve=me&&me.__v_raw;return ve?bo(ve):me}function Vh(me){return Hp(me,"__v_skip",!0),me}const Fv=me=>_s(me)?nd(me):me,q0=me=>_s(me)?g1(me):me;function y1(me){gc&&gf&&(me=bo(me),u1(me.dep||(me.dep=j0())))}function x1(me,ve){me=bo(me),me.dep&&w0(me.dep)}function Ps(me){return!!(me&&me.__v_isRef===!0)}function jc(me){return Dw(me,!1)}function Dw(me,ve){return Ps(me)?me:new Rw(me,ve)}class Rw{constructor(ve,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?ve:bo(ve),this._value=t?ve:Fv(ve)}get value(){return y1(this),this._value}set value(ve){const t=this.__v_isShallow||Gp(ve)||Uh(ve);ve=t?ve:bo(ve),Iv(ve,this._rawValue)&&(this._rawValue=ve,this._value=t?ve:Fv(ve),x1(this))}}function Yp(me){return Ps(me)?me.value:me}const Iw={get:(me,ve,t)=>Yp(Reflect.get(me,ve,t)),set:(me,ve,t,B)=>{const G=me[ve];return Ps(G)&&!Ps(t)?(G.value=t,!0):Reflect.set(me,ve,t,B)}};function b1(me){return mc(me)?me:new Proxy(me,Iw)}function Fw(me){const ve=Ni(me)?new Array(me.length):{};for(const t in me)ve[t]=Ow(me,t);return ve}class zw{constructor(ve,t,B){this._object=ve,this._key=t,this._defaultValue=B,this.__v_isRef=!0}get value(){const ve=this._object[this._key];return ve===void 0?this._defaultValue:ve}set value(ve){this._object[this._key]=ve}}function Ow(me,ve,t){const B=me[ve];return Ps(B)?B:new zw(me,ve,t)}var _1;class Nw{constructor(ve,t,B,G){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[_1]=!1,this._dirty=!0,this.effect=new Z0(ve,()=>{this._dirty||(this._dirty=!0,x1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!G,this.__v_isReadonly=B}get value(){const ve=bo(this);return y1(ve),(ve._dirty||!ve._cacheable)&&(ve._dirty=!1,ve._value=ve.effect.run()),ve._value}set value(ve){this._setter(ve)}}_1="__v_isReadonly";function Bw(me,ve,t=!1){let B,G;const x=Qi(me);return x?(B=me,G=xf):(B=me.get,G=me.set),new Nw(B,G,x||!G,t)}function yc(me,ve,t,B){let G;try{G=B?me(...B):me()}catch(x){ad(x,ve,t)}return G}function tf(me,ve,t,B){if(Qi(me)){const x=yc(me,ve,t,B);return x&&qy(x)&&x.catch(f=>{ad(f,ve,t)}),x}const G=[];for(let x=0;x<me.length;x++)G.push(tf(me[x],ve,t,B));return G}function ad(me,ve,t,B=!0){const G=ve?ve.vnode:null;if(ve){let x=ve.parent;const f=ve.proxy,M=t;for(;x;){const e=x.ec;if(e){for(let a=0;a<e.length;a++)if(e[a](me,f,M)===!1)return}x=x.parent}const T=ve.appContext.config.errorHandler;if(T){yc(T,null,10,[me,f,M]);return}}Uw(me,t,G,B)}function Uw(me,ve,t,B=!0){console.error(me)}let zv=!1,T0=!1;const Vl=[];let Rf=0;const Nh=[];let Gf=null,Vc=0;const w1=Promise.resolve();let eg=null;function T1(me){const ve=eg||w1;return me?ve.then(this?me.bind(this):me):ve}function Vw(me){let ve=Rf+1,t=Vl.length;for(;ve<t;){const B=ve+t>>>1;Ov(Vl[B])<me?ve=B+1:t=B}return ve}function tg(me){(!Vl.length||!Vl.includes(me,zv&&me.allowRecurse?Rf+1:Rf))&&(me.id==null?Vl.push(me):Vl.splice(Vw(me.id),0,me),A1())}function A1(){!zv&&!T0&&(T0=!0,eg=w1.then(E1))}function Hw(me){const ve=Vl.indexOf(me);ve>Rf&&Vl.splice(ve,1)}function Gw(me){Ni(me)?Nh.push(...me):(!Gf||!Gf.includes(me,me.allowRecurse?Vc+1:Vc))&&Nh.push(me),A1()}function jm(me,ve=zv?Rf+1:0){for(;ve<Vl.length;ve++){const t=Vl[ve];t&&t.pre&&(Vl.splice(ve,1),ve--,t())}}function M1(me){if(Nh.length){const ve=[...new Set(Nh)];if(Nh.length=0,Gf){Gf.push(...ve);return}for(Gf=ve,Gf.sort((t,B)=>Ov(t)-Ov(B)),Vc=0;Vc<Gf.length;Vc++)Gf[Vc]();Gf=null,Vc=0}}const Ov=me=>me.id==null?1/0:me.id,Yw=(me,ve)=>{const t=Ov(me)-Ov(ve);if(t===0){if(me.pre&&!ve.pre)return-1;if(ve.pre&&!me.pre)return 1}return t};function E1(me){T0=!1,zv=!0,Vl.sort(Yw);const ve=xf;try{for(Rf=0;Rf<Vl.length;Rf++){const t=Vl[Rf];t&&t.active!==!1&&yc(t,null,14)}}finally{Rf=0,Vl.length=0,M1(),zv=!1,eg=null,(Vl.length||Nh.length)&&E1()}}function Ww(me,ve,...t){if(me.isUnmounted)return;const B=me.vnode.props||qo;let G=t;const x=ve.startsWith("update:"),f=x&&ve.slice(7);if(f&&f in B){const a=`${f==="modelValue"?"model":f}Modifiers`,{number:i,trim:n}=B[a]||qo;n&&(G=t.map(r=>ul(r)?r.trim():r)),i&&(G=t.map(n1))}let M,T=B[M=Qd(ve)]||B[M=Qd(Bh(ve))];!T&&x&&(T=B[M=Qd(Jh(ve))]),T&&tf(T,me,6,G);const e=B[M+"Once"];if(e){if(!me.emitted)me.emitted={};else if(me.emitted[M])return;me.emitted[M]=!0,tf(e,me,6,G)}}function S1(me,ve,t=!1){const B=ve.emitsCache,G=B.get(me);if(G!==void 0)return G;const x=me.emits;let f={},M=!1;if(!Qi(me)){const T=e=>{const a=S1(e,ve,!0);a&&(M=!0,Hl(f,a))};!t&&ve.mixins.length&&ve.mixins.forEach(T),me.extends&&T(me.extends),me.mixins&&me.mixins.forEach(T)}return!x&&!M?(_s(me)&&B.set(me,null),null):(Ni(x)?x.forEach(T=>f[T]=null):Hl(f,x),_s(me)&&B.set(me,f),f)}function id(me,ve){return!me||!qp(ve)?!1:(ve=ve.slice(2).replace(/Once$/,""),vo(me,ve[0].toLowerCase()+ve.slice(1))||vo(me,Jh(ve))||vo(me,ve))}let mf=null,k1=null;function Wp(me){const ve=mf;return mf=me,k1=me&&me.type.__scopeId||null,ve}function Xw(me,ve=mf,t){if(!ve||me._n)return me;const B=(...G)=>{B._d&&ry(-1);const x=Wp(ve);let f;try{f=me(...G)}finally{Wp(x),B._d&&ry(1)}return f};return B._n=!0,B._c=!0,B._d=!0,B}function e0(me){const{type:ve,vnode:t,proxy:B,withProxy:G,props:x,propsOptions:[f],slots:M,attrs:T,emit:e,render:a,renderCache:i,data:n,setupState:r,ctx:v,inheritAttrs:s}=me;let o,b;const g=Wp(me);try{if(t.shapeFlag&4){const c=G||B;o=Df(a.call(c,c,i,x,r,n,v)),b=T}else{const c=ve;o=Df(c.length>1?c(x,{attrs:T,slots:M,emit:e}):c(x,null)),b=ve.props?T:jw(T)}}catch(c){Lv.length=0,ad(c,me,1),o=Ul(Wf)}let d=o;if(b&&s!==!1){const c=Object.keys(b),{shapeFlag:m}=d;c.length&&m&7&&(f&&c.some(G0)&&(b=Zw(b,f)),d=bc(d,b))}return t.dirs&&(d=bc(d),d.dirs=d.dirs?d.dirs.concat(t.dirs):t.dirs),t.transition&&(d.transition=t.transition),o=d,Wp(g),o}const jw=me=>{let ve;for(const t in me)(t==="class"||t==="style"||qp(t))&&((ve||(ve={}))[t]=me[t]);return ve},Zw=(me,ve)=>{const t={};for(const B in me)(!G0(B)||!(B.slice(9)in ve))&&(t[B]=me[B]);return t};function Kw(me,ve,t){const{props:B,children:G,component:x}=me,{props:f,children:M,patchFlag:T}=ve,e=x.emitsOptions;if(ve.dirs||ve.transition)return!0;if(t&&T>=0){if(T&1024)return!0;if(T&16)return B?Zm(B,f,e):!!f;if(T&8){const a=ve.dynamicProps;for(let i=0;i<a.length;i++){const n=a[i];if(f[n]!==B[n]&&!id(e,n))return!0}}}else return(G||M)&&(!M||!M.$stable)?!0:B===f?!1:B?f?Zm(B,f,e):!0:!!f;return!1}function Zm(me,ve,t){const B=Object.keys(ve);if(B.length!==Object.keys(me).length)return!0;for(let G=0;G<B.length;G++){const x=B[G];if(ve[x]!==me[x]&&!id(t,x))return!0}return!1}function Jw({vnode:me,parent:ve},t){for(;ve&&ve.subTree===me;)(me=ve.vnode).el=t,ve=ve.parent}const $w=me=>me.__isSuspense;function Qw(me,ve){ve&&ve.pendingBranch?Ni(me)?ve.effects.push(...me):ve.effects.push(me):Gw(me)}function qw(me,ve){if(Al){let t=Al.provides;const B=Al.parent&&Al.parent.provides;B===t&&(t=Al.provides=Object.create(B)),t[me]=ve}}function kv(me,ve,t=!1){const B=Al||mf;if(B){const G=B.parent==null?B.vnode.appContext&&B.vnode.appContext.provides:B.parent.provides;if(G&&me in G)return G[me];if(arguments.length>1)return t&&Qi(ve)?ve.call(B.proxy):ve}}const Ep={};function zp(me,ve,t){return C1(me,ve,t)}function C1(me,ve,{immediate:t,deep:B,flush:G,onTrack:x,onTrigger:f}=qo){const M=Al;let T,e=!1,a=!1;if(Ps(me)?(T=()=>me.value,e=Gp(me)):mc(me)?(T=()=>me,B=!0):Ni(me)?(a=!0,e=me.some(d=>mc(d)||Gp(d)),T=()=>me.map(d=>{if(Ps(d))return d.value;if(mc(d))return Ih(d);if(Qi(d))return yc(d,M,2)})):Qi(me)?ve?T=()=>yc(me,M,2):T=()=>{if(!(M&&M.isUnmounted))return i&&i(),tf(me,M,3,[n])}:T=xf,ve&&B){const d=T;T=()=>Ih(d())}let i,n=d=>{i=b.onStop=()=>{yc(d,M,4)}},r;if(Bv)if(n=xf,ve?t&&tf(ve,M,3,[T(),a?[]:void 0,n]):T(),G==="sync"){const d=Z3();r=d.__watcherHandles||(d.__watcherHandles=[])}else return xf;let v=a?new Array(me.length).fill(Ep):Ep;const s=()=>{if(!!b.active)if(ve){const d=b.run();(B||e||(a?d.some((c,m)=>Iv(c,v[m])):Iv(d,v)))&&(i&&i(),tf(ve,M,3,[d,v===Ep?void 0:a&&v[0]===Ep?[]:v,n]),v=d)}else b.run()};s.allowRecurse=!!ve;let o;G==="sync"?o=s:G==="post"?o=()=>xu(s,M&&M.suspense):(s.pre=!0,M&&(s.id=M.uid),o=()=>tg(s));const b=new Z0(T,o);ve?t?s():v=b.run():G==="post"?xu(b.run.bind(b),M&&M.suspense):b.run();const g=()=>{b.stop(),M&&M.scope&&Y0(M.scope.effects,b)};return r&&r.push(g),g}function e3(me,ve,t){const B=this.proxy,G=ul(me)?me.includes(".")?L1(B,me):()=>B[me]:me.bind(B,B);let x;Qi(ve)?x=ve:(x=ve.handler,t=ve);const f=Al;Hh(this);const M=C1(G,x.bind(B),t);return f?Hh(f):Zc(),M}function L1(me,ve){const t=ve.split(".");return()=>{let B=me;for(let G=0;G<t.length&&B;G++)B=B[t[G]];return B}}function Ih(me,ve){if(!_s(me)||me.__v_skip||(ve=ve||new Set,ve.has(me)))return me;if(ve.add(me),Ps(me))Ih(me.value,ve);else if(Ni(me))for(let t=0;t<me.length;t++)Ih(me[t],ve);else if(Qy(me)||Oh(me))me.forEach(t=>{Ih(t,ve)});else if(t1(me))for(const t in me)Ih(me[t],ve);return me}function t3(){const me={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rg(()=>{me.isMounted=!0}),I1(()=>{me.isUnmounting=!0}),me}const ef=[Function,Array],r3={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ef,onEnter:ef,onAfterEnter:ef,onEnterCancelled:ef,onBeforeLeave:ef,onLeave:ef,onAfterLeave:ef,onLeaveCancelled:ef,onBeforeAppear:ef,onAppear:ef,onAfterAppear:ef,onAppearCancelled:ef},setup(me,{slots:ve}){const t=og(),B=t3();let G;return()=>{const x=ve.default&&D1(ve.default(),!0);if(!x||!x.length)return;let f=x[0];if(x.length>1){for(const s of x)if(s.type!==Wf){f=s;break}}const M=bo(me),{mode:T}=M;if(B.isLeaving)return t0(f);const e=Km(f);if(!e)return t0(f);const a=A0(e,M,B,t);M0(e,a);const i=t.subTree,n=i&&Km(i);let r=!1;const{getTransitionKey:v}=e.type;if(v){const s=v();G===void 0?G=s:s!==G&&(G=s,r=!0)}if(n&&n.type!==Wf&&(!Hc(e,n)||r)){const s=A0(n,M,B,t);if(M0(n,s),T==="out-in")return B.isLeaving=!0,s.afterLeave=()=>{B.isLeaving=!1,t.update.active!==!1&&t.update()},t0(f);T==="in-out"&&e.type!==Wf&&(s.delayLeave=(o,b,g)=>{const d=P1(B,n);d[String(n.key)]=n,o._leaveCb=()=>{b(),o._leaveCb=void 0,delete a.delayedLeave},a.delayedLeave=g})}return f}}},n3=r3;function P1(me,ve){const{leavingVNodes:t}=me;let B=t.get(ve.type);return B||(B=Object.create(null),t.set(ve.type,B)),B}function A0(me,ve,t,B){const{appear:G,mode:x,persisted:f=!1,onBeforeEnter:M,onEnter:T,onAfterEnter:e,onEnterCancelled:a,onBeforeLeave:i,onLeave:n,onAfterLeave:r,onLeaveCancelled:v,onBeforeAppear:s,onAppear:o,onAfterAppear:b,onAppearCancelled:g}=ve,d=String(me.key),c=P1(t,me),m=(u,A)=>{u&&tf(u,B,9,A)},l=(u,A)=>{const _=A[1];m(u,A),Ni(u)?u.every(p=>p.length<=1)&&_():u.length<=1&&_()},y={mode:x,persisted:f,beforeEnter(u){let A=M;if(!t.isMounted)if(G)A=s||M;else return;u._leaveCb&&u._leaveCb(!0);const _=c[d];_&&Hc(me,_)&&_.el._leaveCb&&_.el._leaveCb(),m(A,[u])},enter(u){let A=T,_=e,p=a;if(!t.isMounted)if(G)A=o||T,_=b||e,p=g||a;else return;let w=!1;const h=u._enterCb=L=>{w||(w=!0,L?m(p,[u]):m(_,[u]),y.delayedLeave&&y.delayedLeave(),u._enterCb=void 0)};A?l(A,[u,h]):h()},leave(u,A){const _=String(me.key);if(u._enterCb&&u._enterCb(!0),t.isUnmounting)return A();m(i,[u]);let p=!1;const w=u._leaveCb=h=>{p||(p=!0,A(),h?m(v,[u]):m(r,[u]),u._leaveCb=void 0,c[_]===me&&delete c[_])};c[_]=me,n?l(n,[u,w]):w()},clone(u){return A0(u,ve,t,B)}};return y}function t0(me){if(od(me))return me=bc(me),me.children=null,me}function Km(me){return od(me)?me.children?me.children[0]:void 0:me}function M0(me,ve){me.shapeFlag&6&&me.component?M0(me.component.subTree,ve):me.shapeFlag&128?(me.ssContent.transition=ve.clone(me.ssContent),me.ssFallback.transition=ve.clone(me.ssFallback)):me.transition=ve}function D1(me,ve=!1,t){let B=[],G=0;for(let x=0;x<me.length;x++){let f=me[x];const M=t==null?f.key:String(t)+String(f.key!=null?f.key:x);f.type===df?(f.patchFlag&128&&G++,B=B.concat(D1(f.children,ve,M))):(ve||f.type!==Wf)&&B.push(M!=null?bc(f,{key:M}):f)}if(G>1)for(let x=0;x<B.length;x++)B[x].patchFlag=-2;return B}const Op=me=>!!me.type.__asyncLoader,od=me=>me.type.__isKeepAlive;function a3(me,ve){R1(me,"a",ve)}function i3(me,ve){R1(me,"da",ve)}function R1(me,ve,t=Al){const B=me.__wdc||(me.__wdc=()=>{let G=t;for(;G;){if(G.isDeactivated)return;G=G.parent}return me()});if(sd(ve,B,t),t){let G=t.parent;for(;G&&G.parent;)od(G.parent.vnode)&&o3(B,ve,t,G),G=G.parent}}function o3(me,ve,t,B){const G=sd(ve,me,B,!0);ld(()=>{Y0(B[ve],G)},t)}function sd(me,ve,t=Al,B=!1){if(t){const G=t[me]||(t[me]=[]),x=ve.__weh||(ve.__weh=(...f)=>{if(t.isUnmounted)return;$h(),Hh(t);const M=tf(ve,t,me,f);return Zc(),Qh(),M});return B?G.unshift(x):G.push(x),x}}const $f=me=>(ve,t=Al)=>(!Bv||me==="sp")&&sd(me,(...B)=>ve(...B),t),s3=$f("bm"),rg=$f("m"),l3=$f("bu"),u3=$f("u"),I1=$f("bum"),ld=$f("um"),f3=$f("sp"),c3=$f("rtg"),h3=$f("rtc");function v3(me,ve=Al){sd("ec",me,ve)}function Nc(me,ve,t,B){const G=me.dirs,x=ve&&ve.dirs;for(let f=0;f<G.length;f++){const M=G[f];x&&(M.oldValue=x[f].value);let T=M.dir[B];T&&($h(),tf(T,t,8,[me.el,M,me,ve]),Qh())}}const p3=Symbol(),E0=me=>me?W1(me)?sg(me)||me.proxy:E0(me.parent):null,Cv=Hl(Object.create(null),{$:me=>me,$el:me=>me.vnode.el,$data:me=>me.data,$props:me=>me.props,$attrs:me=>me.attrs,$slots:me=>me.slots,$refs:me=>me.refs,$parent:me=>E0(me.parent),$root:me=>E0(me.root),$emit:me=>me.emit,$options:me=>ng(me),$forceUpdate:me=>me.f||(me.f=()=>tg(me.update)),$nextTick:me=>me.n||(me.n=T1.bind(me.proxy)),$watch:me=>e3.bind(me)}),r0=(me,ve)=>me!==qo&&!me.__isScriptSetup&&vo(me,ve),d3={get({_:me},ve){const{ctx:t,setupState:B,data:G,props:x,accessCache:f,type:M,appContext:T}=me;let e;if(ve[0]!=="$"){const r=f[ve];if(r!==void 0)switch(r){case 1:return B[ve];case 2:return G[ve];case 4:return t[ve];case 3:return x[ve]}else{if(r0(B,ve))return f[ve]=1,B[ve];if(G!==qo&&vo(G,ve))return f[ve]=2,G[ve];if((e=me.propsOptions[0])&&vo(e,ve))return f[ve]=3,x[ve];if(t!==qo&&vo(t,ve))return f[ve]=4,t[ve];S0&&(f[ve]=0)}}const a=Cv[ve];let i,n;if(a)return ve==="$attrs"&&Nu(me,"get",ve),a(me);if((i=M.__cssModules)&&(i=i[ve]))return i;if(t!==qo&&vo(t,ve))return f[ve]=4,t[ve];if(n=T.config.globalProperties,vo(n,ve))return n[ve]},set({_:me},ve,t){const{data:B,setupState:G,ctx:x}=me;return r0(G,ve)?(G[ve]=t,!0):B!==qo&&vo(B,ve)?(B[ve]=t,!0):vo(me.props,ve)||ve[0]==="$"&&ve.slice(1)in me?!1:(x[ve]=t,!0)},has({_:{data:me,setupState:ve,accessCache:t,ctx:B,appContext:G,propsOptions:x}},f){let M;return!!t[f]||me!==qo&&vo(me,f)||r0(ve,f)||(M=x[0])&&vo(M,f)||vo(B,f)||vo(Cv,f)||vo(G.config.globalProperties,f)},defineProperty(me,ve,t){return t.get!=null?me._.accessCache[ve]=0:vo(t,"value")&&this.set(me,ve,t.value,null),Reflect.defineProperty(me,ve,t)}};let S0=!0;function g3(me){const ve=ng(me),t=me.proxy,B=me.ctx;S0=!1,ve.beforeCreate&&Jm(ve.beforeCreate,me,"bc");const{data:G,computed:x,methods:f,watch:M,provide:T,inject:e,created:a,beforeMount:i,mounted:n,beforeUpdate:r,updated:v,activated:s,deactivated:o,beforeDestroy:b,beforeUnmount:g,destroyed:d,unmounted:c,render:m,renderTracked:l,renderTriggered:y,errorCaptured:u,serverPrefetch:A,expose:_,inheritAttrs:p,components:w,directives:h,filters:L}=ve;if(e&&m3(e,B,null,me.appContext.config.unwrapInjectedRef),f)for(const P in f){const F=f[P];Qi(F)&&(B[P]=F.bind(t))}if(G){const P=G.call(t,t);_s(P)&&(me.data=nd(P))}if(S0=!0,x)for(const P in x){const F=x[P],I=Qi(F)?F.bind(t,t):Qi(F.get)?F.get.bind(t,t):xf,D=!Qi(F)&&Qi(F.set)?F.set.bind(t):xf,R=jp({get:I,set:D});Object.defineProperty(B,P,{enumerable:!0,configurable:!0,get:()=>R.value,set:O=>R.value=O})}if(M)for(const P in M)F1(M[P],B,t,P);if(T){const P=Qi(T)?T.call(t):T;Reflect.ownKeys(P).forEach(F=>{qw(F,P[F])})}a&&Jm(a,me,"c");function S(P,F){Ni(F)?F.forEach(I=>P(I.bind(t))):F&&P(F.bind(t))}if(S(s3,i),S(rg,n),S(l3,r),S(u3,v),S(a3,s),S(i3,o),S(v3,u),S(h3,l),S(c3,y),S(I1,g),S(ld,c),S(f3,A),Ni(_))if(_.length){const P=me.exposed||(me.exposed={});_.forEach(F=>{Object.defineProperty(P,F,{get:()=>t[F],set:I=>t[F]=I})})}else me.exposed||(me.exposed={});m&&me.render===xf&&(me.render=m),p!=null&&(me.inheritAttrs=p),w&&(me.components=w),h&&(me.directives=h)}function m3(me,ve,t=xf,B=!1){Ni(me)&&(me=k0(me));for(const G in me){const x=me[G];let f;_s(x)?"default"in x?f=kv(x.from||G,x.default,!0):f=kv(x.from||G):f=kv(x),Ps(f)&&B?Object.defineProperty(ve,G,{enumerable:!0,configurable:!0,get:()=>f.value,set:M=>f.value=M}):ve[G]=f}}function Jm(me,ve,t){tf(Ni(me)?me.map(B=>B.bind(ve.proxy)):me.bind(ve.proxy),ve,t)}function F1(me,ve,t,B){const G=B.includes(".")?L1(t,B):()=>t[B];if(ul(me)){const x=ve[me];Qi(x)&&zp(G,x)}else if(Qi(me))zp(G,me.bind(t));else if(_s(me))if(Ni(me))me.forEach(x=>F1(x,ve,t,B));else{const x=Qi(me.handler)?me.handler.bind(t):ve[me.handler];Qi(x)&&zp(G,x,me)}}function ng(me){const ve=me.type,{mixins:t,extends:B}=ve,{mixins:G,optionsCache:x,config:{optionMergeStrategies:f}}=me.appContext,M=x.get(ve);let T;return M?T=M:!G.length&&!t&&!B?T=ve:(T={},G.length&&G.forEach(e=>Xp(T,e,f,!0)),Xp(T,ve,f)),_s(ve)&&x.set(ve,T),T}function Xp(me,ve,t,B=!1){const{mixins:G,extends:x}=ve;x&&Xp(me,x,t,!0),G&&G.forEach(f=>Xp(me,f,t,!0));for(const f in ve)if(!(B&&f==="expose")){const M=y3[f]||t&&t[f];me[f]=M?M(me[f],ve[f]):ve[f]}return me}const y3={data:$m,props:Uc,emits:Uc,methods:Uc,computed:Uc,beforeCreate:tu,created:tu,beforeMount:tu,mounted:tu,beforeUpdate:tu,updated:tu,beforeDestroy:tu,beforeUnmount:tu,destroyed:tu,unmounted:tu,activated:tu,deactivated:tu,errorCaptured:tu,serverPrefetch:tu,components:Uc,directives:Uc,watch:b3,provide:$m,inject:x3};function $m(me,ve){return ve?me?function(){return Hl(Qi(me)?me.call(this,this):me,Qi(ve)?ve.call(this,this):ve)}:ve:me}function x3(me,ve){return Uc(k0(me),k0(ve))}function k0(me){if(Ni(me)){const ve={};for(let t=0;t<me.length;t++)ve[me[t]]=me[t];return ve}return me}function tu(me,ve){return me?[...new Set([].concat(me,ve))]:ve}function Uc(me,ve){return me?Hl(Hl(Object.create(null),me),ve):ve}function b3(me,ve){if(!me)return ve;if(!ve)return me;const t=Hl(Object.create(null),me);for(const B in ve)t[B]=tu(me[B],ve[B]);return t}function _3(me,ve,t,B=!1){const G={},x={};Hp(x,cd,1),me.propsDefaults=Object.create(null),z1(me,ve,G,x);for(const f in me.propsOptions[0])f in G||(G[f]=void 0);t?me.props=B?G:Pw(G):me.type.props?me.props=G:me.props=x,me.attrs=x}function w3(me,ve,t,B){const{props:G,attrs:x,vnode:{patchFlag:f}}=me,M=bo(G),[T]=me.propsOptions;let e=!1;if((B||f>0)&&!(f&16)){if(f&8){const a=me.vnode.dynamicProps;for(let i=0;i<a.length;i++){let n=a[i];if(id(me.emitsOptions,n))continue;const r=ve[n];if(T)if(vo(x,n))r!==x[n]&&(x[n]=r,e=!0);else{const v=Bh(n);G[v]=C0(T,M,v,r,me,!1)}else r!==x[n]&&(x[n]=r,e=!0)}}}else{z1(me,ve,G,x)&&(e=!0);let a;for(const i in M)(!ve||!vo(ve,i)&&((a=Jh(i))===i||!vo(ve,a)))&&(T?t&&(t[i]!==void 0||t[a]!==void 0)&&(G[i]=C0(T,M,i,void 0,me,!0)):delete G[i]);if(x!==M)for(const i in x)(!ve||!vo(ve,i)&&!0)&&(delete x[i],e=!0)}e&&Kf(me,"set","$attrs")}function z1(me,ve,t,B){const[G,x]=me.propsOptions;let f=!1,M;if(ve)for(let T in ve){if(Fp(T))continue;const e=ve[T];let a;G&&vo(G,a=Bh(T))?!x||!x.includes(a)?t[a]=e:(M||(M={}))[a]=e:id(me.emitsOptions,T)||(!(T in B)||e!==B[T])&&(B[T]=e,f=!0)}if(x){const T=bo(t),e=M||qo;for(let a=0;a<x.length;a++){const i=x[a];t[i]=C0(G,T,i,e[i],me,!vo(e,i))}}return f}function C0(me,ve,t,B,G,x){const f=me[t];if(f!=null){const M=vo(f,"default");if(M&&B===void 0){const T=f.default;if(f.type!==Function&&Qi(T)){const{propsDefaults:e}=G;t in e?B=e[t]:(Hh(G),B=e[t]=T.call(null,ve),Zc())}else B=T}f[0]&&(x&&!M?B=!1:f[1]&&(B===""||B===Jh(t))&&(B=!0))}return B}function O1(me,ve,t=!1){const B=ve.propsCache,G=B.get(me);if(G)return G;const x=me.props,f={},M=[];let T=!1;if(!Qi(me)){const a=i=>{T=!0;const[n,r]=O1(i,ve,!0);Hl(f,n),r&&M.push(...r)};!t&&ve.mixins.length&&ve.mixins.forEach(a),me.extends&&a(me.extends),me.mixins&&me.mixins.forEach(a)}if(!x&&!T)return _s(me)&&B.set(me,zh),zh;if(Ni(x))for(let a=0;a<x.length;a++){const i=Bh(x[a]);Qm(i)&&(f[i]=qo)}else if(x)for(const a in x){const i=Bh(a);if(Qm(i)){const n=x[a],r=f[i]=Ni(n)||Qi(n)?{type:n}:Object.assign({},n);if(r){const v=ty(Boolean,r.type),s=ty(String,r.type);r[0]=v>-1,r[1]=s<0||v<s,(v>-1||vo(r,"default"))&&M.push(i)}}}const e=[f,M];return _s(me)&&B.set(me,e),e}function Qm(me){return me[0]!=="$"}function qm(me){const ve=me&&me.toString().match(/^\s*function (\w+)/);return ve?ve[1]:me===null?"null":""}function ey(me,ve){return qm(me)===qm(ve)}function ty(me,ve){return Ni(ve)?ve.findIndex(t=>ey(t,me)):Qi(ve)&&ey(ve,me)?0:-1}const N1=me=>me[0]==="_"||me==="$stable",ag=me=>Ni(me)?me.map(Df):[Df(me)],T3=(me,ve,t)=>{if(ve._n)return ve;const B=Xw((...G)=>ag(ve(...G)),t);return B._c=!1,B},B1=(me,ve,t)=>{const B=me._ctx;for(const G in me){if(N1(G))continue;const x=me[G];if(Qi(x))ve[G]=T3(G,x,B);else if(x!=null){const f=ag(x);ve[G]=()=>f}}},U1=(me,ve)=>{const t=ag(ve);me.slots.default=()=>t},A3=(me,ve)=>{if(me.vnode.shapeFlag&32){const t=ve._;t?(me.slots=bo(ve),Hp(ve,"_",t)):B1(ve,me.slots={})}else me.slots={},ve&&U1(me,ve);Hp(me.slots,cd,1)},M3=(me,ve,t)=>{const{vnode:B,slots:G}=me;let x=!0,f=qo;if(B.shapeFlag&32){const M=ve._;M?t&&M===1?x=!1:(Hl(G,ve),!t&&M===1&&delete G._):(x=!ve.$stable,B1(ve,G)),f=ve}else ve&&(U1(me,ve),f={default:1});if(x)for(const M in G)!N1(M)&&!(M in f)&&delete G[M]};function V1(){return{app:null,config:{isNativeTag:Q2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let E3=0;function S3(me,ve){return function(B,G=null){Qi(B)||(B=Object.assign({},B)),G!=null&&!_s(G)&&(G=null);const x=V1(),f=new Set;let M=!1;const T=x.app={_uid:E3++,_component:B,_props:G,_container:null,_context:x,_instance:null,version:K3,get config(){return x.config},set config(e){},use(e,...a){return f.has(e)||(e&&Qi(e.install)?(f.add(e),e.install(T,...a)):Qi(e)&&(f.add(e),e(T,...a))),T},mixin(e){return x.mixins.includes(e)||x.mixins.push(e),T},component(e,a){return a?(x.components[e]=a,T):x.components[e]},directive(e,a){return a?(x.directives[e]=a,T):x.directives[e]},mount(e,a,i){if(!M){const n=Ul(B,G);return n.appContext=x,a&&ve?ve(n,e):me(n,e,i),M=!0,T._container=e,e.__vue_app__=T,sg(n.component)||n.component.proxy}},unmount(){M&&(me(null,T._container),delete T._container.__vue_app__)},provide(e,a){return x.provides[e]=a,T}};return T}}function L0(me,ve,t,B,G=!1){if(Ni(me)){me.forEach((n,r)=>L0(n,ve&&(Ni(ve)?ve[r]:ve),t,B,G));return}if(Op(B)&&!G)return;const x=B.shapeFlag&4?sg(B.component)||B.component.proxy:B.el,f=G?null:x,{i:M,r:T}=me,e=ve&&ve.r,a=M.refs===qo?M.refs={}:M.refs,i=M.setupState;if(e!=null&&e!==T&&(ul(e)?(a[e]=null,vo(i,e)&&(i[e]=null)):Ps(e)&&(e.value=null)),Qi(T))yc(T,M,12,[f,a]);else{const n=ul(T),r=Ps(T);if(n||r){const v=()=>{if(me.f){const s=n?vo(i,T)?i[T]:a[T]:T.value;G?Ni(s)&&Y0(s,x):Ni(s)?s.includes(x)||s.push(x):n?(a[T]=[x],vo(i,T)&&(i[T]=a[T])):(T.value=[x],me.k&&(a[me.k]=T.value))}else n?(a[T]=f,vo(i,T)&&(i[T]=f)):r&&(T.value=f,me.k&&(a[me.k]=f))};f?(v.id=-1,xu(v,t)):v()}}}const xu=Qw;function k3(me){return C3(me)}function C3(me,ve){const t=aw();t.__VUE__=!0;const{insert:B,remove:G,patchProp:x,createElement:f,createText:M,createComment:T,setText:e,setElementText:a,parentNode:i,nextSibling:n,setScopeId:r=xf,insertStaticContent:v}=me,s=(J,U,V,q=null,re=null,Z=null,Q=!1,ie=null,oe=!!U.dynamicChildren)=>{if(J===U)return;J&&!Hc(J,U)&&(q=j(J),O(J,re,Z,!0),J=null),U.patchFlag===-2&&(oe=!1,U.dynamicChildren=null);const{type:ne,ref:se,shapeFlag:_e}=U;switch(ne){case ud:o(J,U,V,q);break;case Wf:b(J,U,V,q);break;case n0:J==null&&g(U,V,q,Q);break;case df:w(J,U,V,q,re,Z,Q,ie,oe);break;default:_e&1?m(J,U,V,q,re,Z,Q,ie,oe):_e&6?h(J,U,V,q,re,Z,Q,ie,oe):(_e&64||_e&128)&&ne.process(J,U,V,q,re,Z,Q,ie,oe,ae)}se!=null&&re&&L0(se,J&&J.ref,Z,U||J,!U)},o=(J,U,V,q)=>{if(J==null)B(U.el=M(U.children),V,q);else{const re=U.el=J.el;U.children!==J.children&&e(re,U.children)}},b=(J,U,V,q)=>{J==null?B(U.el=T(U.children||""),V,q):U.el=J.el},g=(J,U,V,q)=>{[J.el,J.anchor]=v(J.children,U,V,q,J.el,J.anchor)},d=({el:J,anchor:U},V,q)=>{let re;for(;J&&J!==U;)re=n(J),B(J,V,q),J=re;B(U,V,q)},c=({el:J,anchor:U})=>{let V;for(;J&&J!==U;)V=n(J),G(J),J=V;G(U)},m=(J,U,V,q,re,Z,Q,ie,oe)=>{Q=Q||U.type==="svg",J==null?l(U,V,q,re,Z,Q,ie,oe):A(J,U,re,Z,Q,ie,oe)},l=(J,U,V,q,re,Z,Q,ie)=>{let oe,ne;const{type:se,props:_e,shapeFlag:ue,transition:ge,dirs:xe}=J;if(oe=J.el=f(J.type,Z,_e&&_e.is,_e),ue&8?a(oe,J.children):ue&16&&u(J.children,oe,null,q,re,Z&&se!=="foreignObject",Q,ie),xe&&Nc(J,null,q,"created"),_e){for(const be in _e)be!=="value"&&!Fp(be)&&x(oe,be,null,_e[be],Z,J.children,q,re,ee);"value"in _e&&x(oe,"value",null,_e.value),(ne=_e.onVnodeBeforeMount)&&Lf(ne,q,J)}y(oe,J,J.scopeId,Q,q),xe&&Nc(J,null,q,"beforeMount");const ye=(!re||re&&!re.pendingBranch)&&ge&&!ge.persisted;ye&&ge.beforeEnter(oe),B(oe,U,V),((ne=_e&&_e.onVnodeMounted)||ye||xe)&&xu(()=>{ne&&Lf(ne,q,J),ye&&ge.enter(oe),xe&&Nc(J,null,q,"mounted")},re)},y=(J,U,V,q,re)=>{if(V&&r(J,V),q)for(let Z=0;Z<q.length;Z++)r(J,q[Z]);if(re){let Z=re.subTree;if(U===Z){const Q=re.vnode;y(J,Q,Q.scopeId,Q.slotScopeIds,re.parent)}}},u=(J,U,V,q,re,Z,Q,ie,oe=0)=>{for(let ne=oe;ne<J.length;ne++){const se=J[ne]=ie?pc(J[ne]):Df(J[ne]);s(null,se,U,V,q,re,Z,Q,ie)}},A=(J,U,V,q,re,Z,Q)=>{const ie=U.el=J.el;let{patchFlag:oe,dynamicChildren:ne,dirs:se}=U;oe|=J.patchFlag&16;const _e=J.props||qo,ue=U.props||qo;let ge;V&&Bc(V,!1),(ge=ue.onVnodeBeforeUpdate)&&Lf(ge,V,U,J),se&&Nc(U,J,V,"beforeUpdate"),V&&Bc(V,!0);const xe=re&&U.type!=="foreignObject";if(ne?_(J.dynamicChildren,ne,ie,V,q,xe,Z):Q||F(J,U,ie,null,V,q,xe,Z,!1),oe>0){if(oe&16)p(ie,U,_e,ue,V,q,re);else if(oe&2&&_e.class!==ue.class&&x(ie,"class",null,ue.class,re),oe&4&&x(ie,"style",_e.style,ue.style,re),oe&8){const ye=U.dynamicProps;for(let be=0;be<ye.length;be++){const Se=ye[be],Re=_e[Se],Ve=ue[Se];(Ve!==Re||Se==="value")&&x(ie,Se,Re,Ve,re,J.children,V,q,ee)}}oe&1&&J.children!==U.children&&a(ie,U.children)}else!Q&&ne==null&&p(ie,U,_e,ue,V,q,re);((ge=ue.onVnodeUpdated)||se)&&xu(()=>{ge&&Lf(ge,V,U,J),se&&Nc(U,J,V,"updated")},q)},_=(J,U,V,q,re,Z,Q)=>{for(let ie=0;ie<U.length;ie++){const oe=J[ie],ne=U[ie],se=oe.el&&(oe.type===df||!Hc(oe,ne)||oe.shapeFlag&70)?i(oe.el):V;s(oe,ne,se,null,q,re,Z,Q,!0)}},p=(J,U,V,q,re,Z,Q)=>{if(V!==q){if(V!==qo)for(const ie in V)!Fp(ie)&&!(ie in q)&&x(J,ie,V[ie],null,Q,U.children,re,Z,ee);for(const ie in q){if(Fp(ie))continue;const oe=q[ie],ne=V[ie];oe!==ne&&ie!=="value"&&x(J,ie,ne,oe,Q,U.children,re,Z,ee)}"value"in q&&x(J,"value",V.value,q.value)}},w=(J,U,V,q,re,Z,Q,ie,oe)=>{const ne=U.el=J?J.el:M(""),se=U.anchor=J?J.anchor:M("");let{patchFlag:_e,dynamicChildren:ue,slotScopeIds:ge}=U;ge&&(ie=ie?ie.concat(ge):ge),J==null?(B(ne,V,q),B(se,V,q),u(U.children,V,se,re,Z,Q,ie,oe)):_e>0&&_e&64&&ue&&J.dynamicChildren?(_(J.dynamicChildren,ue,V,re,Z,Q,ie),(U.key!=null||re&&U===re.subTree)&&H1(J,U,!0)):F(J,U,V,se,re,Z,Q,ie,oe)},h=(J,U,V,q,re,Z,Q,ie,oe)=>{U.slotScopeIds=ie,J==null?U.shapeFlag&512?re.ctx.activate(U,V,q,Q,oe):L(U,V,q,re,Z,Q,oe):E(J,U,oe)},L=(J,U,V,q,re,Z,Q)=>{const ie=J.component=V3(J,q,re);if(od(J)&&(ie.ctx.renderer=ae),H3(ie),ie.asyncDep){if(re&&re.registerDep(ie,S),!J.el){const oe=ie.subTree=Ul(Wf);b(null,oe,U,V)}return}S(ie,J,U,V,re,Z,Q)},E=(J,U,V)=>{const q=U.component=J.component;if(Kw(J,U,V))if(q.asyncDep&&!q.asyncResolved){P(q,U,V);return}else q.next=U,Hw(q.update),q.update();else U.el=J.el,q.vnode=U},S=(J,U,V,q,re,Z,Q)=>{const ie=()=>{if(J.isMounted){let{next:se,bu:_e,u:ue,parent:ge,vnode:xe}=J,ye=se,be;Bc(J,!1),se?(se.el=xe.el,P(J,se,Q)):se=xe,_e&&qd(_e),(be=se.props&&se.props.onVnodeBeforeUpdate)&&Lf(be,ge,se,xe),Bc(J,!0);const Se=e0(J),Re=J.subTree;J.subTree=Se,s(Re,Se,i(Re.el),j(Re),J,re,Z),se.el=Se.el,ye===null&&Jw(J,Se.el),ue&&xu(ue,re),(be=se.props&&se.props.onVnodeUpdated)&&xu(()=>Lf(be,ge,se,xe),re)}else{let se;const{el:_e,props:ue}=U,{bm:ge,m:xe,parent:ye}=J,be=Op(U);if(Bc(J,!1),ge&&qd(ge),!be&&(se=ue&&ue.onVnodeBeforeMount)&&Lf(se,ye,U),Bc(J,!0),_e&&K){const Se=()=>{J.subTree=e0(J),K(_e,J.subTree,J,re,null)};be?U.type.__asyncLoader().then(()=>!J.isUnmounted&&Se()):Se()}else{const Se=J.subTree=e0(J);s(null,Se,V,q,J,re,Z),U.el=Se.el}if(xe&&xu(xe,re),!be&&(se=ue&&ue.onVnodeMounted)){const Se=U;xu(()=>Lf(se,ye,Se),re)}(U.shapeFlag&256||ye&&Op(ye.vnode)&&ye.vnode.shapeFlag&256)&&J.a&&xu(J.a,re),J.isMounted=!0,U=V=q=null}},oe=J.effect=new Z0(ie,()=>tg(ne),J.scope),ne=J.update=()=>oe.run();ne.id=J.uid,Bc(J,!0),ne()},P=(J,U,V)=>{U.component=J;const q=J.vnode.props;J.vnode=U,J.next=null,w3(J,U.props,q,V),M3(J,U.children,V),$h(),jm(),Qh()},F=(J,U,V,q,re,Z,Q,ie,oe=!1)=>{const ne=J&&J.children,se=J?J.shapeFlag:0,_e=U.children,{patchFlag:ue,shapeFlag:ge}=U;if(ue>0){if(ue&128){D(ne,_e,V,q,re,Z,Q,ie,oe);return}else if(ue&256){I(ne,_e,V,q,re,Z,Q,ie,oe);return}}ge&8?(se&16&&ee(ne,re,Z),_e!==ne&&a(V,_e)):se&16?ge&16?D(ne,_e,V,q,re,Z,Q,ie,oe):ee(ne,re,Z,!0):(se&8&&a(V,""),ge&16&&u(_e,V,q,re,Z,Q,ie,oe))},I=(J,U,V,q,re,Z,Q,ie,oe)=>{J=J||zh,U=U||zh;const ne=J.length,se=U.length,_e=Math.min(ne,se);let ue;for(ue=0;ue<_e;ue++){const ge=U[ue]=oe?pc(U[ue]):Df(U[ue]);s(J[ue],ge,V,null,re,Z,Q,ie,oe)}ne>se?ee(J,re,Z,!0,!1,_e):u(U,V,q,re,Z,Q,ie,oe,_e)},D=(J,U,V,q,re,Z,Q,ie,oe)=>{let ne=0;const se=U.length;let _e=J.length-1,ue=se-1;for(;ne<=_e&&ne<=ue;){const ge=J[ne],xe=U[ne]=oe?pc(U[ne]):Df(U[ne]);if(Hc(ge,xe))s(ge,xe,V,null,re,Z,Q,ie,oe);else break;ne++}for(;ne<=_e&&ne<=ue;){const ge=J[_e],xe=U[ue]=oe?pc(U[ue]):Df(U[ue]);if(Hc(ge,xe))s(ge,xe,V,null,re,Z,Q,ie,oe);else break;_e--,ue--}if(ne>_e){if(ne<=ue){const ge=ue+1,xe=ge<se?U[ge].el:q;for(;ne<=ue;)s(null,U[ne]=oe?pc(U[ne]):Df(U[ne]),V,xe,re,Z,Q,ie,oe),ne++}}else if(ne>ue)for(;ne<=_e;)O(J[ne],re,Z,!0),ne++;else{const ge=ne,xe=ne,ye=new Map;for(ne=xe;ne<=ue;ne++){const Ye=U[ne]=oe?pc(U[ne]):Df(U[ne]);Ye.key!=null&&ye.set(Ye.key,ne)}let be,Se=0;const Re=ue-xe+1;let Ve=!1,Ae=0;const Ce=new Array(Re);for(ne=0;ne<Re;ne++)Ce[ne]=0;for(ne=ge;ne<=_e;ne++){const Ye=J[ne];if(Se>=Re){O(Ye,re,Z,!0);continue}let ze;if(Ye.key!=null)ze=ye.get(Ye.key);else for(be=xe;be<=ue;be++)if(Ce[be-xe]===0&&Hc(Ye,U[be])){ze=be;break}ze===void 0?O(Ye,re,Z,!0):(Ce[ze-xe]=ne+1,ze>=Ae?Ae=ze:Ve=!0,s(Ye,U[ze],V,null,re,Z,Q,ie,oe),Se++)}const Ze=Ve?L3(Ce):zh;for(be=Ze.length-1,ne=Re-1;ne>=0;ne--){const Ye=xe+ne,ze=U[Ye],Ie=Ye+1<se?U[Ye+1].el:q;Ce[ne]===0?s(null,ze,V,Ie,re,Z,Q,ie,oe):Ve&&(be<0||ne!==Ze[be]?R(ze,V,Ie,2):be--)}}},R=(J,U,V,q,re=null)=>{const{el:Z,type:Q,transition:ie,children:oe,shapeFlag:ne}=J;if(ne&6){R(J.component.subTree,U,V,q);return}if(ne&128){J.suspense.move(U,V,q);return}if(ne&64){Q.move(J,U,V,ae);return}if(Q===df){B(Z,U,V);for(let _e=0;_e<oe.length;_e++)R(oe[_e],U,V,q);B(J.anchor,U,V);return}if(Q===n0){d(J,U,V);return}if(q!==2&&ne&1&&ie)if(q===0)ie.beforeEnter(Z),B(Z,U,V),xu(()=>ie.enter(Z),re);else{const{leave:_e,delayLeave:ue,afterLeave:ge}=ie,xe=()=>B(Z,U,V),ye=()=>{_e(Z,()=>{xe(),ge&&ge()})};ue?ue(Z,xe,ye):ye()}else B(Z,U,V)},O=(J,U,V,q=!1,re=!1)=>{const{type:Z,props:Q,ref:ie,children:oe,dynamicChildren:ne,shapeFlag:se,patchFlag:_e,dirs:ue}=J;if(ie!=null&&L0(ie,null,V,J,!0),se&256){U.ctx.deactivate(J);return}const ge=se&1&&ue,xe=!Op(J);let ye;if(xe&&(ye=Q&&Q.onVnodeBeforeUnmount)&&Lf(ye,U,J),se&6)Y(J.component,V,q);else{if(se&128){J.suspense.unmount(V,q);return}ge&&Nc(J,null,U,"beforeUnmount"),se&64?J.type.remove(J,U,V,re,ae,q):ne&&(Z!==df||_e>0&&_e&64)?ee(ne,U,V,!1,!0):(Z===df&&_e&384||!re&&se&16)&&ee(oe,U,V),q&&z(J)}(xe&&(ye=Q&&Q.onVnodeUnmounted)||ge)&&xu(()=>{ye&&Lf(ye,U,J),ge&&Nc(J,null,U,"unmounted")},V)},z=J=>{const{type:U,el:V,anchor:q,transition:re}=J;if(U===df){H(V,q);return}if(U===n0){c(J);return}const Z=()=>{G(V),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(J.shapeFlag&1&&re&&!re.persisted){const{leave:Q,delayLeave:ie}=re,oe=()=>Q(V,Z);ie?ie(J.el,Z,oe):oe()}else Z()},H=(J,U)=>{let V;for(;J!==U;)V=n(J),G(J),J=V;G(U)},Y=(J,U,V)=>{const{bum:q,scope:re,update:Z,subTree:Q,um:ie}=J;q&&qd(q),re.stop(),Z&&(Z.active=!1,O(Q,J,U,V)),ie&&xu(ie,U),xu(()=>{J.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},ee=(J,U,V,q=!1,re=!1,Z=0)=>{for(let Q=Z;Q<J.length;Q++)O(J[Q],U,V,q,re)},j=J=>J.shapeFlag&6?j(J.component.subTree):J.shapeFlag&128?J.suspense.next():n(J.anchor||J.el),X=(J,U,V)=>{J==null?U._vnode&&O(U._vnode,null,null,!0):s(U._vnode||null,J,U,null,null,null,V),jm(),M1(),U._vnode=J},ae={p:s,um:O,m:R,r:z,mt:L,mc:u,pc:F,pbc:_,n:j,o:me};let fe,K;return ve&&([fe,K]=ve(ae)),{render:X,hydrate:fe,createApp:S3(X,fe)}}function Bc({effect:me,update:ve},t){me.allowRecurse=ve.allowRecurse=t}function H1(me,ve,t=!1){const B=me.children,G=ve.children;if(Ni(B)&&Ni(G))for(let x=0;x<B.length;x++){const f=B[x];let M=G[x];M.shapeFlag&1&&!M.dynamicChildren&&((M.patchFlag<=0||M.patchFlag===32)&&(M=G[x]=pc(G[x]),M.el=f.el),t||H1(f,M)),M.type===ud&&(M.el=f.el)}}function L3(me){const ve=me.slice(),t=[0];let B,G,x,f,M;const T=me.length;for(B=0;B<T;B++){const e=me[B];if(e!==0){if(G=t[t.length-1],me[G]<e){ve[B]=G,t.push(B);continue}for(x=0,f=t.length-1;x<f;)M=x+f>>1,me[t[M]]<e?x=M+1:f=M;e<me[t[x]]&&(x>0&&(ve[B]=t[x-1]),t[x]=B)}}for(x=t.length,f=t[x-1];x-- >0;)t[x]=f,f=ve[f];return t}const P3=me=>me.__isTeleport,df=Symbol(void 0),ud=Symbol(void 0),Wf=Symbol(void 0),n0=Symbol(void 0),Lv=[];let yf=null;function Vv(me=!1){Lv.push(yf=me?null:[])}function D3(){Lv.pop(),yf=Lv[Lv.length-1]||null}let Nv=1;function ry(me){Nv+=me}function G1(me){return me.dynamicChildren=Nv>0?yf||zh:null,D3(),Nv>0&&yf&&yf.push(me),me}function fd(me,ve,t,B,G,x){return G1(xo(me,ve,t,B,G,x,!0))}function R3(me,ve,t,B,G){return G1(Ul(me,ve,t,B,G,!0))}function I3(me){return me?me.__v_isVNode===!0:!1}function Hc(me,ve){return me.type===ve.type&&me.key===ve.key}const cd="__vInternal",Y1=({key:me})=>me!=null?me:null,Np=({ref:me,ref_key:ve,ref_for:t})=>me!=null?ul(me)||Ps(me)||Qi(me)?{i:mf,r:me,k:ve,f:!!t}:me:null;function xo(me,ve=null,t=null,B=0,G=null,x=me===df?0:1,f=!1,M=!1){const T={__v_isVNode:!0,__v_skip:!0,type:me,props:ve,key:ve&&Y1(ve),ref:ve&&Np(ve),scopeId:k1,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:B,dynamicProps:G,dynamicChildren:null,appContext:null,ctx:mf};return M?(ig(T,t),x&128&&me.normalize(T)):t&&(T.shapeFlag|=ul(t)?8:16),Nv>0&&!f&&yf&&(T.patchFlag>0||x&6)&&T.patchFlag!==32&&yf.push(T),T}const Ul=F3;function F3(me,ve=null,t=null,B=0,G=null,x=!1){if((!me||me===p3)&&(me=Wf),I3(me)){const M=bc(me,ve,!0);return t&&ig(M,t),Nv>0&&!x&&yf&&(M.shapeFlag&6?yf[yf.indexOf(me)]=M:yf.push(M)),M.patchFlag|=-2,M}if(X3(me)&&(me=me.__vccOpts),ve){ve=z3(ve);let{class:M,style:T}=ve;M&&!ul(M)&&(ve.class=Qp(M)),_s(T)&&(m1(T)&&!Ni(T)&&(T=Hl({},T)),ve.style=H0(T))}const f=ul(me)?1:$w(me)?128:P3(me)?64:_s(me)?4:Qi(me)?2:0;return xo(me,ve,t,B,G,f,x,!0)}function z3(me){return me?m1(me)||cd in me?Hl({},me):me:null}function bc(me,ve,t=!1){const{props:B,ref:G,patchFlag:x,children:f}=me,M=ve?N3(B||{},ve):B;return{__v_isVNode:!0,__v_skip:!0,type:me.type,props:M,key:M&&Y1(M),ref:ve&&ve.ref?t&&G?Ni(G)?G.concat(Np(ve)):[G,Np(ve)]:Np(ve):G,scopeId:me.scopeId,slotScopeIds:me.slotScopeIds,children:f,target:me.target,targetAnchor:me.targetAnchor,staticCount:me.staticCount,shapeFlag:me.shapeFlag,patchFlag:ve&&me.type!==df?x===-1?16:x|16:x,dynamicProps:me.dynamicProps,dynamicChildren:me.dynamicChildren,appContext:me.appContext,dirs:me.dirs,transition:me.transition,component:me.component,suspense:me.suspense,ssContent:me.ssContent&&bc(me.ssContent),ssFallback:me.ssFallback&&bc(me.ssFallback),el:me.el,anchor:me.anchor,ctx:me.ctx}}function O3(me=" ",ve=0){return Ul(ud,null,me,ve)}function Df(me){return me==null||typeof me=="boolean"?Ul(Wf):Ni(me)?Ul(df,null,me.slice()):typeof me=="object"?pc(me):Ul(ud,null,String(me))}function pc(me){return me.el===null&&me.patchFlag!==-1||me.memo?me:bc(me)}function ig(me,ve){let t=0;const{shapeFlag:B}=me;if(ve==null)ve=null;else if(Ni(ve))t=16;else if(typeof ve=="object")if(B&65){const G=ve.default;G&&(G._c&&(G._d=!1),ig(me,G()),G._c&&(G._d=!0));return}else{t=32;const G=ve._;!G&&!(cd in ve)?ve._ctx=mf:G===3&&mf&&(mf.slots._===1?ve._=1:(ve._=2,me.patchFlag|=1024))}else Qi(ve)?(ve={default:ve,_ctx:mf},t=32):(ve=String(ve),B&64?(t=16,ve=[O3(ve)]):t=8);me.children=ve,me.shapeFlag|=t}function N3(...me){const ve={};for(let t=0;t<me.length;t++){const B=me[t];for(const G in B)if(G==="class")ve.class!==B.class&&(ve.class=Qp([ve.class,B.class]));else if(G==="style")ve.style=H0([ve.style,B.style]);else if(qp(G)){const x=ve[G],f=B[G];f&&x!==f&&!(Ni(x)&&x.includes(f))&&(ve[G]=x?[].concat(x,f):f)}else G!==""&&(ve[G]=B[G])}return ve}function Lf(me,ve,t,B=null){tf(me,ve,7,[t,B])}const B3=V1();let U3=0;function V3(me,ve,t){const B=me.type,G=(ve?ve.appContext:me.appContext)||B3,x={uid:U3++,vnode:me,type:B,parent:ve,appContext:G,root:null,next:null,subTree:null,effect:null,update:null,scope:new a1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:ve?ve.provides:Object.create(G.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:O1(B,G),emitsOptions:S1(B,G),emit:null,emitted:null,propsDefaults:qo,inheritAttrs:B.inheritAttrs,ctx:qo,data:qo,props:qo,attrs:qo,slots:qo,refs:qo,setupState:qo,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=ve?ve.root:x,x.emit=Ww.bind(null,x),me.ce&&me.ce(x),x}let Al=null;const og=()=>Al||mf,Hh=me=>{Al=me,me.scope.on()},Zc=()=>{Al&&Al.scope.off(),Al=null};function W1(me){return me.vnode.shapeFlag&4}let Bv=!1;function H3(me,ve=!1){Bv=ve;const{props:t,children:B}=me.vnode,G=W1(me);_3(me,t,G,ve),A3(me,B);const x=G?G3(me,ve):void 0;return Bv=!1,x}function G3(me,ve){const t=me.type;me.accessCache=Object.create(null),me.proxy=Vh(new Proxy(me.ctx,d3));const{setup:B}=t;if(B){const G=me.setupContext=B.length>1?W3(me):null;Hh(me),$h();const x=yc(B,me,0,[me.props,G]);if(Qh(),Zc(),qy(x)){if(x.then(Zc,Zc),ve)return x.then(f=>{ny(me,f,ve)}).catch(f=>{ad(f,me,0)});me.asyncDep=x}else ny(me,x,ve)}else X1(me,ve)}function ny(me,ve,t){Qi(ve)?me.type.__ssrInlineRender?me.ssrRender=ve:me.render=ve:_s(ve)&&(me.setupState=b1(ve)),X1(me,t)}let ay;function X1(me,ve,t){const B=me.type;if(!me.render){if(!ve&&ay&&!B.render){const G=B.template||ng(me).template;if(G){const{isCustomElement:x,compilerOptions:f}=me.appContext.config,{delimiters:M,compilerOptions:T}=B,e=Hl(Hl({isCustomElement:x,delimiters:M},f),T);B.render=ay(G,e)}}me.render=B.render||xf}Hh(me),$h(),g3(me),Qh(),Zc()}function Y3(me){return new Proxy(me.attrs,{get(ve,t){return Nu(me,"get","$attrs"),ve[t]}})}function W3(me){const ve=B=>{me.exposed=B||{}};let t;return{get attrs(){return t||(t=Y3(me))},slots:me.slots,emit:me.emit,expose:ve}}function sg(me){if(me.exposed)return me.exposeProxy||(me.exposeProxy=new Proxy(b1(Vh(me.exposed)),{get(ve,t){if(t in ve)return ve[t];if(t in Cv)return Cv[t](me)},has(ve,t){return t in ve||t in Cv}}))}function X3(me){return Qi(me)&&"__vccOpts"in me}const jp=(me,ve)=>Bw(me,ve,Bv),j3=Symbol(""),Z3=()=>kv(j3),K3="3.2.45",J3="http://www.w3.org/2000/svg",Gc=typeof document<"u"?document:null,iy=Gc&&Gc.createElement("template"),$3={insert:(me,ve,t)=>{ve.insertBefore(me,t||null)},remove:me=>{const ve=me.parentNode;ve&&ve.removeChild(me)},createElement:(me,ve,t,B)=>{const G=ve?Gc.createElementNS(J3,me):Gc.createElement(me,t?{is:t}:void 0);return me==="select"&&B&&B.multiple!=null&&G.setAttribute("multiple",B.multiple),G},createText:me=>Gc.createTextNode(me),createComment:me=>Gc.createComment(me),setText:(me,ve)=>{me.nodeValue=ve},setElementText:(me,ve)=>{me.textContent=ve},parentNode:me=>me.parentNode,nextSibling:me=>me.nextSibling,querySelector:me=>Gc.querySelector(me),setScopeId(me,ve){me.setAttribute(ve,"")},insertStaticContent(me,ve,t,B,G,x){const f=t?t.previousSibling:ve.lastChild;if(G&&(G===x||G.nextSibling))for(;ve.insertBefore(G.cloneNode(!0),t),!(G===x||!(G=G.nextSibling)););else{iy.innerHTML=B?`<svg>${me}</svg>`:me;const M=iy.content;if(B){const T=M.firstChild;for(;T.firstChild;)M.appendChild(T.firstChild);M.removeChild(T)}ve.insertBefore(M,t)}return[f?f.nextSibling:ve.firstChild,t?t.previousSibling:ve.lastChild]}};function Q3(me,ve,t){const B=me._vtc;B&&(ve=(ve?[ve,...B]:[...B]).join(" ")),ve==null?me.removeAttribute("class"):t?me.setAttribute("class",ve):me.className=ve}function q3(me,ve,t){const B=me.style,G=ul(t);if(t&&!G){for(const x in t)P0(B,x,t[x]);if(ve&&!ul(ve))for(const x in ve)t[x]==null&&P0(B,x,"")}else{const x=B.display;G?ve!==t&&(B.cssText=t):ve&&me.removeAttribute("style"),"_vod"in me&&(B.display=x)}}const oy=/\s*!important$/;function P0(me,ve,t){if(Ni(t))t.forEach(B=>P0(me,ve,B));else if(t==null&&(t=""),ve.startsWith("--"))me.setProperty(ve,t);else{const B=eT(me,ve);oy.test(t)?me.setProperty(Jh(B),t.replace(oy,""),"important"):me[B]=t}}const sy=["Webkit","Moz","ms"],a0={};function eT(me,ve){const t=a0[ve];if(t)return t;let B=Bh(ve);if(B!=="filter"&&B in me)return a0[ve]=B;B=r1(B);for(let G=0;G<sy.length;G++){const x=sy[G]+B;if(x in me)return a0[ve]=x}return ve}const ly="http://www.w3.org/1999/xlink";function tT(me,ve,t,B,G){if(B&&ve.startsWith("xlink:"))t==null?me.removeAttributeNS(ly,ve.slice(6,ve.length)):me.setAttributeNS(ly,ve,t);else{const x=J2(ve);t==null||x&&!Jy(t)?me.removeAttribute(ve):me.setAttribute(ve,x?"":t)}}function rT(me,ve,t,B,G,x,f){if(ve==="innerHTML"||ve==="textContent"){B&&f(B,G,x),me[ve]=t==null?"":t;return}if(ve==="value"&&me.tagName!=="PROGRESS"&&!me.tagName.includes("-")){me._value=t;const T=t==null?"":t;(me.value!==T||me.tagName==="OPTION")&&(me.value=T),t==null&&me.removeAttribute(ve);return}let M=!1;if(t===""||t==null){const T=typeof me[ve];T==="boolean"?t=Jy(t):t==null&&T==="string"?(t="",M=!0):T==="number"&&(t=0,M=!0)}try{me[ve]=t}catch{}M&&me.removeAttribute(ve)}function nT(me,ve,t,B){me.addEventListener(ve,t,B)}function aT(me,ve,t,B){me.removeEventListener(ve,t,B)}function iT(me,ve,t,B,G=null){const x=me._vei||(me._vei={}),f=x[ve];if(B&&f)f.value=B;else{const[M,T]=oT(ve);if(B){const e=x[ve]=uT(B,G);nT(me,M,e,T)}else f&&(aT(me,M,f,T),x[ve]=void 0)}}const uy=/(?:Once|Passive|Capture)$/;function oT(me){let ve;if(uy.test(me)){ve={};let B;for(;B=me.match(uy);)me=me.slice(0,me.length-B[0].length),ve[B[0].toLowerCase()]=!0}return[me[2]===":"?me.slice(3):Jh(me.slice(2)),ve]}let i0=0;const sT=Promise.resolve(),lT=()=>i0||(sT.then(()=>i0=0),i0=Date.now());function uT(me,ve){const t=B=>{if(!B._vts)B._vts=Date.now();else if(B._vts<=t.attached)return;tf(fT(B,t.value),ve,5,[B])};return t.value=me,t.attached=lT(),t}function fT(me,ve){if(Ni(ve)){const t=me.stopImmediatePropagation;return me.stopImmediatePropagation=()=>{t.call(me),me._stopped=!0},ve.map(B=>G=>!G._stopped&&B&&B(G))}else return ve}const fy=/^on[a-z]/,cT=(me,ve,t,B,G=!1,x,f,M,T)=>{ve==="class"?Q3(me,B,G):ve==="style"?q3(me,t,B):qp(ve)?G0(ve)||iT(me,ve,t,B,f):(ve[0]==="."?(ve=ve.slice(1),!0):ve[0]==="^"?(ve=ve.slice(1),!1):hT(me,ve,B,G))?rT(me,ve,B,x,f,M,T):(ve==="true-value"?me._trueValue=B:ve==="false-value"&&(me._falseValue=B),tT(me,ve,B,G))};function hT(me,ve,t,B){return B?!!(ve==="innerHTML"||ve==="textContent"||ve in me&&fy.test(ve)&&Qi(t)):ve==="spellcheck"||ve==="draggable"||ve==="translate"||ve==="form"||ve==="list"&&me.tagName==="INPUT"||ve==="type"&&me.tagName==="TEXTAREA"||fy.test(ve)&&ul(t)?!1:ve in me}const vT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};n3.props;const pT=Hl({patchProp:cT},$3);let cy;function dT(){return cy||(cy=k3(pT))}const gT=(...me)=>{const ve=dT().createApp(...me),{mount:t}=ve;return ve.mount=B=>{const G=mT(B);if(!G)return;const x=ve._component;!Qi(x)&&!x.render&&!x.template&&(x.template=G.innerHTML),G.innerHTML="";const f=t(G,!1,G instanceof SVGElement);return G instanceof Element&&(G.removeAttribute("v-cloak"),G.setAttribute("data-v-app","")),f},ve};function mT(me){return ul(me)?document.querySelector(me):me}var yT=!1;/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let j1;const hd=me=>j1=me,Z1=Symbol();function D0(me){return me&&typeof me=="object"&&Object.prototype.toString.call(me)==="[object Object]"&&typeof me.toJSON!="function"}var Pv;(function(me){me.direct="direct",me.patchObject="patch object",me.patchFunction="patch function"})(Pv||(Pv={}));function xT(){const me=i1(!0),ve=me.run(()=>jc({}));let t=[],B=[];const G=Vh({install(x){hd(G),G._a=x,x.provide(Z1,G),x.config.globalProperties.$pinia=G,B.forEach(f=>t.push(f)),B=[]},use(x){return!this._a&&!yT?B.push(x):t.push(x),this},_p:t,_a:null,_e:me,_s:new Map,state:ve});return G}const K1=()=>{};function hy(me,ve,t,B=K1){me.push(ve);const G=()=>{const x=me.indexOf(ve);x>-1&&(me.splice(x,1),B())};return!t&&og()&&ld(G),G}function Sh(me,...ve){me.slice().forEach(t=>{t(...ve)})}function R0(me,ve){me instanceof Map&&ve instanceof Map&&ve.forEach((t,B)=>me.set(B,t)),me instanceof Set&&ve instanceof Set&&ve.forEach(me.add,me);for(const t in ve){if(!ve.hasOwnProperty(t))continue;const B=ve[t],G=me[t];D0(G)&&D0(B)&&me.hasOwnProperty(t)&&!Ps(B)&&!mc(B)?me[t]=R0(G,B):me[t]=B}return me}const bT=Symbol();function _T(me){return!D0(me)||!me.hasOwnProperty(bT)}const{assign:dc}=Object;function wT(me){return!!(Ps(me)&&me.effect)}function TT(me,ve,t,B){const{state:G,actions:x,getters:f}=ve,M=t.state.value[me];let T;function e(){M||(t.state.value[me]=G?G():{});const a=Fw(t.state.value[me]);return dc(a,x,Object.keys(f||{}).reduce((i,n)=>(i[n]=Vh(jp(()=>{hd(t);const r=t._s.get(me);return f[n].call(r,r)})),i),{}))}return T=J1(me,e,ve,t,B,!0),T.$reset=function(){const i=G?G():{};this.$patch(n=>{dc(n,i)})},T}function J1(me,ve,t={},B,G,x){let f;const M=dc({actions:{}},t),T={deep:!0};let e,a,i=Vh([]),n=Vh([]),r;const v=B.state.value[me];!x&&!v&&(B.state.value[me]={}),jc({});let s;function o(y){let u;e=a=!1,typeof y=="function"?(y(B.state.value[me]),u={type:Pv.patchFunction,storeId:me,events:r}):(R0(B.state.value[me],y),u={type:Pv.patchObject,payload:y,storeId:me,events:r});const A=s=Symbol();T1().then(()=>{s===A&&(e=!0)}),a=!0,Sh(i,u,B.state.value[me])}const b=K1;function g(){f.stop(),i=[],n=[],B._s.delete(me)}function d(y,u){return function(){hd(B);const A=Array.from(arguments),_=[],p=[];function w(E){_.push(E)}function h(E){p.push(E)}Sh(n,{args:A,name:y,store:m,after:w,onError:h});let L;try{L=u.apply(this&&this.$id===me?this:m,A)}catch(E){throw Sh(p,E),E}return L instanceof Promise?L.then(E=>(Sh(_,E),E)).catch(E=>(Sh(p,E),Promise.reject(E))):(Sh(_,L),L)}}const c={_p:B,$id:me,$onAction:hy.bind(null,n),$patch:o,$reset:b,$subscribe(y,u={}){const A=hy(i,y,u.detached,()=>_()),_=f.run(()=>zp(()=>B.state.value[me],p=>{(u.flush==="sync"?a:e)&&y({storeId:me,type:Pv.direct,events:r},p)},dc({},T,u)));return A},$dispose:g},m=nd(c);B._s.set(me,m);const l=B._e.run(()=>(f=i1(),f.run(()=>ve())));for(const y in l){const u=l[y];if(Ps(u)&&!wT(u)||mc(u))x||(v&&_T(u)&&(Ps(u)?u.value=v[y]:R0(u,v[y])),B.state.value[me][y]=u);else if(typeof u=="function"){const A=d(y,u);l[y]=A,M.actions[y]=u}}return dc(m,l),dc(bo(m),l),Object.defineProperty(m,"$state",{get:()=>B.state.value[me],set:y=>{o(u=>{dc(u,y)})}}),B._p.forEach(y=>{dc(m,f.run(()=>y({store:m,app:B._a,pinia:B,options:M})))}),v&&x&&t.hydrate&&t.hydrate(m.$state,v),e=!0,a=!0,m}function AT(me,ve,t){let B,G;const x=typeof ve=="function";typeof me=="string"?(B=me,G=x?t:ve):(G=me,B=me.id);function f(M,T){const e=og();return M=M||e&&kv(Z1),M&&hd(M),M=j1,M._s.has(B)||(x?J1(B,ve,G,M):TT(B,G,M)),M._s.get(B)}return f.$id=B,f}var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MT(me){return me&&me.__esModule&&Object.prototype.hasOwnProperty.call(me,"default")?me.default:me}function ET(me){var ve=me.default;if(typeof ve=="function"){var t=function(){return ve.apply(this,arguments)};t.prototype=ve.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(me).forEach(function(B){var G=Object.getOwnPropertyDescriptor(me,B);Object.defineProperty(t,B,G.get?G:{enumerable:!0,get:function(){return me[B]}})}),t}function Sp(me){throw new Error('Could not dynamically require "'+me+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $1={exports:{}};(function(me,ve){(function(t){me.exports=t()})(function(){return function(){function t(B,G,x){function f(e,a){if(!G[e]){if(!B[e]){var i=typeof Sp=="function"&&Sp;if(!a&&i)return i(e,!0);if(M)return M(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=G[e]={exports:{}};B[e][0].call(r.exports,function(v){var s=B[e][1][v];return f(s||v)},r,r.exports,t,B,G,x)}return G[e].exports}for(var M=typeof Sp=="function"&&Sp,T=0;T<x.length;T++)f(x[T]);return f}return t}()({1:[function(t,B,G){var x=t("../src/lib"),f={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var M in f){var T=M.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");x.addStyleRule(T,f[M])}},{"../src/lib":515}],2:[function(t,B,G){B.exports=t("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(t,B,G){B.exports=t("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(t,B,G){B.exports=t("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(t,B,G){B.exports=t("../src/traces/box")},{"../src/traces/box":688}],6:[function(t,B,G){B.exports=t("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(t,B,G){B.exports=t("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(t,B,G){B.exports=t("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(t,B,G){B.exports=t("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(t,B,G){B.exports=t("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(t,B,G){B.exports=t("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(t,B,G){B.exports=t("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(t,B,G){B.exports=t("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(t,B,G){B.exports=t("../src/core")},{"../src/core":493}],15:[function(t,B,G){B.exports=t("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(t,B,G){B.exports=t("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(t,B,G){B.exports=t("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(t,B,G){B.exports=t("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(t,B,G){B.exports=t("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(t,B,G){B.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(t,B,G){B.exports=t("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(t,B,G){B.exports=t("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(t,B,G){B.exports=t("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(t,B,G){B.exports=t("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(t,B,G){B.exports=t("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(t,B,G){B.exports=t("../src/traces/image")},{"../src/traces/image":861}],27:[function(t,B,G){var x=t("./core");x.register([t("./bar"),t("./box"),t("./heatmap"),t("./histogram"),t("./histogram2d"),t("./histogram2dcontour"),t("./contour"),t("./scatterternary"),t("./violin"),t("./funnel"),t("./waterfall"),t("./image"),t("./pie"),t("./sunburst"),t("./treemap"),t("./icicle"),t("./funnelarea"),t("./scatter3d"),t("./surface"),t("./isosurface"),t("./volume"),t("./mesh3d"),t("./cone"),t("./streamtube"),t("./scattergeo"),t("./choropleth"),t("./scattergl"),t("./splom"),t("./pointcloud"),t("./heatmapgl"),t("./parcoords"),t("./parcats"),t("./scattermapbox"),t("./choroplethmapbox"),t("./densitymapbox"),t("./sankey"),t("./indicator"),t("./table"),t("./carpet"),t("./scattercarpet"),t("./contourcarpet"),t("./ohlc"),t("./candlestick"),t("./scatterpolar"),t("./scatterpolargl"),t("./barpolar"),t("./scattersmith"),t("./aggregate"),t("./filter"),t("./groupby"),t("./sort"),t("./calendars")]),B.exports=x},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(t,B,G){B.exports=t("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(t,B,G){B.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(t,B,G){B.exports=t("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(t,B,G){B.exports=t("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(t,B,G){B.exports=t("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(t,B,G){B.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(t,B,G){B.exports=t("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(t,B,G){B.exports=t("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(t,B,G){B.exports=t("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(t,B,G){B.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(t,B,G){B.exports=t("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(t,B,G){B.exports=t("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(t,B,G){B.exports=t("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(t,B,G){B.exports=t("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(t,B,G){B.exports=t("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(t,B,G){B.exports=t("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(t,B,G){B.exports=t("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(t,B,G){B.exports=t("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(t,B,G){B.exports=t("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(t,B,G){B.exports=t("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(t,B,G){B.exports=t("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(t,B,G){B.exports=t("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(t,B,G){B.exports=t("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(t,B,G){B.exports=t("../src/traces/table")},{"../src/traces/table":1082}],52:[function(t,B,G){B.exports=t("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(t,B,G){B.exports=t("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(t,B,G){B.exports=t("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(t,B,G){B.exports=t("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-array"),t("d3-collection"),t("d3-shape"),t("elementary-circuits-directed-graph")):f(x.d3=x.d3||{},x.d3,x.d3,x.d3,null)})(this,function(x,f,M,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(ue){return ue.target.depth}function i(ue){return ue.depth}function n(ue,ge){return ge-1-ue.height}function r(ue,ge){return ue.sourceLinks.length?ue.depth:ge-1}function v(ue){return ue.targetLinks.length?ue.depth:ue.sourceLinks.length?f.min(ue.sourceLinks,a)-1:0}function s(ue){return function(){return ue}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function b(ue,ge){return d(ue.source,ge.source)||ue.index-ge.index}function g(ue,ge){return d(ue.target,ge.target)||ue.index-ge.index}function d(ue,ge){return ue.partOfCycle===ge.partOfCycle?ue.y0-ge.y0:ue.circularLinkType==="top"||ge.circularLinkType==="bottom"?-1:1}function c(ue){return ue.value}function m(ue){return(ue.y0+ue.y1)/2}function l(ue){return m(ue.source)}function y(ue){return m(ue.target)}function u(ue){return ue.index}function A(ue){return ue.nodes}function _(ue){return ue.links}function p(ue,ge){var xe=ue.get(ge);if(!xe)throw new Error("missing: "+ge);return xe}function w(ue,ge){return ge(ue)}var h=25,L=10,E=.3;function S(){var ue=0,ge=0,xe=1,ye=1,be=24,Se,Re=u,Ve=r,Ae=A,Ce=_,Ze=32,Ye=2,ze,Ie=null;function Ge(){var St={nodes:Ae.apply(null,arguments),links:Ce.apply(null,arguments)};dt(St),P(St,Re,Ie),Rt(St),Ct(St),F(St,Re),Kt(St,Ze,Re),Ot(St);for(var Xe=4,at=0;at<Xe;at++)Q(St,ye,Re),ie(St,ye,Re),q(St,ge,ye,Re),Q(St,ye,Re),ie(St,ye,Re);return _e(St,ge,ye),H(St,Ye,ye,Re),St}Ge.nodeId=function(St){return arguments.length?(Re=typeof St=="function"?St:s(St),Ge):Re},Ge.nodeAlign=function(St){return arguments.length?(Ve=typeof St=="function"?St:s(St),Ge):Ve},Ge.nodeWidth=function(St){return arguments.length?(be=+St,Ge):be},Ge.nodePadding=function(St){return arguments.length?(Se=+St,Ge):Se},Ge.nodes=function(St){return arguments.length?(Ae=typeof St=="function"?St:s(St),Ge):Ae},Ge.links=function(St){return arguments.length?(Ce=typeof St=="function"?St:s(St),Ge):Ce},Ge.size=function(St){return arguments.length?(ue=ge=0,xe=+St[0],ye=+St[1],Ge):[xe-ue,ye-ge]},Ge.extent=function(St){return arguments.length?(ue=+St[0][0],xe=+St[1][0],ge=+St[0][1],ye=+St[1][1],Ge):[[ue,ge],[xe,ye]]},Ge.iterations=function(St){return arguments.length?(Ze=+St,Ge):Ze},Ge.circularLinkGap=function(St){return arguments.length?(Ye=+St,Ge):Ye},Ge.nodePaddingRatio=function(St){return arguments.length?(ze=+St,Ge):ze},Ge.sortNodes=function(St){return arguments.length?(Ie=St,Ge):Ie},Ge.update=function(St){return F(St,Re),Ot(St),St.links.forEach(function(Xe){Xe.circular&&(Xe.circularLinkType=Xe.y0+Xe.y1<ye?"top":"bottom",Xe.source.circularLinkType=Xe.circularLinkType,Xe.target.circularLinkType=Xe.circularLinkType)}),Q(St,ye,Re,!1),ie(St,ye,Re),H(St,Ye,ye,Re),St};function dt(St){St.nodes.forEach(function(at,We){at.index=We,at.sourceLinks=[],at.targetLinks=[]});var Xe=M.map(St.nodes,Re);return St.links.forEach(function(at,We){at.index=We;var Ee=at.source,He=at.target;(typeof Ee>"u"?"undefined":o(Ee))!=="object"&&(Ee=at.source=p(Xe,Ee)),(typeof He>"u"?"undefined":o(He))!=="object"&&(He=at.target=p(Xe,He)),Ee.sourceLinks.push(at),He.targetLinks.push(at)}),St}function Rt(St){St.nodes.forEach(function(Xe){Xe.partOfCycle=!1,Xe.value=Math.max(f.sum(Xe.sourceLinks,c),f.sum(Xe.targetLinks,c)),Xe.sourceLinks.forEach(function(at){at.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=at.circularLinkType)}),Xe.targetLinks.forEach(function(at){at.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=at.circularLinkType)})})}function Qt(St){var Xe=0,at=0,We=0,Ee=0,He=f.max(St.nodes,function(Ke){return Ke.column});return St.links.forEach(function(Ke){Ke.circular&&(Ke.circularLinkType=="top"?Xe=Xe+Ke.width:at=at+Ke.width,Ke.target.column==0&&(Ee=Ee+Ke.width),Ke.source.column==He&&(We=We+Ke.width))}),Xe=Xe>0?Xe+h+L:Xe,at=at>0?at+h+L:at,We=We>0?We+h+L:We,Ee=Ee>0?Ee+h+L:Ee,{top:Xe,bottom:at,left:Ee,right:We}}function Bt(St,Xe){var at=f.max(St.nodes,function(mt){return mt.column}),We=xe-ue,Ee=ye-ge,He=We+Xe.right+Xe.left,Ke=Ee+Xe.top+Xe.bottom,et=We/He,At=Ee/Ke;return ue=ue*et+Xe.left,xe=Xe.right==0?xe:xe*et,ge=ge*At+Xe.top,ye=ye*At,St.nodes.forEach(function(mt){mt.x0=ue+mt.column*((xe-ue-be)/at),mt.x1=mt.x0+be}),At}function Ct(St){var Xe,at,We;for(Xe=St.nodes,at=[],We=0;Xe.length;++We,Xe=at,at=[])Xe.forEach(function(Ee){Ee.depth=We,Ee.sourceLinks.forEach(function(He){at.indexOf(He.target)<0&&!He.circular&&at.push(He.target)})});for(Xe=St.nodes,at=[],We=0;Xe.length;++We,Xe=at,at=[])Xe.forEach(function(Ee){Ee.height=We,Ee.targetLinks.forEach(function(He){at.indexOf(He.source)<0&&!He.circular&&at.push(He.source)})});St.nodes.forEach(function(Ee){Ee.column=Math.floor(Ve.call(null,Ee,We))})}function Kt(St,Xe,at){var We=M.nest().key(function(mt){return mt.column}).sortKeys(f.ascending).entries(St.nodes).map(function(mt){return mt.values});Ke(at),At();for(var Ee=1,He=Xe;He>0;--He)et(Ee*=.99,at),At();function Ke(mt){if(ze){var Mt=1/0;We.forEach(function(Xt){var Wt=ye*ze/(Xt.length+1);Mt=Wt<Mt?Wt:Mt}),Se=Mt}var Gt=f.min(We,function(Xt){return(ye-ge-(Xt.length-1)*Se)/f.sum(Xt,c)});Gt=Gt*E,St.links.forEach(function(Xt){Xt.width=Xt.value*Gt});var zt=Qt(St),Ht=Bt(St,zt);Gt=Gt*Ht,St.links.forEach(function(Xt){Xt.width=Xt.value*Gt}),We.forEach(function(Xt){var Wt=Xt.length;Xt.forEach(function(sr,Gr){sr.depth==We.length-1&&Wt==1||sr.depth==0&&Wt==1?(sr.y0=ye/2-sr.value*Gt,sr.y1=sr.y0+sr.value*Gt):sr.partOfCycle?R(sr,mt)==0?(sr.y0=ye/2+Gr,sr.y1=sr.y0+sr.value*Gt):sr.circularLinkType=="top"?(sr.y0=ge+Gr,sr.y1=sr.y0+sr.value*Gt):(sr.y0=ye-sr.value*Gt-Gr,sr.y1=sr.y0+sr.value*Gt):zt.top==0||zt.bottom==0?(sr.y0=(ye-ge)/Wt*Gr,sr.y1=sr.y0+sr.value*Gt):(sr.y0=(ye-ge)/2-Wt/2+Gr,sr.y1=sr.y0+sr.value*Gt)})})}function et(mt,Mt){var Gt=We.length;We.forEach(function(zt){var Ht=zt.length,Xt=zt[0].depth;zt.forEach(function(Wt){var sr;if((Wt.sourceLinks.length||Wt.targetLinks.length)&&!(Wt.partOfCycle&&R(Wt,Mt)>0))if(Xt==0&&Ht==1)sr=Wt.y1-Wt.y0,Wt.y0=ye/2-sr/2,Wt.y1=ye/2+sr/2;else if(Xt==Gt-1&&Ht==1)sr=Wt.y1-Wt.y0,Wt.y0=ye/2-sr/2,Wt.y1=ye/2+sr/2;else{var Gr=0,cn=f.mean(Wt.sourceLinks,y),en=f.mean(Wt.targetLinks,l);cn&&en?Gr=(cn+en)/2:Gr=cn||en;var st=(Gr-m(Wt))*mt;Wt.y0+=st,Wt.y1+=st}})})}function At(){We.forEach(function(mt){var Mt,Gt,zt=ge,Ht=mt.length,Xt;for(mt.sort(d),Xt=0;Xt<Ht;++Xt)Mt=mt[Xt],Gt=zt-Mt.y0,Gt>0&&(Mt.y0+=Gt,Mt.y1+=Gt),zt=Mt.y1+Se;if(Gt=zt-Se-ye,Gt>0)for(zt=Mt.y0-=Gt,Mt.y1-=Gt,Xt=Ht-2;Xt>=0;--Xt)Mt=mt[Xt],Gt=Mt.y1+Se-zt,Gt>0&&(Mt.y0-=Gt,Mt.y1-=Gt),zt=Mt.y0})}}function Ot(St){St.nodes.forEach(function(Xe){Xe.sourceLinks.sort(g),Xe.targetLinks.sort(b)}),St.nodes.forEach(function(Xe){var at=Xe.y0,We=at,Ee=Xe.y1,He=Ee;Xe.sourceLinks.forEach(function(Ke){Ke.circular?(Ke.y0=Ee-Ke.width/2,Ee=Ee-Ke.width):(Ke.y0=at+Ke.width/2,at+=Ke.width)}),Xe.targetLinks.forEach(function(Ke){Ke.circular?(Ke.y1=He-Ke.width/2,He=He-Ke.width):(Ke.y1=We+Ke.width/2,We+=Ke.width)})})}return Ge}function P(ue,ge,xe){var ye=0;if(xe===null){for(var be=[],Se=0;Se<ue.links.length;Se++){var Re=ue.links[Se],Ve=Re.source.index,Ae=Re.target.index;be[Ve]||(be[Ve]=[]),be[Ae]||(be[Ae]=[]),be[Ve].indexOf(Ae)===-1&&be[Ve].push(Ae)}var Ce=e(be);Ce.sort(function(Ie,Ge){return Ie.length-Ge.length});var Ze={};for(Se=0;Se<Ce.length;Se++){var Ye=Ce[Se],ze=Ye.slice(-2);Ze[ze[0]]||(Ze[ze[0]]={}),Ze[ze[0]][ze[1]]=!0}ue.links.forEach(function(Ie){var Ge=Ie.target.index,dt=Ie.source.index;Ge===dt||Ze[dt]&&Ze[dt][Ge]?(Ie.circular=!0,Ie.circularLinkID=ye,ye=ye+1):Ie.circular=!1})}else ue.links.forEach(function(Ie){Ie.source[xe]<Ie.target[xe]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=ye,ye=ye+1)})}function F(ue,ge){var xe=0,ye=0;ue.links.forEach(function(be){be.circular&&(be.source.circularLinkType||be.target.circularLinkType?be.circularLinkType=be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:be.circularLinkType=xe<ye?"top":"bottom",be.circularLinkType=="top"?xe=xe+1:ye=ye+1,ue.nodes.forEach(function(Se){(w(Se,ge)==w(be.source,ge)||w(Se,ge)==w(be.target,ge))&&(Se.circularLinkType=be.circularLinkType)}))}),ue.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),se(be,ge)&&(be.circularLinkType=be.source.circularLinkType))})}function I(ue){var ge=Math.abs(ue.y1-ue.y0),xe=Math.abs(ue.target.x0-ue.source.x1);return Math.atan(xe/ge)}function D(ue,ge){return ue.source.column<ge.target.column?!1:!(ue.target.column>ge.source.column)}function R(ue,ge){var xe=0;ue.sourceLinks.forEach(function(be){xe=be.circular&&!se(be,ge)?xe+1:xe});var ye=0;return ue.targetLinks.forEach(function(be){ye=be.circular&&!se(be,ge)?ye+1:ye}),xe+ye}function O(ue){var ge=ue.source.sourceLinks,xe=0;ge.forEach(function(Se){xe=Se.circular?xe+1:xe});var ye=ue.target.targetLinks,be=0;return ye.forEach(function(Se){be=Se.circular?be+1:be}),!(xe>1||be>1)}function z(ue,ge,xe){return ue.sort(ee),ue.forEach(function(ye,be){var Se=0;if(se(ye,xe)&&O(ye))ye.circularPathData.verticalBuffer=Se+ye.width/2;else{var Re=0;for(Re;Re<be;Re++)if(D(ue[be],ue[Re])){var Ve=ue[Re].circularPathData.verticalBuffer+ue[Re].width/2+ge;Se=Ve>Se?Ve:Se}ye.circularPathData.verticalBuffer=Se+ye.width/2}}),ue}function H(ue,ge,xe,ye){var be=5,Se=f.min(ue.links,function(Ae){return Ae.source.y0});ue.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var Re=ue.links.filter(function(Ae){return Ae.circularLinkType=="top"});z(Re,ge,ye);var Ve=ue.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});z(Ve,ge,ye),ue.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+L,Ae.circularPathData.leftNodeBuffer=be,Ae.circularPathData.rightNodeBuffer=be,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,se(Ae,ye)&&O(Ae))Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Ce=Ae.source.column,Ze=Ae.circularLinkType,Ye=ue.links.filter(function(Ge){return Ge.source.column==Ce&&Ge.circularLinkType==Ze});Ae.circularLinkType=="bottom"?Ye.sort(X):Ye.sort(j);var ze=0;Ye.forEach(function(Ge,dt){Ge.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2+dt*ge+ze),ze=ze+Ge.width}),Ce=Ae.target.column,Ye=ue.links.filter(function(Ge){return Ge.target.column==Ce&&Ge.circularLinkType==Ze}),Ae.circularLinkType=="bottom"?Ye.sort(fe):Ye.sort(ae),ze=0,Ye.forEach(function(Ge,dt){Ge.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2+dt*ge+ze),ze=ze+Ge.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(xe,Ae.source.y1,Ae.target.y1)+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Se-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=Y(Ae);else{var Ie=T.linkHorizontal().source(function(Ge){var dt=Ge.source.x0+(Ge.source.x1-Ge.source.x0),Rt=Ge.y0;return[dt,Rt]}).target(function(Ge){var dt=Ge.target.x0,Rt=Ge.y1;return[dt,Rt]});Ae.path=Ie(Ae)}})}function Y(ue){var ge="";return ue.circularLinkType=="top"?ge="M"+ue.circularPathData.sourceX+" "+ue.circularPathData.sourceY+" L"+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.sourceY+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftSmallArcRadius+" 0 0 0 "+ue.circularPathData.leftFullExtent+" "+(ue.circularPathData.sourceY-ue.circularPathData.leftSmallArcRadius)+" L"+ue.circularPathData.leftFullExtent+" "+ue.circularPathData.verticalLeftInnerExtent+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftLargeArcRadius+" 0 0 0 "+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.verticalFullExtent+" L"+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.verticalFullExtent+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightLargeArcRadius+" 0 0 0 "+ue.circularPathData.rightFullExtent+" "+ue.circularPathData.verticalRightInnerExtent+" L"+ue.circularPathData.rightFullExtent+" "+(ue.circularPathData.targetY-ue.circularPathData.rightSmallArcRadius)+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightSmallArcRadius+" 0 0 0 "+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.targetY+" L"+ue.circularPathData.targetX+" "+ue.circularPathData.targetY:ge="M"+ue.circularPathData.sourceX+" "+ue.circularPathData.sourceY+" L"+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.sourceY+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftSmallArcRadius+" 0 0 1 "+ue.circularPathData.leftFullExtent+" "+(ue.circularPathData.sourceY+ue.circularPathData.leftSmallArcRadius)+" L"+ue.circularPathData.leftFullExtent+" "+ue.circularPathData.verticalLeftInnerExtent+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftLargeArcRadius+" 0 0 1 "+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.verticalFullExtent+" L"+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.verticalFullExtent+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightLargeArcRadius+" 0 0 1 "+ue.circularPathData.rightFullExtent+" "+ue.circularPathData.verticalRightInnerExtent+" L"+ue.circularPathData.rightFullExtent+" "+(ue.circularPathData.targetY+ue.circularPathData.rightSmallArcRadius)+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightSmallArcRadius+" 0 0 1 "+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.targetY+" L"+ue.circularPathData.targetX+" "+ue.circularPathData.targetY,ge}function ee(ue,ge){return K(ue)==K(ge)?ue.circularLinkType=="bottom"?X(ue,ge):j(ue,ge):K(ge)-K(ue)}function j(ue,ge){return ue.y0-ge.y0}function X(ue,ge){return ge.y0-ue.y0}function ae(ue,ge){return ue.y1-ge.y1}function fe(ue,ge){return ge.y1-ue.y1}function K(ue){return ue.target.column-ue.source.column}function J(ue){return ue.target.x0-ue.source.x1}function U(ue,ge){var xe=I(ue),ye=J(ge)/Math.tan(xe),be=ne(ue)=="up"?ue.y1+ye:ue.y1-ye;return be}function V(ue,ge){var xe=I(ue),ye=J(ge)/Math.tan(xe),be=ne(ue)=="up"?ue.y1-ye:ue.y1+ye;return be}function q(ue,ge,xe,ye){ue.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var Se=be.source.column+1,Re=be.target.column-1,Ve=1,Ae=Re-Se+1;for(Ve=1;Se<=Re;Se++,Ve++)ue.nodes.forEach(function(Ce){if(Ce.column==Se){var Ze=Ve/(Ae+1),Ye=Math.pow(1-Ze,3),ze=3*Ze*Math.pow(1-Ze,2),Ie=3*Math.pow(Ze,2)*(1-Ze),Ge=Math.pow(Ze,3),dt=Ye*be.y0+ze*be.y0+Ie*be.y1+Ge*be.y1,Rt=dt-be.width/2,Qt=dt+be.width/2,Bt;Rt>Ce.y0&&Rt<Ce.y1?(Bt=Ce.y1-Rt+10,Bt=Ce.circularLinkType=="bottom"?Bt:-Bt,Ce=Z(Ce,Bt,ge,xe),ue.nodes.forEach(function(Ct){w(Ct,ye)==w(Ce,ye)||Ct.column!=Ce.column||re(Ce,Ct)&&Z(Ct,Bt,ge,xe)})):Qt>Ce.y0&&Qt<Ce.y1?(Bt=Qt-Ce.y0+10,Ce=Z(Ce,Bt,ge,xe),ue.nodes.forEach(function(Ct){w(Ct,ye)==w(Ce,ye)||Ct.column!=Ce.column||Ct.y0<Ce.y1&&Ct.y1>Ce.y1&&Z(Ct,Bt,ge,xe)})):Rt<Ce.y0&&Qt>Ce.y1&&(Bt=Qt-Ce.y0+10,Ce=Z(Ce,Bt,ge,xe),ue.nodes.forEach(function(Ct){w(Ct,ye)==w(Ce,ye)||Ct.column!=Ce.column||Ct.y0<Ce.y1&&Ct.y1>Ce.y1&&Z(Ct,Bt,ge,xe)}))}})}})}function re(ue,ge){return ue.y0>ge.y0&&ue.y0<ge.y1||ue.y1>ge.y0&&ue.y1<ge.y1?!0:ue.y0<ge.y0&&ue.y1>ge.y1}function Z(ue,ge,xe,ye){return ue.y0+ge>=xe&&ue.y1+ge<=ye&&(ue.y0=ue.y0+ge,ue.y1=ue.y1+ge,ue.targetLinks.forEach(function(be){be.y1=be.y1+ge}),ue.sourceLinks.forEach(function(be){be.y0=be.y0+ge})),ue}function Q(ue,ge,xe,ye){ue.nodes.forEach(function(be){ye&&be.y+(be.y1-be.y0)>ge&&(be.y=be.y-(be.y+(be.y1-be.y0)-ge));var Se=ue.links.filter(function(Ae){return w(Ae.source,xe)==w(be,xe)}),Re=Se.length;Re>1&&Se.sort(function(Ae,Ce){if(!Ae.circular&&!Ce.circular){if(Ae.target.column==Ce.target.column)return Ae.y1-Ce.y1;if(oe(Ae,Ce)){if(Ae.target.column>Ce.target.column){var Ze=V(Ce,Ae);return Ae.y1-Ze}if(Ce.target.column>Ae.target.column){var Ye=V(Ae,Ce);return Ye-Ce.y1}}else return Ae.y1-Ce.y1}if(Ae.circular&&!Ce.circular)return Ae.circularLinkType=="top"?-1:1;if(Ce.circular&&!Ae.circular)return Ce.circularLinkType=="top"?1:-1;if(Ae.circular&&Ce.circular)return Ae.circularLinkType===Ce.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Ce.target.column?Ae.target.y1-Ce.target.y1:Ce.target.column-Ae.target.column:Ae.circularLinkType===Ce.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Ce.target.column?Ce.target.y1-Ae.target.y1:Ae.target.column-Ce.target.column:Ae.circularLinkType=="top"?-1:1});var Ve=be.y0;Se.forEach(function(Ae){Ae.y0=Ve+Ae.width/2,Ve=Ve+Ae.width}),Se.forEach(function(Ae,Ce){if(Ae.circularLinkType=="bottom"){var Ze=Ce+1,Ye=0;for(Ze;Ze<Re;Ze++)Ye=Ye+Se[Ze].width;Ae.y0=be.y1-Ye-Ae.width/2}})})}function ie(ue,ge,xe){ue.nodes.forEach(function(ye){var be=ue.links.filter(function(Ve){return w(Ve.target,xe)==w(ye,xe)}),Se=be.length;Se>1&&be.sort(function(Ve,Ae){if(!Ve.circular&&!Ae.circular){if(Ve.source.column==Ae.source.column)return Ve.y0-Ae.y0;if(oe(Ve,Ae)){if(Ae.source.column<Ve.source.column){var Ce=U(Ae,Ve);return Ve.y0-Ce}if(Ve.source.column<Ae.source.column){var Ze=U(Ve,Ae);return Ze-Ae.y0}}else return Ve.y0-Ae.y0}if(Ve.circular&&!Ae.circular)return Ve.circularLinkType=="top"?-1:1;if(Ae.circular&&!Ve.circular)return Ae.circularLinkType=="top"?1:-1;if(Ve.circular&&Ae.circular)return Ve.circularLinkType===Ae.circularLinkType&&Ve.circularLinkType=="top"?Ve.source.column===Ae.source.column?Ve.source.y1-Ae.source.y1:Ve.source.column-Ae.source.column:Ve.circularLinkType===Ae.circularLinkType&&Ve.circularLinkType=="bottom"?Ve.source.column===Ae.source.column?Ve.source.y1-Ae.source.y1:Ae.source.column-Ve.source.column:Ve.circularLinkType=="top"?-1:1});var Re=ye.y0;be.forEach(function(Ve){Ve.y1=Re+Ve.width/2,Re=Re+Ve.width}),be.forEach(function(Ve,Ae){if(Ve.circularLinkType=="bottom"){var Ce=Ae+1,Ze=0;for(Ce;Ce<Se;Ce++)Ze=Ze+be[Ce].width;Ve.y1=ye.y1-Ze-Ve.width/2}})})}function oe(ue,ge){return ne(ue)==ne(ge)}function ne(ue){return ue.y0-ue.y1>0?"up":"down"}function se(ue,ge){return w(ue.source,ge)==w(ue.target,ge)}function _e(ue,ge,xe){var ye=ue.nodes,be=ue.links,Se=!1,Re=!1;if(be.forEach(function(ze){ze.circularLinkType=="top"?Se=!0:ze.circularLinkType=="bottom"&&(Re=!0)}),Se==!1||Re==!1){var Ve=f.min(ye,function(ze){return ze.y0}),Ae=f.max(ye,function(ze){return ze.y1}),Ce=Ae-Ve,Ze=xe-ge,Ye=Ze/Ce;ye.forEach(function(ze){var Ie=(ze.y1-ze.y0)*Ye;ze.y0=(ze.y0-Ve)*Ye,ze.y1=ze.y0+Ie}),be.forEach(function(ze){ze.y0=(ze.y0-Ve)*Ye,ze.y1=(ze.y1-Ve)*Ye,ze.width=ze.width*Ye})}}x.sankeyCircular=S,x.sankeyCenter=v,x.sankeyLeft=i,x.sankeyRight=n,x.sankeyJustify=r,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-array"),t("d3-collection"),t("d3-shape")):f(x.d3=x.d3||{},x.d3,x.d3,x.d3)})(this,function(x,f,M,T){function e(L){return L.target.depth}function a(L){return L.depth}function i(L,E){return E-1-L.height}function n(L,E){return L.sourceLinks.length?L.depth:E-1}function r(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?f.min(L.sourceLinks,e)-1:0}function v(L){return function(){return L}}function s(L,E){return b(L.source,E.source)||L.index-E.index}function o(L,E){return b(L.target,E.target)||L.index-E.index}function b(L,E){return L.y0-E.y0}function g(L){return L.value}function d(L){return(L.y0+L.y1)/2}function c(L){return d(L.source)*L.value}function m(L){return d(L.target)*L.value}function l(L){return L.index}function y(L){return L.nodes}function u(L){return L.links}function A(L,E){var S=L.get(E);if(!S)throw new Error("missing: "+E);return S}var _=function(){var L=0,E=0,S=1,P=1,F=24,I=8,D=l,R=n,O=y,z=u,H=32,Y=2/3;function ee(){var J={nodes:O.apply(null,arguments),links:z.apply(null,arguments)};return j(J),X(J),ae(J),fe(J),K(J),J}ee.update=function(J){return K(J),J},ee.nodeId=function(J){return arguments.length?(D=typeof J=="function"?J:v(J),ee):D},ee.nodeAlign=function(J){return arguments.length?(R=typeof J=="function"?J:v(J),ee):R},ee.nodeWidth=function(J){return arguments.length?(F=+J,ee):F},ee.nodePadding=function(J){return arguments.length?(I=+J,ee):I},ee.nodes=function(J){return arguments.length?(O=typeof J=="function"?J:v(J),ee):O},ee.links=function(J){return arguments.length?(z=typeof J=="function"?J:v(J),ee):z},ee.size=function(J){return arguments.length?(L=E=0,S=+J[0],P=+J[1],ee):[S-L,P-E]},ee.extent=function(J){return arguments.length?(L=+J[0][0],S=+J[1][0],E=+J[0][1],P=+J[1][1],ee):[[L,E],[S,P]]},ee.iterations=function(J){return arguments.length?(H=+J,ee):H};function j(J){J.nodes.forEach(function(V,q){V.index=q,V.sourceLinks=[],V.targetLinks=[]});var U=M.map(J.nodes,D);J.links.forEach(function(V,q){V.index=q;var re=V.source,Z=V.target;typeof re!="object"&&(re=V.source=A(U,re)),typeof Z!="object"&&(Z=V.target=A(U,Z)),re.sourceLinks.push(V),Z.targetLinks.push(V)})}function X(J){J.nodes.forEach(function(U){U.value=Math.max(f.sum(U.sourceLinks,g),f.sum(U.targetLinks,g))})}function ae(J){var U,V,q;for(U=J.nodes,V=[],q=0;U.length;++q,U=V,V=[])U.forEach(function(Z){Z.depth=q,Z.sourceLinks.forEach(function(Q){V.indexOf(Q.target)<0&&V.push(Q.target)})});for(U=J.nodes,V=[],q=0;U.length;++q,U=V,V=[])U.forEach(function(Z){Z.height=q,Z.targetLinks.forEach(function(Q){V.indexOf(Q.source)<0&&V.push(Q.source)})});var re=(S-L-F)/(q-1);J.nodes.forEach(function(Z){Z.x1=(Z.x0=L+Math.max(0,Math.min(q-1,Math.floor(R.call(null,Z,q))))*re)+F})}function fe(J){var U=M.nest().key(function(oe){return oe.x0}).sortKeys(f.ascending).entries(J.nodes).map(function(oe){return oe.values});re(),ie();for(var V=1,q=H;q>0;--q)Q(V*=.99),ie(),Z(V),ie();function re(){var oe=f.max(U,function(_e){return _e.length}),ne=Y*(P-E)/(oe-1);I>ne&&(I=ne);var se=f.min(U,function(_e){return(P-E-(_e.length-1)*I)/f.sum(_e,g)});U.forEach(function(_e){_e.forEach(function(ue,ge){ue.y1=(ue.y0=ge)+ue.value*se})}),J.links.forEach(function(_e){_e.width=_e.value*se})}function Z(oe){U.forEach(function(ne){ne.forEach(function(se){if(se.targetLinks.length){var _e=(f.sum(se.targetLinks,c)/f.sum(se.targetLinks,g)-d(se))*oe;se.y0+=_e,se.y1+=_e}})})}function Q(oe){U.slice().reverse().forEach(function(ne){ne.forEach(function(se){if(se.sourceLinks.length){var _e=(f.sum(se.sourceLinks,m)/f.sum(se.sourceLinks,g)-d(se))*oe;se.y0+=_e,se.y1+=_e}})})}function ie(){U.forEach(function(oe){var ne,se,_e=E,ue=oe.length,ge;for(oe.sort(b),ge=0;ge<ue;++ge)ne=oe[ge],se=_e-ne.y0,se>0&&(ne.y0+=se,ne.y1+=se),_e=ne.y1+I;if(se=_e-I-P,se>0)for(_e=ne.y0-=se,ne.y1-=se,ge=ue-2;ge>=0;--ge)ne=oe[ge],se=ne.y1+I-_e,se>0&&(ne.y0-=se,ne.y1-=se),_e=ne.y0})}}function K(J){J.nodes.forEach(function(U){U.sourceLinks.sort(o),U.targetLinks.sort(s)}),J.nodes.forEach(function(U){var V=U.y0,q=V;U.sourceLinks.forEach(function(re){re.y0=V+re.width/2,V+=re.width}),U.targetLinks.forEach(function(re){re.y1=q+re.width/2,q+=re.width})})}return ee};function p(L){return[L.source.x1,L.y0]}function w(L){return[L.target.x0,L.y1]}var h=function(){return T.linkHorizontal().source(p).target(w)};x.sankey=_,x.sankeyCenter=r,x.sankeyLeft=a,x.sankeyRight=i,x.sankeyJustify=n,x.sankeyLinkHorizontal=h,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(t,B,G){(function(){var x={version:"3.8.0"},f=[].slice,M=function(le){return f.call(le)},T=self.document;function e(le){return le&&(le.ownerDocument||le.document||le).documentElement}function a(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(T)try{M(T.documentElement.childNodes)[0].nodeType}catch{M=function(Te){for(var De=Te.length,Ue=new Array(De);De--;)Ue[De]=Te[De];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,v=this.CSSStyleDeclaration.prototype,s=v.setProperty;i.setAttribute=function(Te,De){n.call(this,Te,De+"")},i.setAttributeNS=function(Te,De,Ue){r.call(this,Te,De,Ue+"")},v.setProperty=function(Te,De,Ue){s.call(this,Te,De+"",Ue)}}x.ascending=o;function o(le,Te){return le<Te?-1:le>Te?1:le>=Te?0:NaN}x.descending=function(le,Te){return Te<le?-1:Te>le?1:Te>=le?0:NaN},x.min=function(le,Te){var De=-1,Ue=le.length,Be,$e;if(arguments.length===1){for(;++De<Ue;)if(($e=le[De])!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=le[De])!=null&&Be>$e&&(Be=$e)}else{for(;++De<Ue;)if(($e=Te.call(le,le[De],De))!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=Te.call(le,le[De],De))!=null&&Be>$e&&(Be=$e)}return Be},x.max=function(le,Te){var De=-1,Ue=le.length,Be,$e;if(arguments.length===1){for(;++De<Ue;)if(($e=le[De])!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=le[De])!=null&&$e>Be&&(Be=$e)}else{for(;++De<Ue;)if(($e=Te.call(le,le[De],De))!=null&&$e>=$e){Be=$e;break}for(;++De<Ue;)($e=Te.call(le,le[De],De))!=null&&$e>Be&&(Be=$e)}return Be},x.extent=function(le,Te){var De=-1,Ue=le.length,Be,$e,wt;if(arguments.length===1){for(;++De<Ue;)if(($e=le[De])!=null&&$e>=$e){Be=wt=$e;break}for(;++De<Ue;)($e=le[De])!=null&&(Be>$e&&(Be=$e),wt<$e&&(wt=$e))}else{for(;++De<Ue;)if(($e=Te.call(le,le[De],De))!=null&&$e>=$e){Be=wt=$e;break}for(;++De<Ue;)($e=Te.call(le,le[De],De))!=null&&(Be>$e&&(Be=$e),wt<$e&&(wt=$e))}return[Be,wt]};function b(le){return le===null?NaN:+le}function g(le){return!isNaN(le)}x.sum=function(le,Te){var De=0,Ue=le.length,Be,$e=-1;if(arguments.length===1)for(;++$e<Ue;)g(Be=+le[$e])&&(De+=Be);else for(;++$e<Ue;)g(Be=+Te.call(le,le[$e],$e))&&(De+=Be);return De},x.mean=function(le,Te){var De=0,Ue=le.length,Be,$e=-1,wt=Ue;if(arguments.length===1)for(;++$e<Ue;)g(Be=b(le[$e]))?De+=Be:--wt;else for(;++$e<Ue;)g(Be=b(Te.call(le,le[$e],$e)))?De+=Be:--wt;if(wt)return De/wt},x.quantile=function(le,Te){var De=(le.length-1)*Te+1,Ue=Math.floor(De),Be=+le[Ue-1],$e=De-Ue;return $e?Be+$e*(le[Ue]-Be):Be},x.median=function(le,Te){var De=[],Ue=le.length,Be,$e=-1;if(arguments.length===1)for(;++$e<Ue;)g(Be=b(le[$e]))&&De.push(Be);else for(;++$e<Ue;)g(Be=b(Te.call(le,le[$e],$e)))&&De.push(Be);if(De.length)return x.quantile(De.sort(o),.5)},x.variance=function(le,Te){var De=le.length,Ue=0,Be,$e,wt=0,gt=-1,Ft=0;if(arguments.length===1)for(;++gt<De;)g(Be=b(le[gt]))&&($e=Be-Ue,Ue+=$e/++Ft,wt+=$e*(Be-Ue));else for(;++gt<De;)g(Be=b(Te.call(le,le[gt],gt)))&&($e=Be-Ue,Ue+=$e/++Ft,wt+=$e*(Be-Ue));if(Ft>1)return wt/(Ft-1)},x.deviation=function(){var le=x.variance.apply(this,arguments);return le&&Math.sqrt(le)};function d(le){return{left:function(Te,De,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var $e=Ue+Be>>>1;le(Te[$e],De)<0?Ue=$e+1:Be=$e}return Ue},right:function(Te,De,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var $e=Ue+Be>>>1;le(Te[$e],De)>0?Be=$e:Ue=$e+1}return Ue}}}var c=d(o);x.bisectLeft=c.left,x.bisect=x.bisectRight=c.right,x.bisector=function(le){return d(le.length===1?function(Te,De){return o(le(Te),De)}:le)},x.shuffle=function(le,Te,De){(Ue=arguments.length)<3&&(De=le.length,Ue<2&&(Te=0));for(var Ue=De-Te,Be,$e;Ue;)$e=Math.random()*Ue--|0,Be=le[Ue+Te],le[Ue+Te]=le[$e+Te],le[$e+Te]=Be;return le},x.permute=function(le,Te){for(var De=Te.length,Ue=new Array(De);De--;)Ue[De]=le[Te[De]];return Ue},x.pairs=function(le){for(var Te=0,De=le.length-1,Ue=le[0],Be=new Array(De<0?0:De);Te<De;)Be[Te]=[Ue,Ue=le[++Te]];return Be},x.transpose=function(le){if(!($e=le.length))return[];for(var Te=-1,De=x.min(le,m),Ue=new Array(De);++Te<De;)for(var Be=-1,$e,wt=Ue[Te]=new Array($e);++Be<$e;)wt[Be]=le[Be][Te];return Ue};function m(le){return le.length}x.zip=function(){return x.transpose(arguments)},x.keys=function(le){var Te=[];for(var De in le)Te.push(De);return Te},x.values=function(le){var Te=[];for(var De in le)Te.push(le[De]);return Te},x.entries=function(le){var Te=[];for(var De in le)Te.push({key:De,value:le[De]});return Te},x.merge=function(le){for(var Te=le.length,De,Ue=-1,Be=0,$e,wt;++Ue<Te;)Be+=le[Ue].length;for($e=new Array(Be);--Te>=0;)for(wt=le[Te],De=wt.length;--De>=0;)$e[--Be]=wt[De];return $e};var l=Math.abs;x.range=function(le,Te,De){if(arguments.length<3&&(De=1,arguments.length<2&&(Te=le,le=0)),(Te-le)/De===1/0)throw new Error("infinite range");var Ue=[],Be=y(l(De)),$e=-1,wt;if(le*=Be,Te*=Be,De*=Be,De<0)for(;(wt=le+De*++$e)>Te;)Ue.push(wt/Be);else for(;(wt=le+De*++$e)<Te;)Ue.push(wt/Be);return Ue};function y(le){for(var Te=1;le*Te%1;)Te*=10;return Te}function u(le,Te){for(var De in Te)Object.defineProperty(le.prototype,De,{value:Te[De],enumerable:!1})}x.map=function(le,Te){var De=new A;if(le instanceof A)le.forEach(function(gt,Ft){De.set(gt,Ft)});else if(Array.isArray(le)){var Ue=-1,Be=le.length,$e;if(arguments.length===1)for(;++Ue<Be;)De.set(Ue,le[Ue]);else for(;++Ue<Be;)De.set(Te.call(le,$e=le[Ue],Ue),$e)}else for(var wt in le)De.set(wt,le[wt]);return De};function A(){this._=Object.create(null)}var _="__proto__",p="\0";u(A,{has:L,get:function(le){return this._[w(le)]},set:function(le,Te){return this._[w(le)]=Te},remove:E,keys:S,values:function(){var le=[];for(var Te in this._)le.push(this._[Te]);return le},entries:function(){var le=[];for(var Te in this._)le.push({key:h(Te),value:this._[Te]});return le},size:P,empty:F,forEach:function(le){for(var Te in this._)le.call(this,h(Te),this._[Te])}});function w(le){return(le+="")===_||le[0]===p?p+le:le}function h(le){return(le+="")[0]===p?le.slice(1):le}function L(le){return w(le)in this._}function E(le){return(le=w(le))in this._&&delete this._[le]}function S(){var le=[];for(var Te in this._)le.push(h(Te));return le}function P(){var le=0;for(var Te in this._)++le;return le}function F(){for(var le in this._)return!1;return!0}x.nest=function(){var le={},Te=[],De=[],Ue,Be;function $e(gt,Ft,qt){if(qt>=Te.length)return Be?Be.call(le,Ft):Ue?Ft.sort(Ue):Ft;for(var ar=-1,ir=Ft.length,Cr=Te[qt++],nn,pn,Ir,Wr=new A,qr;++ar<ir;)(qr=Wr.get(nn=Cr(pn=Ft[ar])))?qr.push(pn):Wr.set(nn,[pn]);return gt?(pn=gt(),Ir=function(fn,vn){pn.set(fn,$e(gt,vn,qt))}):(pn={},Ir=function(fn,vn){pn[fn]=$e(gt,vn,qt)}),Wr.forEach(Ir),pn}function wt(gt,Ft){if(Ft>=Te.length)return gt;var qt=[],ar=De[Ft++];return gt.forEach(function(ir,Cr){qt.push({key:ir,values:wt(Cr,Ft)})}),ar?qt.sort(function(ir,Cr){return ar(ir.key,Cr.key)}):qt}return le.map=function(gt,Ft){return $e(Ft,gt,0)},le.entries=function(gt){return wt($e(x.map,gt,0),0)},le.key=function(gt){return Te.push(gt),le},le.sortKeys=function(gt){return De[Te.length-1]=gt,le},le.sortValues=function(gt){return Ue=gt,le},le.rollup=function(gt){return Be=gt,le},le},x.set=function(le){var Te=new I;if(le)for(var De=0,Ue=le.length;De<Ue;++De)Te.add(le[De]);return Te};function I(){this._=Object.create(null)}u(I,{has:L,add:function(le){return this._[w(le+="")]=!0,le},remove:E,values:S,size:P,empty:F,forEach:function(le){for(var Te in this._)le.call(this,h(Te))}}),x.behavior={};function D(le){return le}x.rebind=function(le,Te){for(var De=1,Ue=arguments.length,Be;++De<Ue;)le[Be=arguments[De]]=R(le,Te,Te[Be]);return le};function R(le,Te,De){return function(){var Ue=De.apply(Te,arguments);return Ue===Te?le:Ue}}function O(le,Te){if(Te in le)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var De=0,Ue=z.length;De<Ue;++De){var Be=z[De]+Te;if(Be in le)return Be}}var z=["webkit","ms","moz","Moz","o","O"];function H(){}x.dispatch=function(){for(var le=new Y,Te=-1,De=arguments.length;++Te<De;)le[arguments[Te]]=ee(le);return le};function Y(){}Y.prototype.on=function(le,Te){var De=le.indexOf("."),Ue="";if(De>=0&&(Ue=le.slice(De+1),le=le.slice(0,De)),le)return arguments.length<2?this[le].on(Ue):this[le].on(Ue,Te);if(arguments.length===2){if(Te==null)for(le in this)this.hasOwnProperty(le)&&this[le].on(Ue,null);return this}};function ee(le){var Te=[],De=new A;function Ue(){for(var Be=Te,$e=-1,wt=Be.length,gt;++$e<wt;)(gt=Be[$e].on)&&gt.apply(this,arguments);return le}return Ue.on=function(Be,$e){var wt=De.get(Be),gt;return arguments.length<2?wt&&wt.on:(wt&&(wt.on=null,Te=Te.slice(0,gt=Te.indexOf(wt)).concat(Te.slice(gt+1)),De.remove(Be)),$e&&Te.push(De.set(Be,{on:$e})),le)},Ue}x.event=null;function j(){x.event.preventDefault()}function X(){for(var le=x.event,Te;Te=le.sourceEvent;)le=Te;return le}function ae(le){for(var Te=new Y,De=0,Ue=arguments.length;++De<Ue;)Te[arguments[De]]=ee(Te);return Te.of=function(Be,$e){return function(wt){try{var gt=wt.sourceEvent=x.event;wt.target=le,x.event=wt,Te[wt.type].apply(Be,$e)}finally{x.event=gt}}},Te}x.requote=function(le){return le.replace(fe,"\\$&")};var fe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,K={}.__proto__?function(le,Te){le.__proto__=Te}:function(le,Te){for(var De in Te)le[De]=Te[De]};function J(le){return K(le,re),le}var U=function(le,Te){return Te.querySelector(le)},V=function(le,Te){return Te.querySelectorAll(le)},q=function(le,Te){var De=le.matches||le[O(le,"matchesSelector")];return q=function(Ue,Be){return De.call(Ue,Be)},q(le,Te)};typeof Sizzle=="function"&&(U=function(le,Te){return Sizzle(le,Te)[0]||null},V=Sizzle,q=Sizzle.matchesSelector),x.selection=function(){return x.select(T.documentElement)};var re=x.selection.prototype=[];re.select=function(le){var Te=[],De,Ue,Be,$e;le=Z(le);for(var wt=-1,gt=this.length;++wt<gt;){Te.push(De=[]),De.parentNode=(Be=this[wt]).parentNode;for(var Ft=-1,qt=Be.length;++Ft<qt;)($e=Be[Ft])?(De.push(Ue=le.call($e,$e.__data__,Ft,wt)),Ue&&"__data__"in $e&&(Ue.__data__=$e.__data__)):De.push(null)}return J(Te)};function Z(le){return typeof le=="function"?le:function(){return U(le,this)}}re.selectAll=function(le){var Te=[],De,Ue;le=Q(le);for(var Be=-1,$e=this.length;++Be<$e;)for(var wt=this[Be],gt=-1,Ft=wt.length;++gt<Ft;)(Ue=wt[gt])&&(Te.push(De=M(le.call(Ue,Ue.__data__,gt,Be))),De.parentNode=Ue);return J(Te)};function Q(le){return typeof le=="function"?le:function(){return V(le,this)}}var ie="http://www.w3.org/1999/xhtml",oe={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};x.ns={prefix:oe,qualify:function(le){var Te=le.indexOf(":"),De=le;return Te>=0&&(De=le.slice(0,Te))!=="xmlns"&&(le=le.slice(Te+1)),oe.hasOwnProperty(De)?{space:oe[De],local:le}:le}},re.attr=function(le,Te){if(arguments.length<2){if(typeof le=="string"){var De=this.node();return le=x.ns.qualify(le),le.local?De.getAttributeNS(le.space,le.local):De.getAttribute(le)}for(Te in le)this.each(ne(Te,le[Te]));return this}return this.each(ne(le,Te))};function ne(le,Te){le=x.ns.qualify(le);function De(){this.removeAttribute(le)}function Ue(){this.removeAttributeNS(le.space,le.local)}function Be(){this.setAttribute(le,Te)}function $e(){this.setAttributeNS(le.space,le.local,Te)}function wt(){var Ft=Te.apply(this,arguments);Ft==null?this.removeAttribute(le):this.setAttribute(le,Ft)}function gt(){var Ft=Te.apply(this,arguments);Ft==null?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,Ft)}return Te==null?le.local?Ue:De:typeof Te=="function"?le.local?gt:wt:le.local?$e:Be}function se(le){return le.trim().replace(/\s+/g," ")}re.classed=function(le,Te){if(arguments.length<2){if(typeof le=="string"){var De=this.node(),Ue=(le=ue(le)).length,Be=-1;if(Te=De.classList){for(;++Be<Ue;)if(!Te.contains(le[Be]))return!1}else for(Te=De.getAttribute("class");++Be<Ue;)if(!_e(le[Be]).test(Te))return!1;return!0}for(Te in le)this.each(ge(Te,le[Te]));return this}return this.each(ge(le,Te))};function _e(le){return new RegExp("(?:^|\\s+)"+x.requote(le)+"(?:\\s+|$)","g")}function ue(le){return(le+"").trim().split(/^|\s+/)}function ge(le,Te){le=ue(le).map(xe);var De=le.length;function Ue(){for(var $e=-1;++$e<De;)le[$e](this,Te)}function Be(){for(var $e=-1,wt=Te.apply(this,arguments);++$e<De;)le[$e](this,wt)}return typeof Te=="function"?Be:Ue}function xe(le){var Te=_e(le);return function(De,Ue){if(Be=De.classList)return Ue?Be.add(le):Be.remove(le);var Be=De.getAttribute("class")||"";Ue?(Te.lastIndex=0,Te.test(Be)||De.setAttribute("class",se(Be+" "+le))):De.setAttribute("class",se(Be.replace(Te," ")))}}re.style=function(le,Te,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(Te="");for(De in le)this.each(ye(De,le[De],Te));return this}if(Ue<2){var Be=this.node();return a(Be).getComputedStyle(Be,null).getPropertyValue(le)}De=""}return this.each(ye(le,Te,De))};function ye(le,Te,De){function Ue(){this.style.removeProperty(le)}function Be(){this.style.setProperty(le,Te,De)}function $e(){var wt=Te.apply(this,arguments);wt==null?this.style.removeProperty(le):this.style.setProperty(le,wt,De)}return Te==null?Ue:typeof Te=="function"?$e:Be}re.property=function(le,Te){if(arguments.length<2){if(typeof le=="string")return this.node()[le];for(Te in le)this.each(be(Te,le[Te]));return this}return this.each(be(le,Te))};function be(le,Te){function De(){delete this[le]}function Ue(){this[le]=Te}function Be(){var $e=Te.apply(this,arguments);$e==null?delete this[le]:this[le]=$e}return Te==null?De:typeof Te=="function"?Be:Ue}re.text=function(le){return arguments.length?this.each(typeof le=="function"?function(){var Te=le.apply(this,arguments);this.textContent=Te==null?"":Te}:le==null?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},re.html=function(le){return arguments.length?this.each(typeof le=="function"?function(){var Te=le.apply(this,arguments);this.innerHTML=Te==null?"":Te}:le==null?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},re.append=function(le){return le=Se(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})};function Se(le){function Te(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===ie&&Ue.documentElement.namespaceURI===ie?Ue.createElement(le):Ue.createElementNS(Be,le)}function De(){return this.ownerDocument.createElementNS(le.space,le.local)}return typeof le=="function"?le:(le=x.ns.qualify(le)).local?De:Te}re.insert=function(le,Te){return le=Se(le),Te=Z(Te),this.select(function(){return this.insertBefore(le.apply(this,arguments),Te.apply(this,arguments)||null)})},re.remove=function(){return this.each(Re)};function Re(){var le=this.parentNode;le&&le.removeChild(this)}re.data=function(le,Te){var De=-1,Ue=this.length,Be,$e;if(!arguments.length){for(le=new Array(Ue=(Be=this[0]).length);++De<Ue;)($e=Be[De])&&(le[De]=$e.__data__);return le}function wt(ar,ir){var Cr,nn=ar.length,pn=ir.length,Ir=Math.min(nn,pn),Wr=new Array(pn),qr=new Array(pn),fn=new Array(nn),vn,tn;if(Te){var Zn=new A,ha=new Array(nn),Pa;for(Cr=-1;++Cr<nn;)(vn=ar[Cr])&&(Zn.has(Pa=Te.call(vn,vn.__data__,Cr))?fn[Cr]=vn:Zn.set(Pa,vn),ha[Cr]=Pa);for(Cr=-1;++Cr<pn;)(vn=Zn.get(Pa=Te.call(ir,tn=ir[Cr],Cr)))?vn!==!0&&(Wr[Cr]=vn,vn.__data__=tn):qr[Cr]=Ve(tn),Zn.set(Pa,!0);for(Cr=-1;++Cr<nn;)Cr in ha&&Zn.get(ha[Cr])!==!0&&(fn[Cr]=ar[Cr])}else{for(Cr=-1;++Cr<Ir;)vn=ar[Cr],tn=ir[Cr],vn?(vn.__data__=tn,Wr[Cr]=vn):qr[Cr]=Ve(tn);for(;Cr<pn;++Cr)qr[Cr]=Ve(ir[Cr]);for(;Cr<nn;++Cr)fn[Cr]=ar[Cr]}qr.update=Wr,qr.parentNode=Wr.parentNode=fn.parentNode=ar.parentNode,gt.push(qr),Ft.push(Wr),qt.push(fn)}var gt=Ye([]),Ft=J([]),qt=J([]);if(typeof le=="function")for(;++De<Ue;)wt(Be=this[De],le.call(Be,Be.parentNode.__data__,De));else for(;++De<Ue;)wt(Be=this[De],le);return Ft.enter=function(){return gt},Ft.exit=function(){return qt},Ft};function Ve(le){return{__data__:le}}re.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},re.filter=function(le){var Te=[],De,Ue,Be;typeof le!="function"&&(le=Ae(le));for(var $e=0,wt=this.length;$e<wt;$e++){Te.push(De=[]),De.parentNode=(Ue=this[$e]).parentNode;for(var gt=0,Ft=Ue.length;gt<Ft;gt++)(Be=Ue[gt])&&le.call(Be,Be.__data__,gt,$e)&&De.push(Be)}return J(Te)};function Ae(le){return function(){return q(this,le)}}re.order=function(){for(var le=-1,Te=this.length;++le<Te;)for(var De=this[le],Ue=De.length-1,Be=De[Ue],$e;--Ue>=0;)($e=De[Ue])&&(Be&&Be!==$e.nextSibling&&Be.parentNode.insertBefore($e,Be),Be=$e);return this},re.sort=function(le){le=Ce.apply(this,arguments);for(var Te=-1,De=this.length;++Te<De;)this[Te].sort(le);return this.order()};function Ce(le){return arguments.length||(le=o),function(Te,De){return Te&&De?le(Te.__data__,De.__data__):!Te-!De}}re.each=function(le){return Ze(this,function(Te,De,Ue){le.call(Te,Te.__data__,De,Ue)})};function Ze(le,Te){for(var De=0,Ue=le.length;De<Ue;De++)for(var Be=le[De],$e=0,wt=Be.length,gt;$e<wt;$e++)(gt=Be[$e])&&Te(gt,$e,De);return le}re.call=function(le){var Te=M(arguments);return le.apply(Te[0]=this,Te),this},re.empty=function(){return!this.node()},re.node=function(){for(var le=0,Te=this.length;le<Te;le++)for(var De=this[le],Ue=0,Be=De.length;Ue<Be;Ue++){var $e=De[Ue];if($e)return $e}return null},re.size=function(){var le=0;return Ze(this,function(){++le}),le};function Ye(le){return K(le,ze),le}var ze=[];x.selection.enter=Ye,x.selection.enter.prototype=ze,ze.append=re.append,ze.empty=re.empty,ze.node=re.node,ze.call=re.call,ze.size=re.size,ze.select=function(le){for(var Te=[],De,Ue,Be,$e,wt,gt=-1,Ft=this.length;++gt<Ft;){Be=($e=this[gt]).update,Te.push(De=[]),De.parentNode=$e.parentNode;for(var qt=-1,ar=$e.length;++qt<ar;)(wt=$e[qt])?(De.push(Be[qt]=Ue=le.call($e.parentNode,wt.__data__,qt,gt)),Ue.__data__=wt.__data__):De.push(null)}return J(Te)},ze.insert=function(le,Te){return arguments.length<2&&(Te=Ie(this)),re.insert.call(this,le,Te)};function Ie(le){var Te,De;return function(Ue,Be,$e){var wt=le[$e].update,gt=wt.length,Ft;for($e!=De&&(De=$e,Te=0),Be>=Te&&(Te=Be+1);!(Ft=wt[Te])&&++Te<gt;);return Ft}}x.select=function(le){var Te;return typeof le=="string"?(Te=[U(le,T)],Te.parentNode=T.documentElement):(Te=[le],Te.parentNode=e(le)),J([Te])},x.selectAll=function(le){var Te;return typeof le=="string"?(Te=M(V(le,T)),Te.parentNode=T.documentElement):(Te=M(le),Te.parentNode=null),J([Te])},re.on=function(le,Te,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(Te=!1);for(De in le)this.each(Ge(De,le[De],Te));return this}if(Ue<2)return(Ue=this.node()["__on"+le])&&Ue._;De=!1}return this.each(Ge(le,Te,De))};function Ge(le,Te,De){var Ue="__on"+le,Be=le.indexOf("."),$e=Rt;Be>0&&(le=le.slice(0,Be));var wt=dt.get(le);wt&&(le=wt,$e=Qt);function gt(){var ar=this[Ue];ar&&(this.removeEventListener(le,ar,ar.$),delete this[Ue])}function Ft(){var ar=$e(Te,M(arguments));gt.call(this),this.addEventListener(le,this[Ue]=ar,ar.$=De),ar._=Te}function qt(){var ar=new RegExp("^__on([^.]+)"+x.requote(le)+"$"),ir;for(var Cr in this)if(ir=Cr.match(ar)){var nn=this[Cr];this.removeEventListener(ir[1],nn,nn.$),delete this[Cr]}}return Be?Te?Ft:gt:Te?H:qt}var dt=x.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&dt.forEach(function(le){"on"+le in T&&dt.remove(le)});function Rt(le,Te){return function(De){var Ue=x.event;x.event=De,Te[0]=this.__data__;try{le.apply(this,Te)}finally{x.event=Ue}}}function Qt(le,Te){var De=Rt(le,Te);return function(Ue){var Be=this,$e=Ue.relatedTarget;(!$e||$e!==Be&&!($e.compareDocumentPosition(Be)&8))&&De.call(Be,Ue)}}var Bt,Ct=0;function Kt(le){var Te=".dragsuppress-"+ ++Ct,De="click"+Te,Ue=x.select(a(le)).on("touchmove"+Te,j).on("dragstart"+Te,j).on("selectstart"+Te,j);if(Bt==null&&(Bt="onselectstart"in le?!1:O(le.style,"userSelect")),Bt){var Be=e(le).style,$e=Be[Bt];Be[Bt]="none"}return function(wt){if(Ue.on(Te,null),Bt&&(Be[Bt]=$e),wt){var gt=function(){Ue.on(De,null)};Ue.on(De,function(){j(),gt()},!0),setTimeout(gt,0)}}}x.mouse=function(le){return St(le,X())};var Ot=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function St(le,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var De=le.ownerSVGElement||le;if(De.createSVGPoint){var Ue=De.createSVGPoint();if(Ot<0){var Be=a(le);if(Be.scrollX||Be.scrollY){De=x.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var $e=De[0][0].getScreenCTM();Ot=!($e.f||$e.e),De.remove()}}return Ot?(Ue.x=Te.pageX,Ue.y=Te.pageY):(Ue.x=Te.clientX,Ue.y=Te.clientY),Ue=Ue.matrixTransform(le.getScreenCTM().inverse()),[Ue.x,Ue.y]}var wt=le.getBoundingClientRect();return[Te.clientX-wt.left-le.clientLeft,Te.clientY-wt.top-le.clientTop]}x.touch=function(le,Te,De){if(arguments.length<3&&(De=Te,Te=X().changedTouches),Te){for(var Ue=0,Be=Te.length,$e;Ue<Be;++Ue)if(($e=Te[Ue]).identifier===De)return St(le,$e)}},x.behavior.drag=function(){var le=ae(Be,"drag","dragstart","dragend"),Te=null,De=$e(H,x.mouse,a,"mousemove","mouseup"),Ue=$e(Xe,x.touch,D,"touchmove","touchend");function Be(){this.on("mousedown.drag",De).on("touchstart.drag",Ue)}function $e(wt,gt,Ft,qt,ar){return function(){var ir=this,Cr=x.event.target.correspondingElement||x.event.target,nn=ir.parentNode,pn=le.of(ir,arguments),Ir=0,Wr=wt(),qr=".drag"+(Wr==null?"":"-"+Wr),fn,vn=x.select(Ft(Cr)).on(qt+qr,ha).on(ar+qr,Pa),tn=Kt(Cr),Zn=gt(nn,Wr);Te?(fn=Te.apply(ir,arguments),fn=[fn.x-Zn[0],fn.y-Zn[1]]):fn=[0,0],pn({type:"dragstart"});function ha(){var pa=gt(nn,Wr),Na,xa;!pa||(Na=pa[0]-Zn[0],xa=pa[1]-Zn[1],Ir|=Na|xa,Zn=pa,pn({type:"drag",x:pa[0]+fn[0],y:pa[1]+fn[1],dx:Na,dy:xa}))}function Pa(){!gt(nn,Wr)||(vn.on(qt+qr,null).on(ar+qr,null),tn(Ir),pn({type:"dragend"}))}}}return Be.origin=function(wt){return arguments.length?(Te=wt,Be):Te},x.rebind(Be,le,"on")};function Xe(){return x.event.changedTouches[0].identifier}x.touches=function(le,Te){return arguments.length<2&&(Te=X().touches),Te?M(Te).map(function(De){var Ue=St(le,De);return Ue.identifier=De.identifier,Ue}):[]};var at=1e-6,We=at*at,Ee=Math.PI,He=2*Ee,Ke=He-at,et=Ee/2,At=Ee/180,mt=180/Ee;function Mt(le,Te,De){return(Te[0]-le[0])*(De[1]-le[1])-(Te[1]-le[1])*(De[0]-le[0])}function Gt(le){return le>1?et:le<-1?-et:Math.asin(le)}function zt(le){return((le=Math.exp(le))-1/le)/2}function Ht(le){return((le=Math.exp(le))+1/le)/2}function Xt(le){return((le=Math.exp(2*le))-1)/(le+1)}var Wt=Math.SQRT2,sr=2,Gr=4;x.interpolateZoom=function(le,Te){var De=le[0],Ue=le[1],Be=le[2],$e=Te[0],wt=Te[1],gt=Te[2],Ft=$e-De,qt=wt-Ue,ar=Ft*Ft+qt*qt,ir,Cr;if(ar<We)Cr=Math.log(gt/Be)/Wt,ir=function(fn){return[De+fn*Ft,Ue+fn*qt,Be*Math.exp(Wt*fn*Cr)]};else{var nn=Math.sqrt(ar),pn=(gt*gt-Be*Be+Gr*ar)/(2*Be*sr*nn),Ir=(gt*gt-Be*Be-Gr*ar)/(2*gt*sr*nn),Wr=Math.log(Math.sqrt(pn*pn+1)-pn),qr=Math.log(Math.sqrt(Ir*Ir+1)-Ir);Cr=(qr-Wr)/Wt,ir=function(fn){var vn=fn*Cr,tn=Ht(Wr),Zn=Be/(sr*nn)*(tn*Xt(Wt*vn+Wr)-zt(Wr));return[De+Zn*Ft,Ue+Zn*qt,Be*tn/Ht(Wt*vn+Wr)]}}return ir.duration=Cr*1e3,ir},x.behavior.zoom=function(){var le={x:0,y:0,k:1},Te,De,Ue,Be=[960,500],$e=cn,wt=250,gt=0,Ft="mousedown.zoom",qt="mousemove.zoom",ar="mouseup.zoom",ir,Cr="touchstart.zoom",nn,pn=ae(vn,"zoomstart","zoom","zoomend"),Ir,Wr,qr,fn;st||(st="onwheel"in T?(en=function(){return-x.event.deltaY*(x.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(en=function(){return x.event.wheelDelta},"mousewheel"):(en=function(){return-x.event.detail},"MozMousePixelScroll"));function vn(_a){_a.on(Ft,ui).on(st+".zoom",Do).on("dblclick.zoom",Ji).on(Cr,Ci)}vn.event=function(_a){_a.each(function(){var di=pn.of(this,arguments),ii=le;qa?x.select(this).transition().each("start.zoom",function(){le=this.__chart__||{x:0,y:0,k:1},xa(di)}).tween("zoom:zoom",function(){var Ui=Be[0],yi=Be[1],So=De?De[0]:Ui/2,mo=De?De[1]:yi/2,Oo=x.interpolateZoom([(So-le.x)/le.k,(mo-le.y)/le.k,Ui/le.k],[(So-ii.x)/ii.k,(mo-ii.y)/ii.k,Ui/ii.k]);return function(ms){var ns=Oo(ms),ys=Ui/ns[2];this.__chart__=le={x:So-ns[0]*ys,y:mo-ns[1]*ys,k:ys},$a(di)}}).each("interrupt.zoom",function(){Va(di)}).each("end.zoom",function(){Va(di)}):(this.__chart__=le,xa(di),$a(di),Va(di))})},vn.translate=function(_a){return arguments.length?(le={x:+_a[0],y:+_a[1],k:le.k},Na(),vn):[le.x,le.y]},vn.scale=function(_a){return arguments.length?(le={x:le.x,y:le.y,k:null},ha(+_a),Na(),vn):le.k},vn.scaleExtent=function(_a){return arguments.length?($e=_a==null?cn:[+_a[0],+_a[1]],vn):$e},vn.center=function(_a){return arguments.length?(Ue=_a&&[+_a[0],+_a[1]],vn):Ue},vn.size=function(_a){return arguments.length?(Be=_a&&[+_a[0],+_a[1]],vn):Be},vn.duration=function(_a){return arguments.length?(wt=+_a,vn):wt},vn.x=function(_a){return arguments.length?(Wr=_a,Ir=_a.copy(),le={x:0,y:0,k:1},vn):Wr},vn.y=function(_a){return arguments.length?(fn=_a,qr=_a.copy(),le={x:0,y:0,k:1},vn):fn};function tn(_a){return[(_a[0]-le.x)/le.k,(_a[1]-le.y)/le.k]}function Zn(_a){return[_a[0]*le.k+le.x,_a[1]*le.k+le.y]}function ha(_a){le.k=Math.max($e[0],Math.min($e[1],_a))}function Pa(_a,di){di=Zn(di),le.x+=_a[0]-di[0],le.y+=_a[1]-di[1]}function pa(_a,di,ii,Ui){_a.__chart__={x:le.x,y:le.y,k:le.k},ha(Math.pow(2,Ui)),Pa(De=di,ii),_a=x.select(_a),wt>0&&(_a=_a.transition().duration(wt)),_a.call(vn.event)}function Na(){Wr&&Wr.domain(Ir.range().map(function(_a){return(_a-le.x)/le.k}).map(Ir.invert)),fn&&fn.domain(qr.range().map(function(_a){return(_a-le.y)/le.k}).map(qr.invert))}function xa(_a){gt++||_a({type:"zoomstart"})}function $a(_a){Na(),_a({type:"zoom",scale:le.k,translate:[le.x,le.y]})}function Va(_a){--gt||(_a({type:"zoomend"}),De=null)}function ui(){var _a=this,di=pn.of(_a,arguments),ii=0,Ui=x.select(a(_a)).on(qt,mo).on(ar,Oo),yi=tn(x.mouse(_a)),So=Kt(_a);Nn.call(_a),xa(di);function mo(){ii=1,Pa(x.mouse(_a),yi),$a(di)}function Oo(){Ui.on(qt,null).on(ar,null),So(ii),Va(di)}}function Ci(){var _a=this,di=pn.of(_a,arguments),ii={},Ui=0,yi,So=".zoom-"+x.event.changedTouches[0].identifier,mo="touchmove"+So,Oo="touchend"+So,ms=[],ns=x.select(_a),ys=Kt(_a);eo(),xa(di),ns.on(Ft,null).on(Cr,eo);function io(){var Uo=x.touches(_a);return yi=le.k,Uo.forEach(function(wo){wo.identifier in ii&&(ii[wo.identifier]=tn(wo))}),Uo}function eo(){var Uo=x.event.target;x.select(Uo).on(mo,Za).on(Oo,oi),ms.push(Uo);for(var wo=x.event.changedTouches,$o=0,fo=wo.length;$o<fo;++$o)ii[wo[$o].identifier]=null;var xs=io(),js=Date.now();if(xs.length===1){if(js-nn<500){var Iu=xs[0];pa(_a,Iu,ii[Iu.identifier],Math.floor(Math.log(le.k)/Math.LN2)+1),j()}nn=js}else if(xs.length>1){var Iu=xs[0],co=xs[1],qf=Iu[0]-co[0],pu=Iu[1]-co[1];Ui=qf*qf+pu*pu}}function Za(){var Uo=x.touches(_a),wo,$o,fo,xs;Nn.call(_a);for(var js=0,Iu=Uo.length;js<Iu;++js,xs=null)if(fo=Uo[js],xs=ii[fo.identifier]){if($o)break;wo=fo,$o=xs}if(xs){var co=(co=fo[0]-wo[0])*co+(co=fo[1]-wo[1])*co,qf=Ui&&Math.sqrt(co/Ui);wo=[(wo[0]+fo[0])/2,(wo[1]+fo[1])/2],$o=[($o[0]+xs[0])/2,($o[1]+xs[1])/2],ha(qf*yi)}nn=null,Pa(wo,$o),$a(di)}function oi(){if(x.event.touches.length){for(var Uo=x.event.changedTouches,wo=0,$o=Uo.length;wo<$o;++wo)delete ii[Uo[wo].identifier];for(var fo in ii)return void io()}x.selectAll(ms).on(So,null),ns.on(Ft,ui).on(Cr,Ci),ys(),Va(di)}}function Do(){var _a=pn.of(this,arguments);ir?clearTimeout(ir):(Nn.call(this),Te=tn(De=Ue||x.mouse(this)),xa(_a)),ir=setTimeout(function(){ir=null,Va(_a)},50),j(),ha(Math.pow(2,en()*.002)*le.k),Pa(De,Te),$a(_a)}function Ji(){var _a=x.mouse(this),di=Math.log(le.k)/Math.LN2;pa(this,_a,tn(_a),x.event.shiftKey?Math.ceil(di)-1:Math.floor(di)+1)}return x.rebind(vn,pn,"on")};var cn=[0,1/0],en,st;x.color=rr;function rr(){}rr.prototype.toString=function(){return this.rgb()+""},x.hsl=er;function er(le,Te,De){return this instanceof er?(this.h=+le,this.s=+Te,void(this.l=+De)):arguments.length<2?le instanceof er?new er(le.h,le.s,le.l):Zr(""+le,lr,er):new er(le,Te,De)}var jt=er.prototype=new rr;jt.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new er(this.h,this.s,this.l/le)},jt.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new er(this.h,this.s,le*this.l)},jt.rgb=function(){return Mr(this.h,this.s,this.l)};function Mr(le,Te,De){var Ue,Be;le=isNaN(le)?0:(le%=360)<0?le+360:le,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,De=De<0?0:De>1?1:De,Be=De<=.5?De*(1+Te):De+Te-De*Te,Ue=2*De-Be;function $e(gt){return gt>360?gt-=360:gt<0&&(gt+=360),gt<60?Ue+(Be-Ue)*gt/60:gt<180?Be:gt<240?Ue+(Be-Ue)*(240-gt)/60:Ue}function wt(gt){return Math.round($e(gt)*255)}return new Zt(wt(le+120),wt(le),wt(le-120))}x.hcl=it;function it(le,Te,De){return this instanceof it?(this.h=+le,this.c=+Te,void(this.l=+De)):arguments.length<2?le instanceof it?new it(le.h,le.c,le.l):le instanceof ct?pt(le.l,le.a,le.b):pt((le=br((le=x.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new it(le,Te,De)}var Qe=it.prototype=new rr;Qe.brighter=function(le){return new it(this.h,this.c,Math.min(100,this.l+Et*(arguments.length?le:1)))},Qe.darker=function(le){return new it(this.h,this.c,Math.max(0,this.l-Et*(arguments.length?le:1)))},Qe.rgb=function(){return ft(this.h,this.c,this.l).rgb()};function ft(le,Te,De){return isNaN(le)&&(le=0),isNaN(Te)&&(Te=0),new ct(De,Math.cos(le*=At)*Te,Math.sin(le)*Te)}x.lab=ct;function ct(le,Te,De){return this instanceof ct?(this.l=+le,this.a=+Te,void(this.b=+De)):arguments.length<2?le instanceof ct?new ct(le.l,le.a,le.b):le instanceof it?ft(le.h,le.c,le.l):br((le=Zt(le)).r,le.g,le.b):new ct(le,Te,De)}var Et=18,Nt=.95047,Pe=1,Le=1.08883,ot=ct.prototype=new rr;ot.brighter=function(le){return new ct(Math.min(100,this.l+Et*(arguments.length?le:1)),this.a,this.b)},ot.darker=function(le){return new ct(Math.max(0,this.l-Et*(arguments.length?le:1)),this.a,this.b)},ot.rgb=function(){return ut(this.l,this.a,this.b)};function ut(le,Te,De){var Ue=(le+16)/116,Be=Ue+Te/500,$e=Ue-De/200;return Be=Pt(Be)*Nt,Ue=Pt(Ue)*Pe,$e=Pt($e)*Le,new Zt(Lt(3.2404542*Be-1.5371385*Ue-.4985314*$e),Lt(-.969266*Be+1.8760108*Ue+.041556*$e),Lt(.0556434*Be-.2040259*Ue+1.0572252*$e))}function pt(le,Te,De){return le>0?new it(Math.atan2(De,Te)*mt,Math.sqrt(Te*Te+De*De),le):new it(NaN,NaN,le)}function Pt(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function xt(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function Lt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}x.rgb=Zt;function Zt(le,Te,De){return this instanceof Zt?(this.r=~~le,this.g=~~Te,void(this.b=~~De)):arguments.length<2?le instanceof Zt?new Zt(le.r,le.g,le.b):Zr(""+le,Zt,Mr):new Zt(le,Te,De)}function ur(le){return new Zt(le>>16,le>>8&255,le&255)}function Pr(le){return ur(le)+""}var Ar=Zt.prototype=new rr;Ar.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var Te=this.r,De=this.g,Ue=this.b,Be=30;return!Te&&!De&&!Ue?new Zt(Be,Be,Be):(Te&&Te<Be&&(Te=Be),De&&De<Be&&(De=Be),Ue&&Ue<Be&&(Ue=Be),new Zt(Math.min(255,Te/le),Math.min(255,De/le),Math.min(255,Ue/le)))},Ar.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new Zt(le*this.r,le*this.g,le*this.b)},Ar.hsl=function(){return lr(this.r,this.g,this.b)},Ar.toString=function(){return"#"+kr(this.r)+kr(this.g)+kr(this.b)};function kr(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function Zr(le,Te,De){var Ue=0,Be=0,$e=0,wt,gt,Ft;if(wt=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()),wt)switch(gt=wt[2].split(","),wt[1]){case"hsl":return De(parseFloat(gt[0]),parseFloat(gt[1])/100,parseFloat(gt[2])/100);case"rgb":return Te(Hr(gt[0]),Hr(gt[1]),Hr(gt[2]))}return(Ft=Lr.get(le))?Te(Ft.r,Ft.g,Ft.b):(le!=null&&le.charAt(0)==="#"&&!isNaN(Ft=parseInt(le.slice(1),16))&&(le.length===4?(Ue=(Ft&3840)>>4,Ue=Ue>>4|Ue,Be=Ft&240,Be=Be>>4|Be,$e=Ft&15,$e=$e<<4|$e):le.length===7&&(Ue=(Ft&16711680)>>16,Be=(Ft&65280)>>8,$e=Ft&255)),Te(Ue,Be,$e))}function lr(le,Te,De){var Ue=Math.min(le/=255,Te/=255,De/=255),Be=Math.max(le,Te,De),$e=Be-Ue,wt,gt,Ft=(Be+Ue)/2;return $e?(gt=Ft<.5?$e/(Be+Ue):$e/(2-Be-Ue),le==Be?wt=(Te-De)/$e+(Te<De?6:0):Te==Be?wt=(De-le)/$e+2:wt=(le-Te)/$e+4,wt*=60):(wt=NaN,gt=Ft>0&&Ft<1?0:wt),new er(wt,gt,Ft)}function br(le,Te,De){le=Or(le),Te=Or(Te),De=Or(De);var Ue=xt((.4124564*le+.3575761*Te+.1804375*De)/Nt),Be=xt((.2126729*le+.7151522*Te+.072175*De)/Pe),$e=xt((.0193339*le+.119192*Te+.9503041*De)/Le);return ct(116*Be-16,500*(Ue-Be),200*(Be-$e))}function Or(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function Hr(le){var Te=parseFloat(le);return le.charAt(le.length-1)==="%"?Math.round(Te*2.55):Te}var Lr=x.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Lr.forEach(function(le,Te){Lr.set(le,ur(Te))});function nt(le){return typeof le=="function"?le:function(){return le}}x.functor=nt,x.xhr=It(D);function It(le){return function(Te,De,Ue){return arguments.length===2&&typeof De=="function"&&(Ue=De,De=null),Jt(Te,De,le,Ue)}}function Jt(le,Te,De,Ue){var Be={},$e=x.dispatch("beforesend","progress","load","error"),wt={},gt=new XMLHttpRequest,Ft=null;self.XDomainRequest&&!("withCredentials"in gt)&&/^(http(s)?:)?\/\//.test(le)&&(gt=new XDomainRequest),"onload"in gt?gt.onload=gt.onerror=qt:gt.onreadystatechange=function(){gt.readyState>3&&qt()};function qt(){var ar=gt.status,ir;if(!ar&&Nr(gt)||ar>=200&&ar<300||ar===304){try{ir=De.call(Be,gt)}catch(Cr){$e.error.call(Be,Cr);return}$e.load.call(Be,ir)}else $e.error.call(Be,gt)}return gt.onprogress=function(ar){var ir=x.event;x.event=ar;try{$e.progress.call(Be,gt)}finally{x.event=ir}},Be.header=function(ar,ir){return ar=(ar+"").toLowerCase(),arguments.length<2?wt[ar]:(ir==null?delete wt[ar]:wt[ar]=ir+"",Be)},Be.mimeType=function(ar){return arguments.length?(Te=ar==null?null:ar+"",Be):Te},Be.responseType=function(ar){return arguments.length?(Ft=ar,Be):Ft},Be.response=function(ar){return De=ar,Be},["get","post"].forEach(function(ar){Be[ar]=function(){return Be.send.apply(Be,[ar].concat(M(arguments)))}}),Be.send=function(ar,ir,Cr){if(arguments.length===2&&typeof ir=="function"&&(Cr=ir,ir=null),gt.open(ar,le,!0),Te!=null&&!("accept"in wt)&&(wt.accept=Te+",*/*"),gt.setRequestHeader)for(var nn in wt)gt.setRequestHeader(nn,wt[nn]);return Te!=null&&gt.overrideMimeType&&gt.overrideMimeType(Te),Ft!=null&&(gt.responseType=Ft),Cr!=null&&Be.on("error",Cr).on("load",function(pn){Cr(null,pn)}),$e.beforesend.call(Be,gt),gt.send(ir==null?null:ir),Be},Be.abort=function(){return gt.abort(),Be},x.rebind(Be,$e,"on"),Ue==null?Be:Be.get(fr(Ue))}function fr(le){return le.length===1?function(Te,De){le(Te==null?De:null)}:le}function Nr(le){var Te=le.responseType;return Te&&Te!=="text"?le.response:le.responseText}x.dsv=function(le,Te){var De=new RegExp('["'+le+`
]`),Ue=le.charCodeAt(0);function Be(qt,ar,ir){arguments.length<3&&(ir=ar,ar=null);var Cr=Jt(qt,Te,ar==null?$e:wt(ar),ir);return Cr.row=function(nn){return arguments.length?Cr.response((ar=nn)==null?$e:wt(nn)):ar},Cr}function $e(qt){return Be.parse(qt.responseText)}function wt(qt){return function(ar){return Be.parse(ar.responseText,qt)}}Be.parse=function(qt,ar){var ir;return Be.parseRows(qt,function(Cr,nn){if(ir)return ir(Cr,nn-1);var pn=function(Ir){for(var Wr={},qr=Cr.length,fn=0;fn<qr;++fn)Wr[Cr[fn]]=Ir[fn];return Wr};ir=ar?function(Ir,Wr){return ar(pn(Ir),Wr)}:pn})},Be.parseRows=function(qt,ar){var ir={},Cr={},nn=[],pn=qt.length,Ir=0,Wr=0,qr,fn;function vn(){if(Ir>=pn)return Cr;if(fn)return fn=!1,ir;var Zn=Ir;if(qt.charCodeAt(Zn)===34){for(var ha=Zn;ha++<pn;)if(qt.charCodeAt(ha)===34){if(qt.charCodeAt(ha+1)!==34)break;++ha}Ir=ha+2;var Pa=qt.charCodeAt(ha+1);return Pa===13?(fn=!0,qt.charCodeAt(ha+2)===10&&++Ir):Pa===10&&(fn=!0),qt.slice(Zn+1,ha).replace(/""/g,'"')}for(;Ir<pn;){var Pa=qt.charCodeAt(Ir++),pa=1;if(Pa===10)fn=!0;else if(Pa===13)fn=!0,qt.charCodeAt(Ir)===10&&(++Ir,++pa);else if(Pa!==Ue)continue;return qt.slice(Zn,Ir-pa)}return qt.slice(Zn)}for(;(qr=vn())!==Cr;){for(var tn=[];qr!==ir&&qr!==Cr;)tn.push(qr),qr=vn();ar&&(tn=ar(tn,Wr++))==null||nn.push(tn)}return nn},Be.format=function(qt){if(Array.isArray(qt[0]))return Be.formatRows(qt);var ar=new I,ir=[];return qt.forEach(function(Cr){for(var nn in Cr)ar.has(nn)||ir.push(ar.add(nn))}),[ir.map(Ft).join(le)].concat(qt.map(function(Cr){return ir.map(function(nn){return Ft(Cr[nn])}).join(le)})).join(`
`)},Be.formatRows=function(qt){return qt.map(gt).join(`
`)};function gt(qt){return qt.map(Ft).join(le)}function Ft(qt){return De.test(qt)?'"'+qt.replace(/\"/g,'""')+'"':qt}return Be},x.csv=x.dsv(",","text/csv"),x.tsv=x.dsv("	","text/tab-separated-values");var Vr,Dr,Er,jr,kn=this[O(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};x.timer=function(){mn.apply(this,arguments)};function mn(le,Te,De){var Ue=arguments.length;Ue<2&&(Te=0),Ue<3&&(De=Date.now());var Be=De+Te,$e={c:le,t:Be,n:null};return Dr?Dr.n=$e:Vr=$e,Dr=$e,Er||(jr=clearTimeout(jr),Er=1,kn(Wn)),$e}function Wn(){var le=In(),Te=$n()-le;Te>24?(isFinite(Te)&&(clearTimeout(jr),jr=setTimeout(Wn,Te)),Er=0):(Er=1,kn(Wn))}x.timer.flush=function(){In(),$n()};function In(){for(var le=Date.now(),Te=Vr;Te;)le>=Te.t&&Te.c(le-Te.t)&&(Te.c=null),Te=Te.n;return le}function $n(){for(var le,Te=Vr,De=1/0;Te;)Te.c?(Te.t<De&&(De=Te.t),Te=(le=Te).n):Te=le?le.n=Te.n:Vr=Te.n;return Dr=le,De}x.round=function(le,Te){return Te?Math.round(le*(Te=Math.pow(10,Te)))/Te:Math.round(le)},x.geom={};function Kn(le){return le[0]}function ma(le){return le[1]}x.geom.hull=function(le){var Te=Kn,De=ma;if(arguments.length)return Ue(le);function Ue(Be){if(Be.length<3)return[];var $e=nt(Te),wt=nt(De),gt,Ft=Be.length,qt=[],ar=[];for(gt=0;gt<Ft;gt++)qt.push([+$e.call(this,Be[gt],gt),+wt.call(this,Be[gt],gt),gt]);for(qt.sort(_i),gt=0;gt<Ft;gt++)ar.push([qt[gt][0],-qt[gt][1]]);var ir=Ra(qt),Cr=Ra(ar),nn=Cr[0]===ir[0],pn=Cr[Cr.length-1]===ir[ir.length-1],Ir=[];for(gt=ir.length-1;gt>=0;--gt)Ir.push(Be[qt[ir[gt]][2]]);for(gt=+nn;gt<Cr.length-pn;++gt)Ir.push(Be[qt[Cr[gt]][2]]);return Ir}return Ue.x=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.y=function(Be){return arguments.length?(De=Be,Ue):De},Ue};function Ra(le){for(var Te=le.length,De=[0,1],Ue=2,Be=2;Be<Te;Be++){for(;Ue>1&&Mt(le[De[Ue-2]],le[De[Ue-1]],le[Be])<=0;)--Ue;De[Ue++]=Be}return De.slice(0,Ue)}function _i(le,Te){return le[0]-Te[0]||le[1]-Te[1]}x.geom.polygon=function(le){return K(le,Ka),le};var Ka=x.geom.polygon.prototype=[];Ka.area=function(){for(var le=-1,Te=this.length,De,Ue=this[Te-1],Be=0;++le<Te;)De=Ue,Ue=this[le],Be+=De[1]*Ue[0]-De[0]*Ue[1];return Be*.5},Ka.centroid=function(le){var Te=-1,De=this.length,Ue=0,Be=0,$e,wt=this[De-1],gt;for(arguments.length||(le=-1/(6*this.area()));++Te<De;)$e=wt,wt=this[Te],gt=$e[0]*wt[1]-wt[0]*$e[1],Ue+=($e[0]+wt[0])*gt,Be+=($e[1]+wt[1])*gt;return[Ue*le,Be*le]},Ka.clip=function(le){for(var Te,De=Sr(le),Ue=-1,Be=this.length-Sr(this),$e,wt,gt=this[Be-1],Ft,qt,ar;++Ue<Be;){for(Te=le.slice(),le.length=0,Ft=this[Ue],qt=Te[(wt=Te.length-De)-1],$e=-1;++$e<wt;)ar=Te[$e],ri(ar,gt,Ft)?(ri(qt,gt,Ft)||le.push(ei(qt,ar,gt,Ft)),le.push(ar)):ri(qt,gt,Ft)&&le.push(ei(qt,ar,gt,Ft)),qt=ar;De&&le.push(le[0]),gt=Ft}return le};function ri(le,Te,De){return(De[0]-Te[0])*(le[1]-Te[1])<(De[1]-Te[1])*(le[0]-Te[0])}function ei(le,Te,De,Ue){var Be=le[0],$e=De[0],wt=Te[0]-Be,gt=Ue[0]-$e,Ft=le[1],qt=De[1],ar=Te[1]-Ft,ir=Ue[1]-qt,Cr=(gt*(Ft-qt)-ir*(Be-$e))/(ir*wt-gt*ar);return[Be+Cr*wt,Ft+Cr*ar]}function Sr(le){var Te=le[0],De=le[le.length-1];return!(Te[0]-De[0]||Te[1]-De[1])}var bn,dn,Ln,ra=[],ya,sa,Bn=[];function Qn(){ga(this),this.edge=this.site=this.circle=null}function Xa(le){var Te=ra.pop()||new Qn;return Te.site=le,Te}function mi(le){wr(le),Ln.remove(le),ra.push(le),ga(le)}function Yt(le){var Te=le.circle,De=Te.x,Ue=Te.cy,Be={x:De,y:Ue},$e=le.P,wt=le.N,gt=[le];mi(le);for(var Ft=$e;Ft.circle&&l(De-Ft.circle.x)<at&&l(Ue-Ft.circle.cy)<at;)$e=Ft.P,gt.unshift(Ft),mi(Ft),Ft=$e;gt.unshift(Ft),wr(Ft);for(var qt=wt;qt.circle&&l(De-qt.circle.x)<at&&l(Ue-qt.circle.cy)<at;)wt=qt.N,gt.push(qt),mi(qt),qt=wt;gt.push(qt),wr(qt);var ar=gt.length,ir;for(ir=1;ir<ar;++ir)qt=gt[ir],Ft=gt[ir-1],ca(qt.edge,Ft.site,qt.site,Be);Ft=gt[0],qt=gt[ar-1],qt.edge=Sn(Ft.site,qt.site,null,Be),_r(Ft),_r(qt)}function gr(le){for(var Te=le.x,De=le.y,Ue,Be,$e,wt,gt=Ln._;gt;)if($e=un(gt,De)-Te,$e>at)gt=gt.L;else if(wt=Te-yn(gt,De),wt>at){if(!gt.R){Ue=gt;break}gt=gt.R}else{$e>-at?(Ue=gt.P,Be=gt):wt>-at?(Ue=gt,Be=gt.N):Ue=Be=gt;break}var Ft=Xa(le);if(Ln.insert(Ue,Ft),!(!Ue&&!Be)){if(Ue===Be){wr(Ue),Be=Xa(Ue.site),Ln.insert(Ft,Be),Ft.edge=Be.edge=Sn(Ue.site,Ft.site),_r(Ue),_r(Be);return}if(!Be){Ft.edge=Sn(Ue.site,Ft.site);return}wr(Ue),wr(Be);var qt=Ue.site,ar=qt.x,ir=qt.y,Cr=le.x-ar,nn=le.y-ir,pn=Be.site,Ir=pn.x-ar,Wr=pn.y-ir,qr=2*(Cr*Wr-nn*Ir),fn=Cr*Cr+nn*nn,vn=Ir*Ir+Wr*Wr,tn={x:(Wr*fn-nn*vn)/qr+ar,y:(Cr*vn-Ir*fn)/qr+ir};ca(Be.edge,qt,pn,tn),Ft.edge=Sn(qt,le,null,tn),Be.edge=Sn(le,pn,null,tn),_r(Ue),_r(Be)}}function un(le,Te){var De=le.site,Ue=De.x,Be=De.y,$e=Be-Te;if(!$e)return Ue;var wt=le.P;if(!wt)return-1/0;De=wt.site;var gt=De.x,Ft=De.y,qt=Ft-Te;if(!qt)return gt;var ar=gt-Ue,ir=1/$e-1/qt,Cr=ar/qt;return ir?(-Cr+Math.sqrt(Cr*Cr-2*ir*(ar*ar/(-2*qt)-Ft+qt/2+Be-$e/2)))/ir+Ue:(Ue+gt)/2}function yn(le,Te){var De=le.N;if(De)return un(De,Te);var Ue=le.site;return Ue.y===Te?Ue.x:1/0}function sn(le){this.site=le,this.edges=[]}sn.prototype.prepare=function(){for(var le=this.edges,Te=le.length,De;Te--;)De=le[Te].edge,(!De.b||!De.a)&&le.splice(Te,1);return le.sort(Tn),le.length};function Cn(le){for(var Te=le[0][0],De=le[1][0],Ue=le[0][1],Be=le[1][1],$e,wt,gt,Ft,qt=dn,ar=qt.length,ir,Cr,nn,pn,Ir,Wr;ar--;)if(ir=qt[ar],!(!ir||!ir.prepare()))for(nn=ir.edges,pn=nn.length,Cr=0;Cr<pn;)Wr=nn[Cr].end(),gt=Wr.x,Ft=Wr.y,Ir=nn[++Cr%pn].start(),$e=Ir.x,wt=Ir.y,(l(gt-$e)>at||l(Ft-wt)>at)&&(nn.splice(Cr,0,new Ma(na(ir.site,Wr,l(gt-Te)<at&&Be-Ft>at?{x:Te,y:l($e-Te)<at?wt:Be}:l(Ft-Be)<at&&De-gt>at?{x:l(wt-Be)<at?$e:De,y:Be}:l(gt-De)<at&&Ft-Ue>at?{x:De,y:l($e-De)<at?wt:Ue}:l(Ft-Ue)<at&&gt-Te>at?{x:l(wt-Ue)<at?$e:Te,y:Ue}:null),ir.site,null)),++pn)}function Tn(le,Te){return Te.angle-le.angle}function gn(){ga(this),this.x=this.y=this.arc=this.site=this.cy=null}function _r(le){var Te=le.P,De=le.N;if(!(!Te||!De)){var Ue=Te.site,Be=le.site,$e=De.site;if(Ue!==$e){var wt=Be.x,gt=Be.y,Ft=Ue.x-wt,qt=Ue.y-gt,ar=$e.x-wt,Wr=$e.y-gt,ir=2*(Ft*Wr-qt*ar);if(!(ir>=-We)){var Cr=Ft*Ft+qt*qt,nn=ar*ar+Wr*Wr,pn=(Wr*Cr-qt*nn)/ir,Ir=(Ft*nn-ar*Cr)/ir,Wr=Ir+gt,qr=Bn.pop()||new gn;qr.arc=le,qr.site=Be,qr.x=pn+wt,qr.y=Wr+Math.sqrt(pn*pn+Ir*Ir),qr.cy=Wr,le.circle=qr;for(var fn=null,vn=sa._;vn;)if(qr.y<vn.y||qr.y===vn.y&&qr.x<=vn.x)if(vn.L)vn=vn.L;else{fn=vn.P;break}else if(vn.R)vn=vn.R;else{fn=vn;break}sa.insert(fn,qr),fn||(ya=qr)}}}}function wr(le){var Te=le.circle;Te&&(Te.P||(ya=Te.N),sa.remove(Te),Bn.push(Te),ga(Te),le.circle=null)}function Br(le,Te,De,Ue){return function(Be){var $e=Be.a,wt=Be.b,gt=$e.x,Ft=$e.y,qt=wt.x,ar=wt.y,ir=0,Cr=1,nn=qt-gt,pn=ar-Ft,Ir;if(Ir=le-gt,!(!nn&&Ir>0)){if(Ir/=nn,nn<0){if(Ir<ir)return;Ir<Cr&&(Cr=Ir)}else if(nn>0){if(Ir>Cr)return;Ir>ir&&(ir=Ir)}if(Ir=De-gt,!(!nn&&Ir<0)){if(Ir/=nn,nn<0){if(Ir>Cr)return;Ir>ir&&(ir=Ir)}else if(nn>0){if(Ir<ir)return;Ir<Cr&&(Cr=Ir)}if(Ir=Te-Ft,!(!pn&&Ir>0)){if(Ir/=pn,pn<0){if(Ir<ir)return;Ir<Cr&&(Cr=Ir)}else if(pn>0){if(Ir>Cr)return;Ir>ir&&(ir=Ir)}if(Ir=Ue-Ft,!(!pn&&Ir<0)){if(Ir/=pn,pn<0){if(Ir>Cr)return;Ir>ir&&(ir=Ir)}else if(pn>0){if(Ir<ir)return;Ir<Cr&&(Cr=Ir)}return ir>0&&(Be.a={x:gt+ir*nn,y:Ft+ir*pn}),Cr<1&&(Be.b={x:gt+Cr*nn,y:Ft+Cr*pn}),Be}}}}}}function An(le){for(var Te=bn,De=Br(le[0][0],le[0][1],le[1][0],le[1][1]),Ue=Te.length,Be;Ue--;)Be=Te[Ue],(!Yn(Be,le)||!De(Be)||l(Be.a.x-Be.b.x)<at&&l(Be.a.y-Be.b.y)<at)&&(Be.a=Be.b=null,Te.splice(Ue,1))}function Yn(le,Te){var De=le.b;if(De)return!0;var Ue=le.a,Be=Te[0][0],$e=Te[1][0],wt=Te[0][1],gt=Te[1][1],Ft=le.l,qt=le.r,ar=Ft.x,ir=Ft.y,Cr=qt.x,nn=qt.y,pn=(ar+Cr)/2,Ir=(ir+nn)/2,Wr,qr;if(nn===ir){if(pn<Be||pn>=$e)return;if(ar>Cr){if(!Ue)Ue={x:pn,y:wt};else if(Ue.y>=gt)return;De={x:pn,y:gt}}else{if(!Ue)Ue={x:pn,y:gt};else if(Ue.y<wt)return;De={x:pn,y:wt}}}else if(Wr=(ar-Cr)/(nn-ir),qr=Ir-Wr*pn,Wr<-1||Wr>1)if(ar>Cr){if(!Ue)Ue={x:(wt-qr)/Wr,y:wt};else if(Ue.y>=gt)return;De={x:(gt-qr)/Wr,y:gt}}else{if(!Ue)Ue={x:(gt-qr)/Wr,y:gt};else if(Ue.y<wt)return;De={x:(wt-qr)/Wr,y:wt}}else if(ir<nn){if(!Ue)Ue={x:Be,y:Wr*Be+qr};else if(Ue.x>=$e)return;De={x:$e,y:Wr*$e+qr}}else{if(!Ue)Ue={x:$e,y:Wr*$e+qr};else if(Ue.x<Be)return;De={x:Be,y:Wr*Be+qr}}return le.a=Ue,le.b=De,!0}function ua(le,Te){this.l=le,this.r=Te,this.a=this.b=null}function Sn(le,Te,De,Ue){var Be=new ua(le,Te);return bn.push(Be),De&&ca(Be,le,Te,De),Ue&&ca(Be,Te,le,Ue),dn[le.i].edges.push(new Ma(Be,le,Te)),dn[Te.i].edges.push(new Ma(Be,Te,le)),Be}function na(le,Te,De){var Ue=new ua(le,null);return Ue.a=Te,Ue.b=De,bn.push(Ue),Ue}function ca(le,Te,De,Ue){!le.a&&!le.b?(le.a=Ue,le.l=Te,le.r=De):le.l===De?le.b=Ue:le.a=Ue}function Ma(le,Te,De){var Ue=le.a,Be=le.b;this.edge=le,this.site=Te,this.angle=De?Math.atan2(De.y-Te.y,De.x-Te.x):le.l===Te?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}Ma.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ka(){this._=null}function ga(le){le.U=le.C=le.L=le.R=le.P=le.N=null}ka.prototype={insert:function(le,Te){var De,Ue,Be;if(le){if(Te.P=le,Te.N=le.N,le.N&&(le.N.P=Te),le.N=Te,le.R){for(le=le.R;le.L;)le=le.L;le.L=Te}else le.R=Te;De=le}else this._?(le=ro(this._),Te.P=null,Te.N=le,le.P=le.L=Te,De=le):(Te.P=Te.N=null,this._=Te,De=null);for(Te.L=Te.R=null,Te.U=De,Te.C=!0,le=Te;De&&De.C;)Ue=De.U,De===Ue.L?(Be=Ue.R,Be&&Be.C?(De.C=Be.C=!1,Ue.C=!0,le=Ue):(le===De.R&&(Ia(this,De),le=De,De=le.U),De.C=!1,Ue.C=!0,Mo(this,Ue))):(Be=Ue.L,Be&&Be.C?(De.C=Be.C=!1,Ue.C=!0,le=Ue):(le===De.L&&(Mo(this,De),le=De,De=le.U),De.C=!1,Ue.C=!0,Ia(this,Ue))),De=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var Te=le.U,De,Ue=le.L,Be=le.R,$e,wt;if(Ue?Be?$e=ro(Be):$e=Ue:$e=Be,Te?Te.L===le?Te.L=$e:Te.R=$e:this._=$e,Ue&&Be?(wt=$e.C,$e.C=le.C,$e.L=Ue,Ue.U=$e,$e!==Be?(Te=$e.U,$e.U=le.U,le=$e.R,Te.L=le,$e.R=Be,Be.U=$e):($e.U=Te,Te=$e,le=$e.R)):(wt=le.C,le=$e),le&&(le.U=Te),!wt){if(le&&le.C){le.C=!1;return}do{if(le===this._)break;if(le===Te.L){if(De=Te.R,De.C&&(De.C=!1,Te.C=!0,Ia(this,Te),De=Te.R),De.L&&De.L.C||De.R&&De.R.C){(!De.R||!De.R.C)&&(De.L.C=!1,De.C=!0,Mo(this,De),De=Te.R),De.C=Te.C,Te.C=De.R.C=!1,Ia(this,Te),le=this._;break}}else if(De=Te.L,De.C&&(De.C=!1,Te.C=!0,Mo(this,Te),De=Te.L),De.L&&De.L.C||De.R&&De.R.C){(!De.L||!De.L.C)&&(De.R.C=!1,De.C=!0,Ia(this,De),De=Te.L),De.C=Te.C,Te.C=De.L.C=!1,Mo(this,Te),le=this._;break}De.C=!0,le=Te,Te=Te.U}while(!le.C);le&&(le.C=!1)}}};function Ia(le,Te){var De=Te,Ue=Te.R,Be=De.U;Be?Be.L===De?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,De.U=Ue,De.R=Ue.L,De.R&&(De.R.U=De),Ue.L=De}function Mo(le,Te){var De=Te,Ue=Te.L,Be=De.U;Be?Be.L===De?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,De.U=Ue,De.L=Ue.R,De.L&&(De.L.U=De),Ue.R=De}function ro(le){for(;le.L;)le=le.L;return le}function Jo(le,Te){var De=le.sort(Ks).pop(),Ue,Be,$e;for(bn=[],dn=new Array(le.length),Ln=new ka,sa=new ka;;)if($e=ya,De&&(!$e||De.y<$e.y||De.y===$e.y&&De.x<$e.x))(De.x!==Ue||De.y!==Be)&&(dn[De.i]=new sn(De),gr(De),Ue=De.x,Be=De.y),De=le.pop();else if($e)Yt($e.arc);else break;Te&&(An(Te),Cn(Te));var wt={cells:dn,edges:bn};return Ln=sa=bn=dn=null,wt}function Ks(le,Te){return Te.y-le.y||Te.x-le.x}x.geom.voronoi=function(le){var Te=Kn,De=ma,Ue=Te,Be=De,$e=Vs;if(le)return wt(le);function wt(Ft){var qt=new Array(Ft.length),ar=$e[0][0],ir=$e[0][1],Cr=$e[1][0],nn=$e[1][1];return Jo(gt(Ft),$e).cells.forEach(function(pn,Ir){var Wr=pn.edges,qr=pn.site,fn=qt[Ir]=Wr.length?Wr.map(function(vn){var tn=vn.start();return[tn.x,tn.y]}):qr.x>=ar&&qr.x<=Cr&&qr.y>=ir&&qr.y<=nn?[[ar,nn],[Cr,nn],[Cr,ir],[ar,ir]]:[];fn.point=Ft[Ir]}),qt}function gt(Ft){return Ft.map(function(qt,ar){return{x:Math.round(Ue(qt,ar)/at)*at,y:Math.round(Be(qt,ar)/at)*at,i:ar}})}return wt.links=function(Ft){return Jo(gt(Ft)).edges.filter(function(qt){return qt.l&&qt.r}).map(function(qt){return{source:Ft[qt.l.i],target:Ft[qt.r.i]}})},wt.triangles=function(Ft){var qt=[];return Jo(gt(Ft)).cells.forEach(function(ar,ir){for(var Cr=ar.site,nn=ar.edges.sort(Tn),pn=-1,Ir=nn.length,Wr,qr=nn[Ir-1].edge,fn=qr.l===Cr?qr.r:qr.l;++pn<Ir;)Wr=fn,qr=nn[pn].edge,fn=qr.l===Cr?qr.r:qr.l,ir<Wr.i&&ir<fn.i&&Gl(Cr,Wr,fn)<0&&qt.push([Ft[ir],Ft[Wr.i],Ft[fn.i]])}),qt},wt.x=function(Ft){return arguments.length?(Ue=nt(Te=Ft),wt):Te},wt.y=function(Ft){return arguments.length?(Be=nt(De=Ft),wt):De},wt.clipExtent=function(Ft){return arguments.length?($e=Ft==null?Vs:Ft,wt):$e===Vs?null:$e},wt.size=function(Ft){return arguments.length?wt.clipExtent(Ft&&[[0,0],Ft]):$e===Vs?null:$e&&$e[1]},wt};var Vs=[[-1e6,-1e6],[1e6,1e6]];function Gl(le,Te,De){return(le.x-De.x)*(Te.y-le.y)-(le.x-Te.x)*(De.y-le.y)}x.geom.delaunay=function(le){return x.geom.voronoi().triangles(le)},x.geom.quadtree=function(le,Te,De,Ue,Be){var $e=Kn,wt=ma,gt;if(gt=arguments.length)return $e=Ai,wt=Hs,gt===3&&(Be=De,Ue=Te,De=Te=0),Ft(le);function Ft(qt){var ar,ir=nt($e),Cr=nt(wt),nn,pn,Ir,Wr,qr,fn,vn,tn;if(Te!=null)qr=Te,fn=De,vn=Ue,tn=Be;else if(vn=tn=-(qr=fn=1/0),nn=[],pn=[],Wr=qt.length,gt)for(Ir=0;Ir<Wr;++Ir)ar=qt[Ir],ar.x<qr&&(qr=ar.x),ar.y<fn&&(fn=ar.y),ar.x>vn&&(vn=ar.x),ar.y>tn&&(tn=ar.y),nn.push(ar.x),pn.push(ar.y);else for(Ir=0;Ir<Wr;++Ir){var Zn=+ir(ar=qt[Ir],Ir),ha=+Cr(ar,Ir);Zn<qr&&(qr=Zn),ha<fn&&(fn=ha),Zn>vn&&(vn=Zn),ha>tn&&(tn=ha),nn.push(Zn),pn.push(ha)}var Pa=vn-qr,pa=tn-fn;Pa>pa?tn=fn+Pa:vn=qr+pa;function Na(Va,ui,Ci,Do,Ji,_a,di,ii){if(!(isNaN(Ci)||isNaN(Do)))if(Va.leaf){var Ui=Va.x,yi=Va.y;if(Ui!=null)if(l(Ui-Ci)+l(yi-Do)<.01)xa(Va,ui,Ci,Do,Ji,_a,di,ii);else{var So=Va.point;Va.x=Va.y=Va.point=null,xa(Va,So,Ui,yi,Ji,_a,di,ii),xa(Va,ui,Ci,Do,Ji,_a,di,ii)}else Va.x=Ci,Va.y=Do,Va.point=ui}else xa(Va,ui,Ci,Do,Ji,_a,di,ii)}function xa(Va,ui,Ci,Do,Ji,_a,di,ii){var Ui=(Ji+di)*.5,yi=(_a+ii)*.5,So=Ci>=Ui,mo=Do>=yi,Oo=mo<<1|So;Va.leaf=!1,Va=Va.nodes[Oo]||(Va.nodes[Oo]=Gs()),So?Ji=Ui:di=Ui,mo?_a=yi:ii=yi,Na(Va,ui,Ci,Do,Ji,_a,di,ii)}var $a=Gs();if($a.add=function(Va){Na($a,Va,+ir(Va,++Ir),+Cr(Va,Ir),qr,fn,vn,tn)},$a.visit=function(Va){ji(Va,$a,qr,fn,vn,tn)},$a.find=function(Va){return Io($a,Va[0],Va[1],qr,fn,vn,tn)},Ir=-1,Te==null){for(;++Ir<Wr;)Na($a,qt[Ir],nn[Ir],pn[Ir],qr,fn,vn,tn);--Ir}else qt.forEach($a.add);return nn=pn=qt=ar=null,$a}return Ft.x=function(qt){return arguments.length?($e=qt,Ft):$e},Ft.y=function(qt){return arguments.length?(wt=qt,Ft):wt},Ft.extent=function(qt){return arguments.length?(qt==null?Te=De=Ue=Be=null:(Te=+qt[0][0],De=+qt[0][1],Ue=+qt[1][0],Be=+qt[1][1]),Ft):Te==null?null:[[Te,De],[Ue,Be]]},Ft.size=function(qt){return arguments.length?(qt==null?Te=De=Ue=Be=null:(Te=De=0,Ue=+qt[0],Be=+qt[1]),Ft):Te==null?null:[Ue-Te,Be-De]},Ft};function Ai(le){return le.x}function Hs(le){return le.y}function Gs(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ji(le,Te,De,Ue,Be,$e){if(!le(Te,De,Ue,Be,$e)){var wt=(De+Be)*.5,gt=(Ue+$e)*.5,Ft=Te.nodes;Ft[0]&&ji(le,Ft[0],De,Ue,wt,gt),Ft[1]&&ji(le,Ft[1],wt,Ue,Be,gt),Ft[2]&&ji(le,Ft[2],De,gt,wt,$e),Ft[3]&&ji(le,Ft[3],wt,gt,Be,$e)}}function Io(le,Te,De,Ue,Be,$e,wt){var gt=1/0,Ft;return function qt(ar,ir,Cr,nn,pn){if(!(ir>$e||Cr>wt||nn<Ue||pn<Be)){if(Ir=ar.point){var Ir,Wr=Te-ar.x,qr=De-ar.y,fn=Wr*Wr+qr*qr;if(fn<gt){var vn=Math.sqrt(gt=fn);Ue=Te-vn,Be=De-vn,$e=Te+vn,wt=De+vn,Ft=Ir}}for(var tn=ar.nodes,Zn=(ir+nn)*.5,ha=(Cr+pn)*.5,Pa=Te>=Zn,pa=De>=ha,Na=pa<<1|Pa,xa=Na+4;Na<xa;++Na)if(ar=tn[Na&3])switch(Na&3){case 0:qt(ar,ir,Cr,Zn,ha);break;case 1:qt(ar,Zn,Cr,nn,ha);break;case 2:qt(ar,ir,ha,Zn,pn);break;case 3:qt(ar,Zn,ha,nn,pn);break}}}(le,Ue,Be,$e,wt),Ft}x.interpolateRgb=Ml;function Ml(le,Te){le=x.rgb(le),Te=x.rgb(Te);var De=le.r,Ue=le.g,Be=le.b,$e=Te.r-De,wt=Te.g-Ue,gt=Te.b-Be;return function(Ft){return"#"+kr(Math.round(De+$e*Ft))+kr(Math.round(Ue+wt*Ft))+kr(Math.round(Be+gt*Ft))}}x.interpolateObject=ws;function ws(le,Te){var De={},Ue={},Be;for(Be in le)Be in Te?De[Be]=po(le[Be],Te[Be]):Ue[Be]=le[Be];for(Be in Te)Be in le||(Ue[Be]=Te[Be]);return function($e){for(Be in De)Ue[Be]=De[Be]($e);return Ue}}x.interpolateNumber=Ii;function Ii(le,Te){return le=+le,Te=+Te,function(De){return le*(1-De)+Te*De}}x.interpolateString=fl;function fl(le,Te){var De=lo.lastIndex=Fi.lastIndex=0,Ue,Be,$e,wt=-1,gt=[],Ft=[];for(le=le+"",Te=Te+"";(Ue=lo.exec(le))&&(Be=Fi.exec(Te));)($e=Be.index)>De&&($e=Te.slice(De,$e),gt[wt]?gt[wt]+=$e:gt[++wt]=$e),(Ue=Ue[0])===(Be=Be[0])?gt[wt]?gt[wt]+=Be:gt[++wt]=Be:(gt[++wt]=null,Ft.push({i:wt,x:Ii(Ue,Be)})),De=Fi.lastIndex;return De<Te.length&&($e=Te.slice(De),gt[wt]?gt[wt]+=$e:gt[++wt]=$e),gt.length<2?Ft[0]?(Te=Ft[0].x,function(qt){return Te(qt)+""}):function(){return Te}:(Te=Ft.length,function(qt){for(var ar=0,ir;ar<Te;++ar)gt[(ir=Ft[ar]).i]=ir.x(qt);return gt.join("")})}var lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fi=new RegExp(lo.source,"g");x.interpolate=po;function po(le,Te){for(var De=x.interpolators.length,Ue;--De>=0&&!(Ue=x.interpolators[De](le,Te)););return Ue}x.interpolators=[function(le,Te){var De=typeof Te;return(De==="string"?Lr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?Ml:fl:Te instanceof rr?Ml:Array.isArray(Te)?no:De==="object"&&isNaN(Te)?ws:Ii)(le,Te)}],x.interpolateArray=no;function no(le,Te){var De=[],Ue=[],Be=le.length,$e=Te.length,wt=Math.min(le.length,Te.length),gt;for(gt=0;gt<wt;++gt)De.push(po(le[gt],Te[gt]));for(;gt<Be;++gt)Ue[gt]=le[gt];for(;gt<$e;++gt)Ue[gt]=Te[gt];return function(Ft){for(gt=0;gt<wt;++gt)Ue[gt]=De[gt](Ft);return Ue}}var us=function(){return D},Js=x.map({linear:us,poly:Rs,quad:function(){return No},cubic:function(){return sf},sin:function(){return Yl},exp:function(){return Vu},circle:function(){return Hu},elastic:Ys,back:El,bounce:function(){return Is}}),au=x.map({in:D,out:bu,"in-out":Ds,"out-in":function(le){return Ds(bu(le))}});x.ease=function(le){var Te=le.indexOf("-"),De=Te>=0?le.slice(0,Te):le,Ue=Te>=0?le.slice(Te+1):"in";return De=Js.get(De)||us,Ue=au.get(Ue)||D,es(Ue(De.apply(null,f.call(arguments,1))))};function es(le){return function(Te){return Te<=0?0:Te>=1?1:le(Te)}}function bu(le){return function(Te){return 1-le(1-Te)}}function Ds(le){return function(Te){return .5*(Te<.5?le(2*Te):2-le(2-2*Te))}}function No(le){return le*le}function sf(le){return le*le*le}function ko(le){if(le<=0)return 0;if(le>=1)return 1;var Te=le*le,De=Te*le;return 4*(le<.5?De:3*(le-Te)+De-.75)}function Rs(le){return function(Te){return Math.pow(Te,le)}}function Yl(le){return 1-Math.cos(le*et)}function Vu(le){return Math.pow(2,10*(le-1))}function Hu(le){return 1-Math.sqrt(1-le*le)}function Ys(le,Te){var De;return arguments.length<2&&(Te=.45),arguments.length?De=Te/He*Math.asin(1/le):(le=1,De=Te/4),function(Ue){return 1+le*Math.pow(2,-10*Ue)*Math.sin((Ue-De)*He/Te)}}function El(le){return le||(le=1.70158),function(Te){return Te*Te*((le+1)*Te-le)}}function Is(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}x.interpolateHcl=iu;function iu(le,Te){le=x.hcl(le),Te=x.hcl(Te);var De=le.h,Ue=le.c,Be=le.l,$e=Te.h-De,wt=Te.c-Ue,gt=Te.l-Be;return isNaN(wt)&&(wt=0,Ue=isNaN(Ue)?Te.c:Ue),isNaN($e)?($e=0,De=isNaN(De)?Te.h:De):$e>180?$e-=360:$e<-180&&($e+=360),function(Ft){return ft(De+$e*Ft,Ue+wt*Ft,Be+gt*Ft)+""}}x.interpolateHsl=cl;function cl(le,Te){le=x.hsl(le),Te=x.hsl(Te);var De=le.h,Ue=le.s,Be=le.l,$e=Te.h-De,wt=Te.s-Ue,gt=Te.l-Be;return isNaN(wt)&&(wt=0,Ue=isNaN(Ue)?Te.s:Ue),isNaN($e)?($e=0,De=isNaN(De)?Te.h:De):$e>180?$e-=360:$e<-180&&($e+=360),function(Ft){return Mr(De+$e*Ft,Ue+wt*Ft,Be+gt*Ft)+""}}x.interpolateLab=ou;function ou(le,Te){le=x.lab(le),Te=x.lab(Te);var De=le.l,Ue=le.a,Be=le.b,$e=Te.l-De,wt=Te.a-Ue,gt=Te.b-Be;return function(Ft){return ut(De+$e*Ft,Ue+wt*Ft,Be+gt*Ft)+""}}x.interpolateRound=_u;function _u(le,Te){return Te-=le,function(De){return Math.round(le+Te*De)}}x.transform=function(le){var Te=T.createElementNS(x.ns.prefix.svg,"g");return(x.transform=function(De){if(De!=null){Te.setAttribute("transform",De);var Ue=Te.transform.baseVal.consolidate()}return new Wl(Ue?Ue.matrix:hl)})(le)};function Wl(le){var Te=[le.a,le.b],De=[le.c,le.d],Ue=$s(Te),Be=wu(Te,De),$e=$s(Xl(De,Te,-Be))||0;Te[0]*De[1]<De[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(Te[1],Te[0]):Math.atan2(-De[0],De[1]))*mt,this.translate=[le.e,le.f],this.scale=[Ue,$e],this.skew=$e?Math.atan2(Be,$e)*mt:0}Wl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function wu(le,Te){return le[0]*Te[0]+le[1]*Te[1]}function $s(le){var Te=Math.sqrt(wu(le,le));return Te&&(le[0]/=Te,le[1]/=Te),Te}function Xl(le,Te,De){return le[0]+=De*Te[0],le[1]+=De*Te[1],le}var hl={a:1,b:0,c:0,d:1,e:0,f:0};x.interpolateTransform=jl;function Ts(le){return le.length?le.pop()+",":""}function Sl(le,Te,De,Ue){if(le[0]!==Te[0]||le[1]!==Te[1]){var Be=De.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:Ii(le[0],Te[0])},{i:Be-2,x:Ii(le[1],Te[1])})}else(Te[0]||Te[1])&&De.push("translate("+Te+")")}function su(le,Te,De,Ue){le!==Te?(le-Te>180?Te+=360:Te-le>180&&(le+=360),Ue.push({i:De.push(Ts(De)+"rotate(",null,")")-2,x:Ii(le,Te)})):Te&&De.push(Ts(De)+"rotate("+Te+")")}function Tu(le,Te,De,Ue){le!==Te?Ue.push({i:De.push(Ts(De)+"skewX(",null,")")-2,x:Ii(le,Te)}):Te&&De.push(Ts(De)+"skewX("+Te+")")}function Au(le,Te,De,Ue){if(le[0]!==Te[0]||le[1]!==Te[1]){var Be=De.push(Ts(De)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:Ii(le[0],Te[0])},{i:Be-2,x:Ii(le[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&De.push(Ts(De)+"scale("+Te+")")}function jl(le,Te){var De=[],Ue=[];return le=x.transform(le),Te=x.transform(Te),Sl(le.translate,Te.translate,De,Ue),su(le.rotate,Te.rotate,De,Ue),Tu(le.skew,Te.skew,De,Ue),Au(le.scale,Te.scale,De,Ue),le=Te=null,function(Be){for(var $e=-1,wt=Ue.length,gt;++$e<wt;)De[(gt=Ue[$e]).i]=gt.x(Be);return De.join("")}}function Qs(le,Te){return Te=(Te-=le=+le)||1/Te,function(De){return(De-le)/Te}}function Mu(le,Te){return Te=(Te-=le=+le)||1/Te,function(De){return Math.max(0,Math.min(1,(De-le)/Te))}}x.layout={},x.layout.bundle=function(){return function(le){for(var Te=[],De=-1,Ue=le.length;++De<Ue;)Te.push(fs(le[De]));return Te}};function fs(le){for(var Te=le.source,De=le.target,Ue=qs(Te,De),Be=[Te];Te!==Ue;)Te=Te.parent,Be.push(Te);for(var $e=Be.length;De!==Ue;)Be.splice($e,0,De),De=De.parent;return Be}function Wo(le){for(var Te=[],De=le.parent;De!=null;)Te.push(le),le=De,De=De.parent;return Te.push(le),Te}function qs(le,Te){if(le===Te)return le;for(var De=Wo(le),Ue=Wo(Te),Be=De.pop(),$e=Ue.pop(),wt=null;Be===$e;)wt=Be,Be=De.pop(),$e=Ue.pop();return wt}x.layout.chord=function(){var le={},Te,De,Ue,Be,$e=0,wt,gt,Ft;function qt(){var ir={},Cr=[],nn=x.range(Be),pn=[],Ir,Wr,qr,fn,vn;for(Te=[],De=[],Ir=0,fn=-1;++fn<Be;){for(Wr=0,vn=-1;++vn<Be;)Wr+=Ue[fn][vn];Cr.push(Wr),pn.push(x.range(Be)),Ir+=Wr}for(wt&&nn.sort(function($a,Va){return wt(Cr[$a],Cr[Va])}),gt&&pn.forEach(function($a,Va){$a.sort(function(ui,Ci){return gt(Ue[Va][ui],Ue[Va][Ci])})}),Ir=(He-$e*Be)/Ir,Wr=0,fn=-1;++fn<Be;){for(qr=Wr,vn=-1;++vn<Be;){var tn=nn[fn],Zn=pn[tn][vn],ha=Ue[tn][Zn],Pa=Wr,pa=Wr+=ha*Ir;ir[tn+"-"+Zn]={index:tn,subindex:Zn,startAngle:Pa,endAngle:pa,value:ha}}De[tn]={index:tn,startAngle:qr,endAngle:Wr,value:Cr[tn]},Wr+=$e}for(fn=-1;++fn<Be;)for(vn=fn-1;++vn<Be;){var Na=ir[fn+"-"+vn],xa=ir[vn+"-"+fn];(Na.value||xa.value)&&Te.push(Na.value<xa.value?{source:xa,target:Na}:{source:Na,target:xa})}Ft&&ar()}function ar(){Te.sort(function(ir,Cr){return Ft((ir.source.value+ir.target.value)/2,(Cr.source.value+Cr.target.value)/2)})}return le.matrix=function(ir){return arguments.length?(Be=(Ue=ir)&&Ue.length,Te=De=null,le):Ue},le.padding=function(ir){return arguments.length?($e=ir,Te=De=null,le):$e},le.sortGroups=function(ir){return arguments.length?(wt=ir,Te=De=null,le):wt},le.sortSubgroups=function(ir){return arguments.length?(gt=ir,Te=null,le):gt},le.sortChords=function(ir){return arguments.length?(Ft=ir,Te&&ar(),le):Ft},le.chords=function(){return Te||qt(),Te},le.groups=function(){return De||qt(),De},le},x.layout.force=function(){var le={},Te=x.dispatch("start","tick","end"),De,Ue=[1,1],Be,$e,wt=.9,gt=Fs,Ft=go,qt=-30,ar=Cl,ir=.1,Cr=.64,nn=[],pn=[],Ir,Wr,qr;function fn(tn){return function(Zn,ha,Pa,pa){if(Zn.point!==tn){var Na=Zn.cx-tn.x,xa=Zn.cy-tn.y,$a=pa-ha,Va=Na*Na+xa*xa;if($a*$a/Cr<Va){if(Va<ar){var ui=Zn.charge/Va;tn.px-=Na*ui,tn.py-=xa*ui}return!0}if(Zn.point&&Va&&Va<ar){var ui=Zn.pointCharge/Va;tn.px-=Na*ui,tn.py-=xa*ui}}return!Zn.charge}}le.tick=function(){if(($e*=.99)<.005)return De=null,Te.end({type:"end",alpha:$e=0}),!0;var tn=nn.length,Zn=pn.length,ha,Pa,pa,Na,xa,$a,Va,ui,Ci;for(Pa=0;Pa<Zn;++Pa)pa=pn[Pa],Na=pa.source,xa=pa.target,ui=xa.x-Na.x,Ci=xa.y-Na.y,($a=ui*ui+Ci*Ci)&&($a=$e*Wr[Pa]*(($a=Math.sqrt($a))-Ir[Pa])/$a,ui*=$a,Ci*=$a,xa.x-=ui*(Va=Na.weight+xa.weight?Na.weight/(Na.weight+xa.weight):.5),xa.y-=Ci*Va,Na.x+=ui*(Va=1-Va),Na.y+=Ci*Va);if((Va=$e*ir)&&(ui=Ue[0]/2,Ci=Ue[1]/2,Pa=-1,Va))for(;++Pa<tn;)pa=nn[Pa],pa.x+=(ui-pa.x)*Va,pa.y+=(Ci-pa.y)*Va;if(qt)for(Ms(ha=x.geom.quadtree(nn),$e,qr),Pa=-1;++Pa<tn;)(pa=nn[Pa]).fixed||ha.visit(fn(pa));for(Pa=-1;++Pa<tn;)pa=nn[Pa],pa.fixed?(pa.x=pa.px,pa.y=pa.py):(pa.x-=(pa.px-(pa.px=pa.x))*wt,pa.y-=(pa.py-(pa.py=pa.y))*wt);Te.tick({type:"tick",alpha:$e})},le.nodes=function(tn){return arguments.length?(nn=tn,le):nn},le.links=function(tn){return arguments.length?(pn=tn,le):pn},le.size=function(tn){return arguments.length?(Ue=tn,le):Ue},le.linkDistance=function(tn){return arguments.length?(gt=typeof tn=="function"?tn:+tn,le):gt},le.distance=le.linkDistance,le.linkStrength=function(tn){return arguments.length?(Ft=typeof tn=="function"?tn:+tn,le):Ft},le.friction=function(tn){return arguments.length?(wt=+tn,le):wt},le.charge=function(tn){return arguments.length?(qt=typeof tn=="function"?tn:+tn,le):qt},le.chargeDistance=function(tn){return arguments.length?(ar=tn*tn,le):Math.sqrt(ar)},le.gravity=function(tn){return arguments.length?(ir=+tn,le):ir},le.theta=function(tn){return arguments.length?(Cr=tn*tn,le):Math.sqrt(Cr)},le.alpha=function(tn){return arguments.length?(tn=+tn,$e?tn>0?$e=tn:(De.c=null,De.t=NaN,De=null,Te.end({type:"end",alpha:$e=0})):tn>0&&(Te.start({type:"start",alpha:$e=tn}),De=mn(le.tick)),le):$e},le.start=function(){var tn,Zn=nn.length,ha=pn.length,Pa=Ue[0],pa=Ue[1],Na,xa;for(tn=0;tn<Zn;++tn)(xa=nn[tn]).index=tn,xa.weight=0;for(tn=0;tn<ha;++tn)xa=pn[tn],typeof xa.source=="number"&&(xa.source=nn[xa.source]),typeof xa.target=="number"&&(xa.target=nn[xa.target]),++xa.source.weight,++xa.target.weight;for(tn=0;tn<Zn;++tn)xa=nn[tn],isNaN(xa.x)&&(xa.x=$a("x",Pa)),isNaN(xa.y)&&(xa.y=$a("y",pa)),isNaN(xa.px)&&(xa.px=xa.x),isNaN(xa.py)&&(xa.py=xa.y);if(Ir=[],typeof gt=="function")for(tn=0;tn<ha;++tn)Ir[tn]=+gt.call(this,pn[tn],tn);else for(tn=0;tn<ha;++tn)Ir[tn]=gt;if(Wr=[],typeof Ft=="function")for(tn=0;tn<ha;++tn)Wr[tn]=+Ft.call(this,pn[tn],tn);else for(tn=0;tn<ha;++tn)Wr[tn]=Ft;if(qr=[],typeof qt=="function")for(tn=0;tn<Zn;++tn)qr[tn]=+qt.call(this,nn[tn],tn);else for(tn=0;tn<Zn;++tn)qr[tn]=qt;function $a(Va,ui){if(!Na){for(Na=new Array(Zn),Ji=0;Ji<Zn;++Ji)Na[Ji]=[];for(Ji=0;Ji<ha;++Ji){var Ci=pn[Ji];Na[Ci.source.index].push(Ci.target),Na[Ci.target.index].push(Ci.source)}}for(var Do=Na[tn],Ji=-1,_a=Do.length,di;++Ji<_a;)if(!isNaN(di=Do[Ji][Va]))return di;return Math.random()*ui}return le.resume()},le.resume=function(){return le.alpha(.1)},le.stop=function(){return le.alpha(0)},le.drag=function(){if(Be||(Be=x.behavior.drag().origin(D).on("dragstart.force",lu).on("drag.force",vn).on("dragend.force",As)),!arguments.length)return Be;this.on("mouseover.force",Fo).on("mouseout.force",kl).call(Be)};function vn(tn){tn.px=x.event.x,tn.py=x.event.y,le.resume()}return x.rebind(le,Te,"on")};function lu(le){le.fixed|=2}function As(le){le.fixed&=-7}function Fo(le){le.fixed|=4,le.px=le.x,le.py=le.y}function kl(le){le.fixed&=-5}function Ms(le,Te,De){var Ue=0,Be=0;if(le.charge=0,!le.leaf)for(var $e=le.nodes,wt=$e.length,gt=-1,Ft;++gt<wt;)Ft=$e[gt],Ft!=null&&(Ms(Ft,Te,De),le.charge+=Ft.charge,Ue+=Ft.charge*Ft.cx,Be+=Ft.charge*Ft.cy);if(le.point){le.leaf||(le.point.x+=Math.random()-.5,le.point.y+=Math.random()-.5);var qt=Te*De[le.point.index];le.charge+=le.pointCharge=qt,Ue+=qt*le.point.x,Be+=qt*le.point.y}le.cx=Ue/le.charge,le.cy=Be/le.charge}var Fs=20,go=1,Cl=1/0;x.layout.hierarchy=function(){var le=Zl,Te=vl,De=pl;function Ue(Be){var $e=[Be],wt=[],gt;for(Be.depth=0;(gt=$e.pop())!=null;)if(wt.push(gt),(qt=Te.call(Ue,gt,gt.depth))&&(Ft=qt.length)){for(var Ft,qt,ar;--Ft>=0;)$e.push(ar=qt[Ft]),ar.parent=gt,ar.depth=gt.depth+1;De&&(gt.value=0),gt.children=qt}else De&&(gt.value=+De.call(Ue,gt,gt.depth)||0),delete gt.children;return cs(Be,function(ir){var Cr,nn;le&&(Cr=ir.children)&&Cr.sort(le),De&&(nn=ir.parent)&&(nn.value+=ir.value)}),wt}return Ue.sort=function(Be){return arguments.length?(le=Be,Ue):le},Ue.children=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.value=function(Be){return arguments.length?(De=Be,Ue):De},Ue.revalue=function(Be){return De&&(el(Be,function($e){$e.children&&($e.value=0)}),cs(Be,function($e){var wt;$e.children||($e.value=+De.call(Ue,$e,$e.depth)||0),(wt=$e.parent)&&(wt.value+=$e.value)})),Be},Ue};function Ll(le,Te){return x.rebind(le,Te,"sort","children","value"),le.nodes=le,le.links=Pl,le}function el(le,Te){for(var De=[le];(le=De.pop())!=null;)if(Te(le),(Be=le.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)De.push(Be[Ue])}function cs(le,Te){for(var De=[le],Ue=[];(le=De.pop())!=null;)if(Ue.push(le),(wt=le.children)&&($e=wt.length))for(var Be=-1,$e,wt;++Be<$e;)De.push(wt[Be]);for(;(le=Ue.pop())!=null;)Te(le)}function vl(le){return le.children}function pl(le){return le.value}function Zl(le,Te){return Te.value-le.value}function Pl(le){return x.merge(le.map(function(Te){return(Te.children||[]).map(function(De){return{source:Te,target:De}})}))}x.layout.partition=function(){var le=x.layout.hierarchy(),Te=[1,1];function De($e,wt,gt,Ft){var qt=$e.children;if($e.x=wt,$e.y=$e.depth*Ft,$e.dx=gt,$e.dy=Ft,qt&&(ir=qt.length)){var ar=-1,ir,Cr,nn;for(gt=$e.value?gt/$e.value:0;++ar<ir;)De(Cr=qt[ar],wt,nn=Cr.value*gt,Ft),wt+=nn}}function Ue($e){var wt=$e.children,gt=0;if(wt&&(qt=wt.length))for(var Ft=-1,qt;++Ft<qt;)gt=Math.max(gt,Ue(wt[Ft]));return 1+gt}function Be($e,wt){var gt=le.call(this,$e,wt);return De(gt[0],0,Te[0],Te[1]/Ue(gt[0])),gt}return Be.size=function($e){return arguments.length?(Te=$e,Be):Te},Ll(Be,le)},x.layout.pie=function(){var le=Number,Te=tl,De=0,Ue=He,Be=0;function $e(wt){var gt=wt.length,Ft=wt.map(function(fn,vn){return+le.call($e,fn,vn)}),qt=+(typeof De=="function"?De.apply(this,arguments):De),ar=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-qt,ir=Math.min(Math.abs(ar)/gt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Cr=ir*(ar<0?-1:1),nn=x.sum(Ft),pn=nn?(ar-gt*Cr)/nn:0,Ir=x.range(gt),Wr=[],qr;return Te!=null&&Ir.sort(Te===tl?function(fn,vn){return Ft[vn]-Ft[fn]}:function(fn,vn){return Te(wt[fn],wt[vn])}),Ir.forEach(function(fn){Wr[fn]={data:wt[fn],value:qr=Ft[fn],startAngle:qt,endAngle:qt+=qr*pn+Cr,padAngle:ir}}),Wr}return $e.value=function(wt){return arguments.length?(le=wt,$e):le},$e.sort=function(wt){return arguments.length?(Te=wt,$e):Te},$e.startAngle=function(wt){return arguments.length?(De=wt,$e):De},$e.endAngle=function(wt){return arguments.length?(Ue=wt,$e):Ue},$e.padAngle=function(wt){return arguments.length?(Be=wt,$e):Be},$e};var tl={};x.layout.stack=function(){var le=D,Te=Dl,De=rl,Ue=Ws,Be=Gu,$e=hs;function wt(gt,Ft){if(!(pn=gt.length))return gt;var qt=gt.map(function(fn,vn){return le.call(wt,fn,vn)}),ar=qt.map(function(fn){return fn.map(function(vn,tn){return[Be.call(wt,vn,tn),$e.call(wt,vn,tn)]})}),ir=Te.call(wt,ar,Ft);qt=x.permute(qt,ir),ar=x.permute(ar,ir);var Cr=De.call(wt,ar,Ft),nn=qt[0].length,pn,Ir,Wr,qr;for(Wr=0;Wr<nn;++Wr)for(Ue.call(wt,qt[0][Wr],qr=Cr[Wr],ar[0][Wr][1]),Ir=1;Ir<pn;++Ir)Ue.call(wt,qt[Ir][Wr],qr+=ar[Ir-1][Wr][1],ar[Ir][Wr][1]);return gt}return wt.values=function(gt){return arguments.length?(le=gt,wt):le},wt.order=function(gt){return arguments.length?(Te=typeof gt=="function"?gt:uu.get(gt)||Dl,wt):Te},wt.offset=function(gt){return arguments.length?(De=typeof gt=="function"?gt:dl.get(gt)||rl,wt):De},wt.x=function(gt){return arguments.length?(Be=gt,wt):Be},wt.y=function(gt){return arguments.length?($e=gt,wt):$e},wt.out=function(gt){return arguments.length?(Ue=gt,wt):Ue},wt};function Gu(le){return le.x}function hs(le){return le.y}function Ws(le,Te,De){le.y0=Te,le.y=De}var uu=x.map({"inside-out":function(le){var Te=le.length,De,Ue,Be=le.map(Rl),$e=le.map(fu),wt=x.range(Te).sort(function(ir,Cr){return Be[ir]-Be[Cr]}),gt=0,Ft=0,qt=[],ar=[];for(De=0;De<Te;++De)Ue=wt[De],gt<Ft?(gt+=$e[Ue],qt.push(Ue)):(Ft+=$e[Ue],ar.push(Ue));return ar.reverse().concat(qt)},reverse:function(le){return x.range(le.length).reverse()},default:Dl}),dl=x.map({silhouette:function(le){var Te=le.length,De=le[0].length,Ue=[],Be=0,$e,wt,gt,Ft=[];for(wt=0;wt<De;++wt){for($e=0,gt=0;$e<Te;$e++)gt+=le[$e][wt][1];gt>Be&&(Be=gt),Ue.push(gt)}for(wt=0;wt<De;++wt)Ft[wt]=(Be-Ue[wt])/2;return Ft},wiggle:function(le){var Te=le.length,De=le[0],Ue=De.length,Be,$e,wt,gt,Ft,qt,ar,ir,Cr,nn=[];for(nn[0]=ir=Cr=0,$e=1;$e<Ue;++$e){for(Be=0,gt=0;Be<Te;++Be)gt+=le[Be][$e][1];for(Be=0,Ft=0,ar=De[$e][0]-De[$e-1][0];Be<Te;++Be){for(wt=0,qt=(le[Be][$e][1]-le[Be][$e-1][1])/(2*ar);wt<Be;++wt)qt+=(le[wt][$e][1]-le[wt][$e-1][1])/ar;Ft+=qt*le[Be][$e][1]}nn[$e]=ir-=gt?Ft/gt*ar:0,ir<Cr&&(Cr=ir)}for($e=0;$e<Ue;++$e)nn[$e]-=Cr;return nn},expand:function(le){var Te=le.length,De=le[0].length,Ue=1/Te,Be,$e,wt,gt=[];for($e=0;$e<De;++$e){for(Be=0,wt=0;Be<Te;Be++)wt+=le[Be][$e][1];if(wt)for(Be=0;Be<Te;Be++)le[Be][$e][1]/=wt;else for(Be=0;Be<Te;Be++)le[Be][$e][1]=Ue}for($e=0;$e<De;++$e)gt[$e]=0;return gt},zero:rl});function Dl(le){return x.range(le.length)}function rl(le){for(var Te=-1,De=le[0].length,Ue=[];++Te<De;)Ue[Te]=0;return Ue}function Rl(le){for(var Te=1,De=0,Ue=le[0][1],Be,$e=le.length;Te<$e;++Te)(Be=le[Te][1])>Ue&&(De=Te,Ue=Be);return De}function fu(le){return le.reduce(Eu,0)}function Eu(le,Te){return le+Te[1]}x.layout.histogram=function(){var le=!0,Te=Number,De=ml,Ue=lf;function Be($e,Cr){for(var gt=[],Ft=$e.map(Te,this),qt=De.call(this,Ft,Cr),ar=Ue.call(this,qt,Ft,Cr),ir,Cr=-1,nn=Ft.length,pn=ar.length-1,Ir=le?1:1/nn,Wr;++Cr<pn;)ir=gt[Cr]=[],ir.dx=ar[Cr+1]-(ir.x=ar[Cr]),ir.y=0;if(pn>0)for(Cr=-1;++Cr<nn;)Wr=Ft[Cr],Wr>=qt[0]&&Wr<=qt[1]&&(ir=gt[x.bisect(ar,Wr,1,pn)-1],ir.y+=Ir,ir.push($e[Cr]));return gt}return Be.value=function($e){return arguments.length?(Te=$e,Be):Te},Be.range=function($e){return arguments.length?(De=nt($e),Be):De},Be.bins=function($e){return arguments.length?(Ue=typeof $e=="number"?function(wt){return Bi(wt,$e)}:nt($e),Be):Ue},Be.frequency=function($e){return arguments.length?(le=!!$e,Be):le},Be};function lf(le,Te){return Bi(le,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Bi(le,Te){for(var De=-1,Ue=+le[0],Be=(le[1]-Ue)/Te,$e=[];++De<=Te;)$e[De]=Be*De+Ue;return $e}function ml(le){return[x.min(le),x.max(le)]}x.layout.pack=function(){var le=x.layout.hierarchy().sort(nl),Te=0,De=[1,1],Ue;function Be($e,wt){var gt=le.call(this,$e,wt),Ft=gt[0],qt=De[0],ar=De[1],ir=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(Ft.x=Ft.y=0,cs(Ft,function(nn){nn.r=+ir(nn.value)}),cs(Ft,uo),Te){var Cr=Te*(Ue?1:Math.max(2*Ft.r/qt,2*Ft.r/ar))/2;cs(Ft,function(nn){nn.r+=Cr}),cs(Ft,uo),cs(Ft,function(nn){nn.r-=Cr})}return Xs(Ft,qt/2,ar/2,Ue?1:1/Math.max(2*Ft.r/qt,2*Ft.r/ar)),gt}return Be.size=function($e){return arguments.length?(De=$e,Be):De},Be.radius=function($e){return arguments.length?(Ue=$e==null||typeof $e=="function"?$e:+$e,Be):Ue},Be.padding=function($e){return arguments.length?(Te=+$e,Be):Te},Ll(Be,le)};function nl(le,Te){return le.value-Te.value}function ts(le,Te){var De=le._pack_next;le._pack_next=Te,Te._pack_prev=le,Te._pack_next=De,De._pack_prev=Te}function vs(le,Te){le._pack_next=Te,Te._pack_prev=le}function Il(le,Te){var De=Te.x-le.x,Ue=Te.y-le.y,Be=le.r+Te.r;return .999*Be*Be>De*De+Ue*Ue}function uo(le){if(!(Te=le.children)||!(Cr=Te.length))return;var Te,De=1/0,Ue=-1/0,Be=1/0,$e=-1/0,wt,gt,Ft,qt,ar,ir,Cr;function nn(tn){De=Math.min(tn.x-tn.r,De),Ue=Math.max(tn.x+tn.r,Ue),Be=Math.min(tn.y-tn.r,Be),$e=Math.max(tn.y+tn.r,$e)}if(Te.forEach(Su),wt=Te[0],wt.x=-wt.r,wt.y=0,nn(wt),Cr>1&&(gt=Te[1],gt.x=gt.r,gt.y=0,nn(gt),Cr>2))for(Ft=Te[2],zs(wt,gt,Ft),nn(Ft),ts(wt,Ft),wt._pack_prev=Ft,ts(Ft,gt),gt=wt._pack_next,qt=3;qt<Cr;qt++){zs(wt,gt,Ft=Te[qt]);var pn=0,Ir=1,Wr=1;for(ar=gt._pack_next;ar!==gt;ar=ar._pack_next,Ir++)if(Il(ar,Ft)){pn=1;break}if(pn==1)for(ir=wt._pack_prev;ir!==ar._pack_prev&&!Il(ir,Ft);ir=ir._pack_prev,Wr++);pn?(Ir<Wr||Ir==Wr&&gt.r<wt.r?vs(wt,gt=ar):vs(wt=ir,gt),qt--):(ts(wt,Ft),gt=Ft,nn(Ft))}var qr=(De+Ue)/2,fn=(Be+$e)/2,vn=0;for(qt=0;qt<Cr;qt++)Ft=Te[qt],Ft.x-=qr,Ft.y-=fn,vn=Math.max(vn,Ft.r+Math.sqrt(Ft.x*Ft.x+Ft.y*Ft.y));le.r=vn,Te.forEach(Xo)}function Su(le){le._pack_next=le._pack_prev=le}function Xo(le){delete le._pack_next,delete le._pack_prev}function Xs(le,Te,De,Ue){var Be=le.children;if(le.x=Te+=Ue*le.x,le.y=De+=Ue*le.y,le.r*=Ue,Be)for(var $e=-1,wt=Be.length;++$e<wt;)Xs(Be[$e],Te,De,Ue)}function zs(le,Te,De){var Ue=le.r+De.r,Be=Te.x-le.x,$e=Te.y-le.y;if(Ue&&(Be||$e)){var wt=Te.r+De.r,gt=Be*Be+$e*$e;wt*=wt,Ue*=Ue;var Ft=.5+(Ue-wt)/(2*gt),qt=Math.sqrt(Math.max(0,2*wt*(Ue+gt)-(Ue-=gt)*Ue-wt*wt))/(2*gt);De.x=le.x+Ft*Be+qt*$e,De.y=le.y+Ft*$e-qt*Be}else De.x=le.x+Ue,De.y=le.y}x.layout.tree=function(){var le=x.layout.hierarchy().sort(null).value(null),Te=Es,De=[1,1],Ue=null;function Be(ar,ir){var Cr=le.call(this,ar,ir),nn=Cr[0],pn=$e(nn);if(cs(pn,wt),pn.parent.m=-pn.z,el(pn,gt),Ue)el(nn,qt);else{var Ir=nn,Wr=nn,qr=nn;el(nn,function(Zn){Zn.x<Ir.x&&(Ir=Zn),Zn.x>Wr.x&&(Wr=Zn),Zn.depth>qr.depth&&(qr=Zn)});var fn=Te(Ir,Wr)/2-Ir.x,vn=De[0]/(Wr.x+Te(Wr,Ir)/2+fn),tn=De[1]/(qr.depth||1);el(nn,function(Zn){Zn.x=(Zn.x+fn)*vn,Zn.y=Zn.depth*tn})}return Cr}function $e(ar){for(var ir={A:null,children:[ar]},Cr=[ir],nn;(nn=Cr.pop())!=null;)for(var pn=nn.children,Ir,Wr=0,qr=pn.length;Wr<qr;++Wr)Cr.push((pn[Wr]=Ir={_:pn[Wr],parent:nn,children:(Ir=pn[Wr].children)&&Ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wr}).a=Ir);return ir.children[0]}function wt(ar){var ir=ar.children,Cr=ar.parent.children,nn=ar.i?Cr[ar.i-1]:null;if(ir.length){ps(ar);var pn=(ir[0].z+ir[ir.length-1].z)/2;nn?(ar.z=nn.z+Te(ar._,nn._),ar.m=ar.z-pn):ar.z=pn}else nn&&(ar.z=nn.z+Te(ar._,nn._));ar.parent.A=Ft(ar,nn,ar.parent.A||Cr[0])}function gt(ar){ar._.x=ar.z+ar.parent.m,ar.m+=ar.parent.m}function Ft(ar,ir,Cr){if(ir){for(var nn=ar,pn=ar,Ir=ir,Wr=nn.parent.children[0],qr=nn.m,fn=pn.m,vn=Ir.m,tn=Wr.m,Zn;Ir=Zi(Ir),nn=Ho(nn),Ir&&nn;)Wr=Ho(Wr),pn=Zi(pn),pn.a=ar,Zn=Ir.z+vn-nn.z-qr+Te(Ir._,nn._),Zn>0&&(Bo(ku(Ir,ar,Cr),ar,Zn),qr+=Zn,fn+=Zn),vn+=Ir.m,qr+=nn.m,tn+=Wr.m,fn+=pn.m;Ir&&!Zi(pn)&&(pn.t=Ir,pn.m+=vn-fn),nn&&!Ho(Wr)&&(Wr.t=nn,Wr.m+=qr-tn,Cr=ar)}return Cr}function qt(ar){ar.x*=De[0],ar.y=ar.depth*De[1]}return Be.separation=function(ar){return arguments.length?(Te=ar,Be):Te},Be.size=function(ar){return arguments.length?(Ue=(De=ar)==null?qt:null,Be):Ue?null:De},Be.nodeSize=function(ar){return arguments.length?(Ue=(De=ar)==null?null:qt,Be):Ue?De:null},Ll(Be,le)};function Es(le,Te){return le.parent==Te.parent?1:2}function Ho(le){var Te=le.children;return Te.length?Te[0]:le.t}function Zi(le){var Te=le.children,De;return(De=Te.length)?Te[De-1]:le.t}function Bo(le,Te,De){var Ue=De/(Te.i-le.i);Te.c-=Ue,Te.s+=De,le.c+=Ue,Te.z+=De,Te.m+=De}function ps(le){for(var Te=0,De=0,Ue=le.children,Be=Ue.length,$e;--Be>=0;)$e=Ue[Be],$e.z+=Te,$e.m+=Te,Te+=$e.s+(De+=$e.c)}function ku(le,Te,De){return le.a.parent===Te.parent?le.a:De}x.layout.cluster=function(){var le=x.layout.hierarchy().sort(null).value(null),Te=Es,De=[1,1],Ue=!1;function Be($e,wt){var gt=le.call(this,$e,wt),Ft=gt[0],qt,ar=0;cs(Ft,function(Ir){var Wr=Ir.children;Wr&&Wr.length?(Ir.x=Cu(Wr),Ir.y=Kl(Wr)):(Ir.x=qt?ar+=Te(Ir,qt):0,Ir.y=0,qt=Ir)});var ir=bt(Ft),Cr=Ut(Ft),nn=ir.x-Te(ir,Cr)/2,pn=Cr.x+Te(Cr,ir)/2;return cs(Ft,Ue?function(Ir){Ir.x=(Ir.x-Ft.x)*De[0],Ir.y=(Ft.y-Ir.y)*De[1]}:function(Ir){Ir.x=(Ir.x-nn)/(pn-nn)*De[0],Ir.y=(1-(Ft.y?Ir.y/Ft.y:1))*De[1]}),gt}return Be.separation=function($e){return arguments.length?(Te=$e,Be):Te},Be.size=function($e){return arguments.length?(Ue=(De=$e)==null,Be):Ue?null:De},Be.nodeSize=function($e){return arguments.length?(Ue=(De=$e)!=null,Be):Ue?De:null},Ll(Be,le)};function Kl(le){return 1+x.max(le,function(Te){return Te.y})}function Cu(le){return le.reduce(function(Te,De){return Te+De.x},0)/le.length}function bt(le){var Te=le.children;return Te&&Te.length?bt(Te[0]):le}function Ut(le){var Te=le.children,De;return Te&&(De=Te.length)?Ut(Te[De-1]):le}x.layout.treemap=function(){var le=x.layout.hierarchy(),Te=Math.round,De=[1,1],Ue=null,Be=dr,$e=!1,wt,gt="squarify",Ft=.5*(1+Math.sqrt(5));function qt(Ir,Wr){for(var qr=-1,fn=Ir.length,vn,tn;++qr<fn;)tn=(vn=Ir[qr]).value*(Wr<0?0:Wr),vn.area=isNaN(tn)||tn<=0?0:tn}function ar(Ir){var Wr=Ir.children;if(Wr&&Wr.length){var qr=Be(Ir),fn=[],vn=Wr.slice(),tn,Zn=1/0,ha,Pa=gt==="slice"?qr.dx:gt==="dice"?qr.dy:gt==="slice-dice"?Ir.depth&1?qr.dy:qr.dx:Math.min(qr.dx,qr.dy),pa;for(qt(vn,qr.dx*qr.dy/Ir.value),fn.area=0;(pa=vn.length)>0;)fn.push(tn=vn[pa-1]),fn.area+=tn.area,gt!=="squarify"||(ha=Cr(fn,Pa))<=Zn?(vn.pop(),Zn=ha):(fn.area-=fn.pop().area,nn(fn,Pa,qr,!1),Pa=Math.min(qr.dx,qr.dy),fn.length=fn.area=0,Zn=1/0);fn.length&&(nn(fn,Pa,qr,!0),fn.length=fn.area=0),Wr.forEach(ar)}}function ir(Ir){var Wr=Ir.children;if(Wr&&Wr.length){var qr=Be(Ir),fn=Wr.slice(),vn,tn=[];for(qt(fn,qr.dx*qr.dy/Ir.value),tn.area=0;vn=fn.pop();)tn.push(vn),tn.area+=vn.area,vn.z!=null&&(nn(tn,vn.z?qr.dx:qr.dy,qr,!fn.length),tn.length=tn.area=0);Wr.forEach(ir)}}function Cr(Ir,Wr){for(var qr=Ir.area,fn,vn=0,tn=1/0,Zn=-1,ha=Ir.length;++Zn<ha;)!(fn=Ir[Zn].area)||(fn<tn&&(tn=fn),fn>vn&&(vn=fn));return qr*=qr,Wr*=Wr,qr?Math.max(Wr*vn*Ft/qr,qr/(Wr*tn*Ft)):1/0}function nn(Ir,Wr,qr,fn){var vn=-1,tn=Ir.length,Zn=qr.x,ha=qr.y,Pa=Wr?Te(Ir.area/Wr):0,pa;if(Wr==qr.dx){for((fn||Pa>qr.dy)&&(Pa=qr.dy);++vn<tn;)pa=Ir[vn],pa.x=Zn,pa.y=ha,pa.dy=Pa,Zn+=pa.dx=Math.min(qr.x+qr.dx-Zn,Pa?Te(pa.area/Pa):0);pa.z=!0,pa.dx+=qr.x+qr.dx-Zn,qr.y+=Pa,qr.dy-=Pa}else{for((fn||Pa>qr.dx)&&(Pa=qr.dx);++vn<tn;)pa=Ir[vn],pa.x=Zn,pa.y=ha,pa.dx=Pa,ha+=pa.dy=Math.min(qr.y+qr.dy-ha,Pa?Te(pa.area/Pa):0);pa.z=!1,pa.dy+=qr.y+qr.dy-ha,qr.x+=Pa,qr.dx-=Pa}}function pn(Ir){var Wr=wt||le(Ir),qr=Wr[0];return qr.x=qr.y=0,qr.value?(qr.dx=De[0],qr.dy=De[1]):qr.dx=qr.dy=0,wt&&le.revalue(qr),qt([qr],qr.dx*qr.dy/qr.value),(wt?ir:ar)(qr),$e&&(wt=Wr),Wr}return pn.size=function(Ir){return arguments.length?(De=Ir,pn):De},pn.padding=function(Ir){if(!arguments.length)return Ue;function Wr(vn){var tn=Ir.call(pn,vn,vn.depth);return tn==null?dr(vn):cr(vn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function qr(vn){return cr(vn,Ir)}var fn;return Be=(Ue=Ir)==null?dr:(fn=typeof Ir)=="function"?Wr:(fn==="number"&&(Ir=[Ir,Ir,Ir,Ir]),qr),pn},pn.round=function(Ir){return arguments.length?(Te=Ir?Math.round:Number,pn):Te!=Number},pn.sticky=function(Ir){return arguments.length?($e=Ir,wt=null,pn):$e},pn.ratio=function(Ir){return arguments.length?(Ft=Ir,pn):Ft},pn.mode=function(Ir){return arguments.length?(gt=Ir+"",pn):gt},Ll(pn,le)};function dr(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function cr(le,Te){var De=le.x+Te[3],Ue=le.y+Te[0],Be=le.dx-Te[1]-Te[3],$e=le.dy-Te[0]-Te[2];return Be<0&&(De+=Be/2,Be=0),$e<0&&(Ue+=$e/2,$e=0),{x:De,y:Ue,dx:Be,dy:$e}}x.random={normal:function(le,Te){var De=arguments.length;return De<2&&(Te=1),De<1&&(le=0),function(){var Ue,Be,$e;do Ue=Math.random()*2-1,Be=Math.random()*2-1,$e=Ue*Ue+Be*Be;while(!$e||$e>1);return le+Te*Ue*Math.sqrt(-2*Math.log($e)/$e)}},logNormal:function(){var le=x.random.normal.apply(x,arguments);return function(){return Math.exp(le())}},bates:function(le){var Te=x.random.irwinHall(le);return function(){return Te()/le}},irwinHall:function(le){return function(){for(var Te=0,De=0;De<le;De++)Te+=Math.random();return Te}}},x.scale={};function zr(le){var Te=le[0],De=le[le.length-1];return Te<De?[Te,De]:[De,Te]}function ln(le){return le.rangeExtent?le.rangeExtent():zr(le.range())}function _n(le,Te,De,Ue){var Be=De(le[0],le[1]),$e=Ue(Te[0],Te[1]);return function(wt){return $e(Be(wt))}}function Pn(le,Te){var De=0,Ue=le.length-1,Be=le[De],$e=le[Ue],wt;return $e<Be&&(wt=De,De=Ue,Ue=wt,wt=Be,Be=$e,$e=wt),le[De]=Te.floor(Be),le[Ue]=Te.ceil($e),le}function zn(le){return le?{floor:function(Te){return Math.floor(Te/le)*le},ceil:function(Te){return Math.ceil(Te/le)*le}}:Xn}var Xn={floor:D,ceil:D};function wn(le,Te,De,Ue){var Be=[],$e=[],wt=0,gt=Math.min(le.length,Te.length)-1;for(le[gt]<le[0]&&(le=le.slice().reverse(),Te=Te.slice().reverse());++wt<=gt;)Be.push(De(le[wt-1],le[wt])),$e.push(Ue(Te[wt-1],Te[wt]));return function(Ft){var qt=x.bisect(le,Ft,1,gt)-1;return $e[qt](Be[qt](Ft))}}x.scale.linear=function(){return Un([0,1],[0,1],po,!1)};function Un(le,Te,De,Ue){var Be,$e;function wt(){var Ft=Math.min(le.length,Te.length)>2?wn:_n,qt=Ue?Mu:Qs;return Be=Ft(le,Te,qt,De),$e=Ft(Te,le,qt,po),gt}function gt(Ft){return Be(Ft)}return gt.invert=function(Ft){return $e(Ft)},gt.domain=function(Ft){return arguments.length?(le=Ft.map(Number),wt()):le},gt.range=function(Ft){return arguments.length?(Te=Ft,wt()):Te},gt.rangeRound=function(Ft){return gt.range(Ft).interpolate(_u)},gt.clamp=function(Ft){return arguments.length?(Ue=Ft,wt()):Ue},gt.interpolate=function(Ft){return arguments.length?(De=Ft,wt()):De},gt.ticks=function(Ft){return Ga(le,Ft)},gt.tickFormat=function(Ft,qt){return d3_scale_linearTickFormat(le,Ft,qt)},gt.nice=function(Ft){return jn(le,Ft),wt()},gt.copy=function(){return Un(le,Te,De,Ue)},wt()}function On(le,Te){return x.rebind(le,Te,"range","rangeRound","interpolate","clamp")}function jn(le,Te){return Pn(le,zn(ia(le,Te)[2])),Pn(le,zn(ia(le,Te)[2])),le}function ia(le,Te){Te==null&&(Te=10);var De=zr(le),Ue=De[1]-De[0],Be=Math.pow(10,Math.floor(Math.log(Ue/Te)/Math.LN10)),$e=Te/Ue*Be;return $e<=.15?Be*=10:$e<=.35?Be*=5:$e<=.75&&(Be*=2),De[0]=Math.ceil(De[0]/Be)*Be,De[1]=Math.floor(De[1]/Be)*Be+Be*.5,De[2]=Be,De}function Ga(le,Te){return x.range.apply(x,ia(le,Te))}x.scale.log=function(){return za(x.scale.linear().domain([0,1]),10,!0,[1,10])};function za(le,Te,De,Ue){function Be(gt){return(De?Math.log(gt<0?0:gt):-Math.log(gt>0?0:-gt))/Math.log(Te)}function $e(gt){return De?Math.pow(Te,gt):-Math.pow(Te,-gt)}function wt(gt){return le(Be(gt))}return wt.invert=function(gt){return $e(le.invert(gt))},wt.domain=function(gt){return arguments.length?(De=gt[0]>=0,le.domain((Ue=gt.map(Number)).map(Be)),wt):Ue},wt.base=function(gt){return arguments.length?(Te=+gt,le.domain(Ue.map(Be)),wt):Te},wt.nice=function(){var gt=Pn(Ue.map(Be),De?Math:Ya);return le.domain(gt),Ue=gt.map($e),wt},wt.ticks=function(){var gt=zr(Ue),Ft=[],qt=gt[0],ar=gt[1],ir=Math.floor(Be(qt)),Cr=Math.ceil(Be(ar)),nn=Te%1?2:Te;if(isFinite(Cr-ir)){if(De){for(;ir<Cr;ir++)for(var pn=1;pn<nn;pn++)Ft.push($e(ir)*pn);Ft.push($e(ir))}else for(Ft.push($e(ir));ir++<Cr;)for(var pn=nn-1;pn>0;pn--)Ft.push($e(ir)*pn);for(ir=0;Ft[ir]<qt;ir++);for(Cr=Ft.length;Ft[Cr-1]>ar;Cr--);Ft=Ft.slice(ir,Cr)}return Ft},wt.copy=function(){return za(le.copy(),Te,De,Ue)},On(wt,le)}var Ya={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};x.scale.pow=function(){return ja(x.scale.linear(),1,[0,1])};function ja(le,Te,De){var Ue=aa(Te),Be=aa(1/Te);function $e(wt){return le(Ue(wt))}return $e.invert=function(wt){return Be(le.invert(wt))},$e.domain=function(wt){return arguments.length?(le.domain((De=wt.map(Number)).map(Ue)),$e):De},$e.ticks=function(wt){return Ga(De,wt)},$e.tickFormat=function(wt,gt){return d3_scale_linearTickFormat(De,wt,gt)},$e.nice=function(wt){return $e.domain(jn(De,wt))},$e.exponent=function(wt){return arguments.length?(Ue=aa(Te=wt),Be=aa(1/Te),le.domain(De.map(Ue)),$e):Te},$e.copy=function(){return ja(le.copy(),Te,De)},On($e,le)}function aa(le){return function(Te){return Te<0?-Math.pow(-Te,le):Math.pow(Te,le)}}x.scale.sqrt=function(){return x.scale.pow().exponent(.5)},x.scale.ordinal=function(){return ba([],{t:"range",a:[[]]})};function ba(le,Te){var De,Ue,Be;function $e(gt){return Ue[((De.get(gt)||(Te.t==="range"?De.set(gt,le.push(gt)):NaN))-1)%Ue.length]}function wt(gt,Ft){return x.range(le.length).map(function(qt){return gt+Ft*qt})}return $e.domain=function(gt){if(!arguments.length)return le;le=[],De=new A;for(var Ft=-1,qt=gt.length,ar;++Ft<qt;)De.has(ar=gt[Ft])||De.set(ar,le.push(ar));return $e[Te.t].apply($e,Te.a)},$e.range=function(gt){return arguments.length?(Ue=gt,Be=0,Te={t:"range",a:arguments},$e):Ue},$e.rangePoints=function(gt,Ft){arguments.length<2&&(Ft=0);var qt=gt[0],ar=gt[1],ir=le.length<2?(qt=(qt+ar)/2,0):(ar-qt)/(le.length-1+Ft);return Ue=wt(qt+ir*Ft/2,ir),Be=0,Te={t:"rangePoints",a:arguments},$e},$e.rangeRoundPoints=function(gt,Ft){arguments.length<2&&(Ft=0);var qt=gt[0],ar=gt[1],ir=le.length<2?(qt=ar=Math.round((qt+ar)/2),0):(ar-qt)/(le.length-1+Ft)|0;return Ue=wt(qt+Math.round(ir*Ft/2+(ar-qt-(le.length-1+Ft)*ir)/2),ir),Be=0,Te={t:"rangeRoundPoints",a:arguments},$e},$e.rangeBands=function(gt,Ft,qt){arguments.length<2&&(Ft=0),arguments.length<3&&(qt=Ft);var ar=gt[1]<gt[0],ir=gt[ar-0],Cr=gt[1-ar],nn=(Cr-ir)/(le.length-Ft+2*qt);return Ue=wt(ir+nn*qt,nn),ar&&Ue.reverse(),Be=nn*(1-Ft),Te={t:"rangeBands",a:arguments},$e},$e.rangeRoundBands=function(gt,Ft,qt){arguments.length<2&&(Ft=0),arguments.length<3&&(qt=Ft);var ar=gt[1]<gt[0],ir=gt[ar-0],Cr=gt[1-ar],nn=Math.floor((Cr-ir)/(le.length-Ft+2*qt));return Ue=wt(ir+Math.round((Cr-ir-(le.length-Ft)*nn)/2),nn),ar&&Ue.reverse(),Be=Math.round(nn*(1-Ft)),Te={t:"rangeRoundBands",a:arguments},$e},$e.rangeBand=function(){return Be},$e.rangeExtent=function(){return zr(Te.a[0])},$e.copy=function(){return ba(le,Te)},$e.domain(le)}x.scale.category10=function(){return x.scale.ordinal().range(Qa)},x.scale.category20=function(){return x.scale.ordinal().range(si)},x.scale.category20b=function(){return x.scale.ordinal().range(Mi)},x.scale.category20c=function(){return x.scale.ordinal().range(Ei)};var Qa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Pr),si=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Pr),Mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Pr),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Pr);x.scale.quantile=function(){return wi([],[])};function wi(le,Te){var De;function Ue(){var $e=0,wt=Te.length;for(De=[];++$e<wt;)De[$e-1]=x.quantile(le,$e/wt);return Be}function Be($e){if(!isNaN($e=+$e))return Te[x.bisect(De,$e)]}return Be.domain=function($e){return arguments.length?(le=$e.map(b).filter(g).sort(o),Ue()):le},Be.range=function($e){return arguments.length?(Te=$e,Ue()):Te},Be.quantiles=function(){return De},Be.invertExtent=function($e){return $e=Te.indexOf($e),$e<0?[NaN,NaN]:[$e>0?De[$e-1]:le[0],$e<De.length?De[$e]:le[le.length-1]]},Be.copy=function(){return wi(le,Te)},Ue()}x.scale.quantize=function(){return Li(0,1,[0,1])};function Li(le,Te,De){var Ue,Be;function $e(gt){return De[Math.max(0,Math.min(Be,Math.floor(Ue*(gt-le))))]}function wt(){return Ue=De.length/(Te-le),Be=De.length-1,$e}return $e.domain=function(gt){return arguments.length?(le=+gt[0],Te=+gt[gt.length-1],wt()):[le,Te]},$e.range=function(gt){return arguments.length?(De=gt,wt()):De},$e.invertExtent=function(gt){return gt=De.indexOf(gt),gt=gt<0?NaN:gt/Ue+le,[gt,gt+1/Ue]},$e.copy=function(){return Li(le,Te,De)},wt()}x.scale.threshold=function(){return hi([.5],[0,1])};function hi(le,Te){function De(Ue){if(Ue<=Ue)return Te[x.bisect(le,Ue)]}return De.domain=function(Ue){return arguments.length?(le=Ue,De):le},De.range=function(Ue){return arguments.length?(Te=Ue,De):Te},De.invertExtent=function(Ue){return Ue=Te.indexOf(Ue),[le[Ue-1],le[Ue]]},De.copy=function(){return hi(le,Te)},De}x.scale.identity=function(){return Co([0,1])};function Co(le){function Te(De){return+De}return Te.invert=Te,Te.domain=Te.range=function(De){return arguments.length?(le=De.map(Te),Te):le},Te.ticks=function(De){return Ga(le,De)},Te.tickFormat=function(De,Ue){return d3_scale_linearTickFormat(le,De,Ue)},Te.copy=function(){return Co(le)},Te}x.svg={};function ao(){return 0}x.svg.arc=function(){var le=Aa,Te=Si,De=ao,Ue=li,Be=_o,$e=Eo,wt=ds;function gt(){var qt=Math.max(0,+le.apply(this,arguments)),ar=Math.max(0,+Te.apply(this,arguments)),ir=Be.apply(this,arguments)-et,Cr=$e.apply(this,arguments)-et,nn=Math.abs(Cr-ir),pn=ir>Cr?0:1;if(ar<qt&&(Ir=ar,ar=qt,qt=Ir),nn>=Ke)return Ft(ar,pn)+(qt?Ft(qt,1-pn):"")+"Z";var Ir,Wr,qr,fn,vn=0,tn=0,Zn,ha,Pa,pa,Na,xa,$a,Va,ui=[];if((fn=(+wt.apply(this,arguments)||0)/2)&&(qr=Ue===li?Math.sqrt(qt*qt+ar*ar):+Ue.apply(this,arguments),pn||(tn*=-1),ar&&(tn=Gt(qr/ar*Math.sin(fn))),qt&&(vn=Gt(qr/qt*Math.sin(fn)))),ar){Zn=ar*Math.cos(ir+tn),ha=ar*Math.sin(ir+tn),Pa=ar*Math.cos(Cr-tn),pa=ar*Math.sin(Cr-tn);var Ci=Math.abs(Cr-ir-2*tn)<=Ee?0:1;if(tn&&Os(Zn,ha,Pa,pa)===pn^Ci){var Do=(ir+Cr)/2;Zn=ar*Math.cos(Do),ha=ar*Math.sin(Do),Pa=pa=null}}else Zn=ha=0;if(qt){Na=qt*Math.cos(Cr-vn),xa=qt*Math.sin(Cr-vn),$a=qt*Math.cos(ir+vn),Va=qt*Math.sin(ir+vn);var Ji=Math.abs(ir-Cr+2*vn)<=Ee?0:1;if(vn&&Os(Na,xa,$a,Va)===1-pn^Ji){var _a=(ir+Cr)/2;Na=qt*Math.cos(_a),xa=qt*Math.sin(_a),$a=Va=null}}else Na=xa=0;if(nn>at&&(Ir=Math.min(Math.abs(ar-qt)/2,+De.apply(this,arguments)))>.001){Wr=qt<ar^pn?0:1;var di=Ir,ii=Ir;if(nn<Ee){var Ui=$a==null?[Na,xa]:Pa==null?[Zn,ha]:ei([Zn,ha],[$a,Va],[Pa,pa],[Na,xa]),yi=Zn-Ui[0],So=ha-Ui[1],mo=Pa-Ui[0],Oo=pa-Ui[1],ms=1/Math.sin(Math.acos((yi*mo+So*Oo)/(Math.sqrt(yi*yi+So*So)*Math.sqrt(mo*mo+Oo*Oo)))/2),ns=Math.sqrt(Ui[0]*Ui[0]+Ui[1]*Ui[1]);ii=Math.min(Ir,(qt-ns)/(ms-1)),di=Math.min(Ir,(ar-ns)/(ms+1))}if(Pa!=null){var ys=Lo($a==null?[Na,xa]:[$a,Va],[Zn,ha],ar,di,pn),io=Lo([Pa,pa],[Na,xa],ar,di,pn);Ir===di?ui.push("M",ys[0],"A",di,",",di," 0 0,",Wr," ",ys[1],"A",ar,",",ar," 0 ",1-pn^Os(ys[1][0],ys[1][1],io[1][0],io[1][1]),",",pn," ",io[1],"A",di,",",di," 0 0,",Wr," ",io[0]):ui.push("M",ys[0],"A",di,",",di," 0 1,",Wr," ",io[0])}else ui.push("M",Zn,",",ha);if($a!=null){var eo=Lo([Zn,ha],[$a,Va],qt,-ii,pn),Za=Lo([Na,xa],Pa==null?[Zn,ha]:[Pa,pa],qt,-ii,pn);Ir===ii?ui.push("L",Za[0],"A",ii,",",ii," 0 0,",Wr," ",Za[1],"A",qt,",",qt," 0 ",pn^Os(Za[1][0],Za[1][1],eo[1][0],eo[1][1]),",",1-pn," ",eo[1],"A",ii,",",ii," 0 0,",Wr," ",eo[0]):ui.push("L",Za[0],"A",ii,",",ii," 0 0,",Wr," ",eo[0])}else ui.push("L",Na,",",xa)}else ui.push("M",Zn,",",ha),Pa!=null&&ui.push("A",ar,",",ar," 0 ",Ci,",",pn," ",Pa,",",pa),ui.push("L",Na,",",xa),$a!=null&&ui.push("A",qt,",",qt," 0 ",Ji,",",1-pn," ",$a,",",Va);return ui.push("Z"),ui.join("")}function Ft(qt,ar){return"M0,"+qt+"A"+qt+","+qt+" 0 1,"+ar+" 0,"+-qt+"A"+qt+","+qt+" 0 1,"+ar+" 0,"+qt}return gt.innerRadius=function(qt){return arguments.length?(le=nt(qt),gt):le},gt.outerRadius=function(qt){return arguments.length?(Te=nt(qt),gt):Te},gt.cornerRadius=function(qt){return arguments.length?(De=nt(qt),gt):De},gt.padRadius=function(qt){return arguments.length?(Ue=qt==li?li:nt(qt),gt):Ue},gt.startAngle=function(qt){return arguments.length?(Be=nt(qt),gt):Be},gt.endAngle=function(qt){return arguments.length?($e=nt(qt),gt):$e},gt.padAngle=function(qt){return arguments.length?(wt=nt(qt),gt):wt},gt.centroid=function(){var qt=(+le.apply(this,arguments)+ +Te.apply(this,arguments))/2,ar=(+Be.apply(this,arguments)+ +$e.apply(this,arguments))/2-et;return[Math.cos(ar)*qt,Math.sin(ar)*qt]},gt};var li="auto";function Aa(le){return le.innerRadius}function Si(le){return le.outerRadius}function _o(le){return le.startAngle}function Eo(le){return le.endAngle}function ds(le){return le&&le.padAngle}function Os(le,Te,De,Ue){return(le-De)*Te-(Te-Ue)*le>0?0:1}function Lo(le,Te,De,Ue,Be){var $e=le[0]-Te[0],wt=le[1]-Te[1],gt=(Be?Ue:-Ue)/Math.sqrt($e*$e+wt*wt),Ft=gt*wt,qt=-gt*$e,ar=le[0]+Ft,ir=le[1]+qt,Cr=Te[0]+Ft,nn=Te[1]+qt,pn=(ar+Cr)/2,Ir=(ir+nn)/2,Wr=Cr-ar,qr=nn-ir,fn=Wr*Wr+qr*qr,vn=De-Ue,tn=ar*nn-Cr*ir,Zn=(qr<0?-1:1)*Math.sqrt(Math.max(0,vn*vn*fn-tn*tn)),ha=(tn*qr-Wr*Zn)/fn,Pa=(-tn*Wr-qr*Zn)/fn,pa=(tn*qr+Wr*Zn)/fn,Na=(-tn*Wr+qr*Zn)/fn,xa=ha-pn,$a=Pa-Ir,Va=pa-pn,ui=Na-Ir;return xa*xa+$a*$a>Va*Va+ui*ui&&(ha=pa,Pa=Na),[[ha-Ft,Pa-qt],[ha*De/vn,Pa*De/vn]]}function al(){return!0}function Ns(le){var Te=Kn,De=ma,Ue=al,Be=Po,$e=Be.key,wt=.7;function gt(Ft){var qt=[],ar=[],ir=-1,Cr=Ft.length,nn,pn=nt(Te),Ir=nt(De);function Wr(){qt.push("M",Be(le(ar),wt))}for(;++ir<Cr;)Ue.call(this,nn=Ft[ir],ir)?ar.push([+pn.call(this,nn,ir),+Ir.call(this,nn,ir)]):ar.length&&(Wr(),ar=[]);return ar.length&&Wr(),qt.length?qt.join(""):null}return gt.x=function(Ft){return arguments.length?(Te=Ft,gt):Te},gt.y=function(Ft){return arguments.length?(De=Ft,gt):De},gt.defined=function(Ft){return arguments.length?(Ue=Ft,gt):Ue},gt.interpolate=function(Ft){return arguments.length?(typeof Ft=="function"?$e=Be=Ft:$e=(Be=zo.get(Ft)||Po).key,gt):$e},gt.tension=function(Ft){return arguments.length?(wt=Ft,gt):wt},gt}x.svg.line=function(){return Ns(D)};var zo=x.map({linear:Po,"linear-closed":Jl,step:cu,"step-before":gs,"step-after":Lu,basis:Ss,"basis-open":yl,"basis-closed":Pu,bundle:vu,cardinal:Yu,"cardinal-open":$l,"cardinal-closed":Of,monotone:je});zo.forEach(function(le,Te){Te.key=le,Te.closed=/-closed$/.test(le)});function Po(le){return le.length>1?le.join("L"):le+"Z"}function Jl(le){return le.join("L")+"Z"}function cu(le){for(var Te=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++Te<De;)Be.push("H",(Ue[0]+(Ue=le[Te])[0])/2,"V",Ue[1]);return De>1&&Be.push("H",Ue[0]),Be.join("")}function gs(le){for(var Te=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++Te<De;)Be.push("V",(Ue=le[Te])[1],"H",Ue[0]);return Be.join("")}function Lu(le){for(var Te=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++Te<De;)Be.push("H",(Ue=le[Te])[0],"V",Ue[1]);return Be.join("")}function $l(le,Te){return le.length<4?Po(le):le[1]+hu(le.slice(1,-1),Wu(le,Te))}function Of(le,Te){return le.length<3?Jl(le):le[0]+hu((le.push(le[0]),le),Wu([le[le.length-2]].concat(le,[le[1]]),Te))}function Yu(le,Te){return le.length<3?Po(le):le[0]+hu(le,Wu(le,Te))}function hu(le,Te){if(Te.length<1||le.length!=Te.length&&le.length!=Te.length+2)return Po(le);var De=le.length!=Te.length,Ue="",Be=le[0],$e=le[1],wt=Te[0],gt=wt,Ft=1;if(De&&(Ue+="Q"+($e[0]-wt[0]*2/3)+","+($e[1]-wt[1]*2/3)+","+$e[0]+","+$e[1],Be=le[1],Ft=2),Te.length>1){gt=Te[1],$e=le[Ft],Ft++,Ue+="C"+(Be[0]+wt[0])+","+(Be[1]+wt[1])+","+($e[0]-gt[0])+","+($e[1]-gt[1])+","+$e[0]+","+$e[1];for(var qt=2;qt<Te.length;qt++,Ft++)$e=le[Ft],gt=Te[qt],Ue+="S"+($e[0]-gt[0])+","+($e[1]-gt[1])+","+$e[0]+","+$e[1]}if(De){var ar=le[Ft];Ue+="Q"+($e[0]+gt[0]*2/3)+","+($e[1]+gt[1]*2/3)+","+ar[0]+","+ar[1]}return Ue}function Wu(le,Te){for(var De=[],Ue=(1-Te)/2,Be,$e=le[0],wt=le[1],gt=1,Ft=le.length;++gt<Ft;)Be=$e,$e=wt,wt=le[gt],De.push([Ue*(wt[0]-Be[0]),Ue*(wt[1]-Be[1])]);return De}function Ss(le){if(le.length<3)return Po(le);var Te=1,De=le.length,Ue=le[0],Be=Ue[0],$e=Ue[1],wt=[Be,Be,Be,(Ue=le[1])[0]],gt=[$e,$e,$e,Ue[1]],Ft=[Be,",",$e,"L",jo(rs,wt),",",jo(rs,gt)];for(le.push(le[De-1]);++Te<=De;)Ue=le[Te],wt.shift(),wt.push(Ue[0]),gt.shift(),gt.push(Ue[1]),Du(Ft,wt,gt);return le.pop(),Ft.push("L",Ue),Ft.join("")}function yl(le){if(le.length<4)return Po(le);for(var Te=[],De=-1,Ue=le.length,Be,$e=[0],wt=[0];++De<3;)Be=le[De],$e.push(Be[0]),wt.push(Be[1]);for(Te.push(jo(rs,$e)+","+jo(rs,wt)),--De;++De<Ue;)Be=le[De],$e.shift(),$e.push(Be[0]),wt.shift(),wt.push(Be[1]),Du(Te,$e,wt);return Te.join("")}function Pu(le){for(var Te,De=-1,Ue=le.length,Be=Ue+4,$e,wt=[],gt=[];++De<4;)$e=le[De%Ue],wt.push($e[0]),gt.push($e[1]);for(Te=[jo(rs,wt),",",jo(rs,gt)],--De;++De<Be;)$e=le[De%Ue],wt.shift(),wt.push($e[0]),gt.shift(),gt.push($e[1]),Du(Te,wt,gt);return Te.join("")}function vu(le,Te){var De=le.length-1;if(De)for(var Ue=le[0][0],Be=le[0][1],$e=le[De][0]-Ue,wt=le[De][1]-Be,gt=-1,Ft,qt;++gt<=De;)Ft=le[gt],qt=gt/De,Ft[0]=Te*Ft[0]+(1-Te)*(Ue+qt*$e),Ft[1]=Te*Ft[1]+(1-Te)*(Be+qt*wt);return Ss(le)}function jo(le,Te){return le[0]*Te[0]+le[1]*Te[1]+le[2]*Te[2]+le[3]*Te[3]}var Xu=[0,2/3,1/3,0],wf=[0,1/3,2/3,0],rs=[0,1/6,2/3,1/6];function Du(le,Te,De){le.push("C",jo(Xu,Te),",",jo(Xu,De),",",jo(wf,Te),",",jo(wf,De),",",jo(rs,Te),",",jo(rs,De))}function Ru(le,Te){return(Te[1]-le[1])/(Te[0]-le[0])}function ju(le){for(var Te=0,De=le.length-1,Ue=[],Be=le[0],$e=le[1],wt=Ue[0]=Ru(Be,$e);++Te<De;)Ue[Te]=(wt+(wt=Ru(Be=$e,$e=le[Te+1])))/2;return Ue[Te]=wt,Ue}function Oe(le){for(var Te=[],De,Ue,Be,$e,wt=ju(le),gt=-1,Ft=le.length-1;++gt<Ft;)De=Ru(le[gt],le[gt+1]),l(De)<at?wt[gt]=wt[gt+1]=0:(Ue=wt[gt]/De,Be=wt[gt+1]/De,$e=Ue*Ue+Be*Be,$e>9&&($e=De*3/Math.sqrt($e),wt[gt]=$e*Ue,wt[gt+1]=$e*Be));for(gt=-1;++gt<=Ft;)$e=(le[Math.min(Ft,gt+1)][0]-le[Math.max(0,gt-1)][0])/(6*(1+wt[gt]*wt[gt])),Te.push([$e||0,wt[gt]*$e||0]);return Te}function je(le){return le.length<3?Po(le):le[0]+hu(le,Oe(le))}x.svg.line.radial=function(){var le=Ns(rt);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le};function rt(le){for(var Te,De=-1,Ue=le.length,Be,$e;++De<Ue;)Te=le[De],Be=Te[0],$e=Te[1]-et,Te[0]=Be*Math.cos($e),Te[1]=Be*Math.sin($e);return le}function lt(le){var Te=Kn,De=Kn,Ue=0,Be=ma,$e=al,wt=Po,gt=wt.key,Ft=wt,qt="L",ar=.7;function ir(Cr){var nn=[],pn=[],Ir=[],Wr=-1,qr=Cr.length,fn,vn=nt(Te),tn=nt(Ue),Zn=Te===De?function(){return Pa}:nt(De),ha=Ue===Be?function(){return pa}:nt(Be),Pa,pa;function Na(){nn.push("M",wt(le(Ir),ar),qt,Ft(le(pn.reverse()),ar),"Z")}for(;++Wr<qr;)$e.call(this,fn=Cr[Wr],Wr)?(pn.push([Pa=+vn.call(this,fn,Wr),pa=+tn.call(this,fn,Wr)]),Ir.push([+Zn.call(this,fn,Wr),+ha.call(this,fn,Wr)])):pn.length&&(Na(),pn=[],Ir=[]);return pn.length&&Na(),nn.length?nn.join(""):null}return ir.x=function(Cr){return arguments.length?(Te=De=Cr,ir):De},ir.x0=function(Cr){return arguments.length?(Te=Cr,ir):Te},ir.x1=function(Cr){return arguments.length?(De=Cr,ir):De},ir.y=function(Cr){return arguments.length?(Ue=Be=Cr,ir):Be},ir.y0=function(Cr){return arguments.length?(Ue=Cr,ir):Ue},ir.y1=function(Cr){return arguments.length?(Be=Cr,ir):Be},ir.defined=function(Cr){return arguments.length?($e=Cr,ir):$e},ir.interpolate=function(Cr){return arguments.length?(typeof Cr=="function"?gt=wt=Cr:gt=(wt=zo.get(Cr)||Po).key,Ft=wt.reverse||wt,qt=wt.closed?"M":"L",ir):gt},ir.tension=function(Cr){return arguments.length?(ar=Cr,ir):ar},ir}gs.reverse=Lu,Lu.reverse=gs,x.svg.area=function(){return lt(D)},x.svg.area.radial=function(){var le=lt(rt);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le};function Tt(le){return le.source}function _t(le){return le.target}x.svg.chord=function(){var le=Tt,Te=_t,De=kt,Ue=_o,Be=Eo;function $e(ar,ir){var Cr=wt(this,le,ar,ir),nn=wt(this,Te,ar,ir);return"M"+Cr.p0+Ft(Cr.r,Cr.p1,Cr.a1-Cr.a0)+(gt(Cr,nn)?qt(Cr.r,Cr.p1,Cr.r,Cr.p0):qt(Cr.r,Cr.p1,nn.r,nn.p0)+Ft(nn.r,nn.p1,nn.a1-nn.a0)+qt(nn.r,nn.p1,Cr.r,Cr.p0))+"Z"}function wt(ar,ir,Cr,nn){var pn=ir.call(ar,Cr,nn),Ir=De.call(ar,pn,nn),Wr=Ue.call(ar,pn,nn)-et,qr=Be.call(ar,pn,nn)-et;return{r:Ir,a0:Wr,a1:qr,p0:[Ir*Math.cos(Wr),Ir*Math.sin(Wr)],p1:[Ir*Math.cos(qr),Ir*Math.sin(qr)]}}function gt(ar,ir){return ar.a0==ir.a0&&ar.a1==ir.a1}function Ft(ar,ir,Cr){return"A"+ar+","+ar+" 0 "+ +(Cr>Ee)+",1 "+ir}function qt(ar,ir,Cr,nn){return"Q 0,0 "+nn}return $e.radius=function(ar){return arguments.length?(De=nt(ar),$e):De},$e.source=function(ar){return arguments.length?(le=nt(ar),$e):le},$e.target=function(ar){return arguments.length?(Te=nt(ar),$e):Te},$e.startAngle=function(ar){return arguments.length?(Ue=nt(ar),$e):Ue},$e.endAngle=function(ar){return arguments.length?(Be=nt(ar),$e):Be},$e};function kt(le){return le.radius}x.svg.diagonal=function(){var le=Tt,Te=_t,De=vr;function Ue(Be,$e){var wt=le.call(this,Be,$e),gt=Te.call(this,Be,$e),Ft=(wt.y+gt.y)/2,qt=[wt,{x:wt.x,y:Ft},{x:gt.x,y:Ft},gt];return qt=qt.map(De),"M"+qt[0]+"C"+qt[1]+" "+qt[2]+" "+qt[3]}return Ue.source=function(Be){return arguments.length?(le=nt(Be),Ue):le},Ue.target=function(Be){return arguments.length?(Te=nt(Be),Ue):Te},Ue.projection=function(Be){return arguments.length?(De=Be,Ue):De},Ue};function vr(le){return[le.x,le.y]}x.svg.diagonal.radial=function(){var le=x.svg.diagonal(),Te=vr,De=le.projection;return le.projection=function(Ue){return arguments.length?De(mr(Te=Ue)):Te},le};function mr(le){return function(){var Te=le.apply(this,arguments),De=Te[0],Ue=Te[1]-et;return[De*Math.cos(Ue),De*Math.sin(Ue)]}}x.svg.symbol=function(){var le=Tr,Te=hr;function De(Ue,Be){return(Qr.get(le.call(this,Ue,Be))||Fr)(Te.call(this,Ue,Be))}return De.type=function(Ue){return arguments.length?(le=nt(Ue),De):le},De.size=function(Ue){return arguments.length?(Te=nt(Ue),De):Te},De};function hr(){return 64}function Tr(){return"circle"}function Fr(le){var Te=Math.sqrt(le/Ee);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Qr=x.map({circle:Fr,cross:function(le){var Te=Math.sqrt(le/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(le){var Te=Math.sqrt(le/(2*En)),De=Te*En;return"M0,"+-Te+"L"+De+",0 0,"+Te+" "+-De+",0Z"},square:function(le){var Te=Math.sqrt(le)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(le){var Te=Math.sqrt(le/on),De=Te*on/2;return"M0,"+De+"L"+Te+","+-De+" "+-Te+","+-De+"Z"},"triangle-up":function(le){var Te=Math.sqrt(le/on),De=Te*on/2;return"M0,"+-De+"L"+Te+","+De+" "+-Te+","+De+"Z"}});x.svg.symbolTypes=Qr.keys();var on=Math.sqrt(3),En=Math.tan(30*At);re.transition=function(le){for(var Te=qa||++ni,De=qe(le),Ue=[],Be,$e,wt=ai||{time:Date.now(),ease:ko,delay:0,duration:250},gt=-1,Ft=this.length;++gt<Ft;){Ue.push(Be=[]);for(var qt=this[gt],ar=-1,ir=qt.length;++ar<ir;)($e=qt[ar])&&$t($e,ar,De,Te,wt),Be.push($e)}return Ta(Ue,De,Te)},re.interrupt=function(le){return this.each(le==null?Nn:Jn(qe(le)))};var Nn=Jn(qe());function Jn(le){return function(){var Te,De,Ue;(Te=this[le])&&(Ue=Te[De=Te.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--Te.count?delete Te[De]:delete this[le],Te.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function Ta(le,Te,De){return K(le,Ea),le.namespace=Te,le.id=De,le}var Ea=[],ni=0,qa,ai;Ea.call=re.call,Ea.empty=re.empty,Ea.node=re.node,Ea.size=re.size,x.transition=function(le,Te){return le&&le.transition?qa?le.transition(Te):le:x.selection().transition(le)},x.transition.prototype=Ea,Ea.select=function(le){var Te=this.id,De=this.namespace,Ue=[],Be,$e,wt;le=Z(le);for(var gt=-1,Ft=this.length;++gt<Ft;){Ue.push(Be=[]);for(var qt=this[gt],ar=-1,ir=qt.length;++ar<ir;)(wt=qt[ar])&&($e=le.call(wt,wt.__data__,ar,gt))?("__data__"in wt&&($e.__data__=wt.__data__),$t($e,ar,De,Te,wt[De][Te]),Be.push($e)):Be.push(null)}return Ta(Ue,De,Te)},Ea.selectAll=function(le){var Te=this.id,De=this.namespace,Ue=[],Be,$e,wt,gt,Ft;le=Q(le);for(var qt=-1,ar=this.length;++qt<ar;)for(var ir=this[qt],Cr=-1,nn=ir.length;++Cr<nn;)if(wt=ir[Cr]){Ft=wt[De][Te],$e=le.call(wt,wt.__data__,Cr,qt),Ue.push(Be=[]);for(var pn=-1,Ir=$e.length;++pn<Ir;)(gt=$e[pn])&&$t(gt,pn,De,Te,Ft),Be.push(gt)}return Ta(Ue,De,Te)},Ea.filter=function(le){var Te=[],De,Ue,Be;typeof le!="function"&&(le=Ae(le));for(var $e=0,wt=this.length;$e<wt;$e++){Te.push(De=[]);for(var Ue=this[$e],gt=0,Ft=Ue.length;gt<Ft;gt++)(Be=Ue[gt])&&le.call(Be,Be.__data__,gt,$e)&&De.push(Be)}return Ta(Te,this.namespace,this.id)},Ea.tween=function(le,Te){var De=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][De].tween.get(le):Ze(this,Te==null?function(Be){Be[Ue][De].tween.remove(le)}:function(Be){Be[Ue][De].tween.set(le,Te)})};function Ti(le,Te,De,Ue){var Be=le.id,$e=le.namespace;return Ze(le,typeof De=="function"?function(wt,gt,Ft){wt[$e][Be].tween.set(Te,Ue(De.call(wt,wt.__data__,gt,Ft)))}:(De=Ue(De),function(wt){wt[$e][Be].tween.set(Te,De)}))}Ea.attr=function(le,Te){if(arguments.length<2){for(Te in le)this.attr(Te,le[Te]);return this}var De=le=="transform"?jl:po,Ue=x.ns.qualify(le);function Be(){this.removeAttribute(Ue)}function $e(){this.removeAttributeNS(Ue.space,Ue.local)}function wt(Ft){return Ft==null?Be:(Ft+="",function(){var qt=this.getAttribute(Ue),ar;return qt!==Ft&&(ar=De(qt,Ft),function(ir){this.setAttribute(Ue,ar(ir))})})}function gt(Ft){return Ft==null?$e:(Ft+="",function(){var qt=this.getAttributeNS(Ue.space,Ue.local),ar;return qt!==Ft&&(ar=De(qt,Ft),function(ir){this.setAttributeNS(Ue.space,Ue.local,ar(ir))})})}return Ti(this,"attr."+le,Te,Ue.local?gt:wt)},Ea.attrTween=function(le,Te){var De=x.ns.qualify(le);function Ue($e,wt){var gt=Te.call(this,$e,wt,this.getAttribute(De));return gt&&function(Ft){this.setAttribute(De,gt(Ft))}}function Be($e,wt){var gt=Te.call(this,$e,wt,this.getAttributeNS(De.space,De.local));return gt&&function(Ft){this.setAttributeNS(De.space,De.local,gt(Ft))}}return this.tween("attr."+le,De.local?Be:Ue)},Ea.style=function(le,Te,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(Te="");for(De in le)this.style(De,le[De],Te);return this}De=""}function Be(){this.style.removeProperty(le)}function $e(wt){return wt==null?Be:(wt+="",function(){var gt=a(this).getComputedStyle(this,null).getPropertyValue(le),Ft;return gt!==wt&&(Ft=po(gt,wt),function(qt){this.style.setProperty(le,Ft(qt),De)})})}return Ti(this,"style."+le,Te,$e)},Ea.styleTween=function(le,Te,De){arguments.length<3&&(De="");function Ue(Be,$e){var wt=Te.call(this,Be,$e,a(this).getComputedStyle(this,null).getPropertyValue(le));return wt&&function(gt){this.style.setProperty(le,wt(gt),De)}}return this.tween("style."+le,Ue)},Ea.text=function(le){return Ti(this,"text",le,Yr)};function Yr(le){return le==null&&(le=""),function(){this.textContent=le}}Ea.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var Te;this[le].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},Ea.ease=function(le){var Te=this.id,De=this.namespace;return arguments.length<1?this.node()[De][Te].ease:(typeof le!="function"&&(le=x.ease.apply(x,arguments)),Ze(this,function(Ue){Ue[De][Te].ease=le}))},Ea.delay=function(le){var Te=this.id,De=this.namespace;return arguments.length<1?this.node()[De][Te].delay:Ze(this,typeof le=="function"?function(Ue,Be,$e){Ue[De][Te].delay=+le.call(Ue,Ue.__data__,Be,$e)}:(le=+le,function(Ue){Ue[De][Te].delay=le}))},Ea.duration=function(le){var Te=this.id,De=this.namespace;return arguments.length<1?this.node()[De][Te].duration:Ze(this,typeof le=="function"?function(Ue,Be,$e){Ue[De][Te].duration=Math.max(1,le.call(Ue,Ue.__data__,Be,$e))}:(le=Math.max(1,le),function(Ue){Ue[De][Te].duration=le}))},Ea.each=function(le,Te){var De=this.id,Ue=this.namespace;if(arguments.length<2){var Be=ai,$e=qa;try{qa=De,Ze(this,function(wt,gt,Ft){ai=wt[Ue][De],le.call(wt,wt.__data__,gt,Ft)})}finally{ai=Be,qa=$e}}else Ze(this,function(wt){var gt=wt[Ue][De];(gt.event||(gt.event=x.dispatch("start","end","interrupt"))).on(le,Te)});return this},Ea.transition=function(){for(var le=this.id,Te=++ni,De=this.namespace,Ue=[],Be,$e,wt,gt,Ft=0,qt=this.length;Ft<qt;Ft++){Ue.push(Be=[]);for(var $e=this[Ft],ar=0,ir=$e.length;ar<ir;ar++)(wt=$e[ar])&&(gt=wt[De][le],$t(wt,ar,De,Te,{time:gt.time,ease:gt.ease,delay:gt.delay+gt.duration,duration:gt.duration})),Be.push(wt)}return Ta(Ue,De,Te)};function qe(le){return le==null?"__transition__":"__transition_"+le+"__"}function $t(le,Te,De,Ue,Be){var $e=le[De]||(le[De]={active:0,count:0}),wt=$e[Ue],gt,Ft,qt,ar,ir;function Cr(Ir){var Wr=wt.delay;if(Ft.t=Wr+gt,Wr<=Ir)return nn(Ir-Wr);Ft.c=nn}function nn(Ir){var Wr=$e.active,qr=$e[Wr];qr&&(qr.timer.c=null,qr.timer.t=NaN,--$e.count,delete $e[Wr],qr.event&&qr.event.interrupt.call(le,le.__data__,qr.index));for(var fn in $e)if(+fn<Ue){var vn=$e[fn];vn.timer.c=null,vn.timer.t=NaN,--$e.count,delete $e[fn]}Ft.c=pn,mn(function(){return Ft.c&&pn(Ir||1)&&(Ft.c=null,Ft.t=NaN),1},0,gt),$e.active=Ue,wt.event&&wt.event.start.call(le,le.__data__,Te),ir=[],wt.tween.forEach(function(tn,Zn){(Zn=Zn.call(le,le.__data__,Te))&&ir.push(Zn)}),ar=wt.ease,qt=wt.duration}function pn(Ir){for(var Wr=Ir/qt,qr=ar(Wr),fn=ir.length;fn>0;)ir[--fn].call(le,qr);if(Wr>=1)return wt.event&&wt.event.end.call(le,le.__data__,Te),--$e.count?delete $e[Ue]:delete le[De],1}wt||(gt=Be.time,Ft=mn(Cr,0,gt),wt=$e[Ue]={tween:new A,time:gt,timer:Ft,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:Te},Be=null,++$e.count)}x.svg.axis=function(){var le=x.scale.linear(),Te=Jr,De=6,Ue=6,Be=3,$e=[10],wt=null,gt;function Ft(qt){qt.each(function(){var ar=x.select(this),ir=this.__chart__||le,Cr=this.__chart__=le.copy(),nn=wt==null?Cr.ticks?Cr.ticks.apply(Cr,$e):Cr.domain():wt,pn=gt==null?Cr.tickFormat?Cr.tickFormat.apply(Cr,$e):D:gt,Ir=ar.selectAll(".tick").data(nn,Cr),Wr=Ir.enter().insert("g",".domain").attr("class","tick").style("opacity",at),qr=x.transition(Ir.exit()).style("opacity",at).remove(),fn=x.transition(Ir.order()).style("opacity",1),vn=Math.max(De,0)+Be,tn,Zn=ln(Cr),ha=ar.selectAll(".domain").data([0]),Pa=(ha.enter().append("path").attr("class","domain"),x.transition(ha));Wr.append("line"),Wr.append("text");var pa=Wr.select("line"),Na=fn.select("line"),xa=Ir.select("text").text(pn),$a=Wr.select("text"),Va=fn.select("text"),ui=Te==="top"||Te==="left"?-1:1,Ci,Do,Ji,_a;if(Te==="bottom"||Te==="top"?(tn=ta,Ci="x",Ji="y",Do="x2",_a="y2",xa.attr("dy",ui<0?"0em":".71em").style("text-anchor","middle"),Pa.attr("d","M"+Zn[0]+","+ui*Ue+"V0H"+Zn[1]+"V"+ui*Ue)):(tn=ea,Ci="y",Ji="x",Do="y2",_a="x2",xa.attr("dy",".32em").style("text-anchor",ui<0?"end":"start"),Pa.attr("d","M"+ui*Ue+","+Zn[0]+"H0V"+Zn[1]+"H"+ui*Ue)),pa.attr(_a,ui*De),$a.attr(Ji,ui*vn),Na.attr(Do,0).attr(_a,ui*De),Va.attr(Ci,0).attr(Ji,ui*vn),Cr.rangeBand){var di=Cr,ii=di.rangeBand()/2;ir=Cr=function(Ui){return di(Ui)+ii}}else ir.rangeBand?ir=Cr:qr.call(tn,Cr,ir);Wr.call(tn,ir,Cr),fn.call(tn,Cr,Cr)})}return Ft.scale=function(qt){return arguments.length?(le=qt,Ft):le},Ft.orient=function(qt){return arguments.length?(Te=qt in Hn?qt+"":Jr,Ft):Te},Ft.ticks=function(){return arguments.length?($e=M(arguments),Ft):$e},Ft.tickValues=function(qt){return arguments.length?(wt=qt,Ft):wt},Ft.tickFormat=function(qt){return arguments.length?(gt=qt,Ft):gt},Ft.tickSize=function(qt){var ar=arguments.length;return ar?(De=+qt,Ue=+arguments[ar-1],Ft):De},Ft.innerTickSize=function(qt){return arguments.length?(De=+qt,Ft):De},Ft.outerTickSize=function(qt){return arguments.length?(Ue=+qt,Ft):Ue},Ft.tickPadding=function(qt){return arguments.length?(Be=+qt,Ft):Be},Ft.tickSubdivide=function(){return arguments.length&&Ft},Ft};var Jr="bottom",Hn={top:1,right:1,bottom:1,left:1};function ta(le,Te,De){le.attr("transform",function(Ue){var Be=Te(Ue);return"translate("+(isFinite(Be)?Be:De(Ue))+",0)"})}function ea(le,Te,De){le.attr("transform",function(Ue){var Be=Te(Ue);return"translate(0,"+(isFinite(Be)?Be:De(Ue))+")"})}x.svg.brush=function(){var le=ae(ar,"brushstart","brush","brushend"),Te=null,De=null,Ue=[0,0],Be=[0,0],$e,wt,gt=!0,Ft=!0,qt=Pi[0];function ar(Ir){Ir.each(function(){var Wr=x.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pn).on("touchstart.brush",pn),qr=Wr.selectAll(".background").data([0]);qr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Wr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var fn=Wr.selectAll(".resize").data(qt,D);fn.exit().remove(),fn.enter().append("g").attr("class",function(ha){return"resize "+ha}).style("cursor",function(ha){return vi[ha]}).append("rect").attr("x",function(ha){return/[ew]$/.test(ha)?-3:null}).attr("y",function(ha){return/^[ns]/.test(ha)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),fn.style("display",ar.empty()?"none":null);var vn=x.transition(Wr),tn=x.transition(qr),Zn;Te&&(Zn=ln(Te),tn.attr("x",Zn[0]).attr("width",Zn[1]-Zn[0]),Cr(vn)),De&&(Zn=ln(De),tn.attr("y",Zn[0]).attr("height",Zn[1]-Zn[0]),nn(vn)),ir(vn)})}ar.event=function(Ir){Ir.each(function(){var Wr=le.of(this,arguments),qr={x:Ue,y:Be,i:$e,j:wt},fn=this.__chart__||qr;this.__chart__=qr,qa?x.select(this).transition().each("start.brush",function(){$e=fn.i,wt=fn.j,Ue=fn.x,Be=fn.y,Wr({type:"brushstart"})}).tween("brush:brush",function(){var vn=no(Ue,qr.x),tn=no(Be,qr.y);return $e=wt=null,function(Zn){Ue=qr.x=vn(Zn),Be=qr.y=tn(Zn),Wr({type:"brush",mode:"resize"})}}).each("end.brush",function(){$e=qr.i,wt=qr.j,Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"})}):(Wr({type:"brushstart"}),Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"}))})};function ir(Ir){Ir.selectAll(".resize").attr("transform",function(Wr){return"translate("+Ue[+/e$/.test(Wr)]+","+Be[+/^s/.test(Wr)]+")"})}function Cr(Ir){Ir.select(".extent").attr("x",Ue[0]),Ir.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function nn(Ir){Ir.select(".extent").attr("y",Be[0]),Ir.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function pn(){var Ir=this,Wr=x.select(x.event.target),qr=le.of(Ir,arguments),fn=x.select(Ir),vn=Wr.datum(),tn=!/^(n|s)$/.test(vn)&&Te,Zn=!/^(e|w)$/.test(vn)&&De,ha=Wr.classed("extent"),Pa=Kt(Ir),pa,Na=x.mouse(Ir),xa,$a=x.select(a(Ir)).on("keydown.brush",Ci).on("keyup.brush",Do);if(x.event.changedTouches?$a.on("touchmove.brush",Ji).on("touchend.brush",di):$a.on("mousemove.brush",Ji).on("mouseup.brush",di),fn.interrupt().selectAll("*").interrupt(),ha)Na[0]=Ue[0]-Na[0],Na[1]=Be[0]-Na[1];else if(vn){var Va=+/w$/.test(vn),ui=+/^n/.test(vn);xa=[Ue[1-Va]-Na[0],Be[1-ui]-Na[1]],Na[0]=Ue[Va],Na[1]=Be[ui]}else x.event.altKey&&(pa=Na.slice());fn.style("pointer-events","none").selectAll(".resize").style("display",null),x.select("body").style("cursor",Wr.style("cursor")),qr({type:"brushstart"}),Ji();function Ci(){x.event.keyCode==32&&(ha||(pa=null,Na[0]-=Ue[1],Na[1]-=Be[1],ha=2),j())}function Do(){x.event.keyCode==32&&ha==2&&(Na[0]+=Ue[1],Na[1]+=Be[1],ha=0,j())}function Ji(){var ii=x.mouse(Ir),Ui=!1;xa&&(ii[0]+=xa[0],ii[1]+=xa[1]),ha||(x.event.altKey?(pa||(pa=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Na[0]=Ue[+(ii[0]<pa[0])],Na[1]=Be[+(ii[1]<pa[1])]):pa=null),tn&&_a(ii,Te,0)&&(Cr(fn),Ui=!0),Zn&&_a(ii,De,1)&&(nn(fn),Ui=!0),Ui&&(ir(fn),qr({type:"brush",mode:ha?"move":"resize"}))}function _a(ii,Ui,yi){var So=ln(Ui),mo=So[0],Oo=So[1],ms=Na[yi],ns=yi?Be:Ue,ys=ns[1]-ns[0],io,eo;if(ha&&(mo-=ms,Oo-=ys+ms),io=(yi?Ft:gt)?Math.max(mo,Math.min(Oo,ii[yi])):ii[yi],ha?eo=(io+=ms)+ys:(pa&&(ms=Math.max(mo,Math.min(Oo,2*pa[yi]-io))),ms<io?(eo=io,io=ms):eo=ms),ns[0]!=io||ns[1]!=eo)return yi?wt=null:$e=null,ns[0]=io,ns[1]=eo,!0}function di(){Ji(),fn.style("pointer-events","all").selectAll(".resize").style("display",ar.empty()?"none":null),x.select("body").style("cursor",null),$a.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Pa(),qr({type:"brushend"})}}return ar.x=function(Ir){return arguments.length?(Te=Ir,qt=Pi[!Te<<1|!De],ar):Te},ar.y=function(Ir){return arguments.length?(De=Ir,qt=Pi[!Te<<1|!De],ar):De},ar.clamp=function(Ir){return arguments.length?(Te&&De?(gt=!!Ir[0],Ft=!!Ir[1]):Te?gt=!!Ir:De&&(Ft=!!Ir),ar):Te&&De?[gt,Ft]:Te?gt:De?Ft:null},ar.extent=function(Ir){var Wr,qr,fn,vn,tn;return arguments.length?(Te&&(Wr=Ir[0],qr=Ir[1],De&&(Wr=Wr[0],qr=qr[0]),$e=[Wr,qr],Te.invert&&(Wr=Te(Wr),qr=Te(qr)),qr<Wr&&(tn=Wr,Wr=qr,qr=tn),(Wr!=Ue[0]||qr!=Ue[1])&&(Ue=[Wr,qr])),De&&(fn=Ir[0],vn=Ir[1],Te&&(fn=fn[1],vn=vn[1]),wt=[fn,vn],De.invert&&(fn=De(fn),vn=De(vn)),vn<fn&&(tn=fn,fn=vn,vn=tn),(fn!=Be[0]||vn!=Be[1])&&(Be=[fn,vn])),ar):(Te&&($e?(Wr=$e[0],qr=$e[1]):(Wr=Ue[0],qr=Ue[1],Te.invert&&(Wr=Te.invert(Wr),qr=Te.invert(qr)),qr<Wr&&(tn=Wr,Wr=qr,qr=tn))),De&&(wt?(fn=wt[0],vn=wt[1]):(fn=Be[0],vn=Be[1],De.invert&&(fn=De.invert(fn),vn=De.invert(vn)),vn<fn&&(tn=fn,fn=vn,vn=tn))),Te&&De?[[Wr,fn],[qr,vn]]:Te?[Wr,qr]:De&&[fn,vn])},ar.clear=function(){return ar.empty()||(Ue=[0,0],Be=[0,0],$e=wt=null),ar},ar.empty=function(){return!!Te&&Ue[0]==Ue[1]||!!De&&Be[0]==Be[1]},x.rebind(ar,le,"on")};var vi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];x.text=It(function(le){return le.responseText}),x.json=function(le,Te){return Jt(le,"application/json",Ki,Te)};function Ki(le){return JSON.parse(le.responseText)}x.html=function(le,Te){return Jt(le,"text/html",Di,Te)};function Di(le){var Te=T.createRange();return Te.selectNode(T.body),Te.createContextualFragment(le.responseText)}x.xml=It(function(le){return le.responseXML}),typeof B=="object"&&B.exports?B.exports=x:this.d3=x}).apply(self)},{}],59:[function(t,B,G){B.exports=t("./quad")},{"./quad":60}],60:[function(t,B,G){var x=t("binary-search-bounds"),f=t("clamp"),M=t("parse-rect"),T=t("array-bounds"),e=t("pick-by-alias"),a=t("defined"),i=t("flatten-vertex-data"),n=t("is-obj"),r=t("dtype"),v=t("math-log2"),s=1073741824;B.exports=function(g,d){d||(d={}),g=i(g,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=a(d.maxDepth,255),m=a(d.bounds,T(g,2));m[0]===m[2]&&m[2]++,m[1]===m[3]&&m[3]++;var l=o(g,m),y=g.length>>>1,u;d.dtype||(d.dtype="array"),typeof d.dtype=="string"?u=new(r(d.dtype))(y):d.dtype&&(u=d.dtype,Array.isArray(u)&&(u.length=y));for(var A=0;A<y;++A)u[A]=A;var _=[],p=[],w=[],h=[];D(0,0,1,u,0,1);for(var L=0,E=0;E<_.length;E++){var S=_[E];if(u.set)u.set(S,L);else for(var P=0,F=S.length;P<F;P++)u[P+L]=S[P];var I=L+_[E].length;h[E]=[L,I],L=I}return u.range=R,u;function D(H,Y,ee,j,X,ae){if(!j.length)return null;var fe=_[X]||(_[X]=[]),K=w[X]||(w[X]=[]),J=p[X]||(p[X]=[]),U=fe.length;if(X++,X>c||ae>s){for(var V=0;V<j.length;V++)fe.push(j[V]),K.push(ae),J.push(null,null,null,null);return U}if(fe.push(j[0]),K.push(ae),j.length<=1)return J.push(null,null,null,null),U;for(var q=ee*.5,re=H+q,Z=Y+q,Q=[],ie=[],oe=[],ne=[],se=1,_e=j.length;se<_e;se++){var ue=j[se],ge=l[ue*2],xe=l[ue*2+1];ge<re?xe<Z?Q.push(ue):ie.push(ue):xe<Z?oe.push(ue):ne.push(ue)}return ae<<=2,J.push(D(H,Y,q,Q,X,ae),D(H,Z,q,ie,X,ae+1),D(re,Y,q,oe,X,ae+2),D(re,Z,q,ne,X,ae+3)),U}function R(){for(var H=[],Y=arguments.length;Y--;)H[Y]=arguments[Y];var ee;if(n(H[H.length-1])){var j=H.pop();!H.length&&(j.x!=null||j.l!=null||j.left!=null)&&(H=[j],ee={}),ee=e(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else ee={};H.length||(H=m);var X=M.apply(void 0,H),ae=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],fe=ae[0],K=ae[1],J=ae[2],U=ae[3],V=o([fe,K,J,U],m),q=V[0],re=V[1],Z=V[2],Q=V[3],ie=a(ee.level,_.length);if(ee.d!=null){var oe;typeof ee.d=="number"?oe=[ee.d,ee.d]:ee.d.length&&(oe=ee.d),ie=Math.min(Math.max(Math.ceil(-v(Math.abs(oe[0])/(m[2]-m[0]))),Math.ceil(-v(Math.abs(oe[1])/(m[3]-m[1])))),ie)}if(ie=Math.min(ie,_.length),ee.lod)return O(q,re,Z,Q,ie);var ne=[];se(0,0,1,0,0,1);function se(ue,ge,xe,ye,be,Se){if(!(be===null||Se===null)){var Re=ue+xe,Ve=ge+xe;if(!(q>Re||re>Ve||Z<ue||Q<ge)&&!(ye>=ie)&&be!==Se){var Ae=_[ye];Se===void 0&&(Se=Ae.length);for(var Ce=be;Ce<Se;Ce++){var Ze=Ae[Ce],Ye=g[Ze*2],ze=g[Ze*2+1];Ye>=fe&&Ye<=J&&ze>=K&&ze<=U&&ne.push(Ze)}var Ie=p[ye],Ge=Ie[be*4+0],dt=Ie[be*4+1],Rt=Ie[be*4+2],Qt=Ie[be*4+3],Bt=_e(Ie,be+1),Ct=xe*.5,Kt=ye+1;se(ue,ge,Ct,Kt,Ge,dt||Rt||Qt||Bt),se(ue,ge+Ct,Ct,Kt,dt,Rt||Qt||Bt),se(ue+Ct,ge,Ct,Kt,Rt,Qt||Bt),se(ue+Ct,ge+Ct,Ct,Kt,Qt,Bt)}}}function _e(ue,ge){for(var xe=null,ye=0;xe===null;)if(xe=ue[ge*4+ye],ye++,ye>ue.length)return null;return xe}return ne}function O(H,Y,ee,j,X){for(var ae=[],fe=0;fe<X;fe++){var K=w[fe],J=h[fe][0],U=z(H,Y,fe),V=z(ee,j,fe),q=x.ge(K,U),re=x.gt(K,V,q,K.length-1);ae[fe]=[q+J,re+J]}return ae}function z(H,Y,ee){for(var j=1,X=.5,ae=.5,fe=.5,K=0;K<ee;K++)j<<=2,j+=H<X?Y<ae?0:1:Y<ae?2:3,fe*=.5,X+=H<X?-fe:fe,ae+=Y<ae?-fe:fe;return j}};function o(b,g){for(var d=g[0],c=g[1],m=g[2],l=g[3],y=1/(m-d),u=1/(l-c),A=new Array(b.length),_=0,p=b.length/2;_<p;_++)A[2*_]=f((b[2*_]-d)*y,0,1),A[2*_+1]=f((b[2*_+1]-c)*u,0,1);return A}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0});var x=t("@turf/meta"),f=6378137;function M(n){return x.geomReduce(n,function(r,v){return r+T(v)},0)}G.default=M;function T(n){var r=0,v;switch(n.type){case"Polygon":return e(n.coordinates);case"MultiPolygon":for(v=0;v<n.coordinates.length;v++)r+=e(n.coordinates[v]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(n){var r=0;if(n&&n.length>0){r+=Math.abs(a(n[0]));for(var v=1;v<n.length;v++)r-=Math.abs(a(n[v]))}return r}function a(n){var r,v,s,o,b,g,d,c=0,m=n.length;if(m>2){for(d=0;d<m;d++)d===m-2?(o=m-2,b=m-1,g=0):d===m-1?(o=m-1,b=0,g=1):(o=d,b=d+1,g=d+2),r=n[o],v=n[b],s=n[g],c+=(i(s[0])-i(r[0]))*Math.sin(i(v[1]));c=c*f*f/2}return c}function i(n){return n*Math.PI/180}},{"@turf/meta":63}],62:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0}),G.earthRadius=63710088e-1,G.factors={centimeters:G.earthRadius*100,centimetres:G.earthRadius*100,degrees:G.earthRadius/111325,feet:G.earthRadius*3.28084,inches:G.earthRadius*39.37,kilometers:G.earthRadius/1e3,kilometres:G.earthRadius/1e3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:G.earthRadius*1e3,millimetres:G.earthRadius*1e3,nauticalmiles:G.earthRadius/1852,radians:1,yards:G.earthRadius*1.0936},G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1.0936133},G.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function x(E,S,P){P===void 0&&(P={});var F={type:"Feature"};return(P.id===0||P.id)&&(F.id=P.id),P.bbox&&(F.bbox=P.bbox),F.properties=S||{},F.geometry=E,F}G.feature=x;function f(E,S,P){switch(E){case"Point":return M(S).geometry;case"LineString":return i(S).geometry;case"Polygon":return e(S).geometry;case"MultiPoint":return s(S).geometry;case"MultiLineString":return v(S).geometry;case"MultiPolygon":return o(S).geometry;default:throw new Error(E+" is invalid")}}G.geometry=f;function M(E,S,P){if(P===void 0&&(P={}),!E)throw new Error("coordinates is required");if(!Array.isArray(E))throw new Error("coordinates must be an Array");if(E.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(E[0])||!p(E[1]))throw new Error("coordinates must contain numbers");var F={type:"Point",coordinates:E};return x(F,S,P)}G.point=M;function T(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return M(F,S)}),P)}G.points=T;function e(E,S,P){P===void 0&&(P={});for(var F=0,I=E;F<I.length;F++){var D=I[F];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:E};return x(O,S,P)}G.polygon=e;function a(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return e(F,S)}),P)}G.polygons=a;function i(E,S,P){if(P===void 0&&(P={}),E.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:E};return x(F,S,P)}G.lineString=i;function n(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return i(F,S)}),P)}G.lineStrings=n;function r(E,S){S===void 0&&(S={});var P={type:"FeatureCollection"};return S.id&&(P.id=S.id),S.bbox&&(P.bbox=S.bbox),P.features=E,P}G.featureCollection=r;function v(E,S,P){P===void 0&&(P={});var F={type:"MultiLineString",coordinates:E};return x(F,S,P)}G.multiLineString=v;function s(E,S,P){P===void 0&&(P={});var F={type:"MultiPoint",coordinates:E};return x(F,S,P)}G.multiPoint=s;function o(E,S,P){P===void 0&&(P={});var F={type:"MultiPolygon",coordinates:E};return x(F,S,P)}G.multiPolygon=o;function b(E,S,P){P===void 0&&(P={});var F={type:"GeometryCollection",geometries:E};return x(F,S,P)}G.geometryCollection=b;function g(E,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,S||0);return Math.round(E*P)/P}G.round=g;function d(E,S){S===void 0&&(S="kilometers");var P=G.factors[S];if(!P)throw new Error(S+" units is invalid");return E*P}G.radiansToLength=d;function c(E,S){S===void 0&&(S="kilometers");var P=G.factors[S];if(!P)throw new Error(S+" units is invalid");return E/P}G.lengthToRadians=c;function m(E,S){return y(c(E,S))}G.lengthToDegrees=m;function l(E){var S=E%360;return S<0&&(S+=360),S}G.bearingToAzimuth=l;function y(E){var S=E%(2*Math.PI);return S*180/Math.PI}G.radiansToDegrees=y;function u(E){var S=E%360;return S*Math.PI/180}G.degreesToRadians=u;function A(E,S,P){if(S===void 0&&(S="kilometers"),P===void 0&&(P="kilometers"),!(E>=0))throw new Error("length must be a positive number");return d(c(E,S),P)}G.convertLength=A;function _(E,S,P){if(S===void 0&&(S="meters"),P===void 0&&(P="kilometers"),!(E>=0))throw new Error("area must be a positive number");var F=G.areaFactors[S];if(!F)throw new Error("invalid original units");var I=G.areaFactors[P];if(!I)throw new Error("invalid final units");return E/F*I}G.convertArea=_;function p(E){return!isNaN(E)&&E!==null&&!Array.isArray(E)}G.isNumber=p;function w(E){return!!E&&E.constructor===Object}G.isObject=w;function h(E){if(!E)throw new Error("bbox is required");if(!Array.isArray(E))throw new Error("bbox must be an Array");if(E.length!==4&&E.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");E.forEach(function(S){if(!p(S))throw new Error("bbox must only contain numbers")})}G.validateBBox=h;function L(E){if(!E)throw new Error("id is required");if(["string","number"].indexOf(typeof E)===-1)throw new Error("id must be a number or a string")}G.validateId=L},{}],63:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0});var x=t("@turf/helpers");function f(y,u,A){if(y!==null)for(var _,p,w,h,L,E,S,P=0,F=0,I,D=y.type,R=D==="FeatureCollection",O=D==="Feature",z=R?y.features.length:1,H=0;H<z;H++){S=R?y.features[H].geometry:O?y.geometry:y,I=S?S.type==="GeometryCollection":!1,L=I?S.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,j=0;if(h=I?S.geometries[Y]:S,h!==null){E=h.coordinates;var X=h.type;switch(P=A&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(u(E,F,H,ee,j)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(_=0;_<E.length;_++){if(u(E[_],F,H,ee,j)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(_=0;_<E.length;_++){for(p=0;p<E[_].length-P;p++){if(u(E[_][p],F,H,ee,j)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&j++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(_=0;_<E.length;_++){for(j=0,p=0;p<E[_].length;p++){for(w=0;w<E[_][p].length-P;w++){if(u(E[_][p][w],F,H,ee,j)===!1)return!1;F++}j++}ee++}break;case"GeometryCollection":for(_=0;_<h.geometries.length;_++)if(f(h.geometries[_],u,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(y,u,A,_){var p=A;return f(y,function(w,h,L,E,S){h===0&&A===void 0?p=w:p=u(p,w,h,L,E,S)},_),p}function T(y,u){var A;switch(y.type){case"FeatureCollection":for(A=0;A<y.features.length&&u(y.features[A].properties,A)!==!1;A++);break;case"Feature":u(y.properties,0);break}}function e(y,u,A){var _=A;return T(y,function(p,w){w===0&&A===void 0?_=p:_=u(_,p,w)}),_}function a(y,u){if(y.type==="Feature")u(y,0);else if(y.type==="FeatureCollection")for(var A=0;A<y.features.length&&u(y.features[A],A)!==!1;A++);}function i(y,u,A){var _=A;return a(y,function(p,w){w===0&&A===void 0?_=p:_=u(_,p,w)}),_}function n(y){var u=[];return f(y,function(A){u.push(A)}),u}function r(y,u){var A,_,p,w,h,L,E,S,P,F,I=0,D=y.type==="FeatureCollection",R=y.type==="Feature",O=D?y.features.length:1;for(A=0;A<O;A++){for(L=D?y.features[A].geometry:R?y.geometry:y,S=D?y.features[A].properties:R?y.properties:{},P=D?y.features[A].bbox:R?y.bbox:void 0,F=D?y.features[A].id:R?y.id:void 0,E=L?L.type==="GeometryCollection":!1,h=E?L.geometries.length:1,p=0;p<h;p++){if(w=E?L.geometries[p]:L,w===null){if(u(null,I,S,P,F)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(w,I,S,P,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<w.geometries.length;_++)if(u(w.geometries[_],I,S,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(y,u,A){var _=A;return r(y,function(p,w,h,L,E){w===0&&A===void 0?_=p:_=u(_,p,w,h,L,E)}),_}function s(y,u){r(y,function(A,_,p,w,h){var L=A===null?null:A.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return u(x.feature(A,p,{bbox:w,id:h}),_,0)===!1?!1:void 0}var E;switch(L){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<A.coordinates.length;S++){var P=A.coordinates[S],F={type:E,coordinates:P};if(u(x.feature(F,p),_,S)===!1)return!1}})}function o(y,u,A){var _=A;return s(y,function(p,w,h){w===0&&h===0&&A===void 0?_=p:_=u(_,p,w,h)}),_}function b(y,u){s(y,function(A,_,p){var w=0;if(!!A.geometry){var h=A.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,E=0,S=0,P=0;if(f(A,function(F,I,D,R,O){if(L===void 0||_>E||R>S||O>P){L=F,E=_,S=R,P=O,w=0;return}var z=x.lineString([L,F],A.properties);if(u(z,_,p,O,w)===!1)return!1;w++,L=F})===!1)return!1}}})}function g(y,u,A){var _=A,p=!1;return b(y,function(w,h,L,E,S){p===!1&&A===void 0?_=w:_=u(_,w,h,L,E,S),p=!0}),_}function d(y,u){if(!y)throw new Error("geojson is required");s(y,function(A,_,p){if(A.geometry!==null){var w=A.geometry.type,h=A.geometry.coordinates;switch(w){case"LineString":if(u(A,_,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(u(x.lineString(h[L],A.properties),_,p,L)===!1)return!1;break}}})}function c(y,u,A){var _=A;return d(y,function(p,w,h,L){w===0&&A===void 0?_=p:_=u(_,p,w,h,L)}),_}function m(y,u){if(u=u||{},!x.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.segmentIndex||0,h=u.properties,L;switch(y.type){case"FeatureCollection":A<0&&(A=y.features.length+A),h=h||y.features[A].properties,L=y.features[A].geometry;break;case"Feature":h=h||y.properties,L=y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=y;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=E.length+w-1),x.lineString([E[w],E[w+1]],h,u);case"Polygon":return p<0&&(p=E.length+p),w<0&&(w=E[p].length+w-1),x.lineString([E[p][w],E[p][w+1]],h,u);case"MultiLineString":return _<0&&(_=E.length+_),w<0&&(w=E[_].length+w-1),x.lineString([E[_][w],E[_][w+1]],h,u);case"MultiPolygon":return _<0&&(_=E.length+_),p<0&&(p=E[_].length+p),w<0&&(w=E[_][p].length-w-1),x.lineString([E[_][p][w],E[_][p][w+1]],h,u)}throw new Error("geojson is invalid")}function l(y,u){if(u=u||{},!x.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.coordIndex||0,h=u.properties,L;switch(y.type){case"FeatureCollection":A<0&&(A=y.features.length+A),h=h||y.features[A].properties,L=y.features[A].geometry;break;case"Feature":h=h||y.properties,L=y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=y;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":return x.point(E,h,u);case"MultiPoint":return _<0&&(_=E.length+_),x.point(E[_],h,u);case"LineString":return w<0&&(w=E.length+w),x.point(E[w],h,u);case"Polygon":return p<0&&(p=E.length+p),w<0&&(w=E[p].length+w),x.point(E[p][w],h,u);case"MultiLineString":return _<0&&(_=E.length+_),w<0&&(w=E[_].length+w),x.point(E[_][w],h,u);case"MultiPolygon":return _<0&&(_=E.length+_),p<0&&(p=E[_].length+p),w<0&&(w=E[_][p].length-w),x.point(E[_][p][w],h,u)}throw new Error("geojson is invalid")}G.coordEach=f,G.coordReduce=M,G.propEach=T,G.propReduce=e,G.featureEach=a,G.featureReduce=i,G.coordAll=n,G.geomEach=r,G.geomReduce=v,G.flattenEach=s,G.flattenReduce=o,G.segmentEach=b,G.segmentReduce=g,G.lineEach=d,G.lineReduce=c,G.findSegment=m,G.findPoint=l},{"@turf/helpers":62}],64:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0});var x=t("@turf/meta");function f(M){var T=[1/0,1/0,-1/0,-1/0];return x.coordEach(M,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}f.default=f,G.default=f},{"@turf/meta":66}],65:[function(t,B,G){arguments[4][62][0].apply(G,arguments)},{dup:62}],66:[function(t,B,G){arguments[4][63][0].apply(G,arguments)},{"@turf/helpers":65,dup:63}],67:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0});var x=t("@turf/meta"),f=t("@turf/helpers");function M(T,e){e===void 0&&(e={});var a=0,i=0,n=0;return x.coordEach(T,function(r){a+=r[0],i+=r[1],n++}),f.point([a/n,i/n],e.properties)}G.default=M},{"@turf/helpers":68,"@turf/meta":69}],68:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0}),G.earthRadius=63710088e-1,G.factors={centimeters:G.earthRadius*100,centimetres:G.earthRadius*100,degrees:G.earthRadius/111325,feet:G.earthRadius*3.28084,inches:G.earthRadius*39.37,kilometers:G.earthRadius/1e3,kilometres:G.earthRadius/1e3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:G.earthRadius*1e3,millimetres:G.earthRadius*1e3,nauticalmiles:G.earthRadius/1852,radians:1,yards:G.earthRadius/1.0936},G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1/1.0936},G.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function x(O,z,H){H===void 0&&(H={});var Y={type:"Feature"};return(H.id===0||H.id)&&(Y.id=H.id),H.bbox&&(Y.bbox=H.bbox),Y.properties=z||{},Y.geometry=O,Y}G.feature=x;function f(O,z,H){switch(O){case"Point":return M(z).geometry;case"LineString":return i(z).geometry;case"Polygon":return e(z).geometry;case"MultiPoint":return s(z).geometry;case"MultiLineString":return v(z).geometry;case"MultiPolygon":return o(z).geometry;default:throw new Error(O+" is invalid")}}G.geometry=f;function M(O,z,H){H===void 0&&(H={});var Y={type:"Point",coordinates:O};return x(Y,z,H)}G.point=M;function T(O,z,H){return H===void 0&&(H={}),r(O.map(function(Y){return M(Y,z)}),H)}G.points=T;function e(O,z,H){H===void 0&&(H={});for(var Y=0,ee=O;Y<ee.length;Y++){var j=ee[Y];if(j.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<j[j.length-1].length;X++)if(j[j.length-1][X]!==j[0][X])throw new Error("First and last Position are not equivalent.")}var ae={type:"Polygon",coordinates:O};return x(ae,z,H)}G.polygon=e;function a(O,z,H){return H===void 0&&(H={}),r(O.map(function(Y){return e(Y,z)}),H)}G.polygons=a;function i(O,z,H){if(H===void 0&&(H={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var Y={type:"LineString",coordinates:O};return x(Y,z,H)}G.lineString=i;function n(O,z,H){return H===void 0&&(H={}),r(O.map(function(Y){return i(Y,z)}),H)}G.lineStrings=n;function r(O,z){z===void 0&&(z={});var H={type:"FeatureCollection"};return z.id&&(H.id=z.id),z.bbox&&(H.bbox=z.bbox),H.features=O,H}G.featureCollection=r;function v(O,z,H){H===void 0&&(H={});var Y={type:"MultiLineString",coordinates:O};return x(Y,z,H)}G.multiLineString=v;function s(O,z,H){H===void 0&&(H={});var Y={type:"MultiPoint",coordinates:O};return x(Y,z,H)}G.multiPoint=s;function o(O,z,H){H===void 0&&(H={});var Y={type:"MultiPolygon",coordinates:O};return x(Y,z,H)}G.multiPolygon=o;function b(O,z,H){H===void 0&&(H={});var Y={type:"GeometryCollection",geometries:O};return x(Y,z,H)}G.geometryCollection=b;function g(O,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var H=Math.pow(10,z||0);return Math.round(O*H)/H}G.round=g;function d(O,z){z===void 0&&(z="kilometers");var H=G.factors[z];if(!H)throw new Error(z+" units is invalid");return O*H}G.radiansToLength=d;function c(O,z){z===void 0&&(z="kilometers");var H=G.factors[z];if(!H)throw new Error(z+" units is invalid");return O/H}G.lengthToRadians=c;function m(O,z){return y(c(O,z))}G.lengthToDegrees=m;function l(O){var z=O%360;return z<0&&(z+=360),z}G.bearingToAzimuth=l;function y(O){var z=O%(2*Math.PI);return z*180/Math.PI}G.radiansToDegrees=y;function u(O){var z=O%360;return z*Math.PI/180}G.degreesToRadians=u;function A(O,z,H){if(z===void 0&&(z="kilometers"),H===void 0&&(H="kilometers"),!(O>=0))throw new Error("length must be a positive number");return d(c(O,z),H)}G.convertLength=A;function _(O,z,H){if(z===void 0&&(z="meters"),H===void 0&&(H="kilometers"),!(O>=0))throw new Error("area must be a positive number");var Y=G.areaFactors[z];if(!Y)throw new Error("invalid original units");var ee=G.areaFactors[H];if(!ee)throw new Error("invalid final units");return O/Y*ee}G.convertArea=_;function p(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}G.isNumber=p;function w(O){return!!O&&O.constructor===Object}G.isObject=w;function h(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(z){if(!p(z))throw new Error("bbox must only contain numbers")})}G.validateBBox=h;function L(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}G.validateId=L;function E(){throw new Error("method has been renamed to `radiansToDegrees`")}G.radians2degrees=E;function S(){throw new Error("method has been renamed to `degreesToRadians`")}G.degrees2radians=S;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}G.distanceToDegrees=P;function F(){throw new Error("method has been renamed to `lengthToRadians`")}G.distanceToRadians=F;function I(){throw new Error("method has been renamed to `radiansToLength`")}G.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}G.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}G.convertDistance=R},{}],69:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0});var x=t("@turf/helpers");function f(y,u,A){if(y!==null)for(var _,p,w,h,L,E,S,P=0,F=0,I,D=y.type,R=D==="FeatureCollection",O=D==="Feature",z=R?y.features.length:1,H=0;H<z;H++){S=R?y.features[H].geometry:O?y.geometry:y,I=S?S.type==="GeometryCollection":!1,L=I?S.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,j=0;if(h=I?S.geometries[Y]:S,h!==null){E=h.coordinates;var X=h.type;switch(P=A&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(u(E,F,H,ee,j)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(_=0;_<E.length;_++){if(u(E[_],F,H,ee,j)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(_=0;_<E.length;_++){for(p=0;p<E[_].length-P;p++){if(u(E[_][p],F,H,ee,j)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&j++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(_=0;_<E.length;_++){for(j=0,p=0;p<E[_].length;p++){for(w=0;w<E[_][p].length-P;w++){if(u(E[_][p][w],F,H,ee,j)===!1)return!1;F++}j++}ee++}break;case"GeometryCollection":for(_=0;_<h.geometries.length;_++)if(f(h.geometries[_],u,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(y,u,A,_){var p=A;return f(y,function(w,h,L,E,S){h===0&&A===void 0?p=w:p=u(p,w,h,L,E,S)},_),p}function T(y,u){var A;switch(y.type){case"FeatureCollection":for(A=0;A<y.features.length&&u(y.features[A].properties,A)!==!1;A++);break;case"Feature":u(y.properties,0);break}}function e(y,u,A){var _=A;return T(y,function(p,w){w===0&&A===void 0?_=p:_=u(_,p,w)}),_}function a(y,u){if(y.type==="Feature")u(y,0);else if(y.type==="FeatureCollection")for(var A=0;A<y.features.length&&u(y.features[A],A)!==!1;A++);}function i(y,u,A){var _=A;return a(y,function(p,w){w===0&&A===void 0?_=p:_=u(_,p,w)}),_}function n(y){var u=[];return f(y,function(A){u.push(A)}),u}function r(y,u){var A,_,p,w,h,L,E,S,P,F,I=0,D=y.type==="FeatureCollection",R=y.type==="Feature",O=D?y.features.length:1;for(A=0;A<O;A++){for(L=D?y.features[A].geometry:R?y.geometry:y,S=D?y.features[A].properties:R?y.properties:{},P=D?y.features[A].bbox:R?y.bbox:void 0,F=D?y.features[A].id:R?y.id:void 0,E=L?L.type==="GeometryCollection":!1,h=E?L.geometries.length:1,p=0;p<h;p++){if(w=E?L.geometries[p]:L,w===null){if(u(null,I,S,P,F)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(w,I,S,P,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<w.geometries.length;_++)if(u(w.geometries[_],I,S,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(y,u,A){var _=A;return r(y,function(p,w,h,L,E){w===0&&A===void 0?_=p:_=u(_,p,w,h,L,E)}),_}function s(y,u){r(y,function(A,_,p,w,h){var L=A===null?null:A.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return u(x.feature(A,p,{bbox:w,id:h}),_,0)===!1?!1:void 0}var E;switch(L){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<A.coordinates.length;S++){var P=A.coordinates[S],F={type:E,coordinates:P};if(u(x.feature(F,p),_,S)===!1)return!1}})}function o(y,u,A){var _=A;return s(y,function(p,w,h){w===0&&h===0&&A===void 0?_=p:_=u(_,p,w,h)}),_}function b(y,u){s(y,function(A,_,p){var w=0;if(!!A.geometry){var h=A.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,E=0,S=0,P=0;if(f(A,function(F,I,D,R,O){if(L===void 0||_>E||R>S||O>P){L=F,E=_,S=R,P=O,w=0;return}var z=x.lineString([L,F],A.properties);if(u(z,_,p,O,w)===!1)return!1;w++,L=F})===!1)return!1}}})}function g(y,u,A){var _=A,p=!1;return b(y,function(w,h,L,E,S){p===!1&&A===void 0?_=w:_=u(_,w,h,L,E,S),p=!0}),_}function d(y,u){if(!y)throw new Error("geojson is required");s(y,function(A,_,p){if(A.geometry!==null){var w=A.geometry.type,h=A.geometry.coordinates;switch(w){case"LineString":if(u(A,_,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(u(x.lineString(h[L],A.properties),_,p,L)===!1)return!1;break}}})}function c(y,u,A){var _=A;return d(y,function(p,w,h,L){w===0&&A===void 0?_=p:_=u(_,p,w,h,L)}),_}function m(y,u){if(u=u||{},!x.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.segmentIndex||0,h=u.properties,L;switch(y.type){case"FeatureCollection":A<0&&(A=y.features.length+A),h=h||y.features[A].properties,L=y.features[A].geometry;break;case"Feature":h=h||y.properties,L=y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=y;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=E.length+w-1),x.lineString([E[w],E[w+1]],h,u);case"Polygon":return p<0&&(p=E.length+p),w<0&&(w=E[p].length+w-1),x.lineString([E[p][w],E[p][w+1]],h,u);case"MultiLineString":return _<0&&(_=E.length+_),w<0&&(w=E[_].length+w-1),x.lineString([E[_][w],E[_][w+1]],h,u);case"MultiPolygon":return _<0&&(_=E.length+_),p<0&&(p=E[_].length+p),w<0&&(w=E[_][p].length-w-1),x.lineString([E[_][p][w],E[_][p][w+1]],h,u)}throw new Error("geojson is invalid")}function l(y,u){if(u=u||{},!x.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.coordIndex||0,h=u.properties,L;switch(y.type){case"FeatureCollection":A<0&&(A=y.features.length+A),h=h||y.features[A].properties,L=y.features[A].geometry;break;case"Feature":h=h||y.properties,L=y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=y;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":return x.point(E,h,u);case"MultiPoint":return _<0&&(_=E.length+_),x.point(E[_],h,u);case"LineString":return w<0&&(w=E.length+w),x.point(E[w],h,u);case"Polygon":return p<0&&(p=E.length+p),w<0&&(w=E[p].length+w),x.point(E[p][w],h,u);case"MultiLineString":return _<0&&(_=E.length+_),w<0&&(w=E[_].length+w),x.point(E[_][w],h,u);case"MultiPolygon":return _<0&&(_=E.length+_),p<0&&(p=E[_].length+p),w<0&&(w=E[_][p].length-w),x.point(E[_][p][w],h,u)}throw new Error("geojson is invalid")}G.coordEach=f,G.coordReduce=M,G.propEach=T,G.propReduce=e,G.featureEach=a,G.featureReduce=i,G.coordAll=n,G.geomEach=r,G.geomReduce=v,G.flattenEach=s,G.flattenReduce=o,G.segmentEach=b,G.segmentReduce=g,G.lineEach=d,G.lineReduce=c,G.findSegment=m,G.findPoint=l},{"@turf/helpers":68}],70:[function(t,B,G){B.exports=x;function x(f){var M=0,T=0,e=0,a=0;return f.map(function(i){i=i.slice();var n=i[0],r=n.toUpperCase();if(n!=r)switch(i[0]=r,n){case"a":i[6]+=e,i[7]+=a;break;case"v":i[1]+=a;break;case"h":i[1]+=e;break;default:for(var v=1;v<i.length;)i[v++]+=e,i[v++]+=a}switch(r){case"Z":e=M,a=T;break;case"H":e=i[1];break;case"V":a=i[1];break;case"M":e=M=i[1],a=T=i[2];break;default:e=i[i.length-2],a=i[i.length-1]}return i})}},{}],71:[function(t,B,G){B.exports=x;function x(f,M){if(!f||f.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var T=Array(M*2),e=0;e<M;e++){for(var a=-1/0,i=1/0,n=e,r=f.length;n<r;n+=M)f[n]>a&&(a=f[n]),f[n]<i&&(i=f[n]);T[e]=i,T[M+e]=a}return T}},{}],72:[function(t,B,G){B.exports=function(x,f,M){if(typeof Array.prototype.findIndex=="function")return x.findIndex(f,M);if(typeof f!="function")throw new TypeError("predicate must be a function");var T=Object(x),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(f.call(M,T[a],a,T))return a;return-1}},{}],73:[function(t,B,G){var x=t("array-bounds");B.exports=f;function f(M,T,e){if(!M||M.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=x(M,T));for(var a=0;a<T;a++){var i=e[T+a],n=e[a],r=a,v=M.length;if(i===1/0&&n===-1/0)for(r=a;r<v;r+=T)M[r]=M[r]===i?1:M[r]===n?0:.5;else if(i===1/0)for(r=a;r<v;r+=T)M[r]=M[r]===i?1:0;else if(n===-1/0)for(r=a;r<v;r+=T)M[r]=M[r]===n?0:1;else{var s=i-n;for(r=a;r<v;r+=T)isNaN(M[r])||(M[r]=s===0?.5:(M[r]-n)/s)}}return M}},{"array-bounds":71}],74:[function(t,B,G){B.exports=function(f,M){var T=typeof f=="number",e=typeof M=="number";T&&!e?(M=f,f=0):!T&&!e&&(f=0,M=0),f=f|0,M=M|0;var a=M-f;if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),n=0,r=f;n<a;n++,r++)i[n]=r;return i}},{}],75:[function(t,B,G){(function(x){(function(){var f=t("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(S,P){if(S===P)return 0;for(var F=S.length,I=P.length,D=0,R=Math.min(F,I);D<R;++D)if(S[D]!==P[D]){F=S[D],I=P[D];break}return F<I?-1:I<F?1:0}function T(S){return x.Buffer&&typeof x.Buffer.isBuffer=="function"?x.Buffer.isBuffer(S):!!(S!=null&&S._isBuffer)}var e=t("util/"),a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,n=function(){return function(){}.name==="foo"}();function r(S){return Object.prototype.toString.call(S)}function v(S){return T(S)||typeof x.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(S):S?!!(S instanceof DataView||S.buffer&&S.buffer instanceof ArrayBuffer):!1}var s=B.exports=l,o=/\s*function\s+([^\(\s]*)\s*/;function b(S){if(!!e.isFunction(S)){if(n)return S.name;var P=S.toString(),F=P.match(o);return F&&F[1]}}s.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var F=P.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var I=new Error;if(I.stack){var D=I.stack,R=b(F),O=D.indexOf(`
`+R);if(O>=0){var z=D.indexOf(`
`,O+1);D=D.substring(z+1)}this.stack=D}}},e.inherits(s.AssertionError,Error);function g(S,P){return typeof S=="string"?S.length<P?S:S.slice(0,P):S}function d(S){if(n||!e.isFunction(S))return e.inspect(S);var P=b(S),F=P?": "+P:"";return"[Function"+F+"]"}function c(S){return g(d(S.actual),128)+" "+S.operator+" "+g(d(S.expected),128)}function m(S,P,F,I,D){throw new s.AssertionError({message:F,actual:S,expected:P,operator:I,stackStartFunction:D})}s.fail=m;function l(S,P){S||m(S,!0,P,"==",s.ok)}s.ok=l,s.equal=function(P,F,I){P!=F&&m(P,F,I,"==",s.equal)},s.notEqual=function(P,F,I){P==F&&m(P,F,I,"!=",s.notEqual)},s.deepEqual=function(P,F,I){y(P,F,!1)||m(P,F,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(P,F,I){y(P,F,!0)||m(P,F,I,"deepStrictEqual",s.deepStrictEqual)};function y(S,P,F,I){if(S===P)return!0;if(T(S)&&T(P))return M(S,P)===0;if(e.isDate(S)&&e.isDate(P))return S.getTime()===P.getTime();if(e.isRegExp(S)&&e.isRegExp(P))return S.source===P.source&&S.global===P.global&&S.multiline===P.multiline&&S.lastIndex===P.lastIndex&&S.ignoreCase===P.ignoreCase;if((S===null||typeof S!="object")&&(P===null||typeof P!="object"))return F?S===P:S==P;if(v(S)&&v(P)&&r(S)===r(P)&&!(S instanceof Float32Array||S instanceof Float64Array))return M(new Uint8Array(S.buffer),new Uint8Array(P.buffer))===0;if(T(S)!==T(P))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(S);return D!==-1&&D===I.expected.indexOf(P)?!0:(I.actual.push(S),I.expected.push(P),A(S,P,F,I))}function u(S){return Object.prototype.toString.call(S)=="[object Arguments]"}function A(S,P,F,I){if(S==null||P===null||P===void 0)return!1;if(e.isPrimitive(S)||e.isPrimitive(P))return S===P;if(F&&Object.getPrototypeOf(S)!==Object.getPrototypeOf(P))return!1;var D=u(S),R=u(P);if(D&&!R||!D&&R)return!1;if(D)return S=i.call(S),P=i.call(P),y(S,P,F);var O=E(S),z=E(P),H,Y;if(O.length!==z.length)return!1;for(O.sort(),z.sort(),Y=O.length-1;Y>=0;Y--)if(O[Y]!==z[Y])return!1;for(Y=O.length-1;Y>=0;Y--)if(H=O[Y],!y(S[H],P[H],F,I))return!1;return!0}s.notDeepEqual=function(P,F,I){y(P,F,!1)&&m(P,F,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=_;function _(S,P,F){y(S,P,!0)&&m(S,P,F,"notDeepStrictEqual",_)}s.strictEqual=function(P,F,I){P!==F&&m(P,F,I,"===",s.strictEqual)},s.notStrictEqual=function(P,F,I){P===F&&m(P,F,I,"!==",s.notStrictEqual)};function p(S,P){if(!S||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(S);try{if(S instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},S)===!0}function w(S){var P;try{S()}catch(F){P=F}return P}function h(S,P,F,I){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(I=F,F=null),D=w(P),I=(F&&F.name?" ("+F.name+").":".")+(I?" "+I:"."),S&&!D&&m(D,F,"Missing expected exception"+I);var R=typeof I=="string",O=!S&&e.isError(D),z=!S&&D&&!F;if((O&&R&&p(D,F)||z)&&m(D,F,"Got unwanted exception"+I),S&&D&&F&&!p(D,F)||!S&&D)throw D}s.throws=function(S,P,F){h(!0,S,P,F)},s.doesNotThrow=function(S,P,F){h(!1,S,P,F)},s.ifError=function(S){if(S)throw S};function L(S,P){S||m(S,!0,P,"==",L)}s.strict=f(L,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var E=Object.keys||function(S){var P=[];for(var F in S)a.call(S,F)&&P.push(F);return P}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(t,B,G){typeof Object.create=="function"?B.exports=function(f,M){f.super_=M,f.prototype=Object.create(M.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:B.exports=function(f,M){f.super_=M;var T=function(){};T.prototype=M.prototype,f.prototype=new T,f.prototype.constructor=f}},{}],77:[function(t,B,G){B.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},{}],78:[function(t,B,G){(function(x,f){(function(){var M=/%[sdj%]/g;G.format=function(z){if(!A(z)){for(var H=[],Y=0;Y<arguments.length;Y++)H.push(a(arguments[Y]));return H.join(" ")}for(var Y=1,ee=arguments,j=ee.length,X=String(z).replace(M,function(fe){if(fe==="%%")return"%";if(Y>=j)return fe;switch(fe){case"%s":return String(ee[Y++]);case"%d":return Number(ee[Y++]);case"%j":try{return JSON.stringify(ee[Y++])}catch{return"[Circular]"}default:return fe}}),ae=ee[Y];Y<j;ae=ee[++Y])l(ae)||!h(ae)?X+=" "+ae:X+=" "+a(ae);return X},G.deprecate=function(z,H){if(p(f.process))return function(){return G.deprecate(z,H).apply(this,arguments)};if(x.noDeprecation===!0)return z;var Y=!1;function ee(){if(!Y){if(x.throwDeprecation)throw new Error(H);x.traceDeprecation?console.trace(H):console.error(H),Y=!0}return z.apply(this,arguments)}return ee};var T={},e;G.debuglog=function(z){if(p(e)&&(e=x.env.NODE_DEBUG||""),z=z.toUpperCase(),!T[z])if(new RegExp("\\b"+z+"\\b","i").test(e)){var H=x.pid;T[z]=function(){var Y=G.format.apply(G,arguments);console.error("%s %d: %s",z,H,Y)}}else T[z]=function(){};return T[z]};function a(z,H){var Y={seen:[],stylize:n};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),m(H)?Y.showHidden=H:H&&G._extend(Y,H),p(Y.showHidden)&&(Y.showHidden=!1),p(Y.depth)&&(Y.depth=2),p(Y.colors)&&(Y.colors=!1),p(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=i),v(Y,z,Y.depth)}G.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(z,H){var Y=a.styles[H];return Y?"\x1B["+a.colors[Y][0]+"m"+z+"\x1B["+a.colors[Y][1]+"m":z}function n(z,H){return z}function r(z){var H={};return z.forEach(function(Y,ee){H[Y]=!0}),H}function v(z,H,Y){if(z.customInspect&&H&&S(H.inspect)&&H.inspect!==G.inspect&&!(H.constructor&&H.constructor.prototype===H)){var ee=H.inspect(Y,z);return A(ee)||(ee=v(z,ee,Y)),ee}var j=s(z,H);if(j)return j;var X=Object.keys(H),ae=r(X);if(z.showHidden&&(X=Object.getOwnPropertyNames(H)),E(H)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return o(H);if(X.length===0){if(S(H)){var fe=H.name?": "+H.name:"";return z.stylize("[Function"+fe+"]","special")}if(w(H))return z.stylize(RegExp.prototype.toString.call(H),"regexp");if(L(H))return z.stylize(Date.prototype.toString.call(H),"date");if(E(H))return o(H)}var K="",J=!1,U=["{","}"];if(c(H)&&(J=!0,U=["[","]"]),S(H)){var V=H.name?": "+H.name:"";K=" [Function"+V+"]"}if(w(H)&&(K=" "+RegExp.prototype.toString.call(H)),L(H)&&(K=" "+Date.prototype.toUTCString.call(H)),E(H)&&(K=" "+o(H)),X.length===0&&(!J||H.length==0))return U[0]+K+U[1];if(Y<0)return w(H)?z.stylize(RegExp.prototype.toString.call(H),"regexp"):z.stylize("[Object]","special");z.seen.push(H);var q;return J?q=b(z,H,Y,ae,X):q=X.map(function(re){return g(z,H,Y,ae,re,J)}),z.seen.pop(),d(q,K,U)}function s(z,H){if(p(H))return z.stylize("undefined","undefined");if(A(H)){var Y="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(Y,"string")}if(u(H))return z.stylize(""+H,"number");if(m(H))return z.stylize(""+H,"boolean");if(l(H))return z.stylize("null","null")}function o(z){return"["+Error.prototype.toString.call(z)+"]"}function b(z,H,Y,ee,j){for(var X=[],ae=0,fe=H.length;ae<fe;++ae)O(H,String(ae))?X.push(g(z,H,Y,ee,String(ae),!0)):X.push("");return j.forEach(function(K){K.match(/^\d+$/)||X.push(g(z,H,Y,ee,K,!0))}),X}function g(z,H,Y,ee,j,X){var ae,fe,K;if(K=Object.getOwnPropertyDescriptor(H,j)||{value:H[j]},K.get?K.set?fe=z.stylize("[Getter/Setter]","special"):fe=z.stylize("[Getter]","special"):K.set&&(fe=z.stylize("[Setter]","special")),O(ee,j)||(ae="["+j+"]"),fe||(z.seen.indexOf(K.value)<0?(l(Y)?fe=v(z,K.value,null):fe=v(z,K.value,Y-1),fe.indexOf(`
`)>-1&&(X?fe=fe.split(`
`).map(function(J){return"  "+J}).join(`
`).substr(2):fe=`
`+fe.split(`
`).map(function(J){return"   "+J}).join(`
`))):fe=z.stylize("[Circular]","special")),p(ae)){if(X&&j.match(/^\d+$/))return fe;ae=JSON.stringify(""+j),ae.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ae=ae.substr(1,ae.length-2),ae=z.stylize(ae,"name")):(ae=ae.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ae=z.stylize(ae,"string"))}return ae+": "+fe}function d(z,H,Y){var ee=z.reduce(function(j,X){return X.indexOf(`
`)>=0,j+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?Y[0]+(H===""?"":H+`
 `)+" "+z.join(`,
  `)+" "+Y[1]:Y[0]+H+" "+z.join(", ")+" "+Y[1]}function c(z){return Array.isArray(z)}G.isArray=c;function m(z){return typeof z=="boolean"}G.isBoolean=m;function l(z){return z===null}G.isNull=l;function y(z){return z==null}G.isNullOrUndefined=y;function u(z){return typeof z=="number"}G.isNumber=u;function A(z){return typeof z=="string"}G.isString=A;function _(z){return typeof z=="symbol"}G.isSymbol=_;function p(z){return z===void 0}G.isUndefined=p;function w(z){return h(z)&&F(z)==="[object RegExp]"}G.isRegExp=w;function h(z){return typeof z=="object"&&z!==null}G.isObject=h;function L(z){return h(z)&&F(z)==="[object Date]"}G.isDate=L;function E(z){return h(z)&&(F(z)==="[object Error]"||z instanceof Error)}G.isError=E;function S(z){return typeof z=="function"}G.isFunction=S;function P(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}G.isPrimitive=P,G.isBuffer=t("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function I(z){return z<10?"0"+z.toString(10):z.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var z=new Date,H=[I(z.getHours()),I(z.getMinutes()),I(z.getSeconds())].join(":");return[z.getDate(),D[z.getMonth()],H].join(" ")}G.log=function(){console.log("%s - %s",R(),G.format.apply(G,arguments))},G.inherits=t("inherits"),G._extend=function(z,H){if(!H||!h(H))return z;for(var Y=Object.keys(H),ee=Y.length;ee--;)z[Y[ee]]=H[Y[ee]];return z};function O(z,H){return Object.prototype.hasOwnProperty.call(z,H)}}).call(this)}).call(this,t("_process"),typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(t,B,G){G.byteLength=n,G.toByteArray=v,G.fromByteArray=b;for(var x=[],f=[],M=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)x[e]=T[e],f[T.charCodeAt(e)]=e;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function i(g){var d=g.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=g.indexOf("=");c===-1&&(c=d);var m=c===d?0:4-c%4;return[c,m]}function n(g){var d=i(g),c=d[0],m=d[1];return(c+m)*3/4-m}function r(g,d,c){return(d+c)*3/4-c}function v(g){var d,c=i(g),m=c[0],l=c[1],y=new M(r(g,m,l)),u=0,A=l>0?m-4:m,_;for(_=0;_<A;_+=4)d=f[g.charCodeAt(_)]<<18|f[g.charCodeAt(_+1)]<<12|f[g.charCodeAt(_+2)]<<6|f[g.charCodeAt(_+3)],y[u++]=d>>16&255,y[u++]=d>>8&255,y[u++]=d&255;return l===2&&(d=f[g.charCodeAt(_)]<<2|f[g.charCodeAt(_+1)]>>4,y[u++]=d&255),l===1&&(d=f[g.charCodeAt(_)]<<10|f[g.charCodeAt(_+1)]<<4|f[g.charCodeAt(_+2)]>>2,y[u++]=d>>8&255,y[u++]=d&255),y}function s(g){return x[g>>18&63]+x[g>>12&63]+x[g>>6&63]+x[g&63]}function o(g,d,c){for(var m,l=[],y=d;y<c;y+=3)m=(g[y]<<16&16711680)+(g[y+1]<<8&65280)+(g[y+2]&255),l.push(s(m));return l.join("")}function b(g){for(var d,c=g.length,m=c%3,l=[],y=16383,u=0,A=c-m;u<A;u+=y)l.push(o(g,u,u+y>A?A:u+y));return m===1?(d=g[c-1],l.push(x[d>>2]+x[d<<4&63]+"==")):m===2&&(d=(g[c-2]<<8)+g[c-1],l.push(x[d>>10]+x[d>>4&63]+x[d<<2&63]+"=")),l.join("")}},{}],80:[function(t,B,G){function x(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>=0?(o=b,s=b-1):v=b+1}return o}function f(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>0?(o=b,s=b-1):v=b+1}return o}function M(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<0?(o=b,v=b+1):s=b-1}return o}function T(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<=0?(o=b,v=b+1):s=b-1}return o}function e(i,n,r,v,s){for(;v<=s;){var o=v+s>>>1,b=i[o],g=r!==void 0?r(b,n):b-n;if(g===0)return o;g<=0?v=o+1:s=o-1}return-1}function a(i,n,r,v,s,o){return typeof r=="function"?o(i,n,r,v===void 0?0:v|0,s===void 0?i.length-1:s|0):o(i,n,void 0,r===void 0?0:r|0,v===void 0?i.length-1:v|0)}B.exports={ge:function(i,n,r,v,s){return a(i,n,r,v,s,x)},gt:function(i,n,r,v,s){return a(i,n,r,v,s,f)},lt:function(i,n,r,v,s){return a(i,n,r,v,s,M)},le:function(i,n,r,v,s){return a(i,n,r,v,s,T)},eq:function(i,n,r,v,s){return a(i,n,r,v,s,e)}}},{}],81:[function(t,B,G){var x=32;G.INT_BITS=x,G.INT_MAX=2147483647,G.INT_MIN=-1<<x-1,G.sign=function(T){return(T>0)-(T<0)},G.abs=function(T){var e=T>>x-1;return(T^e)-e},G.min=function(T,e){return e^(T^e)&-(T<e)},G.max=function(T,e){return T^(T^e)&-(T<e)},G.isPow2=function(T){return!(T&T-1)&&!!T},G.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},G.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},G.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function f(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}G.countTrailingZeros=f,G.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},G.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},G.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var M=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,i=e,n=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=a&1,--n;T[e]=i<<n&255}})(M),G.reverse=function(T){return M[T&255]<<24|M[T>>>8&255]<<16|M[T>>>16&255]<<8|M[T>>>24&255]},G.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},G.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},G.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},G.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},G.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>f(T)+1}},{}],82:[function(t,B,G){var x=t("clamp");B.exports=M;var f=1e20;function M(a,i){i||(i={});var n=i.cutoff==null?.25:i.cutoff,r=i.radius==null?8:i.radius,v=i.channel||0,s,o,b,g,d,c,m,l,y,u,A;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");s=i.width,o=i.height,g=a,i.stride?c=i.stride:c=Math.floor(a.length/s/o)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,m=l.getContext("2d"),s=l.width,o=l.height,y=m.getImageData(0,0,s,o),g=y.data,c=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,m=a,s=l.width,o=l.height,y=m.getImageData(0,0,s,o),g=y.data,c=4):window.ImageData&&a instanceof window.ImageData&&(y=a,s=a.width,o=a.height,g=y.data,c=4);if(b=Math.max(s,o),window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array)for(d=g,g=Array(s*o),u=0,A=d.length;u<A;u++)g[u]=d[u*c+v]/255;else if(c!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(s*o),p=Array(s*o),w=Array(b),h=Array(b),L=Array(b+1),E=Array(b);for(u=0,A=s*o;u<A;u++){var S=g[u];_[u]=S===1?0:S===0?f:Math.pow(Math.max(0,.5-S),2),p[u]=S===1?f:S===0?0:Math.pow(Math.max(0,S-.5),2)}T(_,s,o,w,h,E,L),T(p,s,o,w,h,E,L);var P=window.Float32Array?new Float32Array(s*o):new Array(s*o);for(u=0,A=s*o;u<A;u++)P[u]=x(1-((_[u]-p[u])/r+n),0,1);return P}function T(a,i,n,r,v,s,o){for(var b=0;b<i;b++){for(var g=0;g<n;g++)r[g]=a[g*i+b];for(e(r,v,s,o,n),g=0;g<n;g++)a[g*i+b]=v[g]}for(g=0;g<n;g++){for(b=0;b<i;b++)r[b]=a[g*i+b];for(e(r,v,s,o,i),b=0;b<i;b++)a[g*i+b]=Math.sqrt(v[b])}}function e(a,i,n,r,v){n[0]=0,r[0]=-f,r[1]=+f;for(var s=1,o=0;s<v;s++){for(var b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);b<=r[o];)o--,b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);o++,n[o]=s,r[o]=b,r[o+1]=+f}for(s=0,o=0;s<v;s++){for(;r[o+1]<s;)o++;i[s]=(s-n[o])*(s-n[o])+a[n[o]]}}},{clamp:86}],83:[function(t,B,G){},{}],84:[function(t,B,G){var x=typeof Reflect=="object"?Reflect:null,f=x&&typeof x.apply=="function"?x.apply:function(u,A,_){return Function.prototype.apply.call(u,A,_)},M;x&&typeof x.ownKeys=="function"?M=x.ownKeys:Object.getOwnPropertySymbols?M=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:M=function(u){return Object.getOwnPropertyNames(u)};function T(y){console&&console.warn&&console.warn(y)}var e=Number.isNaN||function(u){return u!==u};function a(){a.init.call(this)}B.exports=a,B.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function n(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(y){if(typeof y!="number"||y<0||e(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");i=y}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||e(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function r(y){return y._maxListeners===void 0?a.defaultMaxListeners:y._maxListeners}a.prototype.getMaxListeners=function(){return r(this)},a.prototype.emit=function(u){for(var A=[],_=1;_<arguments.length;_++)A.push(arguments[_]);var p=u==="error",w=this._events;if(w!==void 0)p=p&&w.error===void 0;else if(!p)return!1;if(p){var h;if(A.length>0&&(h=A[0]),h instanceof Error)throw h;var L=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw L.context=h,L}var E=w[u];if(E===void 0)return!1;if(typeof E=="function")f(E,this,A);else for(var S=E.length,P=d(E,S),_=0;_<S;++_)f(P[_],this,A);return!0};function v(y,u,A,_){var p,w,h;if(n(A),w=y._events,w===void 0?(w=y._events=Object.create(null),y._eventsCount=0):(w.newListener!==void 0&&(y.emit("newListener",u,A.listener?A.listener:A),w=y._events),h=w[u]),h===void 0)h=w[u]=A,++y._eventsCount;else if(typeof h=="function"?h=w[u]=_?[A,h]:[h,A]:_?h.unshift(A):h.push(A),p=r(y),p>0&&h.length>p&&!h.warned){h.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=y,L.type=u,L.count=h.length,T(L)}return y}a.prototype.addListener=function(u,A){return v(this,u,A,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(u,A){return v(this,u,A,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(y,u,A){var _={fired:!1,wrapFn:void 0,target:y,type:u,listener:A},p=s.bind(_);return p.listener=A,_.wrapFn=p,p}a.prototype.once=function(u,A){return n(A),this.on(u,o(this,u,A)),this},a.prototype.prependOnceListener=function(u,A){return n(A),this.prependListener(u,o(this,u,A)),this},a.prototype.removeListener=function(u,A){var _,p,w,h,L;if(n(A),p=this._events,p===void 0)return this;if(_=p[u],_===void 0)return this;if(_===A||_.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete p[u],p.removeListener&&this.emit("removeListener",u,_.listener||A));else if(typeof _!="function"){for(w=-1,h=_.length-1;h>=0;h--)if(_[h]===A||_[h].listener===A){L=_[h].listener,w=h;break}if(w<0)return this;w===0?_.shift():c(_,w),_.length===1&&(p[u]=_[0]),p.removeListener!==void 0&&this.emit("removeListener",u,L||A)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(u){var A,_,p;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[u]),this;if(arguments.length===0){var w=Object.keys(_),h;for(p=0;p<w.length;++p)h=w[p],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=_[u],typeof A=="function")this.removeListener(u,A);else if(A!==void 0)for(p=A.length-1;p>=0;p--)this.removeListener(u,A[p]);return this};function b(y,u,A){var _=y._events;if(_===void 0)return[];var p=_[u];return p===void 0?[]:typeof p=="function"?A?[p.listener||p]:[p]:A?m(p):d(p,p.length)}a.prototype.listeners=function(u){return b(this,u,!0)},a.prototype.rawListeners=function(u){return b(this,u,!1)},a.listenerCount=function(y,u){return typeof y.listenerCount=="function"?y.listenerCount(u):g.call(y,u)},a.prototype.listenerCount=g;function g(y){var u=this._events;if(u!==void 0){var A=u[y];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function d(y,u){for(var A=new Array(u),_=0;_<u;++_)A[_]=y[_];return A}function c(y,u){for(;u+1<y.length;u++)y[u]=y[u+1];y.pop()}function m(y){for(var u=new Array(y.length),A=0;A<u.length;++A)u[A]=y[A].listener||y[A];return u}function l(y,u){return new Promise(function(A,_){function p(){w!==void 0&&y.removeListener("error",w),A([].slice.call(arguments))}var w;u!=="error"&&(w=function(L){y.removeListener(u,p),_(L)},y.once("error",w)),y.once(u,p)})}},{}],85:[function(t,B,G){(function(x){(function(){var f=t("base64-js"),M=t("ieee754");G.Buffer=i,G.SlowBuffer=m,G.INSPECT_MAX_BYTES=50;var T=2147483647;G.kMaxLength=T,i.TYPED_ARRAY_SUPPORT=e(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var oe=new Uint8Array(1);return oe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},oe.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function a(oe){if(oe>T)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var ne=new Uint8Array(oe);return ne.__proto__=i.prototype,ne}function i(oe,ne,se){if(typeof oe=="number"){if(typeof ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(oe)}return n(oe,ne,se)}typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function n(oe,ne,se){if(typeof oe=="string")return o(oe,ne);if(ArrayBuffer.isView(oe))return b(oe);if(oe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(Q(oe,ArrayBuffer)||oe&&Q(oe.buffer,ArrayBuffer))return g(oe,ne,se);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=oe.valueOf&&oe.valueOf();if(_e!=null&&_e!==oe)return i.from(_e,ne,se);var ue=d(oe);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return i.from(oe[Symbol.toPrimitive]("string"),ne,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}i.from=function(oe,ne,se){return n(oe,ne,se)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function r(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function v(oe,ne,se){return r(oe),oe<=0?a(oe):ne!==void 0?typeof se=="string"?a(oe).fill(ne,se):a(oe).fill(ne):a(oe)}i.alloc=function(oe,ne,se){return v(oe,ne,se)};function s(oe){return r(oe),a(oe<0?0:c(oe)|0)}i.allocUnsafe=function(oe){return s(oe)},i.allocUnsafeSlow=function(oe){return s(oe)};function o(oe,ne){if((typeof ne!="string"||ne==="")&&(ne="utf8"),!i.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var se=l(oe,ne)|0,_e=a(se),ue=_e.write(oe,ne);return ue!==se&&(_e=_e.slice(0,ue)),_e}function b(oe){for(var ne=oe.length<0?0:c(oe.length)|0,se=a(ne),_e=0;_e<ne;_e+=1)se[_e]=oe[_e]&255;return se}function g(oe,ne,se){if(ne<0||oe.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<ne+(se||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return ne===void 0&&se===void 0?_e=new Uint8Array(oe):se===void 0?_e=new Uint8Array(oe,ne):_e=new Uint8Array(oe,ne,se),_e.__proto__=i.prototype,_e}function d(oe){if(i.isBuffer(oe)){var ne=c(oe.length)|0,se=a(ne);return se.length===0||oe.copy(se,0,0,ne),se}if(oe.length!==void 0)return typeof oe.length!="number"||ie(oe.length)?a(0):b(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return b(oe.data)}function c(oe){if(oe>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return oe|0}function m(oe){return+oe!=oe&&(oe=0),i.alloc(+oe)}i.isBuffer=function(ne){return ne!=null&&ne._isBuffer===!0&&ne!==i.prototype},i.compare=function(ne,se){if(Q(ne,Uint8Array)&&(ne=i.from(ne,ne.offset,ne.byteLength)),Q(se,Uint8Array)&&(se=i.from(se,se.offset,se.byteLength)),!i.isBuffer(ne)||!i.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===se)return 0;for(var _e=ne.length,ue=se.length,ge=0,xe=Math.min(_e,ue);ge<xe;++ge)if(ne[ge]!==se[ge]){_e=ne[ge],ue=se[ge];break}return _e<ue?-1:ue<_e?1:0},i.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(ne,se){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(ne.length===0)return i.alloc(0);var _e;if(se===void 0)for(se=0,_e=0;_e<ne.length;++_e)se+=ne[_e].length;var ue=i.allocUnsafe(se),ge=0;for(_e=0;_e<ne.length;++_e){var xe=ne[_e];if(Q(xe,Uint8Array)&&(xe=i.from(xe)),!i.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(ue,ge),ge+=xe.length}return ue};function l(oe,ne){if(i.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||Q(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);var se=oe.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&se===0)return 0;for(var ue=!1;;)switch(ne){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return U(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se*2;case"hex":return se>>>1;case"base64":return re(oe).length;default:if(ue)return _e?-1:U(oe).length;ne=(""+ne).toLowerCase(),ue=!0}}i.byteLength=l;function y(oe,ne,se){var _e=!1;if((ne===void 0||ne<0)&&(ne=0),ne>this.length||((se===void 0||se>this.length)&&(se=this.length),se<=0)||(se>>>=0,ne>>>=0,se<=ne))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return z(this,ne,se);case"utf8":case"utf-8":return F(this,ne,se);case"ascii":return R(this,ne,se);case"latin1":case"binary":return O(this,ne,se);case"base64":return P(this,ne,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,ne,se);default:if(_e)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),_e=!0}}i.prototype._isBuffer=!0;function u(oe,ne,se){var _e=oe[ne];oe[ne]=oe[se],oe[se]=_e}i.prototype.swap16=function(){var ne=this.length;if(ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var se=0;se<ne;se+=2)u(this,se,se+1);return this},i.prototype.swap32=function(){var ne=this.length;if(ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var se=0;se<ne;se+=4)u(this,se,se+3),u(this,se+1,se+2);return this},i.prototype.swap64=function(){var ne=this.length;if(ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var se=0;se<ne;se+=8)u(this,se,se+7),u(this,se+1,se+6),u(this,se+2,se+5),u(this,se+3,se+4);return this},i.prototype.toString=function(){var ne=this.length;return ne===0?"":arguments.length===0?F(this,0,ne):y.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(ne){if(!i.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne?!0:i.compare(this,ne)===0},i.prototype.inspect=function(){var ne="",se=G.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ne+=" ... "),"<Buffer "+ne+">"},i.prototype.compare=function(ne,se,_e,ue,ge){if(Q(ne,Uint8Array)&&(ne=i.from(ne,ne.offset,ne.byteLength)),!i.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(se===void 0&&(se=0),_e===void 0&&(_e=ne?ne.length:0),ue===void 0&&(ue=0),ge===void 0&&(ge=this.length),se<0||_e>ne.length||ue<0||ge>this.length)throw new RangeError("out of range index");if(ue>=ge&&se>=_e)return 0;if(ue>=ge)return-1;if(se>=_e)return 1;if(se>>>=0,_e>>>=0,ue>>>=0,ge>>>=0,this===ne)return 0;for(var xe=ge-ue,ye=_e-se,be=Math.min(xe,ye),Se=this.slice(ue,ge),Re=ne.slice(se,_e),Ve=0;Ve<be;++Ve)if(Se[Ve]!==Re[Ve]){xe=Se[Ve],ye=Re[Ve];break}return xe<ye?-1:ye<xe?1:0};function A(oe,ne,se,_e,ue){if(oe.length===0)return-1;if(typeof se=="string"?(_e=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,ie(se)&&(se=ue?0:oe.length-1),se<0&&(se=oe.length+se),se>=oe.length){if(ue)return-1;se=oe.length-1}else if(se<0)if(ue)se=0;else return-1;if(typeof ne=="string"&&(ne=i.from(ne,_e)),i.isBuffer(ne))return ne.length===0?-1:_(oe,ne,se,_e,ue);if(typeof ne=="number")return ne=ne&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(oe,ne,se):Uint8Array.prototype.lastIndexOf.call(oe,ne,se):_(oe,[ne],se,_e,ue);throw new TypeError("val must be string, number or Buffer")}function _(oe,ne,se,_e,ue){var ge=1,xe=oe.length,ye=ne.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(oe.length<2||ne.length<2)return-1;ge=2,xe/=2,ye/=2,se/=2}function be(Ce,Ze){return ge===1?Ce[Ze]:Ce.readUInt16BE(Ze*ge)}var Se;if(ue){var Re=-1;for(Se=se;Se<xe;Se++)if(be(oe,Se)===be(ne,Re===-1?0:Se-Re)){if(Re===-1&&(Re=Se),Se-Re+1===ye)return Re*ge}else Re!==-1&&(Se-=Se-Re),Re=-1}else for(se+ye>xe&&(se=xe-ye),Se=se;Se>=0;Se--){for(var Ve=!0,Ae=0;Ae<ye;Ae++)if(be(oe,Se+Ae)!==be(ne,Ae)){Ve=!1;break}if(Ve)return Se}return-1}i.prototype.includes=function(ne,se,_e){return this.indexOf(ne,se,_e)!==-1},i.prototype.indexOf=function(ne,se,_e){return A(this,ne,se,_e,!0)},i.prototype.lastIndexOf=function(ne,se,_e){return A(this,ne,se,_e,!1)};function p(oe,ne,se,_e){se=Number(se)||0;var ue=oe.length-se;_e?(_e=Number(_e),_e>ue&&(_e=ue)):_e=ue;var ge=ne.length;_e>ge/2&&(_e=ge/2);for(var xe=0;xe<_e;++xe){var ye=parseInt(ne.substr(xe*2,2),16);if(ie(ye))return xe;oe[se+xe]=ye}return xe}function w(oe,ne,se,_e){return Z(U(ne,oe.length-se),oe,se,_e)}function h(oe,ne,se,_e){return Z(V(ne),oe,se,_e)}function L(oe,ne,se,_e){return h(oe,ne,se,_e)}function E(oe,ne,se,_e){return Z(re(ne),oe,se,_e)}function S(oe,ne,se,_e){return Z(q(ne,oe.length-se),oe,se,_e)}i.prototype.write=function(ne,se,_e,ue){if(se===void 0)ue="utf8",_e=this.length,se=0;else if(_e===void 0&&typeof se=="string")ue=se,_e=this.length,se=0;else if(isFinite(se))se=se>>>0,isFinite(_e)?(_e=_e>>>0,ue===void 0&&(ue="utf8")):(ue=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ge=this.length-se;if((_e===void 0||_e>ge)&&(_e=ge),ne.length>0&&(_e<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");for(var xe=!1;;)switch(ue){case"hex":return p(this,ne,se,_e);case"utf8":case"utf-8":return w(this,ne,se,_e);case"ascii":return h(this,ne,se,_e);case"latin1":case"binary":return L(this,ne,se,_e);case"base64":return E(this,ne,se,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,ne,se,_e);default:if(xe)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),xe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(oe,ne,se){return ne===0&&se===oe.length?f.fromByteArray(oe):f.fromByteArray(oe.slice(ne,se))}function F(oe,ne,se){se=Math.min(oe.length,se);for(var _e=[],ue=ne;ue<se;){var ge=oe[ue],xe=null,ye=ge>239?4:ge>223?3:ge>191?2:1;if(ue+ye<=se){var be,Se,Re,Ve;switch(ye){case 1:ge<128&&(xe=ge);break;case 2:be=oe[ue+1],(be&192)===128&&(Ve=(ge&31)<<6|be&63,Ve>127&&(xe=Ve));break;case 3:be=oe[ue+1],Se=oe[ue+2],(be&192)===128&&(Se&192)===128&&(Ve=(ge&15)<<12|(be&63)<<6|Se&63,Ve>2047&&(Ve<55296||Ve>57343)&&(xe=Ve));break;case 4:be=oe[ue+1],Se=oe[ue+2],Re=oe[ue+3],(be&192)===128&&(Se&192)===128&&(Re&192)===128&&(Ve=(ge&15)<<18|(be&63)<<12|(Se&63)<<6|Re&63,Ve>65535&&Ve<1114112&&(xe=Ve))}}xe===null?(xe=65533,ye=1):xe>65535&&(xe-=65536,_e.push(xe>>>10&1023|55296),xe=56320|xe&1023),_e.push(xe),ue+=ye}return D(_e)}var I=4096;function D(oe){var ne=oe.length;if(ne<=I)return String.fromCharCode.apply(String,oe);for(var se="",_e=0;_e<ne;)se+=String.fromCharCode.apply(String,oe.slice(_e,_e+=I));return se}function R(oe,ne,se){var _e="";se=Math.min(oe.length,se);for(var ue=ne;ue<se;++ue)_e+=String.fromCharCode(oe[ue]&127);return _e}function O(oe,ne,se){var _e="";se=Math.min(oe.length,se);for(var ue=ne;ue<se;++ue)_e+=String.fromCharCode(oe[ue]);return _e}function z(oe,ne,se){var _e=oe.length;(!ne||ne<0)&&(ne=0),(!se||se<0||se>_e)&&(se=_e);for(var ue="",ge=ne;ge<se;++ge)ue+=J(oe[ge]);return ue}function H(oe,ne,se){for(var _e=oe.slice(ne,se),ue="",ge=0;ge<_e.length;ge+=2)ue+=String.fromCharCode(_e[ge]+_e[ge+1]*256);return ue}i.prototype.slice=function(ne,se){var _e=this.length;ne=~~ne,se=se===void 0?_e:~~se,ne<0?(ne+=_e,ne<0&&(ne=0)):ne>_e&&(ne=_e),se<0?(se+=_e,se<0&&(se=0)):se>_e&&(se=_e),se<ne&&(se=ne);var ue=this.subarray(ne,se);return ue.__proto__=i.prototype,ue};function Y(oe,ne,se){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+ne>se)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(ne,se,_e){ne=ne>>>0,se=se>>>0,_e||Y(ne,se,this.length);for(var ue=this[ne],ge=1,xe=0;++xe<se&&(ge*=256);)ue+=this[ne+xe]*ge;return ue},i.prototype.readUIntBE=function(ne,se,_e){ne=ne>>>0,se=se>>>0,_e||Y(ne,se,this.length);for(var ue=this[ne+--se],ge=1;se>0&&(ge*=256);)ue+=this[ne+--se]*ge;return ue},i.prototype.readUInt8=function(ne,se){return ne=ne>>>0,se||Y(ne,1,this.length),this[ne]},i.prototype.readUInt16LE=function(ne,se){return ne=ne>>>0,se||Y(ne,2,this.length),this[ne]|this[ne+1]<<8},i.prototype.readUInt16BE=function(ne,se){return ne=ne>>>0,se||Y(ne,2,this.length),this[ne]<<8|this[ne+1]},i.prototype.readUInt32LE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+this[ne+3]*16777216},i.prototype.readUInt32BE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),this[ne]*16777216+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},i.prototype.readIntLE=function(ne,se,_e){ne=ne>>>0,se=se>>>0,_e||Y(ne,se,this.length);for(var ue=this[ne],ge=1,xe=0;++xe<se&&(ge*=256);)ue+=this[ne+xe]*ge;return ge*=128,ue>=ge&&(ue-=Math.pow(2,8*se)),ue},i.prototype.readIntBE=function(ne,se,_e){ne=ne>>>0,se=se>>>0,_e||Y(ne,se,this.length);for(var ue=se,ge=1,xe=this[ne+--ue];ue>0&&(ge*=256);)xe+=this[ne+--ue]*ge;return ge*=128,xe>=ge&&(xe-=Math.pow(2,8*se)),xe},i.prototype.readInt8=function(ne,se){return ne=ne>>>0,se||Y(ne,1,this.length),this[ne]&128?(255-this[ne]+1)*-1:this[ne]},i.prototype.readInt16LE=function(ne,se){ne=ne>>>0,se||Y(ne,2,this.length);var _e=this[ne]|this[ne+1]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt16BE=function(ne,se){ne=ne>>>0,se||Y(ne,2,this.length);var _e=this[ne+1]|this[ne]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt32LE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},i.prototype.readInt32BE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},i.prototype.readFloatLE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),M.read(this,ne,!0,23,4)},i.prototype.readFloatBE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),M.read(this,ne,!1,23,4)},i.prototype.readDoubleLE=function(ne,se){return ne=ne>>>0,se||Y(ne,8,this.length),M.read(this,ne,!0,52,8)},i.prototype.readDoubleBE=function(ne,se){return ne=ne>>>0,se||Y(ne,8,this.length),M.read(this,ne,!1,52,8)};function ee(oe,ne,se,_e,ue,ge){if(!i.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>ue||ne<ge)throw new RangeError('"value" argument is out of bounds');if(se+_e>oe.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(ne,se,_e,ue){if(ne=+ne,se=se>>>0,_e=_e>>>0,!ue){var ge=Math.pow(2,8*_e)-1;ee(this,ne,se,_e,ge,0)}var xe=1,ye=0;for(this[se]=ne&255;++ye<_e&&(xe*=256);)this[se+ye]=ne/xe&255;return se+_e},i.prototype.writeUIntBE=function(ne,se,_e,ue){if(ne=+ne,se=se>>>0,_e=_e>>>0,!ue){var ge=Math.pow(2,8*_e)-1;ee(this,ne,se,_e,ge,0)}var xe=_e-1,ye=1;for(this[se+xe]=ne&255;--xe>=0&&(ye*=256);)this[se+xe]=ne/ye&255;return se+_e},i.prototype.writeUInt8=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,1,255,0),this[se]=ne&255,se+1},i.prototype.writeUInt16LE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,2,65535,0),this[se]=ne&255,this[se+1]=ne>>>8,se+2},i.prototype.writeUInt16BE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,2,65535,0),this[se]=ne>>>8,this[se+1]=ne&255,se+2},i.prototype.writeUInt32LE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,4,4294967295,0),this[se+3]=ne>>>24,this[se+2]=ne>>>16,this[se+1]=ne>>>8,this[se]=ne&255,se+4},i.prototype.writeUInt32BE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,4,4294967295,0),this[se]=ne>>>24,this[se+1]=ne>>>16,this[se+2]=ne>>>8,this[se+3]=ne&255,se+4},i.prototype.writeIntLE=function(ne,se,_e,ue){if(ne=+ne,se=se>>>0,!ue){var ge=Math.pow(2,8*_e-1);ee(this,ne,se,_e,ge-1,-ge)}var xe=0,ye=1,be=0;for(this[se]=ne&255;++xe<_e&&(ye*=256);)ne<0&&be===0&&this[se+xe-1]!==0&&(be=1),this[se+xe]=(ne/ye>>0)-be&255;return se+_e},i.prototype.writeIntBE=function(ne,se,_e,ue){if(ne=+ne,se=se>>>0,!ue){var ge=Math.pow(2,8*_e-1);ee(this,ne,se,_e,ge-1,-ge)}var xe=_e-1,ye=1,be=0;for(this[se+xe]=ne&255;--xe>=0&&(ye*=256);)ne<0&&be===0&&this[se+xe+1]!==0&&(be=1),this[se+xe]=(ne/ye>>0)-be&255;return se+_e},i.prototype.writeInt8=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,1,127,-128),ne<0&&(ne=255+ne+1),this[se]=ne&255,se+1},i.prototype.writeInt16LE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,2,32767,-32768),this[se]=ne&255,this[se+1]=ne>>>8,se+2},i.prototype.writeInt16BE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,2,32767,-32768),this[se]=ne>>>8,this[se+1]=ne&255,se+2},i.prototype.writeInt32LE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,4,2147483647,-2147483648),this[se]=ne&255,this[se+1]=ne>>>8,this[se+2]=ne>>>16,this[se+3]=ne>>>24,se+4},i.prototype.writeInt32BE=function(ne,se,_e){return ne=+ne,se=se>>>0,_e||ee(this,ne,se,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[se]=ne>>>24,this[se+1]=ne>>>16,this[se+2]=ne>>>8,this[se+3]=ne&255,se+4};function j(oe,ne,se,_e,ue,ge){if(se+_e>oe.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function X(oe,ne,se,_e,ue){return ne=+ne,se=se>>>0,ue||j(oe,ne,se,4),M.write(oe,ne,se,_e,23,4),se+4}i.prototype.writeFloatLE=function(ne,se,_e){return X(this,ne,se,!0,_e)},i.prototype.writeFloatBE=function(ne,se,_e){return X(this,ne,se,!1,_e)};function ae(oe,ne,se,_e,ue){return ne=+ne,se=se>>>0,ue||j(oe,ne,se,8),M.write(oe,ne,se,_e,52,8),se+8}i.prototype.writeDoubleLE=function(ne,se,_e){return ae(this,ne,se,!0,_e)},i.prototype.writeDoubleBE=function(ne,se,_e){return ae(this,ne,se,!1,_e)},i.prototype.copy=function(ne,se,_e,ue){if(!i.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!ue&&ue!==0&&(ue=this.length),se>=ne.length&&(se=ne.length),se||(se=0),ue>0&&ue<_e&&(ue=_e),ue===_e||ne.length===0||this.length===0)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),ne.length-se<ue-_e&&(ue=ne.length-se+_e);var ge=ue-_e;if(this===ne&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(se,_e,ue);else if(this===ne&&_e<se&&se<ue)for(var xe=ge-1;xe>=0;--xe)ne[xe+se]=this[xe+_e];else Uint8Array.prototype.set.call(ne,this.subarray(_e,ue),se);return ge},i.prototype.fill=function(ne,se,_e,ue){if(typeof ne=="string"){if(typeof se=="string"?(ue=se,se=0,_e=this.length):typeof _e=="string"&&(ue=_e,_e=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!i.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(ne.length===1){var ge=ne.charCodeAt(0);(ue==="utf8"&&ge<128||ue==="latin1")&&(ne=ge)}}else typeof ne=="number"&&(ne=ne&255);if(se<0||this.length<se||this.length<_e)throw new RangeError("Out of range index");if(_e<=se)return this;se=se>>>0,_e=_e===void 0?this.length:_e>>>0,ne||(ne=0);var xe;if(typeof ne=="number")for(xe=se;xe<_e;++xe)this[xe]=ne;else{var ye=i.isBuffer(ne)?ne:i.from(ne,ue),be=ye.length;if(be===0)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(xe=0;xe<_e-se;++xe)this[xe+se]=ye[xe%be]}return this};var fe=/[^+/0-9A-Za-z-_]/g;function K(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(fe,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function J(oe){return oe<16?"0"+oe.toString(16):oe.toString(16)}function U(oe,ne){ne=ne||1/0;for(var se,_e=oe.length,ue=null,ge=[],xe=0;xe<_e;++xe){if(se=oe.charCodeAt(xe),se>55295&&se<57344){if(!ue){if(se>56319){(ne-=3)>-1&&ge.push(239,191,189);continue}else if(xe+1===_e){(ne-=3)>-1&&ge.push(239,191,189);continue}ue=se;continue}if(se<56320){(ne-=3)>-1&&ge.push(239,191,189),ue=se;continue}se=(ue-55296<<10|se-56320)+65536}else ue&&(ne-=3)>-1&&ge.push(239,191,189);if(ue=null,se<128){if((ne-=1)<0)break;ge.push(se)}else if(se<2048){if((ne-=2)<0)break;ge.push(se>>6|192,se&63|128)}else if(se<65536){if((ne-=3)<0)break;ge.push(se>>12|224,se>>6&63|128,se&63|128)}else if(se<1114112){if((ne-=4)<0)break;ge.push(se>>18|240,se>>12&63|128,se>>6&63|128,se&63|128)}else throw new Error("Invalid code point")}return ge}function V(oe){for(var ne=[],se=0;se<oe.length;++se)ne.push(oe.charCodeAt(se)&255);return ne}function q(oe,ne){for(var se,_e,ue,ge=[],xe=0;xe<oe.length&&!((ne-=2)<0);++xe)se=oe.charCodeAt(xe),_e=se>>8,ue=se%256,ge.push(ue),ge.push(_e);return ge}function re(oe){return f.toByteArray(K(oe))}function Z(oe,ne,se,_e){for(var ue=0;ue<_e&&!(ue+se>=ne.length||ue>=oe.length);++ue)ne[ue+se]=oe[ue];return ue}function Q(oe,ne){return oe instanceof ne||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===ne.name}function ie(oe){return oe!==oe}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(t,B,G){B.exports=x;function x(f,M,T){return M<T?f<M?M:f>T?T:f:f<T?T:f>M?M:f}},{}],87:[function(t,B,G){var x=t("clamp");B.exports=f,B.exports.to=f,B.exports.from=M;function f(T,e){e==null&&(e=!0);var a=T[0],i=T[1],n=T[2],r=T[3];r==null&&(r=e?1:255),e&&(a*=255,i*=255,n*=255,r*=255),a=x(a,0,255)&255,i=x(i,0,255)&255,n=x(n,0,255)&255,r=x(r,0,255)&255;var v=a*16777216+(i<<16)+(n<<8)+r;return v}function M(T,e){T=+T;var a=T>>>24,i=(T&16711680)>>>16,n=(T&65280)>>>8,r=T&255;return e===!1?[a,i,n,r]:[a/255,i/255,n/255,r/255]}},{clamp:86}],88:[function(t,B,G){B.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(t,B,G){var x=t("color-rgba"),f=t("clamp"),M=t("dtype");B.exports=function(a,i){(i==="float"||!i)&&(i="array"),i==="uint"&&(i="uint8"),i==="uint_clamped"&&(i="uint8_clamped");var n=M(i),r=new n(4),v=i!=="uint8"&&i!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=x(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:255,v&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(v?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:1):(r[0]=f(Math.floor(a[0]*255),0,255),r[1]=f(Math.floor(a[1]*255),0,255),r[2]=f(Math.floor(a[2]*255),0,255),r[3]=a[3]==null?255:f(Math.floor(a[3]*255),0,255)),r)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(t,B,G){(function(x){(function(){var f=t("color-name"),M=t("is-plain-obj"),T=t("defined");B.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(i){var n,r=[],v=1,s;if(typeof i=="string")if(f[i])r=f[i].slice(),s="rgb";else if(i==="transparent")v=0,s="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),b=o.length,g=b<=4;v=1,g?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],b===4&&(v=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],b===8&&(v=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var d=n[1],c=d==="rgb",o=d.replace(/a$/,"");s=o;var b=o==="cmyk"?4:o==="gray"?1:3;r=n[2].trim().split(/\s*,\s*/).map(function(u,A){if(/%$/.test(u))return A===b?parseFloat(u)/100:o==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(o[A]==="h"){if(/deg$/.test(u))return parseFloat(u);if(e[u]!==void 0)return e[u]}return parseFloat(u)}),d===o&&r.push(1),v=c||r[b]===void 0?1:r[b],r=r.slice(0,b)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(r=i.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(i))s="rgb",r=[i>>>16,(i&65280)>>>8,i&255];else if(M(i)){var m=T(i.r,i.red,i.R,null);m!==null?(s="rgb",r=[m,T(i.g,i.green,i.G),T(i.b,i.blue,i.B)]):(s="hsl",r=[T(i.h,i.hue,i.H),T(i.s,i.saturation,i.S),T(i.l,i.lightness,i.L,i.b,i.brightness)]),v=T(i.a,i.alpha,i.opacity,1),i.opacity!=null&&(v/=100)}else(Array.isArray(i)||x.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(r=[i[0],i[1],i[2]],s="rgb",v=i.length===4?i[3]:1);return{space:s,values:r,alpha:v}}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(t,B,G){var x=t("color-parse"),f=t("color-space/hsl"),M=t("clamp");B.exports=function(e){var a,i=x(e);return i.space?(a=Array(3),a[0]=M(i.values[0],0,255),a[1]=M(i.values[1],0,255),a[2]=M(i.values[2],0,255),i.space[0]==="h"&&(a=f.rgb(a)),a.push(M(i.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(t,B,G){var x=t("./rgb");B.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(f){var M=f[0]/360,T=f[1]/100,e=f[2]/100,a,i,n,r,v;if(T===0)return v=e*255,[v,v,v];e<.5?i=e*(1+T):i=e+T-e*T,a=2*e-i,r=[0,0,0];for(var s=0;s<3;s++)n=M+1/3*-(s-1),n<0?n++:n>1&&n--,6*n<1?v=a+(i-a)*6*n:2*n<1?v=i:3*n<2?v=a+(i-a)*(2/3-n)*6:v=a,r[s]=v*255;return r}},x.hsl=function(f){var M=f[0]/255,T=f[1]/255,e=f[2]/255,a=Math.min(M,T,e),i=Math.max(M,T,e),n=i-a,r,v,s;return i===a?r=0:M===i?r=(T-e)/n:T===i?r=2+(e-M)/n:e===i&&(r=4+(M-T)/n),r=Math.min(r*60,360),r<0&&(r+=360),s=(a+i)/2,i===a?v=0:s<=.5?v=n/(i+a):v=n/(2-i-a),[r,v*100,s*100]}},{"./rgb":93}],93:[function(t,B,G){B.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(t,B,G){B.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(t,B,G){B.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(t,B,G){B.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(t,B,G){B.exports=["normal","italic","oblique"]},{}],98:[function(t,B,G){B.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(t,B,G){B.exports={parse:t("./parse"),stringify:t("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(t,B,G){var x=t("css-font-size-keywords");B.exports={isSize:function(M){return/^[\d\.]/.test(M)||M.indexOf("/")!==-1||x.indexOf(M)!==-1}}},{"css-font-size-keywords":95}],101:[function(t,B,G){var x=t("unquote"),f=t("css-global-keywords"),M=t("css-system-font-keywords"),T=t("css-font-weight-keywords"),e=t("css-font-style-keywords"),a=t("css-font-stretch-keywords"),i=t("string-split-by"),n=t("./lib/util").isSize;B.exports=v;var r=v.cache={};function v(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(r[o])return r[o];if(o==="")throw new Error("Cannot parse an empty string.");if(M.indexOf(o)!==-1)return r[o]={system:o};for(var b={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=i(o,/\s+/),d;d=g.shift();){if(f.indexOf(d)!==-1)return["style","variant","weight","stretch"].forEach(function(m){b[m]=d}),r[o]=b;if(e.indexOf(d)!==-1){b.style=d;continue}if(d==="normal"||d==="small-caps"){b.variant=d;continue}if(a.indexOf(d)!==-1){b.stretch=d;continue}if(T.indexOf(d)!==-1){b.weight=d;continue}if(n(d)){var c=i(d,"/");if(b.size=c[0],c[1]!=null?b.lineHeight=s(c[1]):g[0]==="/"&&(g.shift(),b.lineHeight=s(g.shift())),!g.length)throw new Error("Missing required font-family.");return b.family=i(g.join(" "),/\s*,\s*/).map(x),r[o]=b}throw new Error("Unknown or unsupported font token: "+d)}throw new Error("Missing required font-size.")}function s(o){var b=parseFloat(o);return b.toString()===o?b:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(t,B,G){var x=t("pick-by-alias"),f=t("./lib/util").isSize,M=o(t("css-global-keywords")),T=o(t("css-system-font-keywords")),e=o(t("css-font-weight-keywords")),a=o(t("css-font-style-keywords")),i=o(t("css-font-stretch-keywords")),n={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},v={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};B.exports=function(g){if(g=x(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),g.system)return g.system&&s(g.system,T),g.system;if(s(g.style,a),s(g.variant,n),s(g.weight,e),s(g.stretch,i),g.size==null&&(g.size=v.size),typeof g.size=="number"&&(g.size+="px"),!f)throw Error("Bad size value `"+g.size+"`");g.family||(g.family=v.family),Array.isArray(g.family)&&(g.family.length||(g.family=[v.family]),g.family=g.family.map(function(c){return r[c]?c:'"'+c+'"'}).join(", "));var d=[];return d.push(g.style),g.variant!==g.style&&d.push(g.variant),g.weight!==g.variant&&g.weight!==g.style&&d.push(g.weight),g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&d.push(g.stretch),d.push(g.size+(g.lineHeight==null||g.lineHeight==="normal"||g.lineHeight+""=="1"?"":"/"+g.lineHeight)),d.push(g.family),d.filter(Boolean).join(" ")};function s(b,g){if(b&&!g[b]&&!M[b])throw Error("Unknown keyword `"+b+"`");return b}function o(b){for(var g={},d=0;d<b.length;d++)g[b[d]]=1;return g}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(t,B,G){B.exports=["inherit","initial","unset"]},{}],104:[function(t,B,G){B.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(t,B,G){var x=t("type/value/is"),f=t("type/value/ensure"),M=t("type/plain-function/ensure"),T=t("es5-ext/object/copy"),e=t("es5-ext/object/normalize-options"),a=t("es5-ext/object/map"),i=Function.prototype.bind,n=Object.defineProperty,r=Object.prototype.hasOwnProperty,v;v=function(s,o,b){var g=f(o)&&M(o.value),d;return d=T(o),delete d.writable,delete d.value,d.get=function(){return!b.overwriteDefinition&&r.call(this,s)?g:(o.value=i.call(g,b.resolveContext?b.resolveContext(this):this),n(this,s,o),this[s])},d},B.exports=function(s){var o=e(arguments[1]);return x(o.resolveContext)&&M(o.resolveContext),a(s,function(b,g){return v(g,b,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(t,B,G){var x=t("type/value/is"),f=t("type/plain-function/is"),M=t("es5-ext/object/assign"),T=t("es5-ext/object/normalize-options"),e=t("es5-ext/string/#/contains"),a=B.exports=function(i,n){var r,v,s,o,b;return arguments.length<2||typeof i!="string"?(o=n,n=i,i=null):o=arguments[2],x(i)?(r=e.call(i,"c"),v=e.call(i,"e"),s=e.call(i,"w")):(r=s=!0,v=!1),b={value:n,configurable:r,enumerable:v,writable:s},o?M(T(o),b):b};a.gs=function(i,n,r){var v,s,o,b;return typeof i!="string"?(o=r,r=n,n=i,i=null):o=arguments[3],x(n)?f(n)?x(r)?f(r)||(o=r,r=void 0):r=void 0:(o=n,n=r=void 0):n=void 0,x(i)?(v=e.call(i,"c"),s=e.call(i,"e")):(v=!0,s=!1),b={get:n,set:r,configurable:v,enumerable:s},o?M(T(o),b):b}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(t,B,G){(function(x,f){f(typeof G=="object"&&typeof B<"u"?G:x.d3=x.d3||{})})(this,function(x){function f(U,V){return U<V?-1:U>V?1:U>=V?0:NaN}function M(U){return U.length===1&&(U=T(U)),{left:function(V,q,re,Z){for(re==null&&(re=0),Z==null&&(Z=V.length);re<Z;){var Q=re+Z>>>1;U(V[Q],q)<0?re=Q+1:Z=Q}return re},right:function(V,q,re,Z){for(re==null&&(re=0),Z==null&&(Z=V.length);re<Z;){var Q=re+Z>>>1;U(V[Q],q)>0?Z=Q:re=Q+1}return re}}}function T(U){return function(V,q){return f(U(V),q)}}var e=M(f),a=e.right,i=e.left;function n(U,V){V==null&&(V=r);for(var q=0,re=U.length-1,Z=U[0],Q=new Array(re<0?0:re);q<re;)Q[q]=V(Z,Z=U[++q]);return Q}function r(U,V){return[U,V]}function v(U,V,q){var re=U.length,Z=V.length,Q=new Array(re*Z),ie,oe,ne,se;for(q==null&&(q=r),ie=ne=0;ie<re;++ie)for(se=U[ie],oe=0;oe<Z;++oe,++ne)Q[ne]=q(se,V[oe]);return Q}function s(U,V){return V<U?-1:V>U?1:V>=U?0:NaN}function o(U){return U===null?NaN:+U}function b(U,V){var q=U.length,re=0,Z=-1,Q=0,ie,oe,ne=0;if(V==null)for(;++Z<q;)isNaN(ie=o(U[Z]))||(oe=ie-Q,Q+=oe/++re,ne+=oe*(ie-Q));else for(;++Z<q;)isNaN(ie=o(V(U[Z],Z,U)))||(oe=ie-Q,Q+=oe/++re,ne+=oe*(ie-Q));if(re>1)return ne/(re-1)}function g(U,V){var q=b(U,V);return q&&Math.sqrt(q)}function d(U,V){var q=U.length,re=-1,Z,Q,ie;if(V==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=ie=Z;++re<q;)(Z=U[re])!=null&&(Q>Z&&(Q=Z),ie<Z&&(ie=Z))}else for(;++re<q;)if((Z=V(U[re],re,U))!=null&&Z>=Z)for(Q=ie=Z;++re<q;)(Z=V(U[re],re,U))!=null&&(Q>Z&&(Q=Z),ie<Z&&(ie=Z));return[Q,ie]}var c=Array.prototype,m=c.slice,l=c.map;function y(U){return function(){return U}}function u(U){return U}function A(U,V,q){U=+U,V=+V,q=(Z=arguments.length)<2?(V=U,U=0,1):Z<3?1:+q;for(var re=-1,Z=Math.max(0,Math.ceil((V-U)/q))|0,Q=new Array(Z);++re<Z;)Q[re]=U+re*q;return Q}var _=Math.sqrt(50),p=Math.sqrt(10),w=Math.sqrt(2);function h(U,V,q){var re,Z=-1,Q,ie,oe;if(V=+V,U=+U,q=+q,U===V&&q>0)return[U];if((re=V<U)&&(Q=U,U=V,V=Q),(oe=L(U,V,q))===0||!isFinite(oe))return[];if(oe>0)for(U=Math.ceil(U/oe),V=Math.floor(V/oe),ie=new Array(Q=Math.ceil(V-U+1));++Z<Q;)ie[Z]=(U+Z)*oe;else for(U=Math.floor(U*oe),V=Math.ceil(V*oe),ie=new Array(Q=Math.ceil(U-V+1));++Z<Q;)ie[Z]=(U-Z)/oe;return re&&ie.reverse(),ie}function L(U,V,q){var re=(V-U)/Math.max(0,q),Z=Math.floor(Math.log(re)/Math.LN10),Q=re/Math.pow(10,Z);return Z>=0?(Q>=_?10:Q>=p?5:Q>=w?2:1)*Math.pow(10,Z):-Math.pow(10,-Z)/(Q>=_?10:Q>=p?5:Q>=w?2:1)}function E(U,V,q){var re=Math.abs(V-U)/Math.max(0,q),Z=Math.pow(10,Math.floor(Math.log(re)/Math.LN10)),Q=re/Z;return Q>=_?Z*=10:Q>=p?Z*=5:Q>=w&&(Z*=2),V<U?-Z:Z}function S(U){return Math.ceil(Math.log(U.length)/Math.LN2)+1}function P(){var U=u,V=d,q=S;function re(Z){var Q,ie=Z.length,oe,ne=new Array(ie);for(Q=0;Q<ie;++Q)ne[Q]=U(Z[Q],Q,Z);var se=V(ne),_e=se[0],ue=se[1],ge=q(ne,_e,ue);Array.isArray(ge)||(ge=E(_e,ue,ge),ge=A(Math.ceil(_e/ge)*ge,ue,ge));for(var xe=ge.length;ge[0]<=_e;)ge.shift(),--xe;for(;ge[xe-1]>ue;)ge.pop(),--xe;var ye=new Array(xe+1),be;for(Q=0;Q<=xe;++Q)be=ye[Q]=[],be.x0=Q>0?ge[Q-1]:_e,be.x1=Q<xe?ge[Q]:ue;for(Q=0;Q<ie;++Q)oe=ne[Q],_e<=oe&&oe<=ue&&ye[a(ge,oe,0,xe)].push(Z[Q]);return ye}return re.value=function(Z){return arguments.length?(U=typeof Z=="function"?Z:y(Z),re):U},re.domain=function(Z){return arguments.length?(V=typeof Z=="function"?Z:y([Z[0],Z[1]]),re):V},re.thresholds=function(Z){return arguments.length?(q=typeof Z=="function"?Z:Array.isArray(Z)?y(m.call(Z)):y(Z),re):q},re}function F(U,V,q){if(q==null&&(q=o),!!(re=U.length)){if((V=+V)<=0||re<2)return+q(U[0],0,U);if(V>=1)return+q(U[re-1],re-1,U);var re,Z=(re-1)*V,Q=Math.floor(Z),ie=+q(U[Q],Q,U),oe=+q(U[Q+1],Q+1,U);return ie+(oe-ie)*(Z-Q)}}function I(U,V,q){return U=l.call(U,o).sort(f),Math.ceil((q-V)/(2*(F(U,.75)-F(U,.25))*Math.pow(U.length,-1/3)))}function D(U,V,q){return Math.ceil((q-V)/(3.5*g(U)*Math.pow(U.length,-1/3)))}function R(U,V){var q=U.length,re=-1,Z,Q;if(V==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=U[re])!=null&&Z>Q&&(Q=Z)}else for(;++re<q;)if((Z=V(U[re],re,U))!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=V(U[re],re,U))!=null&&Z>Q&&(Q=Z);return Q}function O(U,V){var q=U.length,re=q,Z=-1,Q,ie=0;if(V==null)for(;++Z<q;)isNaN(Q=o(U[Z]))?--re:ie+=Q;else for(;++Z<q;)isNaN(Q=o(V(U[Z],Z,U)))?--re:ie+=Q;if(re)return ie/re}function z(U,V){var q=U.length,re=-1,Z,Q=[];if(V==null)for(;++re<q;)isNaN(Z=o(U[re]))||Q.push(Z);else for(;++re<q;)isNaN(Z=o(V(U[re],re,U)))||Q.push(Z);return F(Q.sort(f),.5)}function H(U){for(var V=U.length,q,re=-1,Z=0,Q,ie;++re<V;)Z+=U[re].length;for(Q=new Array(Z);--V>=0;)for(ie=U[V],q=ie.length;--q>=0;)Q[--Z]=ie[q];return Q}function Y(U,V){var q=U.length,re=-1,Z,Q;if(V==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=U[re])!=null&&Q>Z&&(Q=Z)}else for(;++re<q;)if((Z=V(U[re],re,U))!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=V(U[re],re,U))!=null&&Q>Z&&(Q=Z);return Q}function ee(U,V){for(var q=V.length,re=new Array(q);q--;)re[q]=U[V[q]];return re}function j(U,V){if(!!(q=U.length)){var q,re=0,Z=0,Q,ie=U[Z];for(V==null&&(V=f);++re<q;)(V(Q=U[re],ie)<0||V(ie,ie)!==0)&&(ie=Q,Z=re);if(V(ie,ie)===0)return Z}}function X(U,V,q){for(var re=(q==null?U.length:q)-(V=V==null?0:+V),Z,Q;re;)Q=Math.random()*re--|0,Z=U[re+V],U[re+V]=U[Q+V],U[Q+V]=Z;return U}function ae(U,V){var q=U.length,re=-1,Z,Q=0;if(V==null)for(;++re<q;)(Z=+U[re])&&(Q+=Z);else for(;++re<q;)(Z=+V(U[re],re,U))&&(Q+=Z);return Q}function fe(U){if(!(Q=U.length))return[];for(var V=-1,q=Y(U,K),re=new Array(q);++V<q;)for(var Z=-1,Q,ie=re[V]=new Array(Q);++Z<Q;)ie[Z]=U[Z][V];return re}function K(U){return U.length}function J(){return fe(arguments)}x.bisect=a,x.bisectRight=a,x.bisectLeft=i,x.ascending=f,x.bisector=M,x.cross=v,x.descending=s,x.deviation=g,x.extent=d,x.histogram=P,x.thresholdFreedmanDiaconis=I,x.thresholdScott=D,x.thresholdSturges=S,x.max=R,x.mean=O,x.median=z,x.merge=H,x.min=Y,x.pairs=n,x.permute=ee,x.quantile=F,x.range=A,x.scan=j,x.shuffle=X,x.sum=ae,x.ticks=h,x.tickIncrement=L,x.tickStep=E,x.transpose=fe,x.variance=b,x.zip=J,Object.defineProperty(x,"__esModule",{value:!0})})},{}],108:[function(t,B,G){(function(x,f){f(typeof G=="object"&&typeof B<"u"?G:x.d3=x.d3||{})})(this,function(x){var f="$";function M(){}M.prototype=T.prototype={constructor:M,has:function(c){return f+c in this},get:function(c){return this[f+c]},set:function(c,m){return this[f+c]=m,this},remove:function(c){var m=f+c;return m in this&&delete this[m]},clear:function(){for(var c in this)c[0]===f&&delete this[c]},keys:function(){var c=[];for(var m in this)m[0]===f&&c.push(m.slice(1));return c},values:function(){var c=[];for(var m in this)m[0]===f&&c.push(this[m]);return c},entries:function(){var c=[];for(var m in this)m[0]===f&&c.push({key:m.slice(1),value:this[m]});return c},size:function(){var c=0;for(var m in this)m[0]===f&&++c;return c},empty:function(){for(var c in this)if(c[0]===f)return!1;return!0},each:function(c){for(var m in this)m[0]===f&&c(this[m],m.slice(1),this)}};function T(c,m){var l=new M;if(c instanceof M)c.each(function(p,w){l.set(w,p)});else if(Array.isArray(c)){var y=-1,u=c.length,A;if(m==null)for(;++y<u;)l.set(y,c[y]);else for(;++y<u;)l.set(m(A=c[y],y,c),A)}else if(c)for(var _ in c)l.set(_,c[_]);return l}function e(){var c=[],m=[],l,y,u;function A(p,w,h,L){if(w>=c.length)return l!=null&&p.sort(l),y!=null?y(p):p;for(var E=-1,S=p.length,P=c[w++],F,I,D=T(),R,O=h();++E<S;)(R=D.get(F=P(I=p[E])+""))?R.push(I):D.set(F,[I]);return D.each(function(z,H){L(O,H,A(z,w,h,L))}),O}function _(p,w){if(++w>c.length)return p;var h,L=m[w-1];return y!=null&&w>=c.length?h=p.entries():(h=[],p.each(function(E,S){h.push({key:S,values:_(E,w)})})),L!=null?h.sort(function(E,S){return L(E.key,S.key)}):h}return u={object:function(p){return A(p,0,a,i)},map:function(p){return A(p,0,n,r)},entries:function(p){return _(A(p,0,n,r),0)},key:function(p){return c.push(p),u},sortKeys:function(p){return m[c.length-1]=p,u},sortValues:function(p){return l=p,u},rollup:function(p){return y=p,u}}}function a(){return{}}function i(c,m,l){c[m]=l}function n(){return T()}function r(c,m,l){c.set(m,l)}function v(){}var s=T.prototype;v.prototype=o.prototype={constructor:v,has:s.has,add:function(c){return c+="",this[f+c]=c,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function o(c,m){var l=new v;if(c instanceof v)c.each(function(A){l.add(A)});else if(c){var y=-1,u=c.length;if(m==null)for(;++y<u;)l.add(c[y]);else for(;++y<u;)l.add(m(c[y],y,c))}return l}function b(c){var m=[];for(var l in c)m.push(l);return m}function g(c){var m=[];for(var l in c)m.push(c[l]);return m}function d(c){var m=[];for(var l in c)m.push({key:l,value:c[l]});return m}x.nest=e,x.set=o,x.map=T,x.keys=b,x.values=g,x.entries=d,Object.defineProperty(x,"__esModule",{value:!0})})},{}],109:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){function f(Ie,Ge,dt){Ie.prototype=Ge.prototype=dt,dt.constructor=Ie}function M(Ie,Ge){var dt=Object.create(Ie.prototype);for(var Rt in Ge)dt[Rt]=Ge[Rt];return dt}function T(){}var e=.7,a=1/e,i="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),o=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),b=new RegExp("^rgba\\("+[i,i,i,n]+"\\)$"),g=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),d=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),c=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f(T,A,{copy:function(Ie){return Object.assign(new this.constructor,this,Ie)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:y,formatRgb:u,toString:u});function l(){return this.rgb().formatHex()}function y(){return I(this).formatHsl()}function u(){return this.rgb().formatRgb()}function A(Ie){var Ge,dt;return Ie=(Ie+"").trim().toLowerCase(),(Ge=v.exec(Ie))?(dt=Ge[1].length,Ge=parseInt(Ge[1],16),dt===6?_(Ge):dt===3?new L(Ge>>8&15|Ge>>4&240,Ge>>4&15|Ge&240,(Ge&15)<<4|Ge&15,1):dt===8?p(Ge>>24&255,Ge>>16&255,Ge>>8&255,(Ge&255)/255):dt===4?p(Ge>>12&15|Ge>>8&240,Ge>>8&15|Ge>>4&240,Ge>>4&15|Ge&240,((Ge&15)<<4|Ge&15)/255):null):(Ge=s.exec(Ie))?new L(Ge[1],Ge[2],Ge[3],1):(Ge=o.exec(Ie))?new L(Ge[1]*255/100,Ge[2]*255/100,Ge[3]*255/100,1):(Ge=b.exec(Ie))?p(Ge[1],Ge[2],Ge[3],Ge[4]):(Ge=g.exec(Ie))?p(Ge[1]*255/100,Ge[2]*255/100,Ge[3]*255/100,Ge[4]):(Ge=d.exec(Ie))?F(Ge[1],Ge[2]/100,Ge[3]/100,1):(Ge=c.exec(Ie))?F(Ge[1],Ge[2]/100,Ge[3]/100,Ge[4]):m.hasOwnProperty(Ie)?_(m[Ie]):Ie==="transparent"?new L(NaN,NaN,NaN,0):null}function _(Ie){return new L(Ie>>16&255,Ie>>8&255,Ie&255,1)}function p(Ie,Ge,dt,Rt){return Rt<=0&&(Ie=Ge=dt=NaN),new L(Ie,Ge,dt,Rt)}function w(Ie){return Ie instanceof T||(Ie=A(Ie)),Ie?(Ie=Ie.rgb(),new L(Ie.r,Ie.g,Ie.b,Ie.opacity)):new L}function h(Ie,Ge,dt,Rt){return arguments.length===1?w(Ie):new L(Ie,Ge,dt,Rt==null?1:Rt)}function L(Ie,Ge,dt,Rt){this.r=+Ie,this.g=+Ge,this.b=+dt,this.opacity=+Rt}f(L,h,M(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:S,toString:S}));function E(){return"#"+P(this.r)+P(this.g)+P(this.b)}function S(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ie===1?")":", "+Ie+")")}function P(Ie){return Ie=Math.max(0,Math.min(255,Math.round(Ie)||0)),(Ie<16?"0":"")+Ie.toString(16)}function F(Ie,Ge,dt,Rt){return Rt<=0?Ie=Ge=dt=NaN:dt<=0||dt>=1?Ie=Ge=NaN:Ge<=0&&(Ie=NaN),new R(Ie,Ge,dt,Rt)}function I(Ie){if(Ie instanceof R)return new R(Ie.h,Ie.s,Ie.l,Ie.opacity);if(Ie instanceof T||(Ie=A(Ie)),!Ie)return new R;if(Ie instanceof R)return Ie;Ie=Ie.rgb();var Ge=Ie.r/255,dt=Ie.g/255,Rt=Ie.b/255,Qt=Math.min(Ge,dt,Rt),Bt=Math.max(Ge,dt,Rt),Ct=NaN,Kt=Bt-Qt,Ot=(Bt+Qt)/2;return Kt?(Ge===Bt?Ct=(dt-Rt)/Kt+(dt<Rt)*6:dt===Bt?Ct=(Rt-Ge)/Kt+2:Ct=(Ge-dt)/Kt+4,Kt/=Ot<.5?Bt+Qt:2-Bt-Qt,Ct*=60):Kt=Ot>0&&Ot<1?0:Ct,new R(Ct,Kt,Ot,Ie.opacity)}function D(Ie,Ge,dt,Rt){return arguments.length===1?I(Ie):new R(Ie,Ge,dt,Rt==null?1:Rt)}function R(Ie,Ge,dt,Rt){this.h=+Ie,this.s=+Ge,this.l=+dt,this.opacity=+Rt}f(R,D,M(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=this.h%360+(this.h<0)*360,Ge=isNaN(Ie)||isNaN(this.s)?0:this.s,dt=this.l,Rt=dt+(dt<.5?dt:1-dt)*Ge,Qt=2*dt-Rt;return new L(O(Ie>=240?Ie-240:Ie+120,Qt,Rt),O(Ie,Qt,Rt),O(Ie<120?Ie+240:Ie-120,Qt,Rt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ie===1?")":", "+Ie+")")}}));function O(Ie,Ge,dt){return(Ie<60?Ge+(dt-Ge)*Ie/60:Ie<180?dt:Ie<240?Ge+(dt-Ge)*(240-Ie)/60:Ge)*255}var z=Math.PI/180,H=180/Math.PI,Y=18,ee=.96422,j=1,X=.82521,ae=4/29,fe=6/29,K=3*fe*fe,J=fe*fe*fe;function U(Ie){if(Ie instanceof re)return new re(Ie.l,Ie.a,Ie.b,Ie.opacity);if(Ie instanceof ue)return ge(Ie);Ie instanceof L||(Ie=w(Ie));var Ge=oe(Ie.r),dt=oe(Ie.g),Rt=oe(Ie.b),Qt=Z((.2225045*Ge+.7168786*dt+.0606169*Rt)/j),Bt,Ct;return Ge===dt&&dt===Rt?Bt=Ct=Qt:(Bt=Z((.4360747*Ge+.3850649*dt+.1430804*Rt)/ee),Ct=Z((.0139322*Ge+.0971045*dt+.7141733*Rt)/X)),new re(116*Qt-16,500*(Bt-Qt),200*(Qt-Ct),Ie.opacity)}function V(Ie,Ge){return new re(Ie,0,0,Ge==null?1:Ge)}function q(Ie,Ge,dt,Rt){return arguments.length===1?U(Ie):new re(Ie,Ge,dt,Rt==null?1:Rt)}function re(Ie,Ge,dt,Rt){this.l=+Ie,this.a=+Ge,this.b=+dt,this.opacity=+Rt}f(re,q,M(T,{brighter:function(Ie){return new re(this.l+Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},darker:function(Ie){return new re(this.l-Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},rgb:function(){var Ie=(this.l+16)/116,Ge=isNaN(this.a)?Ie:Ie+this.a/500,dt=isNaN(this.b)?Ie:Ie-this.b/200;return Ge=ee*Q(Ge),Ie=j*Q(Ie),dt=X*Q(dt),new L(ie(3.1338561*Ge-1.6168667*Ie-.4906146*dt),ie(-.9787684*Ge+1.9161415*Ie+.033454*dt),ie(.0719453*Ge-.2289914*Ie+1.4052427*dt),this.opacity)}}));function Z(Ie){return Ie>J?Math.pow(Ie,1/3):Ie/K+ae}function Q(Ie){return Ie>fe?Ie*Ie*Ie:K*(Ie-ae)}function ie(Ie){return 255*(Ie<=.0031308?12.92*Ie:1.055*Math.pow(Ie,1/2.4)-.055)}function oe(Ie){return(Ie/=255)<=.04045?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4)}function ne(Ie){if(Ie instanceof ue)return new ue(Ie.h,Ie.c,Ie.l,Ie.opacity);if(Ie instanceof re||(Ie=U(Ie)),Ie.a===0&&Ie.b===0)return new ue(NaN,0<Ie.l&&Ie.l<100?0:NaN,Ie.l,Ie.opacity);var Ge=Math.atan2(Ie.b,Ie.a)*H;return new ue(Ge<0?Ge+360:Ge,Math.sqrt(Ie.a*Ie.a+Ie.b*Ie.b),Ie.l,Ie.opacity)}function se(Ie,Ge,dt,Rt){return arguments.length===1?ne(Ie):new ue(dt,Ge,Ie,Rt==null?1:Rt)}function _e(Ie,Ge,dt,Rt){return arguments.length===1?ne(Ie):new ue(Ie,Ge,dt,Rt==null?1:Rt)}function ue(Ie,Ge,dt,Rt){this.h=+Ie,this.c=+Ge,this.l=+dt,this.opacity=+Rt}function ge(Ie){if(isNaN(Ie.h))return new re(Ie.l,0,0,Ie.opacity);var Ge=Ie.h*z;return new re(Ie.l,Math.cos(Ge)*Ie.c,Math.sin(Ge)*Ie.c,Ie.opacity)}f(ue,_e,M(T,{brighter:function(Ie){return new ue(this.h,this.c,this.l+Y*(Ie==null?1:Ie),this.opacity)},darker:function(Ie){return new ue(this.h,this.c,this.l-Y*(Ie==null?1:Ie),this.opacity)},rgb:function(){return ge(this).rgb()}}));var xe=-.14861,ye=1.78277,be=-.29227,Se=-.90649,Re=1.97294,Ve=Re*Se,Ae=Re*ye,Ce=ye*be-Se*xe;function Ze(Ie){if(Ie instanceof ze)return new ze(Ie.h,Ie.s,Ie.l,Ie.opacity);Ie instanceof L||(Ie=w(Ie));var Ge=Ie.r/255,dt=Ie.g/255,Rt=Ie.b/255,Qt=(Ce*Rt+Ve*Ge-Ae*dt)/(Ce+Ve-Ae),Bt=Rt-Qt,Ct=(Re*(dt-Qt)-be*Bt)/Se,Kt=Math.sqrt(Ct*Ct+Bt*Bt)/(Re*Qt*(1-Qt)),Ot=Kt?Math.atan2(Ct,Bt)*H-120:NaN;return new ze(Ot<0?Ot+360:Ot,Kt,Qt,Ie.opacity)}function Ye(Ie,Ge,dt,Rt){return arguments.length===1?Ze(Ie):new ze(Ie,Ge,dt,Rt==null?1:Rt)}function ze(Ie,Ge,dt,Rt){this.h=+Ie,this.s=+Ge,this.l=+dt,this.opacity=+Rt}f(ze,Ye,M(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=isNaN(this.h)?0:(this.h+120)*z,Ge=+this.l,dt=isNaN(this.s)?0:this.s*Ge*(1-Ge),Rt=Math.cos(Ie),Qt=Math.sin(Ie);return new L(255*(Ge+dt*(xe*Rt+ye*Qt)),255*(Ge+dt*(be*Rt+Se*Qt)),255*(Ge+dt*(Re*Rt)),this.opacity)}})),x.color=A,x.cubehelix=Ye,x.gray=V,x.hcl=_e,x.hsl=D,x.lab=q,x.lch=se,x.rgb=h,Object.defineProperty(x,"__esModule",{value:!0})})},{}],110:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){var f={value:function(){}};function M(){for(var n=0,r=arguments.length,v={},s;n<r;++n){if(!(s=arguments[n]+"")||s in v||/[\s.]/.test(s))throw new Error("illegal type: "+s);v[s]=[]}return new T(v)}function T(n){this._=n}function e(n,r){return n.trim().split(/^|\s+/).map(function(v){var s="",o=v.indexOf(".");if(o>=0&&(s=v.slice(o+1),v=v.slice(0,o)),v&&!r.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:s}})}T.prototype=M.prototype={constructor:T,on:function(n,r){var v=this._,s=e(n+"",v),o,b=-1,g=s.length;if(arguments.length<2){for(;++b<g;)if((o=(n=s[b]).type)&&(o=a(v[o],n.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++b<g;)if(o=(n=s[b]).type)v[o]=i(v[o],n.name,r);else if(r==null)for(o in v)v[o]=i(v[o],n.name,null);return this},copy:function(){var n={},r=this._;for(var v in r)n[v]=r[v].slice();return new T(n)},call:function(n,r){if((o=arguments.length-2)>0)for(var v=new Array(o),s=0,o,b;s<o;++s)v[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(b=this._[n],s=0,o=b.length;s<o;++s)b[s].value.apply(r,v)},apply:function(n,r,v){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],o=0,b=s.length;o<b;++o)s[o].value.apply(r,v)}};function a(n,r){for(var v=0,s=n.length,o;v<s;++v)if((o=n[v]).name===r)return o.value}function i(n,r,v){for(var s=0,o=n.length;s<o;++s)if(n[s].name===r){n[s]=f,n=n.slice(0,s).concat(n.slice(s+1));break}return v!=null&&n.push({name:r,value:v}),n}x.dispatch=M,Object.defineProperty(x,"__esModule",{value:!0})})},{}],111:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):f(x.d3=x.d3||{},x.d3,x.d3,x.d3,x.d3)})(this,function(x,f,M,T,e){function a(w,h){var L;w==null&&(w=0),h==null&&(h=0);function E(){var S,P=L.length,F,I=0,D=0;for(S=0;S<P;++S)F=L[S],I+=F.x,D+=F.y;for(I=I/P-w,D=D/P-h,S=0;S<P;++S)F=L[S],F.x-=I,F.y-=D}return E.initialize=function(S){L=S},E.x=function(S){return arguments.length?(w=+S,E):w},E.y=function(S){return arguments.length?(h=+S,E):h},E}function i(w){return function(){return w}}function n(){return(Math.random()-.5)*1e-6}function r(w){return w.x+w.vx}function v(w){return w.y+w.vy}function s(w){var h,L,E=1,S=1;typeof w!="function"&&(w=i(w==null?1:+w));function P(){for(var D,R=h.length,O,z,H,Y,ee,j,X=0;X<S;++X)for(O=f.quadtree(h,r,v).visitAfter(F),D=0;D<R;++D)z=h[D],ee=L[z.index],j=ee*ee,H=z.x+z.vx,Y=z.y+z.vy,O.visit(ae);function ae(fe,K,J,U,V){var q=fe.data,re=fe.r,Z=ee+re;if(q){if(q.index>z.index){var Q=H-q.x-q.vx,ie=Y-q.y-q.vy,oe=Q*Q+ie*ie;oe<Z*Z&&(Q===0&&(Q=n(),oe+=Q*Q),ie===0&&(ie=n(),oe+=ie*ie),oe=(Z-(oe=Math.sqrt(oe)))/oe*E,z.vx+=(Q*=oe)*(Z=(re*=re)/(j+re)),z.vy+=(ie*=oe)*Z,q.vx-=Q*(Z=1-Z),q.vy-=ie*Z)}return}return K>H+Z||U<H-Z||J>Y+Z||V<Y-Z}}function F(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!h){var D,R=h.length,O;for(L=new Array(R),D=0;D<R;++D)O=h[D],L[O.index]=+w(O,D,h)}}return P.initialize=function(D){h=D,I()},P.iterations=function(D){return arguments.length?(S=+D,P):S},P.strength=function(D){return arguments.length?(E=+D,P):E},P.radius=function(D){return arguments.length?(w=typeof D=="function"?D:i(+D),I(),P):w},P}function o(w){return w.index}function b(w,h){var L=w.get(h);if(!L)throw new Error("missing: "+h);return L}function g(w){var h=o,L=O,E,S=i(30),P,F,I,D,R=1;w==null&&(w=[]);function O(j){return 1/Math.min(I[j.source.index],I[j.target.index])}function z(j){for(var X=0,ae=w.length;X<R;++X)for(var fe=0,K,J,U,V,q,re,Z;fe<ae;++fe)K=w[fe],J=K.source,U=K.target,V=U.x+U.vx-J.x-J.vx||n(),q=U.y+U.vy-J.y-J.vy||n(),re=Math.sqrt(V*V+q*q),re=(re-P[fe])/re*j*E[fe],V*=re,q*=re,U.vx-=V*(Z=D[fe]),U.vy-=q*Z,J.vx+=V*(Z=1-Z),J.vy+=q*Z}function H(){if(!!F){var j,X=F.length,ae=w.length,fe=M.map(F,h),K;for(j=0,I=new Array(X);j<ae;++j)K=w[j],K.index=j,typeof K.source!="object"&&(K.source=b(fe,K.source)),typeof K.target!="object"&&(K.target=b(fe,K.target)),I[K.source.index]=(I[K.source.index]||0)+1,I[K.target.index]=(I[K.target.index]||0)+1;for(j=0,D=new Array(ae);j<ae;++j)K=w[j],D[j]=I[K.source.index]/(I[K.source.index]+I[K.target.index]);E=new Array(ae),Y(),P=new Array(ae),ee()}}function Y(){if(!!F)for(var j=0,X=w.length;j<X;++j)E[j]=+L(w[j],j,w)}function ee(){if(!!F)for(var j=0,X=w.length;j<X;++j)P[j]=+S(w[j],j,w)}return z.initialize=function(j){F=j,H()},z.links=function(j){return arguments.length?(w=j,H(),z):w},z.id=function(j){return arguments.length?(h=j,z):h},z.iterations=function(j){return arguments.length?(R=+j,z):R},z.strength=function(j){return arguments.length?(L=typeof j=="function"?j:i(+j),Y(),z):L},z.distance=function(j){return arguments.length?(S=typeof j=="function"?j:i(+j),ee(),z):S},z}function d(w){return w.x}function c(w){return w.y}var m=10,l=Math.PI*(3-Math.sqrt(5));function y(w){var h,L=1,E=.001,S=1-Math.pow(E,1/300),P=0,F=.6,I=M.map(),D=e.timer(O),R=T.dispatch("tick","end");w==null&&(w=[]);function O(){z(),R.call("tick",h),L<E&&(D.stop(),R.call("end",h))}function z(ee){var j,X=w.length,ae;ee===void 0&&(ee=1);for(var fe=0;fe<ee;++fe)for(L+=(P-L)*S,I.each(function(K){K(L)}),j=0;j<X;++j)ae=w[j],ae.fx==null?ae.x+=ae.vx*=F:(ae.x=ae.fx,ae.vx=0),ae.fy==null?ae.y+=ae.vy*=F:(ae.y=ae.fy,ae.vy=0);return h}function H(){for(var ee=0,j=w.length,X;ee<j;++ee){if(X=w[ee],X.index=ee,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var ae=m*Math.sqrt(ee),fe=ee*l;X.x=ae*Math.cos(fe),X.y=ae*Math.sin(fe)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function Y(ee){return ee.initialize&&ee.initialize(w),ee}return H(),h={tick:z,restart:function(){return D.restart(O),h},stop:function(){return D.stop(),h},nodes:function(ee){return arguments.length?(w=ee,H(),I.each(Y),h):w},alpha:function(ee){return arguments.length?(L=+ee,h):L},alphaMin:function(ee){return arguments.length?(E=+ee,h):E},alphaDecay:function(ee){return arguments.length?(S=+ee,h):+S},alphaTarget:function(ee){return arguments.length?(P=+ee,h):P},velocityDecay:function(ee){return arguments.length?(F=1-ee,h):1-F},force:function(ee,j){return arguments.length>1?(j==null?I.remove(ee):I.set(ee,Y(j)),h):I.get(ee)},find:function(ee,j,X){var ae=0,fe=w.length,K,J,U,V,q;for(X==null?X=1/0:X*=X,ae=0;ae<fe;++ae)V=w[ae],K=ee-V.x,J=j-V.y,U=K*K+J*J,U<X&&(q=V,X=U);return q},on:function(ee,j){return arguments.length>1?(R.on(ee,j),h):R.on(ee)}}}function u(){var w,h,L,E=i(-30),S,P=1,F=1/0,I=.81;function D(H){var Y,ee=w.length,j=f.quadtree(w,d,c).visitAfter(O);for(L=H,Y=0;Y<ee;++Y)h=w[Y],j.visit(z)}function R(){if(!!w){var H,Y=w.length,ee;for(S=new Array(Y),H=0;H<Y;++H)ee=w[H],S[ee.index]=+E(ee,H,w)}}function O(H){var Y=0,ee,j,X=0,ae,fe,K;if(H.length){for(ae=fe=K=0;K<4;++K)(ee=H[K])&&(j=Math.abs(ee.value))&&(Y+=ee.value,X+=j,ae+=j*ee.x,fe+=j*ee.y);H.x=ae/X,H.y=fe/X}else{ee=H,ee.x=ee.data.x,ee.y=ee.data.y;do Y+=S[ee.data.index];while(ee=ee.next)}H.value=Y}function z(H,Y,ee,j){if(!H.value)return!0;var X=H.x-h.x,ae=H.y-h.y,fe=j-Y,K=X*X+ae*ae;if(fe*fe/I<K)return K<F&&(X===0&&(X=n(),K+=X*X),ae===0&&(ae=n(),K+=ae*ae),K<P&&(K=Math.sqrt(P*K)),h.vx+=X*H.value*L/K,h.vy+=ae*H.value*L/K),!0;if(H.length||K>=F)return;(H.data!==h||H.next)&&(X===0&&(X=n(),K+=X*X),ae===0&&(ae=n(),K+=ae*ae),K<P&&(K=Math.sqrt(P*K)));do H.data!==h&&(fe=S[H.data.index]*L/K,h.vx+=X*fe,h.vy+=ae*fe);while(H=H.next)}return D.initialize=function(H){w=H,R()},D.strength=function(H){return arguments.length?(E=typeof H=="function"?H:i(+H),R(),D):E},D.distanceMin=function(H){return arguments.length?(P=H*H,D):Math.sqrt(P)},D.distanceMax=function(H){return arguments.length?(F=H*H,D):Math.sqrt(F)},D.theta=function(H){return arguments.length?(I=H*H,D):Math.sqrt(I)},D}function A(w,h,L){var E,S=i(.1),P,F;typeof w!="function"&&(w=i(+w)),h==null&&(h=0),L==null&&(L=0);function I(R){for(var O=0,z=E.length;O<z;++O){var H=E[O],Y=H.x-h||1e-6,ee=H.y-L||1e-6,j=Math.sqrt(Y*Y+ee*ee),X=(F[O]-j)*P[O]*R/j;H.vx+=Y*X,H.vy+=ee*X}}function D(){if(!!E){var R,O=E.length;for(P=new Array(O),F=new Array(O),R=0;R<O;++R)F[R]=+w(E[R],R,E),P[R]=isNaN(F[R])?0:+S(E[R],R,E)}}return I.initialize=function(R){E=R,D()},I.strength=function(R){return arguments.length?(S=typeof R=="function"?R:i(+R),D(),I):S},I.radius=function(R){return arguments.length?(w=typeof R=="function"?R:i(+R),D(),I):w},I.x=function(R){return arguments.length?(h=+R,I):h},I.y=function(R){return arguments.length?(L=+R,I):L},I}function _(w){var h=i(.1),L,E,S;typeof w!="function"&&(w=i(w==null?0:+w));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vx+=(S[D]-O.x)*E[D]*I}function F(){if(!!L){var I,D=L.length;for(E=new Array(D),S=new Array(D),I=0;I<D;++I)E[I]=isNaN(S[I]=+w(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.x=function(I){return arguments.length?(w=typeof I=="function"?I:i(+I),F(),P):w},P}function p(w){var h=i(.1),L,E,S;typeof w!="function"&&(w=i(w==null?0:+w));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vy+=(S[D]-O.y)*E[D]*I}function F(){if(!!L){var I,D=L.length;for(E=new Array(D),S=new Array(D),I=0;I<D;++I)E[I]=isNaN(S[I]=+w(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.y=function(I){return arguments.length?(w=typeof I=="function"?I:i(+I),F(),P):w},P}x.forceCenter=a,x.forceCollide=s,x.forceLink=g,x.forceManyBody=u,x.forceRadial=A,x.forceSimulation=y,x.forceX=_,x.forceY=p,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=typeof globalThis<"u"?globalThis:x||self,f(x.d3=x.d3||{}))})(this,function(x){function f(w){return Math.abs(w=Math.round(w))>=1e21?w.toLocaleString("en").replace(/,/g,""):w.toString(10)}function M(w,h){if((L=(w=h?w.toExponential(h-1):w.toExponential()).indexOf("e"))<0)return null;var L,E=w.slice(0,L);return[E.length>1?E[0]+E.slice(2):E,+w.slice(L+1)]}function T(w){return w=M(Math.abs(w)),w?w[1]:NaN}function e(w,h){return function(L,E){for(var S=L.length,P=[],F=0,I=w[0],D=0;S>0&&I>0&&(D+I+1>E&&(I=Math.max(1,E-D)),P.push(L.substring(S-=I,S+I)),!((D+=I+1)>E));)I=w[F=(F+1)%w.length];return P.reverse().join(h)}}function a(w){return function(h){return h.replace(/[0-9]/g,function(L){return w[+L]})}}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(w){if(!(h=i.exec(w)))throw new Error("invalid format: "+w);var h;return new r({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}n.prototype=r.prototype;function r(w){this.fill=w.fill===void 0?" ":w.fill+"",this.align=w.align===void 0?">":w.align+"",this.sign=w.sign===void 0?"-":w.sign+"",this.symbol=w.symbol===void 0?"":w.symbol+"",this.zero=!!w.zero,this.width=w.width===void 0?void 0:+w.width,this.comma=!!w.comma,this.precision=w.precision===void 0?void 0:+w.precision,this.trim=!!w.trim,this.type=w.type===void 0?"":w.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(w){e:for(var h=w.length,L=1,E=-1,S;L<h;++L)switch(w[L]){case".":E=S=L;break;case"0":E===0&&(E=L),S=L;break;default:if(!+w[L])break e;E>0&&(E=0);break}return E>0?w.slice(0,E)+w.slice(S+1):w}var s;function o(w,h){var L=M(w,h);if(!L)return w+"";var E=L[0],S=L[1],P=S-(s=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,F=E.length;return P===F?E:P>F?E+new Array(P-F+1).join("0"):P>0?E.slice(0,P)+"."+E.slice(P):"0."+new Array(1-P).join("0")+M(w,Math.max(0,h+P-1))[0]}function b(w,h){var L=M(w,h);if(!L)return w+"";var E=L[0],S=L[1];return S<0?"0."+new Array(-S).join("0")+E:E.length>S+1?E.slice(0,S+1)+"."+E.slice(S+1):E+new Array(S-E.length+2).join("0")}var g={"%":function(w,h){return(w*100).toFixed(h)},b:function(w){return Math.round(w).toString(2)},c:function(w){return w+""},d:f,e:function(w,h){return w.toExponential(h)},f:function(w,h){return w.toFixed(h)},g:function(w,h){return w.toPrecision(h)},o:function(w){return Math.round(w).toString(8)},p:function(w,h){return b(w*100,h)},r:b,s:o,X:function(w){return Math.round(w).toString(16).toUpperCase()},x:function(w){return Math.round(w).toString(16)}};function d(w){return w}var c=Array.prototype.map,m=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(w){var h=w.grouping===void 0||w.thousands===void 0?d:e(c.call(w.grouping,Number),w.thousands+""),L=w.currency===void 0?"":w.currency[0]+"",E=w.currency===void 0?"":w.currency[1]+"",S=w.decimal===void 0?".":w.decimal+"",P=w.numerals===void 0?d:a(c.call(w.numerals,String)),F=w.percent===void 0?"%":w.percent+"",I=w.minus===void 0?"-":w.minus+"",D=w.nan===void 0?"NaN":w.nan+"";function R(z){z=n(z);var H=z.fill,Y=z.align,ee=z.sign,j=z.symbol,X=z.zero,ae=z.width,fe=z.comma,K=z.precision,J=z.trim,U=z.type;U==="n"?(fe=!0,U="g"):g[U]||(K===void 0&&(K=12),J=!0,U="g"),(X||H==="0"&&Y==="=")&&(X=!0,H="0",Y="=");var V=j==="$"?L:j==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",q=j==="$"?E:/[%p]/.test(U)?F:"",re=g[U],Z=/[defgprs%]/.test(U);K=K===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function Q(ie){var oe=V,ne=q,se,_e,ue;if(U==="c")ne=re(ie)+ne,ie="";else{ie=+ie;var ge=ie<0||1/ie<0;if(ie=isNaN(ie)?D:re(Math.abs(ie),K),J&&(ie=v(ie)),ge&&+ie==0&&ee!=="+"&&(ge=!1),oe=(ge?ee==="("?ee:I:ee==="-"||ee==="("?"":ee)+oe,ne=(U==="s"?m[8+s/3]:"")+ne+(ge&&ee==="("?")":""),Z){for(se=-1,_e=ie.length;++se<_e;)if(ue=ie.charCodeAt(se),48>ue||ue>57){ne=(ue===46?S+ie.slice(se+1):ie.slice(se))+ne,ie=ie.slice(0,se);break}}}fe&&!X&&(ie=h(ie,1/0));var xe=oe.length+ie.length+ne.length,ye=xe<ae?new Array(ae-xe+1).join(H):"";switch(fe&&X&&(ie=h(ye+ie,ye.length?ae-ne.length:1/0),ye=""),Y){case"<":ie=oe+ie+ne+ye;break;case"=":ie=oe+ye+ie+ne;break;case"^":ie=ye.slice(0,xe=ye.length>>1)+oe+ie+ne+ye.slice(xe);break;default:ie=ye+oe+ie+ne;break}return P(ie)}return Q.toString=function(){return z+""},Q}function O(z,H){var Y=R((z=n(z),z.type="f",z)),ee=Math.max(-8,Math.min(8,Math.floor(T(H)/3)))*3,j=Math.pow(10,-ee),X=m[8+ee/3];return function(ae){return Y(j*ae)+X}}return{format:R,formatPrefix:O}}var y;u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function u(w){return y=l(w),x.format=y.format,x.formatPrefix=y.formatPrefix,y}function A(w){return Math.max(0,-T(Math.abs(w)))}function _(w,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(h)/3)))*3-T(Math.abs(w)))}function p(w,h){return w=Math.abs(w),h=Math.abs(h)-w,Math.max(0,T(h)-T(w))+1}x.FormatSpecifier=r,x.formatDefaultLocale=u,x.formatLocale=l,x.formatSpecifier=n,x.precisionFixed=A,x.precisionPrefix=_,x.precisionRound=p,Object.defineProperty(x,"__esModule",{value:!0})})},{}],113:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-geo"),t("d3-array")):f(x.d3=x.d3||{},x.d3,x.d3)})(this,function(x,f,M){var T=Math.abs,e=Math.atan,a=Math.atan2,i=Math.cos,n=Math.exp,r=Math.floor,v=Math.log,s=Math.max,o=Math.min,b=Math.pow,g=Math.round,d=Math.sign||function(Oe){return Oe>0?1:Oe<0?-1:0},c=Math.sin,m=Math.tan,l=1e-6,y=1e-12,u=Math.PI,A=u/2,_=u/4,p=Math.SQRT1_2,w=D(2),h=D(u),L=u*2,E=180/u,S=u/180;function P(Oe){return Oe?Oe/Math.sin(Oe):1}function F(Oe){return Oe>1?A:Oe<-1?-A:Math.asin(Oe)}function I(Oe){return Oe>1?0:Oe<-1?u:Math.acos(Oe)}function D(Oe){return Oe>0?Math.sqrt(Oe):0}function R(Oe){return Oe=n(2*Oe),(Oe-1)/(Oe+1)}function O(Oe){return(n(Oe)-n(-Oe))/2}function z(Oe){return(n(Oe)+n(-Oe))/2}function H(Oe){return v(Oe+D(Oe*Oe+1))}function Y(Oe){return v(Oe+D(Oe*Oe-1))}function ee(Oe){var je=m(Oe/2),rt=2*v(i(Oe/2))/(je*je);function lt(Tt,_t){var kt=i(Tt),vr=i(_t),mr=c(_t),hr=vr*kt,Tr=-((1-hr?v((1+hr)/2)/(1-hr):-.5)+rt/(1+hr));return[Tr*vr*c(Tt),Tr*mr]}return lt.invert=function(Tt,_t){var kt=D(Tt*Tt+_t*_t),vr=-Oe/2,mr=50,hr;if(!kt)return[0,0];do{var Tr=vr/2,Fr=i(Tr),Qr=c(Tr),on=Qr/Fr,En=-v(T(Fr));vr-=hr=(2/on*En-rt*on-kt)/(-En/(Qr*Qr)+1-rt/(2*Fr*Fr))*(Fr<0?.7:1)}while(T(hr)>l&&--mr>0);var Nn=c(vr);return[a(Tt*Nn,kt*i(vr)),F(_t*Nn/kt)]},lt}function j(){var Oe=A,je=f.geoProjectionMutator(ee),rt=je(Oe);return rt.radius=function(lt){return arguments.length?je(Oe=lt*S):Oe*E},rt.scale(179.976).clipAngle(147)}function X(Oe,je){var rt=i(je),lt=P(I(rt*i(Oe/=2)));return[2*rt*c(Oe)*lt,c(je)*lt]}X.invert=function(Oe,je){if(!(Oe*Oe+4*je*je>u*u+l)){var rt=Oe,lt=je,Tt=25;do{var _t=c(rt),kt=c(rt/2),vr=i(rt/2),mr=c(lt),hr=i(lt),Tr=c(2*lt),Fr=mr*mr,Qr=hr*hr,on=kt*kt,En=1-Qr*vr*vr,Nn=En?I(hr*vr)*D(Jn=1/En):Jn=0,Jn,Ta=2*Nn*hr*kt-Oe,Ea=Nn*mr-je,ni=Jn*(Qr*on+Nn*hr*vr*Fr),qa=Jn*(.5*_t*Tr-Nn*2*mr*kt),ai=Jn*.25*(Tr*kt-Nn*mr*Qr*_t),Ti=Jn*(Fr*vr+Nn*on*hr),Yr=qa*ai-Ti*ni;if(!Yr)break;var qe=(Ea*qa-Ta*Ti)/Yr,$t=(Ta*ai-Ea*ni)/Yr;rt-=qe,lt-=$t}while((T(qe)>l||T($t)>l)&&--Tt>0);return[rt,lt]}};function ae(){return f.geoProjection(X).scale(152.63)}function fe(Oe){var je=c(Oe),rt=i(Oe),lt=Oe>=0?1:-1,Tt=m(lt*Oe),_t=(1+je-rt)/2;function kt(vr,mr){var hr=i(mr),Tr=i(vr/=2);return[(1+hr)*c(vr),(lt*mr>-a(Tr,Tt)-.001?0:-lt*10)+_t+c(mr)*rt-(1+hr)*je*Tr]}return kt.invert=function(vr,mr){var hr=0,Tr=0,Fr=50;do{var Qr=i(hr),on=c(hr),En=i(Tr),Nn=c(Tr),Jn=1+En,Ta=Jn*on-vr,Ea=_t+Nn*rt-Jn*je*Qr-mr,ni=Jn*Qr/2,qa=-on*Nn,ai=je*Jn*on/2,Ti=rt*En+je*Qr*Nn,Yr=qa*ai-Ti*ni,qe=(Ea*qa-Ta*Ti)/Yr/2,$t=(Ta*ai-Ea*ni)/Yr;T($t)>2&&($t/=2),hr-=qe,Tr-=$t}while((T(qe)>l||T($t)>l)&&--Fr>0);return lt*Tr>-a(i(hr),Tt)-.001?[hr*2,Tr]:null},kt}function K(){var Oe=20*S,je=Oe>=0?1:-1,rt=m(je*Oe),lt=f.geoProjectionMutator(fe),Tt=lt(Oe),_t=Tt.stream;return Tt.parallel=function(kt){return arguments.length?(rt=m((je=(Oe=kt*S)>=0?1:-1)*Oe),lt(Oe)):Oe*E},Tt.stream=function(kt){var vr=Tt.rotate(),mr=_t(kt),hr=(Tt.rotate([0,0]),_t(kt)),Tr=Tt.precision();return Tt.rotate(vr),mr.sphere=function(){hr.polygonStart(),hr.lineStart();for(var Fr=je*-180;je*Fr<180;Fr+=je*90)hr.point(Fr,je*90);if(Oe)for(;je*(Fr-=3*je*Tr)>=-180;)hr.point(Fr,je*-a(i(Fr*S/2),rt)*E);hr.lineEnd(),hr.polygonEnd()},mr},Tt.scale(218.695).center([0,28.0974])}function J(Oe,je){var rt=m(je/2),lt=D(1-rt*rt),Tt=1+lt*i(Oe/=2),_t=c(Oe)*lt/Tt,kt=rt/Tt,vr=_t*_t,mr=kt*kt;return[4/3*_t*(3+vr-3*mr),4/3*kt*(3+3*vr-mr)]}J.invert=function(Oe,je){if(Oe*=3/8,je*=3/8,!Oe&&T(je)>1)return null;var rt=Oe*Oe,lt=je*je,Tt=1+rt+lt,_t=D((Tt-D(Tt*Tt-4*je*je))/2),kt=F(_t)/3,vr=_t?Y(T(je/_t))/3:H(T(Oe))/3,mr=i(kt),hr=z(vr),Tr=hr*hr-mr*mr;return[d(Oe)*2*a(O(vr)*mr,.25-Tr),d(je)*2*a(hr*c(kt),.25+Tr)]};function U(){return f.geoProjection(J).scale(66.1603)}var V=D(8),q=v(1+w);function re(Oe,je){var rt=T(je);return rt<_?[Oe,v(m(_+je/2))]:[Oe*i(rt)*(2*w-1/c(rt)),d(je)*(2*w*(rt-_)-v(m(rt/2)))]}re.invert=function(Oe,je){if((_t=T(je))<q)return[Oe,2*e(n(je))-A];var rt=_,lt=25,Tt,_t;do{var kt=i(rt/2),vr=m(rt/2);rt-=Tt=(V*(rt-_)-v(vr)-_t)/(V-kt*kt/(2*vr))}while(T(Tt)>y&&--lt>0);return[Oe/(i(rt)*(V-1/c(rt))),d(je)*rt]};function Z(){return f.geoProjection(re).scale(112.314)}function Q(Oe){var je=2*u/Oe;function rt(lt,Tt){var _t=f.geoAzimuthalEquidistantRaw(lt,Tt);if(T(lt)>A){var kt=a(_t[1],_t[0]),vr=D(_t[0]*_t[0]+_t[1]*_t[1]),mr=je*g((kt-A)/je)+A,hr=a(c(kt-=mr),2-i(kt));kt=mr+F(u/vr*c(hr))-hr,_t[0]=vr*i(kt),_t[1]=vr*c(kt)}return _t}return rt.invert=function(lt,Tt){var _t=D(lt*lt+Tt*Tt);if(_t>A){var kt=a(Tt,lt),vr=je*g((kt-A)/je)+A,mr=kt>vr?-1:1,hr=_t*i(vr-kt),Tr=1/m(mr*I((hr-u)/D(u*(u-2*hr)+_t*_t)));kt=vr+2*e((Tr+mr*D(Tr*Tr-3))/3),lt=_t*i(kt),Tt=_t*c(kt)}return f.geoAzimuthalEquidistantRaw.invert(lt,Tt)},rt}function ie(){var Oe=5,je=f.geoProjectionMutator(Q),rt=je(Oe),lt=rt.stream,Tt=.01,_t=-i(Tt*S),kt=c(Tt*S);return rt.lobes=function(vr){return arguments.length?je(Oe=+vr):Oe},rt.stream=function(vr){var mr=rt.rotate(),hr=lt(vr),Tr=(rt.rotate([0,0]),lt(vr));return rt.rotate(mr),hr.sphere=function(){Tr.polygonStart(),Tr.lineStart();for(var Fr=0,Qr=360/Oe,on=2*u/Oe,En=90-180/Oe,Nn=A;Fr<Oe;++Fr,En-=Qr,Nn-=on)Tr.point(a(kt*i(Nn),_t)*E,F(kt*c(Nn))*E),En<-90?(Tr.point(-90,-180-En-Tt),Tr.point(-90,-180-En+Tt)):(Tr.point(90,En+Tt),Tr.point(90,En-Tt));Tr.lineEnd(),Tr.polygonEnd()},hr},rt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function oe(Oe,je){if(arguments.length<2&&(je=Oe),je===1)return f.geoAzimuthalEqualAreaRaw;if(je===1/0)return ne;function rt(lt,Tt){var _t=f.geoAzimuthalEqualAreaRaw(lt/je,Tt);return _t[0]*=Oe,_t}return rt.invert=function(lt,Tt){var _t=f.geoAzimuthalEqualAreaRaw.invert(lt/Oe,Tt);return _t[0]*=je,_t},rt}function ne(Oe,je){return[Oe*i(je)/i(je/=2),2*c(je)]}ne.invert=function(Oe,je){var rt=2*F(je/2);return[Oe*i(rt/2)/i(rt),rt]};function se(){var Oe=2,je=f.geoProjectionMutator(oe),rt=je(Oe);return rt.coefficient=function(lt){return arguments.length?je(Oe=+lt):Oe},rt.scale(169.529)}function _e(Oe,je,rt){var lt=100,Tt,_t,kt;rt=rt===void 0?0:+rt,je=+je;do _t=Oe(rt),kt=Oe(rt+l),_t===kt&&(kt=_t+l),rt-=Tt=-1*l*(_t-je)/(_t-kt);while(lt-- >0&&T(Tt)>l);return lt<0?NaN:rt}function ue(Oe,je,rt){return je===void 0&&(je=40),rt===void 0&&(rt=y),function(lt,Tt,_t,kt){var vr,mr,hr;_t=_t===void 0?0:+_t,kt=kt===void 0?0:+kt;for(var Tr=0;Tr<je;Tr++){var Fr=Oe(_t,kt),Qr=Fr[0]-lt,on=Fr[1]-Tt;if(T(Qr)<rt&&T(on)<rt)break;var En=Qr*Qr+on*on;if(En>vr){_t-=mr/=2,kt-=hr/=2;continue}vr=En;var Nn=(_t>0?-1:1)*rt,Jn=(kt>0?-1:1)*rt,Ta=Oe(_t+Nn,kt),Ea=Oe(_t,kt+Jn),ni=(Ta[0]-Fr[0])/Nn,qa=(Ta[1]-Fr[1])/Nn,ai=(Ea[0]-Fr[0])/Jn,Ti=(Ea[1]-Fr[1])/Jn,Yr=Ti*ni-qa*ai,qe=(T(Yr)<.5?.5:1)/Yr;if(mr=(on*ai-Qr*Ti)*qe,hr=(Qr*qa-on*ni)*qe,_t+=mr,kt+=hr,T(mr)<rt&&T(hr)<rt)break}return[_t,kt]}}function ge(){var Oe=oe(1.68,2),je=1.4,rt=12;function lt(Tt,_t){if(Tt+_t<-je){var kt=(Tt-_t+1.6)*(Tt+_t+je)/8;Tt+=kt,_t-=.8*kt*c(_t+u/2)}var vr=Oe(Tt,_t),mr=(1-i(Tt*_t))/rt;return vr[1]<0&&(vr[0]*=1+mr),vr[1]>0&&(vr[1]*=1+mr/1.5*vr[0]*vr[0]),vr}return lt.invert=ue(lt),lt}function xe(){return f.geoProjection(ge()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ye(Oe,je){var rt=Oe*c(je),lt=30,Tt;do je-=Tt=(je+c(je)-rt)/(1+i(je));while(T(Tt)>l&&--lt>0);return je/2}function be(Oe,je,rt){function lt(Tt,_t){return[Oe*Tt*i(_t=ye(rt,_t)),je*c(_t)]}return lt.invert=function(Tt,_t){return _t=F(_t/je),[Tt/(Oe*i(_t)),F((2*_t+c(2*_t))/rt)]},lt}var Se=be(w/A,w,u);function Re(){return f.geoProjection(Se).scale(169.529)}var Ve=2.00276,Ae=1.11072;function Ce(Oe,je){var rt=ye(u,je);return[Ve*Oe/(1/i(je)+Ae/i(rt)),(je+w*c(rt))/Ve]}Ce.invert=function(Oe,je){var rt=Ve*je,lt=je<0?-_:_,Tt=25,_t,kt;do kt=rt-w*c(lt),lt-=_t=(c(2*lt)+2*lt-u*c(kt))/(2*i(2*lt)+2+u*i(kt)*w*i(lt));while(T(_t)>l&&--Tt>0);return kt=rt-w*c(lt),[Oe*(1/i(kt)+Ae/i(lt))/Ve,kt]};function Ze(){return f.geoProjection(Ce).scale(160.857)}function Ye(Oe){var je=0,rt=f.geoProjectionMutator(Oe),lt=rt(je);return lt.parallel=function(Tt){return arguments.length?rt(je=Tt*S):je*E},lt}function ze(Oe,je){return[Oe*i(je),je]}ze.invert=function(Oe,je){return[Oe/i(je),je]};function Ie(){return f.geoProjection(ze).scale(152.63)}function Ge(Oe){if(!Oe)return ze;var je=1/m(Oe);function rt(lt,Tt){var _t=je+Oe-Tt,kt=_t&&lt*i(Tt)/_t;return[_t*c(kt),je-_t*i(kt)]}return rt.invert=function(lt,Tt){var _t=D(lt*lt+(Tt=je-Tt)*Tt),kt=je+Oe-_t;return[_t/i(kt)*a(lt,Tt),kt]},rt}function dt(){return Ye(Ge).scale(123.082).center([0,26.1441]).parallel(45)}function Rt(Oe){function je(rt,lt){var Tt=A-lt,_t=Tt&&rt*Oe*c(Tt)/Tt;return[Tt*c(_t)/Oe,A-Tt*i(_t)]}return je.invert=function(rt,lt){var Tt=rt*Oe,_t=A-lt,kt=D(Tt*Tt+_t*_t),vr=a(Tt,_t);return[(kt?kt/c(kt):1)*vr/Oe,A-kt]},je}function Qt(){var Oe=.5,je=f.geoProjectionMutator(Rt),rt=je(Oe);return rt.fraction=function(lt){return arguments.length?je(Oe=+lt):Oe},rt.scale(158.837)}var Bt=be(1,4/u,u);function Ct(){return f.geoProjection(Bt).scale(152.63)}function Kt(Oe,je,rt,lt,Tt,_t){var kt=i(_t),vr;if(T(Oe)>1||T(_t)>1)vr=I(rt*Tt+je*lt*kt);else{var mr=c(Oe/2),hr=c(_t/2);vr=2*F(D(mr*mr+je*lt*hr*hr))}return T(vr)>l?[vr,a(lt*c(_t),je*Tt-rt*lt*kt)]:[0,0]}function Ot(Oe,je,rt){return I((Oe*Oe+je*je-rt*rt)/(2*Oe*je))}function St(Oe){return Oe-2*u*r((Oe+u)/(2*u))}function Xe(Oe,je,rt){for(var lt=[[Oe[0],Oe[1],c(Oe[1]),i(Oe[1])],[je[0],je[1],c(je[1]),i(je[1])],[rt[0],rt[1],c(rt[1]),i(rt[1])]],Tt=lt[2],_t,kt=0;kt<3;++kt,Tt=_t)_t=lt[kt],Tt.v=Kt(_t[1]-Tt[1],Tt[3],Tt[2],_t[3],_t[2],_t[0]-Tt[0]),Tt.point=[0,0];var vr=Ot(lt[0].v[0],lt[2].v[0],lt[1].v[0]),mr=Ot(lt[0].v[0],lt[1].v[0],lt[2].v[0]),hr=u-vr;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var Tr=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*i(vr),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*c(vr))];function Fr(Qr,on){var En=c(on),Nn=i(on),Jn=new Array(3),Ta;for(Ta=0;Ta<3;++Ta){var Ea=lt[Ta];if(Jn[Ta]=Kt(on-Ea[1],Ea[3],Ea[2],Nn,En,Qr-Ea[0]),!Jn[Ta][0])return Ea.point;Jn[Ta][1]=St(Jn[Ta][1]-Ea.v[1])}var ni=Tr.slice();for(Ta=0;Ta<3;++Ta){var qa=Ta==2?0:Ta+1,ai=Ot(lt[Ta].v[0],Jn[Ta][0],Jn[qa][0]);Jn[Ta][1]<0&&(ai=-ai),Ta?Ta==1?(ai=mr-ai,ni[0]-=Jn[Ta][0]*i(ai),ni[1]-=Jn[Ta][0]*c(ai)):(ai=hr-ai,ni[0]+=Jn[Ta][0]*i(ai),ni[1]+=Jn[Ta][0]*c(ai)):(ni[0]+=Jn[Ta][0]*i(ai),ni[1]-=Jn[Ta][0]*c(ai))}return ni[0]/=3,ni[1]/=3,ni}return Fr}function at(Oe){return Oe[0]*=S,Oe[1]*=S,Oe}function We(){return Ee([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ee(Oe,je,rt){var lt=f.geoCentroid({type:"MultiPoint",coordinates:[Oe,je,rt]}),Tt=[-lt[0],-lt[1]],_t=f.geoRotation(Tt),kt=Xe(at(_t(Oe)),at(_t(je)),at(_t(rt)));kt.invert=ue(kt);var vr=f.geoProjection(kt).rotate(Tt),mr=vr.center;return delete vr.rotate,vr.center=function(hr){return arguments.length?mr(_t(hr)):_t.invert(mr())},vr.clipAngle(90)}function He(Oe,je){var rt=D(1-c(je));return[2/h*Oe*rt,h*(1-rt)]}He.invert=function(Oe,je){var rt=(rt=je/h-1)*rt;return[rt>0?Oe*D(u/rt)/2:0,F(1-rt)]};function Ke(){return f.geoProjection(He).scale(95.6464).center([0,30])}function et(Oe){var je=m(Oe);function rt(lt,Tt){return[lt,(lt?lt/c(lt):1)*(c(Tt)*i(lt)-je*i(Tt))]}return rt.invert=je?function(lt,Tt){lt&&(Tt*=c(lt)/lt);var _t=i(lt);return[lt,2*a(D(_t*_t+je*je-Tt*Tt)-_t,je-Tt)]}:function(lt,Tt){return[lt,F(lt?Tt*m(lt)/lt:Tt)]},rt}function At(){return Ye(et).scale(249.828).clipAngle(90)}var mt=D(3);function Mt(Oe,je){return[mt*Oe*(2*i(2*je/3)-1)/h,mt*h*c(je/3)]}Mt.invert=function(Oe,je){var rt=3*F(je/(mt*h));return[h*Oe/(mt*(2*i(2*rt/3)-1)),rt]};function Gt(){return f.geoProjection(Mt).scale(156.19)}function zt(Oe){var je=i(Oe);function rt(lt,Tt){return[lt*je,c(Tt)/je]}return rt.invert=function(lt,Tt){return[lt/je,F(Tt*je)]},rt}function Ht(){return Ye(zt).parallel(38.58).scale(195.044)}function Xt(Oe){var je=i(Oe);function rt(lt,Tt){return[lt*je,(1+je)*m(Tt/2)]}return rt.invert=function(lt,Tt){return[lt/je,e(Tt/(1+je))*2]},rt}function Wt(){return Ye(Xt).scale(124.75)}function sr(Oe,je){var rt=D(8/(3*u));return[rt*Oe*(1-T(je)/u),rt*je]}sr.invert=function(Oe,je){var rt=D(8/(3*u)),lt=je/rt;return[Oe/(rt*(1-T(lt)/u)),lt]};function Gr(){return f.geoProjection(sr).scale(165.664)}function cn(Oe,je){var rt=D(4-3*c(T(je)));return[2/D(6*u)*Oe*rt,d(je)*D(2*u/3)*(2-rt)]}cn.invert=function(Oe,je){var rt=2-T(je)/D(2*u/3);return[Oe*D(6*u)/(2*rt),d(je)*F((4-rt*rt)/3)]};function en(){return f.geoProjection(cn).scale(165.664)}function st(Oe,je){var rt=D(u*(4+u));return[2/rt*Oe*(1+D(1-4*je*je/(u*u))),4/rt*je]}st.invert=function(Oe,je){var rt=D(u*(4+u))/2;return[Oe*rt/(1+D(1-je*je*(4+u)/(4*u))),je*rt/2]};function rr(){return f.geoProjection(st).scale(180.739)}function er(Oe,je){var rt=(2+A)*c(je);je/=2;for(var lt=0,Tt=1/0;lt<10&&T(Tt)>l;lt++){var _t=i(je);je-=Tt=(je+c(je)*(_t+2)-rt)/(2*_t*(1+_t))}return[2/D(u*(4+u))*Oe*(1+i(je)),2*D(u/(4+u))*c(je)]}er.invert=function(Oe,je){var rt=je*D((4+u)/u)/2,lt=F(rt),Tt=i(lt);return[Oe/(2/D(u*(4+u))*(1+Tt)),F((lt+rt*(Tt+2))/(2+A))]};function jt(){return f.geoProjection(er).scale(180.739)}function Mr(Oe,je){return[Oe*(1+i(je))/D(2+u),2*je/D(2+u)]}Mr.invert=function(Oe,je){var rt=D(2+u),lt=je*rt/2;return[rt*Oe/(1+i(lt)),lt]};function it(){return f.geoProjection(Mr).scale(173.044)}function Qe(Oe,je){for(var rt=(1+A)*c(je),lt=0,Tt=1/0;lt<10&&T(Tt)>l;lt++)je-=Tt=(je+c(je)-rt)/(1+i(je));return rt=D(2+u),[Oe*(1+i(je))/rt,2*je/rt]}Qe.invert=function(Oe,je){var rt=1+A,lt=D(rt/2);return[Oe*2*lt/(1+i(je*=lt)),F((je+c(je))/rt)]};function ft(){return f.geoProjection(Qe).scale(173.044)}var ct=3+2*w;function Et(Oe,je){var rt=c(Oe/=2),lt=i(Oe),Tt=D(i(je)),_t=i(je/=2),kt=c(je)/(_t+w*lt*Tt),vr=D(2/(1+kt*kt)),mr=D((w*_t+(lt+rt)*Tt)/(w*_t+(lt-rt)*Tt));return[ct*(vr*(mr-1/mr)-2*v(mr)),ct*(vr*kt*(mr+1/mr)-2*e(kt))]}Et.invert=function(Oe,je){if(!(_t=J.invert(Oe/1.2,je*1.065)))return null;var rt=_t[0],lt=_t[1],Tt=20,_t;Oe/=ct,je/=ct;do{var kt=rt/2,vr=lt/2,mr=c(kt),hr=i(kt),Tr=c(vr),Fr=i(vr),Qr=i(lt),on=D(Qr),En=Tr/(Fr+w*hr*on),Nn=En*En,Jn=D(2/(1+Nn)),Ta=w*Fr+(hr+mr)*on,Ea=w*Fr+(hr-mr)*on,ni=Ta/Ea,qa=D(ni),ai=qa-1/qa,Ti=qa+1/qa,Yr=Jn*ai-2*v(qa)-Oe,qe=Jn*En*Ti-2*e(En)-je,$t=Tr&&p*on*mr*Nn/Tr,Jr=(w*hr*Fr+on)/(2*(Fr+w*hr*on)*(Fr+w*hr*on)*on),Hn=-.5*En*Jn*Jn*Jn,ta=Hn*$t,ea=Hn*Jr,vi=(vi=2*Fr+w*on*(hr-mr))*vi*qa,Pi=(w*hr*Fr*on+Qr)/vi,Ki=-(w*mr*Tr)/(on*vi),Di=ai*ta-2*Pi/qa+Jn*(Pi+Pi/ni),le=ai*ea-2*Ki/qa+Jn*(Ki+Ki/ni),Te=En*Ti*ta-2*$t/(1+Nn)+Jn*Ti*$t+Jn*En*(Pi-Pi/ni),De=En*Ti*ea-2*Jr/(1+Nn)+Jn*Ti*Jr+Jn*En*(Ki-Ki/ni),Ue=le*Te-De*Di;if(!Ue)break;var Be=(qe*le-Yr*De)/Ue,$e=(Yr*Te-qe*Di)/Ue;rt-=Be,lt=s(-A,o(A,lt-$e))}while((T(Be)>l||T($e)>l)&&--Tt>0);return T(T(lt)-A)<l?[0,lt]:Tt&&[rt,lt]};function Nt(){return f.geoProjection(Et).scale(62.5271)}var Pe=i(35*S);function Le(Oe,je){var rt=m(je/2);return[Oe*Pe*D(1-rt*rt),(1+Pe)*rt]}Le.invert=function(Oe,je){var rt=je/(1+Pe);return[Oe&&Oe/(Pe*D(1-rt*rt)),2*e(rt)]};function ot(){return f.geoProjection(Le).scale(137.152)}function ut(Oe,je){var rt=je/2,lt=i(rt);return[2*Oe/h*i(je)*lt*lt,h*m(rt)]}ut.invert=function(Oe,je){var rt=e(je/h),lt=i(rt),Tt=2*rt;return[Oe*h/2/(i(Tt)*lt*lt),Tt]};function pt(){return f.geoProjection(ut).scale(135.264)}function Pt(Oe){var je=1-Oe,rt=_t(u,0)[0]-_t(-u,0)[0],lt=_t(0,A)[1]-_t(0,-A)[1],Tt=D(2*lt/rt);function _t(mr,hr){var Tr=i(hr),Fr=c(hr);return[Tr/(je+Oe*Tr)*mr,je*hr+Oe*Fr]}function kt(mr,hr){var Tr=_t(mr,hr);return[Tr[0]*Tt,Tr[1]/Tt]}function vr(mr){return kt(0,mr)[1]}return kt.invert=function(mr,hr){var Tr=_e(vr,hr),Fr=mr/Tt*(Oe+je/i(Tr));return[Fr,Tr]},kt}function xt(){var Oe=.5,je=f.geoProjectionMutator(Pt),rt=je(Oe);return rt.alpha=function(lt){return arguments.length?je(Oe=+lt):Oe},rt.scale(168.725)}function Lt(Oe){return[Oe[0]/2,F(m(Oe[1]/2*S))*E]}function Zt(Oe){return[Oe[0]*2,2*e(c(Oe[1]*S))*E]}function ur(Oe){Oe==null&&(Oe=f.geoOrthographic);var je=Oe(),rt=f.geoEquirectangular().scale(E).precision(0).clipAngle(null).translate([0,0]);function lt(_t){return je(Lt(_t))}je.invert&&(lt.invert=function(_t){return Zt(je.invert(_t))}),lt.stream=function(_t){var kt=je.stream(_t),vr=rt.stream({point:function(mr,hr){kt.point(mr/2,F(m(-hr/2*S))*E)},lineStart:function(){kt.lineStart()},lineEnd:function(){kt.lineEnd()},polygonStart:function(){kt.polygonStart()},polygonEnd:function(){kt.polygonEnd()}});return vr.sphere=kt.sphere,vr};function Tt(_t){lt[_t]=function(){return arguments.length?(je[_t].apply(je,arguments),lt):je[_t]()}}return lt.rotate=function(_t){return arguments.length?(rt.rotate(_t),lt):rt.rotate()},lt.center=function(_t){return arguments.length?(je.center(Lt(_t)),lt):Zt(je.center())},Tt("angle"),Tt("clipAngle"),Tt("clipExtent"),Tt("fitExtent"),Tt("fitHeight"),Tt("fitSize"),Tt("fitWidth"),Tt("scale"),Tt("translate"),Tt("precision"),lt.scale(249.5)}function Pr(Oe,je){var rt=2*u/je,lt=Oe*Oe;function Tt(_t,kt){var vr=f.geoAzimuthalEquidistantRaw(_t,kt),mr=vr[0],hr=vr[1],Tr=mr*mr+hr*hr;if(Tr>lt){var Fr=D(Tr),Qr=a(hr,mr),on=rt*g(Qr/rt),En=Qr-on,Nn=Oe*i(En),Jn=(Oe*c(En)-En*c(Nn))/(A-Nn),Ta=Ar(En,Jn),Ea=(u-Oe)/kr(Ta,Nn,u);mr=Fr;var ni=50,qa;do mr-=qa=(Oe+kr(Ta,Nn,mr)*Ea-Fr)/(Ta(mr)*Ea);while(T(qa)>l&&--ni>0);hr=En*c(mr),mr<A&&(hr-=Jn*(mr-A));var ai=c(on),Ti=i(on);vr[0]=mr*Ti-hr*ai,vr[1]=mr*ai+hr*Ti}return vr}return Tt.invert=function(_t,kt){var vr=_t*_t+kt*kt;if(vr>lt){var mr=D(vr),hr=a(kt,_t),Tr=rt*g(hr/rt),Fr=hr-Tr;_t=mr*i(Fr),kt=mr*c(Fr);for(var Qr=_t-A,on=c(_t),En=kt/on,Nn=_t<A?1/0:0,Jn=10;;){var Ta=Oe*c(En),Ea=Oe*i(En),ni=c(Ea),qa=A-Ea,ai=(Ta-En*ni)/qa,Ti=Ar(En,ai);if(T(Nn)<y||!--Jn)break;En-=Nn=(En*on-ai*Qr-kt)/(on-Qr*2*(qa*(Ea+En*Ta*i(Ea)-ni)-Ta*(Ta-En*ni))/(qa*qa))}mr=Oe+kr(Ti,Ea,_t)*(u-Oe)/kr(Ti,Ea,u),hr=Tr+En,_t=mr*i(hr),kt=mr*c(hr)}return f.geoAzimuthalEquidistantRaw.invert(_t,kt)},Tt}function Ar(Oe,je){return function(rt){var lt=Oe*i(rt);return rt<A&&(lt-=je),D(1+lt*lt)}}function kr(Oe,je,rt){for(var lt=50,Tt=(rt-je)/lt,_t=Oe(je)+Oe(rt),kt=1,vr=je;kt<lt;++kt)_t+=2*Oe(vr+=Tt);return _t*.5*Tt}function Zr(){var Oe=6,je=30*S,rt=i(je),lt=c(je),Tt=f.geoProjectionMutator(Pr),_t=Tt(je,Oe),kt=_t.stream,vr=.01,mr=-i(vr*S),hr=c(vr*S);return _t.radius=function(Tr){return arguments.length?(rt=i(je=Tr*S),lt=c(je),Tt(je,Oe)):je*E},_t.lobes=function(Tr){return arguments.length?Tt(je,Oe=+Tr):Oe},_t.stream=function(Tr){var Fr=_t.rotate(),Qr=kt(Tr),on=(_t.rotate([0,0]),kt(Tr));return _t.rotate(Fr),Qr.sphere=function(){on.polygonStart(),on.lineStart();for(var En=0,Nn=2*u/Oe,Jn=0;En<Oe;++En,Jn-=Nn)on.point(a(hr*i(Jn),mr)*E,F(hr*c(Jn))*E),on.point(a(lt*i(Jn-Nn/2),rt)*E,F(lt*c(Jn-Nn/2))*E);on.lineEnd(),on.polygonEnd()},Qr},_t.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function lr(Oe,je,rt,lt,Tt,_t,kt,vr){arguments.length<8&&(vr=0);function mr(hr,Tr){if(!Tr)return[Oe*hr/u,0];var Fr=Tr*Tr,Qr=Oe+Fr*(je+Fr*(rt+Fr*lt)),on=Tr*(Tt-1+Fr*(_t-vr+Fr*kt)),En=(Qr*Qr+on*on)/(2*on),Nn=hr*F(Qr/En)/u;return[En*c(Nn),Tr*(1+Fr*vr)+En*(1-i(Nn))]}return mr.invert=function(hr,Tr){var Fr=u*hr/Oe,Qr=Tr,on,En,Nn=50;do{var Jn=Qr*Qr,Ta=Oe+Jn*(je+Jn*(rt+Jn*lt)),Ea=Qr*(Tt-1+Jn*(_t-vr+Jn*kt)),ni=Ta*Ta+Ea*Ea,qa=2*Ea,ai=ni/qa,Ti=ai*ai,Yr=F(Ta/ai)/u,qe=Fr*Yr,$t=Ta*Ta,Jr=(2*je+Jn*(4*rt+Jn*6*lt))*Qr,Hn=Tt+Jn*(3*_t+Jn*5*kt),ta=2*(Ta*Jr+Ea*(Hn-1)),ea=2*(Hn-1),vi=(ta*qa-ni*ea)/(qa*qa),Pi=i(qe),Ki=c(qe),Di=ai*Pi,le=ai*Ki,Te=Fr/u*(1/D(1-$t/Ti))*(Jr*ai-Ta*vi)/Ti,De=le-hr,Ue=Qr*(1+Jn*vr)+ai-Di-Tr,Be=vi*Ki+Di*Te,$e=Di*Yr,wt=1+vi-(vi*Pi-le*Te),gt=le*Yr,Ft=Be*gt-wt*$e;if(!Ft)break;Fr-=on=(Ue*Be-De*wt)/Ft,Qr-=En=(De*gt-Ue*$e)/Ft}while((T(on)>l||T(En)>l)&&--Nn>0);return[Fr,Qr]},mr}var br=lr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Or(){return f.geoProjection(br).scale(149.995)}var Hr=lr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Lr(){return f.geoProjection(Hr).scale(153.93)}var nt=lr(5/6*u,-.62636,-.0344,0,1.3493,-.05524,0,.045);function It(){return f.geoProjection(nt).scale(130.945)}function Jt(Oe,je){var rt=Oe*Oe,lt=je*je;return[Oe*(1-.162388*lt)*(.87-952426e-9*rt*rt),je*(1+lt/12)]}Jt.invert=function(Oe,je){var rt=Oe,lt=je,Tt=50,_t;do{var kt=lt*lt;lt-=_t=(lt*(1+kt/12)-je)/(1+kt/4)}while(T(_t)>l&&--Tt>0);Tt=50,Oe/=1-.162388*kt;do{var vr=(vr=rt*rt)*vr;rt-=_t=(rt*(.87-952426e-9*vr)-Oe)/(.87-.00476213*vr)}while(T(_t)>l&&--Tt>0);return[rt,lt]};function fr(){return f.geoProjection(Jt).scale(131.747)}var Nr=lr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Vr(){return f.geoProjection(Nr).scale(131.087)}function Dr(Oe){var je=Oe(A,0)[0]-Oe(-A,0)[0];function rt(lt,Tt){var _t=lt>0?-.5:.5,kt=Oe(lt+_t*u,Tt);return kt[0]-=_t*je,kt}return Oe.invert&&(rt.invert=function(lt,Tt){var _t=lt>0?-.5:.5,kt=Oe.invert(lt+_t*je,Tt),vr=kt[0]-_t*u;return vr<-u?vr+=2*u:vr>u&&(vr-=2*u),kt[0]=vr,kt}),rt}function Er(Oe,je){var rt=d(Oe),lt=d(je),Tt=i(je),_t=i(Oe)*Tt,kt=c(Oe)*Tt,vr=c(lt*je);Oe=T(a(kt,vr)),je=F(_t),T(Oe-A)>l&&(Oe%=A);var mr=jr(Oe>u/4?A-Oe:Oe,je);return Oe>u/4&&(vr=mr[0],mr[0]=-mr[1],mr[1]=-vr),mr[0]*=rt,mr[1]*=-lt,mr}Er.invert=function(Oe,je){T(Oe)>1&&(Oe=d(Oe)*2-Oe),T(je)>1&&(je=d(je)*2-je);var rt=d(Oe),lt=d(je),Tt=-rt*Oe,_t=-lt*je,kt=_t/Tt<1,vr=kn(kt?_t:Tt,kt?Tt:_t),mr=vr[0],hr=vr[1],Tr=i(hr);return kt&&(mr=-A-mr),[rt*(a(c(mr)*Tr,-c(hr))+u),lt*F(i(mr)*Tr)]};function jr(Oe,je){if(je===A)return[0,0];var rt=c(je),lt=rt*rt,Tt=lt*lt,_t=1+Tt,kt=1+3*Tt,vr=1-Tt,mr=F(1/D(_t)),hr=vr+lt*_t*mr,Tr=(1-rt)/hr,Fr=D(Tr),Qr=Tr*_t,on=D(Qr),En=Fr*vr,Nn,Jn;if(Oe===0)return[0,-(En+lt*on)];var Ta=i(je),Ea=1/Ta,ni=2*rt*Ta,qa=(-3*lt+mr*kt)*ni,ai=(-hr*Ta-(1-rt)*qa)/(hr*hr),Ti=.5*ai/Fr,Yr=vr*Ti-2*lt*Fr*ni,qe=lt*_t*ai+Tr*kt*ni,$t=-Ea*ni,Jr=-Ea*qe,Hn=-2*Ea*Yr,ta=4*Oe/u,ea;if(Oe>.222*u||je<u/4&&Oe>.175*u){if(Nn=(En+lt*D(Qr*(1+Tt)-En*En))/(1+Tt),Oe>u/4)return[Nn,Nn];var vi=Nn,Pi=.5*Nn;Nn=.5*(Pi+vi),Jn=50;do{var Ki=D(Qr-Nn*Nn),Di=Nn*(Hn+$t*Ki)+Jr*F(Nn/on)-ta;if(!Di)break;Di<0?Pi=Nn:vi=Nn,Nn=.5*(Pi+vi)}while(T(vi-Pi)>l&&--Jn>0)}else{Nn=l,Jn=25;do{var le=Nn*Nn,Te=D(Qr-le),De=Hn+$t*Te,Ue=Nn*De+Jr*F(Nn/on)-ta,Be=De+(Jr-$t*le)/Te;Nn-=ea=Te?Ue/Be:0}while(T(ea)>l&&--Jn>0)}return[Nn,-En-lt*D(Qr-Nn*Nn)]}function kn(Oe,je){for(var rt=0,lt=1,Tt=.5,_t=50;;){var kt=Tt*Tt,vr=D(Tt),mr=F(1/D(1+kt)),hr=1-kt+Tt*(1+kt)*mr,Tr=(1-vr)/hr,Fr=D(Tr),Qr=Tr*(1+kt),on=Fr*(1-kt),En=Qr-Oe*Oe,Nn=D(En),Jn=je+on+Tt*Nn;if(T(lt-rt)<y||--_t===0||Jn===0)break;Jn>0?rt=Tt:lt=Tt,Tt=.5*(rt+lt)}if(!_t)return null;var Ta=F(vr),Ea=i(Ta),ni=1/Ea,qa=2*vr*Ea,ai=(-3*Tt+mr*(1+3*kt))*qa,Ti=(-hr*Ea-(1-vr)*ai)/(hr*hr),Yr=.5*Ti/Fr,qe=(1-kt)*Yr-2*Tt*Fr*qa,$t=-2*ni*qe,Jr=-ni*qa,Hn=-ni*(Tt*(1+kt)*Ti+Tr*(1+3*kt)*qa);return[u/4*(Oe*($t+Jr*Nn)+Hn*F(Oe/D(Qr))),Ta]}function mn(){return f.geoProjection(Dr(Er)).scale(239.75)}function Wn(Oe,je,rt){var lt,Tt,_t;return Oe?(lt=In(Oe,rt),je?(Tt=In(je,1-rt),_t=Tt[1]*Tt[1]+rt*lt[0]*lt[0]*Tt[0]*Tt[0],[[lt[0]*Tt[2]/_t,lt[1]*lt[2]*Tt[0]*Tt[1]/_t],[lt[1]*Tt[1]/_t,-lt[0]*lt[2]*Tt[0]*Tt[2]/_t],[lt[2]*Tt[1]*Tt[2]/_t,-rt*lt[0]*lt[1]*Tt[0]/_t]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(Tt=In(je,1-rt),[[0,Tt[0]/Tt[1]],[1/Tt[1],0],[Tt[2]/Tt[1],0]])}function In(Oe,je){var rt,lt,Tt,_t,kt;if(je<l)return _t=c(Oe),lt=i(Oe),rt=je*(Oe-_t*lt)/4,[_t-rt*lt,lt+rt*_t,1-je*_t*_t/2,Oe-rt];if(je>=1-l)return rt=(1-je)/4,lt=z(Oe),_t=R(Oe),Tt=1/lt,kt=lt*O(Oe),[_t+rt*(kt-Oe)/(lt*lt),Tt-rt*_t*Tt*(kt-Oe),Tt+rt*_t*Tt*(kt+Oe),2*e(n(Oe))-A+rt*(kt-Oe)/lt];var vr=[1,0,0,0,0,0,0,0,0],mr=[D(je),0,0,0,0,0,0,0,0],hr=0;for(lt=D(1-je),kt=1;T(mr[hr]/vr[hr])>l&&hr<8;)rt=vr[hr++],mr[hr]=(rt-lt)/2,vr[hr]=(rt+lt)/2,lt=D(rt*lt),kt*=2;Tt=kt*vr[hr]*Oe;do _t=mr[hr]*c(lt=Tt)/vr[hr],Tt=(F(_t)+Tt)/2;while(--hr);return[c(Tt),_t=i(Tt),_t/i(Tt-lt),Tt]}function $n(Oe,je,rt){var lt=T(Oe),Tt=T(je),_t=O(Tt);if(lt){var kt=1/c(lt),vr=1/(m(lt)*m(lt)),mr=-(vr+rt*(_t*_t*kt*kt)-1+rt),hr=(rt-1)*vr,Tr=(-mr+D(mr*mr-4*hr))/2;return[Kn(e(1/D(Tr)),rt)*d(Oe),Kn(e(D((Tr/vr-1)/rt)),1-rt)*d(je)]}return[0,Kn(e(_t),1-rt)*d(je)]}function Kn(Oe,je){if(!je)return Oe;if(je===1)return v(m(Oe/2+_));for(var rt=1,lt=D(1-je),Tt=D(je),_t=0;T(Tt)>l;_t++){if(Oe%u){var kt=e(lt*m(Oe)/rt);kt<0&&(kt+=u),Oe+=kt+~~(Oe/u)*u}else Oe+=Oe;Tt=(rt+lt)/2,lt=D(rt*lt),Tt=((rt=Tt)-lt)/2}return Oe/(b(2,_t)*rt)}function ma(Oe,je){var rt=(w-1)/(w+1),lt=D(1-rt*rt),Tt=Kn(A,lt*lt),_t=-1,kt=v(m(u/4+T(je)/2)),vr=n(_t*kt)/D(rt),mr=Ra(vr*i(_t*Oe),vr*c(_t*Oe)),hr=$n(mr[0],mr[1],lt*lt);return[-hr[1],(je>=0?1:-1)*(.5*Tt-hr[0])]}function Ra(Oe,je){var rt=Oe*Oe,lt=je+1,Tt=1-rt-je*je;return[.5*((Oe>=0?A:-A)-a(Tt,2*Oe)),-.25*v(Tt*Tt+4*rt)+.5*v(lt*lt+rt)]}function _i(Oe,je){var rt=je[0]*je[0]+je[1]*je[1];return[(Oe[0]*je[0]+Oe[1]*je[1])/rt,(Oe[1]*je[0]-Oe[0]*je[1])/rt]}ma.invert=function(Oe,je){var rt=(w-1)/(w+1),lt=D(1-rt*rt),Tt=Kn(A,lt*lt),_t=-1,kt=Wn(.5*Tt-je,-Oe,lt*lt),vr=_i(kt[0],kt[1]),mr=a(vr[1],vr[0])/_t;return[mr,2*e(n(.5/_t*v(rt*vr[0]*vr[0]+rt*vr[1]*vr[1])))-A]};function Ka(){return f.geoProjection(Dr(ma)).scale(151.496)}function ri(Oe){var je=c(Oe),rt=i(Oe),lt=ei(Oe);lt.invert=ei(-Oe);function Tt(_t,kt){var vr=lt(_t,kt);_t=vr[0],kt=vr[1];var mr=c(kt),hr=i(kt),Tr=i(_t),Fr=I(je*mr+rt*hr*Tr),Qr=c(Fr),on=T(Qr)>l?Fr/Qr:1;return[on*rt*c(_t),(T(_t)>A?on:-on)*(je*hr-rt*mr*Tr)]}return Tt.invert=function(_t,kt){var vr=D(_t*_t+kt*kt),mr=-c(vr),hr=i(vr),Tr=vr*hr,Fr=-kt*mr,Qr=vr*je,on=D(Tr*Tr+Fr*Fr-Qr*Qr),En=a(Tr*Qr+Fr*on,Fr*Qr-Tr*on),Nn=(vr>A?-1:1)*a(_t*mr,vr*i(En)*hr+kt*c(En)*mr);return lt.invert(Nn,En)},Tt}function ei(Oe){var je=c(Oe),rt=i(Oe);return function(lt,Tt){var _t=i(Tt),kt=i(lt)*_t,vr=c(lt)*_t,mr=c(Tt);return[a(vr,kt*rt-mr*je),F(mr*rt+kt*je)]}}function Sr(){var Oe=0,je=f.geoProjectionMutator(ri),rt=je(Oe),lt=rt.rotate,Tt=rt.stream,_t=f.geoCircle();return rt.parallel=function(kt){if(!arguments.length)return Oe*E;var vr=rt.rotate();return je(Oe=kt*S).rotate(vr)},rt.rotate=function(kt){return arguments.length?(lt.call(rt,[kt[0],kt[1]-Oe*E]),_t.center([-kt[0],-kt[1]]),rt):(kt=lt.call(rt),kt[1]+=Oe*E,kt)},rt.stream=function(kt){return kt=Tt(kt),kt.sphere=function(){kt.polygonStart();var vr=.01,mr=_t.radius(90-vr)().coordinates[0],hr=mr.length-1,Tr=-1,Fr;for(kt.lineStart();++Tr<hr;)kt.point((Fr=mr[Tr])[0],Fr[1]);for(kt.lineEnd(),mr=_t.radius(90+vr)().coordinates[0],hr=mr.length-1,kt.lineStart();--Tr>=0;)kt.point((Fr=mr[Tr])[0],Fr[1]);kt.lineEnd(),kt.polygonEnd()},kt},rt.scale(79.4187).parallel(45).clipAngle(180-.001)}var bn=3,dn=F(1-1/bn)*E,Ln=zt(0);function ra(Oe){var je=dn*S,rt=He(u,je)[0]-He(-u,je)[0],lt=Ln(0,je)[1],Tt=He(0,je)[1],_t=h-Tt,kt=L/Oe,vr=4/L,mr=lt+_t*_t*4/L;function hr(Tr,Fr){var Qr,on=T(Fr);if(on>je){var En=o(Oe-1,s(0,r((Tr+u)/kt)));Tr+=u*(Oe-1)/Oe-En*kt,Qr=He(Tr,on),Qr[0]=Qr[0]*L/rt-L*(Oe-1)/(2*Oe)+En*L/Oe,Qr[1]=lt+(Qr[1]-Tt)*4*_t/L,Fr<0&&(Qr[1]=-Qr[1])}else Qr=Ln(Tr,Fr);return Qr[0]*=vr,Qr[1]/=mr,Qr}return hr.invert=function(Tr,Fr){Tr/=vr,Fr*=mr;var Qr=T(Fr);if(Qr>lt){var on=o(Oe-1,s(0,r((Tr+u)/kt)));Tr=(Tr+u*(Oe-1)/Oe-on*kt)*rt/L;var En=He.invert(Tr,.25*(Qr-lt)*L/_t+Tt);return En[0]-=u*(Oe-1)/Oe-on*kt,Fr<0&&(En[1]=-En[1]),En}return Ln.invert(Tr,Fr)},hr}function ya(Oe,je){return[Oe,je&1?90-l:dn]}function sa(Oe,je){return[Oe,je&1?-90+l:-dn]}function Bn(Oe){return[Oe[0]*(1-l),Oe[1]]}function Qn(Oe){var je=[].concat(M.range(-180,180+Oe/2,Oe).map(ya),M.range(180,-180-Oe/2,-Oe).map(sa));return{type:"Polygon",coordinates:[Oe===180?je.map(Bn):je]}}function Xa(){var Oe=4,je=f.geoProjectionMutator(ra),rt=je(Oe),lt=rt.stream;return rt.lobes=function(Tt){return arguments.length?je(Oe=+Tt):Oe},rt.stream=function(Tt){var _t=rt.rotate(),kt=lt(Tt),vr=(rt.rotate([0,0]),lt(Tt));return rt.rotate(_t),kt.sphere=function(){f.geoStream(Qn(180/Oe),vr)},kt},rt.scale(239.75)}function mi(Oe){var je=1+Oe,rt=c(1/je),lt=F(rt),Tt=2*D(u/(_t=u+4*lt*je)),_t,kt=.5*Tt*(je+D(Oe*(2+Oe))),vr=Oe*Oe,mr=je*je;function hr(Tr,Fr){var Qr=1-c(Fr),on,En;if(Qr&&Qr<2){var Nn=A-Fr,Jn=25,Ta;do{var Ea=c(Nn),ni=i(Nn),qa=lt+a(Ea,je-ni),ai=1+mr-2*je*ni;Nn-=Ta=(Nn-vr*lt-je*Ea+ai*qa-.5*Qr*_t)/(2*je*Ea*qa)}while(T(Ta)>y&&--Jn>0);on=Tt*D(ai),En=Tr*qa/u}else on=Tt*(Oe+Qr),En=Tr*lt/u;return[on*c(En),kt-on*i(En)]}return hr.invert=function(Tr,Fr){var Qr=Tr*Tr+(Fr-=kt)*Fr,on=(1+mr-Qr/(Tt*Tt))/(2*je),En=I(on),Nn=c(En),Jn=lt+a(Nn,je-on);return[F(Tr/D(Qr))*u/Jn,F(1-2*(En-vr*lt-je*Nn+(1+mr-2*je*on)*Jn)/_t)]},hr}function Yt(){var Oe=1,je=f.geoProjectionMutator(mi),rt=je(Oe);return rt.ratio=function(lt){return arguments.length?je(Oe=+lt):Oe},rt.scale(167.774).center([0,18.67])}var gr=.7109889596207567,un=.0528035274542;function yn(Oe,je){return je>-gr?(Oe=Se(Oe,je),Oe[1]+=un,Oe):ze(Oe,je)}yn.invert=function(Oe,je){return je>-gr?Se.invert(Oe,je-un):ze.invert(Oe,je)};function sn(){return f.geoProjection(yn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Cn(Oe,je){return T(je)>gr?(Oe=Se(Oe,je),Oe[1]-=je>0?un:-un,Oe):ze(Oe,je)}Cn.invert=function(Oe,je){return T(je)>gr?Se.invert(Oe,je+(je>0?un:-un)):ze.invert(Oe,je)};function Tn(){return f.geoProjection(Cn).scale(152.63)}function gn(Oe,je,rt,lt){var Tt=D(4*u/(2*rt+(1+Oe-je/2)*c(2*rt)+(Oe+je)/2*c(4*rt)+je/2*c(6*rt))),_t=D(lt*c(rt)*D((1+Oe*i(2*rt)+je*i(4*rt))/(1+Oe+je))),kt=rt*mr(1);function vr(Fr){return D(1+Oe*i(2*Fr)+je*i(4*Fr))}function mr(Fr){var Qr=Fr*rt;return(2*Qr+(1+Oe-je/2)*c(2*Qr)+(Oe+je)/2*c(4*Qr)+je/2*c(6*Qr))/rt}function hr(Fr){return vr(Fr)*c(Fr)}var Tr=function(Fr,Qr){var on=rt*_e(mr,kt*c(Qr)/rt,Qr/u);isNaN(on)&&(on=rt*d(Qr));var En=Tt*vr(on);return[En*_t*Fr/u*i(on),En/_t*c(on)]};return Tr.invert=function(Fr,Qr){var on=_e(hr,Qr*_t/Tt);return[Fr*u/(i(on)*Tt*_t*vr(on)),F(rt*mr(on/rt)/kt)]},rt===0&&(Tt=D(lt/u),Tr=function(Fr,Qr){return[Fr*Tt,c(Qr)/Tt]},Tr.invert=function(Fr,Qr){return[Fr/Tt,F(Qr*Tt)]}),Tr}function _r(){var Oe=1,je=0,rt=45*S,lt=2,Tt=f.geoProjectionMutator(gn),_t=Tt(Oe,je,rt,lt);return _t.a=function(kt){return arguments.length?Tt(Oe=+kt,je,rt,lt):Oe},_t.b=function(kt){return arguments.length?Tt(Oe,je=+kt,rt,lt):je},_t.psiMax=function(kt){return arguments.length?Tt(Oe,je,rt=+kt*S,lt):rt*E},_t.ratio=function(kt){return arguments.length?Tt(Oe,je,rt,lt=+kt):lt},_t.scale(180.739)}function wr(Oe,je,rt,lt,Tt,_t,kt,vr,mr,hr,Tr){if(Tr.nanEncountered)return NaN;var Fr,Qr,on,En,Nn,Jn,Ta,Ea,ni,qa;if(Fr=rt-je,Qr=Oe(je+Fr*.25),on=Oe(rt-Fr*.25),isNaN(Qr)){Tr.nanEncountered=!0;return}if(isNaN(on)){Tr.nanEncountered=!0;return}return En=Fr*(lt+4*Qr+Tt)/12,Nn=Fr*(Tt+4*on+_t)/12,Jn=En+Nn,qa=(Jn-kt)/15,hr>mr?(Tr.maxDepthCount++,Jn+qa):Math.abs(qa)<vr?Jn+qa:(Ta=je+Fr*.5,Ea=wr(Oe,je,Ta,lt,Qr,Tt,En,vr*.5,mr,hr+1,Tr),isNaN(Ea)?(Tr.nanEncountered=!0,NaN):(ni=wr(Oe,Ta,rt,Tt,on,_t,Nn,vr*.5,mr,hr+1,Tr),isNaN(ni)?(Tr.nanEncountered=!0,NaN):Ea+ni))}function Br(Oe,je,rt,lt,Tt){var _t={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),Tt===void 0&&(Tt=20);var kt=Oe(je),vr=Oe(.5*(je+rt)),mr=Oe(rt),hr=(kt+4*vr+mr)*(rt-je)/6,Tr=wr(Oe,je,rt,kt,vr,mr,hr,lt,Tt,1,_t);return Tr}function An(Oe,je,rt){function lt(on){return Oe+(1-Oe)*b(1-b(on,je),1/je)}function Tt(on){return Br(lt,0,on,1e-4)}for(var _t=1/Tt(1),kt=1e3,vr=(1+1e-8)*_t,mr=[],hr=0;hr<=kt;hr++)mr.push(Tt(hr/kt)*vr);function Tr(on){var En=0,Nn=kt,Jn=kt>>1;do mr[Jn]>on?Nn=Jn:En=Jn,Jn=En+Nn>>1;while(Jn>En);var Ta=mr[Jn+1]-mr[Jn];return Ta&&(Ta=(on-mr[Jn+1])/Ta),(Jn+1+Ta)/kt}var Fr=2*Tr(1)/u*_t/rt,Qr=function(on,En){var Nn=Tr(T(c(En))),Jn=lt(Nn)*on;return Nn/=Fr,[Jn,En>=0?Nn:-Nn]};return Qr.invert=function(on,En){var Nn;return En*=Fr,T(En)<1&&(Nn=d(En)*F(Tt(T(En))*_t)),[on/lt(T(En)),Nn]},Qr}function Yn(){var Oe=0,je=2.5,rt=1.183136,lt=f.geoProjectionMutator(An),Tt=lt(Oe,je,rt);return Tt.alpha=function(_t){return arguments.length?lt(Oe=+_t,je,rt):Oe},Tt.k=function(_t){return arguments.length?lt(Oe,je=+_t,rt):je},Tt.gamma=function(_t){return arguments.length?lt(Oe,je,rt=+_t):rt},Tt.scale(152.63)}function ua(Oe,je){return T(Oe[0]-je[0])<l&&T(Oe[1]-je[1])<l}function Sn(Oe,je){for(var rt=-1,lt=Oe.length,Tt=Oe[0],_t,kt,vr,mr=[];++rt<lt;){_t=Oe[rt],kt=(_t[0]-Tt[0])/je,vr=(_t[1]-Tt[1])/je;for(var hr=0;hr<je;++hr)mr.push([Tt[0]+hr*kt,Tt[1]+hr*vr]);Tt=_t}return mr.push(_t),mr}function na(Oe){var je=[],rt,lt,Tt,_t,kt,vr,mr,hr=Oe[0].length;for(mr=0;mr<hr;++mr)rt=Oe[0][mr],lt=rt[0][0],Tt=rt[0][1],_t=rt[1][1],kt=rt[2][0],vr=rt[2][1],je.push(Sn([[lt+l,Tt+l],[lt+l,_t-l],[kt-l,_t-l],[kt-l,vr+l]],30));for(mr=Oe[1].length-1;mr>=0;--mr)rt=Oe[1][mr],lt=rt[0][0],Tt=rt[0][1],_t=rt[1][1],kt=rt[2][0],vr=rt[2][1],je.push(Sn([[kt-l,vr-l],[kt-l,_t+l],[lt+l,_t+l],[lt+l,Tt-l]],30));return{type:"Polygon",coordinates:[M.merge(je)]}}function ca(Oe,je,rt){var lt,Tt;function _t(mr,hr){for(var Tr=hr<0?-1:1,Fr=je[+(hr<0)],Qr=0,on=Fr.length-1;Qr<on&&mr>Fr[Qr][2][0];++Qr);var En=Oe(mr-Fr[Qr][1][0],hr);return En[0]+=Oe(Fr[Qr][1][0],Tr*hr>Tr*Fr[Qr][0][1]?Fr[Qr][0][1]:hr)[0],En}rt?_t.invert=rt(_t):Oe.invert&&(_t.invert=function(mr,hr){for(var Tr=Tt[+(hr<0)],Fr=je[+(hr<0)],Qr=0,on=Tr.length;Qr<on;++Qr){var En=Tr[Qr];if(En[0][0]<=mr&&mr<En[1][0]&&En[0][1]<=hr&&hr<En[1][1]){var Nn=Oe.invert(mr-Oe(Fr[Qr][1][0],0)[0],hr);return Nn[0]+=Fr[Qr][1][0],ua(_t(Nn[0],Nn[1]),[mr,hr])?Nn:null}}});var kt=f.geoProjection(_t),vr=kt.stream;return kt.stream=function(mr){var hr=kt.rotate(),Tr=vr(mr),Fr=(kt.rotate([0,0]),vr(mr));return kt.rotate(hr),Tr.sphere=function(){f.geoStream(lt,Fr)},Tr},kt.lobes=function(mr){return arguments.length?(lt=na(mr),je=mr.map(function(hr){return hr.map(function(Tr){return[[Tr[0][0]*S,Tr[0][1]*S],[Tr[1][0]*S,Tr[1][1]*S],[Tr[2][0]*S,Tr[2][1]*S]]})}),Tt=je.map(function(hr){return hr.map(function(Tr){var Fr=Oe(Tr[0][0],Tr[0][1])[0],Qr=Oe(Tr[2][0],Tr[2][1])[0],on=Oe(Tr[1][0],Tr[0][1])[1],En=Oe(Tr[1][0],Tr[1][1])[1],Nn;return on>En&&(Nn=on,on=En,En=Nn),[[Fr,on],[Qr,En]]})}),kt):je.map(function(hr){return hr.map(function(Tr){return[[Tr[0][0]*E,Tr[0][1]*E],[Tr[1][0]*E,Tr[1][1]*E],[Tr[2][0]*E,Tr[2][1]*E]]})})},je!=null&&kt.lobes(je),kt}var Ma=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ka(){return ca(Ce,Ma).scale(160.857)}var ga=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ia(){return ca(Cn,ga).scale(152.63)}var Mo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ro(){return ca(Se,Mo).scale(169.529)}var Jo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ks(){return ca(Se,Jo).scale(169.529).rotate([20,0])}var Vs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Gl(){return ca(yn,Vs,ue).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ai=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Hs(){return ca(ze,Ai).scale(152.63).rotate([-20,0])}function Gs(Oe,je){return[3/L*Oe*D(u*u/3-je*je),je]}Gs.invert=function(Oe,je){return[L/3*Oe/D(u*u/3-je*je),je]};function ji(){return f.geoProjection(Gs).scale(158.837)}function Io(Oe){function je(rt,lt){if(T(T(lt)-A)<l)return[0,lt<0?-2:2];var Tt=c(lt),_t=b((1+Tt)/(1-Tt),Oe/2),kt=.5*(_t+1/_t)+i(rt*=Oe);return[2*c(rt)/kt,(_t-1/_t)/kt]}return je.invert=function(rt,lt){var Tt=T(lt);if(T(Tt-2)<l)return rt?null:[0,d(lt)*A];if(Tt>2)return null;rt/=2,lt/=2;var _t=rt*rt,kt=lt*lt,vr=2*lt/(1+_t+kt);return vr=b((1+vr)/(1-vr),1/Oe),[a(2*rt,1-_t-kt)/Oe,F((vr-1)/(vr+1))]},je}function Ml(){var Oe=.5,je=f.geoProjectionMutator(Io),rt=je(Oe);return rt.spacing=function(lt){return arguments.length?je(Oe=+lt):Oe},rt.scale(124.75)}var ws=u/w;function Ii(Oe,je){return[Oe*(1+D(i(je)))/2,je/(i(je/2)*i(Oe/6))]}Ii.invert=function(Oe,je){var rt=T(Oe),lt=T(je),Tt=l,_t=A;lt<ws?_t*=lt/ws:Tt+=6*I(ws/lt);for(var kt=0;kt<25;kt++){var vr=c(_t),mr=D(i(_t)),hr=c(_t/2),Tr=i(_t/2),Fr=c(Tt/6),Qr=i(Tt/6),on=.5*Tt*(1+mr)-rt,En=_t/(Tr*Qr)-lt,Nn=mr?-.25*Tt*vr/mr:0,Jn=.5*(1+mr),Ta=(1+.5*_t*hr/Tr)/(Tr*Qr),Ea=_t/Tr*(Fr/6)/(Qr*Qr),ni=Nn*Ea-Ta*Jn,qa=(on*Ea-En*Jn)/ni,ai=(En*Nn-on*Ta)/ni;if(_t-=qa,Tt-=ai,T(qa)<l&&T(ai)<l)break}return[Oe<0?-Tt:Tt,je<0?-_t:_t]};function fl(){return f.geoProjection(Ii).scale(97.2672)}function lo(Oe,je){var rt=Oe*Oe,lt=je*je;return[Oe*(.975534+lt*(-.119161+rt*-.0143059+lt*-.0547009)),je*(1.00384+rt*(.0802894+lt*-.02855+rt*199025e-9)+lt*(.0998909+lt*-.0491032))]}lo.invert=function(Oe,je){var rt=d(Oe)*u,lt=je/2,Tt=50;do{var _t=rt*rt,kt=lt*lt,vr=rt*lt,mr=rt*(.975534+kt*(-.119161+_t*-.0143059+kt*-.0547009))-Oe,hr=lt*(1.00384+_t*(.0802894+kt*-.02855+_t*199025e-9)+kt*(.0998909+kt*-.0491032))-je,Tr=.975534-kt*(.119161+3*_t*.0143059+kt*.0547009),Fr=-vr*(2*.119161+4*.0547009*kt+2*.0143059*_t),Qr=vr*(2*.0802894+4*199025e-9*_t+2*-.02855*kt),on=1.00384+_t*(.0802894+199025e-9*_t)+kt*(3*(.0998909-.02855*_t)-5*.0491032*kt),En=Fr*Qr-on*Tr,Nn=(hr*Fr-mr*on)/En,Jn=(mr*Qr-hr*Tr)/En;rt-=Nn,lt-=Jn}while((T(Nn)>l||T(Jn)>l)&&--Tt>0);return Tt&&[rt,lt]};function Fi(){return f.geoProjection(lo).scale(139.98)}function po(Oe,je){return[c(Oe)/i(je),m(je)*i(Oe)]}po.invert=function(Oe,je){var rt=Oe*Oe,lt=je*je,Tt=lt+1,_t=rt+Tt,kt=Oe?p*D((_t-D(_t*_t-4*rt))/rt):1/D(Tt);return[F(Oe*kt),d(je)*I(kt)]};function no(){return f.geoProjection(po).scale(144.049).clipAngle(90-.001)}function us(Oe){var je=i(Oe),rt=m(_+Oe/2);function lt(Tt,_t){var kt=_t-Oe,vr=T(kt)<l?Tt*je:T(vr=_+_t/2)<l||T(T(vr)-A)<l?0:Tt*kt/v(m(vr)/rt);return[vr,kt]}return lt.invert=function(Tt,_t){var kt,vr=_t+Oe;return[T(_t)<l?Tt/je:T(kt=_+vr/2)<l||T(T(kt)-A)<l?0:Tt*v(m(kt)/rt)/_t,vr]},lt}function Js(){return Ye(us).parallel(40).scale(158.837)}function au(Oe,je){return[Oe,1.25*v(m(_+.4*je))]}au.invert=function(Oe,je){return[Oe,2.5*e(n(.8*je))-.625*u]};function es(){return f.geoProjection(au).scale(108.318)}function bu(Oe){var je=Oe.length-1;function rt(lt,Tt){for(var _t=i(Tt),kt=2/(1+_t*i(lt)),vr=kt*_t*c(lt),mr=kt*c(Tt),hr=je,Tr=Oe[hr],Fr=Tr[0],Qr=Tr[1],on;--hr>=0;)Tr=Oe[hr],Fr=Tr[0]+vr*(on=Fr)-mr*Qr,Qr=Tr[1]+vr*Qr+mr*on;return Fr=vr*(on=Fr)-mr*Qr,Qr=vr*Qr+mr*on,[Fr,Qr]}return rt.invert=function(lt,Tt){var _t=20,kt=lt,vr=Tt;do{for(var mr=je,hr=Oe[mr],Tr=hr[0],Fr=hr[1],Qr=0,on=0,En;--mr>=0;)hr=Oe[mr],Qr=Tr+kt*(En=Qr)-vr*on,on=Fr+kt*on+vr*En,Tr=hr[0]+kt*(En=Tr)-vr*Fr,Fr=hr[1]+kt*Fr+vr*En;Qr=Tr+kt*(En=Qr)-vr*on,on=Fr+kt*on+vr*En,Tr=kt*(En=Tr)-vr*Fr-lt,Fr=kt*Fr+vr*En-Tt;var Nn=Qr*Qr+on*on,Jn,Ta;kt-=Jn=(Tr*Qr+Fr*on)/Nn,vr-=Ta=(Fr*Qr-Tr*on)/Nn}while(T(Jn)+T(Ta)>l*l&&--_t>0);if(_t){var Ea=D(kt*kt+vr*vr),ni=2*e(Ea*.5),qa=c(ni);return[a(kt*qa,Ea*i(ni)),Ea?F(vr*qa/Ea):0]}},rt}var Ds=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],No=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],sf=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ko=[[.9245,0],[0,0],[.01943,0]],Rs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Yl(){return Is(Ds,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Vu(){return Is(No,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Hu(){return Is(sf,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ys(){return Is(ko,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function El(){return Is(Rs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Is(Oe,je){var rt=f.geoProjection(bu(Oe)).rotate(je).clipAngle(90),lt=f.geoRotation(je),Tt=rt.center;return delete rt.rotate,rt.center=function(_t){return arguments.length?Tt(lt(_t)):lt.invert(Tt())},rt}var iu=D(6),cl=D(7);function ou(Oe,je){var rt=F(7*c(je)/(3*iu));return[iu*Oe*(2*i(2*rt/3)-1)/cl,9*c(rt/3)/cl]}ou.invert=function(Oe,je){var rt=3*F(je*cl/9);return[Oe*cl/(iu*(2*i(2*rt/3)-1)),F(c(rt)*3*iu/7)]};function _u(){return f.geoProjection(ou).scale(164.859)}function Wl(Oe,je){for(var rt=(1+p)*c(je),lt=je,Tt=0,_t;Tt<25&&(lt-=_t=(c(lt/2)+c(lt)-rt)/(.5*i(lt/2)+i(lt)),!(T(_t)<l));Tt++);return[Oe*(1+2*i(lt)/i(lt/2))/(3*w),2*D(3)*c(lt/2)/D(2+w)]}Wl.invert=function(Oe,je){var rt=je*D(2+w)/(2*D(3)),lt=2*F(rt);return[3*w*Oe/(1+2*i(lt)/i(lt/2)),F((rt+c(lt))/(1+p))]};function wu(){return f.geoProjection(Wl).scale(188.209)}function $s(Oe,je){for(var rt=D(6/(4+u)),lt=(1+u/4)*c(je),Tt=je/2,_t=0,kt;_t<25&&(Tt-=kt=(Tt/2+c(Tt)-lt)/(.5+i(Tt)),!(T(kt)<l));_t++);return[rt*(.5+i(Tt))*Oe/1.5,rt*Tt]}$s.invert=function(Oe,je){var rt=D(6/(4+u)),lt=je/rt;return T(T(lt)-A)<l&&(lt=lt<0?-A:A),[1.5*Oe/(rt*(.5+i(lt))),F((lt/2+c(lt))/(1+u/4))]};function Xl(){return f.geoProjection($s).scale(166.518)}function hl(Oe,je){var rt=je*je,lt=rt*rt,Tt=rt*lt;return[Oe*(.84719-.13063*rt+Tt*Tt*(-.04515+.05494*rt-.02326*lt+.00331*Tt)),je*(1.01183+lt*lt*(-.02625+.01926*rt-.00396*lt))]}hl.invert=function(Oe,je){var rt=je,lt=25,Tt,_t,kt,vr;do _t=rt*rt,kt=_t*_t,rt-=Tt=(rt*(1.01183+kt*kt*(-.02625+.01926*_t-.00396*kt))-je)/(1.01183+kt*kt*(9*-.02625+11*.01926*_t+13*-.00396*kt));while(T(Tt)>y&&--lt>0);return _t=rt*rt,kt=_t*_t,vr=_t*kt,[Oe/(.84719-.13063*_t+vr*vr*(-.04515+.05494*_t-.02326*kt+.00331*vr)),rt]};function Ts(){return f.geoProjection(hl).scale(175.295)}function Sl(Oe,je){return[Oe*(1+i(je))/2,2*(je-m(je/2))]}Sl.invert=function(Oe,je){for(var rt=je/2,lt=0,Tt=1/0;lt<10&&T(Tt)>l;++lt){var _t=i(je/2);je-=Tt=(je-m(je/2)-rt)/(1-.5/(_t*_t))}return[2*Oe/(1+i(je)),je]};function su(){return f.geoProjection(Sl).scale(152.63)}var Tu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Au(){return ca(oe(1/0),Tu).rotate([20,0]).scale(152.63)}function jl(Oe,je){var rt=c(je),lt=i(je),Tt=d(Oe);if(Oe===0||T(je)===A)return[0,je];if(je===0)return[Oe,0];if(T(Oe)===A)return[Oe*lt,A*rt];var _t=u/(2*Oe)-2*Oe/u,kt=2*je/u,vr=(1-kt*kt)/(rt-kt),mr=_t*_t,hr=vr*vr,Tr=1+mr/hr,Fr=1+hr/mr,Qr=(_t*rt/vr-_t/2)/Tr,on=(hr*rt/mr+vr/2)/Fr,En=Qr*Qr+lt*lt/Tr,Nn=on*on-(hr*rt*rt/mr+vr*rt-1)/Fr;return[A*(Qr+D(En)*Tt),A*(on+D(Nn<0?0:Nn)*d(-je*_t)*Tt)]}jl.invert=function(Oe,je){Oe/=A,je/=A;var rt=Oe*Oe,lt=je*je,Tt=rt+lt,_t=u*u;return[Oe?(Tt-1+D((1-Tt)*(1-Tt)+4*rt))/(2*Oe)*A:0,_e(function(kt){return Tt*(u*c(kt)-2*kt)*u+4*kt*kt*(je-c(kt))+2*u*kt-_t*je},0)]};function Qs(){return f.geoProjection(jl).scale(127.267)}var Mu=1.0148,fs=.23185,Wo=-.14499,qs=.02406,lu=Mu,As=5*fs,Fo=7*Wo,kl=9*qs,Ms=1.790857183;function Fs(Oe,je){var rt=je*je;return[Oe,je*(Mu+rt*rt*(fs+rt*(Wo+qs*rt)))]}Fs.invert=function(Oe,je){je>Ms?je=Ms:je<-Ms&&(je=-Ms);var rt=je,lt;do{var Tt=rt*rt;rt-=lt=(rt*(Mu+Tt*Tt*(fs+Tt*(Wo+qs*Tt)))-je)/(lu+Tt*Tt*(As+Tt*(Fo+kl*Tt)))}while(T(lt)>l);return[Oe,rt]};function go(){return f.geoProjection(Fs).scale(139.319)}function Cl(Oe,je){if(T(je)<l)return[Oe,0];var rt=m(je),lt=Oe*c(je);return[c(lt)/rt,je+(1-i(lt))/rt]}Cl.invert=function(Oe,je){if(T(je)<l)return[Oe,0];var rt=Oe*Oe+je*je,lt=je*.5,Tt=10,_t;do{var kt=m(lt),vr=1/i(lt),mr=rt-2*je*lt+lt*lt;lt-=_t=(kt*mr+2*(lt-je))/(2+mr*vr*vr+2*(lt-je)*kt)}while(T(_t)>l&&--Tt>0);return kt=m(lt),[(T(je)<T(lt+1/kt)?F(Oe*kt):d(je)*d(Oe)*(I(T(Oe*kt))+A))/c(lt),lt]};function Ll(){return f.geoProjection(Cl).scale(103.74)}function el(Oe,je){var rt=pl(Oe[1],Oe[0]),lt=pl(je[1],je[0]),Tt=Pl(rt,lt),_t=Zl(rt)/Zl(lt);return vl([1,0,Oe[0][0],0,1,Oe[0][1]],vl([_t,0,0,0,_t,0],vl([i(Tt),c(Tt),0,-c(Tt),i(Tt),0],[1,0,-je[0][0],0,1,-je[0][1]])))}function cs(Oe){var je=1/(Oe[0]*Oe[4]-Oe[1]*Oe[3]);return[je*Oe[4],-je*Oe[1],je*(Oe[1]*Oe[5]-Oe[2]*Oe[4]),-je*Oe[3],je*Oe[0],je*(Oe[2]*Oe[3]-Oe[0]*Oe[5])]}function vl(Oe,je){return[Oe[0]*je[0]+Oe[1]*je[3],Oe[0]*je[1]+Oe[1]*je[4],Oe[0]*je[2]+Oe[1]*je[5]+Oe[2],Oe[3]*je[0]+Oe[4]*je[3],Oe[3]*je[1]+Oe[4]*je[4],Oe[3]*je[2]+Oe[4]*je[5]+Oe[5]]}function pl(Oe,je){return[Oe[0]-je[0],Oe[1]-je[1]]}function Zl(Oe){return D(Oe[0]*Oe[0]+Oe[1]*Oe[1])}function Pl(Oe,je){return a(Oe[0]*je[1]-Oe[1]*je[0],Oe[0]*je[0]+Oe[1]*je[1])}function tl(Oe,je,rt){lt(Oe,{transform:null});function lt(hr,Tr){if(hr.edges=uu(hr.face),Tr.face){var Fr=hr.shared=Ws(hr.face,Tr.face),Qr=el(Fr.map(Tr.project),Fr.map(hr.project));hr.transform=Tr.transform?vl(Tr.transform,Qr):Qr;for(var on=Tr.edges,En=0,Nn=on.length;En<Nn;++En)hs(Fr[0],on[En][1])&&hs(Fr[1],on[En][0])&&(on[En]=hr),hs(Fr[0],on[En][0])&&hs(Fr[1],on[En][1])&&(on[En]=hr);for(on=hr.edges,En=0,Nn=on.length;En<Nn;++En)hs(Fr[0],on[En][0])&&hs(Fr[1],on[En][1])&&(on[En]=Tr),hs(Fr[0],on[En][1])&&hs(Fr[1],on[En][0])&&(on[En]=Tr)}else hr.transform=Tr.transform;return hr.children&&hr.children.forEach(function(Jn){lt(Jn,hr)}),hr}function Tt(hr,Tr){var Fr=je(hr,Tr),Qr=Fr.project([hr*E,Tr*E]),on;return(on=Fr.transform)?[on[0]*Qr[0]+on[1]*Qr[1]+on[2],-(on[3]*Qr[0]+on[4]*Qr[1]+on[5])]:(Qr[1]=-Qr[1],Qr)}dl(Oe)&&(Tt.invert=function(hr,Tr){var Fr=_t(Oe,[hr,-Tr]);return Fr&&(Fr[0]*=S,Fr[1]*=S,Fr)});function _t(hr,Tr){var Fr=hr.project.invert,Qr=hr.transform,on=Tr;if(Qr&&(Qr=cs(Qr),on=[Qr[0]*on[0]+Qr[1]*on[1]+Qr[2],Qr[3]*on[0]+Qr[4]*on[1]+Qr[5]]),Fr&&hr===kt(En=Fr(on)))return En;for(var En,Nn=hr.children,Jn=0,Ta=Nn&&Nn.length;Jn<Ta;++Jn)if(En=_t(Nn[Jn],Tr))return En}function kt(hr){return je(hr[0]*S,hr[1]*S)}var vr=f.geoProjection(Tt),mr=vr.stream;return vr.stream=function(hr){var Tr=vr.rotate(),Fr=mr(hr),Qr=(vr.rotate([0,0]),mr(hr));return vr.rotate(Tr),Fr.sphere=function(){Qr.polygonStart(),Qr.lineStart(),Gu(Qr,Oe),Qr.lineEnd(),Qr.polygonEnd()},Fr},vr.angle(rt==null?-30:rt*E)}function Gu(Oe,je,rt){var lt,Tt=je.edges,_t=Tt.length,kt,vr={type:"MultiPoint",coordinates:je.face},mr=je.face.filter(function(Nn){return T(Nn[1])!==90}),hr=f.geoBounds({type:"MultiPoint",coordinates:mr}),Tr=!1,Fr=-1,Qr=hr[1][0]-hr[0][0],on=Qr===180||Qr===360?[(hr[0][0]+hr[1][0])/2,(hr[0][1]+hr[1][1])/2]:f.geoCentroid(vr);if(rt)for(;++Fr<_t&&Tt[Fr]!==rt;);++Fr;for(var En=0;En<_t;++En)kt=Tt[(En+Fr)%_t],Array.isArray(kt)?(Tr||(Oe.point((lt=f.geoInterpolate(kt[0],on)(l))[0],lt[1]),Tr=!0),Oe.point((lt=f.geoInterpolate(kt[1],on)(l))[0],lt[1])):(Tr=!1,kt!==rt&&Gu(Oe,kt,je))}function hs(Oe,je){return Oe&&je&&Oe[0]===je[0]&&Oe[1]===je[1]}function Ws(Oe,je){for(var rt,lt,Tt=Oe.length,_t=null,kt=0;kt<Tt;++kt){rt=Oe[kt];for(var vr=je.length;--vr>=0;)if(lt=je[vr],rt[0]===lt[0]&&rt[1]===lt[1]){if(_t)return[_t,rt];_t=rt}}}function uu(Oe){for(var je=Oe.length,rt=[],lt=Oe[je-1],Tt=0;Tt<je;++Tt)rt.push([lt,lt=Oe[Tt]]);return rt}function dl(Oe){return Oe.project.invert||Oe.children&&Oe.children.some(dl)}var Dl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],rl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Oe){return Oe.map(function(je){return Dl[je]})});function Rl(Oe){Oe=Oe||function(rt){var lt=f.geoCentroid({type:"MultiPoint",coordinates:rt});return f.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var je=rl.map(function(rt){return{face:rt,project:Oe(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,lt){var Tt=je[rt];Tt&&(Tt.children||(Tt.children=[])).push(je[lt])}),tl(je[0],function(rt,lt){return je[rt<-u/2?lt<0?6:4:rt<0?lt<0?2:0:rt<u/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var fu=2/D(3);function Eu(Oe,je){var rt=He(Oe,je);return[rt[0]*fu,rt[1]]}Eu.invert=function(Oe,je){return He.invert(Oe/fu,je)};function lf(Oe){Oe=Oe||function(rt){var lt=f.geoCentroid({type:"MultiPoint",coordinates:rt});return f.geoProjection(Eu).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var je=rl.map(function(rt){return{face:rt,project:Oe(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,lt){var Tt=je[rt];Tt&&(Tt.children||(Tt.children=[])).push(je[lt])}),tl(je[0],function(rt,lt){return je[rt<-u/2?lt<0?6:4:rt<0?lt<0?2:0:rt<u/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Bi(Oe){Oe=Oe||function(kt){var vr=kt.length===6?f.geoCentroid({type:"MultiPoint",coordinates:kt}):kt[0];return f.geoGnomonic().scale(1).translate([0,0]).rotate([-vr[0],-vr[1]])};var je=rl.map(function(kt){for(var vr=kt.map(vs),mr=vr.length,hr=vr[mr-1],Tr,Fr=[],Qr=0;Qr<mr;++Qr)Tr=vr[Qr],Fr.push(ts([hr[0]*.9486832980505138+Tr[0]*.31622776601683794,hr[1]*.9486832980505138+Tr[1]*.31622776601683794,hr[2]*.9486832980505138+Tr[2]*.31622776601683794]),ts([Tr[0]*.9486832980505138+hr[0]*.31622776601683794,Tr[1]*.9486832980505138+hr[1]*.31622776601683794,Tr[2]*.9486832980505138+hr[2]*.31622776601683794])),hr=Tr;return Fr}),rt=[],lt=[-1,0,0,1,0,1,4,5];je.forEach(function(kt,vr){for(var mr=rl[vr],hr=mr.length,Tr=rt[vr]=[],Fr=0;Fr<hr;++Fr)je.push([mr[Fr],kt[(Fr*2+2)%(2*hr)],kt[(Fr*2+1)%(2*hr)]]),lt.push(vr),Tr.push(nl(vs(kt[(Fr*2+2)%(2*hr)]),vs(kt[(Fr*2+1)%(2*hr)])))});var Tt=je.map(function(kt){return{project:Oe(kt),face:kt}});lt.forEach(function(kt,vr){var mr=Tt[kt];mr&&(mr.children||(mr.children=[])).push(Tt[vr])});function _t(kt,vr){var mr=i(vr),hr=[mr*i(kt),mr*c(kt),c(vr)],Tr=kt<-u/2?vr<0?6:4:kt<0?vr<0?2:0:kt<u/2?vr<0?3:1:vr<0?7:5,Fr=rt[Tr];return Tt[ml(Fr[0],hr)<0?8+3*Tr:ml(Fr[1],hr)<0?8+3*Tr+1:ml(Fr[2],hr)<0?8+3*Tr+2:Tr]}return tl(Tt[0],_t).angle(-30).scale(110.625).center([0,45])}function ml(Oe,je){for(var rt=0,lt=Oe.length,Tt=0;rt<lt;++rt)Tt+=Oe[rt]*je[rt];return Tt}function nl(Oe,je){return[Oe[1]*je[2]-Oe[2]*je[1],Oe[2]*je[0]-Oe[0]*je[2],Oe[0]*je[1]-Oe[1]*je[0]]}function ts(Oe){return[a(Oe[1],Oe[0])*E,F(s(-1,o(1,Oe[2])))*E]}function vs(Oe){var je=Oe[0]*S,rt=Oe[1]*S,lt=i(rt);return[lt*i(je),lt*c(je),c(rt)]}function Il(){}function uo(Oe){if((rt=Oe.length)<4)return!1;for(var je=0,rt,lt=Oe[rt-1][1]*Oe[0][0]-Oe[rt-1][0]*Oe[0][1];++je<rt;)lt+=Oe[je-1][1]*Oe[je][0]-Oe[je-1][0]*Oe[je][1];return lt<=0}function Su(Oe,je){for(var rt=je[0],lt=je[1],Tt=!1,_t=0,kt=Oe.length,vr=kt-1;_t<kt;vr=_t++){var mr=Oe[_t],hr=mr[0],Tr=mr[1],Fr=Oe[vr],Qr=Fr[0],on=Fr[1];Tr>lt^on>lt&&rt<(Qr-hr)*(lt-Tr)/(on-Tr)+hr&&(Tt=!Tt)}return Tt}function Xo(Oe,je){var rt=je.stream,lt;if(!rt)throw new Error("invalid projection");switch(Oe&&Oe.type){case"Feature":lt=zs;break;case"FeatureCollection":lt=Xs;break;default:lt=Ho;break}return lt(Oe,rt)}function Xs(Oe,je){return{type:"FeatureCollection",features:Oe.features.map(function(rt){return zs(rt,je)})}}function zs(Oe,je){return{type:"Feature",id:Oe.id,properties:Oe.properties,geometry:Ho(Oe.geometry,je)}}function Es(Oe,je){return{type:"GeometryCollection",geometries:Oe.geometries.map(function(rt){return Ho(rt,je)})}}function Ho(Oe,je){if(!Oe)return null;if(Oe.type==="GeometryCollection")return Es(Oe,je);var rt;switch(Oe.type){case"Point":rt=ps;break;case"MultiPoint":rt=ps;break;case"LineString":rt=ku;break;case"MultiLineString":rt=ku;break;case"Polygon":rt=Kl;break;case"MultiPolygon":rt=Kl;break;case"Sphere":rt=Kl;break;default:return null}return f.geoStream(Oe,je(rt)),rt.result()}var Zi=[],Bo=[],ps={point:function(Oe,je){Zi.push([Oe,je])},result:function(){var Oe=Zi.length?Zi.length<2?{type:"Point",coordinates:Zi[0]}:{type:"MultiPoint",coordinates:Zi}:null;return Zi=[],Oe}},ku={lineStart:Il,point:function(Oe,je){Zi.push([Oe,je])},lineEnd:function(){Zi.length&&(Bo.push(Zi),Zi=[])},result:function(){var Oe=Bo.length?Bo.length<2?{type:"LineString",coordinates:Bo[0]}:{type:"MultiLineString",coordinates:Bo}:null;return Bo=[],Oe}},Kl={polygonStart:Il,lineStart:Il,point:function(Oe,je){Zi.push([Oe,je])},lineEnd:function(){var Oe=Zi.length;if(Oe){do Zi.push(Zi[0].slice());while(++Oe<4);Bo.push(Zi),Zi=[]}},polygonEnd:Il,result:function(){if(!Bo.length)return null;var Oe=[],je=[];return Bo.forEach(function(rt){uo(rt)?Oe.push([rt]):je.push(rt)}),je.forEach(function(rt){var lt=rt[0];Oe.some(function(Tt){if(Su(Tt[0],lt))return Tt.push(rt),!0})||Oe.push([rt])}),Bo=[],Oe.length?Oe.length>1?{type:"MultiPolygon",coordinates:Oe}:{type:"Polygon",coordinates:Oe[0]}:null}};function Cu(Oe){var je=Oe(A,0)[0]-Oe(-A,0)[0];function rt(lt,Tt){var _t=T(lt)<A,kt=Oe(_t?lt:lt>0?lt-u:lt+u,Tt),vr=(kt[0]-kt[1])*p,mr=(kt[0]+kt[1])*p;if(_t)return[vr,mr];var hr=je*p,Tr=vr>0^mr>0?-1:1;return[Tr*vr-d(mr)*hr,Tr*mr-d(vr)*hr]}return Oe.invert&&(rt.invert=function(lt,Tt){var _t=(lt+Tt)*p,kt=(Tt-lt)*p,vr=T(_t)<.5*je&&T(kt)<.5*je;if(!vr){var mr=je*p,hr=_t>0^kt>0?-1:1,Tr=-hr*lt+(kt>0?1:-1)*mr,Fr=-hr*Tt+(_t>0?1:-1)*mr;_t=(-Tr-Fr)*p,kt=(Tr-Fr)*p}var Qr=Oe.invert(_t,kt);return vr||(Qr[0]+=_t>0?u:-u),Qr}),f.geoProjection(rt).rotate([-90,-90,45]).clipAngle(180-.001)}function bt(){return Cu(Er).scale(176.423)}function Ut(){return Cu(ma).scale(111.48)}function dr(Oe,je){if(!(0<=(je=+je)&&je<=20))throw new Error("invalid digits");function rt(hr){var Tr=hr.length,Fr=2,Qr=new Array(Tr);for(Qr[0]=+hr[0].toFixed(je),Qr[1]=+hr[1].toFixed(je);Fr<Tr;)Qr[Fr]=hr[Fr],++Fr;return Qr}function lt(hr){return hr.map(rt)}function Tt(hr){for(var Tr=rt(hr[0]),Fr=[Tr],Qr=1;Qr<hr.length;Qr++){var on=rt(hr[Qr]);(on.length>2||on[0]!=Tr[0]||on[1]!=Tr[1])&&(Fr.push(on),Tr=on)}return Fr.length===1&&hr.length>1&&Fr.push(rt(hr[hr.length-1])),Fr}function _t(hr){return hr.map(Tt)}function kt(hr){if(hr==null)return hr;var Tr;switch(hr.type){case"GeometryCollection":Tr={type:"GeometryCollection",geometries:hr.geometries.map(kt)};break;case"Point":Tr={type:"Point",coordinates:rt(hr.coordinates)};break;case"MultiPoint":Tr={type:hr.type,coordinates:lt(hr.coordinates)};break;case"LineString":Tr={type:hr.type,coordinates:Tt(hr.coordinates)};break;case"MultiLineString":case"Polygon":Tr={type:hr.type,coordinates:_t(hr.coordinates)};break;case"MultiPolygon":Tr={type:"MultiPolygon",coordinates:hr.coordinates.map(_t)};break;default:return hr}return hr.bbox!=null&&(Tr.bbox=hr.bbox),Tr}function vr(hr){var Tr={type:"Feature",properties:hr.properties,geometry:kt(hr.geometry)};return hr.id!=null&&(Tr.id=hr.id),hr.bbox!=null&&(Tr.bbox=hr.bbox),Tr}if(Oe!=null)switch(Oe.type){case"Feature":return vr(Oe);case"FeatureCollection":{var mr={type:"FeatureCollection",features:Oe.features.map(vr)};return Oe.bbox!=null&&(mr.bbox=Oe.bbox),mr}default:return kt(Oe)}return Oe}function cr(Oe){var je=c(Oe);function rt(lt,Tt){var _t=je?m(lt*je/2)/je:lt/2;if(!Tt)return[2*_t,-Oe];var kt=2*e(_t*c(Tt)),vr=1/m(Tt);return[c(kt)*vr,Tt+(1-i(kt))*vr-Oe]}return rt.invert=function(lt,Tt){if(T(Tt+=Oe)<l)return[je?2*e(je*lt/2)/je:lt,0];var _t=lt*lt+Tt*Tt,kt=0,vr=10,mr;do{var hr=m(kt),Tr=1/i(kt),Fr=_t-2*Tt*kt+kt*kt;kt-=mr=(hr*Fr+2*(kt-Tt))/(2+Fr*Tr*Tr+2*(kt-Tt)*hr)}while(T(mr)>l&&--vr>0);var Qr=lt*(hr=m(kt)),on=m(T(Tt)<T(kt+1/hr)?F(Qr)*.5:I(Qr)*.5+u/4)/c(kt);return[je?2*e(je*on)/je:2*on,kt]},rt}function zr(){return Ye(cr).scale(131.215)}var ln=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ln.forEach(function(Oe){Oe[1]*=1.0144});function _n(Oe,je){var rt=o(18,T(je)*36/u),lt=r(rt),Tt=rt-lt,_t=(Fr=ln[lt])[0],kt=Fr[1],vr=(Fr=ln[++lt])[0],mr=Fr[1],hr=(Fr=ln[o(19,++lt)])[0],Tr=Fr[1],Fr;return[Oe*(vr+Tt*(hr-_t)/2+Tt*Tt*(hr-2*vr+_t)/2),(je>0?A:-A)*(mr+Tt*(Tr-kt)/2+Tt*Tt*(Tr-2*mr+kt)/2)]}_n.invert=function(Oe,je){var rt=je/A,lt=rt*90,Tt=o(18,T(lt/5)),_t=s(0,r(Tt));do{var kt=ln[_t][1],vr=ln[_t+1][1],mr=ln[o(19,_t+2)][1],hr=mr-kt,Tr=mr-2*vr+kt,Fr=2*(T(rt)-vr)/hr,Qr=Tr/hr,on=Fr*(1-Qr*Fr*(1-2*Qr*Fr));if(on>=0||_t===1){lt=(je>=0?5:-5)*(on+Tt);var En=50,Nn;do Tt=o(18,T(lt)/5),_t=r(Tt),on=Tt-_t,kt=ln[_t][1],vr=ln[_t+1][1],mr=ln[o(19,_t+2)][1],lt-=(Nn=(je>=0?A:-A)*(vr+on*(mr-kt)/2+on*on*(mr-2*vr+kt)/2)-je)*E;while(T(Nn)>y&&--En>0);break}}while(--_t>=0);var Jn=ln[_t][0],Ta=ln[_t+1][0],Ea=ln[o(19,_t+2)][0];return[Oe/(Ta+on*(Ea-Jn)/2+on*on*(Ea-2*Ta+Jn)/2),lt*S]};function Pn(){return f.geoProjection(_n).scale(152.63)}function zn(Oe){function je(rt,lt){var Tt=i(lt),_t=(Oe-1)/(Oe-Tt*i(rt));return[_t*Tt*c(rt),_t*c(lt)]}return je.invert=function(rt,lt){var Tt=rt*rt+lt*lt,_t=D(Tt),kt=(Oe-D(1-Tt*(Oe+1)/(Oe-1)))/((Oe-1)/_t+_t/(Oe-1));return[a(rt*kt,_t*D(1-kt*kt)),_t?F(lt*kt/_t):0]},je}function Xn(Oe,je){var rt=zn(Oe);if(!je)return rt;var lt=i(je),Tt=c(je);function _t(kt,vr){var mr=rt(kt,vr),hr=mr[1],Tr=hr*Tt/(Oe-1)+lt;return[mr[0]*lt/Tr,hr/Tr]}return _t.invert=function(kt,vr){var mr=(Oe-1)/(Oe-1-vr*Tt);return rt.invert(mr*kt,mr*vr*lt)},_t}function wn(){var Oe=2,je=0,rt=f.geoProjectionMutator(Xn),lt=rt(Oe,je);return lt.distance=function(Tt){return arguments.length?rt(Oe=+Tt,je):Oe},lt.tilt=function(Tt){return arguments.length?rt(Oe,je=Tt*S):je*E},lt.scale(432.147).clipAngle(I(1/Oe)*E-1e-6)}var Un=1e-4,On=1e4,jn=-180,ia=jn+Un,Ga=180,za=Ga-Un,Ya=-90,ja=Ya+Un,aa=90,ba=aa-Un;function Qa(Oe){return Oe.length>0}function si(Oe){return Math.floor(Oe*On)/On}function Mi(Oe){return Oe===Ya||Oe===aa?[0,Oe]:[jn,si(Oe)]}function Ei(Oe){var je=Oe[0],rt=Oe[1],lt=!1;return je<=ia?(je=jn,lt=!0):je>=za&&(je=Ga,lt=!0),rt<=ja?(rt=Ya,lt=!0):rt>=ba&&(rt=aa,lt=!0),lt?[je,rt]:Oe}function wi(Oe){return Oe.map(Ei)}function Li(Oe,je,rt){for(var lt=0,Tt=Oe.length;lt<Tt;++lt){var _t=Oe[lt].slice();rt.push({index:-1,polygon:je,ring:_t});for(var kt=0,vr=_t.length;kt<vr;++kt){var mr=_t[kt],hr=mr[0],Tr=mr[1];if(hr<=ia||hr>=za||Tr<=ja||Tr>=ba){_t[kt]=Ei(mr);for(var Fr=kt+1;Fr<vr;++Fr){var Qr=_t[Fr],on=Qr[0],En=Qr[1];if(on>ia&&on<za&&En>ja&&En<ba)break}if(Fr===kt+1)continue;if(kt){var Nn={index:-1,polygon:je,ring:_t.slice(0,kt+1)};Nn.ring[Nn.ring.length-1]=Mi(Tr),rt[rt.length-1]=Nn}else rt.pop();if(Fr>=vr)break;rt.push({index:-1,polygon:je,ring:_t=_t.slice(Fr-1)}),_t[0]=Mi(_t[0][1]),kt=-1,vr=_t.length}}}}function hi(Oe){var je,rt=Oe.length,lt={},Tt={},_t,kt,vr,mr,hr;for(je=0;je<rt;++je){if(_t=Oe[je],kt=_t.ring[0],mr=_t.ring[_t.ring.length-1],kt[0]===mr[0]&&kt[1]===mr[1]){_t.polygon.push(_t.ring),Oe[je]=null;continue}_t.index=je,lt[kt]=Tt[mr]=_t}for(je=0;je<rt;++je)if(_t=Oe[je],_t){if(kt=_t.ring[0],mr=_t.ring[_t.ring.length-1],vr=Tt[kt],hr=lt[mr],delete lt[kt],delete Tt[mr],kt[0]===mr[0]&&kt[1]===mr[1]){_t.polygon.push(_t.ring);continue}vr?(delete Tt[kt],delete lt[vr.ring[0]],vr.ring.pop(),Oe[vr.index]=null,_t={index:-1,polygon:vr.polygon,ring:vr.ring.concat(_t.ring)},vr===hr?_t.polygon.push(_t.ring):(_t.index=rt++,Oe.push(lt[_t.ring[0]]=Tt[_t.ring[_t.ring.length-1]]=_t))):hr?(delete lt[mr],delete Tt[hr.ring[hr.ring.length-1]],_t.ring.pop(),_t={index:rt++,polygon:hr.polygon,ring:_t.ring.concat(hr.ring)},Oe[hr.index]=null,Oe.push(lt[_t.ring[0]]=Tt[_t.ring[_t.ring.length-1]]=_t)):(_t.ring.push(_t.ring[0]),_t.polygon.push(_t.ring))}}function Co(Oe){var je={type:"Feature",geometry:ao(Oe.geometry)};return Oe.id!=null&&(je.id=Oe.id),Oe.bbox!=null&&(je.bbox=Oe.bbox),Oe.properties!=null&&(je.properties=Oe.properties),je}function ao(Oe){if(Oe==null)return Oe;var je,rt,lt,Tt;switch(Oe.type){case"GeometryCollection":je={type:"GeometryCollection",geometries:Oe.geometries.map(ao)};break;case"Point":je={type:"Point",coordinates:Ei(Oe.coordinates)};break;case"MultiPoint":case"LineString":je={type:Oe.type,coordinates:wi(Oe.coordinates)};break;case"MultiLineString":je={type:"MultiLineString",coordinates:Oe.coordinates.map(wi)};break;case"Polygon":{var _t=[];Li(Oe.coordinates,_t,rt=[]),hi(rt),je={type:"Polygon",coordinates:_t};break}case"MultiPolygon":{rt=[],lt=-1,Tt=Oe.coordinates.length;for(var kt=new Array(Tt);++lt<Tt;)Li(Oe.coordinates[lt],kt[lt]=[],rt);hi(rt),je={type:"MultiPolygon",coordinates:kt.filter(Qa)};break}default:return Oe}return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}function li(Oe){if(Oe==null)return Oe;switch(Oe.type){case"Feature":return Co(Oe);case"FeatureCollection":{var je={type:"FeatureCollection",features:Oe.features.map(Co)};return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}default:return ao(Oe)}}function Aa(Oe,je){var rt=m(je/2),lt=c(_*rt);return[Oe*(.74482-.34588*lt*lt),1.70711*rt]}Aa.invert=function(Oe,je){var rt=je/1.70711,lt=c(_*rt);return[Oe/(.74482-.34588*lt*lt),2*e(rt)]};function Si(){return f.geoProjection(Aa).scale(146.153)}function _o(Oe,je,rt){var lt=f.geoInterpolate(je,rt),Tt=lt(.5),_t=f.geoRotation([-Tt[0],-Tt[1]])(je),kt=lt.distance/2,vr=-F(c(_t[1]*S)/c(kt)),mr=[-Tt[0],-Tt[1],-(_t[0]>0?u-vr:vr)*E],hr=f.geoProjection(Oe(kt)).rotate(mr),Tr=f.geoRotation(mr),Fr=hr.center;return delete hr.rotate,hr.center=function(Qr){return arguments.length?Fr(Tr(Qr)):Tr.invert(Fr())},hr.clipAngle(90)}function Eo(Oe){var je=i(Oe);function rt(lt,Tt){var _t=f.geoGnomonicRaw(lt,Tt);return _t[0]*=je,_t}return rt.invert=function(lt,Tt){return f.geoGnomonicRaw.invert(lt/je,Tt)},rt}function ds(){return Os([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Os(Oe,je){return _o(Eo,Oe,je)}function Lo(Oe){if(!(Oe*=2))return f.geoAzimuthalEquidistantRaw;var je=-Oe/2,rt=-je,lt=Oe*Oe,Tt=m(rt),_t=.5/c(rt);function kt(vr,mr){var hr=I(i(mr)*i(vr-je)),Tr=I(i(mr)*i(vr-rt)),Fr=mr<0?-1:1;return hr*=hr,Tr*=Tr,[(hr-Tr)/(2*Oe),Fr*D(4*lt*Tr-(lt-hr+Tr)*(lt-hr+Tr))/(2*Oe)]}return kt.invert=function(vr,mr){var hr=mr*mr,Tr=i(D(hr+(Qr=vr+je)*Qr)),Fr=i(D(hr+(Qr=vr+rt)*Qr)),Qr,on;return[a(on=Tr-Fr,Qr=(Tr+Fr)*Tt),(mr<0?-1:1)*I(D(Qr*Qr+on*on)*_t)]},kt}function al(){return Ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ns(Oe,je){return _o(Lo,Oe,je)}function zo(Oe,je){if(T(je)<l)return[Oe,0];var rt=T(je/A),lt=F(rt);if(T(Oe)<l||T(T(je)-A)<l)return[0,d(je)*u*m(lt/2)];var Tt=i(lt),_t=T(u/Oe-Oe/u)/2,kt=_t*_t,vr=Tt/(rt+Tt-1),mr=vr*(2/rt-1),hr=mr*mr,Tr=hr+kt,Fr=vr-hr,Qr=kt+vr;return[d(Oe)*u*(_t*Fr+D(kt*Fr*Fr-Tr*(vr*vr-hr)))/Tr,d(je)*u*(mr*Qr-_t*D((kt+1)*Tr-Qr*Qr))/Tr]}zo.invert=function(Oe,je){if(T(je)<l)return[Oe,0];if(T(Oe)<l)return[0,A*c(2*e(je/u))];var rt=(Oe/=u)*Oe,lt=(je/=u)*je,Tt=rt+lt,_t=Tt*Tt,kt=-T(je)*(1+Tt),vr=kt-2*lt+rt,mr=-2*kt+1+2*lt+_t,hr=lt/mr+(2*vr*vr*vr/(mr*mr*mr)-9*kt*vr/(mr*mr))/27,Tr=(kt-vr*vr/(3*mr))/mr,Fr=2*D(-Tr/3),Qr=I(3*hr/(Tr*Fr))/3;return[u*(Tt-1+D(1+2*(rt-lt)+_t))/(2*Oe),d(je)*u*(-Fr*i(Qr+u/3)-vr/(3*mr))]};function Po(){return f.geoProjection(zo).scale(79.4183)}function Jl(Oe,je){if(T(je)<l)return[Oe,0];var rt=T(je/A),lt=F(rt);if(T(Oe)<l||T(T(je)-A)<l)return[0,d(je)*u*m(lt/2)];var Tt=i(lt),_t=T(u/Oe-Oe/u)/2,kt=_t*_t,vr=Tt*(D(1+kt)-_t*Tt)/(1+kt*rt*rt);return[d(Oe)*u*vr,d(je)*u*D(1-vr*(2*_t+vr))]}Jl.invert=function(Oe,je){if(!Oe)return[0,A*c(2*e(je/u))];var rt=T(Oe/u),lt=(1-rt*rt-(je/=u)*je)/(2*rt),Tt=lt*lt,_t=D(Tt+1);return[d(Oe)*u*(_t-lt),d(je)*A*c(2*a(D((1-2*lt*rt)*(lt+_t)-rt),D(_t+lt+rt)))]};function cu(){return f.geoProjection(Jl).scale(79.4183)}function gs(Oe,je){if(T(je)<l)return[Oe,0];var rt=je/A,lt=F(rt);if(T(Oe)<l||T(T(je)-A)<l)return[0,u*m(lt/2)];var Tt=(u/Oe-Oe/u)/2,_t=rt/(1+i(lt));return[u*(d(Oe)*D(Tt*Tt+1-_t*_t)-Tt),u*_t]}gs.invert=function(Oe,je){if(!je)return[Oe,0];var rt=je/u,lt=(u*u*(1-rt*rt)-Oe*Oe)/(2*u*Oe);return[Oe?u*(d(Oe)*D(lt*lt+1)-lt):0,A*c(2*e(rt))]};function Lu(){return f.geoProjection(gs).scale(79.4183)}function $l(Oe,je){if(!je)return[Oe,0];var rt=T(je);if(!Oe||rt===A)return[0,je];var lt=rt/A,Tt=lt*lt,_t=(8*lt-Tt*(Tt+2)-5)/(2*Tt*(lt-1)),kt=_t*_t,vr=lt*_t,mr=Tt+kt+2*vr,hr=lt+3*_t,Tr=Oe/A,Fr=Tr+1/Tr,Qr=d(T(Oe)-A)*D(Fr*Fr-4),on=Qr*Qr,En=mr*(Tt+kt*on-1)+(1-Tt)*(Tt*(hr*hr+4*kt)+12*vr*kt+4*kt*kt),Nn=(Qr*(mr+kt-1)+2*D(En))/(4*mr+on);return[d(Oe)*A*Nn,d(je)*A*D(1+Qr*T(Nn)-Nn*Nn)]}$l.invert=function(Oe,je){var rt;if(!Oe||!je)return[Oe,je];je/=u;var lt=d(Oe)*Oe/A,Tt=(lt*lt-1+4*je*je)/T(lt),_t=Tt*Tt,kt=2*je,vr=50;do{var mr=kt*kt,hr=(8*kt-mr*(mr+2)-5)/(2*mr*(kt-1)),Tr=(3*kt-mr*kt-10)/(2*mr*kt),Fr=hr*hr,Qr=kt*hr,on=kt+hr,En=on*on,Nn=kt+3*hr,Jn=En*(mr+Fr*_t-1)+(1-mr)*(mr*(Nn*Nn+4*Fr)+Fr*(12*Qr+4*Fr)),Ta=-2*on*(4*Qr*Fr+(1-4*mr+3*mr*mr)*(1+Tr)+Fr*(-6+14*mr-_t+(-8+8*mr-2*_t)*Tr)+Qr*(-8+12*mr+(-10+10*mr-_t)*Tr)),Ea=D(Jn),ni=Tt*(En+Fr-1)+2*Ea-lt*(4*En+_t),qa=Tt*(2*hr*Tr+2*on*(1+Tr))+Ta/Ea-8*on*(Tt*(-1+Fr+En)+2*Ea)*(1+Tr)/(_t+4*En);kt-=rt=ni/qa}while(rt>l&&--vr>0);return[d(Oe)*(D(Tt*Tt+4)+Tt)*u/4,A*kt]};function Of(){return f.geoProjection($l).scale(127.16)}function Yu(Oe,je,rt,lt,Tt){function _t(kt,vr){var mr=rt*c(lt*vr),hr=D(1-mr*mr),Tr=D(2/(1+hr*i(kt*=Tt)));return[Oe*hr*Tr*c(kt),je*mr*Tr]}return _t.invert=function(kt,vr){var mr=kt/Oe,hr=vr/je,Tr=D(mr*mr+hr*hr),Fr=2*F(Tr/2);return[a(kt*m(Fr),Oe*Tr)/Tt,Tr&&F(vr*c(Fr)/(je*rt*Tr))/lt]},_t}function hu(Oe,je,rt,lt){var Tt=u/3;Oe=s(Oe,l),je=s(je,l),Oe=o(Oe,A),je=o(je,u-l),rt=s(rt,0),rt=o(rt,100-l),lt=s(lt,l);var _t=rt/100+1,kt=lt/100,vr=I(_t*i(Tt))/Tt,mr=c(Oe)/c(vr*A),hr=je/u,Tr=D(kt*c(Oe/2)/c(je/2)),Fr=Tr/D(hr*mr*vr),Qr=1/(Tr*D(hr*mr*vr));return Yu(Fr,Qr,mr,vr,hr)}function Wu(){var Oe=65*S,je=60*S,rt=20,lt=200,Tt=f.geoProjectionMutator(hu),_t=Tt(Oe,je,rt,lt);return _t.poleline=function(kt){return arguments.length?Tt(Oe=+kt*S,je,rt,lt):Oe*E},_t.parallels=function(kt){return arguments.length?Tt(Oe,je=+kt*S,rt,lt):je*E},_t.inflation=function(kt){return arguments.length?Tt(Oe,je,rt=+kt,lt):rt},_t.ratio=function(kt){return arguments.length?Tt(Oe,je,rt,lt=+kt):lt},_t.scale(163.775)}function Ss(){return Wu().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var yl=4*u+3*D(3),Pu=2*D(2*u*D(3)/yl),vu=be(Pu*D(3)/u,Pu,yl/6);function jo(){return f.geoProjection(vu).scale(176.84)}function Xu(Oe,je){return[Oe*D(1-3*je*je/(u*u)),je]}Xu.invert=function(Oe,je){return[Oe/D(1-3*je*je/(u*u)),je]};function wf(){return f.geoProjection(Xu).scale(152.63)}function rs(Oe,je){var rt=i(je),lt=i(Oe)*rt,Tt=1-lt,_t=i(Oe=a(c(Oe)*rt,-c(je))),kt=c(Oe);return rt=D(1-lt*lt),[kt*rt-_t*Tt,-_t*rt-kt*Tt]}rs.invert=function(Oe,je){var rt=(Oe*Oe+je*je)/-2,lt=D(-rt*(2+rt)),Tt=je*rt+Oe*lt,_t=Oe*rt-je*lt,kt=D(_t*_t+Tt*Tt);return[a(lt*Tt,kt*(1+rt)),kt?-F(lt*_t/kt):0]};function Du(){return f.geoProjection(rs).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Ru(Oe,je){var rt=X(Oe,je);return[(rt[0]+Oe/A)/2,(rt[1]+je)/2]}Ru.invert=function(Oe,je){var rt=Oe,lt=je,Tt=25;do{var _t=i(lt),kt=c(lt),vr=c(2*lt),mr=kt*kt,hr=_t*_t,Tr=c(rt),Fr=i(rt/2),Qr=c(rt/2),on=Qr*Qr,En=1-hr*Fr*Fr,Nn=En?I(_t*Fr)*D(Jn=1/En):Jn=0,Jn,Ta=.5*(2*Nn*_t*Qr+rt/A)-Oe,Ea=.5*(Nn*kt+lt)-je,ni=.5*Jn*(hr*on+Nn*_t*Fr*mr)+.5/A,qa=Jn*(Tr*vr/4-Nn*kt*Qr),ai=.125*Jn*(vr*Qr-Nn*kt*hr*Tr),Ti=.5*Jn*(mr*Fr+Nn*on*_t)+.5,Yr=qa*ai-Ti*ni,qe=(Ea*qa-Ta*Ti)/Yr,$t=(Ta*ai-Ea*ni)/Yr;rt-=qe,lt-=$t}while((T(qe)>l||T($t)>l)&&--Tt>0);return[rt,lt]};function ju(){return f.geoProjection(Ru).scale(158.837)}x.geoNaturalEarth=f.geoNaturalEarth1,x.geoNaturalEarthRaw=f.geoNaturalEarth1Raw,x.geoAiry=j,x.geoAiryRaw=ee,x.geoAitoff=ae,x.geoAitoffRaw=X,x.geoArmadillo=K,x.geoArmadilloRaw=fe,x.geoAugust=U,x.geoAugustRaw=J,x.geoBaker=Z,x.geoBakerRaw=re,x.geoBerghaus=ie,x.geoBerghausRaw=Q,x.geoBertin1953=xe,x.geoBertin1953Raw=ge,x.geoBoggs=Ze,x.geoBoggsRaw=Ce,x.geoBonne=dt,x.geoBonneRaw=Ge,x.geoBottomley=Qt,x.geoBottomleyRaw=Rt,x.geoBromley=Ct,x.geoBromleyRaw=Bt,x.geoChamberlin=Ee,x.geoChamberlinRaw=Xe,x.geoChamberlinAfrica=We,x.geoCollignon=Ke,x.geoCollignonRaw=He,x.geoCraig=At,x.geoCraigRaw=et,x.geoCraster=Gt,x.geoCrasterRaw=Mt,x.geoCylindricalEqualArea=Ht,x.geoCylindricalEqualAreaRaw=zt,x.geoCylindricalStereographic=Wt,x.geoCylindricalStereographicRaw=Xt,x.geoEckert1=Gr,x.geoEckert1Raw=sr,x.geoEckert2=en,x.geoEckert2Raw=cn,x.geoEckert3=rr,x.geoEckert3Raw=st,x.geoEckert4=jt,x.geoEckert4Raw=er,x.geoEckert5=it,x.geoEckert5Raw=Mr,x.geoEckert6=ft,x.geoEckert6Raw=Qe,x.geoEisenlohr=Nt,x.geoEisenlohrRaw=Et,x.geoFahey=ot,x.geoFaheyRaw=Le,x.geoFoucaut=pt,x.geoFoucautRaw=ut,x.geoFoucautSinusoidal=xt,x.geoFoucautSinusoidalRaw=Pt,x.geoGilbert=ur,x.geoGingery=Zr,x.geoGingeryRaw=Pr,x.geoGinzburg4=Or,x.geoGinzburg4Raw=br,x.geoGinzburg5=Lr,x.geoGinzburg5Raw=Hr,x.geoGinzburg6=It,x.geoGinzburg6Raw=nt,x.geoGinzburg8=fr,x.geoGinzburg8Raw=Jt,x.geoGinzburg9=Vr,x.geoGinzburg9Raw=Nr,x.geoGringorten=mn,x.geoGringortenRaw=Er,x.geoGuyou=Ka,x.geoGuyouRaw=ma,x.geoHammer=se,x.geoHammerRaw=oe,x.geoHammerRetroazimuthal=Sr,x.geoHammerRetroazimuthalRaw=ri,x.geoHealpix=Xa,x.geoHealpixRaw=ra,x.geoHill=Yt,x.geoHillRaw=mi,x.geoHomolosine=Tn,x.geoHomolosineRaw=Cn,x.geoHufnagel=_r,x.geoHufnagelRaw=gn,x.geoHyperelliptical=Yn,x.geoHyperellipticalRaw=An,x.geoInterrupt=ca,x.geoInterruptedBoggs=ka,x.geoInterruptedHomolosine=Ia,x.geoInterruptedMollweide=ro,x.geoInterruptedMollweideHemispheres=Ks,x.geoInterruptedSinuMollweide=Gl,x.geoInterruptedSinusoidal=Hs,x.geoKavrayskiy7=ji,x.geoKavrayskiy7Raw=Gs,x.geoLagrange=Ml,x.geoLagrangeRaw=Io,x.geoLarrivee=fl,x.geoLarriveeRaw=Ii,x.geoLaskowski=Fi,x.geoLaskowskiRaw=lo,x.geoLittrow=no,x.geoLittrowRaw=po,x.geoLoximuthal=Js,x.geoLoximuthalRaw=us,x.geoMiller=es,x.geoMillerRaw=au,x.geoModifiedStereographic=Is,x.geoModifiedStereographicRaw=bu,x.geoModifiedStereographicAlaska=Yl,x.geoModifiedStereographicGs48=Vu,x.geoModifiedStereographicGs50=Hu,x.geoModifiedStereographicMiller=Ys,x.geoModifiedStereographicLee=El,x.geoMollweide=Re,x.geoMollweideRaw=Se,x.geoMtFlatPolarParabolic=_u,x.geoMtFlatPolarParabolicRaw=ou,x.geoMtFlatPolarQuartic=wu,x.geoMtFlatPolarQuarticRaw=Wl,x.geoMtFlatPolarSinusoidal=Xl,x.geoMtFlatPolarSinusoidalRaw=$s,x.geoNaturalEarth2=Ts,x.geoNaturalEarth2Raw=hl,x.geoNellHammer=su,x.geoNellHammerRaw=Sl,x.geoInterruptedQuarticAuthalic=Au,x.geoNicolosi=Qs,x.geoNicolosiRaw=jl,x.geoPatterson=go,x.geoPattersonRaw=Fs,x.geoPolyconic=Ll,x.geoPolyconicRaw=Cl,x.geoPolyhedral=tl,x.geoPolyhedralButterfly=Rl,x.geoPolyhedralCollignon=lf,x.geoPolyhedralWaterman=Bi,x.geoProject=Xo,x.geoGringortenQuincuncial=bt,x.geoPeirceQuincuncial=Ut,x.geoPierceQuincuncial=Ut,x.geoQuantize=dr,x.geoQuincuncial=Cu,x.geoRectangularPolyconic=zr,x.geoRectangularPolyconicRaw=cr,x.geoRobinson=Pn,x.geoRobinsonRaw=_n,x.geoSatellite=wn,x.geoSatelliteRaw=Xn,x.geoSinuMollweide=sn,x.geoSinuMollweideRaw=yn,x.geoSinusoidal=Ie,x.geoSinusoidalRaw=ze,x.geoStitch=li,x.geoTimes=Si,x.geoTimesRaw=Aa,x.geoTwoPointAzimuthal=Os,x.geoTwoPointAzimuthalRaw=Eo,x.geoTwoPointAzimuthalUsa=ds,x.geoTwoPointEquidistant=Ns,x.geoTwoPointEquidistantRaw=Lo,x.geoTwoPointEquidistantUsa=al,x.geoVanDerGrinten=Po,x.geoVanDerGrintenRaw=zo,x.geoVanDerGrinten2=cu,x.geoVanDerGrinten2Raw=Jl,x.geoVanDerGrinten3=Lu,x.geoVanDerGrinten3Raw=gs,x.geoVanDerGrinten4=Of,x.geoVanDerGrinten4Raw=$l,x.geoWagner=Wu,x.geoWagner7=Ss,x.geoWagnerRaw=hu,x.geoWagner4=jo,x.geoWagner4Raw=vu,x.geoWagner6=wf,x.geoWagner6Raw=Xu,x.geoWiechel=Du,x.geoWiechelRaw=rs,x.geoWinkel3=ju,x.geoWinkel3Raw=Ru,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-array")):(x=x||self,f(x.d3=x.d3||{},x.d3))})(this,function(x,f){function M(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(bt){a(e,bt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(bt,Ut,dr){var cr=bt.s=Ut+dr,zr=cr-Ut,ln=cr-zr;bt.t=Ut-ln+(dr-zr)}var i=1e-6,n=1e-12,r=Math.PI,v=r/2,s=r/4,o=r*2,b=180/r,g=r/180,d=Math.abs,c=Math.atan,m=Math.atan2,l=Math.cos,y=Math.ceil,u=Math.exp,A=Math.log,_=Math.pow,p=Math.sin,w=Math.sign||function(bt){return bt>0?1:bt<0?-1:0},h=Math.sqrt,L=Math.tan;function E(bt){return bt>1?0:bt<-1?r:Math.acos(bt)}function S(bt){return bt>1?v:bt<-1?-v:Math.asin(bt)}function P(bt){return(bt=p(bt/2))*bt}function F(){}function I(bt,Ut){bt&&R.hasOwnProperty(bt.type)&&R[bt.type](bt,Ut)}var D={Feature:function(bt,Ut){I(bt.geometry,Ut)},FeatureCollection:function(bt,Ut){for(var dr=bt.features,cr=-1,zr=dr.length;++cr<zr;)I(dr[cr].geometry,Ut)}},R={Sphere:function(bt,Ut){Ut.sphere()},Point:function(bt,Ut){bt=bt.coordinates,Ut.point(bt[0],bt[1],bt[2])},MultiPoint:function(bt,Ut){for(var dr=bt.coordinates,cr=-1,zr=dr.length;++cr<zr;)bt=dr[cr],Ut.point(bt[0],bt[1],bt[2])},LineString:function(bt,Ut){O(bt.coordinates,Ut,0)},MultiLineString:function(bt,Ut){for(var dr=bt.coordinates,cr=-1,zr=dr.length;++cr<zr;)O(dr[cr],Ut,0)},Polygon:function(bt,Ut){z(bt.coordinates,Ut)},MultiPolygon:function(bt,Ut){for(var dr=bt.coordinates,cr=-1,zr=dr.length;++cr<zr;)z(dr[cr],Ut)},GeometryCollection:function(bt,Ut){for(var dr=bt.geometries,cr=-1,zr=dr.length;++cr<zr;)I(dr[cr],Ut)}};function O(bt,Ut,dr){var cr=-1,zr=bt.length-dr,ln;for(Ut.lineStart();++cr<zr;)ln=bt[cr],Ut.point(ln[0],ln[1],ln[2]);Ut.lineEnd()}function z(bt,Ut){var dr=-1,cr=bt.length;for(Ut.polygonStart();++dr<cr;)O(bt[dr],Ut,1);Ut.polygonEnd()}function H(bt,Ut){bt&&D.hasOwnProperty(bt.type)?D[bt.type](bt,Ut):I(bt,Ut)}var Y=M(),ee=M(),j,X,ae,fe,K,J={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Y.reset(),J.lineStart=U,J.lineEnd=V},polygonEnd:function(){var bt=+Y;ee.add(bt<0?o+bt:bt),this.lineStart=this.lineEnd=this.point=F},sphere:function(){ee.add(o)}};function U(){J.point=q}function V(){re(j,X)}function q(bt,Ut){J.point=re,j=bt,X=Ut,bt*=g,Ut*=g,ae=bt,fe=l(Ut=Ut/2+s),K=p(Ut)}function re(bt,Ut){bt*=g,Ut*=g,Ut=Ut/2+s;var dr=bt-ae,cr=dr>=0?1:-1,zr=cr*dr,ln=l(Ut),_n=p(Ut),Pn=K*_n,zn=fe*ln+Pn*l(zr),Xn=Pn*cr*p(zr);Y.add(m(Xn,zn)),ae=bt,fe=ln,K=_n}function Z(bt){return ee.reset(),H(bt,J),ee*2}function Q(bt){return[m(bt[1],bt[0]),S(bt[2])]}function ie(bt){var Ut=bt[0],dr=bt[1],cr=l(dr);return[cr*l(Ut),cr*p(Ut),p(dr)]}function oe(bt,Ut){return bt[0]*Ut[0]+bt[1]*Ut[1]+bt[2]*Ut[2]}function ne(bt,Ut){return[bt[1]*Ut[2]-bt[2]*Ut[1],bt[2]*Ut[0]-bt[0]*Ut[2],bt[0]*Ut[1]-bt[1]*Ut[0]]}function se(bt,Ut){bt[0]+=Ut[0],bt[1]+=Ut[1],bt[2]+=Ut[2]}function _e(bt,Ut){return[bt[0]*Ut,bt[1]*Ut,bt[2]*Ut]}function ue(bt){var Ut=h(bt[0]*bt[0]+bt[1]*bt[1]+bt[2]*bt[2]);bt[0]/=Ut,bt[1]/=Ut,bt[2]/=Ut}var ge,xe,ye,be,Se,Re,Ve,Ae,Ce=M(),Ze,Ye,ze={point:Ie,lineStart:dt,lineEnd:Rt,polygonStart:function(){ze.point=Qt,ze.lineStart=Bt,ze.lineEnd=Ct,Ce.reset(),J.polygonStart()},polygonEnd:function(){J.polygonEnd(),ze.point=Ie,ze.lineStart=dt,ze.lineEnd=Rt,Y<0?(ge=-(ye=180),xe=-(be=90)):Ce>i?be=90:Ce<-i&&(xe=-90),Ye[0]=ge,Ye[1]=ye},sphere:function(){ge=-(ye=180),xe=-(be=90)}};function Ie(bt,Ut){Ze.push(Ye=[ge=bt,ye=bt]),Ut<xe&&(xe=Ut),Ut>be&&(be=Ut)}function Ge(bt,Ut){var dr=ie([bt*g,Ut*g]);if(Ae){var cr=ne(Ae,dr),zr=[cr[1],-cr[0],0],ln=ne(zr,cr);ue(ln),ln=Q(ln);var _n=bt-Se,Pn=_n>0?1:-1,zn=ln[0]*b*Pn,Xn,wn=d(_n)>180;wn^(Pn*Se<zn&&zn<Pn*bt)?(Xn=ln[1]*b,Xn>be&&(be=Xn)):(zn=(zn+360)%360-180,wn^(Pn*Se<zn&&zn<Pn*bt)?(Xn=-ln[1]*b,Xn<xe&&(xe=Xn)):(Ut<xe&&(xe=Ut),Ut>be&&(be=Ut))),wn?bt<Se?Kt(ge,bt)>Kt(ge,ye)&&(ye=bt):Kt(bt,ye)>Kt(ge,ye)&&(ge=bt):ye>=ge?(bt<ge&&(ge=bt),bt>ye&&(ye=bt)):bt>Se?Kt(ge,bt)>Kt(ge,ye)&&(ye=bt):Kt(bt,ye)>Kt(ge,ye)&&(ge=bt)}else Ze.push(Ye=[ge=bt,ye=bt]);Ut<xe&&(xe=Ut),Ut>be&&(be=Ut),Ae=dr,Se=bt}function dt(){ze.point=Ge}function Rt(){Ye[0]=ge,Ye[1]=ye,ze.point=Ie,Ae=null}function Qt(bt,Ut){if(Ae){var dr=bt-Se;Ce.add(d(dr)>180?dr+(dr>0?360:-360):dr)}else Re=bt,Ve=Ut;J.point(bt,Ut),Ge(bt,Ut)}function Bt(){J.lineStart()}function Ct(){Qt(Re,Ve),J.lineEnd(),d(Ce)>i&&(ge=-(ye=180)),Ye[0]=ge,Ye[1]=ye,Ae=null}function Kt(bt,Ut){return(Ut-=bt)<0?Ut+360:Ut}function Ot(bt,Ut){return bt[0]-Ut[0]}function St(bt,Ut){return bt[0]<=bt[1]?bt[0]<=Ut&&Ut<=bt[1]:Ut<bt[0]||bt[1]<Ut}function Xe(bt){var Ut,dr,cr,zr,ln,_n,Pn;if(be=ye=-(ge=xe=1/0),Ze=[],H(bt,ze),dr=Ze.length){for(Ze.sort(Ot),Ut=1,cr=Ze[0],ln=[cr];Ut<dr;++Ut)zr=Ze[Ut],St(cr,zr[0])||St(cr,zr[1])?(Kt(cr[0],zr[1])>Kt(cr[0],cr[1])&&(cr[1]=zr[1]),Kt(zr[0],cr[1])>Kt(cr[0],cr[1])&&(cr[0]=zr[0])):ln.push(cr=zr);for(_n=-1/0,dr=ln.length-1,Ut=0,cr=ln[dr];Ut<=dr;cr=zr,++Ut)zr=ln[Ut],(Pn=Kt(cr[1],zr[0]))>_n&&(_n=Pn,ge=zr[0],ye=cr[1])}return Ze=Ye=null,ge===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[ge,xe],[ye,be]]}var at,We,Ee,He,Ke,et,At,mt,Mt,Gt,zt,Ht,Xt,Wt,sr,Gr,cn={sphere:F,point:en,lineStart:rr,lineEnd:Mr,polygonStart:function(){cn.lineStart=it,cn.lineEnd=Qe},polygonEnd:function(){cn.lineStart=rr,cn.lineEnd=Mr}};function en(bt,Ut){bt*=g,Ut*=g;var dr=l(Ut);st(dr*l(bt),dr*p(bt),p(Ut))}function st(bt,Ut,dr){++at,Ee+=(bt-Ee)/at,He+=(Ut-He)/at,Ke+=(dr-Ke)/at}function rr(){cn.point=er}function er(bt,Ut){bt*=g,Ut*=g;var dr=l(Ut);Wt=dr*l(bt),sr=dr*p(bt),Gr=p(Ut),cn.point=jt,st(Wt,sr,Gr)}function jt(bt,Ut){bt*=g,Ut*=g;var dr=l(Ut),cr=dr*l(bt),zr=dr*p(bt),ln=p(Ut),_n=m(h((_n=sr*ln-Gr*zr)*_n+(_n=Gr*cr-Wt*ln)*_n+(_n=Wt*zr-sr*cr)*_n),Wt*cr+sr*zr+Gr*ln);We+=_n,et+=_n*(Wt+(Wt=cr)),At+=_n*(sr+(sr=zr)),mt+=_n*(Gr+(Gr=ln)),st(Wt,sr,Gr)}function Mr(){cn.point=en}function it(){cn.point=ft}function Qe(){ct(Ht,Xt),cn.point=en}function ft(bt,Ut){Ht=bt,Xt=Ut,bt*=g,Ut*=g,cn.point=ct;var dr=l(Ut);Wt=dr*l(bt),sr=dr*p(bt),Gr=p(Ut),st(Wt,sr,Gr)}function ct(bt,Ut){bt*=g,Ut*=g;var dr=l(Ut),cr=dr*l(bt),zr=dr*p(bt),ln=p(Ut),_n=sr*ln-Gr*zr,Pn=Gr*cr-Wt*ln,zn=Wt*zr-sr*cr,Xn=h(_n*_n+Pn*Pn+zn*zn),wn=S(Xn),Un=Xn&&-wn/Xn;Mt+=Un*_n,Gt+=Un*Pn,zt+=Un*zn,We+=wn,et+=wn*(Wt+(Wt=cr)),At+=wn*(sr+(sr=zr)),mt+=wn*(Gr+(Gr=ln)),st(Wt,sr,Gr)}function Et(bt){at=We=Ee=He=Ke=et=At=mt=Mt=Gt=zt=0,H(bt,cn);var Ut=Mt,dr=Gt,cr=zt,zr=Ut*Ut+dr*dr+cr*cr;return zr<n&&(Ut=et,dr=At,cr=mt,We<i&&(Ut=Ee,dr=He,cr=Ke),zr=Ut*Ut+dr*dr+cr*cr,zr<n)?[NaN,NaN]:[m(dr,Ut)*b,S(cr/h(zr))*b]}function Nt(bt){return function(){return bt}}function Pe(bt,Ut){function dr(cr,zr){return cr=bt(cr,zr),Ut(cr[0],cr[1])}return bt.invert&&Ut.invert&&(dr.invert=function(cr,zr){return cr=Ut.invert(cr,zr),cr&&bt.invert(cr[0],cr[1])}),dr}function Le(bt,Ut){return[d(bt)>r?bt+Math.round(-bt/o)*o:bt,Ut]}Le.invert=Le;function ot(bt,Ut,dr){return(bt%=o)?Ut||dr?Pe(pt(bt),Pt(Ut,dr)):pt(bt):Ut||dr?Pt(Ut,dr):Le}function ut(bt){return function(Ut,dr){return Ut+=bt,[Ut>r?Ut-o:Ut<-r?Ut+o:Ut,dr]}}function pt(bt){var Ut=ut(bt);return Ut.invert=ut(-bt),Ut}function Pt(bt,Ut){var dr=l(bt),cr=p(bt),zr=l(Ut),ln=p(Ut);function _n(Pn,zn){var Xn=l(zn),wn=l(Pn)*Xn,Un=p(Pn)*Xn,On=p(zn),jn=On*dr+wn*cr;return[m(Un*zr-jn*ln,wn*dr-On*cr),S(jn*zr+Un*ln)]}return _n.invert=function(Pn,zn){var Xn=l(zn),wn=l(Pn)*Xn,Un=p(Pn)*Xn,On=p(zn),jn=On*zr-Un*ln;return[m(Un*zr+On*ln,wn*dr+jn*cr),S(jn*dr-wn*cr)]},_n}function xt(bt){bt=ot(bt[0]*g,bt[1]*g,bt.length>2?bt[2]*g:0);function Ut(dr){return dr=bt(dr[0]*g,dr[1]*g),dr[0]*=b,dr[1]*=b,dr}return Ut.invert=function(dr){return dr=bt.invert(dr[0]*g,dr[1]*g),dr[0]*=b,dr[1]*=b,dr},Ut}function Lt(bt,Ut,dr,cr,zr,ln){if(!!dr){var _n=l(Ut),Pn=p(Ut),zn=cr*dr;zr==null?(zr=Ut+cr*o,ln=Ut-zn/2):(zr=Zt(_n,zr),ln=Zt(_n,ln),(cr>0?zr<ln:zr>ln)&&(zr+=cr*o));for(var Xn,wn=zr;cr>0?wn>ln:wn<ln;wn-=zn)Xn=Q([_n,-Pn*l(wn),-Pn*p(wn)]),bt.point(Xn[0],Xn[1])}}function Zt(bt,Ut){Ut=ie(Ut),Ut[0]-=bt,ue(Ut);var dr=E(-Ut[1]);return((-Ut[2]<0?-dr:dr)+o-i)%o}function ur(){var bt=Nt([0,0]),Ut=Nt(90),dr=Nt(6),cr,zr,ln={point:_n};function _n(zn,Xn){cr.push(zn=zr(zn,Xn)),zn[0]*=b,zn[1]*=b}function Pn(){var zn=bt.apply(this,arguments),Xn=Ut.apply(this,arguments)*g,wn=dr.apply(this,arguments)*g;return cr=[],zr=ot(-zn[0]*g,-zn[1]*g,0).invert,Lt(ln,Xn,wn,1),zn={type:"Polygon",coordinates:[cr]},cr=zr=null,zn}return Pn.center=function(zn){return arguments.length?(bt=typeof zn=="function"?zn:Nt([+zn[0],+zn[1]]),Pn):bt},Pn.radius=function(zn){return arguments.length?(Ut=typeof zn=="function"?zn:Nt(+zn),Pn):Ut},Pn.precision=function(zn){return arguments.length?(dr=typeof zn=="function"?zn:Nt(+zn),Pn):dr},Pn}function Pr(){var bt=[],Ut;return{point:function(dr,cr,zr){Ut.push([dr,cr,zr])},lineStart:function(){bt.push(Ut=[])},lineEnd:F,rejoin:function(){bt.length>1&&bt.push(bt.pop().concat(bt.shift()))},result:function(){var dr=bt;return bt=[],Ut=null,dr}}}function Ar(bt,Ut){return d(bt[0]-Ut[0])<i&&d(bt[1]-Ut[1])<i}function kr(bt,Ut,dr,cr){this.x=bt,this.z=Ut,this.o=dr,this.e=cr,this.v=!1,this.n=this.p=null}function Zr(bt,Ut,dr,cr,zr){var ln=[],_n=[],Pn,zn;if(bt.forEach(function(ia){if(!((Ga=ia.length-1)<=0)){var Ga,za=ia[0],Ya=ia[Ga],ja;if(Ar(za,Ya)){if(!za[2]&&!Ya[2]){for(zr.lineStart(),Pn=0;Pn<Ga;++Pn)zr.point((za=ia[Pn])[0],za[1]);zr.lineEnd();return}Ya[0]+=2*i}ln.push(ja=new kr(za,ia,null,!0)),_n.push(ja.o=new kr(za,null,ja,!1)),ln.push(ja=new kr(Ya,ia,null,!1)),_n.push(ja.o=new kr(Ya,null,ja,!0))}}),!!ln.length){for(_n.sort(Ut),lr(ln),lr(_n),Pn=0,zn=_n.length;Pn<zn;++Pn)_n[Pn].e=dr=!dr;for(var Xn=ln[0],wn,Un;;){for(var On=Xn,jn=!0;On.v;)if((On=On.n)===Xn)return;wn=On.z,zr.lineStart();do{if(On.v=On.o.v=!0,On.e){if(jn)for(Pn=0,zn=wn.length;Pn<zn;++Pn)zr.point((Un=wn[Pn])[0],Un[1]);else cr(On.x,On.n.x,1,zr);On=On.n}else{if(jn)for(wn=On.p.z,Pn=wn.length-1;Pn>=0;--Pn)zr.point((Un=wn[Pn])[0],Un[1]);else cr(On.x,On.p.x,-1,zr);On=On.p}On=On.o,wn=On.z,jn=!jn}while(!On.v);zr.lineEnd()}}}function lr(bt){if(!!(Ut=bt.length)){for(var Ut,dr=0,cr=bt[0],zr;++dr<Ut;)cr.n=zr=bt[dr],zr.p=cr,cr=zr;cr.n=zr=bt[0],zr.p=cr}}var br=M();function Or(bt){return d(bt[0])<=r?bt[0]:w(bt[0])*((d(bt[0])+r)%o-r)}function Hr(bt,Ut){var dr=Or(Ut),cr=Ut[1],zr=p(cr),ln=[p(dr),-l(dr),0],_n=0,Pn=0;br.reset(),zr===1?cr=v+i:zr===-1&&(cr=-v-i);for(var zn=0,Xn=bt.length;zn<Xn;++zn)if(!!(Un=(wn=bt[zn]).length))for(var wn,Un,On=wn[Un-1],jn=Or(On),ia=On[1]/2+s,Ga=p(ia),za=l(ia),Ya=0;Ya<Un;++Ya,jn=aa,Ga=Qa,za=si,On=ja){var ja=wn[Ya],aa=Or(ja),ba=ja[1]/2+s,Qa=p(ba),si=l(ba),Mi=aa-jn,Ei=Mi>=0?1:-1,wi=Ei*Mi,Li=wi>r,hi=Ga*Qa;if(br.add(m(hi*Ei*p(wi),za*si+hi*l(wi))),_n+=Li?Mi+Ei*o:Mi,Li^jn>=dr^aa>=dr){var Co=ne(ie(On),ie(ja));ue(Co);var ao=ne(ln,Co);ue(ao);var li=(Li^Mi>=0?-1:1)*S(ao[2]);(cr>li||cr===li&&(Co[0]||Co[1]))&&(Pn+=Li^Mi>=0?1:-1)}}return(_n<-i||_n<i&&br<-i)^Pn&1}function Lr(bt,Ut,dr,cr){return function(zr){var ln=Ut(zr),_n=Pr(),Pn=Ut(_n),zn=!1,Xn,wn,Un,On={point:jn,lineStart:Ga,lineEnd:za,polygonStart:function(){On.point=Ya,On.lineStart=ja,On.lineEnd=aa,wn=[],Xn=[]},polygonEnd:function(){On.point=jn,On.lineStart=Ga,On.lineEnd=za,wn=f.merge(wn);var ba=Hr(Xn,cr);wn.length?(zn||(zr.polygonStart(),zn=!0),Zr(wn,It,ba,dr,zr)):ba&&(zn||(zr.polygonStart(),zn=!0),zr.lineStart(),dr(null,null,1,zr),zr.lineEnd()),zn&&(zr.polygonEnd(),zn=!1),wn=Xn=null},sphere:function(){zr.polygonStart(),zr.lineStart(),dr(null,null,1,zr),zr.lineEnd(),zr.polygonEnd()}};function jn(ba,Qa){bt(ba,Qa)&&zr.point(ba,Qa)}function ia(ba,Qa){ln.point(ba,Qa)}function Ga(){On.point=ia,ln.lineStart()}function za(){On.point=jn,ln.lineEnd()}function Ya(ba,Qa){Un.push([ba,Qa]),Pn.point(ba,Qa)}function ja(){Pn.lineStart(),Un=[]}function aa(){Ya(Un[0][0],Un[0][1]),Pn.lineEnd();var ba=Pn.clean(),Qa=_n.result(),si,Mi=Qa.length,Ei,wi,Li;if(Un.pop(),Xn.push(Un),Un=null,!!Mi){if(ba&1){if(wi=Qa[0],(Ei=wi.length-1)>0){for(zn||(zr.polygonStart(),zn=!0),zr.lineStart(),si=0;si<Ei;++si)zr.point((Li=wi[si])[0],Li[1]);zr.lineEnd()}return}Mi>1&&ba&2&&Qa.push(Qa.pop().concat(Qa.shift())),wn.push(Qa.filter(nt))}}return On}}function nt(bt){return bt.length>1}function It(bt,Ut){return((bt=bt.x)[0]<0?bt[1]-v-i:v-bt[1])-((Ut=Ut.x)[0]<0?Ut[1]-v-i:v-Ut[1])}var Jt=Lr(function(){return!0},fr,Vr,[-r,-v]);function fr(bt){var Ut=NaN,dr=NaN,cr=NaN,zr;return{lineStart:function(){bt.lineStart(),zr=1},point:function(ln,_n){var Pn=ln>0?r:-r,zn=d(ln-Ut);d(zn-r)<i?(bt.point(Ut,dr=(dr+_n)/2>0?v:-v),bt.point(cr,dr),bt.lineEnd(),bt.lineStart(),bt.point(Pn,dr),bt.point(ln,dr),zr=0):cr!==Pn&&zn>=r&&(d(Ut-cr)<i&&(Ut-=cr*i),d(ln-Pn)<i&&(ln-=Pn*i),dr=Nr(Ut,dr,ln,_n),bt.point(cr,dr),bt.lineEnd(),bt.lineStart(),bt.point(Pn,dr),zr=0),bt.point(Ut=ln,dr=_n),cr=Pn},lineEnd:function(){bt.lineEnd(),Ut=dr=NaN},clean:function(){return 2-zr}}}function Nr(bt,Ut,dr,cr){var zr,ln,_n=p(bt-dr);return d(_n)>i?c((p(Ut)*(ln=l(cr))*p(dr)-p(cr)*(zr=l(Ut))*p(bt))/(zr*ln*_n)):(Ut+cr)/2}function Vr(bt,Ut,dr,cr){var zr;if(bt==null)zr=dr*v,cr.point(-r,zr),cr.point(0,zr),cr.point(r,zr),cr.point(r,0),cr.point(r,-zr),cr.point(0,-zr),cr.point(-r,-zr),cr.point(-r,0),cr.point(-r,zr);else if(d(bt[0]-Ut[0])>i){var ln=bt[0]<Ut[0]?r:-r;zr=dr*ln/2,cr.point(-ln,zr),cr.point(0,zr),cr.point(ln,zr)}else cr.point(Ut[0],Ut[1])}function Dr(bt){var Ut=l(bt),dr=6*g,cr=Ut>0,zr=d(Ut)>i;function ln(wn,Un,On,jn){Lt(jn,bt,dr,On,wn,Un)}function _n(wn,Un){return l(wn)*l(Un)>Ut}function Pn(wn){var Un,On,jn,ia,Ga;return{lineStart:function(){ia=jn=!1,Ga=1},point:function(za,Ya){var ja=[za,Ya],aa,ba=_n(za,Ya),Qa=cr?ba?0:Xn(za,Ya):ba?Xn(za+(za<0?r:-r),Ya):0;if(!Un&&(ia=jn=ba)&&wn.lineStart(),ba!==jn&&(aa=zn(Un,ja),(!aa||Ar(Un,aa)||Ar(ja,aa))&&(ja[2]=1)),ba!==jn)Ga=0,ba?(wn.lineStart(),aa=zn(ja,Un),wn.point(aa[0],aa[1])):(aa=zn(Un,ja),wn.point(aa[0],aa[1],2),wn.lineEnd()),Un=aa;else if(zr&&Un&&cr^ba){var si;!(Qa&On)&&(si=zn(ja,Un,!0))&&(Ga=0,cr?(wn.lineStart(),wn.point(si[0][0],si[0][1]),wn.point(si[1][0],si[1][1]),wn.lineEnd()):(wn.point(si[1][0],si[1][1]),wn.lineEnd(),wn.lineStart(),wn.point(si[0][0],si[0][1],3)))}ba&&(!Un||!Ar(Un,ja))&&wn.point(ja[0],ja[1]),Un=ja,jn=ba,On=Qa},lineEnd:function(){jn&&wn.lineEnd(),Un=null},clean:function(){return Ga|(ia&&jn)<<1}}}function zn(wn,Un,On){var jn=ie(wn),ia=ie(Un),Ga=[1,0,0],za=ne(jn,ia),Ya=oe(za,za),ja=za[0],aa=Ya-ja*ja;if(!aa)return!On&&wn;var ba=Ut*Ya/aa,Qa=-Ut*ja/aa,si=ne(Ga,za),Mi=_e(Ga,ba),Ei=_e(za,Qa);se(Mi,Ei);var wi=si,Li=oe(Mi,wi),hi=oe(wi,wi),Co=Li*Li-hi*(oe(Mi,Mi)-1);if(!(Co<0)){var ao=h(Co),li=_e(wi,(-Li-ao)/hi);if(se(li,Mi),li=Q(li),!On)return li;var Aa=wn[0],Si=Un[0],_o=wn[1],Eo=Un[1],ds;Si<Aa&&(ds=Aa,Aa=Si,Si=ds);var Os=Si-Aa,Lo=d(Os-r)<i,al=Lo||Os<i;if(!Lo&&Eo<_o&&(ds=_o,_o=Eo,Eo=ds),al?Lo?_o+Eo>0^li[1]<(d(li[0]-Aa)<i?_o:Eo):_o<=li[1]&&li[1]<=Eo:Os>r^(Aa<=li[0]&&li[0]<=Si)){var Ns=_e(wi,(-Li+ao)/hi);return se(Ns,Mi),[li,Q(Ns)]}}}function Xn(wn,Un){var On=cr?bt:r-bt,jn=0;return wn<-On?jn|=1:wn>On&&(jn|=2),Un<-On?jn|=4:Un>On&&(jn|=8),jn}return Lr(_n,Pn,ln,cr?[0,-bt]:[-r,bt-r])}function Er(bt,Ut,dr,cr,zr,ln){var _n=bt[0],Pn=bt[1],zn=Ut[0],Xn=Ut[1],wn=0,Un=1,On=zn-_n,jn=Xn-Pn,ia;if(ia=dr-_n,!(!On&&ia>0)){if(ia/=On,On<0){if(ia<wn)return;ia<Un&&(Un=ia)}else if(On>0){if(ia>Un)return;ia>wn&&(wn=ia)}if(ia=zr-_n,!(!On&&ia<0)){if(ia/=On,On<0){if(ia>Un)return;ia>wn&&(wn=ia)}else if(On>0){if(ia<wn)return;ia<Un&&(Un=ia)}if(ia=cr-Pn,!(!jn&&ia>0)){if(ia/=jn,jn<0){if(ia<wn)return;ia<Un&&(Un=ia)}else if(jn>0){if(ia>Un)return;ia>wn&&(wn=ia)}if(ia=ln-Pn,!(!jn&&ia<0)){if(ia/=jn,jn<0){if(ia>Un)return;ia>wn&&(wn=ia)}else if(jn>0){if(ia<wn)return;ia<Un&&(Un=ia)}return wn>0&&(bt[0]=_n+wn*On,bt[1]=Pn+wn*jn),Un<1&&(Ut[0]=_n+Un*On,Ut[1]=Pn+Un*jn),!0}}}}}var jr=1e9,kn=-jr;function mn(bt,Ut,dr,cr){function zr(Xn,wn){return bt<=Xn&&Xn<=dr&&Ut<=wn&&wn<=cr}function ln(Xn,wn,Un,On){var jn=0,ia=0;if(Xn==null||(jn=_n(Xn,Un))!==(ia=_n(wn,Un))||zn(Xn,wn)<0^Un>0)do On.point(jn===0||jn===3?bt:dr,jn>1?cr:Ut);while((jn=(jn+Un+4)%4)!==ia);else On.point(wn[0],wn[1])}function _n(Xn,wn){return d(Xn[0]-bt)<i?wn>0?0:3:d(Xn[0]-dr)<i?wn>0?2:1:d(Xn[1]-Ut)<i?wn>0?1:0:wn>0?3:2}function Pn(Xn,wn){return zn(Xn.x,wn.x)}function zn(Xn,wn){var Un=_n(Xn,1),On=_n(wn,1);return Un!==On?Un-On:Un===0?wn[1]-Xn[1]:Un===1?Xn[0]-wn[0]:Un===2?Xn[1]-wn[1]:wn[0]-Xn[0]}return function(Xn){var wn=Xn,Un=Pr(),On,jn,ia,Ga,za,Ya,ja,aa,ba,Qa,si,Mi={point:Ei,lineStart:Co,lineEnd:ao,polygonStart:Li,polygonEnd:hi};function Ei(Aa,Si){zr(Aa,Si)&&wn.point(Aa,Si)}function wi(){for(var Aa=0,Si=0,_o=jn.length;Si<_o;++Si)for(var Eo=jn[Si],ds=1,Os=Eo.length,Lo=Eo[0],al,Ns,zo=Lo[0],Po=Lo[1];ds<Os;++ds)al=zo,Ns=Po,Lo=Eo[ds],zo=Lo[0],Po=Lo[1],Ns<=cr?Po>cr&&(zo-al)*(cr-Ns)>(Po-Ns)*(bt-al)&&++Aa:Po<=cr&&(zo-al)*(cr-Ns)<(Po-Ns)*(bt-al)&&--Aa;return Aa}function Li(){wn=Un,On=[],jn=[],si=!0}function hi(){var Aa=wi(),Si=si&&Aa,_o=(On=f.merge(On)).length;(Si||_o)&&(Xn.polygonStart(),Si&&(Xn.lineStart(),ln(null,null,1,Xn),Xn.lineEnd()),_o&&Zr(On,Pn,Aa,ln,Xn),Xn.polygonEnd()),wn=Xn,On=jn=ia=null}function Co(){Mi.point=li,jn&&jn.push(ia=[]),Qa=!0,ba=!1,ja=aa=NaN}function ao(){On&&(li(Ga,za),Ya&&ba&&Un.rejoin(),On.push(Un.result())),Mi.point=Ei,ba&&wn.lineEnd()}function li(Aa,Si){var _o=zr(Aa,Si);if(jn&&ia.push([Aa,Si]),Qa)Ga=Aa,za=Si,Ya=_o,Qa=!1,_o&&(wn.lineStart(),wn.point(Aa,Si));else if(_o&&ba)wn.point(Aa,Si);else{var Eo=[ja=Math.max(kn,Math.min(jr,ja)),aa=Math.max(kn,Math.min(jr,aa))],ds=[Aa=Math.max(kn,Math.min(jr,Aa)),Si=Math.max(kn,Math.min(jr,Si))];Er(Eo,ds,bt,Ut,dr,cr)?(ba||(wn.lineStart(),wn.point(Eo[0],Eo[1])),wn.point(ds[0],ds[1]),_o||wn.lineEnd(),si=!1):_o&&(wn.lineStart(),wn.point(Aa,Si),si=!1)}ja=Aa,aa=Si,ba=_o}return Mi}}function Wn(){var bt=0,Ut=0,dr=960,cr=500,zr,ln,_n;return _n={stream:function(Pn){return zr&&ln===Pn?zr:zr=mn(bt,Ut,dr,cr)(ln=Pn)},extent:function(Pn){return arguments.length?(bt=+Pn[0][0],Ut=+Pn[0][1],dr=+Pn[1][0],cr=+Pn[1][1],zr=ln=null,_n):[[bt,Ut],[dr,cr]]}}}var In=M(),$n,Kn,ma,Ra={sphere:F,point:F,lineStart:_i,lineEnd:F,polygonStart:F,polygonEnd:F};function _i(){Ra.point=ri,Ra.lineEnd=Ka}function Ka(){Ra.point=Ra.lineEnd=F}function ri(bt,Ut){bt*=g,Ut*=g,$n=bt,Kn=p(Ut),ma=l(Ut),Ra.point=ei}function ei(bt,Ut){bt*=g,Ut*=g;var dr=p(Ut),cr=l(Ut),zr=d(bt-$n),ln=l(zr),_n=p(zr),Pn=cr*_n,zn=ma*dr-Kn*cr*ln,Xn=Kn*dr+ma*cr*ln;In.add(m(h(Pn*Pn+zn*zn),Xn)),$n=bt,Kn=dr,ma=cr}function Sr(bt){return In.reset(),H(bt,Ra),+In}var bn=[null,null],dn={type:"LineString",coordinates:bn};function Ln(bt,Ut){return bn[0]=bt,bn[1]=Ut,Sr(dn)}var ra={Feature:function(bt,Ut){return sa(bt.geometry,Ut)},FeatureCollection:function(bt,Ut){for(var dr=bt.features,cr=-1,zr=dr.length;++cr<zr;)if(sa(dr[cr].geometry,Ut))return!0;return!1}},ya={Sphere:function(){return!0},Point:function(bt,Ut){return Bn(bt.coordinates,Ut)},MultiPoint:function(bt,Ut){for(var dr=bt.coordinates,cr=-1,zr=dr.length;++cr<zr;)if(Bn(dr[cr],Ut))return!0;return!1},LineString:function(bt,Ut){return Qn(bt.coordinates,Ut)},MultiLineString:function(bt,Ut){for(var dr=bt.coordinates,cr=-1,zr=dr.length;++cr<zr;)if(Qn(dr[cr],Ut))return!0;return!1},Polygon:function(bt,Ut){return Xa(bt.coordinates,Ut)},MultiPolygon:function(bt,Ut){for(var dr=bt.coordinates,cr=-1,zr=dr.length;++cr<zr;)if(Xa(dr[cr],Ut))return!0;return!1},GeometryCollection:function(bt,Ut){for(var dr=bt.geometries,cr=-1,zr=dr.length;++cr<zr;)if(sa(dr[cr],Ut))return!0;return!1}};function sa(bt,Ut){return bt&&ya.hasOwnProperty(bt.type)?ya[bt.type](bt,Ut):!1}function Bn(bt,Ut){return Ln(bt,Ut)===0}function Qn(bt,Ut){for(var dr,cr,zr,ln=0,_n=bt.length;ln<_n;ln++){if(cr=Ln(bt[ln],Ut),cr===0||ln>0&&(zr=Ln(bt[ln],bt[ln-1]),zr>0&&dr<=zr&&cr<=zr&&(dr+cr-zr)*(1-Math.pow((dr-cr)/zr,2))<n*zr))return!0;dr=cr}return!1}function Xa(bt,Ut){return!!Hr(bt.map(mi),Yt(Ut))}function mi(bt){return bt=bt.map(Yt),bt.pop(),bt}function Yt(bt){return[bt[0]*g,bt[1]*g]}function gr(bt,Ut){return(bt&&ra.hasOwnProperty(bt.type)?ra[bt.type]:sa)(bt,Ut)}function un(bt,Ut,dr){var cr=f.range(bt,Ut-i,dr).concat(Ut);return function(zr){return cr.map(function(ln){return[zr,ln]})}}function yn(bt,Ut,dr){var cr=f.range(bt,Ut-i,dr).concat(Ut);return function(zr){return cr.map(function(ln){return[ln,zr]})}}function sn(){var bt,Ut,dr,cr,zr,ln,_n,Pn,zn=10,Xn=zn,wn=90,Un=360,On,jn,ia,Ga,za=2.5;function Ya(){return{type:"MultiLineString",coordinates:ja()}}function ja(){return f.range(y(cr/wn)*wn,dr,wn).map(ia).concat(f.range(y(Pn/Un)*Un,_n,Un).map(Ga)).concat(f.range(y(Ut/zn)*zn,bt,zn).filter(function(aa){return d(aa%wn)>i}).map(On)).concat(f.range(y(ln/Xn)*Xn,zr,Xn).filter(function(aa){return d(aa%Un)>i}).map(jn))}return Ya.lines=function(){return ja().map(function(aa){return{type:"LineString",coordinates:aa}})},Ya.outline=function(){return{type:"Polygon",coordinates:[ia(cr).concat(Ga(_n).slice(1),ia(dr).reverse().slice(1),Ga(Pn).reverse().slice(1))]}},Ya.extent=function(aa){return arguments.length?Ya.extentMajor(aa).extentMinor(aa):Ya.extentMinor()},Ya.extentMajor=function(aa){return arguments.length?(cr=+aa[0][0],dr=+aa[1][0],Pn=+aa[0][1],_n=+aa[1][1],cr>dr&&(aa=cr,cr=dr,dr=aa),Pn>_n&&(aa=Pn,Pn=_n,_n=aa),Ya.precision(za)):[[cr,Pn],[dr,_n]]},Ya.extentMinor=function(aa){return arguments.length?(Ut=+aa[0][0],bt=+aa[1][0],ln=+aa[0][1],zr=+aa[1][1],Ut>bt&&(aa=Ut,Ut=bt,bt=aa),ln>zr&&(aa=ln,ln=zr,zr=aa),Ya.precision(za)):[[Ut,ln],[bt,zr]]},Ya.step=function(aa){return arguments.length?Ya.stepMajor(aa).stepMinor(aa):Ya.stepMinor()},Ya.stepMajor=function(aa){return arguments.length?(wn=+aa[0],Un=+aa[1],Ya):[wn,Un]},Ya.stepMinor=function(aa){return arguments.length?(zn=+aa[0],Xn=+aa[1],Ya):[zn,Xn]},Ya.precision=function(aa){return arguments.length?(za=+aa,On=un(ln,zr,90),jn=yn(Ut,bt,za),ia=un(Pn,_n,90),Ga=yn(cr,dr,za),Ya):za},Ya.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Cn(){return sn()()}function Tn(bt,Ut){var dr=bt[0]*g,cr=bt[1]*g,zr=Ut[0]*g,ln=Ut[1]*g,_n=l(cr),Pn=p(cr),zn=l(ln),Xn=p(ln),wn=_n*l(dr),Un=_n*p(dr),On=zn*l(zr),jn=zn*p(zr),ia=2*S(h(P(ln-cr)+_n*zn*P(zr-dr))),Ga=p(ia),za=ia?function(Ya){var ja=p(Ya*=ia)/Ga,aa=p(ia-Ya)/Ga,ba=aa*wn+ja*On,Qa=aa*Un+ja*jn,si=aa*Pn+ja*Xn;return[m(Qa,ba)*b,m(si,h(ba*ba+Qa*Qa))*b]}:function(){return[dr*b,cr*b]};return za.distance=ia,za}function gn(bt){return bt}var _r=M(),wr=M(),Br,An,Yn,ua,Sn={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Sn.lineStart=na,Sn.lineEnd=ka},polygonEnd:function(){Sn.lineStart=Sn.lineEnd=Sn.point=F,_r.add(d(wr)),wr.reset()},result:function(){var bt=_r/2;return _r.reset(),bt}};function na(){Sn.point=ca}function ca(bt,Ut){Sn.point=Ma,Br=Yn=bt,An=ua=Ut}function Ma(bt,Ut){wr.add(ua*bt-Yn*Ut),Yn=bt,ua=Ut}function ka(){Ma(Br,An)}var ga=1/0,Ia=ga,Mo=-ga,ro=Mo,Jo={point:Ks,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var bt=[[ga,Ia],[Mo,ro]];return Mo=ro=-(Ia=ga=1/0),bt}};function Ks(bt,Ut){bt<ga&&(ga=bt),bt>Mo&&(Mo=bt),Ut<Ia&&(Ia=Ut),Ut>ro&&(ro=Ut)}var Vs=0,Gl=0,Ai=0,Hs=0,Gs=0,ji=0,Io=0,Ml=0,ws=0,Ii,fl,lo,Fi,po={point:no,lineStart:us,lineEnd:es,polygonStart:function(){po.lineStart=bu,po.lineEnd=Ds},polygonEnd:function(){po.point=no,po.lineStart=us,po.lineEnd=es},result:function(){var bt=ws?[Io/ws,Ml/ws]:ji?[Hs/ji,Gs/ji]:Ai?[Vs/Ai,Gl/Ai]:[NaN,NaN];return Vs=Gl=Ai=Hs=Gs=ji=Io=Ml=ws=0,bt}};function no(bt,Ut){Vs+=bt,Gl+=Ut,++Ai}function us(){po.point=Js}function Js(bt,Ut){po.point=au,no(lo=bt,Fi=Ut)}function au(bt,Ut){var dr=bt-lo,cr=Ut-Fi,zr=h(dr*dr+cr*cr);Hs+=zr*(lo+bt)/2,Gs+=zr*(Fi+Ut)/2,ji+=zr,no(lo=bt,Fi=Ut)}function es(){po.point=no}function bu(){po.point=No}function Ds(){sf(Ii,fl)}function No(bt,Ut){po.point=sf,no(Ii=lo=bt,fl=Fi=Ut)}function sf(bt,Ut){var dr=bt-lo,cr=Ut-Fi,zr=h(dr*dr+cr*cr);Hs+=zr*(lo+bt)/2,Gs+=zr*(Fi+Ut)/2,ji+=zr,zr=Fi*bt-lo*Ut,Io+=zr*(lo+bt),Ml+=zr*(Fi+Ut),ws+=zr*3,no(lo=bt,Fi=Ut)}function ko(bt){this._context=bt}ko.prototype={_radius:4.5,pointRadius:function(bt){return this._radius=bt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(bt,Ut){switch(this._point){case 0:{this._context.moveTo(bt,Ut),this._point=1;break}case 1:{this._context.lineTo(bt,Ut);break}default:{this._context.moveTo(bt+this._radius,Ut),this._context.arc(bt,Ut,this._radius,0,o);break}}},result:F};var Rs=M(),Yl,Vu,Hu,Ys,El,Is={point:F,lineStart:function(){Is.point=iu},lineEnd:function(){Yl&&cl(Vu,Hu),Is.point=F},polygonStart:function(){Yl=!0},polygonEnd:function(){Yl=null},result:function(){var bt=+Rs;return Rs.reset(),bt}};function iu(bt,Ut){Is.point=cl,Vu=Ys=bt,Hu=El=Ut}function cl(bt,Ut){Ys-=bt,El-=Ut,Rs.add(h(Ys*Ys+El*El)),Ys=bt,El=Ut}function ou(){this._string=[]}ou.prototype={_radius:4.5,_circle:_u(4.5),pointRadius:function(bt){return(bt=+bt)!==this._radius&&(this._radius=bt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(bt,Ut){switch(this._point){case 0:{this._string.push("M",bt,",",Ut),this._point=1;break}case 1:{this._string.push("L",bt,",",Ut);break}default:{this._circle==null&&(this._circle=_u(this._radius)),this._string.push("M",bt,",",Ut,this._circle);break}}},result:function(){if(this._string.length){var bt=this._string.join("");return this._string=[],bt}else return null}};function _u(bt){return"m0,"+bt+"a"+bt+","+bt+" 0 1,1 0,"+-2*bt+"a"+bt+","+bt+" 0 1,1 0,"+2*bt+"z"}function Wl(bt,Ut){var dr=4.5,cr,zr;function ln(_n){return _n&&(typeof dr=="function"&&zr.pointRadius(+dr.apply(this,arguments)),H(_n,cr(zr))),zr.result()}return ln.area=function(_n){return H(_n,cr(Sn)),Sn.result()},ln.measure=function(_n){return H(_n,cr(Is)),Is.result()},ln.bounds=function(_n){return H(_n,cr(Jo)),Jo.result()},ln.centroid=function(_n){return H(_n,cr(po)),po.result()},ln.projection=function(_n){return arguments.length?(cr=_n==null?(bt=null,gn):(bt=_n).stream,ln):bt},ln.context=function(_n){return arguments.length?(zr=_n==null?(Ut=null,new ou):new ko(Ut=_n),typeof dr!="function"&&zr.pointRadius(dr),ln):Ut},ln.pointRadius=function(_n){return arguments.length?(dr=typeof _n=="function"?_n:(zr.pointRadius(+_n),+_n),ln):dr},ln.projection(bt).context(Ut)}function wu(bt){return{stream:$s(bt)}}function $s(bt){return function(Ut){var dr=new Xl;for(var cr in bt)dr[cr]=bt[cr];return dr.stream=Ut,dr}}function Xl(){}Xl.prototype={constructor:Xl,point:function(bt,Ut){this.stream.point(bt,Ut)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function hl(bt,Ut,dr){var cr=bt.clipExtent&&bt.clipExtent();return bt.scale(150).translate([0,0]),cr!=null&&bt.clipExtent(null),H(dr,bt.stream(Jo)),Ut(Jo.result()),cr!=null&&bt.clipExtent(cr),bt}function Ts(bt,Ut,dr){return hl(bt,function(cr){var zr=Ut[1][0]-Ut[0][0],ln=Ut[1][1]-Ut[0][1],_n=Math.min(zr/(cr[1][0]-cr[0][0]),ln/(cr[1][1]-cr[0][1])),Pn=+Ut[0][0]+(zr-_n*(cr[1][0]+cr[0][0]))/2,zn=+Ut[0][1]+(ln-_n*(cr[1][1]+cr[0][1]))/2;bt.scale(150*_n).translate([Pn,zn])},dr)}function Sl(bt,Ut,dr){return Ts(bt,[[0,0],Ut],dr)}function su(bt,Ut,dr){return hl(bt,function(cr){var zr=+Ut,ln=zr/(cr[1][0]-cr[0][0]),_n=(zr-ln*(cr[1][0]+cr[0][0]))/2,Pn=-ln*cr[0][1];bt.scale(150*ln).translate([_n,Pn])},dr)}function Tu(bt,Ut,dr){return hl(bt,function(cr){var zr=+Ut,ln=zr/(cr[1][1]-cr[0][1]),_n=-ln*cr[0][0],Pn=(zr-ln*(cr[1][1]+cr[0][1]))/2;bt.scale(150*ln).translate([_n,Pn])},dr)}var Au=16,jl=l(30*g);function Qs(bt,Ut){return+Ut?fs(bt,Ut):Mu(bt)}function Mu(bt){return $s({point:function(Ut,dr){Ut=bt(Ut,dr),this.stream.point(Ut[0],Ut[1])}})}function fs(bt,Ut){function dr(cr,zr,ln,_n,Pn,zn,Xn,wn,Un,On,jn,ia,Ga,za){var Ya=Xn-cr,ja=wn-zr,aa=Ya*Ya+ja*ja;if(aa>4*Ut&&Ga--){var ba=_n+On,Qa=Pn+jn,si=zn+ia,Mi=h(ba*ba+Qa*Qa+si*si),Ei=S(si/=Mi),wi=d(d(si)-1)<i||d(ln-Un)<i?(ln+Un)/2:m(Qa,ba),Li=bt(wi,Ei),hi=Li[0],Co=Li[1],ao=hi-cr,li=Co-zr,Aa=ja*ao-Ya*li;(Aa*Aa/aa>Ut||d((Ya*ao+ja*li)/aa-.5)>.3||_n*On+Pn*jn+zn*ia<jl)&&(dr(cr,zr,ln,_n,Pn,zn,hi,Co,wi,ba/=Mi,Qa/=Mi,si,Ga,za),za.point(hi,Co),dr(hi,Co,wi,ba,Qa,si,Xn,wn,Un,On,jn,ia,Ga,za))}}return function(cr){var zr,ln,_n,Pn,zn,Xn,wn,Un,On,jn,ia,Ga,za={point:Ya,lineStart:ja,lineEnd:ba,polygonStart:function(){cr.polygonStart(),za.lineStart=Qa},polygonEnd:function(){cr.polygonEnd(),za.lineStart=ja}};function Ya(Ei,wi){Ei=bt(Ei,wi),cr.point(Ei[0],Ei[1])}function ja(){Un=NaN,za.point=aa,cr.lineStart()}function aa(Ei,wi){var Li=ie([Ei,wi]),hi=bt(Ei,wi);dr(Un,On,wn,jn,ia,Ga,Un=hi[0],On=hi[1],wn=Ei,jn=Li[0],ia=Li[1],Ga=Li[2],Au,cr),cr.point(Un,On)}function ba(){za.point=Ya,cr.lineEnd()}function Qa(){ja(),za.point=si,za.lineEnd=Mi}function si(Ei,wi){aa(zr=Ei,wi),ln=Un,_n=On,Pn=jn,zn=ia,Xn=Ga,za.point=aa}function Mi(){dr(Un,On,wn,jn,ia,Ga,ln,_n,zr,Pn,zn,Xn,Au,cr),za.lineEnd=ba,ba()}return za}}var Wo=$s({point:function(bt,Ut){this.stream.point(bt*g,Ut*g)}});function qs(bt){return $s({point:function(Ut,dr){var cr=bt(Ut,dr);return this.stream.point(cr[0],cr[1])}})}function lu(bt,Ut,dr,cr,zr){function ln(_n,Pn){return _n*=cr,Pn*=zr,[Ut+bt*_n,dr-bt*Pn]}return ln.invert=function(_n,Pn){return[(_n-Ut)/bt*cr,(dr-Pn)/bt*zr]},ln}function As(bt,Ut,dr,cr,zr,ln){var _n=l(ln),Pn=p(ln),zn=_n*bt,Xn=Pn*bt,wn=_n/bt,Un=Pn/bt,On=(Pn*dr-_n*Ut)/bt,jn=(Pn*Ut+_n*dr)/bt;function ia(Ga,za){return Ga*=cr,za*=zr,[zn*Ga-Xn*za+Ut,dr-Xn*Ga-zn*za]}return ia.invert=function(Ga,za){return[cr*(wn*Ga-Un*za+On),zr*(jn-Un*Ga-wn*za)]},ia}function Fo(bt){return kl(function(){return bt})()}function kl(bt){var Ut,dr=150,cr=480,zr=250,ln=0,_n=0,Pn=0,zn=0,Xn=0,wn,Un=0,On=1,jn=1,ia=null,Ga=Jt,za=null,Ya,ja,aa,ba=gn,Qa=.5,si,Mi,Ei,wi,Li;function hi(Aa){return Ei(Aa[0]*g,Aa[1]*g)}function Co(Aa){return Aa=Ei.invert(Aa[0],Aa[1]),Aa&&[Aa[0]*b,Aa[1]*b]}hi.stream=function(Aa){return wi&&Li===Aa?wi:wi=Wo(qs(wn)(Ga(si(ba(Li=Aa)))))},hi.preclip=function(Aa){return arguments.length?(Ga=Aa,ia=void 0,li()):Ga},hi.postclip=function(Aa){return arguments.length?(ba=Aa,za=Ya=ja=aa=null,li()):ba},hi.clipAngle=function(Aa){return arguments.length?(Ga=+Aa?Dr(ia=Aa*g):(ia=null,Jt),li()):ia*b},hi.clipExtent=function(Aa){return arguments.length?(ba=Aa==null?(za=Ya=ja=aa=null,gn):mn(za=+Aa[0][0],Ya=+Aa[0][1],ja=+Aa[1][0],aa=+Aa[1][1]),li()):za==null?null:[[za,Ya],[ja,aa]]},hi.scale=function(Aa){return arguments.length?(dr=+Aa,ao()):dr},hi.translate=function(Aa){return arguments.length?(cr=+Aa[0],zr=+Aa[1],ao()):[cr,zr]},hi.center=function(Aa){return arguments.length?(ln=Aa[0]%360*g,_n=Aa[1]%360*g,ao()):[ln*b,_n*b]},hi.rotate=function(Aa){return arguments.length?(Pn=Aa[0]%360*g,zn=Aa[1]%360*g,Xn=Aa.length>2?Aa[2]%360*g:0,ao()):[Pn*b,zn*b,Xn*b]},hi.angle=function(Aa){return arguments.length?(Un=Aa%360*g,ao()):Un*b},hi.reflectX=function(Aa){return arguments.length?(On=Aa?-1:1,ao()):On<0},hi.reflectY=function(Aa){return arguments.length?(jn=Aa?-1:1,ao()):jn<0},hi.precision=function(Aa){return arguments.length?(si=Qs(Mi,Qa=Aa*Aa),li()):h(Qa)},hi.fitExtent=function(Aa,Si){return Ts(hi,Aa,Si)},hi.fitSize=function(Aa,Si){return Sl(hi,Aa,Si)},hi.fitWidth=function(Aa,Si){return su(hi,Aa,Si)},hi.fitHeight=function(Aa,Si){return Tu(hi,Aa,Si)};function ao(){var Aa=As(dr,0,0,On,jn,Un).apply(null,Ut(ln,_n)),Si=(Un?As:lu)(dr,cr-Aa[0],zr-Aa[1],On,jn,Un);return wn=ot(Pn,zn,Xn),Mi=Pe(Ut,Si),Ei=Pe(wn,Mi),si=Qs(Mi,Qa),li()}function li(){return wi=Li=null,hi}return function(){return Ut=bt.apply(this,arguments),hi.invert=Ut.invert&&Co,ao()}}function Ms(bt){var Ut=0,dr=r/3,cr=kl(bt),zr=cr(Ut,dr);return zr.parallels=function(ln){return arguments.length?cr(Ut=ln[0]*g,dr=ln[1]*g):[Ut*b,dr*b]},zr}function Fs(bt){var Ut=l(bt);function dr(cr,zr){return[cr*Ut,p(zr)/Ut]}return dr.invert=function(cr,zr){return[cr/Ut,S(zr*Ut)]},dr}function go(bt,Ut){var dr=p(bt),cr=(dr+p(Ut))/2;if(d(cr)<i)return Fs(bt);var zr=1+dr*(2*cr-dr),ln=h(zr)/cr;function _n(Pn,zn){var Xn=h(zr-2*cr*p(zn))/cr;return[Xn*p(Pn*=cr),ln-Xn*l(Pn)]}return _n.invert=function(Pn,zn){var Xn=ln-zn,wn=m(Pn,d(Xn))*w(Xn);return Xn*cr<0&&(wn-=r*w(Pn)*w(Xn)),[wn/cr,S((zr-(Pn*Pn+Xn*Xn)*cr*cr)/(2*cr))]},_n}function Cl(){return Ms(go).scale(155.424).center([0,33.6442])}function Ll(){return Cl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function el(bt){var Ut=bt.length;return{point:function(dr,cr){for(var zr=-1;++zr<Ut;)bt[zr].point(dr,cr)},sphere:function(){for(var dr=-1;++dr<Ut;)bt[dr].sphere()},lineStart:function(){for(var dr=-1;++dr<Ut;)bt[dr].lineStart()},lineEnd:function(){for(var dr=-1;++dr<Ut;)bt[dr].lineEnd()},polygonStart:function(){for(var dr=-1;++dr<Ut;)bt[dr].polygonStart()},polygonEnd:function(){for(var dr=-1;++dr<Ut;)bt[dr].polygonEnd()}}}function cs(){var bt,Ut,dr=Ll(),cr,zr=Cl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ln,_n=Cl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Pn,zn,Xn={point:function(On,jn){zn=[On,jn]}};function wn(On){var jn=On[0],ia=On[1];return zn=null,cr.point(jn,ia),zn||(ln.point(jn,ia),zn)||(Pn.point(jn,ia),zn)}wn.invert=function(On){var jn=dr.scale(),ia=dr.translate(),Ga=(On[0]-ia[0])/jn,za=(On[1]-ia[1])/jn;return(za>=.12&&za<.234&&Ga>=-.425&&Ga<-.214?zr:za>=.166&&za<.234&&Ga>=-.214&&Ga<-.115?_n:dr).invert(On)},wn.stream=function(On){return bt&&Ut===On?bt:bt=el([dr.stream(Ut=On),zr.stream(On),_n.stream(On)])},wn.precision=function(On){return arguments.length?(dr.precision(On),zr.precision(On),_n.precision(On),Un()):dr.precision()},wn.scale=function(On){return arguments.length?(dr.scale(On),zr.scale(On*.35),_n.scale(On),wn.translate(dr.translate())):dr.scale()},wn.translate=function(On){if(!arguments.length)return dr.translate();var jn=dr.scale(),ia=+On[0],Ga=+On[1];return cr=dr.translate(On).clipExtent([[ia-.455*jn,Ga-.238*jn],[ia+.455*jn,Ga+.238*jn]]).stream(Xn),ln=zr.translate([ia-.307*jn,Ga+.201*jn]).clipExtent([[ia-.425*jn+i,Ga+.12*jn+i],[ia-.214*jn-i,Ga+.234*jn-i]]).stream(Xn),Pn=_n.translate([ia-.205*jn,Ga+.212*jn]).clipExtent([[ia-.214*jn+i,Ga+.166*jn+i],[ia-.115*jn-i,Ga+.234*jn-i]]).stream(Xn),Un()},wn.fitExtent=function(On,jn){return Ts(wn,On,jn)},wn.fitSize=function(On,jn){return Sl(wn,On,jn)},wn.fitWidth=function(On,jn){return su(wn,On,jn)},wn.fitHeight=function(On,jn){return Tu(wn,On,jn)};function Un(){return bt=Ut=null,wn}return wn.scale(1070)}function vl(bt){return function(Ut,dr){var cr=l(Ut),zr=l(dr),ln=bt(cr*zr);return[ln*zr*p(Ut),ln*p(dr)]}}function pl(bt){return function(Ut,dr){var cr=h(Ut*Ut+dr*dr),zr=bt(cr),ln=p(zr),_n=l(zr);return[m(Ut*ln,cr*_n),S(cr&&dr*ln/cr)]}}var Zl=vl(function(bt){return h(2/(1+bt))});Zl.invert=pl(function(bt){return 2*S(bt/2)});function Pl(){return Fo(Zl).scale(124.75).clipAngle(180-.001)}var tl=vl(function(bt){return(bt=E(bt))&&bt/p(bt)});tl.invert=pl(function(bt){return bt});function Gu(){return Fo(tl).scale(79.4188).clipAngle(180-.001)}function hs(bt,Ut){return[bt,A(L((v+Ut)/2))]}hs.invert=function(bt,Ut){return[bt,2*c(u(Ut))-v]};function Ws(){return uu(hs).scale(961/o)}function uu(bt){var Ut=Fo(bt),dr=Ut.center,cr=Ut.scale,zr=Ut.translate,ln=Ut.clipExtent,_n=null,Pn,zn,Xn;Ut.scale=function(Un){return arguments.length?(cr(Un),wn()):cr()},Ut.translate=function(Un){return arguments.length?(zr(Un),wn()):zr()},Ut.center=function(Un){return arguments.length?(dr(Un),wn()):dr()},Ut.clipExtent=function(Un){return arguments.length?(Un==null?_n=Pn=zn=Xn=null:(_n=+Un[0][0],Pn=+Un[0][1],zn=+Un[1][0],Xn=+Un[1][1]),wn()):_n==null?null:[[_n,Pn],[zn,Xn]]};function wn(){var Un=r*cr(),On=Ut(xt(Ut.rotate()).invert([0,0]));return ln(_n==null?[[On[0]-Un,On[1]-Un],[On[0]+Un,On[1]+Un]]:bt===hs?[[Math.max(On[0]-Un,_n),Pn],[Math.min(On[0]+Un,zn),Xn]]:[[_n,Math.max(On[1]-Un,Pn)],[zn,Math.min(On[1]+Un,Xn)]])}return wn()}function dl(bt){return L((v+bt)/2)}function Dl(bt,Ut){var dr=l(bt),cr=bt===Ut?p(bt):A(dr/l(Ut))/A(dl(Ut)/dl(bt)),zr=dr*_(dl(bt),cr)/cr;if(!cr)return hs;function ln(_n,Pn){zr>0?Pn<-v+i&&(Pn=-v+i):Pn>v-i&&(Pn=v-i);var zn=zr/_(dl(Pn),cr);return[zn*p(cr*_n),zr-zn*l(cr*_n)]}return ln.invert=function(_n,Pn){var zn=zr-Pn,Xn=w(cr)*h(_n*_n+zn*zn),wn=m(_n,d(zn))*w(zn);return zn*cr<0&&(wn-=r*w(_n)*w(zn)),[wn/cr,2*c(_(zr/Xn,1/cr))-v]},ln}function rl(){return Ms(Dl).scale(109.5).parallels([30,30])}function Rl(bt,Ut){return[bt,Ut]}Rl.invert=Rl;function fu(){return Fo(Rl).scale(152.63)}function Eu(bt,Ut){var dr=l(bt),cr=bt===Ut?p(bt):(dr-l(Ut))/(Ut-bt),zr=dr/cr+bt;if(d(cr)<i)return Rl;function ln(_n,Pn){var zn=zr-Pn,Xn=cr*_n;return[zn*p(Xn),zr-zn*l(Xn)]}return ln.invert=function(_n,Pn){var zn=zr-Pn,Xn=m(_n,d(zn))*w(zn);return zn*cr<0&&(Xn-=r*w(_n)*w(zn)),[Xn/cr,zr-w(cr)*h(_n*_n+zn*zn)]},ln}function lf(){return Ms(Eu).scale(131.154).center([0,13.9389])}var Bi=1.340264,ml=-.081106,nl=893e-6,ts=.003796,vs=h(3)/2,Il=12;function uo(bt,Ut){var dr=S(vs*p(Ut)),cr=dr*dr,zr=cr*cr*cr;return[bt*l(dr)/(vs*(Bi+3*ml*cr+zr*(7*nl+9*ts*cr))),dr*(Bi+ml*cr+zr*(nl+ts*cr))]}uo.invert=function(bt,Ut){for(var dr=Ut,cr=dr*dr,zr=cr*cr*cr,ln=0,_n,Pn,zn;ln<Il&&(Pn=dr*(Bi+ml*cr+zr*(nl+ts*cr))-Ut,zn=Bi+3*ml*cr+zr*(7*nl+9*ts*cr),dr-=_n=Pn/zn,cr=dr*dr,zr=cr*cr*cr,!(d(_n)<n));++ln);return[vs*bt*(Bi+3*ml*cr+zr*(7*nl+9*ts*cr))/l(dr),S(p(dr)/vs)]};function Su(){return Fo(uo).scale(177.158)}function Xo(bt,Ut){var dr=l(Ut),cr=l(bt)*dr;return[dr*p(bt)/cr,p(Ut)/cr]}Xo.invert=pl(c);function Xs(){return Fo(Xo).scale(144.049).clipAngle(60)}function zs(){var bt=1,Ut=0,dr=0,cr=1,zr=1,ln=0,_n,Pn,zn=null,Xn,wn,Un,On=1,jn=1,ia=$s({point:function(ba,Qa){var si=aa([ba,Qa]);this.stream.point(si[0],si[1])}}),Ga=gn,za,Ya;function ja(){return On=bt*cr,jn=bt*zr,za=Ya=null,aa}function aa(ba){var Qa=ba[0]*On,si=ba[1]*jn;if(ln){var Mi=si*_n-Qa*Pn;Qa=Qa*_n+si*Pn,si=Mi}return[Qa+Ut,si+dr]}return aa.invert=function(ba){var Qa=ba[0]-Ut,si=ba[1]-dr;if(ln){var Mi=si*_n+Qa*Pn;Qa=Qa*_n-si*Pn,si=Mi}return[Qa/On,si/jn]},aa.stream=function(ba){return za&&Ya===ba?za:za=ia(Ga(Ya=ba))},aa.postclip=function(ba){return arguments.length?(Ga=ba,zn=Xn=wn=Un=null,ja()):Ga},aa.clipExtent=function(ba){return arguments.length?(Ga=ba==null?(zn=Xn=wn=Un=null,gn):mn(zn=+ba[0][0],Xn=+ba[0][1],wn=+ba[1][0],Un=+ba[1][1]),ja()):zn==null?null:[[zn,Xn],[wn,Un]]},aa.scale=function(ba){return arguments.length?(bt=+ba,ja()):bt},aa.translate=function(ba){return arguments.length?(Ut=+ba[0],dr=+ba[1],ja()):[Ut,dr]},aa.angle=function(ba){return arguments.length?(ln=ba%360*g,Pn=p(ln),_n=l(ln),ja()):ln*b},aa.reflectX=function(ba){return arguments.length?(cr=ba?-1:1,ja()):cr<0},aa.reflectY=function(ba){return arguments.length?(zr=ba?-1:1,ja()):zr<0},aa.fitExtent=function(ba,Qa){return Ts(aa,ba,Qa)},aa.fitSize=function(ba,Qa){return Sl(aa,ba,Qa)},aa.fitWidth=function(ba,Qa){return su(aa,ba,Qa)},aa.fitHeight=function(ba,Qa){return Tu(aa,ba,Qa)},aa}function Es(bt,Ut){var dr=Ut*Ut,cr=dr*dr;return[bt*(.8707-.131979*dr+cr*(-.013791+cr*(.003971*dr-.001529*cr))),Ut*(1.007226+dr*(.015085+cr*(-.044475+.028874*dr-.005916*cr)))]}Es.invert=function(bt,Ut){var dr=Ut,cr=25,zr;do{var ln=dr*dr,_n=ln*ln;dr-=zr=(dr*(1.007226+ln*(.015085+_n*(-.044475+.028874*ln-.005916*_n)))-Ut)/(1.007226+ln*(.015085*3+_n*(-.044475*7+.028874*9*ln-.005916*11*_n)))}while(d(zr)>i&&--cr>0);return[bt/(.8707+(ln=dr*dr)*(-.131979+ln*(-.013791+ln*ln*ln*(.003971-.001529*ln)))),dr]};function Ho(){return Fo(Es).scale(175.295)}function Zi(bt,Ut){return[l(Ut)*p(bt),p(Ut)]}Zi.invert=pl(S);function Bo(){return Fo(Zi).scale(249.5).clipAngle(90+i)}function ps(bt,Ut){var dr=l(Ut),cr=1+l(bt)*dr;return[dr*p(bt)/cr,p(Ut)/cr]}ps.invert=pl(function(bt){return 2*c(bt)});function ku(){return Fo(ps).scale(250).clipAngle(142)}function Kl(bt,Ut){return[A(L((v+Ut)/2)),-bt]}Kl.invert=function(bt,Ut){return[-Ut,2*c(u(bt))-v]};function Cu(){var bt=uu(Kl),Ut=bt.center,dr=bt.rotate;return bt.center=function(cr){return arguments.length?Ut([-cr[1],cr[0]]):(cr=Ut(),[cr[1],-cr[0]])},bt.rotate=function(cr){return arguments.length?dr([cr[0],cr[1],cr.length>2?cr[2]+90:90]):(cr=dr(),[cr[0],cr[1],cr[2]-90])},dr([0,0,90]).scale(159.155)}x.geoAlbers=Ll,x.geoAlbersUsa=cs,x.geoArea=Z,x.geoAzimuthalEqualArea=Pl,x.geoAzimuthalEqualAreaRaw=Zl,x.geoAzimuthalEquidistant=Gu,x.geoAzimuthalEquidistantRaw=tl,x.geoBounds=Xe,x.geoCentroid=Et,x.geoCircle=ur,x.geoClipAntimeridian=Jt,x.geoClipCircle=Dr,x.geoClipExtent=Wn,x.geoClipRectangle=mn,x.geoConicConformal=rl,x.geoConicConformalRaw=Dl,x.geoConicEqualArea=Cl,x.geoConicEqualAreaRaw=go,x.geoConicEquidistant=lf,x.geoConicEquidistantRaw=Eu,x.geoContains=gr,x.geoDistance=Ln,x.geoEqualEarth=Su,x.geoEqualEarthRaw=uo,x.geoEquirectangular=fu,x.geoEquirectangularRaw=Rl,x.geoGnomonic=Xs,x.geoGnomonicRaw=Xo,x.geoGraticule=sn,x.geoGraticule10=Cn,x.geoIdentity=zs,x.geoInterpolate=Tn,x.geoLength=Sr,x.geoMercator=Ws,x.geoMercatorRaw=hs,x.geoNaturalEarth1=Ho,x.geoNaturalEarth1Raw=Es,x.geoOrthographic=Bo,x.geoOrthographicRaw=Zi,x.geoPath=Wl,x.geoProjection=Fo,x.geoProjectionMutator=kl,x.geoRotation=xt,x.geoStereographic=ku,x.geoStereographicRaw=ps,x.geoStream=H,x.geoTransform=wu,x.geoTransverseMercator=Cu,x.geoTransverseMercatorRaw=Kl,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){function f(We,Ee){return We.parent===Ee.parent?1:2}function M(We){return We.reduce(T,0)/We.length}function T(We,Ee){return We+Ee.x}function e(We){return 1+We.reduce(a,0)}function a(We,Ee){return Math.max(We,Ee.y)}function i(We){for(var Ee;Ee=We.children;)We=Ee[0];return We}function n(We){for(var Ee;Ee=We.children;)We=Ee[Ee.length-1];return We}function r(){var We=f,Ee=1,He=1,Ke=!1;function et(At){var mt,Mt=0;At.eachAfter(function(Wt){var sr=Wt.children;sr?(Wt.x=M(sr),Wt.y=e(sr)):(Wt.x=mt?Mt+=We(Wt,mt):0,Wt.y=0,mt=Wt)});var Gt=i(At),zt=n(At),Ht=Gt.x-We(Gt,zt)/2,Xt=zt.x+We(zt,Gt)/2;return At.eachAfter(Ke?function(Wt){Wt.x=(Wt.x-At.x)*Ee,Wt.y=(At.y-Wt.y)*He}:function(Wt){Wt.x=(Wt.x-Ht)/(Xt-Ht)*Ee,Wt.y=(1-(At.y?Wt.y/At.y:1))*He})}return et.separation=function(At){return arguments.length?(We=At,et):We},et.size=function(At){return arguments.length?(Ke=!1,Ee=+At[0],He=+At[1],et):Ke?null:[Ee,He]},et.nodeSize=function(At){return arguments.length?(Ke=!0,Ee=+At[0],He=+At[1],et):Ke?[Ee,He]:null},et}function v(We){var Ee=0,He=We.children,Ke=He&&He.length;if(!Ke)Ee=1;else for(;--Ke>=0;)Ee+=He[Ke].value;We.value=Ee}function s(){return this.eachAfter(v)}function o(We){var Ee=this,He,Ke=[Ee],et,At,mt;do for(He=Ke.reverse(),Ke=[];Ee=He.pop();)if(We(Ee),et=Ee.children,et)for(At=0,mt=et.length;At<mt;++At)Ke.push(et[At]);while(Ke.length);return this}function b(We){for(var Ee=this,He=[Ee],Ke,et;Ee=He.pop();)if(We(Ee),Ke=Ee.children,Ke)for(et=Ke.length-1;et>=0;--et)He.push(Ke[et]);return this}function g(We){for(var Ee=this,He=[Ee],Ke=[],et,At,mt;Ee=He.pop();)if(Ke.push(Ee),et=Ee.children,et)for(At=0,mt=et.length;At<mt;++At)He.push(et[At]);for(;Ee=Ke.pop();)We(Ee);return this}function d(We){return this.eachAfter(function(Ee){for(var He=+We(Ee.data)||0,Ke=Ee.children,et=Ke&&Ke.length;--et>=0;)He+=Ke[et].value;Ee.value=He})}function c(We){return this.eachBefore(function(Ee){Ee.children&&Ee.children.sort(We)})}function m(We){for(var Ee=this,He=l(Ee,We),Ke=[Ee];Ee!==He;)Ee=Ee.parent,Ke.push(Ee);for(var et=Ke.length;We!==He;)Ke.splice(et,0,We),We=We.parent;return Ke}function l(We,Ee){if(We===Ee)return We;var He=We.ancestors(),Ke=Ee.ancestors(),et=null;for(We=He.pop(),Ee=Ke.pop();We===Ee;)et=We,We=He.pop(),Ee=Ke.pop();return et}function y(){for(var We=this,Ee=[We];We=We.parent;)Ee.push(We);return Ee}function u(){var We=[];return this.each(function(Ee){We.push(Ee)}),We}function A(){var We=[];return this.eachBefore(function(Ee){Ee.children||We.push(Ee)}),We}function _(){var We=this,Ee=[];return We.each(function(He){He!==We&&Ee.push({source:He.parent,target:He})}),Ee}function p(We,Ee){var He=new S(We),Ke=+We.value&&(He.value=We.value),et,At=[He],mt,Mt,Gt,zt;for(Ee==null&&(Ee=h);et=At.pop();)if(Ke&&(et.value=+et.data.value),(Mt=Ee(et.data))&&(zt=Mt.length))for(et.children=new Array(zt),Gt=zt-1;Gt>=0;--Gt)At.push(mt=et.children[Gt]=new S(Mt[Gt])),mt.parent=et,mt.depth=et.depth+1;return He.eachBefore(E)}function w(){return p(this).eachBefore(L)}function h(We){return We.children}function L(We){We.data=We.data.data}function E(We){var Ee=0;do We.height=Ee;while((We=We.parent)&&We.height<++Ee)}function S(We){this.data=We,this.depth=this.height=0,this.parent=null}S.prototype=p.prototype={constructor:S,count:s,each:o,eachAfter:g,eachBefore:b,sum:d,sort:c,path:m,ancestors:y,descendants:u,leaves:A,links:_,copy:w};var P=Array.prototype.slice;function F(We){for(var Ee=We.length,He,Ke;Ee;)Ke=Math.random()*Ee--|0,He=We[Ee],We[Ee]=We[Ke],We[Ke]=He;return We}function I(We){for(var Ee=0,He=(We=F(P.call(We))).length,Ke=[],et,At;Ee<He;)et=We[Ee],At&&O(At,et)?++Ee:(At=H(Ke=D(Ke,et)),Ee=0);return At}function D(We,Ee){var He,Ke;if(z(Ee,We))return[Ee];for(He=0;He<We.length;++He)if(R(Ee,We[He])&&z(ee(We[He],Ee),We))return[We[He],Ee];for(He=0;He<We.length-1;++He)for(Ke=He+1;Ke<We.length;++Ke)if(R(ee(We[He],We[Ke]),Ee)&&R(ee(We[He],Ee),We[Ke])&&R(ee(We[Ke],Ee),We[He])&&z(j(We[He],We[Ke],Ee),We))return[We[He],We[Ke],Ee];throw new Error}function R(We,Ee){var He=We.r-Ee.r,Ke=Ee.x-We.x,et=Ee.y-We.y;return He<0||He*He<Ke*Ke+et*et}function O(We,Ee){var He=We.r-Ee.r+1e-6,Ke=Ee.x-We.x,et=Ee.y-We.y;return He>0&&He*He>Ke*Ke+et*et}function z(We,Ee){for(var He=0;He<Ee.length;++He)if(!O(We,Ee[He]))return!1;return!0}function H(We){switch(We.length){case 1:return Y(We[0]);case 2:return ee(We[0],We[1]);case 3:return j(We[0],We[1],We[2])}}function Y(We){return{x:We.x,y:We.y,r:We.r}}function ee(We,Ee){var He=We.x,Ke=We.y,et=We.r,At=Ee.x,mt=Ee.y,Mt=Ee.r,Gt=At-He,zt=mt-Ke,Ht=Mt-et,Xt=Math.sqrt(Gt*Gt+zt*zt);return{x:(He+At+Gt/Xt*Ht)/2,y:(Ke+mt+zt/Xt*Ht)/2,r:(Xt+et+Mt)/2}}function j(We,Ee,He){var Ke=We.x,et=We.y,At=We.r,mt=Ee.x,Mt=Ee.y,Gt=Ee.r,zt=He.x,Ht=He.y,Xt=He.r,Wt=Ke-mt,sr=Ke-zt,Gr=et-Mt,cn=et-Ht,en=Gt-At,st=Xt-At,rr=Ke*Ke+et*et-At*At,er=rr-mt*mt-Mt*Mt+Gt*Gt,jt=rr-zt*zt-Ht*Ht+Xt*Xt,Mr=sr*Gr-Wt*cn,it=(Gr*jt-cn*er)/(Mr*2)-Ke,Qe=(cn*en-Gr*st)/Mr,ft=(sr*er-Wt*jt)/(Mr*2)-et,ct=(Wt*st-sr*en)/Mr,Et=Qe*Qe+ct*ct-1,Nt=2*(At+it*Qe+ft*ct),Pe=it*it+ft*ft-At*At,Le=-(Et?(Nt+Math.sqrt(Nt*Nt-4*Et*Pe))/(2*Et):Pe/Nt);return{x:Ke+it+Qe*Le,y:et+ft+ct*Le,r:Le}}function X(We,Ee,He){var Ke=We.x-Ee.x,et,At,mt=We.y-Ee.y,Mt,Gt,zt=Ke*Ke+mt*mt;zt?(At=Ee.r+He.r,At*=At,Gt=We.r+He.r,Gt*=Gt,At>Gt?(et=(zt+Gt-At)/(2*zt),Mt=Math.sqrt(Math.max(0,Gt/zt-et*et)),He.x=We.x-et*Ke-Mt*mt,He.y=We.y-et*mt+Mt*Ke):(et=(zt+At-Gt)/(2*zt),Mt=Math.sqrt(Math.max(0,At/zt-et*et)),He.x=Ee.x+et*Ke-Mt*mt,He.y=Ee.y+et*mt+Mt*Ke)):(He.x=Ee.x+He.r,He.y=Ee.y)}function ae(We,Ee){var He=We.r+Ee.r-1e-6,Ke=Ee.x-We.x,et=Ee.y-We.y;return He>0&&He*He>Ke*Ke+et*et}function fe(We){var Ee=We._,He=We.next._,Ke=Ee.r+He.r,et=(Ee.x*He.r+He.x*Ee.r)/Ke,At=(Ee.y*He.r+He.y*Ee.r)/Ke;return et*et+At*At}function K(We){this._=We,this.next=null,this.previous=null}function J(We){if(!(et=We.length))return 0;var Ee,He,Ke,et,At,mt,Mt,Gt,zt,Ht,Xt;if(Ee=We[0],Ee.x=0,Ee.y=0,!(et>1))return Ee.r;if(He=We[1],Ee.x=-He.r,He.x=Ee.r,He.y=0,!(et>2))return Ee.r+He.r;X(He,Ee,Ke=We[2]),Ee=new K(Ee),He=new K(He),Ke=new K(Ke),Ee.next=Ke.previous=He,He.next=Ee.previous=Ke,Ke.next=He.previous=Ee;e:for(Mt=3;Mt<et;++Mt){X(Ee._,He._,Ke=We[Mt]),Ke=new K(Ke),Gt=He.next,zt=Ee.previous,Ht=He._.r,Xt=Ee._.r;do if(Ht<=Xt){if(ae(Gt._,Ke._)){He=Gt,Ee.next=He,He.previous=Ee,--Mt;continue e}Ht+=Gt._.r,Gt=Gt.next}else{if(ae(zt._,Ke._)){Ee=zt,Ee.next=He,He.previous=Ee,--Mt;continue e}Xt+=zt._.r,zt=zt.previous}while(Gt!==zt.next);for(Ke.previous=Ee,Ke.next=He,Ee.next=He.previous=He=Ke,At=fe(Ee);(Ke=Ke.next)!==He;)(mt=fe(Ke))<At&&(Ee=Ke,At=mt);He=Ee.next}for(Ee=[He._],Ke=He;(Ke=Ke.next)!==He;)Ee.push(Ke._);for(Ke=I(Ee),Mt=0;Mt<et;++Mt)Ee=We[Mt],Ee.x-=Ke.x,Ee.y-=Ke.y;return Ke.r}function U(We){return J(We),We}function V(We){return We==null?null:q(We)}function q(We){if(typeof We!="function")throw new Error;return We}function re(){return 0}function Z(We){return function(){return We}}function Q(We){return Math.sqrt(We.value)}function ie(){var We=null,Ee=1,He=1,Ke=re;function et(At){return At.x=Ee/2,At.y=He/2,We?At.eachBefore(oe(We)).eachAfter(ne(Ke,.5)).eachBefore(se(1)):At.eachBefore(oe(Q)).eachAfter(ne(re,1)).eachAfter(ne(Ke,At.r/Math.min(Ee,He))).eachBefore(se(Math.min(Ee,He)/(2*At.r))),At}return et.radius=function(At){return arguments.length?(We=V(At),et):We},et.size=function(At){return arguments.length?(Ee=+At[0],He=+At[1],et):[Ee,He]},et.padding=function(At){return arguments.length?(Ke=typeof At=="function"?At:Z(+At),et):Ke},et}function oe(We){return function(Ee){Ee.children||(Ee.r=Math.max(0,+We(Ee)||0))}}function ne(We,Ee){return function(He){if(Ke=He.children){var Ke,et,At=Ke.length,mt=We(He)*Ee||0,Mt;if(mt)for(et=0;et<At;++et)Ke[et].r+=mt;if(Mt=J(Ke),mt)for(et=0;et<At;++et)Ke[et].r-=mt;He.r=Mt+mt}}}function se(We){return function(Ee){var He=Ee.parent;Ee.r*=We,He&&(Ee.x=He.x+We*Ee.x,Ee.y=He.y+We*Ee.y)}}function _e(We){We.x0=Math.round(We.x0),We.y0=Math.round(We.y0),We.x1=Math.round(We.x1),We.y1=Math.round(We.y1)}function ue(We,Ee,He,Ke,et){for(var At=We.children,mt,Mt=-1,Gt=At.length,zt=We.value&&(Ke-Ee)/We.value;++Mt<Gt;)mt=At[Mt],mt.y0=He,mt.y1=et,mt.x0=Ee,mt.x1=Ee+=mt.value*zt}function ge(){var We=1,Ee=1,He=0,Ke=!1;function et(mt){var Mt=mt.height+1;return mt.x0=mt.y0=He,mt.x1=We,mt.y1=Ee/Mt,mt.eachBefore(At(Ee,Mt)),Ke&&mt.eachBefore(_e),mt}function At(mt,Mt){return function(Gt){Gt.children&&ue(Gt,Gt.x0,mt*(Gt.depth+1)/Mt,Gt.x1,mt*(Gt.depth+2)/Mt);var zt=Gt.x0,Ht=Gt.y0,Xt=Gt.x1-He,Wt=Gt.y1-He;Xt<zt&&(zt=Xt=(zt+Xt)/2),Wt<Ht&&(Ht=Wt=(Ht+Wt)/2),Gt.x0=zt,Gt.y0=Ht,Gt.x1=Xt,Gt.y1=Wt}}return et.round=function(mt){return arguments.length?(Ke=!!mt,et):Ke},et.size=function(mt){return arguments.length?(We=+mt[0],Ee=+mt[1],et):[We,Ee]},et.padding=function(mt){return arguments.length?(He=+mt,et):He},et}var xe="$",ye={depth:-1},be={};function Se(We){return We.id}function Re(We){return We.parentId}function Ve(){var We=Se,Ee=Re;function He(Ke){var et,At,mt=Ke.length,Mt,Gt,zt,Ht=new Array(mt),Xt,Wt,sr={};for(At=0;At<mt;++At)et=Ke[At],zt=Ht[At]=new S(et),(Xt=We(et,At,Ke))!=null&&(Xt+="")&&(Wt=xe+(zt.id=Xt),sr[Wt]=Wt in sr?be:zt);for(At=0;At<mt;++At)if(zt=Ht[At],Xt=Ee(Ke[At],At,Ke),Xt==null||!(Xt+="")){if(Mt)throw new Error("multiple roots");Mt=zt}else{if(Gt=sr[xe+Xt],!Gt)throw new Error("missing: "+Xt);if(Gt===be)throw new Error("ambiguous: "+Xt);Gt.children?Gt.children.push(zt):Gt.children=[zt],zt.parent=Gt}if(!Mt)throw new Error("no root");if(Mt.parent=ye,Mt.eachBefore(function(Gr){Gr.depth=Gr.parent.depth+1,--mt}).eachBefore(E),Mt.parent=null,mt>0)throw new Error("cycle");return Mt}return He.id=function(Ke){return arguments.length?(We=q(Ke),He):We},He.parentId=function(Ke){return arguments.length?(Ee=q(Ke),He):Ee},He}function Ae(We,Ee){return We.parent===Ee.parent?1:2}function Ce(We){var Ee=We.children;return Ee?Ee[0]:We.t}function Ze(We){var Ee=We.children;return Ee?Ee[Ee.length-1]:We.t}function Ye(We,Ee,He){var Ke=He/(Ee.i-We.i);Ee.c-=Ke,Ee.s+=He,We.c+=Ke,Ee.z+=He,Ee.m+=He}function ze(We){for(var Ee=0,He=0,Ke=We.children,et=Ke.length,At;--et>=0;)At=Ke[et],At.z+=Ee,At.m+=Ee,Ee+=At.s+(He+=At.c)}function Ie(We,Ee,He){return We.a.parent===Ee.parent?We.a:He}function Ge(We,Ee){this._=We,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ee}Ge.prototype=Object.create(S.prototype);function dt(We){for(var Ee=new Ge(We,0),He,Ke=[Ee],et,At,mt,Mt;He=Ke.pop();)if(At=He._.children)for(He.children=new Array(Mt=At.length),mt=Mt-1;mt>=0;--mt)Ke.push(et=He.children[mt]=new Ge(At[mt],mt)),et.parent=He;return(Ee.parent=new Ge(null,0)).children=[Ee],Ee}function Rt(){var We=Ae,Ee=1,He=1,Ke=null;function et(zt){var Ht=dt(zt);if(Ht.eachAfter(At),Ht.parent.m=-Ht.z,Ht.eachBefore(mt),Ke)zt.eachBefore(Gt);else{var Xt=zt,Wt=zt,sr=zt;zt.eachBefore(function(rr){rr.x<Xt.x&&(Xt=rr),rr.x>Wt.x&&(Wt=rr),rr.depth>sr.depth&&(sr=rr)});var Gr=Xt===Wt?1:We(Xt,Wt)/2,cn=Gr-Xt.x,en=Ee/(Wt.x+Gr+cn),st=He/(sr.depth||1);zt.eachBefore(function(rr){rr.x=(rr.x+cn)*en,rr.y=rr.depth*st})}return zt}function At(zt){var Ht=zt.children,Xt=zt.parent.children,Wt=zt.i?Xt[zt.i-1]:null;if(Ht){ze(zt);var sr=(Ht[0].z+Ht[Ht.length-1].z)/2;Wt?(zt.z=Wt.z+We(zt._,Wt._),zt.m=zt.z-sr):zt.z=sr}else Wt&&(zt.z=Wt.z+We(zt._,Wt._));zt.parent.A=Mt(zt,Wt,zt.parent.A||Xt[0])}function mt(zt){zt._.x=zt.z+zt.parent.m,zt.m+=zt.parent.m}function Mt(zt,Ht,Xt){if(Ht){for(var Wt=zt,sr=zt,Gr=Ht,cn=Wt.parent.children[0],en=Wt.m,st=sr.m,rr=Gr.m,er=cn.m,jt;Gr=Ze(Gr),Wt=Ce(Wt),Gr&&Wt;)cn=Ce(cn),sr=Ze(sr),sr.a=zt,jt=Gr.z+rr-Wt.z-en+We(Gr._,Wt._),jt>0&&(Ye(Ie(Gr,zt,Xt),zt,jt),en+=jt,st+=jt),rr+=Gr.m,en+=Wt.m,er+=cn.m,st+=sr.m;Gr&&!Ze(sr)&&(sr.t=Gr,sr.m+=rr-st),Wt&&!Ce(cn)&&(cn.t=Wt,cn.m+=en-er,Xt=zt)}return Xt}function Gt(zt){zt.x*=Ee,zt.y=zt.depth*He}return et.separation=function(zt){return arguments.length?(We=zt,et):We},et.size=function(zt){return arguments.length?(Ke=!1,Ee=+zt[0],He=+zt[1],et):Ke?null:[Ee,He]},et.nodeSize=function(zt){return arguments.length?(Ke=!0,Ee=+zt[0],He=+zt[1],et):Ke?[Ee,He]:null},et}function Qt(We,Ee,He,Ke,et){for(var At=We.children,mt,Mt=-1,Gt=At.length,zt=We.value&&(et-He)/We.value;++Mt<Gt;)mt=At[Mt],mt.x0=Ee,mt.x1=Ke,mt.y0=He,mt.y1=He+=mt.value*zt}var Bt=(1+Math.sqrt(5))/2;function Ct(We,Ee,He,Ke,et,At){for(var mt=[],Mt=Ee.children,Gt,zt,Ht=0,Xt=0,Wt=Mt.length,sr,Gr,cn=Ee.value,en,st,rr,er,jt,Mr,it;Ht<Wt;){sr=et-He,Gr=At-Ke;do en=Mt[Xt++].value;while(!en&&Xt<Wt);for(st=rr=en,Mr=Math.max(Gr/sr,sr/Gr)/(cn*We),it=en*en*Mr,jt=Math.max(rr/it,it/st);Xt<Wt;++Xt){if(en+=zt=Mt[Xt].value,zt<st&&(st=zt),zt>rr&&(rr=zt),it=en*en*Mr,er=Math.max(rr/it,it/st),er>jt){en-=zt;break}jt=er}mt.push(Gt={value:en,dice:sr<Gr,children:Mt.slice(Ht,Xt)}),Gt.dice?ue(Gt,He,Ke,et,cn?Ke+=Gr*en/cn:At):Qt(Gt,He,Ke,cn?He+=sr*en/cn:et,At),cn-=en,Ht=Xt}return mt}var Kt=function We(Ee){function He(Ke,et,At,mt,Mt){Ct(Ee,Ke,et,At,mt,Mt)}return He.ratio=function(Ke){return We((Ke=+Ke)>1?Ke:1)},He}(Bt);function Ot(){var We=Kt,Ee=!1,He=1,Ke=1,et=[0],At=re,mt=re,Mt=re,Gt=re,zt=re;function Ht(Wt){return Wt.x0=Wt.y0=0,Wt.x1=He,Wt.y1=Ke,Wt.eachBefore(Xt),et=[0],Ee&&Wt.eachBefore(_e),Wt}function Xt(Wt){var sr=et[Wt.depth],Gr=Wt.x0+sr,cn=Wt.y0+sr,en=Wt.x1-sr,st=Wt.y1-sr;en<Gr&&(Gr=en=(Gr+en)/2),st<cn&&(cn=st=(cn+st)/2),Wt.x0=Gr,Wt.y0=cn,Wt.x1=en,Wt.y1=st,Wt.children&&(sr=et[Wt.depth+1]=At(Wt)/2,Gr+=zt(Wt)-sr,cn+=mt(Wt)-sr,en-=Mt(Wt)-sr,st-=Gt(Wt)-sr,en<Gr&&(Gr=en=(Gr+en)/2),st<cn&&(cn=st=(cn+st)/2),We(Wt,Gr,cn,en,st))}return Ht.round=function(Wt){return arguments.length?(Ee=!!Wt,Ht):Ee},Ht.size=function(Wt){return arguments.length?(He=+Wt[0],Ke=+Wt[1],Ht):[He,Ke]},Ht.tile=function(Wt){return arguments.length?(We=q(Wt),Ht):We},Ht.padding=function(Wt){return arguments.length?Ht.paddingInner(Wt).paddingOuter(Wt):Ht.paddingInner()},Ht.paddingInner=function(Wt){return arguments.length?(At=typeof Wt=="function"?Wt:Z(+Wt),Ht):At},Ht.paddingOuter=function(Wt){return arguments.length?Ht.paddingTop(Wt).paddingRight(Wt).paddingBottom(Wt).paddingLeft(Wt):Ht.paddingTop()},Ht.paddingTop=function(Wt){return arguments.length?(mt=typeof Wt=="function"?Wt:Z(+Wt),Ht):mt},Ht.paddingRight=function(Wt){return arguments.length?(Mt=typeof Wt=="function"?Wt:Z(+Wt),Ht):Mt},Ht.paddingBottom=function(Wt){return arguments.length?(Gt=typeof Wt=="function"?Wt:Z(+Wt),Ht):Gt},Ht.paddingLeft=function(Wt){return arguments.length?(zt=typeof Wt=="function"?Wt:Z(+Wt),Ht):zt},Ht}function St(We,Ee,He,Ke,et){var At=We.children,mt,Mt=At.length,Gt,zt=new Array(Mt+1);for(zt[0]=Gt=mt=0;mt<Mt;++mt)zt[mt+1]=Gt+=At[mt].value;Ht(0,Mt,We.value,Ee,He,Ke,et);function Ht(Xt,Wt,sr,Gr,cn,en,st){if(Xt>=Wt-1){var rr=At[Xt];rr.x0=Gr,rr.y0=cn,rr.x1=en,rr.y1=st;return}for(var er=zt[Xt],jt=sr/2+er,Mr=Xt+1,it=Wt-1;Mr<it;){var Qe=Mr+it>>>1;zt[Qe]<jt?Mr=Qe+1:it=Qe}jt-zt[Mr-1]<zt[Mr]-jt&&Xt+1<Mr&&--Mr;var ft=zt[Mr]-er,ct=sr-ft;if(en-Gr>st-cn){var Et=(Gr*ct+en*ft)/sr;Ht(Xt,Mr,ft,Gr,cn,Et,st),Ht(Mr,Wt,ct,Et,cn,en,st)}else{var Nt=(cn*ct+st*ft)/sr;Ht(Xt,Mr,ft,Gr,cn,en,Nt),Ht(Mr,Wt,ct,Gr,Nt,en,st)}}}function Xe(We,Ee,He,Ke,et){(We.depth&1?Qt:ue)(We,Ee,He,Ke,et)}var at=function We(Ee){function He(Ke,et,At,mt,Mt){if((Gt=Ke._squarify)&&Gt.ratio===Ee)for(var Gt,zt,Ht,Xt,Wt=-1,sr,Gr=Gt.length,cn=Ke.value;++Wt<Gr;){for(zt=Gt[Wt],Ht=zt.children,Xt=zt.value=0,sr=Ht.length;Xt<sr;++Xt)zt.value+=Ht[Xt].value;zt.dice?ue(zt,et,At,mt,At+=(Mt-At)*zt.value/cn):Qt(zt,et,At,et+=(mt-et)*zt.value/cn,Mt),cn-=zt.value}else Ke._squarify=Gt=Ct(Ee,Ke,et,At,mt,Mt),Gt.ratio=Ee}return He.ratio=function(Ke){return We((Ke=+Ke)>1?Ke:1)},He}(Bt);x.cluster=r,x.hierarchy=p,x.pack=ie,x.packEnclose=I,x.packSiblings=U,x.partition=ge,x.stratify=Ve,x.tree=Rt,x.treemap=Ot,x.treemapBinary=St,x.treemapDice=ue,x.treemapResquarify=at,x.treemapSlice=Qt,x.treemapSliceDice=Xe,x.treemapSquarify=Kt,Object.defineProperty(x,"__esModule",{value:!0})})},{}],116:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-color")):(x=x||self,f(x.d3=x.d3||{},x.d3))})(this,function(x,f){function M(Ae,Ce,Ze,Ye,ze){var Ie=Ae*Ae,Ge=Ie*Ae;return((1-3*Ae+3*Ie-Ge)*Ce+(4-6*Ie+3*Ge)*Ze+(1+3*Ae+3*Ie-3*Ge)*Ye+Ge*ze)/6}function T(Ae){var Ce=Ae.length-1;return function(Ze){var Ye=Ze<=0?Ze=0:Ze>=1?(Ze=1,Ce-1):Math.floor(Ze*Ce),ze=Ae[Ye],Ie=Ae[Ye+1],Ge=Ye>0?Ae[Ye-1]:2*ze-Ie,dt=Ye<Ce-1?Ae[Ye+2]:2*Ie-ze;return M((Ze-Ye/Ce)*Ce,Ge,ze,Ie,dt)}}function e(Ae){var Ce=Ae.length;return function(Ze){var Ye=Math.floor(((Ze%=1)<0?++Ze:Ze)*Ce),ze=Ae[(Ye+Ce-1)%Ce],Ie=Ae[Ye%Ce],Ge=Ae[(Ye+1)%Ce],dt=Ae[(Ye+2)%Ce];return M((Ze-Ye/Ce)*Ce,ze,Ie,Ge,dt)}}function a(Ae){return function(){return Ae}}function i(Ae,Ce){return function(Ze){return Ae+Ze*Ce}}function n(Ae,Ce,Ze){return Ae=Math.pow(Ae,Ze),Ce=Math.pow(Ce,Ze)-Ae,Ze=1/Ze,function(Ye){return Math.pow(Ae+Ye*Ce,Ze)}}function r(Ae,Ce){var Ze=Ce-Ae;return Ze?i(Ae,Ze>180||Ze<-180?Ze-360*Math.round(Ze/360):Ze):a(isNaN(Ae)?Ce:Ae)}function v(Ae){return(Ae=+Ae)==1?s:function(Ce,Ze){return Ze-Ce?n(Ce,Ze,Ae):a(isNaN(Ce)?Ze:Ce)}}function s(Ae,Ce){var Ze=Ce-Ae;return Ze?i(Ae,Ze):a(isNaN(Ae)?Ce:Ae)}var o=function Ae(Ce){var Ze=v(Ce);function Ye(ze,Ie){var Ge=Ze((ze=f.rgb(ze)).r,(Ie=f.rgb(Ie)).r),dt=Ze(ze.g,Ie.g),Rt=Ze(ze.b,Ie.b),Qt=s(ze.opacity,Ie.opacity);return function(Bt){return ze.r=Ge(Bt),ze.g=dt(Bt),ze.b=Rt(Bt),ze.opacity=Qt(Bt),ze+""}}return Ye.gamma=Ae,Ye}(1);function b(Ae){return function(Ce){var Ze=Ce.length,Ye=new Array(Ze),ze=new Array(Ze),Ie=new Array(Ze),Ge,dt;for(Ge=0;Ge<Ze;++Ge)dt=f.rgb(Ce[Ge]),Ye[Ge]=dt.r||0,ze[Ge]=dt.g||0,Ie[Ge]=dt.b||0;return Ye=Ae(Ye),ze=Ae(ze),Ie=Ae(Ie),dt.opacity=1,function(Rt){return dt.r=Ye(Rt),dt.g=ze(Rt),dt.b=Ie(Rt),dt+""}}}var g=b(T),d=b(e);function c(Ae,Ce){Ce||(Ce=[]);var Ze=Ae?Math.min(Ce.length,Ae.length):0,Ye=Ce.slice(),ze;return function(Ie){for(ze=0;ze<Ze;++ze)Ye[ze]=Ae[ze]*(1-Ie)+Ce[ze]*Ie;return Ye}}function m(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function l(Ae,Ce){return(m(Ce)?c:y)(Ae,Ce)}function y(Ae,Ce){var Ze=Ce?Ce.length:0,Ye=Ae?Math.min(Ze,Ae.length):0,ze=new Array(Ye),Ie=new Array(Ze),Ge;for(Ge=0;Ge<Ye;++Ge)ze[Ge]=S(Ae[Ge],Ce[Ge]);for(;Ge<Ze;++Ge)Ie[Ge]=Ce[Ge];return function(dt){for(Ge=0;Ge<Ye;++Ge)Ie[Ge]=ze[Ge](dt);return Ie}}function u(Ae,Ce){var Ze=new Date;return Ae=+Ae,Ce=+Ce,function(Ye){return Ze.setTime(Ae*(1-Ye)+Ce*Ye),Ze}}function A(Ae,Ce){return Ae=+Ae,Ce=+Ce,function(Ze){return Ae*(1-Ze)+Ce*Ze}}function _(Ae,Ce){var Ze={},Ye={},ze;(Ae===null||typeof Ae!="object")&&(Ae={}),(Ce===null||typeof Ce!="object")&&(Ce={});for(ze in Ce)ze in Ae?Ze[ze]=S(Ae[ze],Ce[ze]):Ye[ze]=Ce[ze];return function(Ie){for(ze in Ze)Ye[ze]=Ze[ze](Ie);return Ye}}var p=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w=new RegExp(p.source,"g");function h(Ae){return function(){return Ae}}function L(Ae){return function(Ce){return Ae(Ce)+""}}function E(Ae,Ce){var Ze=p.lastIndex=w.lastIndex=0,Ye,ze,Ie,Ge=-1,dt=[],Rt=[];for(Ae=Ae+"",Ce=Ce+"";(Ye=p.exec(Ae))&&(ze=w.exec(Ce));)(Ie=ze.index)>Ze&&(Ie=Ce.slice(Ze,Ie),dt[Ge]?dt[Ge]+=Ie:dt[++Ge]=Ie),(Ye=Ye[0])===(ze=ze[0])?dt[Ge]?dt[Ge]+=ze:dt[++Ge]=ze:(dt[++Ge]=null,Rt.push({i:Ge,x:A(Ye,ze)})),Ze=w.lastIndex;return Ze<Ce.length&&(Ie=Ce.slice(Ze),dt[Ge]?dt[Ge]+=Ie:dt[++Ge]=Ie),dt.length<2?Rt[0]?L(Rt[0].x):h(Ce):(Ce=Rt.length,function(Qt){for(var Bt=0,Ct;Bt<Ce;++Bt)dt[(Ct=Rt[Bt]).i]=Ct.x(Qt);return dt.join("")})}function S(Ae,Ce){var Ze=typeof Ce,Ye;return Ce==null||Ze==="boolean"?a(Ce):(Ze==="number"?A:Ze==="string"?(Ye=f.color(Ce))?(Ce=Ye,o):E:Ce instanceof f.color?o:Ce instanceof Date?u:m(Ce)?c:Array.isArray(Ce)?y:typeof Ce.valueOf!="function"&&typeof Ce.toString!="function"||isNaN(Ce)?_:A)(Ae,Ce)}function P(Ae){var Ce=Ae.length;return function(Ze){return Ae[Math.max(0,Math.min(Ce-1,Math.floor(Ze*Ce)))]}}function F(Ae,Ce){var Ze=r(+Ae,+Ce);return function(Ye){var ze=Ze(Ye);return ze-360*Math.floor(ze/360)}}function I(Ae,Ce){return Ae=+Ae,Ce=+Ce,function(Ze){return Math.round(Ae*(1-Ze)+Ce*Ze)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(Ae,Ce,Ze,Ye,ze,Ie){var Ge,dt,Rt;return(Ge=Math.sqrt(Ae*Ae+Ce*Ce))&&(Ae/=Ge,Ce/=Ge),(Rt=Ae*Ze+Ce*Ye)&&(Ze-=Ae*Rt,Ye-=Ce*Rt),(dt=Math.sqrt(Ze*Ze+Ye*Ye))&&(Ze/=dt,Ye/=dt,Rt/=dt),Ae*Ye<Ce*Ze&&(Ae=-Ae,Ce=-Ce,Rt=-Rt,Ge=-Ge),{translateX:ze,translateY:Ie,rotate:Math.atan2(Ce,Ae)*D,skewX:Math.atan(Rt)*D,scaleX:Ge,scaleY:dt}}var z,H,Y,ee;function j(Ae){return Ae==="none"?R:(z||(z=document.createElement("DIV"),H=document.documentElement,Y=document.defaultView),z.style.transform=Ae,Ae=Y.getComputedStyle(H.appendChild(z),null).getPropertyValue("transform"),H.removeChild(z),Ae=Ae.slice(7,-1).split(","),O(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function X(Ae){return Ae==null||(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",Ae),!(Ae=ee.transform.baseVal.consolidate()))?R:(Ae=Ae.matrix,O(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function ae(Ae,Ce,Ze,Ye){function ze(Qt){return Qt.length?Qt.pop()+" ":""}function Ie(Qt,Bt,Ct,Kt,Ot,St){if(Qt!==Ct||Bt!==Kt){var Xe=Ot.push("translate(",null,Ce,null,Ze);St.push({i:Xe-4,x:A(Qt,Ct)},{i:Xe-2,x:A(Bt,Kt)})}else(Ct||Kt)&&Ot.push("translate("+Ct+Ce+Kt+Ze)}function Ge(Qt,Bt,Ct,Kt){Qt!==Bt?(Qt-Bt>180?Bt+=360:Bt-Qt>180&&(Qt+=360),Kt.push({i:Ct.push(ze(Ct)+"rotate(",null,Ye)-2,x:A(Qt,Bt)})):Bt&&Ct.push(ze(Ct)+"rotate("+Bt+Ye)}function dt(Qt,Bt,Ct,Kt){Qt!==Bt?Kt.push({i:Ct.push(ze(Ct)+"skewX(",null,Ye)-2,x:A(Qt,Bt)}):Bt&&Ct.push(ze(Ct)+"skewX("+Bt+Ye)}function Rt(Qt,Bt,Ct,Kt,Ot,St){if(Qt!==Ct||Bt!==Kt){var Xe=Ot.push(ze(Ot)+"scale(",null,",",null,")");St.push({i:Xe-4,x:A(Qt,Ct)},{i:Xe-2,x:A(Bt,Kt)})}else(Ct!==1||Kt!==1)&&Ot.push(ze(Ot)+"scale("+Ct+","+Kt+")")}return function(Qt,Bt){var Ct=[],Kt=[];return Qt=Ae(Qt),Bt=Ae(Bt),Ie(Qt.translateX,Qt.translateY,Bt.translateX,Bt.translateY,Ct,Kt),Ge(Qt.rotate,Bt.rotate,Ct,Kt),dt(Qt.skewX,Bt.skewX,Ct,Kt),Rt(Qt.scaleX,Qt.scaleY,Bt.scaleX,Bt.scaleY,Ct,Kt),Qt=Bt=null,function(Ot){for(var St=-1,Xe=Kt.length,at;++St<Xe;)Ct[(at=Kt[St]).i]=at.x(Ot);return Ct.join("")}}}var fe=ae(j,"px, ","px)","deg)"),K=ae(X,", ",")",")"),J=Math.SQRT2,U=2,V=4,q=1e-12;function re(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function Z(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function Q(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function ie(Ae,Ce){var Ze=Ae[0],Ye=Ae[1],ze=Ae[2],Ie=Ce[0],Ge=Ce[1],dt=Ce[2],Rt=Ie-Ze,Qt=Ge-Ye,Bt=Rt*Rt+Qt*Qt,Ct,Kt;if(Bt<q)Kt=Math.log(dt/ze)/J,Ct=function(Ee){return[Ze+Ee*Rt,Ye+Ee*Qt,ze*Math.exp(J*Ee*Kt)]};else{var Ot=Math.sqrt(Bt),St=(dt*dt-ze*ze+V*Bt)/(2*ze*U*Ot),Xe=(dt*dt-ze*ze-V*Bt)/(2*dt*U*Ot),at=Math.log(Math.sqrt(St*St+1)-St),We=Math.log(Math.sqrt(Xe*Xe+1)-Xe);Kt=(We-at)/J,Ct=function(Ee){var He=Ee*Kt,Ke=re(at),et=ze/(U*Ot)*(Ke*Q(J*He+at)-Z(at));return[Ze+et*Rt,Ye+et*Qt,ze*Ke/re(J*He+at)]}}return Ct.duration=Kt*1e3,Ct}function oe(Ae){return function(Ce,Ze){var Ye=Ae((Ce=f.hsl(Ce)).h,(Ze=f.hsl(Ze)).h),ze=s(Ce.s,Ze.s),Ie=s(Ce.l,Ze.l),Ge=s(Ce.opacity,Ze.opacity);return function(dt){return Ce.h=Ye(dt),Ce.s=ze(dt),Ce.l=Ie(dt),Ce.opacity=Ge(dt),Ce+""}}}var ne=oe(r),se=oe(s);function _e(Ae,Ce){var Ze=s((Ae=f.lab(Ae)).l,(Ce=f.lab(Ce)).l),Ye=s(Ae.a,Ce.a),ze=s(Ae.b,Ce.b),Ie=s(Ae.opacity,Ce.opacity);return function(Ge){return Ae.l=Ze(Ge),Ae.a=Ye(Ge),Ae.b=ze(Ge),Ae.opacity=Ie(Ge),Ae+""}}function ue(Ae){return function(Ce,Ze){var Ye=Ae((Ce=f.hcl(Ce)).h,(Ze=f.hcl(Ze)).h),ze=s(Ce.c,Ze.c),Ie=s(Ce.l,Ze.l),Ge=s(Ce.opacity,Ze.opacity);return function(dt){return Ce.h=Ye(dt),Ce.c=ze(dt),Ce.l=Ie(dt),Ce.opacity=Ge(dt),Ce+""}}}var ge=ue(r),xe=ue(s);function ye(Ae){return function Ce(Ze){Ze=+Ze;function Ye(ze,Ie){var Ge=Ae((ze=f.cubehelix(ze)).h,(Ie=f.cubehelix(Ie)).h),dt=s(ze.s,Ie.s),Rt=s(ze.l,Ie.l),Qt=s(ze.opacity,Ie.opacity);return function(Bt){return ze.h=Ge(Bt),ze.s=dt(Bt),ze.l=Rt(Math.pow(Bt,Ze)),ze.opacity=Qt(Bt),ze+""}}return Ye.gamma=Ce,Ye}(1)}var be=ye(r),Se=ye(s);function Re(Ae,Ce){for(var Ze=0,Ye=Ce.length-1,ze=Ce[0],Ie=new Array(Ye<0?0:Ye);Ze<Ye;)Ie[Ze]=Ae(ze,ze=Ce[++Ze]);return function(Ge){var dt=Math.max(0,Math.min(Ye-1,Math.floor(Ge*=Ye)));return Ie[dt](Ge-dt)}}function Ve(Ae,Ce){for(var Ze=new Array(Ce),Ye=0;Ye<Ce;++Ye)Ze[Ye]=Ae(Ye/(Ce-1));return Ze}x.interpolate=S,x.interpolateArray=l,x.interpolateBasis=T,x.interpolateBasisClosed=e,x.interpolateCubehelix=be,x.interpolateCubehelixLong=Se,x.interpolateDate=u,x.interpolateDiscrete=P,x.interpolateHcl=ge,x.interpolateHclLong=xe,x.interpolateHsl=ne,x.interpolateHslLong=se,x.interpolateHue=F,x.interpolateLab=_e,x.interpolateNumber=A,x.interpolateNumberArray=c,x.interpolateObject=_,x.interpolateRgb=o,x.interpolateRgbBasis=g,x.interpolateRgbBasisClosed=d,x.interpolateRound=I,x.interpolateString=E,x.interpolateTransformCss=fe,x.interpolateTransformSvg=K,x.interpolateZoom=ie,x.piecewise=Re,x.quantize=Ve,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){var f=Math.PI,M=2*f,T=1e-6,e=M-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new a}a.prototype=i.prototype={constructor:a,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,v,s){this._+="Q"+ +n+","+ +r+","+(this._x1=+v)+","+(this._y1=+s)},bezierCurveTo:function(n,r,v,s,o,b){this._+="C"+ +n+","+ +r+","+ +v+","+ +s+","+(this._x1=+o)+","+(this._y1=+b)},arcTo:function(n,r,v,s,o){n=+n,r=+r,v=+v,s=+s,o=+o;var b=this._x1,g=this._y1,d=v-n,c=s-r,m=b-n,l=g-r,y=m*m+l*l;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(y>T)if(!(Math.abs(l*d-c*m)>T)||!o)this._+="L"+(this._x1=n)+","+(this._y1=r);else{var u=v-b,A=s-g,_=d*d+c*c,p=u*u+A*A,w=Math.sqrt(_),h=Math.sqrt(y),L=o*Math.tan((f-Math.acos((_+y-p)/(2*w*h)))/2),E=L/h,S=L/w;Math.abs(E-1)>T&&(this._+="L"+(n+E*m)+","+(r+E*l)),this._+="A"+o+","+o+",0,0,"+ +(l*u>m*A)+","+(this._x1=n+S*d)+","+(this._y1=r+S*c)}},arc:function(n,r,v,s,o,b){n=+n,r=+r,v=+v,b=!!b;var g=v*Math.cos(s),d=v*Math.sin(s),c=n+g,m=r+d,l=1^b,y=b?s-o:o-s;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+c+","+m:(Math.abs(this._x1-c)>T||Math.abs(this._y1-m)>T)&&(this._+="L"+c+","+m),v&&(y<0&&(y=y%M+M),y>e?this._+="A"+v+","+v+",0,1,"+l+","+(n-g)+","+(r-d)+"A"+v+","+v+",0,1,"+l+","+(this._x1=c)+","+(this._y1=m):y>T&&(this._+="A"+v+","+v+",0,"+ +(y>=f)+","+l+","+(this._x1=n+v*Math.cos(o))+","+(this._y1=r+v*Math.sin(o))))},rect:function(n,r,v,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +v+"v"+ +s+"h"+-v+"Z"},toString:function(){return this._}},x.path=i,Object.defineProperty(x,"__esModule",{value:!0})})},{}],118:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){function f(w){var h=+this._x.call(null,w),L=+this._y.call(null,w);return M(this.cover(h,L),h,L,w)}function M(w,h,L,E){if(isNaN(h)||isNaN(L))return w;var S,P=w._root,F={data:E},I=w._x0,D=w._y0,R=w._x1,O=w._y1,z,H,Y,ee,j,X,ae,fe;if(!P)return w._root=F,w;for(;P.length;)if((j=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(H=(D+O)/2))?D=H:O=H,S=P,!(P=P[ae=X<<1|j]))return S[ae]=F,w;if(Y=+w._x.call(null,P.data),ee=+w._y.call(null,P.data),h===Y&&L===ee)return F.next=P,S?S[ae]=F:w._root=F,w;do S=S?S[ae]=new Array(4):w._root=new Array(4),(j=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(H=(D+O)/2))?D=H:O=H;while((ae=X<<1|j)===(fe=(ee>=H)<<1|Y>=z));return S[fe]=P,S[ae]=F,w}function T(w){var h,L,E=w.length,S,P,F=new Array(E),I=new Array(E),D=1/0,R=1/0,O=-1/0,z=-1/0;for(L=0;L<E;++L)isNaN(S=+this._x.call(null,h=w[L]))||isNaN(P=+this._y.call(null,h))||(F[L]=S,I[L]=P,S<D&&(D=S),S>O&&(O=S),P<R&&(R=P),P>z&&(z=P));if(D>O||R>z)return this;for(this.cover(D,R).cover(O,z),L=0;L<E;++L)M(this,F[L],I[L],w[L]);return this}function e(w,h){if(isNaN(w=+w)||isNaN(h=+h))return this;var L=this._x0,E=this._y0,S=this._x1,P=this._y1;if(isNaN(L))S=(L=Math.floor(w))+1,P=(E=Math.floor(h))+1;else{for(var F=S-L,I=this._root,D,R;L>w||w>=S||E>h||h>=P;)switch(R=(h<E)<<1|w<L,D=new Array(4),D[R]=I,I=D,F*=2,R){case 0:S=L+F,P=E+F;break;case 1:L=S-F,P=E+F;break;case 2:S=L+F,E=P-F;break;case 3:L=S-F,E=P-F;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=E,this._x1=S,this._y1=P,this}function a(){var w=[];return this.visit(function(h){if(!h.length)do w.push(h.data);while(h=h.next)}),w}function i(w){return arguments.length?this.cover(+w[0][0],+w[0][1]).cover(+w[1][0],+w[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function n(w,h,L,E,S){this.node=w,this.x0=h,this.y0=L,this.x1=E,this.y1=S}function r(w,h,L){var E,S=this._x0,P=this._y0,F,I,D,R,O=this._x1,z=this._y1,H=[],Y=this._root,ee,j;for(Y&&H.push(new n(Y,S,P,O,z)),L==null?L=1/0:(S=w-L,P=h-L,O=w+L,z=h+L,L*=L);ee=H.pop();)if(!(!(Y=ee.node)||(F=ee.x0)>O||(I=ee.y0)>z||(D=ee.x1)<S||(R=ee.y1)<P))if(Y.length){var X=(F+D)/2,ae=(I+R)/2;H.push(new n(Y[3],X,ae,D,R),new n(Y[2],F,ae,X,R),new n(Y[1],X,I,D,ae),new n(Y[0],F,I,X,ae)),(j=(h>=ae)<<1|w>=X)&&(ee=H[H.length-1],H[H.length-1]=H[H.length-1-j],H[H.length-1-j]=ee)}else{var fe=w-+this._x.call(null,Y.data),K=h-+this._y.call(null,Y.data),J=fe*fe+K*K;if(J<L){var U=Math.sqrt(L=J);S=w-U,P=h-U,O=w+U,z=h+U,E=Y.data}}return E}function v(w){if(isNaN(O=+this._x.call(null,w))||isNaN(z=+this._y.call(null,w)))return this;var h,L=this._root,E,S,P,F=this._x0,I=this._y0,D=this._x1,R=this._y1,O,z,H,Y,ee,j,X,ae;if(!L)return this;if(L.length)for(;;){if((ee=O>=(H=(F+D)/2))?F=H:D=H,(j=z>=(Y=(I+R)/2))?I=Y:R=Y,h=L,!(L=L[X=j<<1|ee]))return this;if(!L.length)break;(h[X+1&3]||h[X+2&3]||h[X+3&3])&&(E=h,ae=X)}for(;L.data!==w;)if(S=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,S?(P?S.next=P:delete S.next,this):h?(P?h[X]=P:delete h[X],(L=h[0]||h[1]||h[2]||h[3])&&L===(h[3]||h[2]||h[1]||h[0])&&!L.length&&(E?E[ae]=L:this._root=L),this):(this._root=P,this)}function s(w){for(var h=0,L=w.length;h<L;++h)this.remove(w[h]);return this}function o(){return this._root}function b(){var w=0;return this.visit(function(h){if(!h.length)do++w;while(h=h.next)}),w}function g(w){var h=[],L,E=this._root,S,P,F,I,D;for(E&&h.push(new n(E,this._x0,this._y0,this._x1,this._y1));L=h.pop();)if(!w(E=L.node,P=L.x0,F=L.y0,I=L.x1,D=L.y1)&&E.length){var R=(P+I)/2,O=(F+D)/2;(S=E[3])&&h.push(new n(S,R,O,I,D)),(S=E[2])&&h.push(new n(S,P,O,R,D)),(S=E[1])&&h.push(new n(S,R,F,I,O)),(S=E[0])&&h.push(new n(S,P,F,R,O))}return this}function d(w){var h=[],L=[],E;for(this._root&&h.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));E=h.pop();){var S=E.node;if(S.length){var P,F=E.x0,I=E.y0,D=E.x1,R=E.y1,O=(F+D)/2,z=(I+R)/2;(P=S[0])&&h.push(new n(P,F,I,O,z)),(P=S[1])&&h.push(new n(P,O,I,D,z)),(P=S[2])&&h.push(new n(P,F,z,O,R)),(P=S[3])&&h.push(new n(P,O,z,D,R))}L.push(E)}for(;E=L.pop();)w(E.node,E.x0,E.y0,E.x1,E.y1);return this}function c(w){return w[0]}function m(w){return arguments.length?(this._x=w,this):this._x}function l(w){return w[1]}function y(w){return arguments.length?(this._y=w,this):this._y}function u(w,h,L){var E=new A(h==null?c:h,L==null?l:L,NaN,NaN,NaN,NaN);return w==null?E:E.addAll(w)}function A(w,h,L,E,S,P){this._x=w,this._y=h,this._x0=L,this._y0=E,this._x1=S,this._y1=P,this._root=void 0}function _(w){for(var h={data:w.data},L=h;w=w.next;)L=L.next={data:w.data};return h}var p=u.prototype=A.prototype;p.copy=function(){var w=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root,L,E;if(!h)return w;if(!h.length)return w._root=_(h),w;for(L=[{source:h,target:w._root=new Array(4)}];h=L.pop();)for(var S=0;S<4;++S)(E=h.source[S])&&(E.length?L.push({source:E,target:h.target[S]=new Array(4)}):h.target[S]=_(E));return w},p.add=f,p.addAll=T,p.cover=e,p.data=a,p.extent=i,p.find=r,p.remove=v,p.removeAll=s,p.root=o,p.size=b,p.visit=g,p.visitAfter=d,p.x=m,p.y=y,x.quadtree=u,Object.defineProperty(x,"__esModule",{value:!0})})},{}],119:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-path")):(x=x||self,f(x.d3=x.d3||{},x.d3))})(this,function(x,f){function M(nt){return function(){return nt}}var T=Math.abs,e=Math.atan2,a=Math.cos,i=Math.max,n=Math.min,r=Math.sin,v=Math.sqrt,s=1e-12,o=Math.PI,b=o/2,g=2*o;function d(nt){return nt>1?0:nt<-1?o:Math.acos(nt)}function c(nt){return nt>=1?b:nt<=-1?-b:Math.asin(nt)}function m(nt){return nt.innerRadius}function l(nt){return nt.outerRadius}function y(nt){return nt.startAngle}function u(nt){return nt.endAngle}function A(nt){return nt&&nt.padAngle}function _(nt,It,Jt,fr,Nr,Vr,Dr,Er){var jr=Jt-nt,kn=fr-It,mn=Dr-Nr,Wn=Er-Vr,In=Wn*jr-mn*kn;if(!(In*In<s))return In=(mn*(It-Vr)-Wn*(nt-Nr))/In,[nt+In*jr,It+In*kn]}function p(nt,It,Jt,fr,Nr,Vr,Dr){var Er=nt-Jt,jr=It-fr,kn=(Dr?Vr:-Vr)/v(Er*Er+jr*jr),mn=kn*jr,Wn=-kn*Er,In=nt+mn,$n=It+Wn,Kn=Jt+mn,ma=fr+Wn,Ra=(In+Kn)/2,_i=($n+ma)/2,Ka=Kn-In,ri=ma-$n,ei=Ka*Ka+ri*ri,Sr=Nr-Vr,bn=In*ma-Kn*$n,dn=(ri<0?-1:1)*v(i(0,Sr*Sr*ei-bn*bn)),Ln=(bn*ri-Ka*dn)/ei,ra=(-bn*Ka-ri*dn)/ei,ya=(bn*ri+Ka*dn)/ei,sa=(-bn*Ka+ri*dn)/ei,Bn=Ln-Ra,Qn=ra-_i,Xa=ya-Ra,mi=sa-_i;return Bn*Bn+Qn*Qn>Xa*Xa+mi*mi&&(Ln=ya,ra=sa),{cx:Ln,cy:ra,x01:-mn,y01:-Wn,x11:Ln*(Nr/Sr-1),y11:ra*(Nr/Sr-1)}}function w(){var nt=m,It=l,Jt=M(0),fr=null,Nr=y,Vr=u,Dr=A,Er=null;function jr(){var kn,mn,Wn=+nt.apply(this,arguments),In=+It.apply(this,arguments),$n=Nr.apply(this,arguments)-b,Kn=Vr.apply(this,arguments)-b,ma=T(Kn-$n),Ra=Kn>$n;if(Er||(Er=kn=f.path()),In<Wn&&(mn=In,In=Wn,Wn=mn),!(In>s))Er.moveTo(0,0);else if(ma>g-s)Er.moveTo(In*a($n),In*r($n)),Er.arc(0,0,In,$n,Kn,!Ra),Wn>s&&(Er.moveTo(Wn*a(Kn),Wn*r(Kn)),Er.arc(0,0,Wn,Kn,$n,Ra));else{var _i=$n,Ka=Kn,ri=$n,ei=Kn,Sr=ma,bn=ma,dn=Dr.apply(this,arguments)/2,Ln=dn>s&&(fr?+fr.apply(this,arguments):v(Wn*Wn+In*In)),ra=n(T(In-Wn)/2,+Jt.apply(this,arguments)),ya=ra,sa=ra,Bn,Qn;if(Ln>s){var Xa=c(Ln/Wn*r(dn)),mi=c(Ln/In*r(dn));(Sr-=Xa*2)>s?(Xa*=Ra?1:-1,ri+=Xa,ei-=Xa):(Sr=0,ri=ei=($n+Kn)/2),(bn-=mi*2)>s?(mi*=Ra?1:-1,_i+=mi,Ka-=mi):(bn=0,_i=Ka=($n+Kn)/2)}var Yt=In*a(_i),gr=In*r(_i),un=Wn*a(ei),yn=Wn*r(ei);if(ra>s){var sn=In*a(Ka),Cn=In*r(Ka),Tn=Wn*a(ri),gn=Wn*r(ri),_r;if(ma<o&&(_r=_(Yt,gr,Tn,gn,sn,Cn,un,yn))){var wr=Yt-_r[0],Br=gr-_r[1],An=sn-_r[0],Yn=Cn-_r[1],ua=1/r(d((wr*An+Br*Yn)/(v(wr*wr+Br*Br)*v(An*An+Yn*Yn)))/2),Sn=v(_r[0]*_r[0]+_r[1]*_r[1]);ya=n(ra,(Wn-Sn)/(ua-1)),sa=n(ra,(In-Sn)/(ua+1))}}bn>s?sa>s?(Bn=p(Tn,gn,Yt,gr,In,sa,Ra),Qn=p(sn,Cn,un,yn,In,sa,Ra),Er.moveTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),sa<ra?Er.arc(Bn.cx,Bn.cy,sa,e(Bn.y01,Bn.x01),e(Qn.y01,Qn.x01),!Ra):(Er.arc(Bn.cx,Bn.cy,sa,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Ra),Er.arc(0,0,In,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e(Qn.cy+Qn.y11,Qn.cx+Qn.x11),!Ra),Er.arc(Qn.cx,Qn.cy,sa,e(Qn.y11,Qn.x11),e(Qn.y01,Qn.x01),!Ra))):(Er.moveTo(Yt,gr),Er.arc(0,0,In,_i,Ka,!Ra)):Er.moveTo(Yt,gr),!(Wn>s)||!(Sr>s)?Er.lineTo(un,yn):ya>s?(Bn=p(un,yn,sn,Cn,Wn,-ya,Ra),Qn=p(Yt,gr,Tn,gn,Wn,-ya,Ra),Er.lineTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),ya<ra?Er.arc(Bn.cx,Bn.cy,ya,e(Bn.y01,Bn.x01),e(Qn.y01,Qn.x01),!Ra):(Er.arc(Bn.cx,Bn.cy,ya,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Ra),Er.arc(0,0,Wn,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e(Qn.cy+Qn.y11,Qn.cx+Qn.x11),Ra),Er.arc(Qn.cx,Qn.cy,ya,e(Qn.y11,Qn.x11),e(Qn.y01,Qn.x01),!Ra))):Er.arc(0,0,Wn,ei,ri,Ra)}if(Er.closePath(),kn)return Er=null,kn+""||null}return jr.centroid=function(){var kn=(+nt.apply(this,arguments)+ +It.apply(this,arguments))/2,mn=(+Nr.apply(this,arguments)+ +Vr.apply(this,arguments))/2-o/2;return[a(mn)*kn,r(mn)*kn]},jr.innerRadius=function(kn){return arguments.length?(nt=typeof kn=="function"?kn:M(+kn),jr):nt},jr.outerRadius=function(kn){return arguments.length?(It=typeof kn=="function"?kn:M(+kn),jr):It},jr.cornerRadius=function(kn){return arguments.length?(Jt=typeof kn=="function"?kn:M(+kn),jr):Jt},jr.padRadius=function(kn){return arguments.length?(fr=kn==null?null:typeof kn=="function"?kn:M(+kn),jr):fr},jr.startAngle=function(kn){return arguments.length?(Nr=typeof kn=="function"?kn:M(+kn),jr):Nr},jr.endAngle=function(kn){return arguments.length?(Vr=typeof kn=="function"?kn:M(+kn),jr):Vr},jr.padAngle=function(kn){return arguments.length?(Dr=typeof kn=="function"?kn:M(+kn),jr):Dr},jr.context=function(kn){return arguments.length?(Er=kn==null?null:kn,jr):Er},jr}function h(nt){this._context=nt}h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,It):this._context.moveTo(nt,It);break;case 1:this._point=2;default:this._context.lineTo(nt,It);break}}};function L(nt){return new h(nt)}function E(nt){return nt[0]}function S(nt){return nt[1]}function P(){var nt=E,It=S,Jt=M(!0),fr=null,Nr=L,Vr=null;function Dr(Er){var jr,kn=Er.length,mn,Wn=!1,In;for(fr==null&&(Vr=Nr(In=f.path())),jr=0;jr<=kn;++jr)!(jr<kn&&Jt(mn=Er[jr],jr,Er))===Wn&&((Wn=!Wn)?Vr.lineStart():Vr.lineEnd()),Wn&&Vr.point(+nt(mn,jr,Er),+It(mn,jr,Er));if(In)return Vr=null,In+""||null}return Dr.x=function(Er){return arguments.length?(nt=typeof Er=="function"?Er:M(+Er),Dr):nt},Dr.y=function(Er){return arguments.length?(It=typeof Er=="function"?Er:M(+Er),Dr):It},Dr.defined=function(Er){return arguments.length?(Jt=typeof Er=="function"?Er:M(!!Er),Dr):Jt},Dr.curve=function(Er){return arguments.length?(Nr=Er,fr!=null&&(Vr=Nr(fr)),Dr):Nr},Dr.context=function(Er){return arguments.length?(Er==null?fr=Vr=null:Vr=Nr(fr=Er),Dr):fr},Dr}function F(){var nt=E,It=null,Jt=M(0),fr=S,Nr=M(!0),Vr=null,Dr=L,Er=null;function jr(mn){var Wn,In,$n,Kn=mn.length,ma,Ra=!1,_i,Ka=new Array(Kn),ri=new Array(Kn);for(Vr==null&&(Er=Dr(_i=f.path())),Wn=0;Wn<=Kn;++Wn){if(!(Wn<Kn&&Nr(ma=mn[Wn],Wn,mn))===Ra)if(Ra=!Ra)In=Wn,Er.areaStart(),Er.lineStart();else{for(Er.lineEnd(),Er.lineStart(),$n=Wn-1;$n>=In;--$n)Er.point(Ka[$n],ri[$n]);Er.lineEnd(),Er.areaEnd()}Ra&&(Ka[Wn]=+nt(ma,Wn,mn),ri[Wn]=+Jt(ma,Wn,mn),Er.point(It?+It(ma,Wn,mn):Ka[Wn],fr?+fr(ma,Wn,mn):ri[Wn]))}if(_i)return Er=null,_i+""||null}function kn(){return P().defined(Nr).curve(Dr).context(Vr)}return jr.x=function(mn){return arguments.length?(nt=typeof mn=="function"?mn:M(+mn),It=null,jr):nt},jr.x0=function(mn){return arguments.length?(nt=typeof mn=="function"?mn:M(+mn),jr):nt},jr.x1=function(mn){return arguments.length?(It=mn==null?null:typeof mn=="function"?mn:M(+mn),jr):It},jr.y=function(mn){return arguments.length?(Jt=typeof mn=="function"?mn:M(+mn),fr=null,jr):Jt},jr.y0=function(mn){return arguments.length?(Jt=typeof mn=="function"?mn:M(+mn),jr):Jt},jr.y1=function(mn){return arguments.length?(fr=mn==null?null:typeof mn=="function"?mn:M(+mn),jr):fr},jr.lineX0=jr.lineY0=function(){return kn().x(nt).y(Jt)},jr.lineY1=function(){return kn().x(nt).y(fr)},jr.lineX1=function(){return kn().x(It).y(Jt)},jr.defined=function(mn){return arguments.length?(Nr=typeof mn=="function"?mn:M(!!mn),jr):Nr},jr.curve=function(mn){return arguments.length?(Dr=mn,Vr!=null&&(Er=Dr(Vr)),jr):Dr},jr.context=function(mn){return arguments.length?(mn==null?Vr=Er=null:Er=Dr(Vr=mn),jr):Vr},jr}function I(nt,It){return It<nt?-1:It>nt?1:It>=nt?0:NaN}function D(nt){return nt}function R(){var nt=D,It=I,Jt=null,fr=M(0),Nr=M(g),Vr=M(0);function Dr(Er){var jr,kn=Er.length,mn,Wn,In=0,$n=new Array(kn),Kn=new Array(kn),ma=+fr.apply(this,arguments),Ra=Math.min(g,Math.max(-g,Nr.apply(this,arguments)-ma)),_i,Ka=Math.min(Math.abs(Ra)/kn,Vr.apply(this,arguments)),ri=Ka*(Ra<0?-1:1),ei;for(jr=0;jr<kn;++jr)(ei=Kn[$n[jr]=jr]=+nt(Er[jr],jr,Er))>0&&(In+=ei);for(It!=null?$n.sort(function(Sr,bn){return It(Kn[Sr],Kn[bn])}):Jt!=null&&$n.sort(function(Sr,bn){return Jt(Er[Sr],Er[bn])}),jr=0,Wn=In?(Ra-kn*ri)/In:0;jr<kn;++jr,ma=_i)mn=$n[jr],ei=Kn[mn],_i=ma+(ei>0?ei*Wn:0)+ri,Kn[mn]={data:Er[mn],index:jr,value:ei,startAngle:ma,endAngle:_i,padAngle:Ka};return Kn}return Dr.value=function(Er){return arguments.length?(nt=typeof Er=="function"?Er:M(+Er),Dr):nt},Dr.sortValues=function(Er){return arguments.length?(It=Er,Jt=null,Dr):It},Dr.sort=function(Er){return arguments.length?(Jt=Er,It=null,Dr):Jt},Dr.startAngle=function(Er){return arguments.length?(fr=typeof Er=="function"?Er:M(+Er),Dr):fr},Dr.endAngle=function(Er){return arguments.length?(Nr=typeof Er=="function"?Er:M(+Er),Dr):Nr},Dr.padAngle=function(Er){return arguments.length?(Vr=typeof Er=="function"?Er:M(+Er),Dr):Vr},Dr}var O=H(L);function z(nt){this._curve=nt}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(nt,It){this._curve.point(It*Math.sin(nt),It*-Math.cos(nt))}};function H(nt){function It(Jt){return new z(nt(Jt))}return It._curve=nt,It}function Y(nt){var It=nt.curve;return nt.angle=nt.x,delete nt.x,nt.radius=nt.y,delete nt.y,nt.curve=function(Jt){return arguments.length?It(H(Jt)):It()._curve},nt}function ee(){return Y(P().curve(O))}function j(){var nt=F().curve(O),It=nt.curve,Jt=nt.lineX0,fr=nt.lineX1,Nr=nt.lineY0,Vr=nt.lineY1;return nt.angle=nt.x,delete nt.x,nt.startAngle=nt.x0,delete nt.x0,nt.endAngle=nt.x1,delete nt.x1,nt.radius=nt.y,delete nt.y,nt.innerRadius=nt.y0,delete nt.y0,nt.outerRadius=nt.y1,delete nt.y1,nt.lineStartAngle=function(){return Y(Jt())},delete nt.lineX0,nt.lineEndAngle=function(){return Y(fr())},delete nt.lineX1,nt.lineInnerRadius=function(){return Y(Nr())},delete nt.lineY0,nt.lineOuterRadius=function(){return Y(Vr())},delete nt.lineY1,nt.curve=function(Dr){return arguments.length?It(H(Dr)):It()._curve},nt}function X(nt,It){return[(It=+It)*Math.cos(nt-=Math.PI/2),It*Math.sin(nt)]}var ae=Array.prototype.slice;function fe(nt){return nt.source}function K(nt){return nt.target}function J(nt){var It=fe,Jt=K,fr=E,Nr=S,Vr=null;function Dr(){var Er,jr=ae.call(arguments),kn=It.apply(this,jr),mn=Jt.apply(this,jr);if(Vr||(Vr=Er=f.path()),nt(Vr,+fr.apply(this,(jr[0]=kn,jr)),+Nr.apply(this,jr),+fr.apply(this,(jr[0]=mn,jr)),+Nr.apply(this,jr)),Er)return Vr=null,Er+""||null}return Dr.source=function(Er){return arguments.length?(It=Er,Dr):It},Dr.target=function(Er){return arguments.length?(Jt=Er,Dr):Jt},Dr.x=function(Er){return arguments.length?(fr=typeof Er=="function"?Er:M(+Er),Dr):fr},Dr.y=function(Er){return arguments.length?(Nr=typeof Er=="function"?Er:M(+Er),Dr):Nr},Dr.context=function(Er){return arguments.length?(Vr=Er==null?null:Er,Dr):Vr},Dr}function U(nt,It,Jt,fr,Nr){nt.moveTo(It,Jt),nt.bezierCurveTo(It=(It+fr)/2,Jt,It,Nr,fr,Nr)}function V(nt,It,Jt,fr,Nr){nt.moveTo(It,Jt),nt.bezierCurveTo(It,Jt=(Jt+Nr)/2,fr,Jt,fr,Nr)}function q(nt,It,Jt,fr,Nr){var Vr=X(It,Jt),Dr=X(It,Jt=(Jt+Nr)/2),Er=X(fr,Jt),jr=X(fr,Nr);nt.moveTo(Vr[0],Vr[1]),nt.bezierCurveTo(Dr[0],Dr[1],Er[0],Er[1],jr[0],jr[1])}function re(){return J(U)}function Z(){return J(V)}function Q(){var nt=J(q);return nt.angle=nt.x,delete nt.x,nt.radius=nt.y,delete nt.y,nt}var ie={draw:function(nt,It){var Jt=Math.sqrt(It/o);nt.moveTo(Jt,0),nt.arc(0,0,Jt,0,g)}},oe={draw:function(nt,It){var Jt=Math.sqrt(It/5)/2;nt.moveTo(-3*Jt,-Jt),nt.lineTo(-Jt,-Jt),nt.lineTo(-Jt,-3*Jt),nt.lineTo(Jt,-3*Jt),nt.lineTo(Jt,-Jt),nt.lineTo(3*Jt,-Jt),nt.lineTo(3*Jt,Jt),nt.lineTo(Jt,Jt),nt.lineTo(Jt,3*Jt),nt.lineTo(-Jt,3*Jt),nt.lineTo(-Jt,Jt),nt.lineTo(-3*Jt,Jt),nt.closePath()}},ne=Math.sqrt(1/3),se=ne*2,_e={draw:function(nt,It){var Jt=Math.sqrt(It/se),fr=Jt*ne;nt.moveTo(0,-Jt),nt.lineTo(fr,0),nt.lineTo(0,Jt),nt.lineTo(-fr,0),nt.closePath()}},ue=.8908130915292852,ge=Math.sin(o/10)/Math.sin(7*o/10),xe=Math.sin(g/10)*ge,ye=-Math.cos(g/10)*ge,be={draw:function(nt,It){var Jt=Math.sqrt(It*ue),fr=xe*Jt,Nr=ye*Jt;nt.moveTo(0,-Jt),nt.lineTo(fr,Nr);for(var Vr=1;Vr<5;++Vr){var Dr=g*Vr/5,Er=Math.cos(Dr),jr=Math.sin(Dr);nt.lineTo(jr*Jt,-Er*Jt),nt.lineTo(Er*fr-jr*Nr,jr*fr+Er*Nr)}nt.closePath()}},Se={draw:function(nt,It){var Jt=Math.sqrt(It),fr=-Jt/2;nt.rect(fr,fr,Jt,Jt)}},Re=Math.sqrt(3),Ve={draw:function(nt,It){var Jt=-Math.sqrt(It/(Re*3));nt.moveTo(0,Jt*2),nt.lineTo(-Re*Jt,-Jt),nt.lineTo(Re*Jt,-Jt),nt.closePath()}},Ae=-.5,Ce=Math.sqrt(3)/2,Ze=1/Math.sqrt(12),Ye=(Ze/2+1)*3,ze={draw:function(nt,It){var Jt=Math.sqrt(It/Ye),fr=Jt/2,Nr=Jt*Ze,Vr=fr,Dr=Jt*Ze+Jt,Er=-Vr,jr=Dr;nt.moveTo(fr,Nr),nt.lineTo(Vr,Dr),nt.lineTo(Er,jr),nt.lineTo(Ae*fr-Ce*Nr,Ce*fr+Ae*Nr),nt.lineTo(Ae*Vr-Ce*Dr,Ce*Vr+Ae*Dr),nt.lineTo(Ae*Er-Ce*jr,Ce*Er+Ae*jr),nt.lineTo(Ae*fr+Ce*Nr,Ae*Nr-Ce*fr),nt.lineTo(Ae*Vr+Ce*Dr,Ae*Dr-Ce*Vr),nt.lineTo(Ae*Er+Ce*jr,Ae*jr-Ce*Er),nt.closePath()}},Ie=[ie,oe,_e,Se,be,Ve,ze];function Ge(){var nt=M(ie),It=M(64),Jt=null;function fr(){var Nr;if(Jt||(Jt=Nr=f.path()),nt.apply(this,arguments).draw(Jt,+It.apply(this,arguments)),Nr)return Jt=null,Nr+""||null}return fr.type=function(Nr){return arguments.length?(nt=typeof Nr=="function"?Nr:M(Nr),fr):nt},fr.size=function(Nr){return arguments.length?(It=typeof Nr=="function"?Nr:M(+Nr),fr):It},fr.context=function(Nr){return arguments.length?(Jt=Nr==null?null:Nr,fr):Jt},fr}function dt(){}function Rt(nt,It,Jt){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+It)/6,(nt._y0+4*nt._y1+Jt)/6)}function Qt(nt){this._context=nt}Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,It):this._context.moveTo(nt,It);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rt(this,nt,It);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=It}};function Bt(nt){return new Qt(nt)}function Ct(nt){this._context=nt}Ct.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1,this._x2=nt,this._y2=It;break;case 1:this._point=2,this._x3=nt,this._y3=It;break;case 2:this._point=3,this._x4=nt,this._y4=It,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+It)/6);break;default:Rt(this,nt,It);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=It}};function Kt(nt){return new Ct(nt)}function Ot(nt){this._context=nt}Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Jt=(this._x0+4*this._x1+nt)/6,fr=(this._y0+4*this._y1+It)/6;this._line?this._context.lineTo(Jt,fr):this._context.moveTo(Jt,fr);break;case 3:this._point=4;default:Rt(this,nt,It);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=It}};function St(nt){return new Ot(nt)}function Xe(nt,It){this._basis=new Qt(nt),this._beta=It}Xe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var nt=this._x,It=this._y,Jt=nt.length-1;if(Jt>0)for(var fr=nt[0],Nr=It[0],Vr=nt[Jt]-fr,Dr=It[Jt]-Nr,Er=-1,jr;++Er<=Jt;)jr=Er/Jt,this._basis.point(this._beta*nt[Er]+(1-this._beta)*(fr+jr*Vr),this._beta*It[Er]+(1-this._beta)*(Nr+jr*Dr));this._x=this._y=null,this._basis.lineEnd()},point:function(nt,It){this._x.push(+nt),this._y.push(+It)}};var at=function nt(It){function Jt(fr){return It===1?new Qt(fr):new Xe(fr,It)}return Jt.beta=function(fr){return nt(+fr)},Jt}(.85);function We(nt,It,Jt){nt._context.bezierCurveTo(nt._x1+nt._k*(nt._x2-nt._x0),nt._y1+nt._k*(nt._y2-nt._y0),nt._x2+nt._k*(nt._x1-It),nt._y2+nt._k*(nt._y1-Jt),nt._x2,nt._y2)}function Ee(nt,It){this._context=nt,this._k=(1-It)/6}Ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:We(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,It):this._context.moveTo(nt,It);break;case 1:this._point=2,this._x1=nt,this._y1=It;break;case 2:this._point=3;default:We(this,nt,It);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var He=function nt(It){function Jt(fr){return new Ee(fr,It)}return Jt.tension=function(fr){return nt(+fr)},Jt}(0);function Ke(nt,It){this._context=nt,this._k=(1-It)/6}Ke.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1,this._x3=nt,this._y3=It;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=It);break;case 2:this._point=3,this._x5=nt,this._y5=It;break;default:We(this,nt,It);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var et=function nt(It){function Jt(fr){return new Ke(fr,It)}return Jt.tension=function(fr){return nt(+fr)},Jt}(0);function At(nt,It){this._context=nt,this._k=(1-It)/6}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:We(this,nt,It);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var mt=function nt(It){function Jt(fr){return new At(fr,It)}return Jt.tension=function(fr){return nt(+fr)},Jt}(0);function Mt(nt,It,Jt){var fr=nt._x1,Nr=nt._y1,Vr=nt._x2,Dr=nt._y2;if(nt._l01_a>s){var Er=2*nt._l01_2a+3*nt._l01_a*nt._l12_a+nt._l12_2a,jr=3*nt._l01_a*(nt._l01_a+nt._l12_a);fr=(fr*Er-nt._x0*nt._l12_2a+nt._x2*nt._l01_2a)/jr,Nr=(Nr*Er-nt._y0*nt._l12_2a+nt._y2*nt._l01_2a)/jr}if(nt._l23_a>s){var kn=2*nt._l23_2a+3*nt._l23_a*nt._l12_a+nt._l12_2a,mn=3*nt._l23_a*(nt._l23_a+nt._l12_a);Vr=(Vr*kn+nt._x1*nt._l23_2a-It*nt._l12_2a)/mn,Dr=(Dr*kn+nt._y1*nt._l23_2a-Jt*nt._l12_2a)/mn}nt._context.bezierCurveTo(fr,Nr,Vr,Dr,nt._x2,nt._y2)}function Gt(nt,It){this._context=nt,this._alpha=It}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){if(nt=+nt,It=+It,this._point){var Jt=this._x2-nt,fr=this._y2-It;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jt*Jt+fr*fr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,It):this._context.moveTo(nt,It);break;case 1:this._point=2;break;case 2:this._point=3;default:Mt(this,nt,It);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var zt=function nt(It){function Jt(fr){return It?new Gt(fr,It):new Ee(fr,0)}return Jt.alpha=function(fr){return nt(+fr)},Jt}(.5);function Ht(nt,It){this._context=nt,this._alpha=It}Ht.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,It){if(nt=+nt,It=+It,this._point){var Jt=this._x2-nt,fr=this._y2-It;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jt*Jt+fr*fr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=nt,this._y3=It;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=It);break;case 2:this._point=3,this._x5=nt,this._y5=It;break;default:Mt(this,nt,It);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var Xt=function nt(It){function Jt(fr){return It?new Ht(fr,It):new Ke(fr,0)}return Jt.alpha=function(fr){return nt(+fr)},Jt}(.5);function Wt(nt,It){this._context=nt,this._alpha=It}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){if(nt=+nt,It=+It,this._point){var Jt=this._x2-nt,fr=this._y2-It;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jt*Jt+fr*fr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mt(this,nt,It);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=It}};var sr=function nt(It){function Jt(fr){return It?new Wt(fr,It):new At(fr,0)}return Jt.alpha=function(fr){return nt(+fr)},Jt}(.5);function Gr(nt){this._context=nt}Gr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,It){nt=+nt,It=+It,this._point?this._context.lineTo(nt,It):(this._point=1,this._context.moveTo(nt,It))}};function cn(nt){return new Gr(nt)}function en(nt){return nt<0?-1:1}function st(nt,It,Jt){var fr=nt._x1-nt._x0,Nr=It-nt._x1,Vr=(nt._y1-nt._y0)/(fr||Nr<0&&-0),Dr=(Jt-nt._y1)/(Nr||fr<0&&-0),Er=(Vr*Nr+Dr*fr)/(fr+Nr);return(en(Vr)+en(Dr))*Math.min(Math.abs(Vr),Math.abs(Dr),.5*Math.abs(Er))||0}function rr(nt,It){var Jt=nt._x1-nt._x0;return Jt?(3*(nt._y1-nt._y0)/Jt-It)/2:It}function er(nt,It,Jt){var fr=nt._x0,Nr=nt._y0,Vr=nt._x1,Dr=nt._y1,Er=(Vr-fr)/3;nt._context.bezierCurveTo(fr+Er,Nr+Er*It,Vr-Er,Dr-Er*Jt,Vr,Dr)}function jt(nt){this._context=nt}jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:er(this,this._t0,rr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,It){var Jt=NaN;if(nt=+nt,It=+It,!(nt===this._x1&&It===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,It):this._context.moveTo(nt,It);break;case 1:this._point=2;break;case 2:this._point=3,er(this,rr(this,Jt=st(this,nt,It)),Jt);break;default:er(this,this._t0,Jt=st(this,nt,It));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=It,this._t0=Jt}}};function Mr(nt){this._context=new it(nt)}(Mr.prototype=Object.create(jt.prototype)).point=function(nt,It){jt.prototype.point.call(this,It,nt)};function it(nt){this._context=nt}it.prototype={moveTo:function(nt,It){this._context.moveTo(It,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,It){this._context.lineTo(It,nt)},bezierCurveTo:function(nt,It,Jt,fr,Nr,Vr){this._context.bezierCurveTo(It,nt,fr,Jt,Vr,Nr)}};function Qe(nt){return new jt(nt)}function ft(nt){return new Mr(nt)}function ct(nt){this._context=nt}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,It=this._y,Jt=nt.length;if(Jt)if(this._line?this._context.lineTo(nt[0],It[0]):this._context.moveTo(nt[0],It[0]),Jt===2)this._context.lineTo(nt[1],It[1]);else for(var fr=Et(nt),Nr=Et(It),Vr=0,Dr=1;Dr<Jt;++Vr,++Dr)this._context.bezierCurveTo(fr[0][Vr],Nr[0][Vr],fr[1][Vr],Nr[1][Vr],nt[Dr],It[Dr]);(this._line||this._line!==0&&Jt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,It){this._x.push(+nt),this._y.push(+It)}};function Et(nt){var It,Jt=nt.length-1,fr,Nr=new Array(Jt),Vr=new Array(Jt),Dr=new Array(Jt);for(Nr[0]=0,Vr[0]=2,Dr[0]=nt[0]+2*nt[1],It=1;It<Jt-1;++It)Nr[It]=1,Vr[It]=4,Dr[It]=4*nt[It]+2*nt[It+1];for(Nr[Jt-1]=2,Vr[Jt-1]=7,Dr[Jt-1]=8*nt[Jt-1]+nt[Jt],It=1;It<Jt;++It)fr=Nr[It]/Vr[It-1],Vr[It]-=fr,Dr[It]-=fr*Dr[It-1];for(Nr[Jt-1]=Dr[Jt-1]/Vr[Jt-1],It=Jt-2;It>=0;--It)Nr[It]=(Dr[It]-Nr[It+1])/Vr[It];for(Vr[Jt-1]=(nt[Jt]+Nr[Jt-1])/2,It=0;It<Jt-1;++It)Vr[It]=2*nt[It+1]-Nr[It+1];return[Nr,Vr]}function Nt(nt){return new ct(nt)}function Pe(nt,It){this._context=nt,this._t=It}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,It){switch(nt=+nt,It=+It,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,It):this._context.moveTo(nt,It);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,It),this._context.lineTo(nt,It);else{var Jt=this._x*(1-this._t)+nt*this._t;this._context.lineTo(Jt,this._y),this._context.lineTo(Jt,It)}break}}this._x=nt,this._y=It}};function Le(nt){return new Pe(nt,.5)}function ot(nt){return new Pe(nt,0)}function ut(nt){return new Pe(nt,1)}function pt(nt,It){if((Dr=nt.length)>1)for(var Jt=1,fr,Nr,Vr=nt[It[0]],Dr,Er=Vr.length;Jt<Dr;++Jt)for(Nr=Vr,Vr=nt[It[Jt]],fr=0;fr<Er;++fr)Vr[fr][1]+=Vr[fr][0]=isNaN(Nr[fr][1])?Nr[fr][0]:Nr[fr][1]}function Pt(nt){for(var It=nt.length,Jt=new Array(It);--It>=0;)Jt[It]=It;return Jt}function xt(nt,It){return nt[It]}function Lt(){var nt=M([]),It=Pt,Jt=pt,fr=xt;function Nr(Vr){var Dr=nt.apply(this,arguments),Er,jr=Vr.length,kn=Dr.length,mn=new Array(kn),Wn;for(Er=0;Er<kn;++Er){for(var In=Dr[Er],$n=mn[Er]=new Array(jr),Kn=0,ma;Kn<jr;++Kn)$n[Kn]=ma=[0,+fr(Vr[Kn],In,Kn,Vr)],ma.data=Vr[Kn];$n.key=In}for(Er=0,Wn=It(mn);Er<kn;++Er)mn[Wn[Er]].index=Er;return Jt(mn,Wn),mn}return Nr.keys=function(Vr){return arguments.length?(nt=typeof Vr=="function"?Vr:M(ae.call(Vr)),Nr):nt},Nr.value=function(Vr){return arguments.length?(fr=typeof Vr=="function"?Vr:M(+Vr),Nr):fr},Nr.order=function(Vr){return arguments.length?(It=Vr==null?Pt:typeof Vr=="function"?Vr:M(ae.call(Vr)),Nr):It},Nr.offset=function(Vr){return arguments.length?(Jt=Vr==null?pt:Vr,Nr):Jt},Nr}function Zt(nt,It){if((fr=nt.length)>0){for(var Jt,fr,Nr=0,Vr=nt[0].length,Dr;Nr<Vr;++Nr){for(Dr=Jt=0;Jt<fr;++Jt)Dr+=nt[Jt][Nr][1]||0;if(Dr)for(Jt=0;Jt<fr;++Jt)nt[Jt][Nr][1]/=Dr}pt(nt,It)}}function ur(nt,It){if((jr=nt.length)>0)for(var Jt,fr=0,Nr,Vr,Dr,Er,jr,kn=nt[It[0]].length;fr<kn;++fr)for(Dr=Er=0,Jt=0;Jt<jr;++Jt)(Vr=(Nr=nt[It[Jt]][fr])[1]-Nr[0])>0?(Nr[0]=Dr,Nr[1]=Dr+=Vr):Vr<0?(Nr[1]=Er,Nr[0]=Er+=Vr):(Nr[0]=0,Nr[1]=Vr)}function Pr(nt,It){if((Nr=nt.length)>0){for(var Jt=0,fr=nt[It[0]],Nr,Vr=fr.length;Jt<Vr;++Jt){for(var Dr=0,Er=0;Dr<Nr;++Dr)Er+=nt[Dr][Jt][1]||0;fr[Jt][1]+=fr[Jt][0]=-Er/2}pt(nt,It)}}function Ar(nt,It){if(!(!((Dr=nt.length)>0)||!((Vr=(Nr=nt[It[0]]).length)>0))){for(var Jt=0,fr=1,Nr,Vr,Dr;fr<Vr;++fr){for(var Er=0,jr=0,kn=0;Er<Dr;++Er){for(var mn=nt[It[Er]],Wn=mn[fr][1]||0,In=mn[fr-1][1]||0,$n=(Wn-In)/2,Kn=0;Kn<Er;++Kn){var ma=nt[It[Kn]],Ra=ma[fr][1]||0,_i=ma[fr-1][1]||0;$n+=Ra-_i}jr+=Wn,kn+=$n*Wn}Nr[fr-1][1]+=Nr[fr-1][0]=Jt,jr&&(Jt-=kn/jr)}Nr[fr-1][1]+=Nr[fr-1][0]=Jt,pt(nt,It)}}function kr(nt){var It=nt.map(Zr);return Pt(nt).sort(function(Jt,fr){return It[Jt]-It[fr]})}function Zr(nt){for(var It=-1,Jt=0,fr=nt.length,Nr,Vr=-1/0;++It<fr;)(Nr=+nt[It][1])>Vr&&(Vr=Nr,Jt=It);return Jt}function lr(nt){var It=nt.map(br);return Pt(nt).sort(function(Jt,fr){return It[Jt]-It[fr]})}function br(nt){for(var It=0,Jt=-1,fr=nt.length,Nr;++Jt<fr;)(Nr=+nt[Jt][1])&&(It+=Nr);return It}function Or(nt){return lr(nt).reverse()}function Hr(nt){var It=nt.length,Jt,fr,Nr=nt.map(br),Vr=kr(nt),Dr=0,Er=0,jr=[],kn=[];for(Jt=0;Jt<It;++Jt)fr=Vr[Jt],Dr<Er?(Dr+=Nr[fr],jr.push(fr)):(Er+=Nr[fr],kn.push(fr));return kn.reverse().concat(jr)}function Lr(nt){return Pt(nt).reverse()}x.arc=w,x.area=F,x.areaRadial=j,x.curveBasis=Bt,x.curveBasisClosed=Kt,x.curveBasisOpen=St,x.curveBundle=at,x.curveCardinal=He,x.curveCardinalClosed=et,x.curveCardinalOpen=mt,x.curveCatmullRom=zt,x.curveCatmullRomClosed=Xt,x.curveCatmullRomOpen=sr,x.curveLinear=L,x.curveLinearClosed=cn,x.curveMonotoneX=Qe,x.curveMonotoneY=ft,x.curveNatural=Nt,x.curveStep=Le,x.curveStepAfter=ut,x.curveStepBefore=ot,x.line=P,x.lineRadial=ee,x.linkHorizontal=re,x.linkRadial=Q,x.linkVertical=Z,x.pie=R,x.pointRadial=X,x.radialArea=j,x.radialLine=ee,x.stack=Lt,x.stackOffsetDiverging=ur,x.stackOffsetExpand=Zt,x.stackOffsetNone=pt,x.stackOffsetSilhouette=Pr,x.stackOffsetWiggle=Ar,x.stackOrderAppearance=kr,x.stackOrderAscending=lr,x.stackOrderDescending=Or,x.stackOrderInsideOut=Hr,x.stackOrderNone=Pt,x.stackOrderReverse=Lr,x.symbol=Ge,x.symbolCircle=ie,x.symbolCross=oe,x.symbolDiamond=_e,x.symbolSquare=Se,x.symbolStar=be,x.symbolTriangle=Ve,x.symbolWye=ze,x.symbols=Ie,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G,t("d3-time")):(x=x||self,f(x.d3=x.d3||{},x.d3))})(this,function(x,f){function M(Xe){if(0<=Xe.y&&Xe.y<100){var at=new Date(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L);return at.setFullYear(Xe.y),at}return new Date(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L)}function T(Xe){if(0<=Xe.y&&Xe.y<100){var at=new Date(Date.UTC(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L));return at.setUTCFullYear(Xe.y),at}return new Date(Date.UTC(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L))}function e(Xe,at,We){return{y:Xe,m:at,d:We,H:0,M:0,S:0,L:0}}function a(Xe){var at=Xe.dateTime,We=Xe.date,Ee=Xe.time,He=Xe.periods,Ke=Xe.days,et=Xe.shortDays,At=Xe.months,mt=Xe.shortMonths,Mt=b(He),Gt=g(He),zt=b(Ke),Ht=g(Ke),Xt=b(et),Wt=g(et),sr=b(At),Gr=g(At),cn=b(mt),en=g(mt),st={a:ut,A:pt,b:Pt,B:xt,c:null,d:z,e:z,f:X,H,I:Y,j:ee,L:j,m:ae,M:fe,p:Lt,q:Zt,Q:Ge,s:dt,S:K,u:J,U,V,w:q,W:re,x:null,X:null,y:Z,Y:Q,Z:ie,"%":Ie},rr={a:ur,A:Pr,b:Ar,B:kr,c:null,d:oe,e:oe,f:ge,H:ne,I:se,j:_e,L:ue,m:xe,M:ye,p:Zr,q:lr,Q:Ge,s:dt,S:be,u:Se,U:Re,V:Ve,w:Ae,W:Ce,x:null,X:null,y:Ze,Y:Ye,Z:ze,"%":Ie},er={a:ft,A:ct,b:Et,B:Nt,c:Pe,d:h,e:h,f:I,H:E,I:E,j:L,L:F,m:w,M:S,p:Qe,q:p,Q:R,s:O,S:P,u:c,U:m,V:l,w:d,W:y,x:Le,X:ot,y:A,Y:u,Z:_,"%":D};st.x=jt(We,st),st.X=jt(Ee,st),st.c=jt(at,st),rr.x=jt(We,rr),rr.X=jt(Ee,rr),rr.c=jt(at,rr);function jt(br,Or){return function(Hr){var Lr=[],nt=-1,It=0,Jt=br.length,fr,Nr,Vr;for(Hr instanceof Date||(Hr=new Date(+Hr));++nt<Jt;)br.charCodeAt(nt)===37&&(Lr.push(br.slice(It,nt)),(Nr=i[fr=br.charAt(++nt)])!=null?fr=br.charAt(++nt):Nr=fr==="e"?" ":"0",(Vr=Or[fr])&&(fr=Vr(Hr,Nr)),Lr.push(fr),It=nt+1);return Lr.push(br.slice(It,nt)),Lr.join("")}}function Mr(br,Or){return function(Hr){var Lr=e(1900,void 0,1),nt=it(Lr,br,Hr+="",0),It,Jt;if(nt!=Hr.length)return null;if("Q"in Lr)return new Date(Lr.Q);if("s"in Lr)return new Date(Lr.s*1e3+("L"in Lr?Lr.L:0));if(Or&&!("Z"in Lr)&&(Lr.Z=0),"p"in Lr&&(Lr.H=Lr.H%12+Lr.p*12),Lr.m===void 0&&(Lr.m="q"in Lr?Lr.q:0),"V"in Lr){if(Lr.V<1||Lr.V>53)return null;"w"in Lr||(Lr.w=1),"Z"in Lr?(It=T(e(Lr.y,0,1)),Jt=It.getUTCDay(),It=Jt>4||Jt===0?f.utcMonday.ceil(It):f.utcMonday(It),It=f.utcDay.offset(It,(Lr.V-1)*7),Lr.y=It.getUTCFullYear(),Lr.m=It.getUTCMonth(),Lr.d=It.getUTCDate()+(Lr.w+6)%7):(It=M(e(Lr.y,0,1)),Jt=It.getDay(),It=Jt>4||Jt===0?f.timeMonday.ceil(It):f.timeMonday(It),It=f.timeDay.offset(It,(Lr.V-1)*7),Lr.y=It.getFullYear(),Lr.m=It.getMonth(),Lr.d=It.getDate()+(Lr.w+6)%7)}else("W"in Lr||"U"in Lr)&&("w"in Lr||(Lr.w="u"in Lr?Lr.u%7:"W"in Lr?1:0),Jt="Z"in Lr?T(e(Lr.y,0,1)).getUTCDay():M(e(Lr.y,0,1)).getDay(),Lr.m=0,Lr.d="W"in Lr?(Lr.w+6)%7+Lr.W*7-(Jt+5)%7:Lr.w+Lr.U*7-(Jt+6)%7);return"Z"in Lr?(Lr.H+=Lr.Z/100|0,Lr.M+=Lr.Z%100,T(Lr)):M(Lr)}}function it(br,Or,Hr,Lr){for(var nt=0,It=Or.length,Jt=Hr.length,fr,Nr;nt<It;){if(Lr>=Jt)return-1;if(fr=Or.charCodeAt(nt++),fr===37){if(fr=Or.charAt(nt++),Nr=er[fr in i?Or.charAt(nt++):fr],!Nr||(Lr=Nr(br,Hr,Lr))<0)return-1}else if(fr!=Hr.charCodeAt(Lr++))return-1}return Lr}function Qe(br,Or,Hr){var Lr=Mt.exec(Or.slice(Hr));return Lr?(br.p=Gt[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function ft(br,Or,Hr){var Lr=Xt.exec(Or.slice(Hr));return Lr?(br.w=Wt[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function ct(br,Or,Hr){var Lr=zt.exec(Or.slice(Hr));return Lr?(br.w=Ht[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Et(br,Or,Hr){var Lr=cn.exec(Or.slice(Hr));return Lr?(br.m=en[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Nt(br,Or,Hr){var Lr=sr.exec(Or.slice(Hr));return Lr?(br.m=Gr[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Pe(br,Or,Hr){return it(br,at,Or,Hr)}function Le(br,Or,Hr){return it(br,We,Or,Hr)}function ot(br,Or,Hr){return it(br,Ee,Or,Hr)}function ut(br){return et[br.getDay()]}function pt(br){return Ke[br.getDay()]}function Pt(br){return mt[br.getMonth()]}function xt(br){return At[br.getMonth()]}function Lt(br){return He[+(br.getHours()>=12)]}function Zt(br){return 1+~~(br.getMonth()/3)}function ur(br){return et[br.getUTCDay()]}function Pr(br){return Ke[br.getUTCDay()]}function Ar(br){return mt[br.getUTCMonth()]}function kr(br){return At[br.getUTCMonth()]}function Zr(br){return He[+(br.getUTCHours()>=12)]}function lr(br){return 1+~~(br.getUTCMonth()/3)}return{format:function(br){var Or=jt(br+="",st);return Or.toString=function(){return br},Or},parse:function(br){var Or=Mr(br+="",!1);return Or.toString=function(){return br},Or},utcFormat:function(br){var Or=jt(br+="",rr);return Or.toString=function(){return br},Or},utcParse:function(br){var Or=Mr(br+="",!0);return Or.toString=function(){return br},Or}}}var i={"-":"",_:" ",0:"0"},n=/^\s*\d+/,r=/^%/,v=/[\\^$*+?|[\]().{}]/g;function s(Xe,at,We){var Ee=Xe<0?"-":"",He=(Ee?-Xe:Xe)+"",Ke=He.length;return Ee+(Ke<We?new Array(We-Ke+1).join(at)+He:He)}function o(Xe){return Xe.replace(v,"\\$&")}function b(Xe){return new RegExp("^(?:"+Xe.map(o).join("|")+")","i")}function g(Xe){for(var at={},We=-1,Ee=Xe.length;++We<Ee;)at[Xe[We].toLowerCase()]=We;return at}function d(Xe,at,We){var Ee=n.exec(at.slice(We,We+1));return Ee?(Xe.w=+Ee[0],We+Ee[0].length):-1}function c(Xe,at,We){var Ee=n.exec(at.slice(We,We+1));return Ee?(Xe.u=+Ee[0],We+Ee[0].length):-1}function m(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.U=+Ee[0],We+Ee[0].length):-1}function l(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.V=+Ee[0],We+Ee[0].length):-1}function y(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.W=+Ee[0],We+Ee[0].length):-1}function u(Xe,at,We){var Ee=n.exec(at.slice(We,We+4));return Ee?(Xe.y=+Ee[0],We+Ee[0].length):-1}function A(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.y=+Ee[0]+(+Ee[0]>68?1900:2e3),We+Ee[0].length):-1}function _(Xe,at,We){var Ee=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(at.slice(We,We+6));return Ee?(Xe.Z=Ee[1]?0:-(Ee[2]+(Ee[3]||"00")),We+Ee[0].length):-1}function p(Xe,at,We){var Ee=n.exec(at.slice(We,We+1));return Ee?(Xe.q=Ee[0]*3-3,We+Ee[0].length):-1}function w(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.m=Ee[0]-1,We+Ee[0].length):-1}function h(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.d=+Ee[0],We+Ee[0].length):-1}function L(Xe,at,We){var Ee=n.exec(at.slice(We,We+3));return Ee?(Xe.m=0,Xe.d=+Ee[0],We+Ee[0].length):-1}function E(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.H=+Ee[0],We+Ee[0].length):-1}function S(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.M=+Ee[0],We+Ee[0].length):-1}function P(Xe,at,We){var Ee=n.exec(at.slice(We,We+2));return Ee?(Xe.S=+Ee[0],We+Ee[0].length):-1}function F(Xe,at,We){var Ee=n.exec(at.slice(We,We+3));return Ee?(Xe.L=+Ee[0],We+Ee[0].length):-1}function I(Xe,at,We){var Ee=n.exec(at.slice(We,We+6));return Ee?(Xe.L=Math.floor(Ee[0]/1e3),We+Ee[0].length):-1}function D(Xe,at,We){var Ee=r.exec(at.slice(We,We+1));return Ee?We+Ee[0].length:-1}function R(Xe,at,We){var Ee=n.exec(at.slice(We));return Ee?(Xe.Q=+Ee[0],We+Ee[0].length):-1}function O(Xe,at,We){var Ee=n.exec(at.slice(We));return Ee?(Xe.s=+Ee[0],We+Ee[0].length):-1}function z(Xe,at){return s(Xe.getDate(),at,2)}function H(Xe,at){return s(Xe.getHours(),at,2)}function Y(Xe,at){return s(Xe.getHours()%12||12,at,2)}function ee(Xe,at){return s(1+f.timeDay.count(f.timeYear(Xe),Xe),at,3)}function j(Xe,at){return s(Xe.getMilliseconds(),at,3)}function X(Xe,at){return j(Xe,at)+"000"}function ae(Xe,at){return s(Xe.getMonth()+1,at,2)}function fe(Xe,at){return s(Xe.getMinutes(),at,2)}function K(Xe,at){return s(Xe.getSeconds(),at,2)}function J(Xe){var at=Xe.getDay();return at===0?7:at}function U(Xe,at){return s(f.timeSunday.count(f.timeYear(Xe)-1,Xe),at,2)}function V(Xe,at){var We=Xe.getDay();return Xe=We>=4||We===0?f.timeThursday(Xe):f.timeThursday.ceil(Xe),s(f.timeThursday.count(f.timeYear(Xe),Xe)+(f.timeYear(Xe).getDay()===4),at,2)}function q(Xe){return Xe.getDay()}function re(Xe,at){return s(f.timeMonday.count(f.timeYear(Xe)-1,Xe),at,2)}function Z(Xe,at){return s(Xe.getFullYear()%100,at,2)}function Q(Xe,at){return s(Xe.getFullYear()%1e4,at,4)}function ie(Xe){var at=Xe.getTimezoneOffset();return(at>0?"-":(at*=-1,"+"))+s(at/60|0,"0",2)+s(at%60,"0",2)}function oe(Xe,at){return s(Xe.getUTCDate(),at,2)}function ne(Xe,at){return s(Xe.getUTCHours(),at,2)}function se(Xe,at){return s(Xe.getUTCHours()%12||12,at,2)}function _e(Xe,at){return s(1+f.utcDay.count(f.utcYear(Xe),Xe),at,3)}function ue(Xe,at){return s(Xe.getUTCMilliseconds(),at,3)}function ge(Xe,at){return ue(Xe,at)+"000"}function xe(Xe,at){return s(Xe.getUTCMonth()+1,at,2)}function ye(Xe,at){return s(Xe.getUTCMinutes(),at,2)}function be(Xe,at){return s(Xe.getUTCSeconds(),at,2)}function Se(Xe){var at=Xe.getUTCDay();return at===0?7:at}function Re(Xe,at){return s(f.utcSunday.count(f.utcYear(Xe)-1,Xe),at,2)}function Ve(Xe,at){var We=Xe.getUTCDay();return Xe=We>=4||We===0?f.utcThursday(Xe):f.utcThursday.ceil(Xe),s(f.utcThursday.count(f.utcYear(Xe),Xe)+(f.utcYear(Xe).getUTCDay()===4),at,2)}function Ae(Xe){return Xe.getUTCDay()}function Ce(Xe,at){return s(f.utcMonday.count(f.utcYear(Xe)-1,Xe),at,2)}function Ze(Xe,at){return s(Xe.getUTCFullYear()%100,at,2)}function Ye(Xe,at){return s(Xe.getUTCFullYear()%1e4,at,4)}function ze(){return"+0000"}function Ie(){return"%"}function Ge(Xe){return+Xe}function dt(Xe){return Math.floor(+Xe/1e3)}var Rt;Qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qt(Xe){return Rt=a(Xe),x.timeFormat=Rt.format,x.timeParse=Rt.parse,x.utcFormat=Rt.utcFormat,x.utcParse=Rt.utcParse,Rt}var Bt="%Y-%m-%dT%H:%M:%S.%LZ";function Ct(Xe){return Xe.toISOString()}var Kt=Date.prototype.toISOString?Ct:x.utcFormat(Bt);function Ot(Xe){var at=new Date(Xe);return isNaN(at)?null:at}var St=+new Date("2000-01-01T00:00:00.000Z")?Ot:x.utcParse(Bt);x.isoFormat=Kt,x.isoParse=St,x.timeFormatDefaultLocale=Qt,x.timeFormatLocale=a,Object.defineProperty(x,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){var f=new Date,M=new Date;function T(Ae,Ce,Ze,Ye){function ze(Ie){return Ae(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return ze.floor=function(Ie){return Ae(Ie=new Date(+Ie)),Ie},ze.ceil=function(Ie){return Ae(Ie=new Date(Ie-1)),Ce(Ie,1),Ae(Ie),Ie},ze.round=function(Ie){var Ge=ze(Ie),dt=ze.ceil(Ie);return Ie-Ge<dt-Ie?Ge:dt},ze.offset=function(Ie,Ge){return Ce(Ie=new Date(+Ie),Ge==null?1:Math.floor(Ge)),Ie},ze.range=function(Ie,Ge,dt){var Rt=[],Qt;if(Ie=ze.ceil(Ie),dt=dt==null?1:Math.floor(dt),!(Ie<Ge)||!(dt>0))return Rt;do Rt.push(Qt=new Date(+Ie)),Ce(Ie,dt),Ae(Ie);while(Qt<Ie&&Ie<Ge);return Rt},ze.filter=function(Ie){return T(function(Ge){if(Ge>=Ge)for(;Ae(Ge),!Ie(Ge);)Ge.setTime(Ge-1)},function(Ge,dt){if(Ge>=Ge)if(dt<0)for(;++dt<=0;)for(;Ce(Ge,-1),!Ie(Ge););else for(;--dt>=0;)for(;Ce(Ge,1),!Ie(Ge););})},Ze&&(ze.count=function(Ie,Ge){return f.setTime(+Ie),M.setTime(+Ge),Ae(f),Ae(M),Math.floor(Ze(f,M))},ze.every=function(Ie){return Ie=Math.floor(Ie),!isFinite(Ie)||!(Ie>0)?null:Ie>1?ze.filter(Ye?function(Ge){return Ye(Ge)%Ie===0}:function(Ge){return ze.count(0,Ge)%Ie===0}):ze}),ze}var e=T(function(){},function(Ae,Ce){Ae.setTime(+Ae+Ce)},function(Ae,Ce){return Ce-Ae});e.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?T(function(Ce){Ce.setTime(Math.floor(Ce/Ae)*Ae)},function(Ce,Ze){Ce.setTime(+Ce+Ze*Ae)},function(Ce,Ze){return(Ze-Ce)/Ae}):e};var a=e.range,i=1e3,n=6e4,r=36e5,v=864e5,s=6048e5,o=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Ce){Ae.setTime(+Ae+Ce*i)},function(Ae,Ce){return(Ce-Ae)/i},function(Ae){return Ae.getUTCSeconds()}),b=o.range,g=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i)},function(Ae,Ce){Ae.setTime(+Ae+Ce*n)},function(Ae,Ce){return(Ce-Ae)/n},function(Ae){return Ae.getMinutes()}),d=g.range,c=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i-Ae.getMinutes()*n)},function(Ae,Ce){Ae.setTime(+Ae+Ce*r)},function(Ae,Ce){return(Ce-Ae)/r},function(Ae){return Ae.getHours()}),m=c.range,l=T(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Ce){Ae.setDate(Ae.getDate()+Ce)},function(Ae,Ce){return(Ce-Ae-(Ce.getTimezoneOffset()-Ae.getTimezoneOffset())*n)/v},function(Ae){return Ae.getDate()-1}),y=l.range;function u(Ae){return T(function(Ce){Ce.setDate(Ce.getDate()-(Ce.getDay()+7-Ae)%7),Ce.setHours(0,0,0,0)},function(Ce,Ze){Ce.setDate(Ce.getDate()+Ze*7)},function(Ce,Ze){return(Ze-Ce-(Ze.getTimezoneOffset()-Ce.getTimezoneOffset())*n)/s})}var A=u(0),_=u(1),p=u(2),w=u(3),h=u(4),L=u(5),E=u(6),S=A.range,P=_.range,F=p.range,I=w.range,D=h.range,R=L.range,O=E.range,z=T(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Ce){Ae.setMonth(Ae.getMonth()+Ce)},function(Ae,Ce){return Ce.getMonth()-Ae.getMonth()+(Ce.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),H=z.range,Y=T(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Ce){Ae.setFullYear(Ae.getFullYear()+Ce)},function(Ae,Ce){return Ce.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});Y.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Ce){Ce.setFullYear(Math.floor(Ce.getFullYear()/Ae)*Ae),Ce.setMonth(0,1),Ce.setHours(0,0,0,0)},function(Ce,Ze){Ce.setFullYear(Ce.getFullYear()+Ze*Ae)})};var ee=Y.range,j=T(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Ce){Ae.setTime(+Ae+Ce*n)},function(Ae,Ce){return(Ce-Ae)/n},function(Ae){return Ae.getUTCMinutes()}),X=j.range,ae=T(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Ce){Ae.setTime(+Ae+Ce*r)},function(Ae,Ce){return(Ce-Ae)/r},function(Ae){return Ae.getUTCHours()}),fe=ae.range,K=T(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Ce){Ae.setUTCDate(Ae.getUTCDate()+Ce)},function(Ae,Ce){return(Ce-Ae)/v},function(Ae){return Ae.getUTCDate()-1}),J=K.range;function U(Ae){return T(function(Ce){Ce.setUTCDate(Ce.getUTCDate()-(Ce.getUTCDay()+7-Ae)%7),Ce.setUTCHours(0,0,0,0)},function(Ce,Ze){Ce.setUTCDate(Ce.getUTCDate()+Ze*7)},function(Ce,Ze){return(Ze-Ce)/s})}var V=U(0),q=U(1),re=U(2),Z=U(3),Q=U(4),ie=U(5),oe=U(6),ne=V.range,se=q.range,_e=re.range,ue=Z.range,ge=Q.range,xe=ie.range,ye=oe.range,be=T(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Ce){Ae.setUTCMonth(Ae.getUTCMonth()+Ce)},function(Ae,Ce){return Ce.getUTCMonth()-Ae.getUTCMonth()+(Ce.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),Se=be.range,Re=T(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Ce){Ae.setUTCFullYear(Ae.getUTCFullYear()+Ce)},function(Ae,Ce){return Ce.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});Re.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Ce){Ce.setUTCFullYear(Math.floor(Ce.getUTCFullYear()/Ae)*Ae),Ce.setUTCMonth(0,1),Ce.setUTCHours(0,0,0,0)},function(Ce,Ze){Ce.setUTCFullYear(Ce.getUTCFullYear()+Ze*Ae)})};var Ve=Re.range;x.timeDay=l,x.timeDays=y,x.timeFriday=L,x.timeFridays=R,x.timeHour=c,x.timeHours=m,x.timeInterval=T,x.timeMillisecond=e,x.timeMilliseconds=a,x.timeMinute=g,x.timeMinutes=d,x.timeMonday=_,x.timeMondays=P,x.timeMonth=z,x.timeMonths=H,x.timeSaturday=E,x.timeSaturdays=O,x.timeSecond=o,x.timeSeconds=b,x.timeSunday=A,x.timeSundays=S,x.timeThursday=h,x.timeThursdays=D,x.timeTuesday=p,x.timeTuesdays=F,x.timeWednesday=w,x.timeWednesdays=I,x.timeWeek=A,x.timeWeeks=S,x.timeYear=Y,x.timeYears=ee,x.utcDay=K,x.utcDays=J,x.utcFriday=ie,x.utcFridays=xe,x.utcHour=ae,x.utcHours=fe,x.utcMillisecond=e,x.utcMilliseconds=a,x.utcMinute=j,x.utcMinutes=X,x.utcMonday=q,x.utcMondays=se,x.utcMonth=be,x.utcMonths=Se,x.utcSaturday=oe,x.utcSaturdays=ye,x.utcSecond=o,x.utcSeconds=b,x.utcSunday=V,x.utcSundays=ne,x.utcThursday=Q,x.utcThursdays=ge,x.utcTuesday=re,x.utcTuesdays=_e,x.utcWednesday=Z,x.utcWednesdays=ue,x.utcWeek=V,x.utcWeeks=ne,x.utcYear=Re,x.utcYears=Ve,Object.defineProperty(x,"__esModule",{value:!0})})},{}],122:[function(t,B,G){arguments[4][121][0].apply(G,arguments)},{dup:121}],123:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.d3=x.d3||{}))})(this,function(x){var f=0,M=0,T=0,e=1e3,a,i,n=0,r=0,v=0,s=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(w){setTimeout(w,17)};function b(){return r||(o(g),r=s.now()+v)}function g(){r=0}function d(){this._call=this._time=this._next=null}d.prototype=c.prototype={constructor:d,restart:function(w,h,L){if(typeof w!="function")throw new TypeError("callback is not a function");L=(L==null?b():+L)+(h==null?0:+h),!this._next&&i!==this&&(i?i._next=this:a=this,i=this),this._call=w,this._time=L,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};function c(w,h,L){var E=new d;return E.restart(w,h,L),E}function m(){b(),++f;for(var w=a,h;w;)(h=r-w._time)>=0&&w._call.call(null,h),w=w._next;--f}function l(){r=(n=s.now())+v,f=M=0;try{m()}finally{f=0,u(),r=0}}function y(){var w=s.now(),h=w-n;h>e&&(v-=h,n=w)}function u(){for(var w,h=a,L,E=1/0;h;)h._call?(E>h._time&&(E=h._time),w=h,h=h._next):(L=h._next,h._next=null,h=w?w._next=L:a=L);i=w,A(E)}function A(w){if(!f){M&&(M=clearTimeout(M));var h=w-r;h>24?(w<1/0&&(M=setTimeout(l,w-s.now()-v)),T&&(T=clearInterval(T))):(T||(n=s.now(),T=setInterval(y,e)),f=1,o(l))}}function _(w,h,L){var E=new d;return h=h==null?0:+h,E.restart(function(S){E.stop(),w(S+h)},h,L),E}function p(w,h,L){var E=new d,S=h;return h==null?(E.restart(w,h,L),E):(h=+h,L=L==null?b():+L,E.restart(function P(F){F+=S,E.restart(P,S+=h,L),w(F)},h,L),E)}x.interval=p,x.now=b,x.timeout=_,x.timer=c,x.timerFlush=m,Object.defineProperty(x,"__esModule",{value:!0})})},{}],124:[function(t,B,G){B.exports=function(){for(var x=0;x<arguments.length;x++)if(arguments[x]!==void 0)return arguments[x]}},{}],125:[function(t,B,G){B.exports=T;var x=T.canvas=document.createElement("canvas"),f=x.getContext("2d"),M=e([32,126]);T.createPairs=e,T.ascii=M;function T(a,i){Array.isArray(a)&&(a=a.join(", "));var n={},r,v=16,s=.05;i&&(i.length===2&&typeof i[0]=="number"?r=e(i):Array.isArray(i)?r=i:(i.o?r=e(i.o):i.pairs&&(r=i.pairs),i.fontSize&&(v=i.fontSize),i.threshold!=null&&(s=i.threshold))),r||(r=M),f.font=v+"px "+a;for(var o=0;o<r.length;o++){var b=r[o],g=f.measureText(b[0]).width+f.measureText(b[1]).width,d=f.measureText(b).width;if(Math.abs(g-d)>v*s){var c=(d-g)/v;n[b]=c*1e3}}return n}function e(a){for(var i=[],n=a[0];n<=a[1];n++)for(var r=String.fromCharCode(n),v=a[0];v<a[1];v++){var s=String.fromCharCode(v),o=r+s;i.push(o)}return i}},{}],126:[function(t,B,G){var x=t("abs-svg-path"),f=t("normalize-svg-path"),M={M:"moveTo",C:"bezierCurveTo"};B.exports=function(T,e){T.beginPath(),f(x(e)).forEach(function(a){var i=a[0],n=a.slice(1);T[M[i]].apply(T,n)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(t,B,G){B.exports=function(x){switch(x){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(t,B,G){function x(T,e,a){var i=T[a]|0;if(i<=0)return[];var n=new Array(i),r;if(a===T.length-1)for(r=0;r<i;++r)n[r]=e;else for(r=0;r<i;++r)n[r]=x(T,e,a+1);return n}function f(T,e){var a,i;for(a=new Array(T),i=0;i<T;++i)a[i]=e;return a}function M(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return f(T|0,e);break;case"object":if(typeof T.length=="number")return x(T,e,0);break}return[]}B.exports=M},{}],129:[function(t,B,G){B.exports=x,B.exports.default=x;function x(R,O,z){z=z||2;var H=O&&O.length,Y=H?O[0]*z:R.length,ee=f(R,0,Y,z,!0),j=[];if(!ee||ee.next===ee.prev)return j;var X,ae,fe,K,J,U,V;if(H&&(ee=r(R,O,ee,z)),R.length>80*z){X=fe=R[0],ae=K=R[1];for(var q=z;q<Y;q+=z)J=R[q],U=R[q+1],J<X&&(X=J),U<ae&&(ae=U),J>fe&&(fe=J),U>K&&(K=U);V=Math.max(fe-X,K-ae),V=V!==0?1/V:0}return T(ee,j,z,X,ae,V),j}function f(R,O,z,H,Y){var ee,j;if(Y===D(R,O,z,H)>0)for(ee=O;ee<z;ee+=H)j=P(ee,R[ee],R[ee+1],j);else for(ee=z-H;ee>=O;ee-=H)j=P(ee,R[ee],R[ee+1],j);return j&&A(j,j.next)&&(F(j),j=j.next),j}function M(R,O){if(!R)return R;O||(O=R);var z=R,H;do if(H=!1,!z.steiner&&(A(z,z.next)||u(z.prev,z,z.next)===0)){if(F(z),z=O=z.prev,z===z.next)break;H=!0}else z=z.next;while(H||z!==O);return O}function T(R,O,z,H,Y,ee,j){if(!!R){!j&&ee&&g(R,H,Y,ee);for(var X=R,ae,fe;R.prev!==R.next;){if(ae=R.prev,fe=R.next,ee?a(R,H,Y,ee):e(R)){O.push(ae.i/z),O.push(R.i/z),O.push(fe.i/z),F(R),R=fe.next,X=fe.next;continue}if(R=fe,R===X){j?j===1?(R=i(M(R),O,z),T(R,O,z,H,Y,ee,2)):j===2&&n(R,O,z,H,Y,ee):T(M(R),O,z,H,Y,ee,1);break}}}}function e(R){var O=R.prev,z=R,H=R.next;if(u(O,z,H)>=0)return!1;for(var Y=R.next.next;Y!==R.prev;){if(l(O.x,O.y,z.x,z.y,H.x,H.y,Y.x,Y.y)&&u(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function a(R,O,z,H){var Y=R.prev,ee=R,j=R.next;if(u(Y,ee,j)>=0)return!1;for(var X=Y.x<ee.x?Y.x<j.x?Y.x:j.x:ee.x<j.x?ee.x:j.x,ae=Y.y<ee.y?Y.y<j.y?Y.y:j.y:ee.y<j.y?ee.y:j.y,fe=Y.x>ee.x?Y.x>j.x?Y.x:j.x:ee.x>j.x?ee.x:j.x,K=Y.y>ee.y?Y.y>j.y?Y.y:j.y:ee.y>j.y?ee.y:j.y,J=c(X,ae,O,z,H),U=c(fe,K,O,z,H),V=R.prevZ,q=R.nextZ;V&&V.z>=J&&q&&q.z<=U;){if(V!==R.prev&&V!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,V.x,V.y)&&u(V.prev,V,V.next)>=0||(V=V.prevZ,q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,q.x,q.y)&&u(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;V&&V.z>=J;){if(V!==R.prev&&V!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,V.x,V.y)&&u(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;q&&q.z<=U;){if(q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function i(R,O,z){var H=R;do{var Y=H.prev,ee=H.next.next;!A(Y,ee)&&_(Y,H,H.next,ee)&&L(Y,ee)&&L(ee,Y)&&(O.push(Y.i/z),O.push(H.i/z),O.push(ee.i/z),F(H),F(H.next),H=R=ee),H=H.next}while(H!==R);return M(H)}function n(R,O,z,H,Y,ee){var j=R;do{for(var X=j.next.next;X!==j.prev;){if(j.i!==X.i&&y(j,X)){var ae=S(j,X);j=M(j,j.next),ae=M(ae,ae.next),T(j,O,z,H,Y,ee),T(ae,O,z,H,Y,ee);return}X=X.next}j=j.next}while(j!==R)}function r(R,O,z,H){var Y=[],ee,j,X,ae,fe;for(ee=0,j=O.length;ee<j;ee++)X=O[ee]*H,ae=ee<j-1?O[ee+1]*H:R.length,fe=f(R,X,ae,H,!1),fe===fe.next&&(fe.steiner=!0),Y.push(m(fe));for(Y.sort(v),ee=0;ee<Y.length;ee++)s(Y[ee],z),z=M(z,z.next);return z}function v(R,O){return R.x-O.x}function s(R,O){if(O=o(R,O),O){var z=S(O,R);M(O,O.next),M(z,z.next)}}function o(R,O){var z=O,H=R.x,Y=R.y,ee=-1/0,j;do{if(Y<=z.y&&Y>=z.next.y&&z.next.y!==z.y){var X=z.x+(Y-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(X<=H&&X>ee){if(ee=X,X===H){if(Y===z.y)return z;if(Y===z.next.y)return z.next}j=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!j)return null;if(H===ee)return j;var ae=j,fe=j.x,K=j.y,J=1/0,U;z=j;do H>=z.x&&z.x>=fe&&H!==z.x&&l(Y<K?H:ee,Y,fe,K,Y<K?ee:H,Y,z.x,z.y)&&(U=Math.abs(Y-z.y)/(H-z.x),L(z,R)&&(U<J||U===J&&(z.x>j.x||z.x===j.x&&b(j,z)))&&(j=z,J=U)),z=z.next;while(z!==ae);return j}function b(R,O){return u(R.prev,R,O.prev)<0&&u(O.next,R,R.next)<0}function g(R,O,z,H){var Y=R;do Y.z===null&&(Y.z=c(Y.x,Y.y,O,z,H)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==R);Y.prevZ.nextZ=null,Y.prevZ=null,d(Y)}function d(R){var O,z,H,Y,ee,j,X,ae,fe=1;do{for(z=R,R=null,ee=null,j=0;z;){for(j++,H=z,X=0,O=0;O<fe&&(X++,H=H.nextZ,!!H);O++);for(ae=fe;X>0||ae>0&&H;)X!==0&&(ae===0||!H||z.z<=H.z)?(Y=z,z=z.nextZ,X--):(Y=H,H=H.nextZ,ae--),ee?ee.nextZ=Y:R=Y,Y.prevZ=ee,ee=Y;z=H}ee.nextZ=null,fe*=2}while(j>1);return R}function c(R,O,z,H,Y){return R=32767*(R-z)*Y,O=32767*(O-H)*Y,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,R|O<<1}function m(R){var O=R,z=R;do(O.x<z.x||O.x===z.x&&O.y<z.y)&&(z=O),O=O.next;while(O!==R);return z}function l(R,O,z,H,Y,ee,j,X){return(Y-j)*(O-X)-(R-j)*(ee-X)>=0&&(R-j)*(H-X)-(z-j)*(O-X)>=0&&(z-j)*(ee-X)-(Y-j)*(H-X)>=0}function y(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!h(R,O)&&(L(R,O)&&L(O,R)&&E(R,O)&&(u(R.prev,R,O.prev)||u(R,O.prev,O))||A(R,O)&&u(R.prev,R,R.next)>0&&u(O.prev,O,O.next)>0)}function u(R,O,z){return(O.y-R.y)*(z.x-O.x)-(O.x-R.x)*(z.y-O.y)}function A(R,O){return R.x===O.x&&R.y===O.y}function _(R,O,z,H){var Y=w(u(R,O,z)),ee=w(u(R,O,H)),j=w(u(z,H,R)),X=w(u(z,H,O));return!!(Y!==ee&&j!==X||Y===0&&p(R,z,O)||ee===0&&p(R,H,O)||j===0&&p(z,R,H)||X===0&&p(z,O,H))}function p(R,O,z){return O.x<=Math.max(R.x,z.x)&&O.x>=Math.min(R.x,z.x)&&O.y<=Math.max(R.y,z.y)&&O.y>=Math.min(R.y,z.y)}function w(R){return R>0?1:R<0?-1:0}function h(R,O){var z=R;do{if(z.i!==R.i&&z.next.i!==R.i&&z.i!==O.i&&z.next.i!==O.i&&_(z,z.next,R,O))return!0;z=z.next}while(z!==R);return!1}function L(R,O){return u(R.prev,R,R.next)<0?u(R,O,R.next)>=0&&u(R,R.prev,O)>=0:u(R,O,R.prev)<0||u(R,R.next,O)<0}function E(R,O){var z=R,H=!1,Y=(R.x+O.x)/2,ee=(R.y+O.y)/2;do z.y>ee!=z.next.y>ee&&z.next.y!==z.y&&Y<(z.next.x-z.x)*(ee-z.y)/(z.next.y-z.y)+z.x&&(H=!H),z=z.next;while(z!==R);return H}function S(R,O){var z=new I(R.i,R.x,R.y),H=new I(O.i,O.x,O.y),Y=R.next,ee=O.prev;return R.next=O,O.prev=R,z.next=Y,Y.prev=z,H.next=z,z.prev=H,ee.next=H,H.prev=ee,H}function P(R,O,z,H){var Y=new I(R,O,z);return H?(Y.next=H.next,Y.prev=H,H.next.prev=Y,H.next=Y):(Y.prev=Y,Y.next=Y),Y}function F(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,z){this.i=R,this.x=O,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}x.deviation=function(R,O,z,H){var Y=O&&O.length,ee=Y?O[0]*z:R.length,j=Math.abs(D(R,0,ee,z));if(Y)for(var X=0,ae=O.length;X<ae;X++){var fe=O[X]*z,K=X<ae-1?O[X+1]*z:R.length;j-=Math.abs(D(R,fe,K,z))}var J=0;for(X=0;X<H.length;X+=3){var U=H[X]*z,V=H[X+1]*z,q=H[X+2]*z;J+=Math.abs((R[U]-R[q])*(R[V+1]-R[U+1])-(R[U]-R[V])*(R[q+1]-R[U+1]))}return j===0&&J===0?0:Math.abs((J-j)/j)};function D(R,O,z,H){for(var Y=0,ee=O,j=z-H;ee<z;ee+=H)Y+=(R[j]-R[ee])*(R[ee+1]+R[j+1]),j=ee;return Y}x.flatten=function(R){for(var O=R[0][0].length,z={vertices:[],holes:[],dimensions:O},H=0,Y=0;Y<R.length;Y++){for(var ee=0;ee<R[Y].length;ee++)for(var j=0;j<O;j++)z.vertices.push(R[Y][ee][j]);Y>0&&(H+=R[Y-1].length,z.holes.push(H))}return z}},{}],130:[function(t,B,G){var x=t("strongly-connected-components");B.exports=function(M,T){var e=[],a=[],i=[],n={},r=[],v;function s(A){i[A]=!1,n.hasOwnProperty(A)&&Object.keys(n[A]).forEach(function(_){delete n[A][_],i[_]&&s(_)})}function o(A){var _=!1;a.push(A),i[A]=!0;var p,w;for(p=0;p<r[A].length;p++)w=r[A][p],w===v?(b(v,a),_=!0):i[w]||(_=o(w));if(_)s(A);else for(p=0;p<r[A].length;p++){w=r[A][p];var h=n[w];h||(h={},n[w]=h),h[w]=!0}return a.pop(),_}function b(A,_){var p=[].concat(_).concat(A);T?T(o):e.push(p)}function g(A){for(var _=0;_<M.length;_++)_<A&&(M[_]=[]),M[_]=M[_].filter(function(p){return p>=A})}function d(A){g(A);for(var _=M,p=x(_),w=p.components.filter(function(I){return I.length>1}),h=1/0,L,E=0;E<w.length;E++)for(var S=0;S<w[E].length;S++)w[E][S]<h&&(h=w[E][S],L=E);var P=w[L];if(!P)return!1;var F=M.map(function(I,D){return P.indexOf(D)===-1?[]:I.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:h,adjList:F}}v=0;for(var c=M.length;v<c;){var m=d(v);if(v=m.leastVertex,r=m.adjList,r){for(var l=0;l<r.length;l++)for(var y=0;y<r[l].length;y++){var u=r[l][y];i[+u]=!1,n[u]={}}o(v),v=v+1}else v=c}if(!T)return e}},{"strongly-connected-components":307}],131:[function(t,B,G){var x=t("../../object/valid-value");B.exports=function(){return x(this).length=0,this}},{"../../object/valid-value":162}],132:[function(t,B,G){B.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(t,B,G){B.exports=function(){var x=Array.from,f,M;return typeof x!="function"?!1:(f=["raz","dwa"],M=x(f),Boolean(M&&M!==f&&M[1]==="dwa"))}},{}],134:[function(t,B,G){var x=t("es6-symbol").iterator,f=t("../../function/is-arguments"),M=t("../../function/is-function"),T=t("../../number/to-pos-integer"),e=t("../../object/valid-callable"),a=t("../../object/valid-value"),i=t("../../object/is-value"),n=t("../../string/is-string"),r=Array.isArray,v=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;B.exports=function(b){var g=arguments[1],d=arguments[2],c,m,l,y,u,A,_,p,w,h;if(b=Object(a(b)),i(g)&&e(g),!this||this===Array||!M(this)){if(!g){if(f(b))return u=b.length,u!==1?Array.apply(null,b):(y=new Array(1),y[0]=b[0],y);if(r(b)){for(y=new Array(u=b.length),m=0;m<u;++m)y[m]=b[m];return y}}y=[]}else c=this;if(!r(b)){if((w=b[x])!==void 0){for(_=e(w).call(b),c&&(y=new c),p=_.next(),m=0;!p.done;)h=g?v.call(g,d,p.value,m):p.value,c?(s.value=h,o(y,m,s)):y[m]=h,p=_.next(),++m;u=m}else if(n(b)){for(u=b.length,c&&(y=new c),m=0,l=0;m<u;++m)h=b[m],m+1<u&&(A=h.charCodeAt(0),A>=55296&&A<=56319&&(h+=b[++m])),h=g?v.call(g,d,h,l):h,c?(s.value=h,o(y,l,s)):y[l]=h,++l;u=l}}if(u===void 0)for(u=T(b.length),c&&(y=new c(u)),m=0;m<u;++m)h=g?v.call(g,d,b[m],m):b[m],c?(s.value=h,o(y,m,s)):y[m]=h;return c&&(s.value=null,y.length=u),y}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(t,B,G){var x=Object.prototype.toString,f=x.call(function(){return arguments}());B.exports=function(M){return x.call(M)===f}},{}],136:[function(t,B,G){var x=Object.prototype.toString,f=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);B.exports=function(M){return typeof M=="function"&&f(x.call(M))}},{}],137:[function(t,B,G){B.exports=function(){}},{}],138:[function(t,B,G){B.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(t,B,G){B.exports=function(){var x=Math.sign;return typeof x!="function"?!1:x(10)===1&&x(-20)===-1}},{}],140:[function(t,B,G){B.exports=function(x){return x=Number(x),isNaN(x)||x===0?x:x>0?1:-1}},{}],141:[function(t,B,G){var x=t("../math/sign"),f=Math.abs,M=Math.floor;B.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:x(T)*M(f(T)))}},{"../math/sign":138}],142:[function(t,B,G){var x=t("./to-integer"),f=Math.max;B.exports=function(M){return f(0,x(M))}},{"./to-integer":141}],143:[function(t,B,G){var x=t("./valid-callable"),f=t("./valid-value"),M=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;B.exports=function(i,n){return function(r,v){var s,o=arguments[2],b=arguments[3];return r=Object(f(r)),x(v),s=e(r),b&&s.sort(typeof b=="function"?M.call(b,r):void 0),typeof i!="function"&&(i=s[i]),T.call(i,s,function(g,d){return a.call(r,g)?T.call(v,o,r[g],g,r,d):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(t,B,G){B.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(t,B,G){B.exports=function(){var x=Object.assign,f;return typeof x!="function"?!1:(f={foo:"raz"},x(f,{bar:"dwa"},{trzy:"trzy"}),f.foo+f.bar+f.trzy==="razdwatrzy")}},{}],146:[function(t,B,G){var x=t("../keys"),f=t("../valid-value"),M=Math.max;B.exports=function(T,e){var a,i,n=M(arguments.length,2),r;for(T=Object(f(T)),r=function(v){try{T[v]=e[v]}catch(s){a||(a=s)}},i=1;i<n;++i)e=arguments[i],x(e).forEach(r);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(t,B,G){var x=t("../array/from"),f=t("./assign"),M=t("./valid-value");B.exports=function(T){var e=Object(M(T)),a=arguments[1],i=Object(arguments[2]);if(e!==T&&!a)return e;var n={};return a?x(a,function(r){(i.ensure||r in T)&&(n[r]=T[r])}):f(n,T),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(t,B,G){var x=Object.create,f;t("./set-prototype-of/is-implemented")()||(f=t("./set-prototype-of/shim")),B.exports=function(){var M,T,e;return!f||f.level!==1?x:(M={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(M,T),Object.defineProperty(f,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:M}),function(a,i){return x(a===null?M:a,i)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(t,B,G){B.exports=t("./_iterate")("forEach")},{"./_iterate":143}],150:[function(t,B,G){var x=t("./is-value"),f={function:!0,object:!0};B.exports=function(M){return x(M)&&f[typeof M]||!1}},{"./is-value":151}],151:[function(t,B,G){var x=t("../function/noop")();B.exports=function(f){return f!==x&&f!==null}},{"../function/noop":137}],152:[function(t,B,G){B.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(t,B,G){B.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(t,B,G){var x=t("../is-value"),f=Object.keys;B.exports=function(M){return f(x(M)?Object(M):M)}},{"../is-value":151}],155:[function(t,B,G){var x=t("./valid-callable"),f=t("./for-each"),M=Function.prototype.call;B.exports=function(T,e){var a={},i=arguments[2];return x(e),f(T,function(n,r,v,s){a[r]=M.call(e,i,n,r,v,s)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(t,B,G){var x=t("./is-value"),f=Array.prototype.forEach,M=Object.create,T=function(e,a){var i;for(i in e)a[i]=e[i]};B.exports=function(e){var a=M(null);return f.call(arguments,function(i){!x(i)||T(Object(i),a)}),a}},{"./is-value":151}],157:[function(t,B,G){B.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(t,B,G){var x=Object.create,f=Object.getPrototypeOf,M={};B.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||x;return typeof T!="function"?!1:f(T(e(null),M))===M}},{}],159:[function(t,B,G){var x=t("../is-object"),f=t("../valid-value"),M=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(i,n){if(f(i),n===null||x(n))return i;throw new TypeError("Prototype must be null or an object")},B.exports=function(i){var n,r;return i?(i.level===2?i.set?(r=i.set,n=function(v,s){return r.call(a(v,s),s),v}):n=function(v,s){return a(v,s).__proto__=s,v}:n=function v(s,o){var b;return a(s,o),b=M.call(v.nullPolyfill,s),b&&delete v.nullPolyfill.__proto__,o===null&&(o=v.nullPolyfill),s.__proto__=o,b&&T(v.nullPolyfill,"__proto__",e),s},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null}(function(){var i=Object.create(null),n={},r,v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(v){try{r=v.set,r.call(i,n)}catch{}if(Object.getPrototypeOf(i)===n)return{set:r,level:2}}return i.__proto__=n,Object.getPrototypeOf(i)===n?{level:2}:(i={},i.__proto__=n,Object.getPrototypeOf(i)===n?{level:1}:!1)}()),t("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(t,B,G){B.exports=function(x){if(typeof x!="function")throw new TypeError(x+" is not a function");return x}},{}],161:[function(t,B,G){var x=t("./is-object");B.exports=function(f){if(!x(f))throw new TypeError(f+" is not an Object");return f}},{"./is-object":150}],162:[function(t,B,G){var x=t("./is-value");B.exports=function(f){if(!x(f))throw new TypeError("Cannot use null or undefined");return f}},{"./is-value":151}],163:[function(t,B,G){B.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(t,B,G){var x="razdwatrzy";B.exports=function(){return typeof x.contains!="function"?!1:x.contains("dwa")===!0&&x.contains("foo")===!1}},{}],165:[function(t,B,G){var x=String.prototype.indexOf;B.exports=function(f){return x.call(this,f,arguments[1])>-1}},{}],166:[function(t,B,G){var x=Object.prototype.toString,f=x.call("");B.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||x.call(M)===f)||!1}},{}],167:[function(t,B,G){var x=Object.create(null),f=Math.random;B.exports=function(){var M;do M=f().toString(36).slice(2);while(x[M]);return M}},{}],168:[function(t,B,G){var x=t("es5-ext/object/set-prototype-of"),f=t("es5-ext/string/#/contains"),M=t("d"),T=t("es6-symbol"),e=t("./"),a=Object.defineProperty,i;i=B.exports=function(n,r){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");e.call(this,n),r?f.call(r,"key+value")?r="key+value":f.call(r,"key")?r="key":r="value":r="value",a(this,"__kind__",M("",r))},x&&x(i,e),delete i.prototype.constructor,i.prototype=Object.create(e.prototype,{_resolve:M(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),a(i.prototype,T.toStringTag,M("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(t,B,G){var x=t("es5-ext/function/is-arguments"),f=t("es5-ext/object/valid-callable"),M=t("es5-ext/string/is-string"),T=t("./get"),e=Array.isArray,a=Function.prototype.call,i=Array.prototype.some;B.exports=function(n,r){var v,s=arguments[2],o,b,g,d,c,m,l;if(e(n)||x(n)?v="array":M(n)?v="string":n=T(n),f(r),b=function(){g=!0},v==="array"){i.call(n,function(y){return a.call(r,s,y,b),g});return}if(v==="string"){for(c=n.length,d=0;d<c&&(m=n[d],d+1<c&&(l=m.charCodeAt(0),l>=55296&&l<=56319&&(m+=n[++d])),a.call(r,s,m,b),!g);++d);return}for(o=n.next();!o.done;){if(a.call(r,s,o.value,b),g)return;o=n.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(t,B,G){var x=t("es5-ext/function/is-arguments"),f=t("es5-ext/string/is-string"),M=t("./array"),T=t("./string"),e=t("./valid-iterable"),a=t("es6-symbol").iterator;B.exports=function(i){return typeof e(i)[a]=="function"?i[a]():x(i)?new M(i):f(i)?new T(i):new M(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(t,B,G){var x=t("es5-ext/array/#/clear"),f=t("es5-ext/object/assign"),M=t("es5-ext/object/valid-callable"),T=t("es5-ext/object/valid-value"),e=t("d"),a=t("d/auto-bind"),i=t("es6-symbol"),n=Object.defineProperty,r=Object.defineProperties,v;B.exports=v=function(s,o){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");r(this,{__list__:e("w",T(s)),__context__:e("w",o),__nextIndex__:e("w",0)}),o&&(M(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete v.prototype.constructor,r(v.prototype,f({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){n(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(o,b){o>=s&&(this.__redo__[b]=++o)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var o;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(o=this.__redo__.indexOf(s),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(b,g){b>s&&(this.__redo__[g]=--b)},this)))}),_onClear:e(function(){this.__redo__&&x.call(this.__redo__),this.__nextIndex__=0})}))),n(v.prototype,i.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(t,B,G){var x=t("es5-ext/function/is-arguments"),f=t("es5-ext/object/is-value"),M=t("es5-ext/string/is-string"),T=t("es6-symbol").iterator,e=Array.isArray;B.exports=function(a){return f(a)?e(a)||M(a)||x(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(t,B,G){var x=t("es5-ext/object/set-prototype-of"),f=t("d"),M=t("es6-symbol"),T=t("./"),e=Object.defineProperty,a;a=B.exports=function(i){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");i=String(i),T.call(this,i),e(this,"__length__",f("",i.length))},x&&x(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:f(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:f(function(i){var n=this.__list__[i],r;return this.__nextIndex__===this.__length__?n:(r=n.charCodeAt(0),r>=55296&&r<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),e(a.prototype,M.toStringTag,f("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(t,B,G){var x=t("./is-iterable");B.exports=function(f){if(!x(f))throw new TypeError(f+" is not iterable");return f}},{"./is-iterable":172}],175:[function(t,B,G){B.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(t,B,G){var x=t("ext/global-this"),f={object:!0,symbol:!0};B.exports=function(){var M=x.Symbol,T;if(typeof M!="function")return!1;T=M("test symbol");try{String(T)}catch{return!1}return!(!f[typeof M.iterator]||!f[typeof M.toPrimitive]||!f[typeof M.toStringTag])}},{"ext/global-this":188}],177:[function(t,B,G){B.exports=function(x){return x?typeof x=="symbol"?!0:!x.constructor||x.constructor.name!=="Symbol"?!1:x[x.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(t,B,G){var x=t("d"),f=Object.create,M=Object.defineProperty,T=Object.prototype,e=f(null);B.exports=function(a){for(var i=0,n,r;e[a+(i||"")];)++i;return a+=i||"",e[a]=!0,n="@@"+a,M(T,n,x.gs(null,function(v){r||(r=!0,M(this,n,x(v)),r=!1)})),n}},{d:106}],179:[function(t,B,G){var x=t("d"),f=t("ext/global-this").Symbol;B.exports=function(M){return Object.defineProperties(M,{hasInstance:x("",f&&f.hasInstance||M("hasInstance")),isConcatSpreadable:x("",f&&f.isConcatSpreadable||M("isConcatSpreadable")),iterator:x("",f&&f.iterator||M("iterator")),match:x("",f&&f.match||M("match")),replace:x("",f&&f.replace||M("replace")),search:x("",f&&f.search||M("search")),species:x("",f&&f.species||M("species")),split:x("",f&&f.split||M("split")),toPrimitive:x("",f&&f.toPrimitive||M("toPrimitive")),toStringTag:x("",f&&f.toStringTag||M("toStringTag")),unscopables:x("",f&&f.unscopables||M("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(t,B,G){var x=t("d"),f=t("../../../validate-symbol"),M=Object.create(null);B.exports=function(T){return Object.defineProperties(T,{for:x(function(e){return M[e]?M[e]:M[e]=T(String(e))}),keyFor:x(function(e){var a;f(e);for(a in M)if(M[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(t,B,G){var x=t("d"),f=t("./validate-symbol"),M=t("ext/global-this").Symbol,T=t("./lib/private/generate-name"),e=t("./lib/private/setup/standard-symbols"),a=t("./lib/private/setup/symbol-registry"),i=Object.create,n=Object.defineProperties,r=Object.defineProperty,v,s,o;if(typeof M=="function")try{String(M()),o=!0}catch{}else M=null;s=function(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return v(g)},B.exports=v=function b(g){var d;if(this instanceof b)throw new TypeError("Symbol is not a constructor");return o?M(g):(d=i(s.prototype),g=g===void 0?"":String(g),n(d,{__description__:x("",g),__name__:x("",T(g))}))},e(v),a(v),n(s.prototype,{constructor:x(v),toString:x("",function(){return this.__name__})}),n(v.prototype,{toString:x(function(){return"Symbol ("+f(this).__description__+")"}),valueOf:x(function(){return f(this)})}),r(v.prototype,v.toPrimitive,x("",function(){var b=f(this);return typeof b=="symbol"?b:b.toString()})),r(v.prototype,v.toStringTag,x("c","Symbol")),r(s.prototype,v.toStringTag,x("c",v.prototype[v.toStringTag])),r(s.prototype,v.toPrimitive,x("c",v.prototype[v.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(t,B,G){var x=t("./is-symbol");B.exports=function(f){if(!x(f))throw new TypeError(f+" is not a symbol");return f}},{"./is-symbol":177}],183:[function(t,B,G){B.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(t,B,G){B.exports=function(){var x,f;if(typeof WeakMap!="function")return!1;try{x=new WeakMap([[f={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(x)!=="[object WeakMap]"||typeof x.set!="function"||x.set({},1)!==x||typeof x.delete!="function"||typeof x.has!="function"||x.get(f)!=="one")}},{}],185:[function(t,B,G){B.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(t,B,G){var x=t("es5-ext/object/is-value"),f=t("es5-ext/object/set-prototype-of"),M=t("es5-ext/object/valid-object"),T=t("es5-ext/object/valid-value"),e=t("es5-ext/string/random-uniq"),a=t("d"),i=t("es6-iterator/get"),n=t("es6-iterator/for-of"),r=t("es6-symbol").toStringTag,v=t("./is-native-implemented"),s=Array.isArray,o=Object.defineProperty,b=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf,d;B.exports=d=function(){var c=arguments[0],m;if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return m=v&&f&&WeakMap!==d?f(new WeakMap,g(this)):this,x(c)&&(s(c)||(c=i(c))),o(m,"__weakMapData__",a("c","$weakMap$"+e())),c&&n(c,function(l){T(l),m.set(l[0],l[1])}),m},v&&(f&&f(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:a(d)})),Object.defineProperties(d.prototype,{delete:a(function(c){return b.call(M(c),this.__weakMapData__)?(delete c[this.__weakMapData__],!0):!1}),get:a(function(c){if(!!b.call(M(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:a(function(c){return b.call(M(c),this.__weakMapData__)}),set:a(function(c,m){return o(M(c),this.__weakMapData__,a("c",m)),this}),toString:a(function(){return"[object WeakMap]"})}),o(d.prototype,r,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(t,B,G){var x=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};B.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return x()}try{return __global__||x()}finally{delete Object.prototype.__global__}}()},{}],188:[function(t,B,G){B.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(t,B,G){B.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(t,B,G){var x=t("is-string-blank");B.exports=function(f){var M=typeof f;if(M==="string"){var T=f;if(f=+f,f===0&&x(T))return!1}else if(M!=="number")return!1;return f-f<1}},{"is-string-blank":237}],191:[function(t,B,G){var x=t("dtype");B.exports=f;function f(M,T,e){if(!M)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(M)&&M[0]&&typeof M[0][0]=="number"){var a=M[0].length,i=M.length*a,n,r,v,s;(!T||typeof T=="string")&&(T=new(x(T||"float32"))(i+e));var o=T.length-e;if(i!==o)throw new Error("source length "+i+" ("+a+"x"+M.length+") does not match destination length "+o);for(n=0,v=e;n<M.length;n++)for(r=0;r<a;r++)T[v++]=M[n][r]===null?NaN:M[n][r]}else if(!T||typeof T=="string"){var b=x(T||"float32");if(Array.isArray(M)||T==="array")for(T=new b(M.length+e),n=0,v=e,s=T.length;v<s;v++,n++)T[v]=M[n]===null?NaN:M[n];else e===0?T=new b(M):(T=new b(M.length+e),T.set(M,e))}else T.set(M,e);return T}},{dtype:127}],192:[function(t,B,G){var x=t("css-font/stringify"),f=[32,126];B.exports=M;function M(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),i=T.font,n=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],r=T.chars||f;if(i&&typeof i!="string"&&(i=x(i)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var v=[],s=r[0],o=0;s<=r[1];s++)v[o++]=String.fromCharCode(s);r=v}e=e.slice(),a.width=e[0],a.height=e[1];var b=a.getContext("2d");b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.font=i,b.textAlign="center",b.textBaseline="middle",b.fillStyle="#fff";for(var g=n[0]/2,d=n[1]/2,s=0;s<r.length;s++)b.fillText(r[s],g,d),(g+=n[0])>e[0]-n[0]/2&&(g=n[0]/2,d+=n[1]);return a}},{"css-font/stringify":102}],193:[function(t,B,G){B.exports=x,x.canvas=document.createElement("canvas"),x.cache={};function x(s,a){a||(a={}),(typeof s=="string"||Array.isArray(s))&&(a.family=s);var i=Array.isArray(a.family)?a.family.join(", "):a.family;if(!i)throw Error("`family` must be defined");var n=a.size||a.fontSize||a.em||48,r=a.weight||a.fontWeight||"",v=a.style||a.fontStyle||"",s=[v,r,n].join(" ")+"px "+i,o=a.origin||"top";if(x.cache[i]&&n<=x.cache[i].em)return f(x.cache[i],o);var b=a.canvas||x.canvas,g=b.getContext("2d"),d={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},c=Math.ceil(n*1.5);b.height=c,b.width=c*.5,g.font=s;var m="H",l={top:0};g.clearRect(0,0,c,c),g.textBaseline="top",g.fillStyle="black",g.fillText(m,0,0);var y=M(g.getImageData(0,0,c,c));g.clearRect(0,0,c,c),g.textBaseline="bottom",g.fillText(m,0,c);var u=M(g.getImageData(0,0,c,c));l.lineHeight=l.bottom=c-u+y,g.clearRect(0,0,c,c),g.textBaseline="alphabetic",g.fillText(m,0,c);var A=M(g.getImageData(0,0,c,c)),_=c-A-1+y;l.baseline=l.alphabetic=_,g.clearRect(0,0,c,c),g.textBaseline="middle",g.fillText(m,0,c*.5);var p=M(g.getImageData(0,0,c,c));l.median=l.middle=c-p-1+y-c*.5,g.clearRect(0,0,c,c),g.textBaseline="hanging",g.fillText(m,0,c*.5);var w=M(g.getImageData(0,0,c,c));l.hanging=c-w-1+y-c*.5,g.clearRect(0,0,c,c),g.textBaseline="ideographic",g.fillText(m,0,c);var h=M(g.getImageData(0,0,c,c));if(l.ideographic=c-h-1+y,d.upper&&(g.clearRect(0,0,c,c),g.textBaseline="top",g.fillText(d.upper,0,0),l.upper=M(g.getImageData(0,0,c,c)),l.capHeight=l.baseline-l.upper),d.lower&&(g.clearRect(0,0,c,c),g.textBaseline="top",g.fillText(d.lower,0,0),l.lower=M(g.getImageData(0,0,c,c)),l.xHeight=l.baseline-l.lower),d.tittle&&(g.clearRect(0,0,c,c),g.textBaseline="top",g.fillText(d.tittle,0,0),l.tittle=M(g.getImageData(0,0,c,c))),d.ascent&&(g.clearRect(0,0,c,c),g.textBaseline="top",g.fillText(d.ascent,0,0),l.ascent=M(g.getImageData(0,0,c,c))),d.descent&&(g.clearRect(0,0,c,c),g.textBaseline="top",g.fillText(d.descent,0,0),l.descent=T(g.getImageData(0,0,c,c))),d.overshoot){g.clearRect(0,0,c,c),g.textBaseline="top",g.fillText(d.overshoot,0,0);var L=T(g.getImageData(0,0,c,c));l.overshoot=L-_}for(var E in l)l[E]/=n;return l.em=n,x.cache[i]=l,f(l,o)}function f(e,a){var i={};typeof a=="string"&&(a=e[a]);for(var n in e)n!=="em"&&(i[n]=e[n]-a);return i}function M(e){for(var a=e.height,i=e.data,n=3;n<i.length;n+=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}function T(e){for(var a=e.height,i=e.data,n=i.length-1;n>0;n-=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}},{}],194:[function(t,B,G){B.exports=x;function x(f,M){if(typeof f!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var T=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(T.width=M.width),typeof M.height=="number"&&(T.height=M.height);var e=M,a;try{var i=[f];f.indexOf("webgl")===0&&i.push("experimental-"+f);for(var n=0;n<i.length;n++)if(a=T.getContext(i[n],e),a)return a}catch{a=null}return a||null}},{}],195:[function(t,B,G){B.exports=x;function x(f,M){var T=M[0],e=M[1],a=M[2],i=M[3],n=M[4],r=M[5],v=M[6],s=M[7],o=M[8],b=M[9],g=M[10],d=M[11],c=M[12],m=M[13],l=M[14],y=M[15];return f[0]=r*(g*y-d*l)-b*(v*y-s*l)+m*(v*d-s*g),f[1]=-(e*(g*y-d*l)-b*(a*y-i*l)+m*(a*d-i*g)),f[2]=e*(v*y-s*l)-r*(a*y-i*l)+m*(a*s-i*v),f[3]=-(e*(v*d-s*g)-r*(a*d-i*g)+b*(a*s-i*v)),f[4]=-(n*(g*y-d*l)-o*(v*y-s*l)+c*(v*d-s*g)),f[5]=T*(g*y-d*l)-o*(a*y-i*l)+c*(a*d-i*g),f[6]=-(T*(v*y-s*l)-n*(a*y-i*l)+c*(a*s-i*v)),f[7]=T*(v*d-s*g)-n*(a*d-i*g)+o*(a*s-i*v),f[8]=n*(b*y-d*m)-o*(r*y-s*m)+c*(r*d-s*b),f[9]=-(T*(b*y-d*m)-o*(e*y-i*m)+c*(e*d-i*b)),f[10]=T*(r*y-s*m)-n*(e*y-i*m)+c*(e*s-i*r),f[11]=-(T*(r*d-s*b)-n*(e*d-i*b)+o*(e*s-i*r)),f[12]=-(n*(b*l-g*m)-o*(r*l-v*m)+c*(r*g-v*b)),f[13]=T*(b*l-g*m)-o*(e*l-a*m)+c*(e*g-a*b),f[14]=-(T*(r*l-v*m)-n*(e*l-a*m)+c*(e*v-a*r)),f[15]=T*(r*g-v*b)-n*(e*g-a*b)+o*(e*v-a*r),f}},{}],196:[function(t,B,G){B.exports=x;function x(f){var M=new Float32Array(16);return M[0]=f[0],M[1]=f[1],M[2]=f[2],M[3]=f[3],M[4]=f[4],M[5]=f[5],M[6]=f[6],M[7]=f[7],M[8]=f[8],M[9]=f[9],M[10]=f[10],M[11]=f[11],M[12]=f[12],M[13]=f[13],M[14]=f[14],M[15]=f[15],M}},{}],197:[function(t,B,G){B.exports=x;function x(f,M){return f[0]=M[0],f[1]=M[1],f[2]=M[2],f[3]=M[3],f[4]=M[4],f[5]=M[5],f[6]=M[6],f[7]=M[7],f[8]=M[8],f[9]=M[9],f[10]=M[10],f[11]=M[11],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15],f}},{}],198:[function(t,B,G){B.exports=x;function x(){var f=new Float32Array(16);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],199:[function(t,B,G){B.exports=x;function x(f){var M=f[0],T=f[1],e=f[2],a=f[3],i=f[4],n=f[5],r=f[6],v=f[7],s=f[8],o=f[9],b=f[10],g=f[11],d=f[12],c=f[13],m=f[14],l=f[15],y=M*n-T*i,u=M*r-e*i,A=M*v-a*i,_=T*r-e*n,p=T*v-a*n,w=e*v-a*r,h=s*c-o*d,L=s*m-b*d,E=s*l-g*d,S=o*m-b*c,P=o*l-g*c,F=b*l-g*m;return y*F-u*P+A*S+_*E-p*L+w*h}},{}],200:[function(t,B,G){B.exports=x;function x(f,M){var T=M[0],e=M[1],a=M[2],i=M[3],n=T+T,r=e+e,v=a+a,s=T*n,o=e*n,b=e*r,g=a*n,d=a*r,c=a*v,m=i*n,l=i*r,y=i*v;return f[0]=1-b-c,f[1]=o+y,f[2]=g-l,f[3]=0,f[4]=o-y,f[5]=1-s-c,f[6]=d+m,f[7]=0,f[8]=g+l,f[9]=d-m,f[10]=1-s-b,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],201:[function(t,B,G){B.exports=x;function x(f,M,T){var e,a,i,n=T[0],r=T[1],v=T[2],s=Math.sqrt(n*n+r*r+v*v);return Math.abs(s)<1e-6?null:(s=1/s,n*=s,r*=s,v*=s,e=Math.sin(M),a=Math.cos(M),i=1-a,f[0]=n*n*i+a,f[1]=r*n*i+v*e,f[2]=v*n*i-r*e,f[3]=0,f[4]=n*r*i-v*e,f[5]=r*r*i+a,f[6]=v*r*i+n*e,f[7]=0,f[8]=n*v*i+r*e,f[9]=r*v*i-n*e,f[10]=v*v*i+a,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f)}},{}],202:[function(t,B,G){B.exports=x;function x(f,M,T){var e=M[0],a=M[1],i=M[2],n=M[3],r=e+e,v=a+a,s=i+i,o=e*r,b=e*v,g=e*s,d=a*v,c=a*s,m=i*s,l=n*r,y=n*v,u=n*s;return f[0]=1-(d+m),f[1]=b+u,f[2]=g-y,f[3]=0,f[4]=b-u,f[5]=1-(o+m),f[6]=c+l,f[7]=0,f[8]=g+y,f[9]=c-l,f[10]=1-(o+d),f[11]=0,f[12]=T[0],f[13]=T[1],f[14]=T[2],f[15]=1,f}},{}],203:[function(t,B,G){B.exports=x;function x(f,M){return f[0]=M[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=M[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=M[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],204:[function(t,B,G){B.exports=x;function x(f,M){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=M[0],f[13]=M[1],f[14]=M[2],f[15]=1,f}},{}],205:[function(t,B,G){B.exports=x;function x(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=e,f[6]=T,f[7]=0,f[8]=0,f[9]=-T,f[10]=e,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],206:[function(t,B,G){B.exports=x;function x(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=e,f[1]=0,f[2]=-T,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=T,f[9]=0,f[10]=e,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],207:[function(t,B,G){B.exports=x;function x(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=e,f[1]=T,f[2]=0,f[3]=0,f[4]=-T,f[5]=e,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],208:[function(t,B,G){B.exports=x;function x(f,M,T,e,a,i,n){var r=1/(T-M),v=1/(a-e),s=1/(i-n);return f[0]=i*2*r,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=i*2*v,f[6]=0,f[7]=0,f[8]=(T+M)*r,f[9]=(a+e)*v,f[10]=(n+i)*s,f[11]=-1,f[12]=0,f[13]=0,f[14]=n*i*2*s,f[15]=0,f}},{}],209:[function(t,B,G){B.exports=x;function x(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],210:[function(t,B,G){B.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(t,B,G){B.exports=x;function x(f,M){var T=M[0],e=M[1],a=M[2],i=M[3],n=M[4],r=M[5],v=M[6],s=M[7],o=M[8],b=M[9],g=M[10],d=M[11],c=M[12],m=M[13],l=M[14],y=M[15],u=T*r-e*n,A=T*v-a*n,_=T*s-i*n,p=e*v-a*r,w=e*s-i*r,h=a*s-i*v,L=o*m-b*c,E=o*l-g*c,S=o*y-d*c,P=b*l-g*m,F=b*y-d*m,I=g*y-d*l,D=u*I-A*F+_*P+p*S-w*E+h*L;return D?(D=1/D,f[0]=(r*I-v*F+s*P)*D,f[1]=(a*F-e*I-i*P)*D,f[2]=(m*h-l*w+y*p)*D,f[3]=(g*w-b*h-d*p)*D,f[4]=(v*S-n*I-s*E)*D,f[5]=(T*I-a*S+i*E)*D,f[6]=(l*_-c*h-y*A)*D,f[7]=(o*h-g*_+d*A)*D,f[8]=(n*F-r*S+s*L)*D,f[9]=(e*S-T*F-i*L)*D,f[10]=(c*w-m*_+y*u)*D,f[11]=(b*_-o*w-d*u)*D,f[12]=(r*E-n*P-v*L)*D,f[13]=(T*P-e*E+a*L)*D,f[14]=(m*A-c*p-l*u)*D,f[15]=(o*p-b*A+g*u)*D,f):null}},{}],212:[function(t,B,G){var x=t("./identity");B.exports=f;function f(M,T,e,a){var i,n,r,v,s,o,b,g,d,c,m=T[0],l=T[1],y=T[2],u=a[0],A=a[1],_=a[2],p=e[0],w=e[1],h=e[2];return Math.abs(m-p)<1e-6&&Math.abs(l-w)<1e-6&&Math.abs(y-h)<1e-6?x(M):(b=m-p,g=l-w,d=y-h,c=1/Math.sqrt(b*b+g*g+d*d),b*=c,g*=c,d*=c,i=A*d-_*g,n=_*b-u*d,r=u*g-A*b,c=Math.sqrt(i*i+n*n+r*r),c?(c=1/c,i*=c,n*=c,r*=c):(i=0,n=0,r=0),v=g*r-d*n,s=d*i-b*r,o=b*n-g*i,c=Math.sqrt(v*v+s*s+o*o),c?(c=1/c,v*=c,s*=c,o*=c):(v=0,s=0,o=0),M[0]=i,M[1]=v,M[2]=b,M[3]=0,M[4]=n,M[5]=s,M[6]=g,M[7]=0,M[8]=r,M[9]=o,M[10]=d,M[11]=0,M[12]=-(i*m+n*l+r*y),M[13]=-(v*m+s*l+o*y),M[14]=-(b*m+g*l+d*y),M[15]=1,M)}},{"./identity":209}],213:[function(t,B,G){B.exports=x;function x(f,M,T){var e=M[0],a=M[1],i=M[2],n=M[3],r=M[4],v=M[5],s=M[6],o=M[7],b=M[8],g=M[9],d=M[10],c=M[11],m=M[12],l=M[13],y=M[14],u=M[15],A=T[0],_=T[1],p=T[2],w=T[3];return f[0]=A*e+_*r+p*b+w*m,f[1]=A*a+_*v+p*g+w*l,f[2]=A*i+_*s+p*d+w*y,f[3]=A*n+_*o+p*c+w*u,A=T[4],_=T[5],p=T[6],w=T[7],f[4]=A*e+_*r+p*b+w*m,f[5]=A*a+_*v+p*g+w*l,f[6]=A*i+_*s+p*d+w*y,f[7]=A*n+_*o+p*c+w*u,A=T[8],_=T[9],p=T[10],w=T[11],f[8]=A*e+_*r+p*b+w*m,f[9]=A*a+_*v+p*g+w*l,f[10]=A*i+_*s+p*d+w*y,f[11]=A*n+_*o+p*c+w*u,A=T[12],_=T[13],p=T[14],w=T[15],f[12]=A*e+_*r+p*b+w*m,f[13]=A*a+_*v+p*g+w*l,f[14]=A*i+_*s+p*d+w*y,f[15]=A*n+_*o+p*c+w*u,f}},{}],214:[function(t,B,G){B.exports=x;function x(f,M,T,e,a,i,n){var r=1/(M-T),v=1/(e-a),s=1/(i-n);return f[0]=-2*r,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*v,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*s,f[11]=0,f[12]=(M+T)*r,f[13]=(a+e)*v,f[14]=(n+i)*s,f[15]=1,f}},{}],215:[function(t,B,G){B.exports=x;function x(f,M,T,e,a){var i=1/Math.tan(M/2),n=1/(e-a);return f[0]=i/T,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=i,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=(a+e)*n,f[11]=-1,f[12]=0,f[13]=0,f[14]=2*a*e*n,f[15]=0,f}},{}],216:[function(t,B,G){B.exports=x;function x(f,M,T,e){var a=Math.tan(M.upDegrees*Math.PI/180),i=Math.tan(M.downDegrees*Math.PI/180),n=Math.tan(M.leftDegrees*Math.PI/180),r=Math.tan(M.rightDegrees*Math.PI/180),v=2/(n+r),s=2/(a+i);return f[0]=v,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=s,f[6]=0,f[7]=0,f[8]=-((n-r)*v*.5),f[9]=(a-i)*s*.5,f[10]=e/(T-e),f[11]=-1,f[12]=0,f[13]=0,f[14]=e*T/(T-e),f[15]=0,f}},{}],217:[function(t,B,G){B.exports=x;function x(f,M,T,e){var a=e[0],i=e[1],n=e[2],r=Math.sqrt(a*a+i*i+n*n),v,s,o,b,g,d,c,m,l,y,u,A,_,p,w,h,L,E,S,P,F,I,D,R;return Math.abs(r)<1e-6?null:(r=1/r,a*=r,i*=r,n*=r,v=Math.sin(T),s=Math.cos(T),o=1-s,b=M[0],g=M[1],d=M[2],c=M[3],m=M[4],l=M[5],y=M[6],u=M[7],A=M[8],_=M[9],p=M[10],w=M[11],h=a*a*o+s,L=i*a*o+n*v,E=n*a*o-i*v,S=a*i*o-n*v,P=i*i*o+s,F=n*i*o+a*v,I=a*n*o+i*v,D=i*n*o-a*v,R=n*n*o+s,f[0]=b*h+m*L+A*E,f[1]=g*h+l*L+_*E,f[2]=d*h+y*L+p*E,f[3]=c*h+u*L+w*E,f[4]=b*S+m*P+A*F,f[5]=g*S+l*P+_*F,f[6]=d*S+y*P+p*F,f[7]=c*S+u*P+w*F,f[8]=b*I+m*D+A*R,f[9]=g*I+l*D+_*R,f[10]=d*I+y*D+p*R,f[11]=c*I+u*D+w*R,M!==f&&(f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f)}},{}],218:[function(t,B,G){B.exports=x;function x(f,M,T){var e=Math.sin(T),a=Math.cos(T),i=M[4],n=M[5],r=M[6],v=M[7],s=M[8],o=M[9],b=M[10],g=M[11];return M!==f&&(f[0]=M[0],f[1]=M[1],f[2]=M[2],f[3]=M[3],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[4]=i*a+s*e,f[5]=n*a+o*e,f[6]=r*a+b*e,f[7]=v*a+g*e,f[8]=s*a-i*e,f[9]=o*a-n*e,f[10]=b*a-r*e,f[11]=g*a-v*e,f}},{}],219:[function(t,B,G){B.exports=x;function x(f,M,T){var e=Math.sin(T),a=Math.cos(T),i=M[0],n=M[1],r=M[2],v=M[3],s=M[8],o=M[9],b=M[10],g=M[11];return M!==f&&(f[4]=M[4],f[5]=M[5],f[6]=M[6],f[7]=M[7],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[0]=i*a-s*e,f[1]=n*a-o*e,f[2]=r*a-b*e,f[3]=v*a-g*e,f[8]=i*e+s*a,f[9]=n*e+o*a,f[10]=r*e+b*a,f[11]=v*e+g*a,f}},{}],220:[function(t,B,G){B.exports=x;function x(f,M,T){var e=Math.sin(T),a=Math.cos(T),i=M[0],n=M[1],r=M[2],v=M[3],s=M[4],o=M[5],b=M[6],g=M[7];return M!==f&&(f[8]=M[8],f[9]=M[9],f[10]=M[10],f[11]=M[11],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[0]=i*a+s*e,f[1]=n*a+o*e,f[2]=r*a+b*e,f[3]=v*a+g*e,f[4]=s*a-i*e,f[5]=o*a-n*e,f[6]=b*a-r*e,f[7]=g*a-v*e,f}},{}],221:[function(t,B,G){B.exports=x;function x(f,M,T){var e=T[0],a=T[1],i=T[2];return f[0]=M[0]*e,f[1]=M[1]*e,f[2]=M[2]*e,f[3]=M[3]*e,f[4]=M[4]*a,f[5]=M[5]*a,f[6]=M[6]*a,f[7]=M[7]*a,f[8]=M[8]*i,f[9]=M[9]*i,f[10]=M[10]*i,f[11]=M[11]*i,f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15],f}},{}],222:[function(t,B,G){B.exports=x;function x(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}},{}],223:[function(t,B,G){B.exports=x;function x(f,M,T){var e=T[0],a=T[1],i=T[2],n,r,v,s,o,b,g,d,c,m,l,y;return M===f?(f[12]=M[0]*e+M[4]*a+M[8]*i+M[12],f[13]=M[1]*e+M[5]*a+M[9]*i+M[13],f[14]=M[2]*e+M[6]*a+M[10]*i+M[14],f[15]=M[3]*e+M[7]*a+M[11]*i+M[15]):(n=M[0],r=M[1],v=M[2],s=M[3],o=M[4],b=M[5],g=M[6],d=M[7],c=M[8],m=M[9],l=M[10],y=M[11],f[0]=n,f[1]=r,f[2]=v,f[3]=s,f[4]=o,f[5]=b,f[6]=g,f[7]=d,f[8]=c,f[9]=m,f[10]=l,f[11]=y,f[12]=n*e+o*a+c*i+M[12],f[13]=r*e+b*a+m*i+M[13],f[14]=v*e+g*a+l*i+M[14],f[15]=s*e+d*a+y*i+M[15]),f}},{}],224:[function(t,B,G){B.exports=x;function x(f,M){if(f===M){var T=M[1],e=M[2],a=M[3],i=M[6],n=M[7],r=M[11];f[1]=M[4],f[2]=M[8],f[3]=M[12],f[4]=T,f[6]=M[9],f[7]=M[13],f[8]=e,f[9]=i,f[11]=M[14],f[12]=a,f[13]=n,f[14]=r}else f[0]=M[0],f[1]=M[4],f[2]=M[8],f[3]=M[12],f[4]=M[1],f[5]=M[5],f[6]=M[9],f[7]=M[13],f[8]=M[2],f[9]=M[6],f[10]=M[10],f[11]=M[14],f[12]=M[3],f[13]=M[7],f[14]=M[11],f[15]=M[15];return f}},{}],225:[function(t,B,G){var x=t("css-font"),f=t("pick-by-alias"),M=t("regl"),T=t("gl-util/context"),e=t("es6-weak-map"),a=t("color-normalize"),i=t("font-atlas"),n=t("typedarray-pool"),r=t("parse-rect"),v=t("is-plain-obj"),s=t("parse-unit"),o=t("to-px"),b=t("detect-kerning"),g=t("object-assign"),d=t("font-measure"),c=t("flatten-vertex-data"),m=t("bit-twiddle"),l=m.nextPow2,y=new e,u=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(u=!0),document.body.removeChild(A)}var _=function(h){p(h)?(h={regl:h},this.gl=h.regl._gl):this.gl=T(h),this.shader=y.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=h.regl||M({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),y.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(v(h)?h:{})};_.prototype.createShader=function(){var h=this.regl,L=h({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:h.prop("count"),offset:h.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:h.this("sizeBuffer")},width:{offset:0,stride:8,buffer:h.this("sizeBuffer")},char:h.this("charBuffer"),position:h.this("position")},uniforms:{atlasSize:function(S,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(S,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(S,P){return P.atlas.texture},charStep:function(S,P){return P.atlas.step},em:function(S,P){return P.atlas.em},color:h.prop("color"),opacity:h.prop("opacity"),viewport:h.this("viewportArray"),scale:h.this("scale"),align:h.prop("align"),baseline:h.prop("baseline"),translate:h.this("translate"),positionOffset:h.prop("positionOffset")},primitive:"points",viewport:h.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),E={};return{regl:h,draw:L,atlas:E}},_.prototype.update=function(h){var L=this;if(typeof h=="string")h={text:h};else if(!h)return;h=f(h,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),h.opacity!=null&&(Array.isArray(h.opacity)?this.opacity=h.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(h.opacity)),h.viewport!=null&&(this.viewport=r(h.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),h.kerning!=null&&(this.kerning=h.kerning),h.offset!=null&&(typeof h.offset=="number"&&(h.offset=[h.offset,0]),this.positionOffset=c(h.offset)),h.direction&&(this.direction=h.direction),h.range&&(this.range=h.range,this.scale=[1/(h.range[2]-h.range[0]),1/(h.range[3]-h.range[1])],this.translate=[-h.range[0],-h.range[1]]),h.scale&&(this.scale=h.scale),h.translate&&(this.translate=h.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!h.font&&(h.font=_.baseFontSize+"px sans-serif");var E=!1,S=!1;if(h.font&&(Array.isArray(h.font)?h.font:[h.font]).forEach(function(Ae,Ce){if(typeof Ae=="string")try{Ae=x.parse(Ae)}catch{Ae=x.parse(_.baseFontSize+"px "+Ae)}else Ae=x.parse(x.stringify(Ae));var Ze=x.stringify({size:_.baseFontSize,family:Ae.family,stretch:u?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),Ye=s(Ae.size),ze=Math.round(Ye[0]*o(Ye[1]));if(ze!==L.fontSize[Ce]&&(S=!0,L.fontSize[Ce]=ze),(!L.font[Ce]||Ze!=L.font[Ce].baseString)&&(E=!0,L.font[Ce]=_.fonts[Ze],!L.font[Ce])){var Ie=Ae.family.join(", "),Ge=[Ae.style];Ae.style!=Ae.variant&&Ge.push(Ae.variant),Ae.variant!=Ae.weight&&Ge.push(Ae.weight),u&&Ae.weight!=Ae.stretch&&Ge.push(Ae.stretch),L.font[Ce]={baseString:Ze,family:Ie,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:d(Ie,{origin:"top",fontSize:_.baseFontSize,fontStyle:Ge.join(" ")})},_.fonts[Ze]=L.font[Ce]}}),(E||S)&&this.font.forEach(function(Ae,Ce){var Ze=x.stringify({size:L.fontSize[Ce],family:Ae.family,stretch:u?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(L.fontAtlas[Ce]=L.shader.atlas[Ze],!L.fontAtlas[Ce]){var Ye=Ae.metrics;L.shader.atlas[Ze]=L.fontAtlas[Ce]={fontString:Ze,step:Math.ceil(L.fontSize[Ce]*Ye.bottom*.5)*2,em:L.fontSize[Ce],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}h.text==null&&(h.text=L.text)}),typeof h.text=="string"&&h.position&&h.position.length>2){for(var P=Array(h.position.length*.5),F=0;F<P.length;F++)P[F]=h.text;h.text=P}var I;if(h.text!=null||E){if(this.textOffsets=[0],Array.isArray(h.text)){this.count=h.text[0].length,this.counts=[this.count];for(var D=1;D<h.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+h.text[D-1].length,this.count+=h.text[D].length,this.counts.push(h.text[D].length);this.text=h.text.join("")}else this.text=h.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(Ae,Ce){_.atlasContext.font=Ae.baseString;for(var Ze=L.fontAtlas[Ce],Ye=0;Ye<L.text.length;Ye++){var ze=L.text.charAt(Ye);if(Ze.ids[ze]==null&&(Ze.ids[ze]=Ze.chars.length,Ze.chars.push(ze),I.push(ze)),Ae.width[ze]==null&&(Ae.width[ze]=_.atlasContext.measureText(ze).width/_.baseFontSize,L.kerning)){var Ie=[];for(var Ge in Ae.width)Ie.push(Ge+ze,ze+Ge);g(Ae.kerning,b(Ae.family,{pairs:Ie}))}}})}if(h.position)if(h.position.length>2){for(var R=!h.position[0].length,O=n.mallocFloat(this.count*2),z=0,H=0;z<this.counts.length;z++){var Y=this.counts[z];if(R)for(var ee=0;ee<Y;ee++)O[H++]=h.position[z*2],O[H++]=h.position[z*2+1];else for(var j=0;j<Y;j++)O[H++]=h.position[z][0],O[H++]=h.position[z][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),n.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:h.position};if(h.text||E){var X=n.mallocUint8(this.count),ae=n.mallocFloat(this.count*2);this.textWidth=[];for(var fe=0,K=0;fe<this.counts.length;fe++){for(var J=this.counts[fe],U=this.font[fe]||this.font[0],V=this.fontAtlas[fe]||this.fontAtlas[0],q=0;q<J;q++){var re=this.text.charAt(K),Z=this.text.charAt(K-1);if(X[K]=V.ids[re],ae[K*2]=U.width[re],q){var Q=ae[K*2-2],ie=ae[K*2],oe=ae[K*2-1],ne=oe+Q*.5+ie*.5;if(this.kerning){var se=U.kerning[Z+re];se&&(ne+=se*.001)}ae[K*2+1]=ne}else ae[K*2+1]=ae[K*2]*.5;K++}this.textWidth.push(ae.length?ae[K*2-2]*.5+ae[K*2-1]:0)}h.align||(h.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ae,type:"float",usage:"stream"}),n.freeUint8(X),n.freeFloat(ae),I.length&&this.font.forEach(function(Ae,Ce){var Ze=L.fontAtlas[Ce],Ye=Ze.step,ze=Math.floor(_.maxAtlasSize/Ye),Ie=Math.min(ze,Ze.chars.length),Ge=Math.ceil(Ze.chars.length/Ie),dt=l(Ie*Ye),Rt=l(Ge*Ye);Ze.width=dt,Ze.height=Rt,Ze.rows=Ge,Ze.cols=Ie,Ze.em&&Ze.texture({data:i({canvas:_.atlasCanvas,font:Ze.fontString,chars:Ze.chars,shape:[dt,Rt],step:[Ye,Ye]})})})}if(h.align&&(this.align=h.align,this.alignOffset=this.textWidth.map(function(Ae,Ce){var Ze=Array.isArray(L.align)?L.align.length>1?L.align[Ce]:L.align[0]:L.align;if(typeof Ze=="number")return Ze;switch(Ze){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&h.baseline==null&&(h.baseline=0),h.baseline!=null&&(this.baseline=h.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Ce){var Ze=(L.font[Ce]||L.font[0]).metrics,Ye=0;return Ye+=Ze.bottom*.5,typeof Ae=="number"?Ye+=Ae-Ze.baseline:Ye+=-Ze[Ae],Ye*=-1,Ye})),h.color!=null)if(h.color||(h.color="transparent"),typeof h.color=="string"||!isNaN(h.color))this.color=a(h.color,"uint8");else{var _e;if(typeof h.color[0]=="number"&&h.color.length>this.counts.length){var ue=h.color.length;_e=n.mallocUint8(ue);for(var ge=(h.color.subarray||h.color.slice).bind(h.color),xe=0;xe<ue;xe+=4)_e.set(a(ge(xe,xe+4),"uint8"),xe)}else{var ye=h.color.length;_e=n.mallocUint8(ye*4);for(var be=0;be<ye;be++)_e.set(a(h.color[be]||0,"uint8"),be*4)}this.color=_e}if(h.position||h.text||h.color||h.baseline||h.align||h.font||h.offset||h.opacity){var Se=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Se){var Re=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Re);for(var Ve=0;Ve<this.batch.length;Ve++)this.batch[Ve]={count:this.counts.length>1?this.counts[Ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ve*4,Ve*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ve]:this.opacity,baseline:this.baselineOffset[Ve]!=null?this.baselineOffset[Ve]:this.baselineOffset[0],align:this.align?this.alignOffset[Ve]!=null?this.alignOffset[Ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ve*2,Ve*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={};function p(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer}B.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(t,B,G){(function(x){(function(){var f=t("pick-by-alias");B.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},T(r)?r={container:r}:e(r)?r={container:r}:a(r)?r={gl:r}:r=f(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=x.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var v=document.querySelector(r.container);if(!v)throw Error("Element "+r.container+" is not found");r.container=v}T(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=i(),r.container.appendChild(r.canvas),M(r))}else if(!r.canvas)if(typeof document<"u")r.container=document.body||document.documentElement,r.canvas=i(),r.container.appendChild(r.canvas),M(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{r.gl=r.canvas.getContext(s,r.attrs)}catch{}return r.gl}),r.gl};function M(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*x.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*x.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function T(n){return typeof n.getContext=="function"&&"width"in n&&"height"in n}function e(n){return typeof n.nodeName=="string"&&typeof n.appendChild=="function"&&typeof n.getBoundingClientRect=="function"}function a(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}function i(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(t,B,G){B.exports=function(x){typeof x=="string"&&(x=[x]);for(var f=[].slice.call(arguments,1),M=[],T=0;T<x.length-1;T++)M.push(x[T],f[T]||"");return M.push(x[T]),M.join("")}},{}],228:[function(t,B,G){(function(x){(function(){var f=t("is-browser"),M;typeof x.matchMedia=="function"?M=!x.matchMedia("(hover: none)").matches:M=f,B.exports=M}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(t,B,G){var x=t("is-browser");function f(){var M=!1;try{var T=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{M=!1}return M}B.exports=x&&f()},{"is-browser":232}],230:[function(t,B,G){G.read=function(x,f,M,T,e){var a,i,n=e*8-T-1,r=(1<<n)-1,v=r>>1,s=-7,o=M?e-1:0,b=M?-1:1,g=x[f+o];for(o+=b,a=g&(1<<-s)-1,g>>=-s,s+=n;s>0;a=a*256+x[f+o],o+=b,s-=8);for(i=a&(1<<-s)-1,a>>=-s,s+=T;s>0;i=i*256+x[f+o],o+=b,s-=8);if(a===0)a=1-v;else{if(a===r)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,T),a=a-v}return(g?-1:1)*i*Math.pow(2,a-T)},G.write=function(x,f,M,T,e,a){var i,n,r,v=a*8-e-1,s=(1<<v)-1,o=s>>1,b=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=T?0:a-1,d=T?1:-1,c=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(n=isNaN(f)?1:0,i=s):(i=Math.floor(Math.log(f)/Math.LN2),f*(r=Math.pow(2,-i))<1&&(i--,r*=2),i+o>=1?f+=b/r:f+=b*Math.pow(2,1-o),f*r>=2&&(i++,r/=2),i+o>=s?(n=0,i=s):i+o>=1?(n=(f*r-1)*Math.pow(2,e),i=i+o):(n=f*Math.pow(2,o-1)*Math.pow(2,e),i=0));e>=8;x[M+g]=n&255,g+=d,n/=256,e-=8);for(i=i<<e|n,v+=e;v>0;x[M+g]=i&255,g+=d,i/=256,v-=8);x[M+g-d]|=c*128}},{}],231:[function(t,B,G){typeof Object.create=="function"?B.exports=function(f,M){M&&(f.super_=M,f.prototype=Object.create(M.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:B.exports=function(f,M){if(M){f.super_=M;var T=function(){};T.prototype=M.prototype,f.prototype=new T,f.prototype.constructor=f}}},{}],232:[function(t,B,G){B.exports=!0},{}],233:[function(t,B,G){B.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(t,B,G){B.exports=M,B.exports.isMobile=M,B.exports.default=M;var x=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,f=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function M(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?f.test(e):x.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(t,B,G){B.exports=function(x){var f=typeof x;return x!==null&&(f==="object"||f==="function")}},{}],236:[function(t,B,G){var x=Object.prototype.toString;B.exports=function(f){var M;return x.call(f)==="[object Object]"&&(M=Object.getPrototypeOf(f),M===null||M===Object.getPrototypeOf({}))}},{}],237:[function(t,B,G){B.exports=function(x){for(var f=x.length,M,T=0;T<f;T++)if(M=x.charCodeAt(T),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},{}],238:[function(t,B,G){B.exports=function(f){return typeof f!="string"?!1:(f=f.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(f)&&/[\dz]$/i.test(f)&&f.length>4))}},{}],239:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?B.exports=f():(x=x||self,x.mapboxgl=f())})(this,function(){var x,f,M;function T(e,a){if(!x)x=a;else if(!f)f=a;else{var i="var sharedChunk = {}; ("+x+")(sharedChunk); ("+f+")(sharedChunk);",n={};x(n),M=a(n),M.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(k,C){return C={exports:{}},k(C,C.exports),C.exports}var i="1.10.1",n=r;function r(k,C,N,te){this.cx=3*k,this.bx=3*(N-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(te-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=te,this.p2x=N,this.p2y=te}r.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},r.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},r.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},r.prototype.solveCurveX=function(k,C){typeof C>"u"&&(C=1e-6);var N,te,he,we,Me;for(he=k,Me=0;Me<8;Me++){if(we=this.sampleCurveX(he)-k,Math.abs(we)<C)return he;var Ne=this.sampleCurveDerivativeX(he);if(Math.abs(Ne)<1e-6)break;he=he-we/Ne}if(N=0,te=1,he=k,he<N)return N;if(he>te)return te;for(;N<te;){if(we=this.sampleCurveX(he),Math.abs(we-k)<C)return he;k>we?N=he:te=he,he=(te-N)*.5+N}return he},r.prototype.solve=function(k,C){return this.sampleCurveY(this.solveCurveX(k,C))};var v=s;function s(k,C){this.x=k,this.y=C}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,C){return this.clone()._rotateAround(k,C)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var C=k.x-this.x,N=k.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,C){return Math.atan2(this.x*C-this.y*k,this.x*k+this.y*C)},_matMult:function(k){var C=k[0]*this.x+k[1]*this.y,N=k[2]*this.x+k[3]*this.y;return this.x=C,this.y=N,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var C=Math.cos(k),N=Math.sin(k),te=C*this.x-N*this.y,he=N*this.x+C*this.y;return this.x=te,this.y=he,this},_rotateAround:function(k,C){var N=Math.cos(k),te=Math.sin(k),he=C.x+N*(this.x-C.x)-te*(this.y-C.y),we=C.y+te*(this.x-C.x)+N*(this.y-C.y);return this.x=he,this.y=we,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(k){return k instanceof s?k:Array.isArray(k)?new s(k[0],k[1]):k};function o(k,C){if(Array.isArray(k)){if(!Array.isArray(C)||k.length!==C.length)return!1;for(var N=0;N<k.length;N++)if(!o(k[N],C[N]))return!1;return!0}if(typeof k=="object"&&k!==null&&C!==null){if(typeof C!="object")return!1;var te=Object.keys(k);if(te.length!==Object.keys(C).length)return!1;for(var he in k)if(!o(k[he],C[he]))return!1;return!0}return k===C}function b(k){if(k<=0)return 0;if(k>=1)return 1;var C=k*k,N=C*k;return 4*(k<.5?N:3*(k-C)+N-.75)}function g(k,C,N,te){var he=new n(k,C,N,te);return function(we){return he.solve(we)}}var d=g(.25,.1,.25,1);function c(k,C,N){return Math.min(N,Math.max(C,k))}function m(k,C,N){var te=N-C,he=((k-C)%te+te)%te+C;return he===C?N:he}function l(k,C,N){if(!k.length)return N(null,[]);var te=k.length,he=new Array(k.length),we=null;k.forEach(function(Me,Ne){C(Me,function(tt,vt){tt&&(we=tt),he[Ne]=vt,--te===0&&N(we,he)})})}function y(k){var C=[];for(var N in k)C.push(k[N]);return C}function u(k,C){var N=[];for(var te in k)te in C||N.push(te);return N}function A(k){for(var C=[],N=arguments.length-1;N-- >0;)C[N]=arguments[N+1];for(var te=0,he=C;te<he.length;te+=1){var we=he[te];for(var Me in we)k[Me]=we[Me]}return k}function _(k,C){for(var N={},te=0;te<C.length;te++){var he=C[te];he in k&&(N[he]=k[he])}return N}var p=1;function w(){return p++}function h(){function k(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,k)}return k()}function L(k){return k?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(k):!1}function E(k,C){k.forEach(function(N){!C[N]||(C[N]=C[N].bind(C))})}function S(k,C){return k.indexOf(C,k.length-C.length)!==-1}function P(k,C,N){var te={};for(var he in k)te[he]=C.call(N||this,k[he],he,k);return te}function F(k,C,N){var te={};for(var he in k)C.call(N||this,k[he],he,k)&&(te[he]=k[he]);return te}function I(k){return Array.isArray(k)?k.map(I):typeof k=="object"&&k?P(k,I):k}function D(k,C){for(var N=0;N<k.length;N++)if(C.indexOf(k[N])>=0)return!0;return!1}var R={};function O(k){R[k]||(typeof console<"u"&&console.warn(k),R[k]=!0)}function z(k,C,N){return(N.y-k.y)*(C.x-k.x)>(C.y-k.y)*(N.x-k.x)}function H(k){for(var C=0,N=0,te=k.length,he=te-1,we=void 0,Me=void 0;N<te;he=N++)we=k[N],Me=k[he],C+=(Me.x-we.x)*(we.y+Me.y);return C}function Y(k){var C=k[0],N=k[1],te=k[2];return N+=90,N*=Math.PI/180,te*=Math.PI/180,{x:C*Math.cos(N)*Math.sin(te),y:C*Math.sin(N)*Math.sin(te),z:C*Math.cos(te)}}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function j(k){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(k.replace(C,function(he,we,Me,Ne){var tt=Me||Ne;return N[we]=tt?tt.toLowerCase():!0,""}),N["max-age"]){var te=parseInt(N["max-age"],10);isNaN(te)?delete N["max-age"]:N["max-age"]=te}return N}var X=null;function ae(k){if(X==null){var C=k.navigator?k.navigator.userAgent:null;X=!!k.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return X}function fe(k){try{var C=self[k];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function K(k){return self.btoa(encodeURIComponent(k).replace(/%([0-9A-F]{2})/g,function(C,N){return String.fromCharCode(Number("0x"+N))}))}function J(k){return decodeURIComponent(self.atob(k).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),V=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,re,Z,Q={now:U,frame:function(C){var N=V(C);return{cancel:function(){return q(N)}}},getImageData:function(C,N){N===void 0&&(N=0);var te=self.document.createElement("canvas"),he=te.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return te.width=C.width,te.height=C.height,he.drawImage(C,0,0,C.width,C.height),he.getImageData(-N,-N,C.width+2*N,C.height+2*N)},resolveURL:function(C){return re||(re=self.document.createElement("a")),re.href=C,re.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(Z==null&&(Z=self.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches):!1}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:ge},ne,se=!1,_e,ue=!1;self.document&&(_e=self.document.createElement("img"),_e.onload=function(){ne&&xe(ne),ne=null,ue=!0},_e.onerror=function(){se=!0,ne=null},_e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ge(k){se||!_e||(ue?xe(k):ne=k)}function xe(k){var C=k.createTexture();k.bindTexture(k.TEXTURE_2D,C);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,_e),k.isContextLost())return;oe.supported=!0}catch{}k.deleteTexture(C),se=!0}var ye="01";function be(){for(var k="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",te=0;te<10;te++)N+=C[Math.floor(Math.random()*62)];var he=12*60*60*1e3,we=[k,ye,N].join(""),Me=Date.now()+he;return{token:we,tokenExpiresAt:Me}}var Se=function(C,N){this._transformRequestFn=C,this._customAccessToken=N,this._createSkuToken()};Se.prototype._createSkuToken=function(){var C=be();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},Se.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Se.prototype.transformRequest=function(C,N){return this._transformRequestFn?this._transformRequestFn(C,N)||{url:C}:{url:C}},Se.prototype.normalizeStyleURL=function(C,N){if(!Re(C))return C;var te=ze(C);return te.path="/styles/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||N)},Se.prototype.normalizeGlyphsURL=function(C,N){if(!Re(C))return C;var te=ze(C);return te.path="/fonts/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||N)},Se.prototype.normalizeSourceURL=function(C,N){if(!Re(C))return C;var te=ze(C);return te.path="/v4/"+te.authority+".json",te.params.push("secure"),this._makeAPIURL(te,this._customAccessToken||N)},Se.prototype.normalizeSpriteURL=function(C,N,te,he){var we=ze(C);return Re(C)?(we.path="/styles/v1"+we.path+"/sprite"+N+te,this._makeAPIURL(we,this._customAccessToken||he)):(we.path+=""+N+te,Ie(we))},Se.prototype.normalizeTileURL=function(C,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!Re(C))return C;var te=ze(C),he=/(\.(png|jpg)\d*)(?=$)/,we=/^.+\/v4\//,Me=Q.devicePixelRatio>=2||N===512?"@2x":"",Ne=oe.supported?".webp":"$1";te.path=te.path.replace(he,""+Me+Ne),te.path=te.path.replace(we,"/"),te.path="/v4"+te.path;var tt=this._customAccessToken||Ze(te.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&te.params.push("sku="+this._skuToken),this._makeAPIURL(te,tt)},Se.prototype.canonicalizeTileURL=function(C,N){var te="/v4/",he=/\.[\w]+$/,we=ze(C);if(!we.path.match(/(^\/v4\/)/)||!we.path.match(he))return C;var Me="mapbox://tiles/";Me+=we.path.replace(te,"");var Ne=we.params;return N&&(Ne=Ne.filter(function(tt){return!tt.match(/^access_token=/)})),Ne.length&&(Me+="?"+Ne.join("&")),Me},Se.prototype.canonicalizeTileset=function(C,N){for(var te=N?Re(N):!1,he=[],we=0,Me=C.tiles||[];we<Me.length;we+=1){var Ne=Me[we];Ae(Ne)?he.push(this.canonicalizeTileURL(Ne,te)):he.push(Ne)}return he},Se.prototype._makeAPIURL=function(C,N){var te="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=ze(ie.API_URL);if(C.protocol=he.protocol,C.authority=he.authority,he.path!=="/"&&(C.path=""+he.path+C.path),!ie.REQUIRE_ACCESS_TOKEN)return Ie(C);if(N=N||ie.ACCESS_TOKEN,!N)throw new Error("An API access token is required to use Mapbox GL. "+te);if(N[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+te);return C.params=C.params.filter(function(we){return we.indexOf("access_token")===-1}),C.params.push("access_token="+N),Ie(C)};function Re(k){return k.indexOf("mapbox:")===0}var Ve=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ae(k){return Ve.test(k)}function Ce(k){return k.indexOf("sku=")>0&&Ae(k)}function Ze(k){for(var C=0,N=k;C<N.length;C+=1){var te=N[C],he=te.match(/^access_token=(.*)$/);if(he)return he[1]}return null}var Ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(k){var C=k.match(Ye);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Ie(k){var C=k.params.length?"?"+k.params.join("&"):"";return k.protocol+"://"+k.authority+k.path+C}var Ge="mapbox.eventData";function dt(k){if(!k)return null;var C=k.split(".");if(!C||C.length!==3)return null;try{var N=JSON.parse(J(C[1]));return N}catch{return null}}var Rt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Rt.prototype.getStorageKey=function(C){var N=dt(ie.ACCESS_TOKEN),te="";return N&&N.u?te=K(N.u):te=ie.ACCESS_TOKEN||"",C?Ge+"."+C+":"+te:Ge+":"+te},Rt.prototype.fetchEventData=function(){var C=fe("localStorage"),N=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{var he=self.localStorage.getItem(N);he&&(this.eventData=JSON.parse(he));var we=self.localStorage.getItem(te);we&&(this.anonId=we)}catch{O("Unable to read from LocalStorage")}},Rt.prototype.saveEventData=function(){var C=fe("localStorage"),N=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(te,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Rt.prototype.processRequests=function(C){},Rt.prototype.postEvent=function(C,N,te,he){var we=this;if(!!ie.EVENTS_URL){var Me=ze(ie.EVENTS_URL);Me.params.push("access_token="+(he||ie.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:ye,userId:this.anonId},tt=N?A(Ne,N):Ne,vt={url:Ie(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Et(vt,function(yt){we.pendingRequest=null,te(yt),we.saveEventData(),we.processRequests(he)})}},Rt.prototype.queueRequest=function(C,N){this.queue.push(C),this.processRequests(N)};var Qt=function(k){function C(){k.call(this,"map.load"),this.success={},this.skuToken=""}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(te,he,we,Me){this.skuToken=we,(ie.EVENTS_URL&&Me||ie.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(Ne){return Re(Ne)||Ae(Ne)}))&&this.queueRequest({id:he,timestamp:Date.now()},Me)},C.prototype.processRequests=function(te){var he=this;if(!(this.pendingRequest||this.queue.length===0)){var we=this.queue.shift(),Me=we.id,Ne=we.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=h()),this.postEvent(Ne,{skuToken:this.skuToken},function(tt){tt||Me&&(he.success[Me]=!0)},te))}},C}(Rt),Bt=function(k){function C(N){k.call(this,"appUserTurnstile"),this._customAccessToken=N}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(te,he){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(we){return Re(we)||Ae(we)})&&this.queueRequest(Date.now(),he)},C.prototype.processRequests=function(te){var he=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var we=dt(ie.ACCESS_TOKEN),Me=we?we.u:ie.ACCESS_TOKEN,Ne=Me!==this.eventData.tokenU;L(this.anonId)||(this.anonId=h(),Ne=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var vt=new Date(this.eventData.lastSuccess),yt=new Date(tt),Vt=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);Ne=Ne||Vt>=1||Vt<-1||vt.getDate()!==yt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(or){or||(he.eventData.lastSuccess=tt,he.eventData.tokenU=Me)},te)}},C}(Rt),Ct=new Bt,Kt=Ct.postTurnstileEvent.bind(Ct),Ot=new Qt,St=Ot.postMapLoadEvent.bind(Ot),Xe="mapbox-tiles",at=500,We=50,Ee=1e3*60*7,He;function Ke(){self.caches&&!He&&(He=self.caches.open(Xe))}var et;function At(k,C){if(et===void 0)try{new Response(new ReadableStream),et=!0}catch{et=!1}et?C(k.body):k.blob().then(C)}function mt(k,C,N){if(Ke(),!!He){var te={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(Me,Ne){return te.headers.set(Ne,Me)});var he=j(C.headers.get("Cache-Control")||"");if(!he["no-store"]){he["max-age"]&&te.headers.set("Expires",new Date(N+he["max-age"]*1e3).toUTCString());var we=new Date(te.headers.get("Expires")).getTime()-N;we<Ee||At(C,function(Me){var Ne=new self.Response(Me,te);Ke(),He&&He.then(function(tt){return tt.put(Mt(k.url),Ne)}).catch(function(tt){return O(tt.message)})})}}}function Mt(k){var C=k.indexOf("?");return C<0?k:k.slice(0,C)}function Gt(k,C){if(Ke(),!He)return C(null);var N=Mt(k.url);He.then(function(te){te.match(N).then(function(he){var we=zt(he);te.delete(N),we&&te.put(N,he.clone()),C(null,he,we)}).catch(C)}).catch(C)}function zt(k){if(!k)return!1;var C=new Date(k.headers.get("Expires")||0),N=j(k.headers.get("Cache-Control")||"");return C>Date.now()&&!N["no-cache"]}var Ht=1/0;function Xt(k){Ht++,Ht>We&&(k.getActor().send("enforceCacheSizeLimit",at),Ht=0)}function Wt(k){Ke(),He&&He.then(function(C){C.keys().then(function(N){for(var te=0;te<N.length-k;te++)C.delete(N[te])})})}function sr(k){var C=self.caches.delete(Xe);k&&C.catch(k).then(function(){return k()})}function Gr(k,C){at=k,We=C}var cn;function en(){return cn==null&&(cn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),cn}var st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(st);var rr=function(k){function C(N,te,he){te===401&&Ae(he)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),k.call(this,N),this.status=te,this.url=he,this.name=this.constructor.name,this.message=N}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),er=ee()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},jt=function(k){return/^file:/.test(k)||/^file:/.test(er())&&!/^\w+:/.test(k)};function Mr(k,C){var N=new self.AbortController,te=new self.Request(k.url,{method:k.method||"GET",body:k.body,credentials:k.credentials,headers:k.headers,referrer:er(),signal:N.signal}),he=!1,we=!1,Me=Ce(te.url);k.type==="json"&&te.headers.set("Accept","application/json");var Ne=function(vt,yt,Vt){if(!we){if(vt&&vt.message!=="SecurityError"&&O(vt),yt&&Vt)return tt(yt);var or=Date.now();self.fetch(te).then(function(nr){if(nr.ok){var xr=Me?nr.clone():null;return tt(nr,xr,or)}else return C(new rr(nr.statusText,nr.status,k.url))}).catch(function(nr){nr.code!==20&&C(new Error(nr.message))})}},tt=function(vt,yt,Vt){(k.type==="arrayBuffer"?vt.arrayBuffer():k.type==="json"?vt.json():vt.text()).then(function(or){we||(yt&&Vt&&mt(te,yt,Vt),he=!0,C(null,or,vt.headers.get("Cache-Control"),vt.headers.get("Expires")))}).catch(function(or){we||C(new Error(or.message))})};return Me?Gt(te,Ne):Ne(null,null),{cancel:function(){we=!0,he||N.abort()}}}function it(k,C){var N=new self.XMLHttpRequest;N.open(k.method||"GET",k.url,!0),k.type==="arrayBuffer"&&(N.responseType="arraybuffer");for(var te in k.headers)N.setRequestHeader(te,k.headers[te]);return k.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=k.credentials==="include",N.onerror=function(){C(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){var he=N.response;if(k.type==="json")try{he=JSON.parse(N.response)}catch(we){return C(we)}C(null,he,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else C(new rr(N.statusText,N.status,k.url))},N.send(k.body),{cancel:function(){return N.abort()}}}var Qe=function(k,C){if(!jt(k.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Mr(k,C);if(ee()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",k,C,void 0,N)}}return it(k,C)},ft=function(k,C){return Qe(A(k,{type:"json"}),C)},ct=function(k,C){return Qe(A(k,{type:"arrayBuffer"}),C)},Et=function(k,C){return Qe(A(k,{method:"POST"}),C)};function Nt(k){var C=self.document.createElement("a");return C.href=k,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Le(k,C,N,te){var he=new self.Image,we=self.URL;he.onload=function(){C(null,he),we.revokeObjectURL(he.src)},he.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(k)],{type:"image/png"});he.cacheControl=N,he.expires=te,he.src=k.byteLength?we.createObjectURL(Me):Pe}function ot(k,C){var N=new self.Blob([new Uint8Array(k)],{type:"image/png"});self.createImageBitmap(N).then(function(te){C(null,te)}).catch(function(te){C(new Error("Could not load image because of "+te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ut,pt,Pt=function(){ut=[],pt=0};Pt();var xt=function(k,C){if(oe.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),pt>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:k,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return ut.push(N),N}pt++;var te=!1,he=function(){if(!te)for(te=!0,pt--;ut.length&&pt<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=ut.shift(),Ne=Me.requestParameters,tt=Me.callback,vt=Me.cancelled;vt||(Me.cancel=xt(Ne,tt).cancel)}},we=ct(k,function(Me,Ne,tt,vt){he(),Me?C(Me):Ne&&(en()?ot(Ne,C):Le(Ne,C,tt,vt))});return{cancel:function(){we.cancel(),he()}}},Lt=function(k,C){var N=self.document.createElement("video");N.muted=!0,N.onloadstart=function(){C(null,N)};for(var te=0;te<k.length;te++){var he=self.document.createElement("source");Nt(k[te])||(N.crossOrigin="Anonymous"),he.src=k[te],N.appendChild(he)}return{cancel:function(){}}};function Zt(k,C,N){var te=N[k]&&N[k].indexOf(C)!==-1;te||(N[k]=N[k]||[],N[k].push(C))}function ur(k,C,N){if(N&&N[k]){var te=N[k].indexOf(C);te!==-1&&N[k].splice(te,1)}}var Pr=function(C,N){N===void 0&&(N={}),A(this,N),this.type=C},Ar=function(k){function C(N,te){te===void 0&&(te={}),k.call(this,"error",A({error:N},te))}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Pr),kr=function(){};kr.prototype.on=function(C,N){return this._listeners=this._listeners||{},Zt(C,N,this._listeners),this},kr.prototype.off=function(C,N){return ur(C,N,this._listeners),ur(C,N,this._oneTimeListeners),this},kr.prototype.once=function(C,N){return this._oneTimeListeners=this._oneTimeListeners||{},Zt(C,N,this._oneTimeListeners),this},kr.prototype.fire=function(C,N){typeof C=="string"&&(C=new Pr(C,N||{}));var te=C.type;if(this.listens(te)){C.target=this;for(var he=this._listeners&&this._listeners[te]?this._listeners[te].slice():[],we=0,Me=he;we<Me.length;we+=1){var Ne=Me[we];Ne.call(this,C)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[te]?this._oneTimeListeners[te].slice():[],vt=0,yt=tt;vt<yt.length;vt+=1){var Vt=yt[vt];ur(te,Vt,this._oneTimeListeners),Vt.call(this,C)}var or=this._eventedParent;or&&(A(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),or.fire(C))}else C instanceof Ar&&console.error(C.error);return this},kr.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},kr.prototype.setEventedParent=function(C,N){return this._eventedParent=C,this._eventedParentData=N,this};var Zr=8,lr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},br={"*":{type:"source"}},Or=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Hr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Lr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},nt={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},It={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Jt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},fr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Nr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Vr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Dr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Er={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},In={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$n={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kn={type:"array",value:"*"},ma={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Ra={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},_i={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Ka={type:"array",value:"*",minimum:1},ri={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ei={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Sr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],bn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},dn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Ln={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ra={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ya={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},sa={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Bn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Qn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},mi={"*":{type:"string"}},Yt={$version:Zr,$root:lr,sources:br,source:Or,source_vector:Hr,source_raster:Lr,source_raster_dem:nt,source_geojson:It,source_video:Jt,source_image:fr,layer:Nr,layout:Vr,layout_background:Dr,layout_fill:Er,layout_circle:jr,layout_heatmap:kn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:mn,layout_symbol:Wn,layout_raster:In,layout_hillshade:$n,filter:Kn,filter_operator:ma,geometry_type:Ra,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:_i,expression:Ka,expression_name:ri,light:ei,paint:Sr,paint_fill:bn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:dn,paint_circle:Ln,paint_heatmap:ra,paint_symbol:ya,paint_raster:sa,paint_hillshade:Bn,paint_background:Qn,transition:Xa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:mi},gr=function(C,N,te,he){this.message=(C?C+": ":"")+te,he&&(this.identifier=he),N!=null&&N.__line__&&(this.line=N.__line__)};function un(k){var C=k.key,N=k.value;return N?[new gr(C,N,"constants have been deprecated as of v8")]:[]}function yn(k){for(var C=[],N=arguments.length-1;N-- >0;)C[N]=arguments[N+1];for(var te=0,he=C;te<he.length;te+=1){var we=he[te];for(var Me in we)k[Me]=we[Me]}return k}function sn(k){return k instanceof Number||k instanceof String||k instanceof Boolean?k.valueOf():k}function Cn(k){if(Array.isArray(k))return k.map(Cn);if(k instanceof Object&&!(k instanceof Number||k instanceof String||k instanceof Boolean)){var C={};for(var N in k)C[N]=Cn(k[N]);return C}return sn(k)}var Tn=function(k){function C(N,te){k.call(this,te),this.message=te,this.key=N}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Error),gn=function(C,N){N===void 0&&(N=[]),this.parent=C,this.bindings={};for(var te=0,he=N;te<he.length;te+=1){var we=he[te],Me=we[0],Ne=we[1];this.bindings[Me]=Ne}};gn.prototype.concat=function(C){return new gn(this,C)},gn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},gn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var _r={kind:"null"},wr={kind:"number"},Br={kind:"string"},An={kind:"boolean"},Yn={kind:"color"},ua={kind:"object"},Sn={kind:"value"},na={kind:"error"},ca={kind:"collator"},Ma={kind:"formatted"},ka={kind:"resolvedImage"};function ga(k,C){return{kind:"array",itemType:k,N:C}}function Ia(k){if(k.kind==="array"){var C=Ia(k.itemType);return typeof k.N=="number"?"array<"+C+", "+k.N+">":k.itemType.kind==="value"?"array":"array<"+C+">"}else return k.kind}var Mo=[_r,wr,Br,An,Yn,Ma,ua,ga(Sn),ka];function ro(k,C){if(C.kind==="error")return null;if(k.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!ro(k.itemType,C.itemType))&&(typeof k.N!="number"||k.N===C.N))return null}else{if(k.kind===C.kind)return null;if(k.kind==="value")for(var N=0,te=Mo;N<te.length;N+=1){var he=te[N];if(!ro(he,C))return null}}return"Expected "+Ia(k)+" but found "+Ia(C)+" instead."}function Jo(k,C){return C.some(function(N){return N.kind===k.kind})}function Ks(k,C){return C.some(function(N){return N==="null"?k===null:N==="array"?Array.isArray(k):N==="object"?k&&!Array.isArray(k)&&typeof k=="object":N===typeof k})}var Vs=a(function(k,C){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(vt){return vt=Math.round(vt),vt<0?0:vt>255?255:vt}function he(vt){return vt<0?0:vt>1?1:vt}function we(vt){return vt[vt.length-1]==="%"?te(parseFloat(vt)/100*255):te(parseInt(vt))}function Me(vt){return vt[vt.length-1]==="%"?he(parseFloat(vt)/100):he(parseFloat(vt))}function Ne(vt,yt,Vt){return Vt<0?Vt+=1:Vt>1&&(Vt-=1),Vt*6<1?vt+(yt-vt)*Vt*6:Vt*2<1?yt:Vt*3<2?vt+(yt-vt)*(2/3-Vt)*6:vt}function tt(vt){var yt=vt.replace(/ /g,"").toLowerCase();if(yt in N)return N[yt].slice();if(yt[0]==="#"){if(yt.length===4){var Vt=parseInt(yt.substr(1),16);return Vt>=0&&Vt<=4095?[(Vt&3840)>>4|(Vt&3840)>>8,Vt&240|(Vt&240)>>4,Vt&15|(Vt&15)<<4,1]:null}else if(yt.length===7){var Vt=parseInt(yt.substr(1),16);return Vt>=0&&Vt<=16777215?[(Vt&16711680)>>16,(Vt&65280)>>8,Vt&255,1]:null}return null}var or=yt.indexOf("("),nr=yt.indexOf(")");if(or!==-1&&nr+1===yt.length){var xr=yt.substr(0,or),Ur=yt.substr(or+1,nr-(or+1)).split(","),hn=1;switch(xr){case"rgba":if(Ur.length!==4)return null;hn=Me(Ur.pop());case"rgb":return Ur.length!==3?null:[we(Ur[0]),we(Ur[1]),we(Ur[2]),hn];case"hsla":if(Ur.length!==4)return null;hn=Me(Ur.pop());case"hsl":if(Ur.length!==3)return null;var an=(parseFloat(Ur[0])%360+360)%360/360,Rn=Me(Ur[1]),Mn=Me(Ur[2]),Dn=Mn<=.5?Mn*(Rn+1):Mn+Rn-Mn*Rn,Vn=Mn*2-Dn;return[te(Ne(Vn,Dn,an+1/3)*255),te(Ne(Vn,Dn,an)*255),te(Ne(Vn,Dn,an-1/3)*255),hn];default:return null}}return null}try{C.parseCSSColor=tt}catch{}}),Gl=Vs.parseCSSColor,Ai=function(C,N,te,he){he===void 0&&(he=1),this.r=C,this.g=N,this.b=te,this.a=he};Ai.parse=function(C){if(!!C){if(C instanceof Ai)return C;if(typeof C=="string"){var N=Gl(C);if(!!N)return new Ai(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},Ai.prototype.toString=function(){var C=this.toArray(),N=C[0],te=C[1],he=C[2],we=C[3];return"rgba("+Math.round(N)+","+Math.round(te)+","+Math.round(he)+","+we+")"},Ai.prototype.toArray=function(){var C=this,N=C.r,te=C.g,he=C.b,we=C.a;return we===0?[0,0,0,0]:[N*255/we,te*255/we,he*255/we,we]},Ai.black=new Ai(0,0,0,1),Ai.white=new Ai(1,1,1,1),Ai.transparent=new Ai(0,0,0,0),Ai.red=new Ai(1,0,0,1);var Hs=function(C,N,te){C?this.sensitivity=N?"variant":"case":this.sensitivity=N?"accent":"base",this.locale=te,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Hs.prototype.compare=function(C,N){return this.collator.compare(C,N)},Hs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Gs=function(C,N,te,he,we){this.text=C,this.image=N,this.scale=te,this.fontStack=he,this.textColor=we},ji=function(C){this.sections=C};ji.fromString=function(C){return new ji([new Gs(C,null,null,null,null)])},ji.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},ji.factory=function(C){return C instanceof ji?C:ji.fromString(C)},ji.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},ji.prototype.serialize=function(){for(var C=["format"],N=0,te=this.sections;N<te.length;N+=1){var he=te[N];if(he.image){C.push(["image",he.image.name]);continue}C.push(he.text);var we={};he.fontStack&&(we["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(we["font-scale"]=he.scale),he.textColor&&(we["text-color"]=["rgba"].concat(he.textColor.toArray())),C.push(we)}return C};var Io=function(C){this.name=C.name,this.available=C.available};Io.prototype.toString=function(){return this.name},Io.fromString=function(C){return C?new Io({name:C,available:!1}):null},Io.prototype.serialize=function(){return["image",this.name]};function Ml(k,C,N,te){if(!(typeof k=="number"&&k>=0&&k<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof N=="number"&&N>=0&&N<=255)){var he=typeof te=="number"?[k,C,N,te]:[k,C,N];return"Invalid rgba value ["+he.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof te>"u"||typeof te=="number"&&te>=0&&te<=1?null:"Invalid rgba value ["+[k,C,N,te].join(", ")+"]: 'a' must be between 0 and 1."}function ws(k){if(k===null)return!0;if(typeof k=="string")return!0;if(typeof k=="boolean")return!0;if(typeof k=="number")return!0;if(k instanceof Ai)return!0;if(k instanceof Hs)return!0;if(k instanceof ji)return!0;if(k instanceof Io)return!0;if(Array.isArray(k)){for(var C=0,N=k;C<N.length;C+=1){var te=N[C];if(!ws(te))return!1}return!0}else if(typeof k=="object"){for(var he in k)if(!ws(k[he]))return!1;return!0}else return!1}function Ii(k){if(k===null)return _r;if(typeof k=="string")return Br;if(typeof k=="boolean")return An;if(typeof k=="number")return wr;if(k instanceof Ai)return Yn;if(k instanceof Hs)return ca;if(k instanceof ji)return Ma;if(k instanceof Io)return ka;if(Array.isArray(k)){for(var C=k.length,N,te=0,he=k;te<he.length;te+=1){var we=he[te],Me=Ii(we);if(!N)N=Me;else{if(N===Me)continue;N=Sn;break}}return ga(N||Sn,C)}else return ua}function fl(k){var C=typeof k;return k===null?"":C==="string"||C==="number"||C==="boolean"?String(k):k instanceof Ai||k instanceof ji||k instanceof Io?k.toString():JSON.stringify(k)}var lo=function(C,N){this.type=C,this.value=N};lo.parse=function(C,N){if(C.length!==2)return N.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!ws(C[1]))return N.error("invalid value");var te=C[1],he=Ii(te),we=N.expectedType;return he.kind==="array"&&he.N===0&&we&&we.kind==="array"&&(typeof we.N!="number"||we.N===0)&&(he=we),new lo(he,te)},lo.prototype.evaluate=function(){return this.value},lo.prototype.eachChild=function(){},lo.prototype.outputDefined=function(){return!0},lo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ai?["rgba"].concat(this.value.toArray()):this.value instanceof ji?this.value.serialize():this.value};var Fi=function(C){this.name="ExpressionEvaluationError",this.message=C};Fi.prototype.toJSON=function(){return this.message};var po={string:Br,number:wr,boolean:An,object:ua},no=function(C,N){this.type=C,this.args=N};no.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=1,he,we=C[0];if(we==="array"){var Me;if(C.length>2){var Ne=C[1];if(typeof Ne!="string"||!(Ne in po)||Ne==="object")return N.error('The item type argument of "array" must be one of string, number, boolean',1);Me=po[Ne],te++}else Me=Sn;var tt;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return N.error('The length argument to "array" must be a positive integer literal',2);tt=C[2],te++}he=ga(Me,tt)}else he=po[we];for(var vt=[];te<C.length;te++){var yt=N.parse(C[te],te,Sn);if(!yt)return null;vt.push(yt)}return new no(he,vt)},no.prototype.evaluate=function(C){for(var N=0;N<this.args.length;N++){var te=this.args[N].evaluate(C),he=ro(this.type,Ii(te));if(he){if(N===this.args.length-1)throw new Fi("Expected value to be of type "+Ia(this.type)+", but found "+Ia(Ii(te))+" instead.")}else return te}return null},no.prototype.eachChild=function(C){this.args.forEach(C)},no.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},no.prototype.serialize=function(){var C=this.type,N=[C.kind];if(C.kind==="array"){var te=C.itemType;if(te.kind==="string"||te.kind==="number"||te.kind==="boolean"){N.push(te.kind);var he=C.N;(typeof he=="number"||this.args.length>1)&&N.push(he)}}return N.concat(this.args.map(function(we){return we.serialize()}))};var us=function(C){this.type=Ma,this.sections=C};us.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=C[1];if(!Array.isArray(te)&&typeof te=="object")return N.error("First argument must be an image or text section.");for(var he=[],we=!1,Me=1;Me<=C.length-1;++Me){var Ne=C[Me];if(we&&typeof Ne=="object"&&!Array.isArray(Ne)){we=!1;var tt=null;if(Ne["font-scale"]&&(tt=N.parse(Ne["font-scale"],1,wr),!tt))return null;var vt=null;if(Ne["text-font"]&&(vt=N.parse(Ne["text-font"],1,ga(Br)),!vt))return null;var yt=null;if(Ne["text-color"]&&(yt=N.parse(Ne["text-color"],1,Yn),!yt))return null;var Vt=he[he.length-1];Vt.scale=tt,Vt.font=vt,Vt.textColor=yt}else{var or=N.parse(C[Me],1,Sn);if(!or)return null;var nr=or.type.kind;if(nr!=="string"&&nr!=="value"&&nr!=="null"&&nr!=="resolvedImage")return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");we=!0,he.push({content:or,scale:null,font:null,textColor:null})}}return new us(he)},us.prototype.evaluate=function(C){var N=function(te){var he=te.content.evaluate(C);return Ii(he)===ka?new Gs("",he,null,null,null):new Gs(fl(he),null,te.scale?te.scale.evaluate(C):null,te.font?te.font.evaluate(C).join(","):null,te.textColor?te.textColor.evaluate(C):null)};return new ji(this.sections.map(N))},us.prototype.eachChild=function(C){for(var N=0,te=this.sections;N<te.length;N+=1){var he=te[N];C(he.content),he.scale&&C(he.scale),he.font&&C(he.font),he.textColor&&C(he.textColor)}},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){for(var C=["format"],N=0,te=this.sections;N<te.length;N+=1){var he=te[N];C.push(he.content.serialize());var we={};he.scale&&(we["font-scale"]=he.scale.serialize()),he.font&&(we["text-font"]=he.font.serialize()),he.textColor&&(we["text-color"]=he.textColor.serialize()),C.push(we)}return C};var Js=function(C){this.type=ka,this.input=C};Js.parse=function(C,N){if(C.length!==2)return N.error("Expected two arguments.");var te=N.parse(C[1],1,Br);return te?new Js(te):N.error("No image name provided.")},Js.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=Io.fromString(N);return te&&C.availableImages&&(te.available=C.availableImages.indexOf(N)>-1),te},Js.prototype.eachChild=function(C){C(this.input)},Js.prototype.outputDefined=function(){return!1},Js.prototype.serialize=function(){return["image",this.input.serialize()]};var au={"to-boolean":An,"to-color":Yn,"to-number":wr,"to-string":Br},es=function(C,N){this.type=C,this.args=N};es.parse=function(C,N){if(C.length<2)return N.error("Expected at least one argument.");var te=C[0];if((te==="to-boolean"||te==="to-string")&&C.length!==2)return N.error("Expected one argument.");for(var he=au[te],we=[],Me=1;Me<C.length;Me++){var Ne=N.parse(C[Me],Me,Sn);if(!Ne)return null;we.push(Ne)}return new es(he,we)},es.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var N,te,he=0,we=this.args;he<we.length;he+=1){var Me=we[he];if(N=Me.evaluate(C),te=null,N instanceof Ai)return N;if(typeof N=="string"){var Ne=C.parseColor(N);if(Ne)return Ne}else if(Array.isArray(N)&&(N.length<3||N.length>4?te="Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":te=Ml(N[0],N[1],N[2],N[3]),!te))return new Ai(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Fi(te||"Could not parse color from value '"+(typeof N=="string"?N:String(JSON.stringify(N)))+"'")}else if(this.type.kind==="number"){for(var tt=null,vt=0,yt=this.args;vt<yt.length;vt+=1){var Vt=yt[vt];if(tt=Vt.evaluate(C),tt===null)return 0;var or=Number(tt);if(!isNaN(or))return or}throw new Fi("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?ji.fromString(fl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?Io.fromString(fl(this.args[0].evaluate(C))):fl(this.args[0].evaluate(C))},es.prototype.eachChild=function(C){this.args.forEach(C)},es.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},es.prototype.serialize=function(){if(this.type.kind==="formatted")return new us([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Js(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(N){C.push(N.serialize())}),C};var bu=["Unknown","Point","LineString","Polygon"],Ds=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ds.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ds.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?bu[this.feature.type]:this.feature.type:null},Ds.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ds.prototype.canonicalID=function(){return this.canonical},Ds.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ds.prototype.parseColor=function(C){var N=this._parseColorCache[C];return N||(N=this._parseColorCache[C]=Ai.parse(C)),N};var No=function(C,N,te,he){this.name=C,this.type=N,this._evaluate=te,this.args=he};No.prototype.evaluate=function(C){return this._evaluate(C,this.args)},No.prototype.eachChild=function(C){this.args.forEach(C)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},No.parse=function(C,N){var te,he=C[0],we=No.definitions[he];if(!we)return N.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(we)?we[0]:we.type,Ne=Array.isArray(we)?[[we[1],we[2]]]:we.overloads,tt=Ne.filter(function(Ua){var Ha=Ua[0];return!Array.isArray(Ha)||Ha.length===C.length-1}),vt=null,yt=0,Vt=tt;yt<Vt.length;yt+=1){var or=Vt[yt],nr=or[0],xr=or[1];vt=new Fo(N.registry,N.path,null,N.scope);for(var Ur=[],hn=!1,an=1;an<C.length;an++){var Rn=C[an],Mn=Array.isArray(nr)?nr[an-1]:nr.type,Dn=vt.parse(Rn,1+Ur.length,Mn);if(!Dn){hn=!0;break}Ur.push(Dn)}if(!hn){if(Array.isArray(nr)&&nr.length!==Ur.length){vt.error("Expected "+nr.length+" arguments, but found "+Ur.length+" instead.");continue}for(var Vn=0;Vn<Ur.length;Vn++){var qn=Array.isArray(nr)?nr[Vn]:nr.type,da=Ur[Vn];vt.concat(Vn+1).checkSubtype(qn,da.type)}if(vt.errors.length===0)return new No(he,Me,xr,Ur)}}if(tt.length===1)(te=N.errors).push.apply(te,vt.errors);else{for(var va=tt.length?tt:Ne,Wa=va.map(function(Ua){var Ha=Ua[0];return sf(Ha)}).join(" | "),Da=[],Oa=1;Oa<C.length;Oa++){var ci=N.parse(C[Oa],1+Da.length);if(!ci)return null;Da.push(Ia(ci.type))}N.error("Expected arguments of type "+Wa+", but found ("+Da.join(", ")+") instead.")}return null},No.register=function(C,N){No.definitions=N;for(var te in N)C[te]=No};function sf(k){return Array.isArray(k)?"("+k.map(Ia).join(", ")+")":"("+Ia(k.type)+"...)"}var ko=function(C,N,te){this.type=ca,this.locale=te,this.caseSensitive=C,this.diacriticSensitive=N};ko.parse=function(C,N){if(C.length!==2)return N.error("Expected one argument.");var te=C[1];if(typeof te!="object"||Array.isArray(te))return N.error("Collator options argument must be an object.");var he=N.parse(te["case-sensitive"]===void 0?!1:te["case-sensitive"],1,An);if(!he)return null;var we=N.parse(te["diacritic-sensitive"]===void 0?!1:te["diacritic-sensitive"],1,An);if(!we)return null;var Me=null;return te.locale&&(Me=N.parse(te.locale,1,Br),!Me)?null:new ko(he,we,Me)},ko.prototype.evaluate=function(C){return new Hs(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},ko.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},ko.prototype.outputDefined=function(){return!1},ko.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Rs=8192;function Yl(k,C){k[0]=Math.min(k[0],C[0]),k[1]=Math.min(k[1],C[1]),k[2]=Math.max(k[2],C[0]),k[3]=Math.max(k[3],C[1])}function Vu(k){return(180+k)/360}function Hu(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Ys(k,C){return!(k[0]<=C[0]||k[2]>=C[2]||k[1]<=C[1]||k[3]>=C[3])}function El(k,C){var N=Vu(k[0]),te=Hu(k[1]),he=Math.pow(2,C.z);return[Math.round(N*he*Rs),Math.round(te*he*Rs)]}function Is(k,C,N){var te=k[0]-C[0],he=k[1]-C[1],we=k[0]-N[0],Me=k[1]-N[1];return te*Me-we*he===0&&te*we<=0&&he*Me<=0}function iu(k,C,N){return C[1]>k[1]!=N[1]>k[1]&&k[0]<(N[0]-C[0])*(k[1]-C[1])/(N[1]-C[1])+C[0]}function cl(k,C){for(var N=!1,te=0,he=C.length;te<he;te++)for(var we=C[te],Me=0,Ne=we.length;Me<Ne-1;Me++){if(Is(k,we[Me],we[Me+1]))return!1;iu(k,we[Me],we[Me+1])&&(N=!N)}return N}function ou(k,C){for(var N=0;N<C.length;N++)if(cl(k,C[N]))return!0;return!1}function _u(k,C){return k[0]*C[1]-k[1]*C[0]}function Wl(k,C,N,te){var he=k[0]-N[0],we=k[1]-N[1],Me=C[0]-N[0],Ne=C[1]-N[1],tt=te[0]-N[0],vt=te[1]-N[1],yt=he*vt-tt*we,Vt=Me*vt-tt*Ne;return yt>0&&Vt<0||yt<0&&Vt>0}function wu(k,C,N,te){var he=[C[0]-k[0],C[1]-k[1]],we=[te[0]-N[0],te[1]-N[1]];return _u(we,he)===0?!1:!!(Wl(k,C,N,te)&&Wl(N,te,k,C))}function $s(k,C,N){for(var te=0,he=N;te<he.length;te+=1)for(var we=he[te],Me=0;Me<we.length-1;++Me)if(wu(k,C,we[Me],we[Me+1]))return!0;return!1}function Xl(k,C){for(var N=0;N<k.length;++N)if(!cl(k[N],C))return!1;for(var te=0;te<k.length-1;++te)if($s(k[te],k[te+1],C))return!1;return!0}function hl(k,C){for(var N=0;N<C.length;N++)if(Xl(k,C[N]))return!0;return!1}function Ts(k,C,N){for(var te=[],he=0;he<k.length;he++){for(var we=[],Me=0;Me<k[he].length;Me++){var Ne=El(k[he][Me],N);Yl(C,Ne),we.push(Ne)}te.push(we)}return te}function Sl(k,C,N){for(var te=[],he=0;he<k.length;he++){var we=Ts(k[he],C,N);te.push(we)}return te}function su(k,C,N,te){if(k[0]<N[0]||k[0]>N[2]){var he=te*.5,we=k[0]-N[0]>he?-te:N[0]-k[0]>he?te:0;we===0&&(we=k[0]-N[2]>he?-te:N[2]-k[0]>he?te:0),k[0]+=we}Yl(C,k)}function Tu(k){k[0]=k[1]=1/0,k[2]=k[3]=-1/0}function Au(k,C,N,te){for(var he=Math.pow(2,te.z)*Rs,we=[te.x*Rs,te.y*Rs],Me=[],Ne=0,tt=k;Ne<tt.length;Ne+=1)for(var vt=tt[Ne],yt=0,Vt=vt;yt<Vt.length;yt+=1){var or=Vt[yt],nr=[or.x+we[0],or.y+we[1]];su(nr,C,N,he),Me.push(nr)}return Me}function jl(k,C,N,te){for(var he=Math.pow(2,te.z)*Rs,we=[te.x*Rs,te.y*Rs],Me=[],Ne=0,tt=k;Ne<tt.length;Ne+=1){for(var vt=tt[Ne],yt=[],Vt=0,or=vt;Vt<or.length;Vt+=1){var nr=or[Vt],xr=[nr.x+we[0],nr.y+we[1]];Yl(C,xr),yt.push(xr)}Me.push(yt)}if(C[2]-C[0]<=he/2){Tu(C);for(var Ur=0,hn=Me;Ur<hn.length;Ur+=1)for(var an=hn[Ur],Rn=0,Mn=an;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];su(Dn,C,N,he)}}return Me}function Qs(k,C){var N=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],he=k.canonicalID();if(C.type==="Polygon"){var we=Ts(C.coordinates,te,he),Me=Au(k.geometry(),N,te,he);if(!Ys(N,te))return!1;for(var Ne=0,tt=Me;Ne<tt.length;Ne+=1){var vt=tt[Ne];if(!cl(vt,we))return!1}}if(C.type==="MultiPolygon"){var yt=Sl(C.coordinates,te,he),Vt=Au(k.geometry(),N,te,he);if(!Ys(N,te))return!1;for(var or=0,nr=Vt;or<nr.length;or+=1){var xr=nr[or];if(!ou(xr,yt))return!1}}return!0}function Mu(k,C){var N=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],he=k.canonicalID();if(C.type==="Polygon"){var we=Ts(C.coordinates,te,he),Me=jl(k.geometry(),N,te,he);if(!Ys(N,te))return!1;for(var Ne=0,tt=Me;Ne<tt.length;Ne+=1){var vt=tt[Ne];if(!Xl(vt,we))return!1}}if(C.type==="MultiPolygon"){var yt=Sl(C.coordinates,te,he),Vt=jl(k.geometry(),N,te,he);if(!Ys(N,te))return!1;for(var or=0,nr=Vt;or<nr.length;or+=1){var xr=nr[or];if(!hl(xr,yt))return!1}}return!0}var fs=function(C,N){this.type=An,this.geojson=C,this.geometries=N};fs.parse=function(C,N){if(C.length!==2)return N.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(ws(C[1])){var te=C[1];if(te.type==="FeatureCollection")for(var he=0;he<te.features.length;++he){var we=te.features[he].geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new fs(te,te.features[he].geometry)}else if(te.type==="Feature"){var Me=te.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new fs(te,te.geometry)}else if(te.type==="Polygon"||te.type==="MultiPolygon")return new fs(te,te)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},fs.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return Qs(C,this.geometries);if(C.geometryType()==="LineString")return Mu(C,this.geometries)}return!1},fs.prototype.eachChild=function(){},fs.prototype.outputDefined=function(){return!0},fs.prototype.serialize=function(){return["within",this.geojson]};function Wo(k){if(k instanceof No){if(k.name==="get"&&k.args.length===1)return!1;if(k.name==="feature-state")return!1;if(k.name==="has"&&k.args.length===1)return!1;if(k.name==="properties"||k.name==="geometry-type"||k.name==="id")return!1;if(/^filter-/.test(k.name))return!1}if(k instanceof fs)return!1;var C=!0;return k.eachChild(function(N){C&&!Wo(N)&&(C=!1)}),C}function qs(k){if(k instanceof No&&k.name==="feature-state")return!1;var C=!0;return k.eachChild(function(N){C&&!qs(N)&&(C=!1)}),C}function lu(k,C){if(k instanceof No&&C.indexOf(k.name)>=0)return!1;var N=!0;return k.eachChild(function(te){N&&!lu(te,C)&&(N=!1)}),N}var As=function(C,N){this.type=N.type,this.name=C,this.boundExpression=N};As.parse=function(C,N){if(C.length!==2||typeof C[1]!="string")return N.error("'var' expression requires exactly one string literal argument.");var te=C[1];return N.scope.has(te)?new As(te,N.scope.get(te)):N.error('Unknown variable "'+te+'". Make sure "'+te+'" has been bound in an enclosing "let" expression before using it.',1)},As.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},As.prototype.eachChild=function(){},As.prototype.outputDefined=function(){return!1},As.prototype.serialize=function(){return["var",this.name]};var Fo=function(C,N,te,he,we){N===void 0&&(N=[]),he===void 0&&(he=new gn),we===void 0&&(we=[]),this.registry=C,this.path=N,this.key=N.map(function(Me){return"["+Me+"]"}).join(""),this.scope=he,this.errors=we,this.expectedType=te};Fo.prototype.parse=function(C,N,te,he,we){return we===void 0&&(we={}),N?this.concat(N,te,he)._parse(C,we):this._parse(C,we)},Fo.prototype._parse=function(C,N){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function te(yt,Vt,or){return or==="assert"?new no(Vt,[yt]):or==="coerce"?new es(Vt,[yt]):yt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=C[0];if(typeof he!="string")return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var we=this.registry[he];if(we){var Me=we.parse(C,this);if(!Me)return null;if(this.expectedType){var Ne=this.expectedType,tt=Me.type;if((Ne.kind==="string"||Ne.kind==="number"||Ne.kind==="boolean"||Ne.kind==="object"||Ne.kind==="array")&&tt.kind==="value")Me=te(Me,Ne,N.typeAnnotation||"assert");else if((Ne.kind==="color"||Ne.kind==="formatted"||Ne.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Me=te(Me,Ne,N.typeAnnotation||"coerce");else if(this.checkSubtype(Ne,tt))return null}if(!(Me instanceof lo)&&Me.type.kind!=="resolvedImage"&&kl(Me)){var vt=new Ds;try{Me=new lo(Me.type,Me.evaluate(vt))}catch(yt){return this.error(yt.message),null}}return Me}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C>"u"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Fo.prototype.concat=function(C,N,te){var he=typeof C=="number"?this.path.concat(C):this.path,we=te?this.scope.concat(te):this.scope;return new Fo(this.registry,he,N||null,we,this.errors)},Fo.prototype.error=function(C){for(var N=[],te=arguments.length-1;te-- >0;)N[te]=arguments[te+1];var he=""+this.key+N.map(function(we){return"["+we+"]"}).join("");this.errors.push(new Tn(he,C))},Fo.prototype.checkSubtype=function(C,N){var te=ro(C,N);return te&&this.error(te),te};function kl(k){if(k instanceof As)return kl(k.boundExpression);if(k instanceof No&&k.name==="error")return!1;if(k instanceof ko)return!1;if(k instanceof fs)return!1;var C=k instanceof es||k instanceof no,N=!0;return k.eachChild(function(te){C?N=N&&kl(te):N=N&&te instanceof lo}),N?Wo(k)&&lu(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ms(k,C){for(var N=k.length-1,te=0,he=N,we=0,Me,Ne;te<=he;)if(we=Math.floor((te+he)/2),Me=k[we],Ne=k[we+1],Me<=C){if(we===N||C<Ne)return we;te=we+1}else if(Me>C)he=we-1;else throw new Fi("Input is not a number.");return 0}var Fs=function(C,N,te){this.type=C,this.input=N,this.labels=[],this.outputs=[];for(var he=0,we=te;he<we.length;he+=1){var Me=we[he],Ne=Me[0],tt=Me[1];this.labels.push(Ne),this.outputs.push(tt)}};Fs.parse=function(C,N){if(C.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return N.error("Expected an even number of arguments.");var te=N.parse(C[1],1,wr);if(!te)return null;var he=[],we=null;N.expectedType&&N.expectedType.kind!=="value"&&(we=N.expectedType);for(var Me=1;Me<C.length;Me+=2){var Ne=Me===1?-1/0:C[Me],tt=C[Me+1],vt=Me,yt=Me+1;if(typeof Ne!="number")return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',vt);if(he.length&&he[he.length-1][0]>=Ne)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',vt);var Vt=N.parse(tt,yt,we);if(!Vt)return null;we=we||Vt.type,he.push([Ne,Vt])}return new Fs(we,te,he)},Fs.prototype.evaluate=function(C){var N=this.labels,te=this.outputs;if(N.length===1)return te[0].evaluate(C);var he=this.input.evaluate(C);if(he<=N[0])return te[0].evaluate(C);var we=N.length;if(he>=N[we-1])return te[we-1].evaluate(C);var Me=Ms(N,he);return te[Me].evaluate(C)},Fs.prototype.eachChild=function(C){C(this.input);for(var N=0,te=this.outputs;N<te.length;N+=1){var he=te[N];C(he)}},Fs.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Fs.prototype.serialize=function(){for(var C=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&C.push(this.labels[N]),C.push(this.outputs[N].serialize());return C};function go(k,C,N){return k*(1-N)+C*N}function Cl(k,C,N){return new Ai(go(k.r,C.r,N),go(k.g,C.g,N),go(k.b,C.b,N),go(k.a,C.a,N))}function Ll(k,C,N){return k.map(function(te,he){return go(te,C[he],N)})}var el=Object.freeze({__proto__:null,number:go,color:Cl,array:Ll}),cs=.95047,vl=1,pl=1.08883,Zl=4/29,Pl=6/29,tl=3*Pl*Pl,Gu=Pl*Pl*Pl,hs=Math.PI/180,Ws=180/Math.PI;function uu(k){return k>Gu?Math.pow(k,1/3):k/tl+Zl}function dl(k){return k>Pl?k*k*k:tl*(k-Zl)}function Dl(k){return 255*(k<=.0031308?12.92*k:1.055*Math.pow(k,1/2.4)-.055)}function rl(k){return k/=255,k<=.04045?k/12.92:Math.pow((k+.055)/1.055,2.4)}function Rl(k){var C=rl(k.r),N=rl(k.g),te=rl(k.b),he=uu((.4124564*C+.3575761*N+.1804375*te)/cs),we=uu((.2126729*C+.7151522*N+.072175*te)/vl),Me=uu((.0193339*C+.119192*N+.9503041*te)/pl);return{l:116*we-16,a:500*(he-we),b:200*(we-Me),alpha:k.a}}function fu(k){var C=(k.l+16)/116,N=isNaN(k.a)?C:C+k.a/500,te=isNaN(k.b)?C:C-k.b/200;return C=vl*dl(C),N=cs*dl(N),te=pl*dl(te),new Ai(Dl(3.2404542*N-1.5371385*C-.4985314*te),Dl(-.969266*N+1.8760108*C+.041556*te),Dl(.0556434*N-.2040259*C+1.0572252*te),k.alpha)}function Eu(k,C,N){return{l:go(k.l,C.l,N),a:go(k.a,C.a,N),b:go(k.b,C.b,N),alpha:go(k.alpha,C.alpha,N)}}function lf(k){var C=Rl(k),N=C.l,te=C.a,he=C.b,we=Math.atan2(he,te)*Ws;return{h:we<0?we+360:we,c:Math.sqrt(te*te+he*he),l:N,alpha:k.a}}function Bi(k){var C=k.h*hs,N=k.c,te=k.l;return fu({l:te,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:k.alpha})}function ml(k,C,N){var te=C-k;return k+N*(te>180||te<-180?te-360*Math.round(te/360):te)}function nl(k,C,N){return{h:ml(k.h,C.h,N),c:go(k.c,C.c,N),l:go(k.l,C.l,N),alpha:go(k.alpha,C.alpha,N)}}var ts={forward:Rl,reverse:fu,interpolate:Eu},vs={forward:lf,reverse:Bi,interpolate:nl},Il=Object.freeze({__proto__:null,lab:ts,hcl:vs}),uo=function(C,N,te,he,we){this.type=C,this.operator=N,this.interpolation=te,this.input=he,this.labels=[],this.outputs=[];for(var Me=0,Ne=we;Me<Ne.length;Me+=1){var tt=Ne[Me],vt=tt[0],yt=tt[1];this.labels.push(vt),this.outputs.push(yt)}};uo.interpolationFactor=function(C,N,te,he){var we=0;if(C.name==="exponential")we=Su(N,C.base,te,he);else if(C.name==="linear")we=Su(N,1,te,he);else if(C.name==="cubic-bezier"){var Me=C.controlPoints,Ne=new n(Me[0],Me[1],Me[2],Me[3]);we=Ne.solve(Su(N,1,te,he))}return we},uo.parse=function(C,N){var te=C[0],he=C[1],we=C[2],Me=C.slice(3);if(!Array.isArray(he)||he.length===0)return N.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){var Ne=he[1];if(typeof Ne!="number")return N.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:Ne}}else if(he[0]==="cubic-bezier"){var tt=he.slice(1);if(tt.length!==4||tt.some(function(an){return typeof an!="number"||an<0||an>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:tt}}else return N.error("Unknown interpolation type "+String(he[0]),1,0);if(C.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return N.error("Expected an even number of arguments.");if(we=N.parse(we,2,wr),!we)return null;var vt=[],yt=null;te==="interpolate-hcl"||te==="interpolate-lab"?yt=Yn:N.expectedType&&N.expectedType.kind!=="value"&&(yt=N.expectedType);for(var Vt=0;Vt<Me.length;Vt+=2){var or=Me[Vt],nr=Me[Vt+1],xr=Vt+3,Ur=Vt+4;if(typeof or!="number")return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xr);if(vt.length&&vt[vt.length-1][0]>=or)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',xr);var hn=N.parse(nr,Ur,yt);if(!hn)return null;yt=yt||hn.type,vt.push([or,hn])}return yt.kind!=="number"&&yt.kind!=="color"&&!(yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number")?N.error("Type "+Ia(yt)+" is not interpolatable."):new uo(yt,te,he,we,vt)},uo.prototype.evaluate=function(C){var N=this.labels,te=this.outputs;if(N.length===1)return te[0].evaluate(C);var he=this.input.evaluate(C);if(he<=N[0])return te[0].evaluate(C);var we=N.length;if(he>=N[we-1])return te[we-1].evaluate(C);var Me=Ms(N,he),Ne=N[Me],tt=N[Me+1],vt=uo.interpolationFactor(this.interpolation,he,Ne,tt),yt=te[Me].evaluate(C),Vt=te[Me+1].evaluate(C);return this.operator==="interpolate"?el[this.type.kind.toLowerCase()](yt,Vt,vt):this.operator==="interpolate-hcl"?vs.reverse(vs.interpolate(vs.forward(yt),vs.forward(Vt),vt)):ts.reverse(ts.interpolate(ts.forward(yt),ts.forward(Vt),vt))},uo.prototype.eachChild=function(C){C(this.input);for(var N=0,te=this.outputs;N<te.length;N+=1){var he=te[N];C(he)}},uo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},uo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,C,this.input.serialize()],te=0;te<this.labels.length;te++)N.push(this.labels[te],this.outputs[te].serialize());return N};function Su(k,C,N,te){var he=te-N,we=k-N;return he===0?0:C===1?we/he:(Math.pow(C,we)-1)/(Math.pow(C,he)-1)}var Xo=function(C,N){this.type=C,this.args=N};Xo.parse=function(C,N){if(C.length<2)return N.error("Expectected at least one argument.");var te=null,he=N.expectedType;he&&he.kind!=="value"&&(te=he);for(var we=[],Me=0,Ne=C.slice(1);Me<Ne.length;Me+=1){var tt=Ne[Me],vt=N.parse(tt,1+we.length,te,void 0,{typeAnnotation:"omit"});if(!vt)return null;te=te||vt.type,we.push(vt)}var yt=he&&we.some(function(Vt){return ro(he,Vt.type)});return yt?new Xo(Sn,we):new Xo(te,we)},Xo.prototype.evaluate=function(C){for(var N=null,te=0,he,we=0,Me=this.args;we<Me.length;we+=1){var Ne=Me[we];if(te++,N=Ne.evaluate(C),N&&N instanceof Io&&!N.available&&(he||(he=N.name),N=null,te===this.args.length&&(N=he)),N!==null)break}return N},Xo.prototype.eachChild=function(C){this.args.forEach(C)},Xo.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Xo.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(N){C.push(N.serialize())}),C};var Xs=function(C,N){this.type=N.type,this.bindings=[].concat(C),this.result=N};Xs.prototype.evaluate=function(C){return this.result.evaluate(C)},Xs.prototype.eachChild=function(C){for(var N=0,te=this.bindings;N<te.length;N+=1){var he=te[N];C(he[1])}C(this.result)},Xs.parse=function(C,N){if(C.length<4)return N.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var te=[],he=1;he<C.length-1;he+=2){var we=C[he];if(typeof we!="string")return N.error("Expected string, but found "+typeof we+" instead.",he);if(/[^a-zA-Z0-9_]/.test(we))return N.error("Variable names must contain only alphanumeric characters or '_'.",he);var Me=N.parse(C[he+1],he+1);if(!Me)return null;te.push([we,Me])}var Ne=N.parse(C[C.length-1],C.length-1,N.expectedType,te);return Ne?new Xs(te,Ne):null},Xs.prototype.outputDefined=function(){return this.result.outputDefined()},Xs.prototype.serialize=function(){for(var C=["let"],N=0,te=this.bindings;N<te.length;N+=1){var he=te[N],we=he[0],Me=he[1];C.push(we,Me.serialize())}return C.push(this.result.serialize()),C};var zs=function(C,N,te){this.type=C,this.index=N,this.input=te};zs.parse=function(C,N){if(C.length!==3)return N.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,wr),he=N.parse(C[2],2,ga(N.expectedType||Sn));if(!te||!he)return null;var we=he.type;return new zs(we.itemType,te,he)},zs.prototype.evaluate=function(C){var N=this.index.evaluate(C),te=this.input.evaluate(C);if(N<0)throw new Fi("Array index out of bounds: "+N+" < 0.");if(N>=te.length)throw new Fi("Array index out of bounds: "+N+" > "+(te.length-1)+".");if(N!==Math.floor(N))throw new Fi("Array index must be an integer, but found "+N+" instead.");return te[N]},zs.prototype.eachChild=function(C){C(this.index),C(this.input)},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Es=function(C,N){this.type=An,this.needle=C,this.haystack=N};Es.parse=function(C,N){if(C.length!==3)return N.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,Sn),he=N.parse(C[2],2,Sn);return!te||!he?null:Jo(te.type,[An,Br,wr,_r,Sn])?new Es(te,he):N.error("Expected first argument to be of type boolean, string, number or null, but found "+Ia(te.type)+" instead")},Es.prototype.evaluate=function(C){var N=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!te)return!1;if(!Ks(N,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Ia(Ii(N))+" instead.");if(!Ks(te,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Ia(Ii(te))+" instead.");return te.indexOf(N)>=0},Es.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},Es.prototype.outputDefined=function(){return!0},Es.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ho=function(C,N,te){this.type=wr,this.needle=C,this.haystack=N,this.fromIndex=te};Ho.parse=function(C,N){if(C.length<=2||C.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,Sn),he=N.parse(C[2],2,Sn);if(!te||!he)return null;if(!Jo(te.type,[An,Br,wr,_r,Sn]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+Ia(te.type)+" instead");if(C.length===4){var we=N.parse(C[3],3,wr);return we?new Ho(te,he,we):null}else return new Ho(te,he)},Ho.prototype.evaluate=function(C){var N=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!Ks(N,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Ia(Ii(N))+" instead.");if(!Ks(te,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Ia(Ii(te))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(C);return te.indexOf(N,he)}return te.indexOf(N)},Ho.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},Ho.prototype.outputDefined=function(){return!1},Ho.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Zi=function(C,N,te,he,we,Me){this.inputType=C,this.type=N,this.input=te,this.cases=he,this.outputs=we,this.otherwise=Me};Zi.parse=function(C,N){if(C.length<5)return N.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!==1)return N.error("Expected an even number of arguments.");var te,he;N.expectedType&&N.expectedType.kind!=="value"&&(he=N.expectedType);for(var we={},Me=[],Ne=2;Ne<C.length-1;Ne+=2){var tt=C[Ne],vt=C[Ne+1];Array.isArray(tt)||(tt=[tt]);var yt=N.concat(Ne);if(tt.length===0)return yt.error("Expected at least one branch label.");for(var Vt=0,or=tt;Vt<or.length;Vt+=1){var nr=or[Vt];if(typeof nr!="number"&&typeof nr!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof nr=="number"&&Math.abs(nr)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof nr=="number"&&Math.floor(nr)!==nr)return yt.error("Numeric branch labels must be integer values.");if(!te)te=Ii(nr);else if(yt.checkSubtype(te,Ii(nr)))return null;if(typeof we[String(nr)]<"u")return yt.error("Branch labels must be unique.");we[String(nr)]=Me.length}var xr=N.parse(vt,Ne,he);if(!xr)return null;he=he||xr.type,Me.push(xr)}var Ur=N.parse(C[1],1,Sn);if(!Ur)return null;var hn=N.parse(C[C.length-1],C.length-1,he);return!hn||Ur.type.kind!=="value"&&N.concat(1).checkSubtype(te,Ur.type)?null:new Zi(te,he,Ur,we,Me,hn)},Zi.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=Ii(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise;return te.evaluate(C)},Zi.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Zi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Zi.prototype.serialize=function(){for(var C=this,N=["match",this.input.serialize()],te=Object.keys(this.cases).sort(),he=[],we={},Me=0,Ne=te;Me<Ne.length;Me+=1){var tt=Ne[Me],vt=we[this.cases[tt]];vt===void 0?(we[this.cases[tt]]=he.length,he.push([this.cases[tt],[tt]])):he[vt][1].push(tt)}for(var yt=function(Ur){return C.inputType.kind==="number"?Number(Ur):Ur},Vt=0,or=he;Vt<or.length;Vt+=1){var nr=or[Vt],vt=nr[0],xr=nr[1];xr.length===1?N.push(yt(xr[0])):N.push(xr.map(yt)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Bo=function(C,N,te){this.type=C,this.branches=N,this.otherwise=te};Bo.parse=function(C,N){if(C.length<4)return N.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!==0)return N.error("Expected an odd number of arguments.");var te;N.expectedType&&N.expectedType.kind!=="value"&&(te=N.expectedType);for(var he=[],we=1;we<C.length-1;we+=2){var Me=N.parse(C[we],we,An);if(!Me)return null;var Ne=N.parse(C[we+1],we+1,te);if(!Ne)return null;he.push([Me,Ne]),te=te||Ne.type}var tt=N.parse(C[C.length-1],C.length-1,te);return tt?new Bo(te,he,tt):null},Bo.prototype.evaluate=function(C){for(var N=0,te=this.branches;N<te.length;N+=1){var he=te[N],we=he[0],Me=he[1];if(we.evaluate(C))return Me.evaluate(C)}return this.otherwise.evaluate(C)},Bo.prototype.eachChild=function(C){for(var N=0,te=this.branches;N<te.length;N+=1){var he=te[N],we=he[0],Me=he[1];C(we),C(Me)}C(this.otherwise)},Bo.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var N=C[1];return N.outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){var C=["case"];return this.eachChild(function(N){C.push(N.serialize())}),C};var ps=function(C,N,te,he){this.type=C,this.input=N,this.beginIndex=te,this.endIndex=he};ps.parse=function(C,N){if(C.length<=2||C.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1,Sn),he=N.parse(C[2],2,wr);if(!te||!he)return null;if(!Jo(te.type,[ga(Sn),Br,Sn]))return N.error("Expected first argument to be of type array or string, but found "+Ia(te.type)+" instead");if(C.length===4){var we=N.parse(C[3],3,wr);return we?new ps(te.type,te,he,we):null}else return new ps(te.type,te,he)},ps.prototype.evaluate=function(C){var N=this.input.evaluate(C),te=this.beginIndex.evaluate(C);if(!Ks(N,["string","array"]))throw new Fi("Expected first argument to be of type array or string, but found "+Ia(Ii(N))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(C);return N.slice(te,he)}return N.slice(te)},ps.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function ku(k,C){return k==="=="||k==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function Kl(k,C,N){return C===N}function Cu(k,C,N){return C!==N}function bt(k,C,N){return C<N}function Ut(k,C,N){return C>N}function dr(k,C,N){return C<=N}function cr(k,C,N){return C>=N}function zr(k,C,N,te){return te.compare(C,N)===0}function ln(k,C,N,te){return!zr(k,C,N,te)}function _n(k,C,N,te){return te.compare(C,N)<0}function Pn(k,C,N,te){return te.compare(C,N)>0}function zn(k,C,N,te){return te.compare(C,N)<=0}function Xn(k,C,N,te){return te.compare(C,N)>=0}function wn(k,C,N){var te=k!=="=="&&k!=="!=";return function(){function he(we,Me,Ne){this.type=An,this.lhs=we,this.rhs=Me,this.collator=Ne,this.hasUntypedArgument=we.type.kind==="value"||Me.type.kind==="value"}return he.parse=function(Me,Ne){if(Me.length!==3&&Me.length!==4)return Ne.error("Expected two or three arguments.");var tt=Me[0],vt=Ne.parse(Me[1],1,Sn);if(!vt)return null;if(!ku(tt,vt.type))return Ne.concat(1).error('"'+tt+`" comparisons are not supported for type '`+Ia(vt.type)+"'.");var yt=Ne.parse(Me[2],2,Sn);if(!yt)return null;if(!ku(tt,yt.type))return Ne.concat(2).error('"'+tt+`" comparisons are not supported for type '`+Ia(yt.type)+"'.");if(vt.type.kind!==yt.type.kind&&vt.type.kind!=="value"&&yt.type.kind!=="value")return Ne.error("Cannot compare types '"+Ia(vt.type)+"' and '"+Ia(yt.type)+"'.");te&&(vt.type.kind==="value"&&yt.type.kind!=="value"?vt=new no(yt.type,[vt]):vt.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new no(vt.type,[yt])));var Vt=null;if(Me.length===4){if(vt.type.kind!=="string"&&yt.type.kind!=="string"&&vt.type.kind!=="value"&&yt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(Vt=Ne.parse(Me[3],3,ca),!Vt)return null}return new he(vt,yt,Vt)},he.prototype.evaluate=function(Me){var Ne=this.lhs.evaluate(Me),tt=this.rhs.evaluate(Me);if(te&&this.hasUntypedArgument){var vt=Ii(Ne),yt=Ii(tt);if(vt.kind!==yt.kind||!(vt.kind==="string"||vt.kind==="number"))throw new Fi('Expected arguments for "'+k+'" to be (string, string) or (number, number), but found ('+vt.kind+", "+yt.kind+") instead.")}if(this.collator&&!te&&this.hasUntypedArgument){var Vt=Ii(Ne),or=Ii(tt);if(Vt.kind!=="string"||or.kind!=="string")return C(Me,Ne,tt)}return this.collator?N(Me,Ne,tt,this.collator.evaluate(Me)):C(Me,Ne,tt)},he.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var Me=[k];return this.eachChild(function(Ne){Me.push(Ne.serialize())}),Me},he}()}var Un=wn("==",Kl,zr),On=wn("!=",Cu,ln),jn=wn("<",bt,_n),ia=wn(">",Ut,Pn),Ga=wn("<=",dr,zn),za=wn(">=",cr,Xn),Ya=function(C,N,te,he,we){this.type=Br,this.number=C,this.locale=N,this.currency=te,this.minFractionDigits=he,this.maxFractionDigits=we};Ya.parse=function(C,N){if(C.length!==3)return N.error("Expected two arguments.");var te=N.parse(C[1],1,wr);if(!te)return null;var he=C[2];if(typeof he!="object"||Array.isArray(he))return N.error("NumberFormat options argument must be an object.");var we=null;if(he.locale&&(we=N.parse(he.locale,1,Br),!we))return null;var Me=null;if(he.currency&&(Me=N.parse(he.currency,1,Br),!Me))return null;var Ne=null;if(he["min-fraction-digits"]&&(Ne=N.parse(he["min-fraction-digits"],1,wr),!Ne))return null;var tt=null;return he["max-fraction-digits"]&&(tt=N.parse(he["max-fraction-digits"],1,wr),!tt)?null:new Ya(te,we,Me,Ne,tt)},Ya.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ya.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ya.prototype.outputDefined=function(){return!1},Ya.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var ja=function(C){this.type=wr,this.input=C};ja.parse=function(C,N){if(C.length!==2)return N.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var te=N.parse(C[1],1);return te?te.type.kind!=="array"&&te.type.kind!=="string"&&te.type.kind!=="value"?N.error("Expected argument of type string or array, but found "+Ia(te.type)+" instead."):new ja(te):null},ja.prototype.evaluate=function(C){var N=this.input.evaluate(C);if(typeof N=="string")return N.length;if(Array.isArray(N))return N.length;throw new Fi("Expected value to be of type string or array, but found "+Ia(Ii(N))+" instead.")},ja.prototype.eachChild=function(C){C(this.input)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){var C=["length"];return this.eachChild(function(N){C.push(N.serialize())}),C};var aa={"==":Un,"!=":On,">":ia,"<":jn,">=":za,"<=":Ga,array:no,at:zs,boolean:no,case:Bo,coalesce:Xo,collator:ko,format:us,image:Js,in:Es,"index-of":Ho,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:ja,let:Xs,literal:lo,match:Zi,number:no,"number-format":Ya,object:no,slice:ps,step:Fs,string:no,"to-boolean":es,"to-color":es,"to-number":es,"to-string":es,var:As,within:fs};function ba(k,C){var N=C[0],te=C[1],he=C[2],we=C[3];N=N.evaluate(k),te=te.evaluate(k),he=he.evaluate(k);var Me=we?we.evaluate(k):1,Ne=Ml(N,te,he,Me);if(Ne)throw new Fi(Ne);return new Ai(N/255*Me,te/255*Me,he/255*Me,Me)}function Qa(k,C){return k in C}function si(k,C){var N=C[k];return typeof N>"u"?null:N}function Mi(k,C,N,te){for(;N<=te;){var he=N+te>>1;if(C[he]===k)return!0;C[he]>k?te=he-1:N=he+1}return!1}function Ei(k){return{type:k}}No.register(aa,{error:[na,[Br],function(k,C){var N=C[0];throw new Fi(N.evaluate(k))}],typeof:[Br,[Sn],function(k,C){var N=C[0];return Ia(Ii(N.evaluate(k)))}],"to-rgba":[ga(wr,4),[Yn],function(k,C){var N=C[0];return N.evaluate(k).toArray()}],rgb:[Yn,[wr,wr,wr],ba],rgba:[Yn,[wr,wr,wr,wr],ba],has:{type:An,overloads:[[[Br],function(k,C){var N=C[0];return Qa(N.evaluate(k),k.properties())}],[[Br,ua],function(k,C){var N=C[0],te=C[1];return Qa(N.evaluate(k),te.evaluate(k))}]]},get:{type:Sn,overloads:[[[Br],function(k,C){var N=C[0];return si(N.evaluate(k),k.properties())}],[[Br,ua],function(k,C){var N=C[0],te=C[1];return si(N.evaluate(k),te.evaluate(k))}]]},"feature-state":[Sn,[Br],function(k,C){var N=C[0];return si(N.evaluate(k),k.featureState||{})}],properties:[ua,[],function(k){return k.properties()}],"geometry-type":[Br,[],function(k){return k.geometryType()}],id:[Sn,[],function(k){return k.id()}],zoom:[wr,[],function(k){return k.globals.zoom}],"heatmap-density":[wr,[],function(k){return k.globals.heatmapDensity||0}],"line-progress":[wr,[],function(k){return k.globals.lineProgress||0}],accumulated:[Sn,[],function(k){return k.globals.accumulated===void 0?null:k.globals.accumulated}],"+":[wr,Ei(wr),function(k,C){for(var N=0,te=0,he=C;te<he.length;te+=1){var we=he[te];N+=we.evaluate(k)}return N}],"*":[wr,Ei(wr),function(k,C){for(var N=1,te=0,he=C;te<he.length;te+=1){var we=he[te];N*=we.evaluate(k)}return N}],"-":{type:wr,overloads:[[[wr,wr],function(k,C){var N=C[0],te=C[1];return N.evaluate(k)-te.evaluate(k)}],[[wr],function(k,C){var N=C[0];return-N.evaluate(k)}]]},"/":[wr,[wr,wr],function(k,C){var N=C[0],te=C[1];return N.evaluate(k)/te.evaluate(k)}],"%":[wr,[wr,wr],function(k,C){var N=C[0],te=C[1];return N.evaluate(k)%te.evaluate(k)}],ln2:[wr,[],function(){return Math.LN2}],pi:[wr,[],function(){return Math.PI}],e:[wr,[],function(){return Math.E}],"^":[wr,[wr,wr],function(k,C){var N=C[0],te=C[1];return Math.pow(N.evaluate(k),te.evaluate(k))}],sqrt:[wr,[wr],function(k,C){var N=C[0];return Math.sqrt(N.evaluate(k))}],log10:[wr,[wr],function(k,C){var N=C[0];return Math.log(N.evaluate(k))/Math.LN10}],ln:[wr,[wr],function(k,C){var N=C[0];return Math.log(N.evaluate(k))}],log2:[wr,[wr],function(k,C){var N=C[0];return Math.log(N.evaluate(k))/Math.LN2}],sin:[wr,[wr],function(k,C){var N=C[0];return Math.sin(N.evaluate(k))}],cos:[wr,[wr],function(k,C){var N=C[0];return Math.cos(N.evaluate(k))}],tan:[wr,[wr],function(k,C){var N=C[0];return Math.tan(N.evaluate(k))}],asin:[wr,[wr],function(k,C){var N=C[0];return Math.asin(N.evaluate(k))}],acos:[wr,[wr],function(k,C){var N=C[0];return Math.acos(N.evaluate(k))}],atan:[wr,[wr],function(k,C){var N=C[0];return Math.atan(N.evaluate(k))}],min:[wr,Ei(wr),function(k,C){return Math.min.apply(Math,C.map(function(N){return N.evaluate(k)}))}],max:[wr,Ei(wr),function(k,C){return Math.max.apply(Math,C.map(function(N){return N.evaluate(k)}))}],abs:[wr,[wr],function(k,C){var N=C[0];return Math.abs(N.evaluate(k))}],round:[wr,[wr],function(k,C){var N=C[0],te=N.evaluate(k);return te<0?-Math.round(-te):Math.round(te)}],floor:[wr,[wr],function(k,C){var N=C[0];return Math.floor(N.evaluate(k))}],ceil:[wr,[wr],function(k,C){var N=C[0];return Math.ceil(N.evaluate(k))}],"filter-==":[An,[Br,Sn],function(k,C){var N=C[0],te=C[1];return k.properties()[N.value]===te.value}],"filter-id-==":[An,[Sn],function(k,C){var N=C[0];return k.id()===N.value}],"filter-type-==":[An,[Br],function(k,C){var N=C[0];return k.geometryType()===N.value}],"filter-<":[An,[Br,Sn],function(k,C){var N=C[0],te=C[1],he=k.properties()[N.value],we=te.value;return typeof he==typeof we&&he<we}],"filter-id-<":[An,[Sn],function(k,C){var N=C[0],te=k.id(),he=N.value;return typeof te==typeof he&&te<he}],"filter->":[An,[Br,Sn],function(k,C){var N=C[0],te=C[1],he=k.properties()[N.value],we=te.value;return typeof he==typeof we&&he>we}],"filter-id->":[An,[Sn],function(k,C){var N=C[0],te=k.id(),he=N.value;return typeof te==typeof he&&te>he}],"filter-<=":[An,[Br,Sn],function(k,C){var N=C[0],te=C[1],he=k.properties()[N.value],we=te.value;return typeof he==typeof we&&he<=we}],"filter-id-<=":[An,[Sn],function(k,C){var N=C[0],te=k.id(),he=N.value;return typeof te==typeof he&&te<=he}],"filter->=":[An,[Br,Sn],function(k,C){var N=C[0],te=C[1],he=k.properties()[N.value],we=te.value;return typeof he==typeof we&&he>=we}],"filter-id->=":[An,[Sn],function(k,C){var N=C[0],te=k.id(),he=N.value;return typeof te==typeof he&&te>=he}],"filter-has":[An,[Sn],function(k,C){var N=C[0];return N.value in k.properties()}],"filter-has-id":[An,[],function(k){return k.id()!==null&&k.id()!==void 0}],"filter-type-in":[An,[ga(Br)],function(k,C){var N=C[0];return N.value.indexOf(k.geometryType())>=0}],"filter-id-in":[An,[ga(Sn)],function(k,C){var N=C[0];return N.value.indexOf(k.id())>=0}],"filter-in-small":[An,[Br,ga(Sn)],function(k,C){var N=C[0],te=C[1];return te.value.indexOf(k.properties()[N.value])>=0}],"filter-in-large":[An,[Br,ga(Sn)],function(k,C){var N=C[0],te=C[1];return Mi(k.properties()[N.value],te.value,0,te.value.length-1)}],all:{type:An,overloads:[[[An,An],function(k,C){var N=C[0],te=C[1];return N.evaluate(k)&&te.evaluate(k)}],[Ei(An),function(k,C){for(var N=0,te=C;N<te.length;N+=1){var he=te[N];if(!he.evaluate(k))return!1}return!0}]]},any:{type:An,overloads:[[[An,An],function(k,C){var N=C[0],te=C[1];return N.evaluate(k)||te.evaluate(k)}],[Ei(An),function(k,C){for(var N=0,te=C;N<te.length;N+=1){var he=te[N];if(he.evaluate(k))return!0}return!1}]]},"!":[An,[An],function(k,C){var N=C[0];return!N.evaluate(k)}],"is-supported-script":[An,[Br],function(k,C){var N=C[0],te=k.globals&&k.globals.isSupportedScript;return te?te(N.evaluate(k)):!0}],upcase:[Br,[Br],function(k,C){var N=C[0];return N.evaluate(k).toUpperCase()}],downcase:[Br,[Br],function(k,C){var N=C[0];return N.evaluate(k).toLowerCase()}],concat:[Br,Ei(Sn),function(k,C){return C.map(function(N){return fl(N.evaluate(k))}).join("")}],"resolved-locale":[Br,[ca],function(k,C){var N=C[0];return N.evaluate(k).resolvedLocale()}]});function wi(k){return{result:"success",value:k}}function Li(k){return{result:"error",value:k}}function hi(k){return k["property-type"]==="data-driven"||k["property-type"]==="cross-faded-data-driven"}function Co(k){return!!k.expression&&k.expression.parameters.indexOf("zoom")>-1}function ao(k){return!!k.expression&&k.expression.interpolated}function li(k){return k instanceof Number?"number":k instanceof String?"string":k instanceof Boolean?"boolean":Array.isArray(k)?"array":k===null?"null":typeof k}function Aa(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}function Si(k){return k}function _o(k,C){var N=C.type==="color",te=k.stops&&typeof k.stops[0][0]=="object",he=te||k.property!==void 0,we=te||!he,Me=k.type||(ao(C)?"exponential":"interval");if(N&&(k=yn({},k),k.stops&&(k.stops=k.stops.map(function(va){return[va[0],Ai.parse(va[1])]})),k.default?k.default=Ai.parse(k.default):k.default=Ai.parse(C.default)),k.colorSpace&&k.colorSpace!=="rgb"&&!Il[k.colorSpace])throw new Error("Unknown color space: "+k.colorSpace);var Ne,tt,vt;if(Me==="exponential")Ne=Lo;else if(Me==="interval")Ne=Os;else if(Me==="categorical"){Ne=ds,tt=Object.create(null);for(var yt=0,Vt=k.stops;yt<Vt.length;yt+=1){var or=Vt[yt];tt[or[0]]=or[1]}vt=typeof k.stops[0][0]}else if(Me==="identity")Ne=al;else throw new Error('Unknown function type "'+Me+'"');if(te){for(var nr={},xr=[],Ur=0;Ur<k.stops.length;Ur++){var hn=k.stops[Ur],an=hn[0].zoom;nr[an]===void 0&&(nr[an]={zoom:an,type:k.type,property:k.property,default:k.default,stops:[]},xr.push(an)),nr[an].stops.push([hn[0].value,hn[1]])}for(var Rn=[],Mn=0,Dn=xr;Mn<Dn.length;Mn+=1){var Vn=Dn[Mn];Rn.push([nr[Vn].zoom,_o(nr[Vn],C)])}var qn={name:"linear"};return{kind:"composite",interpolationType:qn,interpolationFactor:uo.interpolationFactor.bind(void 0,qn),zoomStops:Rn.map(function(va){return va[0]}),evaluate:function(Wa,Da){var Oa=Wa.zoom;return Lo({stops:Rn,base:k.base},C,Oa).evaluate(Oa,Da)}}}else if(we){var da=Me==="exponential"?{name:"exponential",base:k.base!==void 0?k.base:1}:null;return{kind:"camera",interpolationType:da,interpolationFactor:uo.interpolationFactor.bind(void 0,da),zoomStops:k.stops.map(function(va){return va[0]}),evaluate:function(va){var Wa=va.zoom;return Ne(k,C,Wa,tt,vt)}}}else return{kind:"source",evaluate:function(Wa,Da){var Oa=Da&&Da.properties?Da.properties[k.property]:void 0;return Oa===void 0?Eo(k.default,C.default):Ne(k,C,Oa,tt,vt)}}}function Eo(k,C,N){if(k!==void 0)return k;if(C!==void 0)return C;if(N!==void 0)return N}function ds(k,C,N,te,he){var we=typeof N===he?te[N]:void 0;return Eo(we,k.default,C.default)}function Os(k,C,N){if(li(N)!=="number")return Eo(k.default,C.default);var te=k.stops.length;if(te===1||N<=k.stops[0][0])return k.stops[0][1];if(N>=k.stops[te-1][0])return k.stops[te-1][1];var he=Ms(k.stops.map(function(we){return we[0]}),N);return k.stops[he][1]}function Lo(k,C,N){var te=k.base!==void 0?k.base:1;if(li(N)!=="number")return Eo(k.default,C.default);var he=k.stops.length;if(he===1||N<=k.stops[0][0])return k.stops[0][1];if(N>=k.stops[he-1][0])return k.stops[he-1][1];var we=Ms(k.stops.map(function(Vt){return Vt[0]}),N),Me=Ns(N,te,k.stops[we][0],k.stops[we+1][0]),Ne=k.stops[we][1],tt=k.stops[we+1][1],vt=el[C.type]||Si;if(k.colorSpace&&k.colorSpace!=="rgb"){var yt=Il[k.colorSpace];vt=function(Vt,or){return yt.reverse(yt.interpolate(yt.forward(Vt),yt.forward(or),Me))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var or=[],nr=arguments.length;nr--;)or[nr]=arguments[nr];var xr=Ne.evaluate.apply(void 0,or),Ur=tt.evaluate.apply(void 0,or);if(!(xr===void 0||Ur===void 0))return vt(xr,Ur,Me)}}:vt(Ne,tt,Me)}function al(k,C,N){return C.type==="color"?N=Ai.parse(N):C.type==="formatted"?N=ji.fromString(N.toString()):C.type==="resolvedImage"?N=Io.fromString(N.toString()):li(N)!==C.type&&(C.type!=="enum"||!C.values[N])&&(N=void 0),Eo(N,k.default,C.default)}function Ns(k,C,N,te){var he=te-N,we=k-N;return he===0?0:C===1?we/he:(Math.pow(C,we)-1)/(Math.pow(C,he)-1)}var zo=function(C,N){this.expression=C,this._warningHistory={},this._evaluator=new Ds,this._defaultValue=N?Wu(N):null,this._enumValues=N&&N.type==="enum"?N.values:null};zo.prototype.evaluateWithoutErrorHandling=function(C,N,te,he,we,Me){return this._evaluator.globals=C,this._evaluator.feature=N,this._evaluator.featureState=te,this._evaluator.canonical=he,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},zo.prototype.evaluate=function(C,N,te,he,we,Me){this._evaluator.globals=C,this._evaluator.feature=N||null,this._evaluator.featureState=te||null,this._evaluator.canonical=he,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!==Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new Fi("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console<"u"&&console.warn(tt.message)),this._defaultValue}};function Po(k){return Array.isArray(k)&&k.length>0&&typeof k[0]=="string"&&k[0]in aa}function Jl(k,C){var N=new Fo(aa,[],C?hu(C):void 0),te=N.parse(k,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return te?wi(new zo(te,C)):Li(N.errors)}var cu=function(C,N){this.kind=C,this._styleExpression=N,this.isStateDependent=C!=="constant"&&!qs(N.expression)};cu.prototype.evaluateWithoutErrorHandling=function(C,N,te,he,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,N,te,he,we,Me)},cu.prototype.evaluate=function(C,N,te,he,we,Me){return this._styleExpression.evaluate(C,N,te,he,we,Me)};var gs=function(C,N,te,he){this.kind=C,this.zoomStops=te,this._styleExpression=N,this.isStateDependent=C!=="camera"&&!qs(N.expression),this.interpolationType=he};gs.prototype.evaluateWithoutErrorHandling=function(C,N,te,he,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,N,te,he,we,Me)},gs.prototype.evaluate=function(C,N,te,he,we,Me){return this._styleExpression.evaluate(C,N,te,he,we,Me)},gs.prototype.interpolationFactor=function(C,N,te){return this.interpolationType?uo.interpolationFactor(this.interpolationType,C,N,te):0};function Lu(k,C){if(k=Jl(k,C),k.result==="error")return k;var N=k.value.expression,te=Wo(N);if(!te&&!hi(C))return Li([new Tn("","data expressions not supported")]);var he=lu(N,["zoom"]);if(!he&&!Co(C))return Li([new Tn("","zoom expressions not supported")]);var we=Yu(N);if(!we&&!he)return Li([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(we instanceof Tn)return Li([we]);if(we instanceof uo&&!ao(C))return Li([new Tn("",'"interpolate" expressions cannot be used with this property')]);if(!we)return wi(te?new cu("constant",k.value):new cu("source",k.value));var Me=we instanceof uo?we.interpolation:void 0;return wi(te?new gs("camera",k.value,we.labels,Me):new gs("composite",k.value,we.labels,Me))}var $l=function(C,N){this._parameters=C,this._specification=N,yn(this,_o(this._parameters,this._specification))};$l.deserialize=function(C){return new $l(C._parameters,C._specification)},$l.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function Of(k,C){if(Aa(k))return new $l(k,C);if(Po(k)){var N=Lu(k,C);if(N.result==="error")throw new Error(N.value.map(function(he){return he.key+": "+he.message}).join(", "));return N.value}else{var te=k;return typeof k=="string"&&C.type==="color"&&(te=Ai.parse(k)),{kind:"constant",evaluate:function(){return te}}}}function Yu(k){var C=null;if(k instanceof Xs)C=Yu(k.result);else if(k instanceof Xo)for(var N=0,te=k.args;N<te.length;N+=1){var he=te[N];if(C=Yu(he),C)break}else(k instanceof Fs||k instanceof uo)&&k.input instanceof No&&k.input.name==="zoom"&&(C=k);return C instanceof Tn||k.eachChild(function(we){var Me=Yu(we);Me instanceof Tn?C=Me:!C&&Me?C=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&Me&&C!==Me&&(C=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function hu(k){var C={color:Yn,string:Br,number:wr,enum:Br,boolean:An,formatted:Ma,resolvedImage:ka};return k.type==="array"?ga(C[k.value]||Sn,k.length):C[k.type]}function Wu(k){return k.type==="color"&&Aa(k.default)?new Ai(0,0,0,0):k.type==="color"?Ai.parse(k.default)||null:k.default===void 0?null:k.default}function Ss(k){var C=k.key,N=k.value,te=k.valueSpec||{},he=k.objectElementValidators||{},we=k.style,Me=k.styleSpec,Ne=[],tt=li(N);if(tt!=="object")return[new gr(C,N,"object expected, "+tt+" found")];for(var vt in N){var yt=vt.split(".")[0],Vt=te[yt]||te["*"],or=void 0;if(he[yt])or=he[yt];else if(te[yt])or=Ti;else if(he["*"])or=he["*"];else if(te["*"])or=Ti;else{Ne.push(new gr(C,N[vt],'unknown property "'+vt+'"'));continue}Ne=Ne.concat(or({key:(C&&C+".")+vt,value:N[vt],valueSpec:Vt,style:we,styleSpec:Me,object:N,objectKey:vt},N))}for(var nr in te)he[nr]||te[nr].required&&te[nr].default===void 0&&N[nr]===void 0&&Ne.push(new gr(C,N,'missing required property "'+nr+'"'));return Ne}function yl(k){var C=k.value,N=k.valueSpec,te=k.style,he=k.styleSpec,we=k.key,Me=k.arrayElementValidator||Ti;if(li(C)!=="array")return[new gr(we,C,"array expected, "+li(C)+" found")];if(N.length&&C.length!==N.length)return[new gr(we,C,"array length "+N.length+" expected, length "+C.length+" found")];if(N["min-length"]&&C.length<N["min-length"])return[new gr(we,C,"array length at least "+N["min-length"]+" expected, length "+C.length+" found")];var Ne={type:N.value,values:N.values};he.$version<7&&(Ne.function=N.function),li(N.value)==="object"&&(Ne=N.value);for(var tt=[],vt=0;vt<C.length;vt++)tt=tt.concat(Me({array:C,arrayIndex:vt,value:C[vt],valueSpec:Ne,style:te,styleSpec:he,key:we+"["+vt+"]"}));return tt}function Pu(k){var C=k.key,N=k.value,te=k.valueSpec,he=li(N);return he==="number"&&N!==N&&(he="NaN"),he!=="number"?[new gr(C,N,"number expected, "+he+" found")]:"minimum"in te&&N<te.minimum?[new gr(C,N,N+" is less than the minimum value "+te.minimum)]:"maximum"in te&&N>te.maximum?[new gr(C,N,N+" is greater than the maximum value "+te.maximum)]:[]}function vu(k){var C=k.valueSpec,N=sn(k.value.type),te,he={},we,Me,Ne=N!=="categorical"&&k.value.property===void 0,tt=!Ne,vt=li(k.value.stops)==="array"&&li(k.value.stops[0])==="array"&&li(k.value.stops[0][0])==="object",yt=Ss({key:k.key,value:k.value,valueSpec:k.styleSpec.function,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{stops:Vt,default:xr}});return N==="identity"&&Ne&&yt.push(new gr(k.key,k.value,'missing required property "property"')),N!=="identity"&&!k.value.stops&&yt.push(new gr(k.key,k.value,'missing required property "stops"')),N==="exponential"&&k.valueSpec.expression&&!ao(k.valueSpec)&&yt.push(new gr(k.key,k.value,"exponential functions not supported")),k.styleSpec.$version>=8&&(tt&&!hi(k.valueSpec)?yt.push(new gr(k.key,k.value,"property functions not supported")):Ne&&!Co(k.valueSpec)&&yt.push(new gr(k.key,k.value,"zoom functions not supported"))),(N==="categorical"||vt)&&k.value.property===void 0&&yt.push(new gr(k.key,k.value,'"property" property is required')),yt;function Vt(Ur){if(N==="identity")return[new gr(Ur.key,Ur.value,'identity function may not have a "stops" property')];var hn=[],an=Ur.value;return hn=hn.concat(yl({key:Ur.key,value:an,valueSpec:Ur.valueSpec,style:Ur.style,styleSpec:Ur.styleSpec,arrayElementValidator:or})),li(an)==="array"&&an.length===0&&hn.push(new gr(Ur.key,an,"array must have at least one stop")),hn}function or(Ur){var hn=[],an=Ur.value,Rn=Ur.key;if(li(an)!=="array")return[new gr(Rn,an,"array expected, "+li(an)+" found")];if(an.length!==2)return[new gr(Rn,an,"array length 2 expected, length "+an.length+" found")];if(vt){if(li(an[0])!=="object")return[new gr(Rn,an,"object expected, "+li(an[0])+" found")];if(an[0].zoom===void 0)return[new gr(Rn,an,"object stop key must have zoom")];if(an[0].value===void 0)return[new gr(Rn,an,"object stop key must have value")];if(Me&&Me>sn(an[0].zoom))return[new gr(Rn,an[0].zoom,"stop zoom values must appear in ascending order")];sn(an[0].zoom)!==Me&&(Me=sn(an[0].zoom),we=void 0,he={}),hn=hn.concat(Ss({key:Rn+"[0]",value:an[0],valueSpec:{zoom:{}},style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{zoom:Pu,value:nr}}))}else hn=hn.concat(nr({key:Rn+"[0]",value:an[0],valueSpec:{},style:Ur.style,styleSpec:Ur.styleSpec},an));return Po(Cn(an[1]))?hn.concat([new gr(Rn+"[1]",an[1],"expressions are not allowed in function stops.")]):hn.concat(Ti({key:Rn+"[1]",value:an[1],valueSpec:C,style:Ur.style,styleSpec:Ur.styleSpec}))}function nr(Ur,hn){var an=li(Ur.value),Rn=sn(Ur.value),Mn=Ur.value!==null?Ur.value:hn;if(!te)te=an;else if(an!==te)return[new gr(Ur.key,Mn,an+" stop domain type must match previous stop domain type "+te)];if(an!=="number"&&an!=="string"&&an!=="boolean")return[new gr(Ur.key,Mn,"stop domain value must be a number, string, or boolean")];if(an!=="number"&&N!=="categorical"){var Dn="number expected, "+an+" found";return hi(C)&&N===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gr(Ur.key,Mn,Dn)]}return N==="categorical"&&an==="number"&&(!isFinite(Rn)||Math.floor(Rn)!==Rn)?[new gr(Ur.key,Mn,"integer expected, found "+Rn)]:N!=="categorical"&&an==="number"&&we!==void 0&&Rn<we?[new gr(Ur.key,Mn,"stop domain values must appear in ascending order")]:(we=Rn,N==="categorical"&&Rn in he?[new gr(Ur.key,Mn,"stop domain values must be unique")]:(he[Rn]=!0,[]))}function xr(Ur){return Ti({key:Ur.key,value:Ur.value,valueSpec:C,style:Ur.style,styleSpec:Ur.styleSpec})}}function jo(k){var C=(k.expressionContext==="property"?Lu:Jl)(Cn(k.value),k.valueSpec);if(C.result==="error")return C.value.map(function(te){return new gr(""+k.key+te.key,k.value,te.message)});var N=C.value.expression||C.value._styleExpression.expression;if(k.expressionContext==="property"&&k.propertyKey==="text-font"&&!N.outputDefined())return[new gr(k.key,k.value,'Invalid data expression for "'+k.propertyKey+'". Output values must be contained as literals within the expression.')];if(k.expressionContext==="property"&&k.propertyType==="layout"&&!qs(N))return[new gr(k.key,k.value,'"feature-state" data expressions are not supported with layout properties.')];if(k.expressionContext==="filter"&&!qs(N))return[new gr(k.key,k.value,'"feature-state" data expressions are not supported with filters.')];if(k.expressionContext&&k.expressionContext.indexOf("cluster")===0){if(!lu(N,["zoom","feature-state"]))return[new gr(k.key,k.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(k.expressionContext==="cluster-initial"&&!Wo(N))return[new gr(k.key,k.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xu(k){var C=k.value,N=k.key,te=li(C);return te!=="boolean"?[new gr(N,C,"boolean expected, "+te+" found")]:[]}function wf(k){var C=k.key,N=k.value,te=li(N);return te!=="string"?[new gr(C,N,"color expected, "+te+" found")]:Gl(N)===null?[new gr(C,N,'color expected, "'+N+'" found')]:[]}function rs(k){var C=k.key,N=k.value,te=k.valueSpec,he=[];return Array.isArray(te.values)?te.values.indexOf(sn(N))===-1&&he.push(new gr(C,N,"expected one of ["+te.values.join(", ")+"], "+JSON.stringify(N)+" found")):Object.keys(te.values).indexOf(sn(N))===-1&&he.push(new gr(C,N,"expected one of ["+Object.keys(te.values).join(", ")+"], "+JSON.stringify(N)+" found")),he}function Du(k){if(k===!0||k===!1)return!0;if(!Array.isArray(k)||k.length===0)return!1;switch(k[0]){case"has":return k.length>=2&&k[1]!=="$id"&&k[1]!=="$type";case"in":return k.length>=3&&(typeof k[1]!="string"||Array.isArray(k[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return k.length!==3||Array.isArray(k[1])||Array.isArray(k[2]);case"any":case"all":for(var C=0,N=k.slice(1);C<N.length;C+=1){var te=N[C];if(!Du(te)&&typeof te!="boolean")return!1}return!0;default:return!0}}var Ru={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ju(k){if(k==null)return{filter:function(){return!0},needGeometry:!1};Du(k)||(k=rt(k));var C=Jl(k,Ru);if(C.result==="error")throw new Error(C.value.map(function(te){return te.key+": "+te.message}).join(", "));var N=je(k);return{filter:function(te,he,we){return C.value.evaluate(te,he,{},we)},needGeometry:N}}function Oe(k,C){return k<C?-1:k>C?1:0}function je(k){if(!Array.isArray(k))return!1;if(k[0]==="within")return!0;for(var C=1;C<k.length;C++)if(je(k[C]))return!0;return!1}function rt(k){if(!k)return!0;var C=k[0];if(k.length<=1)return C!=="any";var N=C==="=="?lt(k[1],k[2],"=="):C==="!="?vr(lt(k[1],k[2],"==")):C==="<"||C===">"||C==="<="||C===">="?lt(k[1],k[2],C):C==="any"?Tt(k.slice(1)):C==="all"?["all"].concat(k.slice(1).map(rt)):C==="none"?["all"].concat(k.slice(1).map(rt).map(vr)):C==="in"?_t(k[1],k.slice(2)):C==="!in"?vr(_t(k[1],k.slice(2))):C==="has"?kt(k[1]):C==="!has"?vr(kt(k[1])):C==="within"?k:!0;return N}function lt(k,C,N){switch(k){case"$type":return["filter-type-"+N,C];case"$id":return["filter-id-"+N,C];default:return["filter-"+N,k,C]}}function Tt(k){return["any"].concat(k.map(rt))}function _t(k,C){if(C.length===0)return!1;switch(k){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(N){return typeof N!=typeof C[0]})?["filter-in-large",k,["literal",C.sort(Oe)]]:["filter-in-small",k,["literal",C]]}}function kt(k){switch(k){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",k]}}function vr(k){return["!",k]}function mr(k){return Du(Cn(k.value))?jo(yn({},k,{expressionContext:"filter",valueSpec:{value:"boolean"}})):hr(k)}function hr(k){var C=k.value,N=k.key;if(li(C)!=="array")return[new gr(N,C,"array expected, "+li(C)+" found")];var te=k.styleSpec,he,we=[];if(C.length<1)return[new gr(N,C,"filter array must have at least 1 element")];switch(we=we.concat(rs({key:N+"[0]",value:C[0],valueSpec:te.filter_operator,style:k.style,styleSpec:k.styleSpec})),sn(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&sn(C[1])==="$type"&&we.push(new gr(N,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&we.push(new gr(N,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(he=li(C[1]),he!=="string"&&we.push(new gr(N+"[1]",C[1],"string expected, "+he+" found")));for(var Me=2;Me<C.length;Me++)he=li(C[Me]),sn(C[1])==="$type"?we=we.concat(rs({key:N+"["+Me+"]",value:C[Me],valueSpec:te.geometry_type,style:k.style,styleSpec:k.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&we.push(new gr(N+"["+Me+"]",C[Me],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<C.length;Ne++)we=we.concat(hr({key:N+"["+Ne+"]",value:C[Ne],style:k.style,styleSpec:k.styleSpec}));break;case"has":case"!has":he=li(C[1]),C.length!==2?we.push(new gr(N,C,'filter array for "'+C[0]+'" operator must have 2 elements')):he!=="string"&&we.push(new gr(N+"[1]",C[1],"string expected, "+he+" found"));break;case"within":he=li(C[1]),C.length!==2?we.push(new gr(N,C,'filter array for "'+C[0]+'" operator must have 2 elements')):he!=="object"&&we.push(new gr(N+"[1]",C[1],"object expected, "+he+" found"));break}return we}function Tr(k,C){var N=k.key,te=k.style,he=k.styleSpec,we=k.value,Me=k.objectKey,Ne=he[C+"_"+k.layerType];if(!Ne)return[];var tt=Me.match(/^(.*)-transition$/);if(C==="paint"&&tt&&Ne[tt[1]]&&Ne[tt[1]].transition)return Ti({key:N,value:we,valueSpec:he.transition,style:te,styleSpec:he});var vt=k.valueSpec||Ne[Me];if(!vt)return[new gr(N,we,'unknown property "'+Me+'"')];var yt;if(li(we)==="string"&&hi(vt)&&!vt.tokens&&(yt=/^{([^}]+)}$/.exec(we)))return[new gr(N,we,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Vt=[];return k.layerType==="symbol"&&(Me==="text-field"&&te&&!te.glyphs&&Vt.push(new gr(N,we,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&Aa(Cn(we))&&sn(we.type)==="identity"&&Vt.push(new gr(N,we,'"text-font" does not support identity functions'))),Vt.concat(Ti({key:k.key,value:we,valueSpec:vt,style:te,styleSpec:he,expressionContext:"property",propertyType:C,propertyKey:Me}))}function Fr(k){return Tr(k,"paint")}function Qr(k){return Tr(k,"layout")}function on(k){var C=[],N=k.value,te=k.key,he=k.style,we=k.styleSpec;!N.type&&!N.ref&&C.push(new gr(te,N,'either "type" or "ref" is required'));var Me=sn(N.type),Ne=sn(N.ref);if(N.id)for(var tt=sn(N.id),vt=0;vt<k.arrayIndex;vt++){var yt=he.layers[vt];sn(yt.id)===tt&&C.push(new gr(te,N.id,'duplicate layer id "'+N.id+'", previously used at line '+yt.id.__line__))}if("ref"in N){["type","source","source-layer","filter","layout"].forEach(function(xr){xr in N&&C.push(new gr(te,N[xr],'"'+xr+'" is prohibited for ref layers'))});var Vt;he.layers.forEach(function(xr){sn(xr.id)===Ne&&(Vt=xr)}),Vt?Vt.ref?C.push(new gr(te,N.ref,"ref cannot reference another ref layer")):Me=sn(Vt.type):C.push(new gr(te,N.ref,'ref layer "'+Ne+'" not found'))}else if(Me!=="background")if(!N.source)C.push(new gr(te,N,'missing required property "source"'));else{var or=he.sources&&he.sources[N.source],nr=or&&sn(or.type);or?nr==="vector"&&Me==="raster"?C.push(new gr(te,N.source,'layer "'+N.id+'" requires a raster source')):nr==="raster"&&Me!=="raster"?C.push(new gr(te,N.source,'layer "'+N.id+'" requires a vector source')):nr==="vector"&&!N["source-layer"]?C.push(new gr(te,N,'layer "'+N.id+'" must specify a "source-layer"')):nr==="raster-dem"&&Me!=="hillshade"?C.push(new gr(te,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&N.paint&&N.paint["line-gradient"]&&(nr!=="geojson"||!or.lineMetrics)&&C.push(new gr(te,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new gr(te,N.source,'source "'+N.source+'" not found'))}return C=C.concat(Ss({key:te,value:N,valueSpec:we.layer,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ti({key:te+".type",value:N.type,valueSpec:we.layer.type,style:k.style,styleSpec:k.styleSpec,object:N,objectKey:"type"})},filter:mr,layout:function(Ur){return Ss({layer:N,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(an){return Qr(yn({layerType:Me},an))}}})},paint:function(Ur){return Ss({layer:N,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(an){return Fr(yn({layerType:Me},an))}}})}}})),C}function En(k){var C=k.value,N=k.key,te=li(C);return te!=="string"?[new gr(N,C,"string expected, "+te+" found")]:[]}var Nn={promoteId:Ta};function Jn(k){var C=k.value,N=k.key,te=k.styleSpec,he=k.style;if(!C.type)return[new gr(N,C,'"type" is required')];var we=sn(C.type),Me;switch(we){case"vector":case"raster":case"raster-dem":return Me=Ss({key:N,value:C,valueSpec:te["source_"+we.replace("-","_")],style:k.style,styleSpec:te,objectElementValidators:Nn}),Me;case"geojson":if(Me=Ss({key:N,value:C,valueSpec:te.source_geojson,style:he,styleSpec:te,objectElementValidators:Nn}),C.cluster)for(var Ne in C.clusterProperties){var tt=C.clusterProperties[Ne],vt=tt[0],yt=tt[1],Vt=typeof vt=="string"?[vt,["accumulated"],["get",Ne]]:vt;Me.push.apply(Me,jo({key:N+"."+Ne+".map",value:yt,expressionContext:"cluster-map"})),Me.push.apply(Me,jo({key:N+"."+Ne+".reduce",value:Vt,expressionContext:"cluster-reduce"}))}return Me;case"video":return Ss({key:N,value:C,valueSpec:te.source_video,style:he,styleSpec:te});case"image":return Ss({key:N,value:C,valueSpec:te.source_image,style:he,styleSpec:te});case"canvas":return[new gr(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rs({key:N+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:te})}}function Ta(k){var C=k.key,N=k.value;if(li(N)==="string")return En({key:C,value:N});var te=[];for(var he in N)te.push.apply(te,En({key:C+"."+he,value:N[he]}));return te}function Ea(k){var C=k.value,N=k.styleSpec,te=N.light,he=k.style,we=[],Me=li(C);if(C===void 0)return we;if(Me!=="object")return we=we.concat([new gr("light",C,"object expected, "+Me+" found")]),we;for(var Ne in C){var tt=Ne.match(/^(.*)-transition$/);tt&&te[tt[1]]&&te[tt[1]].transition?we=we.concat(Ti({key:Ne,value:C[Ne],valueSpec:N.transition,style:he,styleSpec:N})):te[Ne]?we=we.concat(Ti({key:Ne,value:C[Ne],valueSpec:te[Ne],style:he,styleSpec:N})):we=we.concat([new gr(Ne,C[Ne],'unknown property "'+Ne+'"')])}return we}function ni(k){return En(k).length===0?[]:jo(k)}function qa(k){return En(k).length===0?[]:jo(k)}var ai={"*":function(){return[]},array:yl,boolean:Xu,number:Pu,color:wf,constants:un,enum:rs,filter:mr,function:vu,layer:on,object:Ss,source:Jn,light:Ea,string:En,formatted:ni,resolvedImage:qa};function Ti(k){var C=k.value,N=k.valueSpec,te=k.styleSpec;if(N.expression&&Aa(sn(C)))return vu(k);if(N.expression&&Po(Cn(C)))return jo(k);if(N.type&&ai[N.type])return ai[N.type](k);var he=Ss(yn({},k,{valueSpec:N.type?te[N.type]:N}));return he}function Yr(k){var C=k.value,N=k.key,te=En(k);return te.length||(C.indexOf("{fontstack}")===-1&&te.push(new gr(N,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&te.push(new gr(N,C,'"glyphs" url must include a "{range}" token'))),te}function qe(k,C){C===void 0&&(C=Yt);var N=[];return N=N.concat(Ti({key:"",value:k,valueSpec:C.$root,styleSpec:C,style:k,objectElementValidators:{glyphs:Yr,"*":function(){return[]}}})),k.constants&&(N=N.concat(un({key:"constants",value:k.constants,style:k,styleSpec:C}))),$t(N)}qe.source=Jr(Jn),qe.light=Jr(Ea),qe.layer=Jr(on),qe.filter=Jr(mr),qe.paintProperty=Jr(Fr),qe.layoutProperty=Jr(Qr);function $t(k){return[].concat(k).sort(function(C,N){return C.line-N.line})}function Jr(k){return function(){for(var C=[],N=arguments.length;N--;)C[N]=arguments[N];return $t(k.apply(this,C))}}var Hn=qe,ta=Hn.light,ea=Hn.paintProperty,vi=Hn.layoutProperty;function Pi(k,C){var N=!1;if(C&&C.length)for(var te=0,he=C;te<he.length;te+=1){var we=he[te];k.fire(new Ar(new Error(we.message))),N=!0}return N}var Ki=le,Di=3;function le(k,C,N){var te=this.cells=[];if(k instanceof ArrayBuffer){this.arrayBuffer=k;var he=new Int32Array(this.arrayBuffer);k=he[0],C=he[1],N=he[2],this.d=C+2*N;for(var we=0;we<this.d*this.d;we++){var Me=he[Di+we],Ne=he[Di+we+1];te.push(Me===Ne?null:he.subarray(Me,Ne))}var tt=he[Di+te.length],vt=he[Di+te.length+1];this.keys=he.subarray(tt,vt),this.bboxes=he.subarray(vt),this.insert=this._insertReadonly}else{this.d=C+2*N;for(var yt=0;yt<this.d*this.d;yt++)te.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=k,this.padding=N,this.scale=C/k,this.uid=0;var Vt=N/C*k;this.min=-Vt,this.max=k+Vt}le.prototype.insert=function(k,C,N,te,he){this._forEachCell(C,N,te,he,this._insertCell,this.uid++),this.keys.push(k),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(te),this.bboxes.push(he)},le.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},le.prototype._insertCell=function(k,C,N,te,he,we){this.cells[he].push(we)},le.prototype.query=function(k,C,N,te,he){var we=this.min,Me=this.max;if(k<=we&&C<=we&&Me<=N&&Me<=te&&!he)return Array.prototype.slice.call(this.keys);var Ne=[],tt={};return this._forEachCell(k,C,N,te,this._queryCell,Ne,tt,he),Ne},le.prototype._queryCell=function(k,C,N,te,he,we,Me,Ne){var tt=this.cells[he];if(tt!==null)for(var vt=this.keys,yt=this.bboxes,Vt=0;Vt<tt.length;Vt++){var or=tt[Vt];if(Me[or]===void 0){var nr=or*4;(Ne?Ne(yt[nr+0],yt[nr+1],yt[nr+2],yt[nr+3]):k<=yt[nr+2]&&C<=yt[nr+3]&&N>=yt[nr+0]&&te>=yt[nr+1])?(Me[or]=!0,we.push(vt[or])):Me[or]=!1}}},le.prototype._forEachCell=function(k,C,N,te,he,we,Me,Ne){for(var tt=this._convertToCellCoord(k),vt=this._convertToCellCoord(C),yt=this._convertToCellCoord(N),Vt=this._convertToCellCoord(te),or=tt;or<=yt;or++)for(var nr=vt;nr<=Vt;nr++){var xr=this.d*nr+or;if(!(Ne&&!Ne(this._convertFromCellCoord(or),this._convertFromCellCoord(nr),this._convertFromCellCoord(or+1),this._convertFromCellCoord(nr+1)))&&he.call(this,k,C,N,te,xr,we,Me,Ne))return}},le.prototype._convertFromCellCoord=function(k){return(k-this.padding)/this.scale},le.prototype._convertToCellCoord=function(k){return Math.max(0,Math.min(this.d-1,Math.floor(k*this.scale)+this.padding))},le.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var k=this.cells,C=Di+this.cells.length+1+1,N=0,te=0;te<this.cells.length;te++)N+=this.cells[te].length;var he=new Int32Array(C+N+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var we=C,Me=0;Me<k.length;Me++){var Ne=k[Me];he[Di+Me]=we,he.set(Ne,we),we+=Ne.length}return he[Di+k.length]=we,he.set(this.keys,we),we+=this.keys.length,he[Di+k.length+1]=we,he.set(this.bboxes,we),we+=this.bboxes.length,he.buffer};var Te=self.ImageData,De=self.ImageBitmap,Ue={};function Be(k,C,N){N===void 0&&(N={}),Object.defineProperty(C,"_classRegistryKey",{value:k,writeable:!1}),Ue[k]={klass:C,omit:N.omit||[],shallow:N.shallow||[]}}Be("Object",Object),Ki.serialize=function(C,N){var te=C.toArrayBuffer();return N&&N.push(te),{buffer:te}},Ki.deserialize=function(C){return new Ki(C.buffer)},Be("Grid",Ki),Be("Color",Ai),Be("Error",Error),Be("ResolvedImage",Io),Be("StylePropertyFunction",$l),Be("StyleExpression",zo,{omit:["_evaluator"]}),Be("ZoomDependentExpression",gs),Be("ZoomConstantExpression",cu),Be("CompoundExpression",No,{omit:["_evaluate"]});for(var $e in aa)aa[$e]._classRegistryKey||Be("Expression_"+$e,aa[$e]);function wt(k){return k&&typeof ArrayBuffer<"u"&&(k instanceof ArrayBuffer||k.constructor&&k.constructor.name==="ArrayBuffer")}function gt(k){return De&&k instanceof De}function Ft(k,C){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp)return k;if(wt(k)||gt(k))return C&&C.push(k),k;if(ArrayBuffer.isView(k)){var N=k;return C&&C.push(N.buffer),N}if(k instanceof Te)return C&&C.push(k.data.buffer),k;if(Array.isArray(k)){for(var te=[],he=0,we=k;he<we.length;he+=1){var Me=we[he];te.push(Ft(Me,C))}return te}if(typeof k=="object"){var Ne=k.constructor,tt=Ne._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var vt=Ne.serialize?Ne.serialize(k,C):{};if(!Ne.serialize){for(var yt in k)if(!!k.hasOwnProperty(yt)&&!(Ue[tt].omit.indexOf(yt)>=0)){var Vt=k[yt];vt[yt]=Ue[tt].shallow.indexOf(yt)>=0?Vt:Ft(Vt,C)}k instanceof Error&&(vt.message=k.message)}if(vt.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(vt.$name=tt),vt}throw new Error("can't serialize object of type "+typeof k)}function qt(k){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp||wt(k)||gt(k)||ArrayBuffer.isView(k)||k instanceof Te)return k;if(Array.isArray(k))return k.map(qt);if(typeof k=="object"){var C=k.$name||"Object",N=Ue[C],te=N.klass;if(!te)throw new Error("can't deserialize unregistered class "+C);if(te.deserialize)return te.deserialize(k);for(var he=Object.create(te.prototype),we=0,Me=Object.keys(k);we<Me.length;we+=1){var Ne=Me[we];if(Ne!=="$name"){var tt=k[Ne];he[Ne]=Ue[C].shallow.indexOf(Ne)>=0?tt:qt(tt)}}return he}throw new Error("can't deserialize object of type "+typeof k)}var ar=function(){this.first=!0};ar.prototype.update=function(C,N){var te=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=te,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=te,!0):(this.lastFloorZoom>te?(this.lastIntegerZoom=te+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<te&&(this.lastIntegerZoom=te,this.lastIntegerZoomTime=N),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=te,!0):!1)};var ir={"Latin-1 Supplement":function(k){return k>=128&&k<=255},Arabic:function(k){return k>=1536&&k<=1791},"Arabic Supplement":function(k){return k>=1872&&k<=1919},"Arabic Extended-A":function(k){return k>=2208&&k<=2303},"Hangul Jamo":function(k){return k>=4352&&k<=4607},"Unified Canadian Aboriginal Syllabics":function(k){return k>=5120&&k<=5759},Khmer:function(k){return k>=6016&&k<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(k){return k>=6320&&k<=6399},"General Punctuation":function(k){return k>=8192&&k<=8303},"Letterlike Symbols":function(k){return k>=8448&&k<=8527},"Number Forms":function(k){return k>=8528&&k<=8591},"Miscellaneous Technical":function(k){return k>=8960&&k<=9215},"Control Pictures":function(k){return k>=9216&&k<=9279},"Optical Character Recognition":function(k){return k>=9280&&k<=9311},"Enclosed Alphanumerics":function(k){return k>=9312&&k<=9471},"Geometric Shapes":function(k){return k>=9632&&k<=9727},"Miscellaneous Symbols":function(k){return k>=9728&&k<=9983},"Miscellaneous Symbols and Arrows":function(k){return k>=11008&&k<=11263},"CJK Radicals Supplement":function(k){return k>=11904&&k<=12031},"Kangxi Radicals":function(k){return k>=12032&&k<=12255},"Ideographic Description Characters":function(k){return k>=12272&&k<=12287},"CJK Symbols and Punctuation":function(k){return k>=12288&&k<=12351},Hiragana:function(k){return k>=12352&&k<=12447},Katakana:function(k){return k>=12448&&k<=12543},Bopomofo:function(k){return k>=12544&&k<=12591},"Hangul Compatibility Jamo":function(k){return k>=12592&&k<=12687},Kanbun:function(k){return k>=12688&&k<=12703},"Bopomofo Extended":function(k){return k>=12704&&k<=12735},"CJK Strokes":function(k){return k>=12736&&k<=12783},"Katakana Phonetic Extensions":function(k){return k>=12784&&k<=12799},"Enclosed CJK Letters and Months":function(k){return k>=12800&&k<=13055},"CJK Compatibility":function(k){return k>=13056&&k<=13311},"CJK Unified Ideographs Extension A":function(k){return k>=13312&&k<=19903},"Yijing Hexagram Symbols":function(k){return k>=19904&&k<=19967},"CJK Unified Ideographs":function(k){return k>=19968&&k<=40959},"Yi Syllables":function(k){return k>=40960&&k<=42127},"Yi Radicals":function(k){return k>=42128&&k<=42191},"Hangul Jamo Extended-A":function(k){return k>=43360&&k<=43391},"Hangul Syllables":function(k){return k>=44032&&k<=55215},"Hangul Jamo Extended-B":function(k){return k>=55216&&k<=55295},"Private Use Area":function(k){return k>=57344&&k<=63743},"CJK Compatibility Ideographs":function(k){return k>=63744&&k<=64255},"Arabic Presentation Forms-A":function(k){return k>=64336&&k<=65023},"Vertical Forms":function(k){return k>=65040&&k<=65055},"CJK Compatibility Forms":function(k){return k>=65072&&k<=65103},"Small Form Variants":function(k){return k>=65104&&k<=65135},"Arabic Presentation Forms-B":function(k){return k>=65136&&k<=65279},"Halfwidth and Fullwidth Forms":function(k){return k>=65280&&k<=65519}};function Cr(k){for(var C=0,N=k;C<N.length;C+=1){var te=N[C];if(Wr(te.charCodeAt(0)))return!0}return!1}function nn(k){for(var C=0,N=k;C<N.length;C+=1){var te=N[C];if(!pn(te.charCodeAt(0)))return!1}return!0}function pn(k){return!(ir.Arabic(k)||ir["Arabic Supplement"](k)||ir["Arabic Extended-A"](k)||ir["Arabic Presentation Forms-A"](k)||ir["Arabic Presentation Forms-B"](k))}function Ir(k){return k<11904?!1:!!(ir["Bopomofo Extended"](k)||ir.Bopomofo(k)||ir["CJK Compatibility Forms"](k)||ir["CJK Compatibility Ideographs"](k)||ir["CJK Compatibility"](k)||ir["CJK Radicals Supplement"](k)||ir["CJK Strokes"](k)||ir["CJK Symbols and Punctuation"](k)||ir["CJK Unified Ideographs Extension A"](k)||ir["CJK Unified Ideographs"](k)||ir["Enclosed CJK Letters and Months"](k)||ir["Halfwidth and Fullwidth Forms"](k)||ir.Hiragana(k)||ir["Ideographic Description Characters"](k)||ir["Kangxi Radicals"](k)||ir["Katakana Phonetic Extensions"](k)||ir.Katakana(k)||ir["Vertical Forms"](k)||ir["Yi Radicals"](k)||ir["Yi Syllables"](k))}function Wr(k){return k===746||k===747?!0:k<4352?!1:!!(ir["Bopomofo Extended"](k)||ir.Bopomofo(k)||ir["CJK Compatibility Forms"](k)&&!(k>=65097&&k<=65103)||ir["CJK Compatibility Ideographs"](k)||ir["CJK Compatibility"](k)||ir["CJK Radicals Supplement"](k)||ir["CJK Strokes"](k)||ir["CJK Symbols and Punctuation"](k)&&!(k>=12296&&k<=12305)&&!(k>=12308&&k<=12319)&&k!==12336||ir["CJK Unified Ideographs Extension A"](k)||ir["CJK Unified Ideographs"](k)||ir["Enclosed CJK Letters and Months"](k)||ir["Hangul Compatibility Jamo"](k)||ir["Hangul Jamo Extended-A"](k)||ir["Hangul Jamo Extended-B"](k)||ir["Hangul Jamo"](k)||ir["Hangul Syllables"](k)||ir.Hiragana(k)||ir["Ideographic Description Characters"](k)||ir.Kanbun(k)||ir["Kangxi Radicals"](k)||ir["Katakana Phonetic Extensions"](k)||ir.Katakana(k)&&k!==12540||ir["Halfwidth and Fullwidth Forms"](k)&&k!==65288&&k!==65289&&k!==65293&&!(k>=65306&&k<=65310)&&k!==65339&&k!==65341&&k!==65343&&!(k>=65371&&k<=65503)&&k!==65507&&!(k>=65512&&k<=65519)||ir["Small Form Variants"](k)&&!(k>=65112&&k<=65118)&&!(k>=65123&&k<=65126)||ir["Unified Canadian Aboriginal Syllabics"](k)||ir["Unified Canadian Aboriginal Syllabics Extended"](k)||ir["Vertical Forms"](k)||ir["Yijing Hexagram Symbols"](k)||ir["Yi Syllables"](k)||ir["Yi Radicals"](k))}function qr(k){return!!(ir["Latin-1 Supplement"](k)&&(k===167||k===169||k===174||k===177||k===188||k===189||k===190||k===215||k===247)||ir["General Punctuation"](k)&&(k===8214||k===8224||k===8225||k===8240||k===8241||k===8251||k===8252||k===8258||k===8263||k===8264||k===8265||k===8273)||ir["Letterlike Symbols"](k)||ir["Number Forms"](k)||ir["Miscellaneous Technical"](k)&&(k>=8960&&k<=8967||k>=8972&&k<=8991||k>=8996&&k<=9e3||k===9003||k>=9085&&k<=9114||k>=9150&&k<=9165||k===9167||k>=9169&&k<=9179||k>=9186&&k<=9215)||ir["Control Pictures"](k)&&k!==9251||ir["Optical Character Recognition"](k)||ir["Enclosed Alphanumerics"](k)||ir["Geometric Shapes"](k)||ir["Miscellaneous Symbols"](k)&&!(k>=9754&&k<=9759)||ir["Miscellaneous Symbols and Arrows"](k)&&(k>=11026&&k<=11055||k>=11088&&k<=11097||k>=11192&&k<=11243)||ir["CJK Symbols and Punctuation"](k)||ir.Katakana(k)||ir["Private Use Area"](k)||ir["CJK Compatibility Forms"](k)||ir["Small Form Variants"](k)||ir["Halfwidth and Fullwidth Forms"](k)||k===8734||k===8756||k===8757||k>=9984&&k<=10087||k>=10102&&k<=10131||k===65532||k===65533)}function fn(k){return!(Wr(k)||qr(k))}function vn(k){return ir.Arabic(k)||ir["Arabic Supplement"](k)||ir["Arabic Extended-A"](k)||ir["Arabic Presentation Forms-A"](k)||ir["Arabic Presentation Forms-B"](k)}function tn(k){return k>=1424&&k<=2303||ir["Arabic Presentation Forms-A"](k)||ir["Arabic Presentation Forms-B"](k)}function Zn(k,C){return!(!C&&tn(k)||k>=2304&&k<=3583||k>=3840&&k<=4255||ir.Khmer(k))}function ha(k){for(var C=0,N=k;C<N.length;C+=1){var te=N[C];if(tn(te.charCodeAt(0)))return!0}return!1}function Pa(k,C){for(var N=0,te=k;N<te.length;N+=1){var he=te[N];if(!Zn(he.charCodeAt(0),C))return!1}return!0}var pa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Na=null,xa=pa.unavailable,$a=null,Va=function(k){k&&typeof k=="string"&&k.indexOf("NetworkError")>-1&&(xa=pa.error),Na&&Na(k)};function ui(){Ci.fire(new Pr("pluginStateChange",{pluginStatus:xa,pluginURL:$a}))}var Ci=new kr,Do=function(){return xa},Ji=function(k){return k({pluginStatus:xa,pluginURL:$a}),Ci.on("pluginStateChange",k),k},_a=function(k,C,N){if(N===void 0&&(N=!1),xa===pa.deferred||xa===pa.loading||xa===pa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");$a=Q.resolveURL(k),xa=pa.deferred,Na=C,ui(),N||di()},di=function(){if(xa!==pa.deferred||!$a)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xa=pa.loading,ui(),$a&&ct({url:$a},function(k){k?Va(k):(xa=pa.loaded,ui())})},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xa===pa.loaded||ii.applyArabicShaping!=null},isLoading:function(){return xa===pa.loading},setState:function(C){xa=C.pluginStatus,$a=C.pluginURL},isParsed:function(){return ii.applyArabicShaping!=null&&ii.processBidirectionalText!=null&&ii.processStyledBidirectionalText!=null},getPluginURL:function(){return $a}},Ui=function(){!ii.isLoading()&&!ii.isLoaded()&&Do()==="deferred"&&di()},yi=function(C,N){this.zoom=C,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ar,this.transition={})};yi.prototype.isSupportedScript=function(C){return Pa(C,ii.isLoaded())},yi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},yi.prototype.getCrossfadeParameters=function(){var C=this.zoom,N=C-Math.floor(C),te=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*te}:{fromScale:.5,toScale:1,t:1-(1-te)*N}};var So=function(C,N){this.property=C,this.value=N,this.expression=Of(N===void 0?C.specification.default:N,C.specification)};So.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},So.prototype.possiblyEvaluate=function(C,N,te){return this.property.possiblyEvaluate(this,C,N,te)};var mo=function(C){this.property=C,this.value=new So(C,void 0)};mo.prototype.transitioned=function(C,N){return new ms(this.property,this.value,N,A({},C.transition,this.transition),C.now)},mo.prototype.untransitioned=function(){return new ms(this.property,this.value,null,{},0)};var Oo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};Oo.prototype.getValue=function(C){return I(this._values[C].value.value)},Oo.prototype.setValue=function(C,N){this._values.hasOwnProperty(C)||(this._values[C]=new mo(this._values[C].property)),this._values[C].value=new So(this._values[C].property,N===null?void 0:I(N))},Oo.prototype.getTransition=function(C){return I(this._values[C].transition)},Oo.prototype.setTransition=function(C,N){this._values.hasOwnProperty(C)||(this._values[C]=new mo(this._values[C].property)),this._values[C].transition=I(N)||void 0},Oo.prototype.serialize=function(){for(var C={},N=0,te=Object.keys(this._values);N<te.length;N+=1){var he=te[N],we=this.getValue(he);we!==void 0&&(C[he]=we);var Me=this.getTransition(he);Me!==void 0&&(C[he+"-transition"]=Me)}return C},Oo.prototype.transitioned=function(C,N){for(var te=new ns(this._properties),he=0,we=Object.keys(this._values);he<we.length;he+=1){var Me=we[he];te._values[Me]=this._values[Me].transitioned(C,N._values[Me])}return te},Oo.prototype.untransitioned=function(){for(var C=new ns(this._properties),N=0,te=Object.keys(this._values);N<te.length;N+=1){var he=te[N];C._values[he]=this._values[he].untransitioned()}return C};var ms=function(C,N,te,he,we){this.property=C,this.value=N,this.begin=we+he.delay||0,this.end=this.begin+he.duration||0,C.specification.transition&&(he.delay||he.duration)&&(this.prior=te)};ms.prototype.possiblyEvaluate=function(C,N,te){var he=C.now||0,we=this.value.possiblyEvaluate(C,N,te),Me=this.prior;if(Me){if(he>this.end)return this.prior=null,we;if(this.value.isDataDriven())return this.prior=null,we;if(he<this.begin)return Me.possiblyEvaluate(C,N,te);var Ne=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(C,N,te),we,b(Ne))}else return we};var ns=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};ns.prototype.possiblyEvaluate=function(C,N,te){for(var he=new eo(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Ne=Me[we];he._values[Ne]=this._values[Ne].possiblyEvaluate(C,N,te)}return he},ns.prototype.hasTransition=function(){for(var C=0,N=Object.keys(this._values);C<N.length;C+=1){var te=N[C];if(this._values[te].prior)return!0}return!1};var ys=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};ys.prototype.getValue=function(C){return I(this._values[C].value)},ys.prototype.setValue=function(C,N){this._values[C]=new So(this._values[C].property,N===null?void 0:I(N))},ys.prototype.serialize=function(){for(var C={},N=0,te=Object.keys(this._values);N<te.length;N+=1){var he=te[N],we=this.getValue(he);we!==void 0&&(C[he]=we)}return C},ys.prototype.possiblyEvaluate=function(C,N,te){for(var he=new eo(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Ne=Me[we];he._values[Ne]=this._values[Ne].possiblyEvaluate(C,N,te)}return he};var io=function(C,N,te){this.property=C,this.value=N,this.parameters=te};io.prototype.isConstant=function(){return this.value.kind==="constant"},io.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},io.prototype.evaluate=function(C,N,te,he){return this.property.evaluate(this.value,this.parameters,C,N,te,he)};var eo=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};eo.prototype.get=function(C){return this._values[C]};var Za=function(C){this.specification=C};Za.prototype.possiblyEvaluate=function(C,N){return C.expression.evaluate(N)},Za.prototype.interpolate=function(C,N,te){var he=el[this.specification.type];return he?he(C,N,te):C};var oi=function(C,N){this.specification=C,this.overrides=N};oi.prototype.possiblyEvaluate=function(C,N,te,he){return C.expression.kind==="constant"||C.expression.kind==="camera"?new io(this,{kind:"constant",value:C.expression.evaluate(N,null,{},te,he)},N):new io(this,C.expression,N)},oi.prototype.interpolate=function(C,N,te){if(C.value.kind!=="constant"||N.value.kind!=="constant")return C;if(C.value.value===void 0||N.value.value===void 0)return new io(this,{kind:"constant",value:void 0},C.parameters);var he=el[this.specification.type];return he?new io(this,{kind:"constant",value:he(C.value.value,N.value.value,te)},C.parameters):C},oi.prototype.evaluate=function(C,N,te,he,we,Me){return C.kind==="constant"?C.value:C.evaluate(N,te,he,we,Me)};var Uo=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,he,we,Me){if(te.value===void 0)return new io(this,{kind:"constant",value:void 0},he);if(te.expression.kind==="constant"){var Ne=te.expression.evaluate(he,null,{},we,Me),tt=te.property.specification.type==="resolvedImage",vt=tt&&typeof Ne!="string"?Ne.name:Ne,yt=this._calculate(vt,vt,vt,he);return new io(this,{kind:"constant",value:yt},he)}else if(te.expression.kind==="camera"){var Vt=this._calculate(te.expression.evaluate({zoom:he.zoom-1}),te.expression.evaluate({zoom:he.zoom}),te.expression.evaluate({zoom:he.zoom+1}),he);return new io(this,{kind:"constant",value:Vt},he)}else return new io(this,te.expression,he)},C.prototype.evaluate=function(te,he,we,Me,Ne,tt){if(te.kind==="source"){var vt=te.evaluate(he,we,Me,Ne,tt);return this._calculate(vt,vt,vt,he)}else return te.kind==="composite"?this._calculate(te.evaluate({zoom:Math.floor(he.zoom)-1},we,Me),te.evaluate({zoom:Math.floor(he.zoom)},we,Me),te.evaluate({zoom:Math.floor(he.zoom)+1},we,Me),he):te.value},C.prototype._calculate=function(te,he,we,Me){var Ne=Me.zoom;return Ne>Me.zoomHistory.lastIntegerZoom?{from:te,to:he}:{from:we,to:he}},C.prototype.interpolate=function(te){return te},C}(oi),wo=function(C){this.specification=C};wo.prototype.possiblyEvaluate=function(C,N,te,he){if(C.value!==void 0)if(C.expression.kind==="constant"){var we=C.expression.evaluate(N,null,{},te,he);return this._calculate(we,we,we,N)}else return this._calculate(C.expression.evaluate(new yi(Math.floor(N.zoom-1),N)),C.expression.evaluate(new yi(Math.floor(N.zoom),N)),C.expression.evaluate(new yi(Math.floor(N.zoom+1),N)),N)},wo.prototype._calculate=function(C,N,te,he){var we=he.zoom;return we>he.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:te,to:N}},wo.prototype.interpolate=function(C){return C};var $o=function(C){this.specification=C};$o.prototype.possiblyEvaluate=function(C,N,te,he){return!!C.expression.evaluate(N,null,{},te,he)},$o.prototype.interpolate=function(){return!1};var fo=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var N in C){var te=C[N];te.specification.overridable&&this.overridableProperties.push(N);var he=this.defaultPropertyValues[N]=new So(te,void 0),we=this.defaultTransitionablePropertyValues[N]=new mo(te);this.defaultTransitioningPropertyValues[N]=we.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=he.possiblyEvaluate({})}};Be("DataDrivenProperty",oi),Be("DataConstantProperty",Za),Be("CrossFadedDataDrivenProperty",Uo),Be("CrossFadedProperty",wo),Be("ColorRampProperty",$o);var xs="-transition",js=function(k){function C(N,te){if(k.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},N.type!=="custom"&&(N=N,this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,N.type!=="background"&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),te.layout&&(this._unevaluatedLayout=new ys(te.layout)),te.paint)){this._transitionablePaint=new Oo(te.paint);for(var he in N.paint)this.setPaintProperty(he,N.paint[he],{validate:!1});for(var we in N.layout)this.setLayoutProperty(we,N.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eo(te.paint)}}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(te){return te==="visibility"?this.visibility:this._unevaluatedLayout.getValue(te)},C.prototype.setLayoutProperty=function(te,he,we){if(we===void 0&&(we={}),he!=null){var Me="layers."+this.id+".layout."+te;if(this._validate(vi,Me,te,he,we))return}if(te==="visibility"){this.visibility=he;return}this._unevaluatedLayout.setValue(te,he)},C.prototype.getPaintProperty=function(te){return S(te,xs)?this._transitionablePaint.getTransition(te.slice(0,-xs.length)):this._transitionablePaint.getValue(te)},C.prototype.setPaintProperty=function(te,he,we){if(we===void 0&&(we={}),he!=null){var Me="layers."+this.id+".paint."+te;if(this._validate(ea,Me,te,he,we))return!1}if(S(te,xs))return this._transitionablePaint.setTransition(te.slice(0,-xs.length),he||void 0),!1;var Ne=this._transitionablePaint._values[te],tt=Ne.property.specification["property-type"]==="cross-faded-data-driven",vt=Ne.value.isDataDriven(),yt=Ne.value;this._transitionablePaint.setValue(te,he),this._handleSpecialPaintPropertyUpdate(te);var Vt=this._transitionablePaint._values[te].value,or=Vt.isDataDriven();return or||vt||tt||this._handleOverridablePaintPropertyUpdate(te,yt,Vt)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){},C.prototype._handleOverridablePaintPropertyUpdate=function(te,he,we){return!1},C.prototype.isHidden=function(te){return this.minzoom&&te<this.minzoom||this.maxzoom&&te>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(te){this._transitioningPaint=this._transitionablePaint.transitioned(te,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(te,he){te.getCrossfadeParameters&&(this._crossfadeParameters=te.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(te,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate(te,void 0,he)},C.prototype.serialize=function(){var te={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(te.layout=te.layout||{},te.layout.visibility=this.visibility),F(te,function(he,we){return he!==void 0&&!(we==="layout"&&!Object.keys(he).length)&&!(we==="paint"&&!Object.keys(he).length)})},C.prototype._validate=function(te,he,we,Me,Ne){return Ne===void 0&&(Ne={}),Ne&&Ne.validate===!1?!1:Pi(this,te.call(Hn,{key:he,layerType:this.type,objectKey:we,value:Me,styleSpec:Yt,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var te in this.paint._values){var he=this.paint.get(te);if(!(!(he instanceof io)||!hi(he.property.specification))&&(he.value.kind==="source"||he.value.kind==="composite")&&he.value.isStateDependent)return!0}return!1},C}(kr),Iu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},co=function(C,N){this._structArray=C,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},qf=128,pu=5,qi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};qi.serialize=function(C,N){return C._trim(),N&&(C.isTransferred=!0,N.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},qi.deserialize=function(C){var N=Object.create(this.prototype);return N.arrayBuffer=C.arrayBuffer,N.length=C.length,N.capacity=C.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},qi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qi.prototype.clear=function(){this.length=0},qi.prototype.resize=function(C){this.reserve(C),this.length=C},qi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*pu),qf),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},qi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Qo(k,C){C===void 0&&(C=1);var N=0,te=0,he=k.map(function(Me){var Ne=_d(Me.type),tt=N=eh(N,Math.max(C,Ne)),vt=Me.components||1;return te=Math.max(te,Ne),N+=Ne*vt,{name:Me.name,type:Me.type,components:vt,offset:tt}}),we=eh(N,Math.max(te,C));return{members:he,size:we,alignment:C}}function _d(k){return Iu[k].BYTES_PER_ELEMENT}function eh(k,C){return Math.ceil(k/C)*C}var Sc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he){var we=this.length;return this.resize(we+1),this.emplace(we,te,he)},C.prototype.emplace=function(te,he,we){var Me=te*2;return this.int16[Me+0]=he,this.int16[Me+1]=we,te},C}(qi);Sc.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",Sc);var Tf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,he,we,Me)},C.prototype.emplace=function(te,he,we,Me,Ne){var tt=te*4;return this.int16[tt+0]=he,this.int16[tt+1]=we,this.int16[tt+2]=Me,this.int16[tt+3]=Ne,te},C}(qi);Tf.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",Tf);var ec=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,he,we,Me,Ne,tt)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt){var yt=te*6;return this.int16[yt+0]=he,this.int16[yt+1]=we,this.int16[yt+2]=Me,this.int16[yt+3]=Ne,this.int16[yt+4]=tt,this.int16[yt+5]=vt,te},C}(qi);ec.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",ec);var th=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,he,we,Me,Ne,tt)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt){var yt=te*4,Vt=te*8;return this.int16[yt+0]=he,this.int16[yt+1]=we,this.uint8[Vt+4]=Me,this.uint8[Vt+5]=Ne,this.uint8[Vt+6]=tt,this.uint8[Vt+7]=vt,te},C}(qi);th.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",th);var xl=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or){var nr=this.length;return this.resize(nr+1),this.emplace(nr,te,he,we,Me,Ne,tt,vt,yt,Vt,or)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr){var xr=te*9,Ur=te*18;return this.uint16[xr+0]=he,this.uint16[xr+1]=we,this.uint16[xr+2]=Me,this.uint16[xr+3]=Ne,this.uint16[xr+4]=tt,this.uint16[xr+5]=vt,this.uint16[xr+6]=yt,this.uint16[xr+7]=Vt,this.uint8[Ur+16]=or,this.uint8[Ur+17]=nr,te},C}(qi);xl.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",xl);var Af=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr){var Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur){var hn=te*12;return this.int16[hn+0]=he,this.int16[hn+1]=we,this.int16[hn+2]=Me,this.int16[hn+3]=Ne,this.uint16[hn+4]=tt,this.uint16[hn+5]=vt,this.uint16[hn+6]=yt,this.uint16[hn+7]=Vt,this.int16[hn+8]=or,this.int16[hn+9]=nr,this.int16[hn+10]=xr,this.int16[hn+11]=Ur,te},C}(qi);Af.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",Af);var nv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,he,we)},C.prototype.emplace=function(te,he,we,Me){var Ne=te*3;return this.float32[Ne+0]=he,this.float32[Ne+1]=we,this.float32[Ne+2]=Me,te},C}(qi);nv.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",nv);var av=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var he=this.length;return this.resize(he+1),this.emplace(he,te)},C.prototype.emplace=function(te,he){var we=te*1;return this.uint32[we+0]=he,te},C}(qi);av.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",av);var kc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt,vt,yt,Vt){var or=this.length;return this.resize(or+1),this.emplace(or,te,he,we,Me,Ne,tt,vt,yt,Vt)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or){var nr=te*10,xr=te*5;return this.int16[nr+0]=he,this.int16[nr+1]=we,this.int16[nr+2]=Me,this.int16[nr+3]=Ne,this.int16[nr+4]=tt,this.int16[nr+5]=vt,this.uint32[xr+3]=yt,this.uint16[nr+8]=Vt,this.uint16[nr+9]=or,te},C}(qi);kc.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",kc);var rh=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,he,we,Me,Ne,tt)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt){var yt=te*6;return this.int16[yt+0]=he,this.int16[yt+1]=we,this.int16[yt+2]=Me,this.int16[yt+3]=Ne,this.int16[yt+4]=tt,this.int16[yt+5]=vt,te},C}(qi);rh.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",rh);var uf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne){var tt=this.length;return this.resize(tt+1),this.emplace(tt,te,he,we,Me,Ne)},C.prototype.emplace=function(te,he,we,Me,Ne,tt){var vt=te*4,yt=te*8;return this.float32[vt+0]=he,this.float32[vt+1]=we,this.float32[vt+2]=Me,this.int16[yt+6]=Ne,this.int16[yt+7]=tt,te},C}(qi);uf.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",uf);var Fl=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,he,we,Me)},C.prototype.emplace=function(te,he,we,Me,Ne){var tt=te*12,vt=te*3;return this.uint8[tt+0]=he,this.uint8[tt+1]=we,this.float32[vt+1]=Me,this.float32[vt+2]=Ne,te},C}(qi);Fl.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",Fl);var ff=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,he,we)},C.prototype.emplace=function(te,he,we,Me){var Ne=te*3;return this.uint16[Ne+0]=he,this.uint16[Ne+1]=we,this.uint16[Ne+2]=Me,te},C}(qi);ff.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",ff);var Cc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn,Dn){var Vn=te*24,qn=te*12,da=te*48;return this.int16[Vn+0]=he,this.int16[Vn+1]=we,this.uint16[Vn+2]=Me,this.uint16[Vn+3]=Ne,this.uint32[qn+2]=tt,this.uint32[qn+3]=vt,this.uint32[qn+4]=yt,this.uint16[Vn+10]=Vt,this.uint16[Vn+11]=or,this.uint16[Vn+12]=nr,this.float32[qn+7]=xr,this.float32[qn+8]=Ur,this.uint8[da+36]=hn,this.uint8[da+37]=an,this.uint8[da+38]=Rn,this.uint32[qn+10]=Mn,this.int16[Vn+22]=Dn,te},C}(qi);Cc.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Cc);var nh=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,ci,Ua,Ha){var bi=this.length;return this.resize(bi+1),this.emplace(bi,te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,ci,Ua,Ha)},C.prototype.emplace=function(te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,ci,Ua,Ha,bi){var fi=te*34,Vi=te*17;return this.int16[fi+0]=he,this.int16[fi+1]=we,this.int16[fi+2]=Me,this.int16[fi+3]=Ne,this.int16[fi+4]=tt,this.int16[fi+5]=vt,this.int16[fi+6]=yt,this.int16[fi+7]=Vt,this.uint16[fi+8]=or,this.uint16[fi+9]=nr,this.uint16[fi+10]=xr,this.uint16[fi+11]=Ur,this.uint16[fi+12]=hn,this.uint16[fi+13]=an,this.uint16[fi+14]=Rn,this.uint16[fi+15]=Mn,this.uint16[fi+16]=Dn,this.uint16[fi+17]=Vn,this.uint16[fi+18]=qn,this.uint16[fi+19]=da,this.uint16[fi+20]=va,this.uint16[fi+21]=Wa,this.uint16[fi+22]=Da,this.uint32[Vi+12]=Oa,this.float32[Vi+13]=ci,this.float32[Vi+14]=Ua,this.float32[Vi+15]=Ha,this.float32[Vi+16]=bi,te},C}(qi);nh.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",nh);var tc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var he=this.length;return this.resize(he+1),this.emplace(he,te)},C.prototype.emplace=function(te,he){var we=te*1;return this.float32[we+0]=he,te},C}(qi);tc.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",tc);var iv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,he,we)},C.prototype.emplace=function(te,he,we,Me){var Ne=te*3;return this.int16[Ne+0]=he,this.int16[Ne+1]=we,this.int16[Ne+2]=Me,te},C}(qi);iv.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",iv);var Mf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,he,we)},C.prototype.emplace=function(te,he,we,Me){var Ne=te*2,tt=te*4;return this.uint32[Ne+0]=he,this.uint16[tt+2]=we,this.uint16[tt+3]=Me,te},C}(qi);Mf.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",Mf);var Lc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he){var we=this.length;return this.resize(we+1),this.emplace(we,te,he)},C.prototype.emplace=function(te,he,we){var Me=te*2;return this.uint16[Me+0]=he,this.uint16[Me+1]=we,te},C}(qi);Lc.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",Lc);var rc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var he=this.length;return this.resize(he+1),this.emplace(he,te)},C.prototype.emplace=function(te,he){var we=te*1;return this.uint16[we+0]=he,te},C}(qi);rc.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",rc);var Ef=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he){var we=this.length;return this.resize(we+1),this.emplace(we,te,he)},C.prototype.emplace=function(te,he,we){var Me=te*2;return this.float32[Me+0]=he,this.float32[Me+1]=we,te},C}(qi);Ef.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",Ef);var ov=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,he,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,he,we,Me)},C.prototype.emplace=function(te,he,we,Me,Ne){var tt=te*4;return this.float32[tt+0]=he,this.float32[tt+1]=we,this.float32[tt+2]=Me,this.float32[tt+3]=Ne,te},C}(qi);ov.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",ov);var jv=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,N),C}(co);jv.prototype.size=20;var Sf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new jv(this,te)},C}(kc);Be("CollisionBoxArray",Sf);var sv=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function(te){this._structArray.uint8[this._pos1+37]=te},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function(te){this._structArray.uint8[this._pos1+38]=te},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function(te){this._structArray.uint32[this._pos4+10]=te},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,N),C}(co);sv.prototype.size=48;var nc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new sv(this,te)},C}(Cc);Be("PlacedSymbolArray",nc);var Zv=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function(te){this._structArray.uint32[this._pos4+12]=te},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,N),C}(co);Zv.prototype.size=68;var Kv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new Zv(this,te)},C}(nh);Be("SymbolInstanceArray",Kv);var Fu=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(te){return this.float32[te*1+0]},C}(tc);Be("GlyphOffsetArray",Fu);var Jv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getx=function(te){return this.int16[te*3+0]},C.prototype.gety=function(te){return this.int16[te*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(te){return this.int16[te*3+2]},C}(iv);Be("SymbolLineVertexArray",Jv);var $v=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,N),C}(co);$v.prototype.size=8;var lv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new $v(this,te)},C}(Mf);Be("FeatureIndexArray",lv);var Qv=Qo([{name:"a_pos",components:2,type:"Int16"}],4),ce=Qv.members,W=function(C){C===void 0&&(C=[]),this.segments=C};W.prototype.prepareSegment=function(C,N,te,he){var we=this.segments[this.segments.length-1];return C>W.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!we||we.vertexLength+C>W.MAX_VERTEX_ARRAY_LENGTH||we.sortKey!==he)&&(we={vertexOffset:N.length,primitiveOffset:te.length,vertexLength:0,primitiveLength:0},he!==void 0&&(we.sortKey=he),this.segments.push(we)),we},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var C=0,N=this.segments;C<N.length;C+=1){var te=N[C];for(var he in te.vaos)te.vaos[he].destroy()}},W.simpleSegment=function(C,N,te,he){return new W([{vertexOffset:C,primitiveOffset:N,vertexLength:te,primitiveLength:he,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",W);function pe(k,C){return k=c(Math.floor(k),0,255),C=c(Math.floor(C),0,255),256*k+C}var $=Qo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),de=a(function(k){function C(N,te){var he,we,Me,Ne,tt,vt,yt,Vt;for(he=N.length&3,we=N.length-he,Me=te,tt=3432918353,vt=461845907,Vt=0;Vt<we;)yt=N.charCodeAt(Vt)&255|(N.charCodeAt(++Vt)&255)<<8|(N.charCodeAt(++Vt)&255)<<16|(N.charCodeAt(++Vt)&255)<<24,++Vt,yt=(yt&65535)*tt+(((yt>>>16)*tt&65535)<<16)&4294967295,yt=yt<<15|yt>>>17,yt=(yt&65535)*vt+(((yt>>>16)*vt&65535)<<16)&4294967295,Me^=yt,Me=Me<<13|Me>>>19,Ne=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Ne&65535)+27492+(((Ne>>>16)+58964&65535)<<16);switch(yt=0,he){case 3:yt^=(N.charCodeAt(Vt+2)&255)<<16;case 2:yt^=(N.charCodeAt(Vt+1)&255)<<8;case 1:yt^=N.charCodeAt(Vt)&255,yt=(yt&65535)*tt+(((yt>>>16)*tt&65535)<<16)&4294967295,yt=yt<<15|yt>>>17,yt=(yt&65535)*vt+(((yt>>>16)*vt&65535)<<16)&4294967295,Me^=yt}return Me^=N.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}k.exports=C}),ke=a(function(k){function C(N,te){for(var he=N.length,we=te^he,Me=0,Ne;he>=4;)Ne=N.charCodeAt(Me)&255|(N.charCodeAt(++Me)&255)<<8|(N.charCodeAt(++Me)&255)<<16|(N.charCodeAt(++Me)&255)<<24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),Ne^=Ne>>>24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)^Ne,he-=4,++Me;switch(he){case 3:we^=(N.charCodeAt(Me+2)&255)<<16;case 2:we^=(N.charCodeAt(Me+1)&255)<<8;case 1:we^=N.charCodeAt(Me)&255,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)}return we^=we>>>13,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16),we^=we>>>15,we>>>0}k.exports=C}),Fe=de,Je=de,ht=ke;Fe.murmur3=Je,Fe.murmur2=ht;var Dt=function(){this.ids=[],this.positions=[],this.indexed=!1};Dt.prototype.add=function(C,N,te,he){this.ids.push(pr(C)),this.positions.push(N,te,he)},Dt.prototype.getPositions=function(C){for(var N=pr(C),te=0,he=this.ids.length-1;te<he;){var we=te+he>>1;this.ids[we]>=N?he=we:te=we+1}for(var Me=[];this.ids[te]===N;){var Ne=this.positions[3*te],tt=this.positions[3*te+1],vt=this.positions[3*te+2];Me.push({index:Ne,start:tt,end:vt}),te++}return Me},Dt.serialize=function(C,N){var te=new Float64Array(C.ids),he=new Uint32Array(C.positions);return yr(te,he,0,te.length-1),N&&N.push(te.buffer,he.buffer),{ids:te,positions:he}},Dt.deserialize=function(C){var N=new Dt;return N.ids=C.ids,N.positions=C.positions,N.indexed=!0,N};var tr=Math.pow(2,53)-1;function pr(k){var C=+k;return!isNaN(C)&&C<=tr?C:Fe(String(k))}function yr(k,C,N,te){for(;N<te;){for(var he=k[N+te>>1],we=N-1,Me=te+1;;){do we++;while(k[we]<he);do Me--;while(k[Me]>he);if(we>=Me)break;Rr(k,we,Me),Rr(C,3*we,3*Me),Rr(C,3*we+1,3*Me+1),Rr(C,3*we+2,3*Me+2)}Me-N<te-Me?(yr(k,C,N,Me),N=Me+1):(yr(k,C,Me+1,te),te=Me)}}function Rr(k,C,N){var te=k[C];k[C]=k[N],k[N]=te}Be("FeaturePositionMap",Dt);var Kr=function(C,N){this.gl=C.gl,this.location=N},$r=function(k){function C(N,te){k.call(this,N,te),this.current=0}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1i(this.location,te))},C}(Kr),Xr=function(k){function C(N,te){k.call(this,N,te),this.current=0}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1f(this.location,te))},C}(Kr),rn=function(k){function C(N,te){k.call(this,N,te),this.current=[0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1])&&(this.current=te,this.gl.uniform2f(this.location,te[0],te[1]))},C}(Kr),xn=function(k){function C(N,te){k.call(this,N,te),this.current=[0,0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2])&&(this.current=te,this.gl.uniform3f(this.location,te[0],te[1],te[2]))},C}(Kr),Fn=function(k){function C(N,te){k.call(this,N,te),this.current=[0,0,0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2]||te[3]!==this.current[3])&&(this.current=te,this.gl.uniform4f(this.location,te[0],te[1],te[2],te[3]))},C}(Kr),Gn=function(k){function C(N,te){k.call(this,N,te),this.current=Ai.transparent}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te.r!==this.current.r||te.g!==this.current.g||te.b!==this.current.b||te.a!==this.current.a)&&(this.current=te,this.gl.uniform4f(this.location,te.r,te.g,te.b,te.a))},C}(Kr),oa=new Float32Array(16),fa=function(k){function C(N,te){k.call(this,N,te),this.current=oa}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){if(te[12]!==this.current[12]||te[0]!==this.current[0]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);return}for(var he=1;he<16;he++)if(te[he]!==this.current[he]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);break}},C}(Kr);function la(k){return[pe(255*k.r,255*k.g),pe(255*k.b,255*k.a)]}var wa=function(C,N,te){this.value=C,this.uniformNames=N.map(function(he){return"u_"+he}),this.type=te};wa.prototype.setUniform=function(C,N,te){C.set(te.constantOr(this.value))},wa.prototype.getBinding=function(C,N,te){return this.type==="color"?new Gn(C,N):new Xr(C,N)};var La=function(C,N){this.uniformNames=N.map(function(te){return"u_"+te}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};La.prototype.setConstantPatternPositions=function(C,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=C.tlbr},La.prototype.setUniform=function(C,N,te,he){var we=he==="u_pattern_to"?this.patternTo:he==="u_pattern_from"?this.patternFrom:he==="u_pixel_ratio_to"?this.pixelRatioTo:he==="u_pixel_ratio_from"?this.pixelRatioFrom:null;we&&C.set(we)},La.prototype.getBinding=function(C,N,te){return te.substr(0,9)==="u_pattern"?new Fn(C,N):new Xr(C,N)};var Ca=function(C,N,te,he){this.expression=C,this.type=te,this.maxValue=0,this.paintVertexAttributes=N.map(function(we){return{name:"a_"+we,type:"Float32",components:te==="color"?2:1,offset:0}}),this.paintVertexArray=new he};Ca.prototype.populatePaintArray=function(C,N,te,he,we){var Me=this.paintVertexArray.length,Ne=this.expression.evaluate(new yi(0),N,{},he,[],we);this.paintVertexArray.resize(C),this._setPaintValue(Me,C,Ne)},Ca.prototype.updatePaintArray=function(C,N,te,he){var we=this.expression.evaluate({zoom:0},te,he);this._setPaintValue(C,N,we)},Ca.prototype._setPaintValue=function(C,N,te){if(this.type==="color")for(var he=la(te),we=C;we<N;we++)this.paintVertexArray.emplace(we,he[0],he[1]);else{for(var Me=C;Me<N;Me++)this.paintVertexArray.emplace(Me,te);this.maxValue=Math.max(this.maxValue,Math.abs(te))}},Ca.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Fa=function(C,N,te,he,we,Me){this.expression=C,this.uniformNames=N.map(function(Ne){return"u_"+Ne+"_t"}),this.type=te,this.useIntegerZoom=he,this.zoom=we,this.maxValue=0,this.paintVertexAttributes=N.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:te==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};Fa.prototype.populatePaintArray=function(C,N,te,he,we){var Me=this.expression.evaluate(new yi(this.zoom),N,{},he,[],we),Ne=this.expression.evaluate(new yi(this.zoom+1),N,{},he,[],we),tt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(tt,C,Me,Ne)},Fa.prototype.updatePaintArray=function(C,N,te,he){var we=this.expression.evaluate({zoom:this.zoom},te,he),Me=this.expression.evaluate({zoom:this.zoom+1},te,he);this._setPaintValue(C,N,we,Me)},Fa.prototype._setPaintValue=function(C,N,te,he){if(this.type==="color")for(var we=la(te),Me=la(he),Ne=C;Ne<N;Ne++)this.paintVertexArray.emplace(Ne,we[0],we[1],Me[0],Me[1]);else{for(var tt=C;tt<N;tt++)this.paintVertexArray.emplace(tt,te,he);this.maxValue=Math.max(this.maxValue,Math.abs(te),Math.abs(he))}},Fa.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fa.prototype.setUniform=function(C,N){var te=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,he=c(this.expression.interpolationFactor(te,this.zoom,this.zoom+1),0,1);C.set(he)},Fa.prototype.getBinding=function(C,N,te){return new Xr(C,N)};var Ba=function(C,N,te,he,we,Me){this.expression=C,this.type=N,this.useIntegerZoom=te,this.zoom=he,this.layerId=Me,this.zoomInPaintVertexArray=new we,this.zoomOutPaintVertexArray=new we};Ba.prototype.populatePaintArray=function(C,N,te){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(he,C,N.patterns&&N.patterns[this.layerId],te)},Ba.prototype.updatePaintArray=function(C,N,te,he,we){this._setPaintValues(C,N,te.patterns&&te.patterns[this.layerId],we)},Ba.prototype._setPaintValues=function(C,N,te,he){if(!(!he||!te)){var we=te.min,Me=te.mid,Ne=te.max,tt=he[we],vt=he[Me],yt=he[Ne];if(!(!tt||!vt||!yt))for(var Vt=C;Vt<N;Vt++)this.zoomInPaintVertexArray.emplace(Vt,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],vt.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Vt,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],vt.pixelRatio,yt.pixelRatio)}},Ba.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,$.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,$.members,this.expression.isStateDependent))},Ba.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ti=function(C,N,te,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var we=[];for(var Me in C.paint._values)if(!!te(Me)){var Ne=C.paint.get(Me);if(!(!(Ne instanceof io)||!hi(Ne.property.specification))){var tt=Yi(Me,C.type),vt=Ne.value,yt=Ne.property.specification.type,Vt=Ne.property.useIntegerZoom,or=Ne.property.specification["property-type"],nr=or==="cross-faded"||or==="cross-faded-data-driven";if(vt.kind==="constant")this.binders[Me]=nr?new La(vt.value,tt):new wa(vt.value,tt,yt),we.push("/u_"+Me);else if(vt.kind==="source"||nr){var xr=ki(Me,yt,"source");this.binders[Me]=nr?new Ba(vt,yt,Vt,N,xr,C.id):new Ca(vt,tt,yt,xr),we.push("/a_"+Me)}else{var Ur=ki(Me,yt,"composite");this.binders[Me]=new Fa(vt,tt,yt,Vt,N,Ur),we.push("/z_"+Me)}}}this.cacheKey=we.sort().join("")};ti.prototype.getMaxValue=function(C){var N=this.binders[C];return N instanceof Ca||N instanceof Fa?N.maxValue:0},ti.prototype.populatePaintArrays=function(C,N,te,he,we){for(var Me in this.binders){var Ne=this.binders[Me];(Ne instanceof Ca||Ne instanceof Fa||Ne instanceof Ba)&&Ne.populatePaintArray(C,N,te,he,we)}},ti.prototype.setConstantPatternPositions=function(C,N){for(var te in this.binders){var he=this.binders[te];he instanceof La&&he.setConstantPatternPositions(C,N)}},ti.prototype.updatePaintArrays=function(C,N,te,he,we){var Me=!1;for(var Ne in C)for(var tt=N.getPositions(Ne),vt=0,yt=tt;vt<yt.length;vt+=1){var Vt=yt[vt],or=te.feature(Vt.index);for(var nr in this.binders){var xr=this.binders[nr];if((xr instanceof Ca||xr instanceof Fa||xr instanceof Ba)&&xr.expression.isStateDependent===!0){var Ur=he.paint.get(nr);xr.expression=Ur.value,xr.updatePaintArray(Vt.start,Vt.end,or,C[Ne],we),Me=!0}}}return Me},ti.prototype.defines=function(){var C=[];for(var N in this.binders){var te=this.binders[N];(te instanceof wa||te instanceof La)&&C.push.apply(C,te.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return C},ti.prototype.getPaintVertexBuffers=function(){return this._buffers},ti.prototype.getUniforms=function(C,N){var te=[];for(var he in this.binders){var we=this.binders[he];if(we instanceof wa||we instanceof La||we instanceof Fa)for(var Me=0,Ne=we.uniformNames;Me<Ne.length;Me+=1){var tt=Ne[Me];if(N[tt]){var vt=we.getBinding(C,N[tt],tt);te.push({name:tt,property:he,binding:vt})}}}return te},ti.prototype.setUniforms=function(C,N,te,he){for(var we=0,Me=N;we<Me.length;we+=1){var Ne=Me[we],tt=Ne.name,vt=Ne.property,yt=Ne.binding;this.binders[vt].setUniform(yt,he,te.get(vt),tt)}},ti.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var N in this.binders){var te=this.binders[N];if(C&&te instanceof Ba){var he=C.fromScale===2?te.zoomInPaintVertexBuffer:te.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else(te instanceof Ca||te instanceof Fa)&&te.paintVertexBuffer&&this._buffers.push(te.paintVertexBuffer)}},ti.prototype.upload=function(C){for(var N in this.binders){var te=this.binders[N];(te instanceof Ca||te instanceof Fa||te instanceof Ba)&&te.upload(C)}this.updatePaintBuffers()},ti.prototype.destroy=function(){for(var C in this.binders){var N=this.binders[C];(N instanceof Ca||N instanceof Fa||N instanceof Ba)&&N.destroy()}};var pi=function(C,N,te,he){he===void 0&&(he=function(){return!0}),this.programConfigurations={};for(var we=0,Me=N;we<Me.length;we+=1){var Ne=Me[we];this.programConfigurations[Ne.id]=new ti(Ne,te,he,C)}this.needsUpload=!1,this._featureMap=new Dt,this._bufferOffset=0};pi.prototype.populatePaintArrays=function(C,N,te,he,we,Me){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(C,N,he,we,Me);N.id!==void 0&&this._featureMap.add(N.id,te,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},pi.prototype.updatePaintArrays=function(C,N,te,he){for(var we=0,Me=te;we<Me.length;we+=1){var Ne=Me[we];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(C,this._featureMap,N,Ne,he)||this.needsUpload}},pi.prototype.get=function(C){return this.programConfigurations[C]},pi.prototype.upload=function(C){if(!!this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(C);this.needsUpload=!1}},pi.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Yi(k,C){var N={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return N[k]||[k.replace(C+"-","").replace(/-/g,"_")]}function xi(k){var C={"line-pattern":{source:xl,composite:xl},"fill-pattern":{source:xl,composite:xl},"fill-extrusion-pattern":{source:xl,composite:xl}};return C[k]}function ki(k,C,N){var te={color:{source:Ef,composite:ov},number:{source:tc,composite:Ef}},he=xi(k);return he&&he[N]||te[C][N]}Be("ConstantBinder",wa),Be("CrossFadedConstantBinder",La),Be("SourceExpressionBinder",Ca),Be("CrossFadedCompositeBinder",Ba),Be("CompositeExpressionBinder",Fa),Be("ProgramConfiguration",ti,{omit:["_buffers"]}),Be("ProgramConfigurationSet",pi);var Ja=8192;function Wi(k){return{min:-1*Math.pow(2,k-1),max:Math.pow(2,k-1)-1}}var $i=Wi(15);function to(k){for(var C=Ja/k.extent,N=k.loadGeometry(),te=0;te<N.length;te++)for(var he=N[te],we=0;we<he.length;we++){var Me=he[we];Me.x=Math.round(Me.x*C),Me.y=Math.round(Me.y*C),(Me.x<$i.min||Me.x>$i.max||Me.y<$i.min||Me.y>$i.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=c(Me.x,$i.min,$i.max),Me.y=c(Me.y,$i.min,$i.max))}return N}function Ri(k,C,N,te,he){k.emplaceBack(C*2+(te+1)/2,N*2+(he+1)/2)}var ho=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Sc,this.indexArray=new ff,this.segments=new W,this.programConfigurations=new pi(ce,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};ho.prototype.populate=function(C,N,te){var he=this.layers[0],we=[],Me=null;he.type==="circle"&&(Me=he.layout.get("circle-sort-key"));for(var Ne=0,tt=C;Ne<tt.length;Ne+=1){var vt=tt[Ne],yt=vt.feature,Vt=vt.id,or=vt.index,nr=vt.sourceLayerIndex,xr=this.layers[0]._featureFilter.needGeometry,Ur={type:yt.type,id:Vt,properties:yt.properties,geometry:xr?to(yt):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),Ur,te)){xr||(Ur.geometry=to(yt));var hn=Me?Me.evaluate(Ur,{},te):void 0,an={id:Vt,properties:yt.properties,type:yt.type,sourceLayerIndex:nr,index:or,geometry:Ur.geometry,patterns:{},sortKey:hn};we.push(an)}}Me&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var Rn=0,Mn=we;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn],Vn=Dn,qn=Vn.geometry,da=Vn.index,va=Vn.sourceLayerIndex,Wa=C[da].feature;this.addFeature(Dn,qn,da,te),N.featureIndex.insert(Wa,qn,da,va,this.index)}},ho.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},ho.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ho.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ho.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ce),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},ho.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ho.prototype.addFeature=function(C,N,te,he){for(var we=0,Me=N;we<Me.length;we+=1)for(var Ne=Me[we],tt=0,vt=Ne;tt<vt.length;tt+=1){var yt=vt[tt],Vt=yt.x,or=yt.y;if(!(Vt<0||Vt>=Ja||or<0||or>=Ja)){var nr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),xr=nr.vertexLength;Ri(this.layoutVertexArray,Vt,or,-1,-1),Ri(this.layoutVertexArray,Vt,or,1,-1),Ri(this.layoutVertexArray,Vt,or,1,1),Ri(this.layoutVertexArray,Vt,or,-1,1),this.indexArray.emplaceBack(xr,xr+1,xr+2),this.indexArray.emplaceBack(xr,xr+3,xr+2),nr.vertexLength+=4,nr.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,{},he)},Be("CircleBucket",ho,{omit:["layers"]});function gi(k,C){for(var N=0;N<k.length;N++)if(bl(C,k[N]))return!0;for(var te=0;te<C.length;te++)if(bl(k,C[te]))return!0;return!!gu(k,C)}function zi(k,C,N){return!!(bl(k,C)||Ku(C,k,N))}function Go(k,C){if(k.length===1)return Ju(C,k[0]);for(var N=0;N<C.length;N++)for(var te=C[N],he=0;he<te.length;he++)if(bl(k,te[he]))return!0;for(var we=0;we<k.length;we++)if(Ju(C,k[we]))return!0;for(var Me=0;Me<C.length;Me++)if(gu(k,C[Me]))return!0;return!1}function as(k,C,N){for(var te=0;te<C.length;te++){var he=C[te];if(k.length>=3){for(var we=0;we<he.length;we++)if(bl(k,he[we]))return!0}if(du(k,he,N))return!0}return!1}function du(k,C,N){if(k.length>1){if(gu(k,C))return!0;for(var te=0;te<C.length;te++)if(Ku(C[te],k,N))return!0}for(var he=0;he<k.length;he++)if(Ku(k[he],C,N))return!0;return!1}function gu(k,C){if(k.length===0||C.length===0)return!1;for(var N=0;N<k.length-1;N++)for(var te=k[N],he=k[N+1],we=0;we<C.length-1;we++){var Me=C[we],Ne=C[we+1];if(Zu(te,he,Me,Ne))return!0}return!1}function Zu(k,C,N,te){return z(k,N,te)!==z(C,N,te)&&z(k,C,N)!==z(k,C,te)}function Ku(k,C,N){var te=N*N;if(C.length===1)return k.distSqr(C[0])<te;for(var he=1;he<C.length;he++){var we=C[he-1],Me=C[he];if(cf(k,we,Me)<te)return!0}return!1}function cf(k,C,N){var te=C.distSqr(N);if(te===0)return k.distSqr(C);var he=((k.x-C.x)*(N.x-C.x)+(k.y-C.y)*(N.y-C.y))/te;return he<0?k.distSqr(C):he>1?k.distSqr(N):k.distSqr(N.sub(C)._mult(he)._add(C))}function Ju(k,C){for(var N=!1,te,he,we,Me=0;Me<k.length;Me++){te=k[Me];for(var Ne=0,tt=te.length-1;Ne<te.length;tt=Ne++)he=te[Ne],we=te[tt],he.y>C.y!=we.y>C.y&&C.x<(we.x-he.x)*(C.y-he.y)/(we.y-he.y)+he.x&&(N=!N)}return N}function bl(k,C){for(var N=!1,te=0,he=k.length-1;te<k.length;he=te++){var we=k[te],Me=k[he];we.y>C.y!=Me.y>C.y&&C.x<(Me.x-we.x)*(C.y-we.y)/(Me.y-we.y)+we.x&&(N=!N)}return N}function kf(k,C,N,te,he){for(var we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we];if(C<=Ne.x&&N<=Ne.y&&te>=Ne.x&&he>=Ne.y)return!0}var tt=[new v(C,N),new v(C,he),new v(te,he),new v(te,N)];if(k.length>2)for(var vt=0,yt=tt;vt<yt.length;vt+=1){var Vt=yt[vt];if(bl(k,Vt))return!0}for(var or=0;or<k.length-1;or++){var nr=k[or],xr=k[or+1];if(Zs(nr,xr,tt))return!0}return!1}function Zs(k,C,N){var te=N[0],he=N[2];if(k.x<te.x&&C.x<te.x||k.x>he.x&&C.x>he.x||k.y<te.y&&C.y<te.y||k.y>he.y&&C.y>he.y)return!1;var we=z(k,C,N[0]);return we!==z(k,C,N[1])||we!==z(k,C,N[2])||we!==z(k,C,N[3])}function Ql(k,C,N){var te=C.paint.get(k).value;return te.kind==="constant"?te.value:N.programConfigurations.get(C.id).getMaxValue(k)}function $u(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function zu(k,C,N,te,he){if(!C[0]&&!C[1])return k;var we=v.convert(C)._mult(he);N==="viewport"&&we._rotate(-te);for(var Me=[],Ne=0;Ne<k.length;Ne++){var tt=k[Ne];Me.push(tt.sub(we))}return Me}var Qu=new fo({"circle-sort-key":new oi(Yt.layout_circle["circle-sort-key"])}),ah=new fo({"circle-radius":new oi(Yt.paint_circle["circle-radius"]),"circle-color":new oi(Yt.paint_circle["circle-color"]),"circle-blur":new oi(Yt.paint_circle["circle-blur"]),"circle-opacity":new oi(Yt.paint_circle["circle-opacity"]),"circle-translate":new Za(Yt.paint_circle["circle-translate"]),"circle-translate-anchor":new Za(Yt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Za(Yt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Za(Yt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new oi(Yt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new oi(Yt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new oi(Yt.paint_circle["circle-stroke-opacity"])}),Nf={paint:ah,layout:Qu},Bs=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var k=arguments,C=0,N=arguments.length;N--;)C+=k[N]*k[N];return Math.sqrt(C)});function Pc(){var k=new Bs(4);return Bs!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k}function il(k,C,N){var te=C[0],he=C[1],we=C[2],Me=C[3],Ne=Math.sin(N),tt=Math.cos(N);return k[0]=te*tt+we*Ne,k[1]=he*tt+Me*Ne,k[2]=te*-Ne+we*tt,k[3]=he*-Ne+Me*tt,k}function Dc(){var k=new Bs(9);return Bs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function ih(k,C){var N=Math.sin(C),te=Math.cos(C);return k[0]=te,k[1]=N,k[2]=0,k[3]=-N,k[4]=te,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function oh(){var k=new Bs(16);return Bs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=0,k[12]=0,k[13]=0,k[14]=0),k[0]=1,k[5]=1,k[10]=1,k[15]=1,k}function qv(k){var C=new Bs(16);return C[0]=k[0],C[1]=k[1],C[2]=k[2],C[3]=k[3],C[4]=k[4],C[5]=k[5],C[6]=k[6],C[7]=k[7],C[8]=k[8],C[9]=k[9],C[10]=k[10],C[11]=k[11],C[12]=k[12],C[13]=k[13],C[14]=k[14],C[15]=k[15],C}function sh(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}function ac(k,C){var N=C[0],te=C[1],he=C[2],we=C[3],Me=C[4],Ne=C[5],tt=C[6],vt=C[7],yt=C[8],Vt=C[9],or=C[10],nr=C[11],xr=C[12],Ur=C[13],hn=C[14],an=C[15],Rn=N*Ne-te*Me,Mn=N*tt-he*Me,Dn=N*vt-we*Me,Vn=te*tt-he*Ne,qn=te*vt-we*Ne,da=he*vt-we*tt,va=yt*Ur-Vt*xr,Wa=yt*hn-or*xr,Da=yt*an-nr*xr,Oa=Vt*hn-or*Ur,ci=Vt*an-nr*Ur,Ua=or*an-nr*hn,Ha=Rn*Ua-Mn*ci+Dn*Oa+Vn*Da-qn*Wa+da*va;return Ha?(Ha=1/Ha,k[0]=(Ne*Ua-tt*ci+vt*Oa)*Ha,k[1]=(he*ci-te*Ua-we*Oa)*Ha,k[2]=(Ur*da-hn*qn+an*Vn)*Ha,k[3]=(or*qn-Vt*da-nr*Vn)*Ha,k[4]=(tt*Da-Me*Ua-vt*Wa)*Ha,k[5]=(N*Ua-he*Da+we*Wa)*Ha,k[6]=(hn*Dn-xr*da-an*Mn)*Ha,k[7]=(yt*da-or*Dn+nr*Mn)*Ha,k[8]=(Me*ci-Ne*Da+vt*va)*Ha,k[9]=(te*Da-N*ci-we*va)*Ha,k[10]=(xr*qn-Ur*Dn+an*Rn)*Ha,k[11]=(Vt*Dn-yt*qn-nr*Rn)*Ha,k[12]=(Ne*Wa-Me*Oa-tt*va)*Ha,k[13]=(N*Oa-te*Wa+he*va)*Ha,k[14]=(Ur*Mn-xr*Vn-hn*Rn)*Ha,k[15]=(yt*Vn-Vt*Mn+or*Rn)*Ha,k):null}function ic(k,C,N){var te=C[0],he=C[1],we=C[2],Me=C[3],Ne=C[4],tt=C[5],vt=C[6],yt=C[7],Vt=C[8],or=C[9],nr=C[10],xr=C[11],Ur=C[12],hn=C[13],an=C[14],Rn=C[15],Mn=N[0],Dn=N[1],Vn=N[2],qn=N[3];return k[0]=Mn*te+Dn*Ne+Vn*Vt+qn*Ur,k[1]=Mn*he+Dn*tt+Vn*or+qn*hn,k[2]=Mn*we+Dn*vt+Vn*nr+qn*an,k[3]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,Mn=N[4],Dn=N[5],Vn=N[6],qn=N[7],k[4]=Mn*te+Dn*Ne+Vn*Vt+qn*Ur,k[5]=Mn*he+Dn*tt+Vn*or+qn*hn,k[6]=Mn*we+Dn*vt+Vn*nr+qn*an,k[7]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,Mn=N[8],Dn=N[9],Vn=N[10],qn=N[11],k[8]=Mn*te+Dn*Ne+Vn*Vt+qn*Ur,k[9]=Mn*he+Dn*tt+Vn*or+qn*hn,k[10]=Mn*we+Dn*vt+Vn*nr+qn*an,k[11]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,Mn=N[12],Dn=N[13],Vn=N[14],qn=N[15],k[12]=Mn*te+Dn*Ne+Vn*Vt+qn*Ur,k[13]=Mn*he+Dn*tt+Vn*or+qn*hn,k[14]=Mn*we+Dn*vt+Vn*nr+qn*an,k[15]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,k}function Zo(k,C,N){var te=N[0],he=N[1],we=N[2],Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an;return C===k?(k[12]=C[0]*te+C[4]*he+C[8]*we+C[12],k[13]=C[1]*te+C[5]*he+C[9]*we+C[13],k[14]=C[2]*te+C[6]*he+C[10]*we+C[14],k[15]=C[3]*te+C[7]*he+C[11]*we+C[15]):(Me=C[0],Ne=C[1],tt=C[2],vt=C[3],yt=C[4],Vt=C[5],or=C[6],nr=C[7],xr=C[8],Ur=C[9],hn=C[10],an=C[11],k[0]=Me,k[1]=Ne,k[2]=tt,k[3]=vt,k[4]=yt,k[5]=Vt,k[6]=or,k[7]=nr,k[8]=xr,k[9]=Ur,k[10]=hn,k[11]=an,k[12]=Me*te+yt*he+xr*we+C[12],k[13]=Ne*te+Vt*he+Ur*we+C[13],k[14]=tt*te+or*he+hn*we+C[14],k[15]=vt*te+nr*he+an*we+C[15]),k}function zl(k,C,N){var te=N[0],he=N[1],we=N[2];return k[0]=C[0]*te,k[1]=C[1]*te,k[2]=C[2]*te,k[3]=C[3]*te,k[4]=C[4]*he,k[5]=C[5]*he,k[6]=C[6]*he,k[7]=C[7]*he,k[8]=C[8]*we,k[9]=C[9]*we,k[10]=C[10]*we,k[11]=C[11]*we,k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15],k}function Ol(k,C,N){var te=Math.sin(N),he=Math.cos(N),we=C[4],Me=C[5],Ne=C[6],tt=C[7],vt=C[8],yt=C[9],Vt=C[10],or=C[11];return C!==k&&(k[0]=C[0],k[1]=C[1],k[2]=C[2],k[3]=C[3],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15]),k[4]=we*he+vt*te,k[5]=Me*he+yt*te,k[6]=Ne*he+Vt*te,k[7]=tt*he+or*te,k[8]=vt*he-we*te,k[9]=yt*he-Me*te,k[10]=Vt*he-Ne*te,k[11]=or*he-tt*te,k}function lh(k,C,N){var te=Math.sin(N),he=Math.cos(N),we=C[0],Me=C[1],Ne=C[2],tt=C[3],vt=C[4],yt=C[5],Vt=C[6],or=C[7];return C!==k&&(k[8]=C[8],k[9]=C[9],k[10]=C[10],k[11]=C[11],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15]),k[0]=we*he+vt*te,k[1]=Me*he+yt*te,k[2]=Ne*he+Vt*te,k[3]=tt*he+or*te,k[4]=vt*he-we*te,k[5]=yt*he-Me*te,k[6]=Vt*he-Ne*te,k[7]=or*he-tt*te,k}function uv(k,C,N,te,he){var we=1/Math.tan(C/2),Me;return k[0]=we/N,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=we,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=-1,k[12]=0,k[13]=0,k[15]=0,he!=null&&he!==1/0?(Me=1/(te-he),k[10]=(he+te)*Me,k[14]=2*he*te*Me):(k[10]=-1,k[14]=-2*te),k}function wd(k,C,N,te,he,we,Me){var Ne=1/(C-N),tt=1/(te-he),vt=1/(we-Me);return k[0]=-2*Ne,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*tt,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*vt,k[11]=0,k[12]=(C+N)*Ne,k[13]=(he+te)*tt,k[14]=(Me+we)*vt,k[15]=1,k}var Td=ic;function Rc(){var k=new Bs(3);return Bs!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function Ad(k){var C=new Bs(3);return C[0]=k[0],C[1]=k[1],C[2]=k[2],C}function uh(k,C,N){return k[0]=C[0]+N[0],k[1]=C[1]+N[1],k[2]=C[2]+N[2],k}function Md(k,C,N){return k[0]=C[0]-N[0],k[1]=C[1]-N[1],k[2]=C[2]-N[2],k}function Ed(k,C,N){return k[0]=C[0]*N,k[1]=C[1]*N,k[2]=C[2]*N,k}function fv(k,C){var N=C[0],te=C[1],he=C[2],we=N*N+te*te+he*he;return we>0&&(we=1/Math.sqrt(we)),k[0]=C[0]*we,k[1]=C[1]*we,k[2]=C[2]*we,k}function qx(k,C){return k[0]*C[0]+k[1]*C[1]+k[2]*C[2]}function eb(k,C,N){var te=C[0],he=C[1],we=C[2],Me=N[0],Ne=N[1],tt=N[2];return k[0]=he*tt-we*Ne,k[1]=we*Me-te*tt,k[2]=te*Ne-he*Me,k}function tb(k,C,N){var te=C[0],he=C[1],we=C[2];return k[0]=te*N[0]+he*N[3]+we*N[6],k[1]=te*N[1]+he*N[4]+we*N[7],k[2]=te*N[2]+he*N[5]+we*N[8],k}var rb=Md;(function(){var k=Rc();return function(C,N,te,he,we,Me){var Ne,tt;for(N||(N=3),te||(te=0),he?tt=Math.min(he*N+te,C.length):tt=C.length,Ne=te;Ne<tt;Ne+=N)k[0]=C[Ne],k[1]=C[Ne+1],k[2]=C[Ne+2],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1],C[Ne+2]=k[2];return C}})();function nb(){var k=new Bs(4);return Bs!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0,k[3]=0),k}function ab(k,C,N){return k[0]=C[0]*N,k[1]=C[1]*N,k[2]=C[2]*N,k[3]=C[3]*N,k}function ib(k,C){return k[0]*C[0]+k[1]*C[1]+k[2]*C[2]+k[3]*C[3]}function ep(k,C,N){var te=C[0],he=C[1],we=C[2],Me=C[3];return k[0]=N[0]*te+N[4]*he+N[8]*we+N[12]*Me,k[1]=N[1]*te+N[5]*he+N[9]*we+N[13]*Me,k[2]=N[2]*te+N[6]*he+N[10]*we+N[14]*Me,k[3]=N[3]*te+N[7]*he+N[11]*we+N[15]*Me,k}(function(){var k=nb();return function(C,N,te,he,we,Me){var Ne,tt;for(N||(N=4),te||(te=0),he?tt=Math.min(he*N+te,C.length):tt=C.length,Ne=te;Ne<tt;Ne+=N)k[0]=C[Ne],k[1]=C[Ne+1],k[2]=C[Ne+2],k[3]=C[Ne+3],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1],C[Ne+2]=k[2],C[Ne+3]=k[3];return C}})();function ob(){var k=new Bs(2);return Bs!=Float32Array&&(k[0]=0,k[1]=0),k}function sb(k){var C=k[0],N=k[1];return C*C+N*N}var lb=sb;(function(){var k=ob();return function(C,N,te,he,we,Me){var Ne,tt;for(N||(N=2),te||(te=0),he?tt=Math.min(he*N+te,C.length):tt=C.length,Ne=te;Ne<tt;Ne+=N)k[0]=C[Ne],k[1]=C[Ne+1],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1];return C}})();var ub=function(k){function C(N){k.call(this,N,Nf)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new ho(te)},C.prototype.queryRadius=function(te){var he=te;return Ql("circle-radius",this,he)+Ql("circle-stroke-width",this,he)+$u(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(te,he,we,Me,Ne,tt,vt,yt){for(var Vt=zu(te,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,vt),or=this.paint.get("circle-radius").evaluate(he,we),nr=this.paint.get("circle-stroke-width").evaluate(he,we),xr=or+nr,Ur=this.paint.get("circle-pitch-alignment")==="map",hn=Ur?Vt:fb(Vt,yt),an=Ur?xr*vt:xr,Rn=0,Mn=Me;Rn<Mn.length;Rn+=1)for(var Dn=Mn[Rn],Vn=0,qn=Dn;Vn<qn.length;Vn+=1){var da=qn[Vn],va=Ur?da:kg(da,yt),Wa=an,Da=ep([],[da.x,da.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Wa*=Da[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Wa*=tt.cameraToCenterDistance/Da[3]),zi(hn,va,Wa))return!0}return!1},C}(js);function kg(k,C){var N=ep([],[k.x,k.y,0,1],C);return new v(N[0]/N[3],N[1]/N[3])}function fb(k,C){return k.map(function(N){return kg(N,C)})}var Cg=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(ho);Be("HeatmapBucket",Cg,{omit:["layers"]});function Sd(k,C,N,te){var he=C.width,we=C.height;if(!te)te=new Uint8Array(he*we*N);else if(te instanceof Uint8ClampedArray)te=new Uint8Array(te.buffer);else if(te.length!==he*we*N)throw new RangeError("mismatched image size");return k.width=he,k.height=we,k.data=te,k}function Lg(k,C,N){var te=C.width,he=C.height;if(!(te===k.width&&he===k.height)){var we=Sd({},{width:te,height:he},N);kd(k,we,{x:0,y:0},{x:0,y:0},{width:Math.min(k.width,te),height:Math.min(k.height,he)},N),k.width=te,k.height=he,k.data=we.data}}function kd(k,C,N,te,he,we){if(he.width===0||he.height===0)return C;if(he.width>k.width||he.height>k.height||N.x>k.width-he.width||N.y>k.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>C.width||he.height>C.height||te.x>C.width-he.width||te.y>C.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=k.data,Ne=C.data,tt=0;tt<he.height;tt++)for(var vt=((N.y+tt)*k.width+N.x)*we,yt=((te.y+tt)*C.width+te.x)*we,Vt=0;Vt<he.width*we;Vt++)Ne[yt+Vt]=Me[vt+Vt];return C}var Ic=function(C,N){Sd(this,C,1,N)};Ic.prototype.resize=function(C){Lg(this,C,1)},Ic.prototype.clone=function(){return new Ic({width:this.width,height:this.height},new Uint8Array(this.data))},Ic.copy=function(C,N,te,he,we){kd(C,N,te,he,we,1)};var Nl=function(C,N){Sd(this,C,4,N)};Nl.prototype.resize=function(C){Lg(this,C,4)},Nl.prototype.replace=function(C,N){N?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},Nl.prototype.clone=function(){return new Nl({width:this.width,height:this.height},new Uint8Array(this.data))},Nl.copy=function(C,N,te,he,we){kd(C,N,te,he,we,4)},Be("AlphaImage",Ic),Be("RGBAImage",Nl);var cb=new fo({"heatmap-radius":new oi(Yt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new oi(Yt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Za(Yt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $o(Yt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Za(Yt.paint_heatmap["heatmap-opacity"])}),hb={paint:cb};function Pg(k,C){for(var N=new Uint8Array(1024),te={},he=0,we=0;he<256;he++,we+=4){te[C]=he/255;var Me=k.evaluate(te);N[we+0]=Math.floor(Me.r*255/Me.a),N[we+1]=Math.floor(Me.g*255/Me.a),N[we+2]=Math.floor(Me.b*255/Me.a),N[we+3]=Math.floor(Me.a*255)}return new Nl({width:256,height:1},N)}var vb=function(k){function C(N){k.call(this,N,hb),this._updateColorRamp()}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new Cg(te)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var te=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Pg(te,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(js),pb=new fo({"hillshade-illumination-direction":new Za(Yt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Za(Yt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Za(Yt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Za(Yt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Za(Yt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Za(Yt.paint_hillshade["hillshade-accent-color"])}),db={paint:pb},gb=function(k){function C(N){k.call(this,N,db)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(js),mb=Qo([{name:"a_pos",components:2,type:"Int16"}],4),Dg=mb.members,Cd=tp,yb=tp;function tp(k,C,N){N=N||2;var te=C&&C.length,he=te?C[0]*N:k.length,we=Rg(k,0,he,N,!0),Me=[];if(!we||we.next===we.prev)return Me;var Ne,tt,vt,yt,Vt,or,nr;if(te&&(we=Tb(k,C,we,N)),k.length>80*N){Ne=vt=k[0],tt=yt=k[1];for(var xr=N;xr<he;xr+=N)Vt=k[xr],or=k[xr+1],Vt<Ne&&(Ne=Vt),or<tt&&(tt=or),Vt>vt&&(vt=Vt),or>yt&&(yt=or);nr=Math.max(vt-Ne,yt-tt),nr=nr!==0?1/nr:0}return cv(we,Me,N,Ne,tt,nr),Me}function Rg(k,C,N,te,he){var we,Me;if(he===Dd(k,C,N,te)>0)for(we=C;we<N;we+=te)Me=zg(we,k[we],k[we+1],Me);else for(we=N-te;we>=C;we-=te)Me=zg(we,k[we],k[we+1],Me);return Me&&rp(Me,Me.next)&&(vv(Me),Me=Me.next),Me}function oc(k,C){if(!k)return k;C||(C=k);var N=k,te;do if(te=!1,!N.steiner&&(rp(N,N.next)||is(N.prev,N,N.next)===0)){if(vv(N),N=C=N.prev,N===N.next)break;te=!0}else N=N.next;while(te||N!==C);return C}function cv(k,C,N,te,he,we,Me){if(!!k){!Me&&we&&kb(k,te,he,we);for(var Ne=k,tt,vt;k.prev!==k.next;){if(tt=k.prev,vt=k.next,we?bb(k,te,he,we):xb(k)){C.push(tt.i/N),C.push(k.i/N),C.push(vt.i/N),vv(k),k=vt.next,Ne=vt.next;continue}if(k=vt,k===Ne){Me?Me===1?(k=_b(oc(k),C,N),cv(k,C,N,te,he,we,2)):Me===2&&wb(k,C,N,te,he,we):cv(oc(k),C,N,te,he,we,1);break}}}}function xb(k){var C=k.prev,N=k,te=k.next;if(is(C,N,te)>=0)return!1;for(var he=k.next.next;he!==k.prev;){if(fh(C.x,C.y,N.x,N.y,te.x,te.y,he.x,he.y)&&is(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function bb(k,C,N,te){var he=k.prev,we=k,Me=k.next;if(is(he,we,Me)>=0)return!1;for(var Ne=he.x<we.x?he.x<Me.x?he.x:Me.x:we.x<Me.x?we.x:Me.x,tt=he.y<we.y?he.y<Me.y?he.y:Me.y:we.y<Me.y?we.y:Me.y,vt=he.x>we.x?he.x>Me.x?he.x:Me.x:we.x>Me.x?we.x:Me.x,yt=he.y>we.y?he.y>Me.y?he.y:Me.y:we.y>Me.y?we.y:Me.y,Vt=Ld(Ne,tt,C,N,te),or=Ld(vt,yt,C,N,te),nr=k.prevZ,xr=k.nextZ;nr&&nr.z>=Vt&&xr&&xr.z<=or;){if(nr!==k.prev&&nr!==k.next&&fh(he.x,he.y,we.x,we.y,Me.x,Me.y,nr.x,nr.y)&&is(nr.prev,nr,nr.next)>=0||(nr=nr.prevZ,xr!==k.prev&&xr!==k.next&&fh(he.x,he.y,we.x,we.y,Me.x,Me.y,xr.x,xr.y)&&is(xr.prev,xr,xr.next)>=0))return!1;xr=xr.nextZ}for(;nr&&nr.z>=Vt;){if(nr!==k.prev&&nr!==k.next&&fh(he.x,he.y,we.x,we.y,Me.x,Me.y,nr.x,nr.y)&&is(nr.prev,nr,nr.next)>=0)return!1;nr=nr.prevZ}for(;xr&&xr.z<=or;){if(xr!==k.prev&&xr!==k.next&&fh(he.x,he.y,we.x,we.y,Me.x,Me.y,xr.x,xr.y)&&is(xr.prev,xr,xr.next)>=0)return!1;xr=xr.nextZ}return!0}function _b(k,C,N){var te=k;do{var he=te.prev,we=te.next.next;!rp(he,we)&&Ig(he,te,te.next,we)&&hv(he,we)&&hv(we,he)&&(C.push(he.i/N),C.push(te.i/N),C.push(we.i/N),vv(te),vv(te.next),te=k=we),te=te.next}while(te!==k);return oc(te)}function wb(k,C,N,te,he,we){var Me=k;do{for(var Ne=Me.next.next;Ne!==Me.prev;){if(Me.i!==Ne.i&&Pb(Me,Ne)){var tt=Fg(Me,Ne);Me=oc(Me,Me.next),tt=oc(tt,tt.next),cv(Me,C,N,te,he,we),cv(tt,C,N,te,he,we);return}Ne=Ne.next}Me=Me.next}while(Me!==k)}function Tb(k,C,N,te){var he=[],we,Me,Ne,tt,vt;for(we=0,Me=C.length;we<Me;we++)Ne=C[we]*te,tt=we<Me-1?C[we+1]*te:k.length,vt=Rg(k,Ne,tt,te,!1),vt===vt.next&&(vt.steiner=!0),he.push(Lb(vt));for(he.sort(Ab),we=0;we<he.length;we++)Mb(he[we],N),N=oc(N,N.next);return N}function Ab(k,C){return k.x-C.x}function Mb(k,C){if(C=Eb(k,C),C){var N=Fg(C,k);oc(C,C.next),oc(N,N.next)}}function Eb(k,C){var N=C,te=k.x,he=k.y,we=-1/0,Me;do{if(he<=N.y&&he>=N.next.y&&N.next.y!==N.y){var Ne=N.x+(he-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ne<=te&&Ne>we){if(we=Ne,Ne===te){if(he===N.y)return N;if(he===N.next.y)return N.next}Me=N.x<N.next.x?N:N.next}}N=N.next}while(N!==C);if(!Me)return null;if(te===we)return Me;var tt=Me,vt=Me.x,yt=Me.y,Vt=1/0,or;N=Me;do te>=N.x&&N.x>=vt&&te!==N.x&&fh(he<yt?te:we,he,vt,yt,he<yt?we:te,he,N.x,N.y)&&(or=Math.abs(he-N.y)/(te-N.x),hv(N,k)&&(or<Vt||or===Vt&&(N.x>Me.x||N.x===Me.x&&Sb(Me,N)))&&(Me=N,Vt=or)),N=N.next;while(N!==tt);return Me}function Sb(k,C){return is(k.prev,k,C.prev)<0&&is(C.next,k,k.next)<0}function kb(k,C,N,te){var he=k;do he.z===null&&(he.z=Ld(he.x,he.y,C,N,te)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==k);he.prevZ.nextZ=null,he.prevZ=null,Cb(he)}function Cb(k){var C,N,te,he,we,Me,Ne,tt,vt=1;do{for(N=k,k=null,we=null,Me=0;N;){for(Me++,te=N,Ne=0,C=0;C<vt&&(Ne++,te=te.nextZ,!!te);C++);for(tt=vt;Ne>0||tt>0&&te;)Ne!==0&&(tt===0||!te||N.z<=te.z)?(he=N,N=N.nextZ,Ne--):(he=te,te=te.nextZ,tt--),we?we.nextZ=he:k=he,he.prevZ=we,we=he;N=te}we.nextZ=null,vt*=2}while(Me>1);return k}function Ld(k,C,N,te,he){return k=32767*(k-N)*he,C=32767*(C-te)*he,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,k|C<<1}function Lb(k){var C=k,N=k;do(C.x<N.x||C.x===N.x&&C.y<N.y)&&(N=C),C=C.next;while(C!==k);return N}function fh(k,C,N,te,he,we,Me,Ne){return(he-Me)*(C-Ne)-(k-Me)*(we-Ne)>=0&&(k-Me)*(te-Ne)-(N-Me)*(C-Ne)>=0&&(N-Me)*(we-Ne)-(he-Me)*(te-Ne)>=0}function Pb(k,C){return k.next.i!==C.i&&k.prev.i!==C.i&&!Db(k,C)&&(hv(k,C)&&hv(C,k)&&Rb(k,C)&&(is(k.prev,k,C.prev)||is(k,C.prev,C))||rp(k,C)&&is(k.prev,k,k.next)>0&&is(C.prev,C,C.next)>0)}function is(k,C,N){return(C.y-k.y)*(N.x-C.x)-(C.x-k.x)*(N.y-C.y)}function rp(k,C){return k.x===C.x&&k.y===C.y}function Ig(k,C,N,te){var he=ap(is(k,C,N)),we=ap(is(k,C,te)),Me=ap(is(N,te,k)),Ne=ap(is(N,te,C));return!!(he!==we&&Me!==Ne||he===0&&np(k,N,C)||we===0&&np(k,te,C)||Me===0&&np(N,k,te)||Ne===0&&np(N,C,te))}function np(k,C,N){return C.x<=Math.max(k.x,N.x)&&C.x>=Math.min(k.x,N.x)&&C.y<=Math.max(k.y,N.y)&&C.y>=Math.min(k.y,N.y)}function ap(k){return k>0?1:k<0?-1:0}function Db(k,C){var N=k;do{if(N.i!==k.i&&N.next.i!==k.i&&N.i!==C.i&&N.next.i!==C.i&&Ig(N,N.next,k,C))return!0;N=N.next}while(N!==k);return!1}function hv(k,C){return is(k.prev,k,k.next)<0?is(k,C,k.next)>=0&&is(k,k.prev,C)>=0:is(k,C,k.prev)<0||is(k,k.next,C)<0}function Rb(k,C){var N=k,te=!1,he=(k.x+C.x)/2,we=(k.y+C.y)/2;do N.y>we!=N.next.y>we&&N.next.y!==N.y&&he<(N.next.x-N.x)*(we-N.y)/(N.next.y-N.y)+N.x&&(te=!te),N=N.next;while(N!==k);return te}function Fg(k,C){var N=new Pd(k.i,k.x,k.y),te=new Pd(C.i,C.x,C.y),he=k.next,we=C.prev;return k.next=C,C.prev=k,N.next=he,he.prev=N,te.next=N,N.prev=te,we.next=te,te.prev=we,te}function zg(k,C,N,te){var he=new Pd(k,C,N);return te?(he.next=te.next,he.prev=te,te.next.prev=he,te.next=he):(he.prev=he,he.next=he),he}function vv(k){k.next.prev=k.prev,k.prev.next=k.next,k.prevZ&&(k.prevZ.nextZ=k.nextZ),k.nextZ&&(k.nextZ.prevZ=k.prevZ)}function Pd(k,C,N){this.i=k,this.x=C,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}tp.deviation=function(k,C,N,te){var he=C&&C.length,we=he?C[0]*N:k.length,Me=Math.abs(Dd(k,0,we,N));if(he)for(var Ne=0,tt=C.length;Ne<tt;Ne++){var vt=C[Ne]*N,yt=Ne<tt-1?C[Ne+1]*N:k.length;Me-=Math.abs(Dd(k,vt,yt,N))}var Vt=0;for(Ne=0;Ne<te.length;Ne+=3){var or=te[Ne]*N,nr=te[Ne+1]*N,xr=te[Ne+2]*N;Vt+=Math.abs((k[or]-k[xr])*(k[nr+1]-k[or+1])-(k[or]-k[nr])*(k[xr+1]-k[or+1]))}return Me===0&&Vt===0?0:Math.abs((Vt-Me)/Me)};function Dd(k,C,N,te){for(var he=0,we=C,Me=N-te;we<N;we+=te)he+=(k[Me]-k[we])*(k[we+1]+k[Me+1]),Me=we;return he}tp.flatten=function(k){for(var C=k[0][0].length,N={vertices:[],holes:[],dimensions:C},te=0,he=0;he<k.length;he++){for(var we=0;we<k[he].length;we++)for(var Me=0;Me<C;Me++)N.vertices.push(k[he][we][Me]);he>0&&(te+=k[he-1].length,N.holes.push(te))}return N},Cd.default=yb;function Ib(k,C,N,te,he){Og(k,C,N||0,te||k.length-1,he||Fb)}function Og(k,C,N,te,he){for(;te>N;){if(te-N>600){var we=te-N+1,Me=C-N+1,Ne=Math.log(we),tt=.5*Math.exp(2*Ne/3),vt=.5*Math.sqrt(Ne*tt*(we-tt)/we)*(Me-we/2<0?-1:1),yt=Math.max(N,Math.floor(C-Me*tt/we+vt)),Vt=Math.min(te,Math.floor(C+(we-Me)*tt/we+vt));Og(k,C,yt,Vt,he)}var or=k[C],nr=N,xr=te;for(pv(k,N,C),he(k[te],or)>0&&pv(k,N,te);nr<xr;){for(pv(k,nr,xr),nr++,xr--;he(k[nr],or)<0;)nr++;for(;he(k[xr],or)>0;)xr--}he(k[N],or)===0?pv(k,N,xr):(xr++,pv(k,xr,te)),xr<=C&&(N=xr+1),C<=xr&&(te=xr-1)}}function pv(k,C,N){var te=k[C];k[C]=k[N],k[N]=te}function Fb(k,C){return k<C?-1:k>C?1:0}function Rd(k,C){var N=k.length;if(N<=1)return[k];for(var te=[],he,we,Me=0;Me<N;Me++){var Ne=H(k[Me]);Ne!==0&&(k[Me].area=Math.abs(Ne),we===void 0&&(we=Ne<0),we===Ne<0?(he&&te.push(he),he=[k[Me]]):he.push(k[Me]))}if(he&&te.push(he),C>1)for(var tt=0;tt<te.length;tt++)te[tt].length<=C||(Ib(te[tt],C,1,te[tt].length-1,zb),te[tt]=te[tt].slice(0,C));return te}function zb(k,C){return C.area-k.area}function Id(k,C,N){for(var te=N.patternDependencies,he=!1,we=0,Me=C;we<Me.length;we+=1){var Ne=Me[we],tt=Ne.paint.get(k+"-pattern");tt.isConstant()||(he=!0);var vt=tt.constantOr(null);vt&&(he=!0,te[vt.to]=!0,te[vt.from]=!0)}return he}function Fd(k,C,N,te,he){for(var we=he.patternDependencies,Me=0,Ne=C;Me<Ne.length;Me+=1){var tt=Ne[Me],vt=tt.paint.get(k+"-pattern"),yt=vt.value;if(yt.kind!=="constant"){var Vt=yt.evaluate({zoom:te-1},N,{},he.availableImages),or=yt.evaluate({zoom:te},N,{},he.availableImages),nr=yt.evaluate({zoom:te+1},N,{},he.availableImages);Vt=Vt&&Vt.name?Vt.name:Vt,or=or&&or.name?or.name:or,nr=nr&&nr.name?nr.name:nr,we[Vt]=!0,we[or]=!0,we[nr]=!0,N.patterns[tt.id]={min:Vt,mid:or,max:nr}}}return N}var Ob=500,hf=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Sc,this.indexArray=new ff,this.indexArray2=new Lc,this.programConfigurations=new pi(Dg,C.layers,C.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};hf.prototype.populate=function(C,N,te){this.hasPattern=Id("fill",this.layers,N);for(var he=this.layers[0].layout.get("fill-sort-key"),we=[],Me=0,Ne=C;Me<Ne.length;Me+=1){var tt=Ne[Me],vt=tt.feature,yt=tt.id,Vt=tt.index,or=tt.sourceLayerIndex,nr=this.layers[0]._featureFilter.needGeometry,xr={type:vt.type,id:yt,properties:vt.properties,geometry:nr?to(vt):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),xr,te)){nr||(xr.geometry=to(vt));var Ur=he?he.evaluate(xr,{},te,N.availableImages):void 0,hn={id:yt,properties:vt.properties,type:vt.type,sourceLayerIndex:or,index:Vt,geometry:xr.geometry,patterns:{},sortKey:Ur};we.push(hn)}}he&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var an=0,Rn=we;an<Rn.length;an+=1){var Mn=Rn[an],Dn=Mn,Vn=Dn.geometry,qn=Dn.index,da=Dn.sourceLayerIndex;if(this.hasPattern){var va=Fd("fill",this.layers,Mn,this.zoom,N);this.patternFeatures.push(va)}else this.addFeature(Mn,Vn,qn,te,{});var Wa=C[qn].feature;N.featureIndex.insert(Wa,Vn,qn,da,this.index)}},hf.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},hf.prototype.addFeatures=function(C,N,te){for(var he=0,we=this.patternFeatures;he<we.length;he+=1){var Me=we[he];this.addFeature(Me,Me.geometry,Me.index,N,te)}},hf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},hf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hf.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Dg),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},hf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},hf.prototype.addFeature=function(C,N,te,he,we){for(var Me=0,Ne=Rd(N,Ob);Me<Ne.length;Me+=1){for(var tt=Ne[Me],vt=0,yt=0,Vt=tt;yt<Vt.length;yt+=1){var or=Vt[yt];vt+=or.length}for(var nr=this.segments.prepareSegment(vt,this.layoutVertexArray,this.indexArray),xr=nr.vertexLength,Ur=[],hn=[],an=0,Rn=tt;an<Rn.length;an+=1){var Mn=Rn[an];if(Mn.length!==0){Mn!==tt[0]&&hn.push(Ur.length/2);var Dn=this.segments2.prepareSegment(Mn.length,this.layoutVertexArray,this.indexArray2),Vn=Dn.vertexLength;this.layoutVertexArray.emplaceBack(Mn[0].x,Mn[0].y),this.indexArray2.emplaceBack(Vn+Mn.length-1,Vn),Ur.push(Mn[0].x),Ur.push(Mn[0].y);for(var qn=1;qn<Mn.length;qn++)this.layoutVertexArray.emplaceBack(Mn[qn].x,Mn[qn].y),this.indexArray2.emplaceBack(Vn+qn-1,Vn+qn),Ur.push(Mn[qn].x),Ur.push(Mn[qn].y);Dn.vertexLength+=Mn.length,Dn.primitiveLength+=Mn.length}}for(var da=Cd(Ur,hn),va=0;va<da.length;va+=3)this.indexArray.emplaceBack(xr+da[va],xr+da[va+1],xr+da[va+2]);nr.vertexLength+=vt,nr.primitiveLength+=da.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,he)},Be("FillBucket",hf,{omit:["layers","patternFeatures"]});var Nb=new fo({"fill-sort-key":new oi(Yt.layout_fill["fill-sort-key"])}),Bb=new fo({"fill-antialias":new Za(Yt.paint_fill["fill-antialias"]),"fill-opacity":new oi(Yt.paint_fill["fill-opacity"]),"fill-color":new oi(Yt.paint_fill["fill-color"]),"fill-outline-color":new oi(Yt.paint_fill["fill-outline-color"]),"fill-translate":new Za(Yt.paint_fill["fill-translate"]),"fill-translate-anchor":new Za(Yt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uo(Yt.paint_fill["fill-pattern"])}),Ub={paint:Bb,layout:Nb},Vb=function(k){function C(N){k.call(this,N,Ub)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,he){k.prototype.recalculate.call(this,te,he);var we=this.paint._values["fill-outline-color"];we.value.kind==="constant"&&we.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(te){return new hf(te)},C.prototype.queryRadius=function(){return $u(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(te,he,we,Me,Ne,tt,vt){var yt=zu(te,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,vt);return Go(yt,Me)},C.prototype.isTileClipped=function(){return!0},C}(js),Hb=Qo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ng=Hb.members,Bg=ch;function ch(k,C,N,te,he){this.properties={},this.extent=N,this.type=0,this._pbf=k,this._geometry=-1,this._keys=te,this._values=he,k.readFields(Gb,this,C)}function Gb(k,C,N){k==1?C.id=N.readVarint():k==2?Yb(N,C):k==3?C.type=N.readVarint():k==4&&(C._geometry=N.pos)}function Yb(k,C){for(var N=k.readVarint()+k.pos;k.pos<N;){var te=C._keys[k.readVarint()],he=C._values[k.readVarint()];C.properties[te]=he}}ch.types=["Unknown","Point","LineString","Polygon"],ch.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var C=k.readVarint()+k.pos,N=1,te=0,he=0,we=0,Me=[],Ne;k.pos<C;){if(te<=0){var tt=k.readVarint();N=tt&7,te=tt>>3}if(te--,N===1||N===2)he+=k.readSVarint(),we+=k.readSVarint(),N===1&&(Ne&&Me.push(Ne),Ne=[]),Ne.push(new v(he,we));else if(N===7)Ne&&Ne.push(Ne[0].clone());else throw new Error("unknown command "+N)}return Ne&&Me.push(Ne),Me},ch.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var C=k.readVarint()+k.pos,N=1,te=0,he=0,we=0,Me=1/0,Ne=-1/0,tt=1/0,vt=-1/0;k.pos<C;){if(te<=0){var yt=k.readVarint();N=yt&7,te=yt>>3}if(te--,N===1||N===2)he+=k.readSVarint(),we+=k.readSVarint(),he<Me&&(Me=he),he>Ne&&(Ne=he),we<tt&&(tt=we),we>vt&&(vt=we);else if(N!==7)throw new Error("unknown command "+N)}return[Me,tt,Ne,vt]},ch.prototype.toGeoJSON=function(k,C,N){var te=this.extent*Math.pow(2,N),he=this.extent*k,we=this.extent*C,Me=this.loadGeometry(),Ne=ch.types[this.type],tt,vt;function yt(nr){for(var xr=0;xr<nr.length;xr++){var Ur=nr[xr],hn=180-(Ur.y+we)*360/te;nr[xr]=[(Ur.x+he)*360/te-180,360/Math.PI*Math.atan(Math.exp(hn*Math.PI/180))-90]}}switch(this.type){case 1:var Vt=[];for(tt=0;tt<Me.length;tt++)Vt[tt]=Me[tt][0];Me=Vt,yt(Me);break;case 2:for(tt=0;tt<Me.length;tt++)yt(Me[tt]);break;case 3:for(Me=Wb(Me),tt=0;tt<Me.length;tt++)for(vt=0;vt<Me[tt].length;vt++)yt(Me[tt][vt]);break}Me.length===1?Me=Me[0]:Ne="Multi"+Ne;var or={type:"Feature",geometry:{type:Ne,coordinates:Me},properties:this.properties};return"id"in this&&(or.id=this.id),or};function Wb(k){var C=k.length;if(C<=1)return[k];for(var N=[],te,he,we=0;we<C;we++){var Me=Xb(k[we]);Me!==0&&(he===void 0&&(he=Me<0),he===Me<0?(te&&N.push(te),te=[k[we]]):te.push(k[we]))}return te&&N.push(te),N}function Xb(k){for(var C=0,N=0,te=k.length,he=te-1,we,Me;N<te;he=N++)we=k[N],Me=k[he],C+=(Me.x-we.x)*(we.y+Me.y);return C}var Ug=Vg;function Vg(k,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=k,this._keys=[],this._values=[],this._features=[],k.readFields(jb,this,C),this.length=this._features.length}function jb(k,C,N){k===15?C.version=N.readVarint():k===1?C.name=N.readString():k===5?C.extent=N.readVarint():k===2?C._features.push(N.pos):k===3?C._keys.push(N.readString()):k===4&&C._values.push(Zb(N))}function Zb(k){for(var C=null,N=k.readVarint()+k.pos;k.pos<N;){var te=k.readVarint()>>3;C=te===1?k.readString():te===2?k.readFloat():te===3?k.readDouble():te===4?k.readVarint64():te===5?k.readVarint():te===6?k.readSVarint():te===7?k.readBoolean():null}return C}Vg.prototype.feature=function(k){if(k<0||k>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[k];var C=this._pbf.readVarint()+this._pbf.pos;return new Bg(this._pbf,C,this.extent,this._keys,this._values)};var Kb=Jb;function Jb(k,C){this.layers=k.readFields($b,{},C)}function $b(k,C,N){if(k===3){var te=new Ug(N,N.readVarint()+N.pos);te.length&&(C[te.name]=te)}}var Qb=Kb,qb=Bg,e_=Ug,hh={VectorTile:Qb,VectorTileFeature:qb,VectorTileLayer:e_},t_=hh.VectorTileFeature.types,r_=500,zd=Math.pow(2,13);function dv(k,C,N,te,he,we,Me,Ne){k.emplaceBack(C,N,Math.floor(te*zd)*2+Me,he*zd*2,we*zd*2,Math.round(Ne))}var vf=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new ec,this.indexArray=new ff,this.programConfigurations=new pi(Ng,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};vf.prototype.populate=function(C,N,te){this.features=[],this.hasPattern=Id("fill-extrusion",this.layers,N);for(var he=0,we=C;he<we.length;he+=1){var Me=we[he],Ne=Me.feature,tt=Me.id,vt=Me.index,yt=Me.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,or={type:Ne.type,id:tt,properties:Ne.properties,geometry:Vt?to(Ne):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),or,te)){var nr={id:tt,sourceLayerIndex:yt,index:vt,geometry:Vt?or.geometry:to(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};typeof Ne.id<"u"&&(nr.id=Ne.id),this.hasPattern?this.features.push(Fd("fill-extrusion",this.layers,nr,this.zoom,N)):this.addFeature(nr,nr.geometry,vt,te,{}),N.featureIndex.insert(Ne,nr.geometry,vt,yt,this.index,!0)}}},vf.prototype.addFeatures=function(C,N,te){for(var he=0,we=this.features;he<we.length;he+=1){var Me=we[he],Ne=Me.geometry;this.addFeature(Me,Ne,Me.index,N,te)}},vf.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},vf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vf.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Ng),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},vf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vf.prototype.addFeature=function(C,N,te,he,we){for(var Me=0,Ne=Rd(N,r_);Me<Ne.length;Me+=1){for(var tt=Ne[Me],vt=0,yt=0,Vt=tt;yt<Vt.length;yt+=1){var or=Vt[yt];vt+=or.length}for(var nr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),xr=0,Ur=tt;xr<Ur.length;xr+=1){var hn=Ur[xr];if(hn.length!==0&&!a_(hn))for(var an=0,Rn=0;Rn<hn.length;Rn++){var Mn=hn[Rn];if(Rn>=1){var Dn=hn[Rn-1];if(!n_(Mn,Dn)){nr.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(nr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=Mn.sub(Dn)._perp()._unit(),qn=Dn.dist(Mn);an+qn>32768&&(an=0),dv(this.layoutVertexArray,Mn.x,Mn.y,Vn.x,Vn.y,0,0,an),dv(this.layoutVertexArray,Mn.x,Mn.y,Vn.x,Vn.y,0,1,an),an+=qn,dv(this.layoutVertexArray,Dn.x,Dn.y,Vn.x,Vn.y,0,0,an),dv(this.layoutVertexArray,Dn.x,Dn.y,Vn.x,Vn.y,0,1,an);var da=nr.vertexLength;this.indexArray.emplaceBack(da,da+2,da+1),this.indexArray.emplaceBack(da+1,da+2,da+3),nr.vertexLength+=4,nr.primitiveLength+=2}}}}if(nr.vertexLength+vt>W.MAX_VERTEX_ARRAY_LENGTH&&(nr=this.segments.prepareSegment(vt,this.layoutVertexArray,this.indexArray)),t_[C.type]==="Polygon"){for(var va=[],Wa=[],Da=nr.vertexLength,Oa=0,ci=tt;Oa<ci.length;Oa+=1){var Ua=ci[Oa];if(Ua.length!==0){Ua!==tt[0]&&Wa.push(va.length/2);for(var Ha=0;Ha<Ua.length;Ha++){var bi=Ua[Ha];dv(this.layoutVertexArray,bi.x,bi.y,0,0,1,1,0),va.push(bi.x),va.push(bi.y)}}}for(var fi=Cd(va,Wa),Vi=0;Vi<fi.length;Vi+=3)this.indexArray.emplaceBack(Da+fi[Vi],Da+fi[Vi+2],Da+fi[Vi+1]);nr.primitiveLength+=fi.length/3,nr.vertexLength+=vt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,he)},Be("FillExtrusionBucket",vf,{omit:["layers","features"]});function n_(k,C){return k.x===C.x&&(k.x<0||k.x>Ja)||k.y===C.y&&(k.y<0||k.y>Ja)}function a_(k){return k.every(function(C){return C.x<0})||k.every(function(C){return C.x>Ja})||k.every(function(C){return C.y<0})||k.every(function(C){return C.y>Ja})}var i_=new fo({"fill-extrusion-opacity":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Uo(Yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),o_={paint:i_},s_=function(k){function C(N){k.call(this,N,o_)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new vf(te)},C.prototype.queryRadius=function(){return $u(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(te,he,we,Me,Ne,tt,vt,yt){var Vt=zu(te,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,vt),or=this.paint.get("fill-extrusion-height").evaluate(he,we),nr=this.paint.get("fill-extrusion-base").evaluate(he,we),xr=f_(Vt,yt,tt,0),Ur=u_(Me,nr,or,yt),hn=Ur[0],an=Ur[1];return l_(hn,an,xr)},C}(js);function gv(k,C){return k.x*C.x+k.y*C.y}function Hg(k,C){if(k.length===1){for(var N=0,te=C[N++],he;!he||te.equals(he);)if(he=C[N++],!he)return 1/0;for(;N<C.length;N++){var we=C[N],Me=k[0],Ne=he.sub(te),tt=we.sub(te),vt=Me.sub(te),yt=gv(Ne,Ne),Vt=gv(Ne,tt),or=gv(tt,tt),nr=gv(vt,Ne),xr=gv(vt,tt),Ur=yt*or-Vt*Vt,hn=(or*nr-Vt*xr)/Ur,an=(yt*xr-Vt*nr)/Ur,Rn=1-hn-an,Mn=te.z*Rn+he.z*hn+we.z*an;if(isFinite(Mn))return Mn}return 1/0}else{for(var Dn=1/0,Vn=0,qn=C;Vn<qn.length;Vn+=1){var da=qn[Vn];Dn=Math.min(Dn,da.z)}return Dn}}function l_(k,C,N){var te=1/0;Go(N,C)&&(te=Hg(N,C[0]));for(var he=0;he<C.length;he++)for(var we=C[he],Me=k[he],Ne=0;Ne<we.length-1;Ne++){var tt=we[Ne],vt=we[Ne+1],yt=Me[Ne],Vt=Me[Ne+1],or=[tt,vt,Vt,yt,tt];gi(N,or)&&(te=Math.min(te,Hg(N,or)))}return te===1/0?!1:te}function u_(k,C,N,te){for(var he=[],we=[],Me=te[8]*C,Ne=te[9]*C,tt=te[10]*C,vt=te[11]*C,yt=te[8]*N,Vt=te[9]*N,or=te[10]*N,nr=te[11]*N,xr=0,Ur=k;xr<Ur.length;xr+=1){for(var hn=Ur[xr],an=[],Rn=[],Mn=0,Dn=hn;Mn<Dn.length;Mn+=1){var Vn=Dn[Mn],qn=Vn.x,da=Vn.y,va=te[0]*qn+te[4]*da+te[12],Wa=te[1]*qn+te[5]*da+te[13],Da=te[2]*qn+te[6]*da+te[14],Oa=te[3]*qn+te[7]*da+te[15],ci=va+Me,Ua=Wa+Ne,Ha=Da+tt,bi=Oa+vt,fi=va+yt,Vi=Wa+Vt,so=Da+or,Hi=Oa+nr,Gi=new v(ci/bi,Ua/bi);Gi.z=Ha/bi,an.push(Gi);var Oi=new v(fi/Hi,Vi/Hi);Oi.z=so/Hi,Rn.push(Oi)}he.push(an),we.push(Rn)}return[he,we]}function f_(k,C,N,te){for(var he=[],we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we],tt=[Ne.x,Ne.y,te,1];ep(tt,tt,C),he.push(new v(tt[0]/tt[3],tt[1]/tt[3]))}return he}var c_=Qo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Gg=c_.members,h_=hh.VectorTileFeature.types,Yg=63,v_=Math.cos(75/2*(Math.PI/180)),p_=15,d_=20,g_=15,Wg=1/2,Xg=Math.pow(2,g_-1)/Wg,Bl=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new th,this.indexArray=new ff,this.programConfigurations=new pi(Gg,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Bl.prototype.populate=function(C,N,te){this.hasPattern=Id("line",this.layers,N);for(var he=this.layers[0].layout.get("line-sort-key"),we=[],Me=0,Ne=C;Me<Ne.length;Me+=1){var tt=Ne[Me],vt=tt.feature,yt=tt.id,Vt=tt.index,or=tt.sourceLayerIndex,nr=this.layers[0]._featureFilter.needGeometry,xr={type:vt.type,id:yt,properties:vt.properties,geometry:nr?to(vt):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),xr,te)){nr||(xr.geometry=to(vt));var Ur=he?he.evaluate(xr,{},te):void 0,hn={id:yt,properties:vt.properties,type:vt.type,sourceLayerIndex:or,index:Vt,geometry:xr.geometry,patterns:{},sortKey:Ur};we.push(hn)}}he&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var an=0,Rn=we;an<Rn.length;an+=1){var Mn=Rn[an],Dn=Mn,Vn=Dn.geometry,qn=Dn.index,da=Dn.sourceLayerIndex;if(this.hasPattern){var va=Fd("line",this.layers,Mn,this.zoom,N);this.patternFeatures.push(va)}else this.addFeature(Mn,Vn,qn,te,{});var Wa=C[qn].feature;N.featureIndex.insert(Wa,Vn,qn,da,this.index)}},Bl.prototype.update=function(C,N,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,N,this.stateDependentLayers,te)},Bl.prototype.addFeatures=function(C,N,te){for(var he=0,we=this.patternFeatures;he<we.length;he+=1){var Me=we[he];this.addFeature(Me,Me.geometry,Me.index,N,te)}},Bl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bl.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Gg),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Bl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bl.prototype.addFeature=function(C,N,te,he,we){for(var Me=this.layers[0].layout,Ne=Me.get("line-join").evaluate(C,{}),tt=Me.get("line-cap"),vt=Me.get("line-miter-limit"),yt=Me.get("line-round-limit"),Vt=0,or=N;Vt<or.length;Vt+=1){var nr=or[Vt];this.addLine(nr,C,Ne,tt,vt,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,he)},Bl.prototype.addLine=function(C,N,te,he,we,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Ne=0;Ne<C.length-1;Ne++)this.totalDistance+=C[Ne].dist(C[Ne+1]);this.updateScaledDistance()}for(var tt=h_[N.type]==="Polygon",vt=C.length;vt>=2&&C[vt-1].equals(C[vt-2]);)vt--;for(var yt=0;yt<vt-1&&C[yt].equals(C[yt+1]);)yt++;if(!(vt<(tt?3:2))){te==="bevel"&&(we=1.05);var Vt=this.overscaling<=16?p_*Ja/(512*this.overscaling):0,or=this.segments.prepareSegment(vt*10,this.layoutVertexArray,this.indexArray),nr,xr=void 0,Ur=void 0,hn=void 0,an=void 0;this.e1=this.e2=-1,tt&&(nr=C[vt-2],an=C[yt].sub(nr)._unit()._perp());for(var Rn=yt;Rn<vt;Rn++)if(Ur=Rn===vt-1?tt?C[yt+1]:void 0:C[Rn+1],!(Ur&&C[Rn].equals(Ur))){an&&(hn=an),nr&&(xr=nr),nr=C[Rn],an=Ur?Ur.sub(nr)._unit()._perp():hn,hn=hn||an;var Mn=hn.add(an);(Mn.x!==0||Mn.y!==0)&&Mn._unit();var Dn=hn.x*an.x+hn.y*an.y,Vn=Mn.x*an.x+Mn.y*an.y,qn=Vn!==0?1/Vn:1/0,da=2*Math.sqrt(2-2*Vn),va=Vn<v_&&xr&&Ur,Wa=hn.x*an.y-hn.y*an.x>0;if(va&&Rn>yt){var Da=nr.dist(xr);if(Da>2*Vt){var Oa=nr.sub(nr.sub(xr)._mult(Vt/Da)._round());this.updateDistance(xr,Oa),this.addCurrentVertex(Oa,hn,0,0,or),xr=Oa}}var ci=xr&&Ur,Ua=ci?te:tt?"butt":he;if(ci&&Ua==="round"&&(qn<Me?Ua="miter":qn<=2&&(Ua="fakeround")),Ua==="miter"&&qn>we&&(Ua="bevel"),Ua==="bevel"&&(qn>2&&(Ua="flipbevel"),qn<we&&(Ua="miter")),xr&&this.updateDistance(xr,nr),Ua==="miter")Mn._mult(qn),this.addCurrentVertex(nr,Mn,0,0,or);else if(Ua==="flipbevel"){if(qn>100)Mn=an.mult(-1);else{var Ha=qn*hn.add(an).mag()/hn.sub(an).mag();Mn._perp()._mult(Ha*(Wa?-1:1))}this.addCurrentVertex(nr,Mn,0,0,or),this.addCurrentVertex(nr,Mn.mult(-1),0,0,or)}else if(Ua==="bevel"||Ua==="fakeround"){var bi=-Math.sqrt(qn*qn-1),fi=Wa?bi:0,Vi=Wa?0:bi;if(xr&&this.addCurrentVertex(nr,hn,fi,Vi,or),Ua==="fakeround")for(var so=Math.round(da*180/Math.PI/d_),Hi=1;Hi<so;Hi++){var Gi=Hi/so;if(Gi!==.5){var Oi=Gi-.5,yo=1.0904+Dn*(-3.2452+Dn*(3.55645-Dn*1.43519)),Ao=.848013+Dn*(-1.06021+Dn*.215638);Gi=Gi+Gi*Oi*(Gi-1)*(yo*Oi*Oi+Ao)}var Yo=an.sub(hn)._mult(Gi)._add(hn)._unit()._mult(Wa?-1:1);this.addHalfVertex(nr,Yo.x,Yo.y,!1,Wa,0,or)}Ur&&this.addCurrentVertex(nr,an,-fi,-Vi,or)}else if(Ua==="butt")this.addCurrentVertex(nr,Mn,0,0,or);else if(Ua==="square"){var Ko=xr?1:-1;this.addCurrentVertex(nr,Mn,Ko,Ko,or)}else Ua==="round"&&(xr&&(this.addCurrentVertex(nr,hn,0,0,or),this.addCurrentVertex(nr,hn,1,1,or,!0)),Ur&&(this.addCurrentVertex(nr,an,-1,-1,or,!0),this.addCurrentVertex(nr,an,0,0,or)));if(va&&Rn<vt-1){var Cs=nr.dist(Ur);if(Cs>2*Vt){var ls=nr.add(Ur.sub(nr)._mult(Vt/Cs)._round());this.updateDistance(nr,ls),this.addCurrentVertex(ls,an,0,0,or),nr=ls}}}}},Bl.prototype.addCurrentVertex=function(C,N,te,he,we,Me){Me===void 0&&(Me=!1);var Ne=N.x+N.y*te,tt=N.y-N.x*te,vt=-N.x+N.y*he,yt=-N.y-N.x*he;this.addHalfVertex(C,Ne,tt,Me,!1,te,we),this.addHalfVertex(C,vt,yt,Me,!0,-he,we),this.distance>Xg/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,N,te,he,we,Me))},Bl.prototype.addHalfVertex=function(C,N,te,he,we,Me,Ne){var tt=C.x,vt=C.y,yt=this.scaledDistance*Wg;this.layoutVertexArray.emplaceBack((tt<<1)+(he?1:0),(vt<<1)+(we?1:0),Math.round(Yg*N)+128,Math.round(Yg*te)+128,(Me===0?0:Me<0?-1:1)+1|(yt&63)<<2,yt>>6);var Vt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Vt),Ne.primitiveLength++),we?this.e2=Vt:this.e1=Vt},Bl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Xg-1):this.distance},Bl.prototype.updateDistance=function(C,N){this.distance+=C.dist(N),this.updateScaledDistance()},Be("LineBucket",Bl,{omit:["layers","patternFeatures"]});var m_=new fo({"line-cap":new Za(Yt.layout_line["line-cap"]),"line-join":new oi(Yt.layout_line["line-join"]),"line-miter-limit":new Za(Yt.layout_line["line-miter-limit"]),"line-round-limit":new Za(Yt.layout_line["line-round-limit"]),"line-sort-key":new oi(Yt.layout_line["line-sort-key"])}),y_=new fo({"line-opacity":new oi(Yt.paint_line["line-opacity"]),"line-color":new oi(Yt.paint_line["line-color"]),"line-translate":new Za(Yt.paint_line["line-translate"]),"line-translate-anchor":new Za(Yt.paint_line["line-translate-anchor"]),"line-width":new oi(Yt.paint_line["line-width"]),"line-gap-width":new oi(Yt.paint_line["line-gap-width"]),"line-offset":new oi(Yt.paint_line["line-offset"]),"line-blur":new oi(Yt.paint_line["line-blur"]),"line-dasharray":new wo(Yt.paint_line["line-dasharray"]),"line-pattern":new Uo(Yt.paint_line["line-pattern"]),"line-gradient":new $o(Yt.paint_line["line-gradient"])}),jg={paint:y_,layout:m_},x_=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,he){return he=new yi(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),k.prototype.possiblyEvaluate.call(this,te,he)},C.prototype.evaluate=function(te,he,we,Me){return he=A({},he,{zoom:Math.floor(he.zoom)}),k.prototype.evaluate.call(this,te,he,we,Me)},C}(oi),Zg=new x_(jg.paint.properties["line-width"].specification);Zg.useIntegerZoom=!0;var b_=function(k){function C(N){k.call(this,N,jg)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var te=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Pg(te,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(te,he){k.prototype.recalculate.call(this,te,he),this.paint._values["line-floorwidth"]=Zg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,te)},C.prototype.createBucket=function(te){return new Bl(te)},C.prototype.queryRadius=function(te){var he=te,we=Kg(Ql("line-width",this,he),Ql("line-gap-width",this,he)),Me=Ql("line-offset",this,he);return we/2+Math.abs(Me)+$u(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(te,he,we,Me,Ne,tt,vt){var yt=zu(te,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,vt),Vt=vt/2*Kg(this.paint.get("line-width").evaluate(he,we),this.paint.get("line-gap-width").evaluate(he,we)),or=this.paint.get("line-offset").evaluate(he,we);return or&&(Me=__(Me,or*vt)),as(yt,Me,Vt)},C.prototype.isTileClipped=function(){return!0},C}(js);function Kg(k,C){return C>0?C+2*k:k}function __(k,C){for(var N=[],te=new v(0,0),he=0;he<k.length;he++){for(var we=k[he],Me=[],Ne=0;Ne<we.length;Ne++){var tt=we[Ne-1],vt=we[Ne],yt=we[Ne+1],Vt=Ne===0?te:vt.sub(tt)._unit()._perp(),or=Ne===we.length-1?te:yt.sub(vt)._unit()._perp(),nr=Vt._add(or)._unit(),xr=nr.x*or.x+nr.y*or.y;nr._mult(1/xr),Me.push(nr._mult(C)._add(vt))}N.push(Me)}return N}var Od=Qo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),w_=Qo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Qo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var T_=Qo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Qo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Jg=Qo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),A_=Qo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Qo([{name:"triangle",components:3,type:"Uint16"}]),Qo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qo([{type:"Float32",name:"offsetX"}]),Qo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function M_(k,C,N){var te=C.layout.get("text-transform").evaluate(N,{});return te==="uppercase"?k=k.toLocaleUpperCase():te==="lowercase"&&(k=k.toLocaleLowerCase()),ii.applyArabicShaping&&(k=ii.applyArabicShaping(k)),k}function E_(k,C,N){return k.sections.forEach(function(te){te.text=M_(te.text,C,N)}),k}function S_(k){var C={},N={},te=[],he=0;function we(an){te.push(k[an]),he++}function Me(an,Rn,Mn){var Dn=N[an];return delete N[an],N[Rn]=Dn,te[Dn].geometry[0].pop(),te[Dn].geometry[0]=te[Dn].geometry[0].concat(Mn[0]),Dn}function Ne(an,Rn,Mn){var Dn=C[Rn];return delete C[Rn],C[an]=Dn,te[Dn].geometry[0].shift(),te[Dn].geometry[0]=Mn[0].concat(te[Dn].geometry[0]),Dn}function tt(an,Rn,Mn){var Dn=Mn?Rn[0][Rn[0].length-1]:Rn[0][0];return an+":"+Dn.x+":"+Dn.y}for(var vt=0;vt<k.length;vt++){var yt=k[vt],Vt=yt.geometry,or=yt.text?yt.text.toString():null;if(!or){we(vt);continue}var nr=tt(or,Vt),xr=tt(or,Vt,!0);if(nr in N&&xr in C&&N[nr]!==C[xr]){var Ur=Ne(nr,xr,Vt),hn=Me(nr,xr,te[Ur].geometry);delete C[nr],delete N[xr],N[tt(or,te[hn].geometry,!0)]=hn,te[Ur].geometry=null}else nr in N?Me(nr,xr,Vt):xr in C?Ne(nr,xr,Vt):(we(vt),C[nr]=he-1,N[xr]=he-1)}return te.filter(function(an){return an.geometry})}var mv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function k_(k){for(var C="",N=0;N<k.length;N++){var te=k.charCodeAt(N+1)||null,he=k.charCodeAt(N-1)||null,we=(!te||!fn(te)||mv[k[N+1]])&&(!he||!fn(he)||mv[k[N-1]]);we&&mv[k[N]]?C+=mv[k[N]]:C+=k[N]}return C}var Us=24,C_=function(k,C,N,te,he){var we,Me,Ne=he*8-te-1,tt=(1<<Ne)-1,vt=tt>>1,yt=-7,Vt=N?he-1:0,or=N?-1:1,nr=k[C+Vt];for(Vt+=or,we=nr&(1<<-yt)-1,nr>>=-yt,yt+=Ne;yt>0;we=we*256+k[C+Vt],Vt+=or,yt-=8);for(Me=we&(1<<-yt)-1,we>>=-yt,yt+=te;yt>0;Me=Me*256+k[C+Vt],Vt+=or,yt-=8);if(we===0)we=1-vt;else{if(we===tt)return Me?NaN:(nr?-1:1)*(1/0);Me=Me+Math.pow(2,te),we=we-vt}return(nr?-1:1)*Me*Math.pow(2,we-te)},L_=function(k,C,N,te,he,we){var Me,Ne,tt,vt=we*8-he-1,yt=(1<<vt)-1,Vt=yt>>1,or=he===23?Math.pow(2,-24)-Math.pow(2,-77):0,nr=te?0:we-1,xr=te?1:-1,Ur=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Ne=isNaN(C)?1:0,Me=yt):(Me=Math.floor(Math.log(C)/Math.LN2),C*(tt=Math.pow(2,-Me))<1&&(Me--,tt*=2),Me+Vt>=1?C+=or/tt:C+=or*Math.pow(2,1-Vt),C*tt>=2&&(Me++,tt/=2),Me+Vt>=yt?(Ne=0,Me=yt):Me+Vt>=1?(Ne=(C*tt-1)*Math.pow(2,he),Me=Me+Vt):(Ne=C*Math.pow(2,Vt-1)*Math.pow(2,he),Me=0));he>=8;k[N+nr]=Ne&255,nr+=xr,Ne/=256,he-=8);for(Me=Me<<he|Ne,vt+=he;vt>0;k[N+nr]=Me&255,nr+=xr,Me/=256,vt-=8);k[N+nr-xr]|=Ur*128},ip={read:C_,write:L_},op=To;function To(k){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(k)?k:new Uint8Array(k||0),this.pos=0,this.type=0,this.length=this.buf.length}To.Varint=0,To.Fixed64=1,To.Bytes=2,To.Fixed32=5;var Nd=(1<<16)*(1<<16),$g=1/Nd,P_=12,Qg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");To.prototype={destroy:function(){this.buf=null},readFields:function(k,C,N){for(N=N||this.length;this.pos<N;){var te=this.readVarint(),he=te>>3,we=this.pos;this.type=te&7,k(he,C,this),this.pos===we&&this.skip(te)}return C},readMessage:function(k,C){return this.readFields(k,C,this.readVarint()+this.pos)},readFixed32:function(){var k=sp(this.buf,this.pos);return this.pos+=4,k},readSFixed32:function(){var k=em(this.buf,this.pos);return this.pos+=4,k},readFixed64:function(){var k=sp(this.buf,this.pos)+sp(this.buf,this.pos+4)*Nd;return this.pos+=8,k},readSFixed64:function(){var k=sp(this.buf,this.pos)+em(this.buf,this.pos+4)*Nd;return this.pos+=8,k},readFloat:function(){var k=ip.read(this.buf,this.pos,!0,23,4);return this.pos+=4,k},readDouble:function(){var k=ip.read(this.buf,this.pos,!0,52,8);return this.pos+=8,k},readVarint:function(k){var C=this.buf,N,te;return te=C[this.pos++],N=te&127,te<128||(te=C[this.pos++],N|=(te&127)<<7,te<128)||(te=C[this.pos++],N|=(te&127)<<14,te<128)||(te=C[this.pos++],N|=(te&127)<<21,te<128)?N:(te=C[this.pos],N|=(te&15)<<28,D_(N,k,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var k=this.readVarint();return k%2===1?(k+1)/-2:k/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var k=this.readVarint()+this.pos,C=this.pos;return this.pos=k,k-C>=P_&&Qg?X_(this.buf,C,k):W_(this.buf,C,k)},readBytes:function(){var k=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,k);return this.pos=k,C},readPackedVarint:function(k,C){if(this.type!==To.Bytes)return k.push(this.readVarint(C));var N=Bf(this);for(k=k||[];this.pos<N;)k.push(this.readVarint(C));return k},readPackedSVarint:function(k){if(this.type!==To.Bytes)return k.push(this.readSVarint());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readSVarint());return k},readPackedBoolean:function(k){if(this.type!==To.Bytes)return k.push(this.readBoolean());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readBoolean());return k},readPackedFloat:function(k){if(this.type!==To.Bytes)return k.push(this.readFloat());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readFloat());return k},readPackedDouble:function(k){if(this.type!==To.Bytes)return k.push(this.readDouble());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readDouble());return k},readPackedFixed32:function(k){if(this.type!==To.Bytes)return k.push(this.readFixed32());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readFixed32());return k},readPackedSFixed32:function(k){if(this.type!==To.Bytes)return k.push(this.readSFixed32());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readSFixed32());return k},readPackedFixed64:function(k){if(this.type!==To.Bytes)return k.push(this.readFixed64());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readFixed64());return k},readPackedSFixed64:function(k){if(this.type!==To.Bytes)return k.push(this.readSFixed64());var C=Bf(this);for(k=k||[];this.pos<C;)k.push(this.readSFixed64());return k},skip:function(k){var C=k&7;if(C===To.Varint)for(;this.buf[this.pos++]>127;);else if(C===To.Bytes)this.pos=this.readVarint()+this.pos;else if(C===To.Fixed32)this.pos+=4;else if(C===To.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(k,C){this.writeVarint(k<<3|C)},realloc:function(k){for(var C=this.length||16;C<this.pos+k;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(k){this.realloc(4),ph(this.buf,k,this.pos),this.pos+=4},writeSFixed32:function(k){this.realloc(4),ph(this.buf,k,this.pos),this.pos+=4},writeFixed64:function(k){this.realloc(8),ph(this.buf,k&-1,this.pos),ph(this.buf,Math.floor(k*$g),this.pos+4),this.pos+=8},writeSFixed64:function(k){this.realloc(8),ph(this.buf,k&-1,this.pos),ph(this.buf,Math.floor(k*$g),this.pos+4),this.pos+=8},writeVarint:function(k){if(k=+k||0,k>268435455||k<0){R_(k,this);return}this.realloc(4),this.buf[this.pos++]=k&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=k>>>7&127)))},writeSVarint:function(k){this.writeVarint(k<0?-k*2-1:k*2)},writeBoolean:function(k){this.writeVarint(Boolean(k))},writeString:function(k){k=String(k),this.realloc(k.length*4),this.pos++;var C=this.pos;this.pos=j_(this.buf,k,this.pos);var N=this.pos-C;N>=128&&qg(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(k){this.realloc(4),ip.write(this.buf,k,this.pos,!0,23,4),this.pos+=4},writeDouble:function(k){this.realloc(8),ip.write(this.buf,k,this.pos,!0,52,8),this.pos+=8},writeBytes:function(k){var C=k.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=k[N]},writeRawMessage:function(k,C){this.pos++;var N=this.pos;k(C,this);var te=this.pos-N;te>=128&&qg(N,te,this),this.pos=N-1,this.writeVarint(te),this.pos+=te},writeMessage:function(k,C,N){this.writeTag(k,To.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(k,C){C.length&&this.writeMessage(k,z_,C)},writePackedSVarint:function(k,C){C.length&&this.writeMessage(k,O_,C)},writePackedBoolean:function(k,C){C.length&&this.writeMessage(k,U_,C)},writePackedFloat:function(k,C){C.length&&this.writeMessage(k,N_,C)},writePackedDouble:function(k,C){C.length&&this.writeMessage(k,B_,C)},writePackedFixed32:function(k,C){C.length&&this.writeMessage(k,V_,C)},writePackedSFixed32:function(k,C){C.length&&this.writeMessage(k,H_,C)},writePackedFixed64:function(k,C){C.length&&this.writeMessage(k,G_,C)},writePackedSFixed64:function(k,C){C.length&&this.writeMessage(k,Y_,C)},writeBytesField:function(k,C){this.writeTag(k,To.Bytes),this.writeBytes(C)},writeFixed32Field:function(k,C){this.writeTag(k,To.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(k,C){this.writeTag(k,To.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(k,C){this.writeTag(k,To.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(k,C){this.writeTag(k,To.Fixed64),this.writeSFixed64(C)},writeVarintField:function(k,C){this.writeTag(k,To.Varint),this.writeVarint(C)},writeSVarintField:function(k,C){this.writeTag(k,To.Varint),this.writeSVarint(C)},writeStringField:function(k,C){this.writeTag(k,To.Bytes),this.writeString(C)},writeFloatField:function(k,C){this.writeTag(k,To.Fixed32),this.writeFloat(C)},writeDoubleField:function(k,C){this.writeTag(k,To.Fixed64),this.writeDouble(C)},writeBooleanField:function(k,C){this.writeVarintField(k,Boolean(C))}};function D_(k,C,N){var te=N.buf,he,we;if(we=te[N.pos++],he=(we&112)>>4,we<128||(we=te[N.pos++],he|=(we&127)<<3,we<128)||(we=te[N.pos++],he|=(we&127)<<10,we<128)||(we=te[N.pos++],he|=(we&127)<<17,we<128)||(we=te[N.pos++],he|=(we&127)<<24,we<128)||(we=te[N.pos++],he|=(we&1)<<31,we<128))return vh(k,he,C);throw new Error("Expected varint not more than 10 bytes")}function Bf(k){return k.type===To.Bytes?k.readVarint()+k.pos:k.pos+1}function vh(k,C,N){return N?C*4294967296+(k>>>0):(C>>>0)*4294967296+(k>>>0)}function R_(k,C){var N,te;if(k>=0?(N=k%4294967296|0,te=k/4294967296|0):(N=~(-k%4294967296),te=~(-k/4294967296),N^4294967295?N=N+1|0:(N=0,te=te+1|0)),k>=18446744073709552e3||k<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),I_(N,te,C),F_(te,C)}function I_(k,C,N){N.buf[N.pos++]=k&127|128,k>>>=7,N.buf[N.pos++]=k&127|128,k>>>=7,N.buf[N.pos++]=k&127|128,k>>>=7,N.buf[N.pos++]=k&127|128,k>>>=7,N.buf[N.pos]=k&127}function F_(k,C){var N=(k&7)<<4;C.buf[C.pos++]|=N|((k>>>=3)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127)))))}function qg(k,C,N){var te=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));N.realloc(te);for(var he=N.pos-1;he>=k;he--)N.buf[he+te]=N.buf[he]}function z_(k,C){for(var N=0;N<k.length;N++)C.writeVarint(k[N])}function O_(k,C){for(var N=0;N<k.length;N++)C.writeSVarint(k[N])}function N_(k,C){for(var N=0;N<k.length;N++)C.writeFloat(k[N])}function B_(k,C){for(var N=0;N<k.length;N++)C.writeDouble(k[N])}function U_(k,C){for(var N=0;N<k.length;N++)C.writeBoolean(k[N])}function V_(k,C){for(var N=0;N<k.length;N++)C.writeFixed32(k[N])}function H_(k,C){for(var N=0;N<k.length;N++)C.writeSFixed32(k[N])}function G_(k,C){for(var N=0;N<k.length;N++)C.writeFixed64(k[N])}function Y_(k,C){for(var N=0;N<k.length;N++)C.writeSFixed64(k[N])}function sp(k,C){return(k[C]|k[C+1]<<8|k[C+2]<<16)+k[C+3]*16777216}function ph(k,C,N){k[N]=C,k[N+1]=C>>>8,k[N+2]=C>>>16,k[N+3]=C>>>24}function em(k,C){return(k[C]|k[C+1]<<8|k[C+2]<<16)+(k[C+3]<<24)}function W_(k,C,N){for(var te="",he=C;he<N;){var we=k[he],Me=null,Ne=we>239?4:we>223?3:we>191?2:1;if(he+Ne>N)break;var tt,vt,yt;Ne===1?we<128&&(Me=we):Ne===2?(tt=k[he+1],(tt&192)===128&&(Me=(we&31)<<6|tt&63,Me<=127&&(Me=null))):Ne===3?(tt=k[he+1],vt=k[he+2],(tt&192)===128&&(vt&192)===128&&(Me=(we&15)<<12|(tt&63)<<6|vt&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Ne===4&&(tt=k[he+1],vt=k[he+2],yt=k[he+3],(tt&192)===128&&(vt&192)===128&&(yt&192)===128&&(Me=(we&15)<<18|(tt&63)<<12|(vt&63)<<6|yt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Ne=1):Me>65535&&(Me-=65536,te+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),te+=String.fromCharCode(Me),he+=Ne}return te}function X_(k,C,N){return Qg.decode(k.subarray(C,N))}function j_(k,C,N){for(var te=0,he,we;te<C.length;te++){if(he=C.charCodeAt(te),he>55295&&he<57344)if(we)if(he<56320){k[N++]=239,k[N++]=191,k[N++]=189,we=he;continue}else he=we-55296<<10|he-56320|65536,we=null;else{he>56319||te+1===C.length?(k[N++]=239,k[N++]=191,k[N++]=189):we=he;continue}else we&&(k[N++]=239,k[N++]=191,k[N++]=189,we=null);he<128?k[N++]=he:(he<2048?k[N++]=he>>6|192:(he<65536?k[N++]=he>>12|224:(k[N++]=he>>18|240,k[N++]=he>>12&63|128),k[N++]=he>>6&63|128),k[N++]=he&63|128)}return N}var Bd=3;function Z_(k,C,N){k===1&&N.readMessage(K_,C)}function K_(k,C,N){if(k===3){var te=N.readMessage(J_,{}),he=te.id,we=te.bitmap,Me=te.width,Ne=te.height,tt=te.left,vt=te.top,yt=te.advance;C.push({id:he,bitmap:new Ic({width:Me+2*Bd,height:Ne+2*Bd},we),metrics:{width:Me,height:Ne,left:tt,top:vt,advance:yt}})}}function J_(k,C,N){k===1?C.id=N.readVarint():k===2?C.bitmap=N.readBytes():k===3?C.width=N.readVarint():k===4?C.height=N.readVarint():k===5?C.left=N.readSVarint():k===6?C.top=N.readSVarint():k===7&&(C.advance=N.readVarint())}function $_(k){return new op(k).readFields(Z_,[])}var tm=Bd;function rm(k){for(var C=0,N=0,te=0,he=k;te<he.length;te+=1){var we=he[te];C+=we.w*we.h,N=Math.max(N,we.w)}k.sort(function(hn,an){return an.h-hn.h});for(var Me=Math.max(Math.ceil(Math.sqrt(C/.95)),N),Ne=[{x:0,y:0,w:Me,h:1/0}],tt=0,vt=0,yt=0,Vt=k;yt<Vt.length;yt+=1)for(var or=Vt[yt],nr=Ne.length-1;nr>=0;nr--){var xr=Ne[nr];if(!(or.w>xr.w||or.h>xr.h)){if(or.x=xr.x,or.y=xr.y,vt=Math.max(vt,or.y+or.h),tt=Math.max(tt,or.x+or.w),or.w===xr.w&&or.h===xr.h){var Ur=Ne.pop();nr<Ne.length&&(Ne[nr]=Ur)}else or.h===xr.h?(xr.x+=or.w,xr.w-=or.w):or.w===xr.w?(xr.y+=or.h,xr.h-=or.h):(Ne.push({x:xr.x+or.w,y:xr.y,w:xr.w-or.w,h:or.h}),xr.y+=or.h,xr.h-=or.h);break}}return{w:tt,h:vt,fill:C/(tt*vt)||0}}var ql=1,lp=function(C,N){var te=N.pixelRatio,he=N.version,we=N.stretchX,Me=N.stretchY,Ne=N.content;this.paddedRect=C,this.pixelRatio=te,this.stretchX=we,this.stretchY=Me,this.content=Ne,this.version=he},yv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};yv.tl.get=function(){return[this.paddedRect.x+ql,this.paddedRect.y+ql]},yv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ql,this.paddedRect.y+this.paddedRect.h-ql]},yv.tlbr.get=function(){return this.tl.concat(this.br)},yv.displaySize.get=function(){return[(this.paddedRect.w-ql*2)/this.pixelRatio,(this.paddedRect.h-ql*2)/this.pixelRatio]},Object.defineProperties(lp.prototype,yv);var xv=function(C,N){var te={},he={};this.haveRenderCallbacks=[];var we=[];this.addImages(C,te,we),this.addImages(N,he,we);var Me=rm(we),Ne=Me.w,tt=Me.h,vt=new Nl({width:Ne||1,height:tt||1});for(var yt in C){var Vt=C[yt],or=te[yt].paddedRect;Nl.copy(Vt.data,vt,{x:0,y:0},{x:or.x+ql,y:or.y+ql},Vt.data)}for(var nr in N){var xr=N[nr],Ur=he[nr].paddedRect,hn=Ur.x+ql,an=Ur.y+ql,Rn=xr.data.width,Mn=xr.data.height;Nl.copy(xr.data,vt,{x:0,y:0},{x:hn,y:an},xr.data),Nl.copy(xr.data,vt,{x:0,y:Mn-1},{x:hn,y:an-1},{width:Rn,height:1}),Nl.copy(xr.data,vt,{x:0,y:0},{x:hn,y:an+Mn},{width:Rn,height:1}),Nl.copy(xr.data,vt,{x:Rn-1,y:0},{x:hn-1,y:an},{width:1,height:Mn}),Nl.copy(xr.data,vt,{x:0,y:0},{x:hn+Rn,y:an},{width:1,height:Mn})}this.image=vt,this.iconPositions=te,this.patternPositions=he};xv.prototype.addImages=function(C,N,te){for(var he in C){var we=C[he],Me={x:0,y:0,w:we.data.width+2*ql,h:we.data.height+2*ql};te.push(Me),N[he]=new lp(Me,we),we.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},xv.prototype.patchUpdatedImages=function(C,N){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var te in C.updatedImages)this.patchUpdatedImage(this.iconPositions[te],C.getImage(te),N),this.patchUpdatedImage(this.patternPositions[te],C.getImage(te),N)},xv.prototype.patchUpdatedImage=function(C,N,te){if(!(!C||!N)&&C.version!==N.version){C.version=N.version;var he=C.tl,we=he[0],Me=he[1];te.update(N.data,void 0,{x:we,y:Me})}},Be("ImagePosition",lp),Be("ImageAtlas",xv);var mu={horizontal:1,vertical:2,horizontalOnly:3},bv=-17;function Q_(k){for(var C=0,N=k;C<N.length;C+=1){var te=N[C];if(te.positionedGlyphs.length!==0)return!1}return!0}var nm=57344,am=63743,dh=function(){this.scale=1,this.fontStack="",this.imageName=null};dh.forText=function(C,N){var te=new dh;return te.scale=C||1,te.fontStack=N,te},dh.forImage=function(C){var N=new dh;return N.imageName=C,N};var ol=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};ol.fromFeature=function(C,N){for(var te=new ol,he=0;he<C.sections.length;he++){var we=C.sections[he];we.image?te.addImageSection(we):te.addTextSection(we,N)}return te},ol.prototype.length=function(){return this.text.length},ol.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},ol.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},ol.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},ol.prototype.verticalizePunctuation=function(){this.text=k_(this.text)},ol.prototype.trim=function(){for(var C=0,N=0;N<this.text.length&&Cf[this.text.charCodeAt(N)];N++)C++;for(var te=this.text.length,he=this.text.length-1;he>=0&&he>=C&&Cf[this.text.charCodeAt(he)];he--)te--;this.text=this.text.substring(C,te),this.sectionIndex=this.sectionIndex.slice(C,te)},ol.prototype.substring=function(C,N){var te=new ol;return te.text=this.text.substring(C,N),te.sectionIndex=this.sectionIndex.slice(C,N),te.sections=this.sections,te},ol.prototype.toString=function(){return this.text},ol.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(N,te){return Math.max(N,C.sections[te].scale)},0)},ol.prototype.addTextSection=function(C,N){this.text+=C.text,this.sections.push(dh.forText(C.scale,C.fontStack||N));for(var te=this.sections.length-1,he=0;he<C.text.length;++he)this.sectionIndex.push(te)},ol.prototype.addImageSection=function(C){var N=C.image?C.image.name:"";if(N.length===0){O("Can't add FormattedSection with an empty image.");return}var te=this.getNextImageSectionCharCode();if(!te){O("Reached maximum number of images "+(am-nm+2));return}this.text+=String.fromCharCode(te),this.sections.push(dh.forImage(N)),this.sectionIndex.push(this.sections.length-1)},ol.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=am?null:++this.imageSectionID:(this.imageSectionID=nm,this.imageSectionID)};function q_(k,C){for(var N=[],te=k.text,he=0,we=0,Me=C;we<Me.length;we+=1){var Ne=Me[we];N.push(k.substring(he,Ne)),he=Ne}return he<te.length&&N.push(k.substring(he,te.length)),N}function up(k,C,N,te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur){var hn=ol.fromFeature(k,he);Vt===mu.vertical&&hn.verticalizePunctuation();var an,Rn=ii.processBidirectionalText,Mn=ii.processStyledBidirectionalText;if(Rn&&hn.sections.length===1){an=[];for(var Dn=Rn(hn.toString(),Ud(hn,vt,we,C,te,nr,xr)),Vn=0,qn=Dn;Vn<qn.length;Vn+=1){var da=qn[Vn],va=new ol;va.text=da,va.sections=hn.sections;for(var Wa=0;Wa<da.length;Wa++)va.sectionIndex.push(0);an.push(va)}}else if(Mn){an=[];for(var Da=Mn(hn.text,hn.sectionIndex,Ud(hn,vt,we,C,te,nr,xr)),Oa=0,ci=Da;Oa<ci.length;Oa+=1){var Ua=ci[Oa],Ha=new ol;Ha.text=Ua[0],Ha.sectionIndex=Ua[1],Ha.sections=hn.sections,an.push(Ha)}}else an=q_(hn,Ud(hn,vt,we,C,te,nr,xr));var bi=[],fi={positionedLines:bi,text:hn.toString(),top:yt[1],bottom:yt[1],left:yt[0],right:yt[0],writingMode:Vt,iconsInText:!1,verticalizable:!1};return r2(fi,C,N,te,an,Me,Ne,tt,Vt,vt,or,Ur),Q_(bi)?!1:fi}var Cf={};Cf[9]=!0,Cf[10]=!0,Cf[11]=!0,Cf[12]=!0,Cf[13]=!0,Cf[32]=!0;var eu={};eu[10]=!0,eu[32]=!0,eu[38]=!0,eu[40]=!0,eu[41]=!0,eu[43]=!0,eu[45]=!0,eu[47]=!0,eu[173]=!0,eu[183]=!0,eu[8203]=!0,eu[8208]=!0,eu[8211]=!0,eu[8231]=!0;function im(k,C,N,te,he,we){if(C.imageName){var tt=te[C.imageName];return tt?tt.displaySize[0]*C.scale*Us/we+he:0}else{var Me=N[C.fontStack],Ne=Me&&Me[k];return Ne?Ne.metrics.advance*C.scale+he:0}}function e2(k,C,N,te,he,we){for(var Me=0,Ne=0;Ne<k.length();Ne++){var tt=k.getSection(Ne);Me+=im(k.getCharCode(Ne),tt,te,he,C,we)}var vt=Math.max(1,Math.ceil(Me/N));return Me/vt}function om(k,C,N,te){var he=Math.pow(k-C,2);return te?k<C?he/2:he*2:he+Math.abs(N)*N}function t2(k,C,N){var te=0;return k===10&&(te-=1e4),N&&(te+=150),(k===40||k===65288)&&(te+=50),(C===41||C===65289)&&(te+=50),te}function sm(k,C,N,te,he,we){for(var Me=null,Ne=om(C,N,he,we),tt=0,vt=te;tt<vt.length;tt+=1){var yt=vt[tt],Vt=C-yt.x,or=om(Vt,N,he,we)+yt.badness;or<=Ne&&(Me=yt,Ne=or)}return{index:k,x:C,priorBreak:Me,badness:Ne}}function lm(k){return k?lm(k.priorBreak).concat(k.index):[]}function Ud(k,C,N,te,he,we,Me){if(we!=="point")return[];if(!k)return[];for(var Ne=[],tt=e2(k,C,N,te,he,Me),vt=k.text.indexOf("\u200B")>=0,yt=0,Vt=0;Vt<k.length();Vt++){var or=k.getSection(Vt),nr=k.getCharCode(Vt);if(Cf[nr]||(yt+=im(nr,or,te,he,C,Me)),Vt<k.length()-1){var xr=Ir(nr);(eu[nr]||xr||or.imageName)&&Ne.push(sm(Vt+1,yt,tt,Ne,t2(nr,k.getCharCode(Vt+1),xr&&vt),!1))}}return lm(sm(k.length(),yt,tt,Ne,0,!0))}function Vd(k){var C=.5,N=.5;switch(k){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(k){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0;break}return{horizontalAlign:C,verticalAlign:N}}function r2(k,C,N,te,he,we,Me,Ne,tt,vt,yt,Vt){for(var or=0,nr=bv,xr=0,Ur=0,hn=Ne==="right"?1:Ne==="left"?0:.5,an=0,Rn=0,Mn=he;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];Dn.trim();var Vn=Dn.getMaxScale(),qn=(Vn-1)*Us,da={positionedGlyphs:[],lineOffset:0};k.positionedLines[an]=da;var va=da.positionedGlyphs,Wa=0;if(!Dn.length()){nr+=we,++an;continue}for(var Da=0;Da<Dn.length();Da++){var Oa=Dn.getSection(Da),ci=Dn.getSectionIndex(Da),Ua=Dn.getCharCode(Da),Ha=0,bi=null,fi=null,Vi=null,so=Us,Hi=!(tt===mu.horizontal||!yt&&!Wr(Ua)||yt&&(Cf[Ua]||vn(Ua)));if(Oa.imageName){var Yo=te[Oa.imageName];if(!Yo)continue;Vi=Oa.imageName,k.iconsInText=k.iconsInText||!0,fi=Yo.paddedRect;var Ko=Yo.displaySize;Oa.scale=Oa.scale*Us/Vt,bi={width:Ko[0],height:Ko[1],left:ql,top:-tm,advance:Hi?Ko[1]:Ko[0]};var Cs=Us-Ko[1]*Oa.scale;Ha=qn+Cs,so=bi.advance;var ls=Hi?Ko[0]*Oa.scale-Us*Vn:Ko[1]*Oa.scale-Us*Vn;ls>0&&ls>Wa&&(Wa=ls)}else{var Gi=N[Oa.fontStack],Oi=Gi&&Gi[Ua];if(Oi&&Oi.rect)fi=Oi.rect,bi=Oi.metrics;else{var yo=C[Oa.fontStack],Ao=yo&&yo[Ua];if(!Ao)continue;bi=Ao.metrics}Ha=(Vn-Oa.scale)*Us}Hi?(k.verticalizable=!0,va.push({glyph:Ua,imageName:Vi,x:or,y:nr+Ha,vertical:Hi,scale:Oa.scale,fontStack:Oa.fontStack,sectionIndex:ci,metrics:bi,rect:fi}),or+=so*Oa.scale+vt):(va.push({glyph:Ua,imageName:Vi,x:or,y:nr+Ha,vertical:Hi,scale:Oa.scale,fontStack:Oa.fontStack,sectionIndex:ci,metrics:bi,rect:fi}),or+=bi.advance*Oa.scale+vt)}if(va.length!==0){var sl=or-vt;xr=Math.max(sl,xr),n2(va,0,va.length-1,hn,Wa)}or=0;var ll=we*Vn+Wa;da.lineOffset=Math.max(Wa,qn),nr+=ll,Ur=Math.max(ll,Ur),++an}var Ls=nr-bv,_l=Vd(Me),wl=_l.horizontalAlign,bs=_l.verticalAlign;a2(k.positionedLines,hn,wl,bs,xr,Ur,we,Ls,he.length),k.top+=-bs*Ls,k.bottom=k.top+Ls,k.left+=-wl*xr,k.right=k.left+xr}function n2(k,C,N,te,he){if(!(!te&&!he))for(var we=k[N],Me=we.metrics.advance*we.scale,Ne=(k[N].x+Me)*te,tt=C;tt<=N;tt++)k[tt].x-=Ne,k[tt].y+=he}function a2(k,C,N,te,he,we,Me,Ne,tt){var vt=(C-N)*he,yt=0;we!==Me?yt=-Ne*te-bv:yt=(-te*tt+.5)*Me;for(var Vt=0,or=k;Vt<or.length;Vt+=1)for(var nr=or[Vt],xr=0,Ur=nr.positionedGlyphs;xr<Ur.length;xr+=1){var hn=Ur[xr];hn.x+=vt,hn.y+=yt}}function i2(k,C,N){var te=Vd(N),he=te.horizontalAlign,we=te.verticalAlign,Me=C[0],Ne=C[1],tt=Me-k.displaySize[0]*he,vt=tt+k.displaySize[0],yt=Ne-k.displaySize[1]*we,Vt=yt+k.displaySize[1];return{image:k,top:yt,bottom:Vt,left:tt,right:vt}}function um(k,C,N,te,he,we){var Me=k.image,Ne;if(Me.content){var tt=Me.content,vt=Me.pixelRatio||1;Ne=[tt[0]/vt,tt[1]/vt,Me.displaySize[0]-tt[2]/vt,Me.displaySize[1]-tt[3]/vt]}var yt=C.left*we,Vt=C.right*we,or,nr,xr,Ur;N==="width"||N==="both"?(Ur=he[0]+yt-te[3],nr=he[0]+Vt+te[1]):(Ur=he[0]+(yt+Vt-Me.displaySize[0])/2,nr=Ur+Me.displaySize[0]);var hn=C.top*we,an=C.bottom*we;return N==="height"||N==="both"?(or=he[1]+hn-te[0],xr=he[1]+an+te[2]):(or=he[1]+(hn+an-Me.displaySize[1])/2,xr=or+Me.displaySize[1]),{image:Me,top:or,right:nr,bottom:xr,left:Ur,collisionPadding:Ne}}var gh=function(k){function C(N,te,he,we){k.call(this,N,te),this.angle=he,we!==void 0&&(this.segment=we)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(v);Be("Anchor",gh);var pf=128;function Hd(k,C){var N=C.expression;if(N.kind==="constant"){var te=N.evaluate(new yi(k+1));return{kind:"constant",layoutSize:te}}else{if(N.kind==="source")return{kind:"source"};for(var he=N.zoomStops,we=N.interpolationType,Me=0;Me<he.length&&he[Me]<=k;)Me++;Me=Math.max(0,Me-1);for(var Ne=Me;Ne<he.length&&he[Ne]<k+1;)Ne++;Ne=Math.min(he.length-1,Ne);var tt=he[Me],vt=he[Ne];if(N.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:vt,interpolationType:we};var yt=N.evaluate(new yi(tt)),Vt=N.evaluate(new yi(vt));return{kind:"camera",minZoom:tt,maxZoom:vt,minSize:yt,maxSize:Vt,interpolationType:we}}}function fm(k,C,N){var te=C.uSize,he=C.uSizeT,we=N.lowerSize,Me=N.upperSize;return k.kind==="source"?we/pf:k.kind==="composite"?go(we/pf,Me/pf,he):te}function cm(k,C){var N=0,te=0;if(k.kind==="constant")te=k.layoutSize;else if(k.kind!=="source"){var he=k.interpolationType,we=k.minZoom,Me=k.maxZoom,Ne=he?c(uo.interpolationFactor(he,C,we,Me),0,1):0;k.kind==="camera"?te=go(k.minSize,k.maxSize,Ne):N=Ne}return{uSizeT:N,uSize:te}}var o2=Object.freeze({__proto__:null,getSizeData:Hd,evaluateSizeForFeature:fm,evaluateSizeForZoom:cm,SIZE_PACK_FACTOR:pf});function hm(k,C,N,te,he){if(C.segment===void 0)return!0;for(var we=C,Me=C.segment+1,Ne=0;Ne>-N/2;){if(Me--,Me<0)return!1;Ne-=k[Me].dist(we),we=k[Me]}Ne+=k[Me].dist(k[Me+1]),Me++;for(var tt=[],vt=0;Ne<N/2;){var yt=k[Me-1],Vt=k[Me],or=k[Me+1];if(!or)return!1;var nr=yt.angleTo(Vt)-Vt.angleTo(or);for(nr=Math.abs((nr+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:Ne,angleDelta:nr}),vt+=nr;Ne-tt[0].distance>te;)vt-=tt.shift().angleDelta;if(vt>he)return!1;Me++,Ne+=Vt.dist(or)}return!0}function vm(k){for(var C=0,N=0;N<k.length-1;N++)C+=k[N].dist(k[N+1]);return C}function pm(k,C,N){return k?3/5*C*N:0}function dm(k,C){return Math.max(k?k.right-k.left:0,C?C.right-C.left:0)}function s2(k,C,N,te,he,we){for(var Me=pm(N,he,we),Ne=dm(N,te)*we,tt=0,vt=vm(k)/2,yt=0;yt<k.length-1;yt++){var Vt=k[yt],or=k[yt+1],nr=Vt.dist(or);if(tt+nr>vt){var xr=(vt-tt)/nr,Ur=go(Vt.x,or.x,xr),hn=go(Vt.y,or.y,xr),an=new gh(Ur,hn,or.angleTo(Vt),yt);return an._round(),!Me||hm(k,an,Ne,Me,C)?an:void 0}tt+=nr}}function l2(k,C,N,te,he,we,Me,Ne,tt){var vt=pm(te,we,Me),yt=dm(te,he),Vt=yt*Me,or=k[0].x===0||k[0].x===tt||k[0].y===0||k[0].y===tt;C-Vt<C/4&&(C=Vt+C/4);var nr=we*2,xr=or?C/2*Ne%C:(yt/2+nr)*Me*Ne%C;return gm(k,xr,C,vt,N,Vt,or,!1,tt)}function gm(k,C,N,te,he,we,Me,Ne,tt){for(var vt=we/2,yt=vm(k),Vt=0,or=C-N,nr=[],xr=0;xr<k.length-1;xr++){for(var Ur=k[xr],hn=k[xr+1],an=Ur.dist(hn),Rn=hn.angleTo(Ur);or+N<Vt+an;){or+=N;var Mn=(or-Vt)/an,Dn=go(Ur.x,hn.x,Mn),Vn=go(Ur.y,hn.y,Mn);if(Dn>=0&&Dn<tt&&Vn>=0&&Vn<tt&&or-vt>=0&&or+vt<=yt){var qn=new gh(Dn,Vn,Rn,xr);qn._round(),(!te||hm(k,qn,we,te,he))&&nr.push(qn)}}Vt+=an}return!Ne&&!nr.length&&!Me&&(nr=gm(k,Vt/2,N,te,he,we,Me,!0,tt)),nr}function mm(k,C,N,te,he){for(var we=[],Me=0;Me<k.length;Me++)for(var Ne=k[Me],tt=void 0,vt=0;vt<Ne.length-1;vt++){var yt=Ne[vt],Vt=Ne[vt+1];yt.x<C&&Vt.x<C||(yt.x<C?yt=new v(C,yt.y+(Vt.y-yt.y)*((C-yt.x)/(Vt.x-yt.x)))._round():Vt.x<C&&(Vt=new v(C,yt.y+(Vt.y-yt.y)*((C-yt.x)/(Vt.x-yt.x)))._round()),!(yt.y<N&&Vt.y<N)&&(yt.y<N?yt=new v(yt.x+(Vt.x-yt.x)*((N-yt.y)/(Vt.y-yt.y)),N)._round():Vt.y<N&&(Vt=new v(yt.x+(Vt.x-yt.x)*((N-yt.y)/(Vt.y-yt.y)),N)._round()),!(yt.x>=te&&Vt.x>=te)&&(yt.x>=te?yt=new v(te,yt.y+(Vt.y-yt.y)*((te-yt.x)/(Vt.x-yt.x)))._round():Vt.x>=te&&(Vt=new v(te,yt.y+(Vt.y-yt.y)*((te-yt.x)/(Vt.x-yt.x)))._round()),!(yt.y>=he&&Vt.y>=he)&&(yt.y>=he?yt=new v(yt.x+(Vt.x-yt.x)*((he-yt.y)/(Vt.y-yt.y)),he)._round():Vt.y>=he&&(Vt=new v(yt.x+(Vt.x-yt.x)*((he-yt.y)/(Vt.y-yt.y)),he)._round()),(!tt||!yt.equals(tt[tt.length-1]))&&(tt=[yt],we.push(tt)),tt.push(Vt)))))}return we}var mh=ql;function ym(k,C,N,te){var he=[],we=k.image,Me=we.pixelRatio,Ne=we.paddedRect.w-2*mh,tt=we.paddedRect.h-2*mh,vt=k.right-k.left,yt=k.bottom-k.top,Vt=we.stretchX||[[0,Ne]],or=we.stretchY||[[0,tt]],nr=function(Gi,Oi){return Gi+Oi[1]-Oi[0]},xr=Vt.reduce(nr,0),Ur=or.reduce(nr,0),hn=Ne-xr,an=tt-Ur,Rn=0,Mn=xr,Dn=0,Vn=Ur,qn=0,da=hn,va=0,Wa=an;if(we.content&&te){var Da=we.content;Rn=fp(Vt,0,Da[0]),Dn=fp(or,0,Da[1]),Mn=fp(Vt,Da[0],Da[2]),Vn=fp(or,Da[1],Da[3]),qn=Da[0]-Rn,va=Da[1]-Dn,da=Da[2]-Da[0]-Mn,Wa=Da[3]-Da[1]-Vn}var Oa=function(Gi,Oi,yo,Ao){var Yo=cp(Gi.stretch-Rn,Mn,vt,k.left),Ko=hp(Gi.fixed-qn,da,Gi.stretch,xr),Cs=cp(Oi.stretch-Dn,Vn,yt,k.top),ls=hp(Oi.fixed-va,Wa,Oi.stretch,Ur),sl=cp(yo.stretch-Rn,Mn,vt,k.left),ll=hp(yo.fixed-qn,da,yo.stretch,xr),Ls=cp(Ao.stretch-Dn,Vn,yt,k.top),_l=hp(Ao.fixed-va,Wa,Ao.stretch,Ur),wl=new v(Yo,Cs),bs=new v(sl,Cs),Tl=new v(sl,Ls),yu=new v(Yo,Ls),Hf=new v(Ko/Me,ls/Me),uc=new v(ll/Me,_l/Me),fc=C*Math.PI/180;if(fc){var cc=Math.sin(fc),Mh=Math.cos(fc),qu=[Mh,-cc,cc,Mh];wl._matMult(qu),bs._matMult(qu),yu._matMult(qu),Tl._matMult(qu)}var yp=Gi.stretch+Gi.fixed,Jd=yo.stretch+yo.fixed,xp=Oi.stretch+Oi.fixed,$d=Ao.stretch+Ao.fixed,Ou={x:we.paddedRect.x+mh+yp,y:we.paddedRect.y+mh+xp,w:Jd-yp,h:$d-xp},Eh=da/Me/vt,bp=Wa/Me/yt;return{tl:wl,tr:bs,bl:yu,br:Tl,tex:Ou,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hf,pixelOffsetBR:uc,minFontScaleX:Eh,minFontScaleY:bp,isSDF:N}};if(!te||!we.stretchX&&!we.stretchY)he.push(Oa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:tt+1}));else for(var ci=xm(Vt,hn,xr),Ua=xm(or,an,Ur),Ha=0;Ha<ci.length-1;Ha++)for(var bi=ci[Ha],fi=ci[Ha+1],Vi=0;Vi<Ua.length-1;Vi++){var so=Ua[Vi],Hi=Ua[Vi+1];he.push(Oa(bi,so,fi,Hi))}return he}function fp(k,C,N){for(var te=0,he=0,we=k;he<we.length;he+=1){var Me=we[he];te+=Math.max(C,Math.min(N,Me[1]))-Math.max(C,Math.min(N,Me[0]))}return te}function xm(k,C,N){for(var te=[{fixed:-mh,stretch:0}],he=0,we=k;he<we.length;he+=1){var Me=we[he],Ne=Me[0],tt=Me[1],vt=te[te.length-1];te.push({fixed:Ne-vt.stretch,stretch:vt.stretch}),te.push({fixed:Ne-vt.stretch,stretch:vt.stretch+(tt-Ne)})}return te.push({fixed:C+mh,stretch:N}),te}function cp(k,C,N,te){return k/C*N+te}function hp(k,C,N,te){return k-C*N/te}function u2(k,C,N,te,he,we,Me,Ne){for(var tt=te.layout.get("text-rotate").evaluate(we,{})*Math.PI/180,vt=[],yt=0,Vt=C.positionedLines;yt<Vt.length;yt+=1)for(var or=Vt[yt],nr=0,xr=or.positionedGlyphs;nr<xr.length;nr+=1){var Ur=xr[nr];if(!!Ur.rect){var hn=Ur.rect||{},an=1,Rn=tm+an,Mn=!0,Dn=1,Vn=0,qn=(he||Ne)&&Ur.vertical,da=Ur.metrics.advance*Ur.scale/2;if(Ne&&C.verticalizable){var va=(Ur.scale-1)*Us,Wa=(Us-Ur.metrics.width*Ur.scale)/2;Vn=or.lineOffset/2-(Ur.imageName?-Wa:va)}if(Ur.imageName){var Da=Me[Ur.imageName];Mn=Da.sdf,Dn=Da.pixelRatio,Rn=ql/Dn}var Oa=he?[Ur.x+da,Ur.y]:[0,0],ci=he?[0,0]:[Ur.x+da+N[0],Ur.y+N[1]-Vn],Ua=[0,0];qn&&(Ua=ci,ci=[0,0]);var Ha=(Ur.metrics.left-Rn)*Ur.scale-da+ci[0],bi=(-Ur.metrics.top-Rn)*Ur.scale+ci[1],fi=Ha+hn.w*Ur.scale/Dn,Vi=bi+hn.h*Ur.scale/Dn,so=new v(Ha,bi),Hi=new v(fi,bi),Gi=new v(Ha,Vi),Oi=new v(fi,Vi);if(qn){var yo=new v(-da,da-bv),Ao=-Math.PI/2,Yo=Us/2-da,Ko=Ur.imageName?Yo:0,Cs=new v(5-bv-Yo,-Ko),ls=new(Function.prototype.bind.apply(v,[null].concat(Ua)));so._rotateAround(Ao,yo)._add(Cs)._add(ls),Hi._rotateAround(Ao,yo)._add(Cs)._add(ls),Gi._rotateAround(Ao,yo)._add(Cs)._add(ls),Oi._rotateAround(Ao,yo)._add(Cs)._add(ls)}if(tt){var sl=Math.sin(tt),ll=Math.cos(tt),Ls=[ll,-sl,sl,ll];so._matMult(Ls),Hi._matMult(Ls),Gi._matMult(Ls),Oi._matMult(Ls)}var _l=new v(0,0),wl=new v(0,0),bs=0,Tl=0;vt.push({tl:so,tr:Hi,bl:Gi,br:Oi,tex:hn,writingMode:C.writingMode,glyphOffset:Oa,sectionIndex:Ur.sectionIndex,isSDF:Mn,pixelOffsetTL:_l,pixelOffsetBR:wl,minFontScaleX:bs,minFontScaleY:Tl})}}return vt}var vp=function(C,N,te,he,we,Me,Ne,tt,vt,yt){if(this.boxStartIndex=C.length,vt){var Vt=Me.top,or=Me.bottom,nr=Me.collisionPadding;nr&&(Vt-=nr[1],or+=nr[3]);var xr=or-Vt;xr>0&&(xr=Math.max(10,xr),this.circleDiameter=xr)}else{var Ur=Me.top*Ne-tt,hn=Me.bottom*Ne+tt,an=Me.left*Ne-tt,Rn=Me.right*Ne+tt,Mn=Me.collisionPadding;if(Mn&&(an-=Mn[0]*Ne,Ur-=Mn[1]*Ne,Rn+=Mn[2]*Ne,hn+=Mn[3]*Ne),yt){var Dn=new v(an,Ur),Vn=new v(Rn,Ur),qn=new v(an,hn),da=new v(Rn,hn),va=yt*Math.PI/180;Dn._rotate(va),Vn._rotate(va),qn._rotate(va),da._rotate(va),an=Math.min(Dn.x,Vn.x,qn.x,da.x),Rn=Math.max(Dn.x,Vn.x,qn.x,da.x),Ur=Math.min(Dn.y,Vn.y,qn.y,da.y),hn=Math.max(Dn.y,Vn.y,qn.y,da.y)}C.emplaceBack(N.x,N.y,an,Ur,Rn,hn,te,he,we)}this.boxEndIndex=C.length},yh=function(C,N){if(C===void 0&&(C=[]),N===void 0&&(N=f2),this.data=C,this.length=this.data.length,this.compare=N,this.length>0)for(var te=(this.length>>1)-1;te>=0;te--)this._down(te)};yh.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},yh.prototype.pop=function(){if(this.length!==0){var C=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),C}},yh.prototype.peek=function(){return this.data[0]},yh.prototype._up=function(C){for(var N=this,te=N.data,he=N.compare,we=te[C];C>0;){var Me=C-1>>1,Ne=te[Me];if(he(we,Ne)>=0)break;te[C]=Ne,C=Me}te[C]=we},yh.prototype._down=function(C){for(var N=this,te=N.data,he=N.compare,we=this.length>>1,Me=te[C];C<we;){var Ne=(C<<1)+1,tt=te[Ne],vt=Ne+1;if(vt<this.length&&he(te[vt],tt)<0&&(Ne=vt,tt=te[vt]),he(tt,Me)>=0)break;te[C]=tt,C=Ne}te[C]=Me};function f2(k,C){return k<C?-1:k>C?1:0}function c2(k,C,N){C===void 0&&(C=1),N===void 0&&(N=!1);for(var te=1/0,he=1/0,we=-1/0,Me=-1/0,Ne=k[0],tt=0;tt<Ne.length;tt++){var vt=Ne[tt];(!tt||vt.x<te)&&(te=vt.x),(!tt||vt.y<he)&&(he=vt.y),(!tt||vt.x>we)&&(we=vt.x),(!tt||vt.y>Me)&&(Me=vt.y)}var yt=we-te,Vt=Me-he,or=Math.min(yt,Vt),nr=or/2,xr=new yh([],h2);if(or===0)return new v(te,he);for(var Ur=te;Ur<we;Ur+=or)for(var hn=he;hn<Me;hn+=or)xr.push(new xh(Ur+nr,hn+nr,nr,k));for(var an=p2(k),Rn=xr.length;xr.length;){var Mn=xr.pop();(Mn.d>an.d||!an.d)&&(an=Mn,N&&console.log("found best %d after %d probes",Math.round(1e4*Mn.d)/1e4,Rn)),!(Mn.max-an.d<=C)&&(nr=Mn.h/2,xr.push(new xh(Mn.p.x-nr,Mn.p.y-nr,nr,k)),xr.push(new xh(Mn.p.x+nr,Mn.p.y-nr,nr,k)),xr.push(new xh(Mn.p.x-nr,Mn.p.y+nr,nr,k)),xr.push(new xh(Mn.p.x+nr,Mn.p.y+nr,nr,k)),Rn+=4)}return N&&(console.log("num probes: "+Rn),console.log("best distance: "+an.d)),an.p}function h2(k,C){return C.max-k.max}function xh(k,C,N,te){this.p=new v(k,C),this.h=N,this.d=v2(this.p,te),this.max=this.d+this.h*Math.SQRT2}function v2(k,C){for(var N=!1,te=1/0,he=0;he<C.length;he++)for(var we=C[he],Me=0,Ne=we.length,tt=Ne-1;Me<Ne;tt=Me++){var vt=we[Me],yt=we[tt];vt.y>k.y!=yt.y>k.y&&k.x<(yt.x-vt.x)*(k.y-vt.y)/(yt.y-vt.y)+vt.x&&(N=!N),te=Math.min(te,cf(k,vt,yt))}return(N?1:-1)*Math.sqrt(te)}function p2(k){for(var C=0,N=0,te=0,he=k[0],we=0,Me=he.length,Ne=Me-1;we<Me;Ne=we++){var tt=he[we],vt=he[Ne],yt=tt.x*vt.y-vt.x*tt.y;N+=(tt.x+vt.x)*yt,te+=(tt.y+vt.y)*yt,C+=yt*3}return new xh(N/C,te/C,0,k)}var bh=7,Gd=Number.POSITIVE_INFINITY;function bm(k,C){function N(he,we){var Me=0,Ne=0;we<0&&(we=0);var tt=we/Math.sqrt(2);switch(he){case"top-right":case"top-left":Ne=tt-bh;break;case"bottom-right":case"bottom-left":Ne=-tt+bh;break;case"bottom":Ne=-we+bh;break;case"top":Ne=we-bh;break}switch(he){case"top-right":case"bottom-right":Me=-tt;break;case"top-left":case"bottom-left":Me=tt;break;case"left":Me=we;break;case"right":Me=-we;break}return[Me,Ne]}function te(he,we,Me){var Ne=0,tt=0;switch(we=Math.abs(we),Me=Math.abs(Me),he){case"top-right":case"top-left":case"top":tt=Me-bh;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Me+bh;break}switch(he){case"top-right":case"bottom-right":case"right":Ne=-we;break;case"top-left":case"bottom-left":case"left":Ne=we;break}return[Ne,tt]}return C[1]!==Gd?te(k,C[0],C[1]):N(k,C[0])}function d2(k,C,N,te,he,we,Me){k.createArrays();var Ne=512*k.overscaling;k.tilePixelRatio=Ja/Ne,k.compareText={},k.iconsNeedLinear=!1;var tt=k.layers[0].layout,vt=k.layers[0]._unevaluatedLayout._values,yt={};if(k.textSizeData.kind==="composite"){var Vt=k.textSizeData,or=Vt.minZoom,nr=Vt.maxZoom;yt.compositeTextSizes=[vt["text-size"].possiblyEvaluate(new yi(or),Me),vt["text-size"].possiblyEvaluate(new yi(nr),Me)]}if(k.iconSizeData.kind==="composite"){var xr=k.iconSizeData,Ur=xr.minZoom,hn=xr.maxZoom;yt.compositeIconSizes=[vt["icon-size"].possiblyEvaluate(new yi(Ur),Me),vt["icon-size"].possiblyEvaluate(new yi(hn),Me)]}yt.layoutTextSize=vt["text-size"].possiblyEvaluate(new yi(k.zoom+1),Me),yt.layoutIconSize=vt["icon-size"].possiblyEvaluate(new yi(k.zoom+1),Me),yt.textMaxSize=vt["text-size"].possiblyEvaluate(new yi(18));for(var an=tt.get("text-line-height")*Us,Rn=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",Mn=tt.get("text-keep-upright"),Dn=tt.get("text-size"),Vn=function(){var va=da[qn],Wa=tt.get("text-font").evaluate(va,{},Me).join(","),Da=Dn.evaluate(va,{},Me),Oa=yt.layoutTextSize.evaluate(va,{},Me),ci=yt.layoutIconSize.evaluate(va,{},Me),Ua={horizontal:{},vertical:void 0},Ha=va.text,bi=[0,0];if(Ha){var fi=Ha.toString(),Vi=tt.get("text-letter-spacing").evaluate(va,{},Me)*Us,so=nn(fi)?Vi:0,Hi=tt.get("text-anchor").evaluate(va,{},Me),Gi=tt.get("text-variable-anchor");if(!Gi){var Oi=tt.get("text-radial-offset").evaluate(va,{},Me);Oi?bi=bm(Hi,[Oi*Us,Gd]):bi=tt.get("text-offset").evaluate(va,{},Me).map(function(Hf){return Hf*Us})}var yo=Rn?"center":tt.get("text-justify").evaluate(va,{},Me),Ao=tt.get("symbol-placement"),Yo=Ao==="point"?tt.get("text-max-width").evaluate(va,{},Me)*Us:0,Ko=function(){k.allowVerticalPlacement&&Cr(fi)&&(Ua.vertical=up(Ha,C,N,he,Wa,Yo,an,Hi,"left",so,bi,mu.vertical,!0,Ao,Oa,Da))};if(!Rn&&Gi){for(var Cs=yo==="auto"?Gi.map(function(Hf){return Yd(Hf)}):[yo],ls=!1,sl=0;sl<Cs.length;sl++){var ll=Cs[sl];if(!Ua.horizontal[ll])if(ls)Ua.horizontal[ll]=Ua.horizontal[0];else{var Ls=up(Ha,C,N,he,Wa,Yo,an,"center",ll,so,bi,mu.horizontal,!1,Ao,Oa,Da);Ls&&(Ua.horizontal[ll]=Ls,ls=Ls.positionedLines.length===1)}}Ko()}else{yo==="auto"&&(yo=Yd(Hi));var _l=up(Ha,C,N,he,Wa,Yo,an,Hi,yo,so,bi,mu.horizontal,!1,Ao,Oa,Da);_l&&(Ua.horizontal[yo]=_l),Ko(),Cr(fi)&&Rn&&Mn&&(Ua.vertical=up(Ha,C,N,he,Wa,Yo,an,Hi,yo,so,bi,mu.vertical,!1,Ao,Oa,Da))}}var wl=void 0,bs=!1;if(va.icon&&va.icon.name){var Tl=te[va.icon.name];Tl&&(wl=i2(he[va.icon.name],tt.get("icon-offset").evaluate(va,{},Me),tt.get("icon-anchor").evaluate(va,{},Me)),bs=Tl.sdf,k.sdfIcons===void 0?k.sdfIcons=Tl.sdf:k.sdfIcons!==Tl.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Tl.pixelRatio!==k.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(k.iconsNeedLinear=!0))}var yu=wm(Ua.horizontal)||Ua.vertical;k.iconsInText=yu?yu.iconsInText:!1,(yu||wl)&&g2(k,va,Ua,wl,te,yt,Oa,ci,bi,bs,Me)},qn=0,da=k.features;qn<da.length;qn+=1)Vn();we&&k.generateCollisionDebugBuffers()}function Yd(k){switch(k){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function g2(k,C,N,te,he,we,Me,Ne,tt,vt,yt){var Vt=we.textMaxSize.evaluate(C,{});Vt===void 0&&(Vt=Me);var or=k.layers[0].layout,nr=or.get("icon-offset").evaluate(C,{},yt),xr=wm(N.horizontal),Ur=24,hn=Me/Ur,an=k.tilePixelRatio*hn,Rn=k.tilePixelRatio*Vt/Ur,Mn=k.tilePixelRatio*Ne,Dn=k.tilePixelRatio*or.get("symbol-spacing"),Vn=or.get("text-padding")*k.tilePixelRatio,qn=or.get("icon-padding")*k.tilePixelRatio,da=or.get("text-max-angle")/180*Math.PI,va=or.get("text-rotation-alignment")==="map"&&or.get("symbol-placement")!=="point",Wa=or.get("icon-rotation-alignment")==="map"&&or.get("symbol-placement")!=="point",Da=or.get("symbol-placement"),Oa=Dn/2,ci=or.get("icon-text-fit"),Ua;te&&ci!=="none"&&(k.allowVerticalPlacement&&N.vertical&&(Ua=um(te,N.vertical,ci,or.get("icon-text-fit-padding"),nr,hn)),xr&&(te=um(te,xr,ci,or.get("icon-text-fit-padding"),nr,hn)));var Ha=function(Mh,qu){qu.x<0||qu.x>=Ja||qu.y<0||qu.y>=Ja||m2(k,qu,Mh,N,te,he,Ua,k.layers[0],k.collisionBoxArray,C.index,C.sourceLayerIndex,k.index,an,Vn,va,tt,Mn,qn,Wa,nr,C,we,vt,yt,Me)};if(Da==="line")for(var bi=0,fi=mm(C.geometry,0,0,Ja,Ja);bi<fi.length;bi+=1)for(var Vi=fi[bi],so=l2(Vi,Dn,da,N.vertical||xr,te,Ur,Rn,k.overscaling,Ja),Hi=0,Gi=so;Hi<Gi.length;Hi+=1){var Oi=Gi[Hi],yo=xr;(!yo||!y2(k,yo.text,Oa,Oi))&&Ha(Vi,Oi)}else if(Da==="line-center")for(var Ao=0,Yo=C.geometry;Ao<Yo.length;Ao+=1){var Ko=Yo[Ao];if(Ko.length>1){var Cs=s2(Ko,da,N.vertical||xr,te,Ur,Rn);Cs&&Ha(Ko,Cs)}}else if(C.type==="Polygon")for(var ls=0,sl=Rd(C.geometry,0);ls<sl.length;ls+=1){var ll=sl[ls],Ls=c2(ll,16);Ha(ll[0],new gh(Ls.x,Ls.y,0))}else if(C.type==="LineString")for(var _l=0,wl=C.geometry;_l<wl.length;_l+=1){var bs=wl[_l];Ha(bs,new gh(bs[0].x,bs[0].y,0))}else if(C.type==="Point")for(var Tl=0,yu=C.geometry;Tl<yu.length;Tl+=1)for(var Hf=yu[Tl],uc=0,fc=Hf;uc<fc.length;uc+=1){var cc=fc[uc];Ha([cc],new gh(cc.x,cc.y,0))}}var _v=255,sc=_v*pf;function _m(k,C,N,te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr){var Ur=u2(C,N,Ne,he,we,Me,te,k.allowVerticalPlacement),hn=k.textSizeData,an=null;hn.kind==="source"?(an=[pf*he.layout.get("text-size").evaluate(Me,{})],an[0]>sc&&O(k.layerIds[0]+': Value for "text-size" is >= '+_v+'. Reduce your "text-size".')):hn.kind==="composite"&&(an=[pf*nr.compositeTextSizes[0].evaluate(Me,{},xr),pf*nr.compositeTextSizes[1].evaluate(Me,{},xr)],(an[0]>sc||an[1]>sc)&&O(k.layerIds[0]+': Value for "text-size" is >= '+_v+'. Reduce your "text-size".')),k.addSymbols(k.text,Ur,an,Ne,we,Me,vt,C,tt.lineStartIndex,tt.lineLength,or,xr);for(var Rn=0,Mn=yt;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];Vt[Dn]=k.text.placedSymbolArray.length-1}return Ur.length*4}function wm(k){for(var C in k)return k[C];return null}function m2(k,C,N,te,he,we,Me,Ne,tt,vt,yt,Vt,or,nr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va){var Wa,Da=k.addToLineVertexArray(C,N),Oa,ci,Ua,Ha,bi=0,fi=0,Vi=0,so=0,Hi=-1,Gi=-1,Oi={},yo=Fe(""),Ao=0,Yo=0;if(Ne._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wa=Ne.layout.get("text-offset").evaluate(Dn,{},da).map(function(Av){return Av*Us}),Ao=Wa[0],Yo=Wa[1]):(Ao=Ne.layout.get("text-radial-offset").evaluate(Dn,{},da)*Us,Yo=Gd),k.allowVerticalPlacement&&te.vertical){var Ko=Ne.layout.get("text-rotate").evaluate(Dn,{},da),Cs=Ko+90,ls=te.vertical;Ua=new vp(tt,C,vt,yt,Vt,ls,or,nr,xr,Cs),Me&&(Ha=new vp(tt,C,vt,yt,Vt,Me,hn,an,xr,Cs))}if(he){var sl=Ne.layout.get("icon-rotate").evaluate(Dn,{}),ll=Ne.layout.get("icon-text-fit")!=="none",Ls=ym(he,sl,qn,ll),_l=Me?ym(Me,sl,qn,ll):void 0;ci=new vp(tt,C,vt,yt,Vt,he,hn,an,!1,sl),bi=Ls.length*4;var wl=k.iconSizeData,bs=null;wl.kind==="source"?(bs=[pf*Ne.layout.get("icon-size").evaluate(Dn,{})],bs[0]>sc&&O(k.layerIds[0]+': Value for "icon-size" is >= '+_v+'. Reduce your "icon-size".')):wl.kind==="composite"&&(bs=[pf*Vn.compositeIconSizes[0].evaluate(Dn,{},da),pf*Vn.compositeIconSizes[1].evaluate(Dn,{},da)],(bs[0]>sc||bs[1]>sc)&&O(k.layerIds[0]+': Value for "icon-size" is >= '+_v+'. Reduce your "icon-size".')),k.addSymbols(k.icon,Ls,bs,Mn,Rn,Dn,!1,C,Da.lineStartIndex,Da.lineLength,-1,da),Hi=k.icon.placedSymbolArray.length-1,_l&&(fi=_l.length*4,k.addSymbols(k.icon,_l,bs,Mn,Rn,Dn,mu.vertical,C,Da.lineStartIndex,Da.lineLength,-1,da),Gi=k.icon.placedSymbolArray.length-1)}for(var Tl in te.horizontal){var yu=te.horizontal[Tl];if(!Oa){yo=Fe(yu.text);var Hf=Ne.layout.get("text-rotate").evaluate(Dn,{},da);Oa=new vp(tt,C,vt,yt,Vt,yu,or,nr,xr,Hf)}var uc=yu.positionedLines.length===1;if(Vi+=_m(k,C,yu,we,Ne,xr,Dn,Ur,Da,te.vertical?mu.horizontal:mu.horizontalOnly,uc?Object.keys(te.horizontal):[Tl],Oi,Hi,Vn,da),uc)break}te.vertical&&(so+=_m(k,C,te.vertical,we,Ne,xr,Dn,Ur,Da,mu.vertical,["vertical"],Oi,Gi,Vn,da));var fc=Oa?Oa.boxStartIndex:k.collisionBoxArray.length,cc=Oa?Oa.boxEndIndex:k.collisionBoxArray.length,Mh=Ua?Ua.boxStartIndex:k.collisionBoxArray.length,qu=Ua?Ua.boxEndIndex:k.collisionBoxArray.length,yp=ci?ci.boxStartIndex:k.collisionBoxArray.length,Jd=ci?ci.boxEndIndex:k.collisionBoxArray.length,xp=Ha?Ha.boxStartIndex:k.collisionBoxArray.length,$d=Ha?Ha.boxEndIndex:k.collisionBoxArray.length,Ou=-1,Eh=function(Av,Nm){return Av&&Av.circleDiameter?Math.max(Av.circleDiameter,Nm):Nm};Ou=Eh(Oa,Ou),Ou=Eh(Ua,Ou),Ou=Eh(ci,Ou),Ou=Eh(Ha,Ou);var bp=Ou>-1?1:0;bp&&(Ou*=va/Us),k.glyphOffsetArray.length>=oo.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dn.sortKey!==void 0&&k.addToSortKeyRanges(k.symbolInstances.length,Dn.sortKey),k.symbolInstances.emplaceBack(C.x,C.y,Oi.right>=0?Oi.right:-1,Oi.center>=0?Oi.center:-1,Oi.left>=0?Oi.left:-1,Oi.vertical||-1,Hi,Gi,yo,fc,cc,Mh,qu,yp,Jd,xp,$d,vt,Vi,so,bi,fi,bp,0,or,Ao,Yo,Ou)}function y2(k,C,N,te){var he=k.compareText;if(!(C in he))he[C]=[];else for(var we=he[C],Me=we.length-1;Me>=0;Me--)if(te.dist(we[Me])<N)return!0;return he[C].push(te),!1}var x2=hh.VectorTileFeature.types,b2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pp(k,C,N,te,he,we,Me,Ne,tt,vt,yt,Vt,or){var nr=Ne?Math.min(sc,Math.round(Ne[0])):0,xr=Ne?Math.min(sc,Math.round(Ne[1])):0;k.emplaceBack(C,N,Math.round(te*32),Math.round(he*32),we,Me,(nr<<1)+(tt?1:0),xr,vt*16,yt*16,Vt*256,or*256)}function Wd(k,C,N){k.emplaceBack(C.x,C.y,N),k.emplaceBack(C.x,C.y,N),k.emplaceBack(C.x,C.y,N),k.emplaceBack(C.x,C.y,N)}function _2(k){for(var C=0,N=k.sections;C<N.length;C+=1){var te=N[C];if(ha(te.text))return!0}return!1}var _h=function(C){this.layoutVertexArray=new Af,this.indexArray=new ff,this.programConfigurations=C,this.segments=new W,this.dynamicLayoutVertexArray=new nv,this.opacityVertexArray=new av,this.placedSymbolArray=new nc};_h.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},_h.prototype.upload=function(C,N,te,he){this.isEmpty()||(te&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Od.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,w_.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,b2,!0),this.opacityVertexBuffer.itemSize=1),(te||he)&&this.programConfigurations.upload(C))},_h.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",_h);var wv=function(C,N,te){this.layoutVertexArray=new C,this.layoutAttributes=N,this.indexArray=new te,this.segments=new W,this.collisionVertexArray=new Fl};wv.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,T_.members,!0)},wv.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",wv);var oo=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=sh([]),this.placementViewportMatrix=sh([]);var N=this.layers[0],te=N._unevaluatedLayout._values;this.textSizeData=Hd(this.zoom,te["text-size"]),this.iconSizeData=Hd(this.zoom,te["icon-size"]);var he=this.layers[0].layout,we=he.get("symbol-sort-key"),Me=he.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&we.constantOr(1)!==void 0;var Ne=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ne&&(he.get("text-allow-overlap")||he.get("icon-allow-overlap")||he.get("text-ignore-placement")||he.get("icon-ignore-placement")),he.get("symbol-placement")==="point"&&(this.writingModes=he.get("text-writing-mode").map(function(tt){return mu[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=C.sourceID};oo.prototype.createArrays=function(){this.text=new _h(new pi(Od.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new _h(new pi(Od.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Fu,this.lineVertexArray=new Jv,this.symbolInstances=new Kv},oo.prototype.calculateGlyphDependencies=function(C,N,te,he,we){for(var Me=0;Me<C.length;Me++)if(N[C.charCodeAt(Me)]=!0,(te||he)&&we){var Ne=mv[C.charAt(Me)];Ne&&(N[Ne.charCodeAt(0)]=!0)}},oo.prototype.populate=function(C,N,te){var he=this.layers[0],we=he.layout,Me=we.get("text-font"),Ne=we.get("text-field"),tt=we.get("icon-image"),vt=(Ne.value.kind!=="constant"||Ne.value.value instanceof ji&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),yt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,Vt=we.get("symbol-sort-key");if(this.features=[],!(!vt&&!yt)){for(var or=N.iconDependencies,nr=N.glyphDependencies,xr=N.availableImages,Ur=new yi(this.zoom),hn=0,an=C;hn<an.length;hn+=1){var Rn=an[hn],Mn=Rn.feature,Dn=Rn.id,Vn=Rn.index,qn=Rn.sourceLayerIndex,da=he._featureFilter.needGeometry,va={type:Mn.type,id:Dn,properties:Mn.properties,geometry:da?to(Mn):[]};if(!!he._featureFilter.filter(Ur,va,te)){da||(va.geometry=to(Mn));var Wa=void 0;if(vt){var Da=he.getValueAndResolveTokens("text-field",va,te,xr),Oa=ji.factory(Da);_2(Oa)&&(this.hasRTLText=!0),(!this.hasRTLText||Do()==="unavailable"||this.hasRTLText&&ii.isParsed())&&(Wa=E_(Oa,he,va))}var ci=void 0;if(yt){var Ua=he.getValueAndResolveTokens("icon-image",va,te,xr);Ua instanceof Io?ci=Ua:ci=Io.fromString(Ua)}if(!(!Wa&&!ci)){var Ha=this.sortFeaturesByKey?Vt.evaluate(va,{},te):void 0,bi={id:Dn,text:Wa,icon:ci,index:Vn,sourceLayerIndex:qn,geometry:to(Mn),properties:Mn.properties,type:x2[Mn.type],sortKey:Ha};if(this.features.push(bi),ci&&(or[ci.name]=!0),Wa){var fi=Me.evaluate(va,{},te).join(","),Vi=we.get("text-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mu.vertical)>=0;for(var so=0,Hi=Wa.sections;so<Hi.length;so+=1){var Gi=Hi[so];if(Gi.image)or[Gi.image.name]=!0;else{var Oi=Cr(Wa.toString()),yo=Gi.fontStack||fi,Ao=nr[yo]=nr[yo]||{};this.calculateGlyphDependencies(Gi.text,Ao,Vi,this.allowVerticalPlacement,Oi)}}}}}}we.get("symbol-placement")==="line"&&(this.features=S_(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yo,Ko){return Yo.sortKey-Ko.sortKey})}},oo.prototype.update=function(C,N,te){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,N,this.layers,te),this.icon.programConfigurations.updatePaintArrays(C,N,this.layers,te))},oo.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},oo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},oo.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},oo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},oo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},oo.prototype.addToLineVertexArray=function(C,N){var te=this.lineVertexArray.length;if(C.segment!==void 0){for(var he=C.dist(N[C.segment+1]),we=C.dist(N[C.segment]),Me={},Ne=C.segment+1;Ne<N.length;Ne++)Me[Ne]={x:N[Ne].x,y:N[Ne].y,tileUnitDistanceFromAnchor:he},Ne<N.length-1&&(he+=N[Ne+1].dist(N[Ne]));for(var tt=C.segment||0;tt>=0;tt--)Me[tt]={x:N[tt].x,y:N[tt].y,tileUnitDistanceFromAnchor:we},tt>0&&(we+=N[tt-1].dist(N[tt]));for(var vt=0;vt<N.length;vt++){var yt=Me[vt];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:te,lineLength:this.lineVertexArray.length-te}},oo.prototype.addSymbols=function(C,N,te,he,we,Me,Ne,tt,vt,yt,Vt,or){for(var nr=C.indexArray,xr=C.layoutVertexArray,Ur=C.segments.prepareSegment(4*N.length,xr,nr,Me.sortKey),hn=this.glyphOffsetArray.length,an=Ur.vertexLength,Rn=this.allowVerticalPlacement&&Ne===mu.vertical?Math.PI/2:0,Mn=Me.text&&Me.text.sections,Dn=0;Dn<N.length;Dn++){var Vn=N[Dn],qn=Vn.tl,da=Vn.tr,va=Vn.bl,Wa=Vn.br,Da=Vn.tex,Oa=Vn.pixelOffsetTL,ci=Vn.pixelOffsetBR,Ua=Vn.minFontScaleX,Ha=Vn.minFontScaleY,bi=Vn.glyphOffset,fi=Vn.isSDF,Vi=Vn.sectionIndex,so=Ur.vertexLength,Hi=bi[1];pp(xr,tt.x,tt.y,qn.x,Hi+qn.y,Da.x,Da.y,te,fi,Oa.x,Oa.y,Ua,Ha),pp(xr,tt.x,tt.y,da.x,Hi+da.y,Da.x+Da.w,Da.y,te,fi,ci.x,Oa.y,Ua,Ha),pp(xr,tt.x,tt.y,va.x,Hi+va.y,Da.x,Da.y+Da.h,te,fi,Oa.x,ci.y,Ua,Ha),pp(xr,tt.x,tt.y,Wa.x,Hi+Wa.y,Da.x+Da.w,Da.y+Da.h,te,fi,ci.x,ci.y,Ua,Ha),Wd(C.dynamicLayoutVertexArray,tt,Rn),nr.emplaceBack(so,so+1,so+2),nr.emplaceBack(so+1,so+2,so+3),Ur.vertexLength+=4,Ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bi[0]),(Dn===N.length-1||Vi!==N[Dn+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(xr.length,Me,Me.index,{},or,Mn&&Mn[Vi])}C.placedSymbolArray.emplaceBack(tt.x,tt.y,hn,this.glyphOffsetArray.length-hn,an,vt,yt,tt.segment,te?te[0]:0,te?te[1]:0,he[0],he[1],Ne,0,!1,0,Vt)},oo.prototype._addCollisionDebugVertex=function(C,N,te,he,we,Me){return N.emplaceBack(0,0),C.emplaceBack(te.x,te.y,he,we,Math.round(Me.x),Math.round(Me.y))},oo.prototype.addCollisionDebugVertices=function(C,N,te,he,we,Me,Ne){var tt=we.segments.prepareSegment(4,we.layoutVertexArray,we.indexArray),vt=tt.vertexLength,yt=we.layoutVertexArray,Vt=we.collisionVertexArray,or=Ne.anchorX,nr=Ne.anchorY;this._addCollisionDebugVertex(yt,Vt,Me,or,nr,new v(C,N)),this._addCollisionDebugVertex(yt,Vt,Me,or,nr,new v(te,N)),this._addCollisionDebugVertex(yt,Vt,Me,or,nr,new v(te,he)),this._addCollisionDebugVertex(yt,Vt,Me,or,nr,new v(C,he)),tt.vertexLength+=4;var xr=we.indexArray;xr.emplaceBack(vt,vt+1),xr.emplaceBack(vt+1,vt+2),xr.emplaceBack(vt+2,vt+3),xr.emplaceBack(vt+3,vt),tt.primitiveLength+=4},oo.prototype.addDebugCollisionBoxes=function(C,N,te,he){for(var we=C;we<N;we++){var Me=this.collisionBoxArray.get(we),Ne=Me.x1,tt=Me.y1,vt=Me.x2,yt=Me.y2;this.addCollisionDebugVertices(Ne,tt,vt,yt,he?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,te)}},oo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wv(rh,Jg.members,Lc),this.iconCollisionBox=new wv(rh,Jg.members,Lc);for(var C=0;C<this.symbolInstances.length;C++){var N=this.symbolInstances.get(C);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},oo.prototype._deserializeCollisionBoxesForSymbol=function(C,N,te,he,we,Me,Ne,tt,vt){for(var yt={},Vt=N;Vt<te;Vt++){var or=C.get(Vt);yt.textBox={x1:or.x1,y1:or.y1,x2:or.x2,y2:or.y2,anchorPointX:or.anchorPointX,anchorPointY:or.anchorPointY},yt.textFeatureIndex=or.featureIndex;break}for(var nr=he;nr<we;nr++){var xr=C.get(nr);yt.verticalTextBox={x1:xr.x1,y1:xr.y1,x2:xr.x2,y2:xr.y2,anchorPointX:xr.anchorPointX,anchorPointY:xr.anchorPointY},yt.verticalTextFeatureIndex=xr.featureIndex;break}for(var Ur=Me;Ur<Ne;Ur++){var hn=C.get(Ur);yt.iconBox={x1:hn.x1,y1:hn.y1,x2:hn.x2,y2:hn.y2,anchorPointX:hn.anchorPointX,anchorPointY:hn.anchorPointY},yt.iconFeatureIndex=hn.featureIndex;break}for(var an=tt;an<vt;an++){var Rn=C.get(an);yt.verticalIconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},yt.verticalIconFeatureIndex=Rn.featureIndex;break}return yt},oo.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var te=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,te.textBoxStartIndex,te.textBoxEndIndex,te.verticalTextBoxStartIndex,te.verticalTextBoxEndIndex,te.iconBoxStartIndex,te.iconBoxEndIndex,te.verticalIconBoxStartIndex,te.verticalIconBoxEndIndex))}},oo.prototype.hasTextData=function(){return this.text.segments.get().length>0},oo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},oo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},oo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},oo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},oo.prototype.addIndicesForPlacedSymbol=function(C,N){for(var te=C.placedSymbolArray.get(N),he=te.vertexStartIndex+te.numGlyphs*4,we=te.vertexStartIndex;we<he;we+=4)C.indexArray.emplaceBack(we,we+1,we+2),C.indexArray.emplaceBack(we+1,we+2,we+3)},oo.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var N=Math.sin(C),te=Math.cos(C),he=[],we=[],Me=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Me.push(Ne);var tt=this.symbolInstances.get(Ne);he.push(Math.round(N*tt.anchorX+te*tt.anchorY)|0),we.push(tt.featureIndex)}return Me.sort(function(vt,yt){return he[vt]-he[yt]||we[yt]-we[vt]}),Me},oo.prototype.addToSortKeyRanges=function(C,N){var te=this.sortKeyRanges[this.sortKeyRanges.length-1];te&&te.sortKey===N?te.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:C,symbolInstanceEnd:C+1})},oo.prototype.sortFeatures=function(C){var N=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var te=0,he=this.symbolInstanceIndexes;te<he.length;te+=1){var we=he[te],Me=this.symbolInstances.get(we);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Ne,tt,vt){Ne>=0&&vt.indexOf(Ne)===tt&&N.addIndicesForPlacedSymbol(N.text,Ne)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",oo,{omit:["layers","collisionBoxArray","features","compareText"]}),oo.MAX_GLYPHS=65535,oo.addDynamicAttributes=Wd;function w2(k,C){return C.replace(/{([^{}]+)}/g,function(N,te){return te in k?String(k[te]):""})}var T2=new fo({"symbol-placement":new Za(Yt.layout_symbol["symbol-placement"]),"symbol-spacing":new Za(Yt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Za(Yt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new oi(Yt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Za(Yt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Za(Yt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Za(Yt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Za(Yt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Za(Yt.layout_symbol["icon-rotation-alignment"]),"icon-size":new oi(Yt.layout_symbol["icon-size"]),"icon-text-fit":new Za(Yt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Za(Yt.layout_symbol["icon-text-fit-padding"]),"icon-image":new oi(Yt.layout_symbol["icon-image"]),"icon-rotate":new oi(Yt.layout_symbol["icon-rotate"]),"icon-padding":new Za(Yt.layout_symbol["icon-padding"]),"icon-keep-upright":new Za(Yt.layout_symbol["icon-keep-upright"]),"icon-offset":new oi(Yt.layout_symbol["icon-offset"]),"icon-anchor":new oi(Yt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Za(Yt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Za(Yt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Za(Yt.layout_symbol["text-rotation-alignment"]),"text-field":new oi(Yt.layout_symbol["text-field"]),"text-font":new oi(Yt.layout_symbol["text-font"]),"text-size":new oi(Yt.layout_symbol["text-size"]),"text-max-width":new oi(Yt.layout_symbol["text-max-width"]),"text-line-height":new Za(Yt.layout_symbol["text-line-height"]),"text-letter-spacing":new oi(Yt.layout_symbol["text-letter-spacing"]),"text-justify":new oi(Yt.layout_symbol["text-justify"]),"text-radial-offset":new oi(Yt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Za(Yt.layout_symbol["text-variable-anchor"]),"text-anchor":new oi(Yt.layout_symbol["text-anchor"]),"text-max-angle":new Za(Yt.layout_symbol["text-max-angle"]),"text-writing-mode":new Za(Yt.layout_symbol["text-writing-mode"]),"text-rotate":new oi(Yt.layout_symbol["text-rotate"]),"text-padding":new Za(Yt.layout_symbol["text-padding"]),"text-keep-upright":new Za(Yt.layout_symbol["text-keep-upright"]),"text-transform":new oi(Yt.layout_symbol["text-transform"]),"text-offset":new oi(Yt.layout_symbol["text-offset"]),"text-allow-overlap":new Za(Yt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Za(Yt.layout_symbol["text-ignore-placement"]),"text-optional":new Za(Yt.layout_symbol["text-optional"])}),A2=new fo({"icon-opacity":new oi(Yt.paint_symbol["icon-opacity"]),"icon-color":new oi(Yt.paint_symbol["icon-color"]),"icon-halo-color":new oi(Yt.paint_symbol["icon-halo-color"]),"icon-halo-width":new oi(Yt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new oi(Yt.paint_symbol["icon-halo-blur"]),"icon-translate":new Za(Yt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Za(Yt.paint_symbol["icon-translate-anchor"]),"text-opacity":new oi(Yt.paint_symbol["text-opacity"]),"text-color":new oi(Yt.paint_symbol["text-color"],{runtimeType:Yn,getOverride:function(k){return k.textColor},hasOverride:function(k){return!!k.textColor}}),"text-halo-color":new oi(Yt.paint_symbol["text-halo-color"]),"text-halo-width":new oi(Yt.paint_symbol["text-halo-width"]),"text-halo-blur":new oi(Yt.paint_symbol["text-halo-blur"]),"text-translate":new Za(Yt.paint_symbol["text-translate"]),"text-translate-anchor":new Za(Yt.paint_symbol["text-translate-anchor"])}),Xd={paint:A2,layout:T2},wh=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:_r,this.defaultValue=C};wh.prototype.evaluate=function(C){if(C.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(C.formattedSection))return N.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},wh.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var N=this.defaultValue.value;C(N._styleExpression.expression)}},wh.prototype.outputDefined=function(){return!1},wh.prototype.serialize=function(){return null},Be("FormatSectionOverride",wh,{omit:["defaultValue"]});var M2=function(k){function C(N){k.call(this,N,Xd)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,he){if(k.prototype.recalculate.call(this,te,he),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var we=this.layout.get("text-writing-mode");if(we){for(var Me=[],Ne=0,tt=we;Ne<tt.length;Ne+=1){var vt=tt[Ne];Me.indexOf(vt)<0&&Me.push(vt)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(te,he,we,Me){var Ne=this.layout.get(te).evaluate(he,{},we,Me),tt=this._unevaluatedLayout._values[te];return!tt.isDataDriven()&&!Po(tt.value)&&Ne?w2(he.properties,Ne):Ne},C.prototype.createBucket=function(te){return new oo(te)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var te=0,he=Xd.paint.overridableProperties;te<he.length;te+=1){var we=he[te];if(!!C.hasPaintOverride(this.layout,we)){var Me=this.paint.get(we),Ne=new wh(Me),tt=new zo(Ne,Me.property.specification),vt=null;Me.value.kind==="constant"||Me.value.kind==="source"?vt=new cu("source",tt):vt=new gs("composite",tt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[we]=new io(Me.property,vt,Me.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(te,he,we){return!this.layout||he.isDataDriven()||we.isDataDriven()?!1:C.hasPaintOverride(this.layout,te)},C.hasPaintOverride=function(te,he){var we=te.get("text-field"),Me=Xd.paint.properties[he],Ne=!1,tt=function(Vt){for(var or=0,nr=Vt;or<nr.length;or+=1){var xr=nr[or];if(Me.overrides&&Me.overrides.hasOverride(xr)){Ne=!0;return}}};if(we.value.kind==="constant"&&we.value.value instanceof ji)tt(we.value.value.sections);else if(we.value.kind==="source"){var vt=function(Vt){if(!Ne)if(Vt instanceof lo&&Ii(Vt.value)===Ma){var or=Vt.value;tt(or.sections)}else Vt instanceof us?tt(Vt.sections):Vt.eachChild(vt)},yt=we.value;yt._styleExpression&&vt(yt._styleExpression.expression)}return Ne},C}(js),E2=new fo({"background-color":new Za(Yt.paint_background["background-color"]),"background-pattern":new wo(Yt.paint_background["background-pattern"]),"background-opacity":new Za(Yt.paint_background["background-opacity"])}),S2={paint:E2},k2=function(k){function C(N){k.call(this,N,S2)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(js),C2=new fo({"raster-opacity":new Za(Yt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Za(Yt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Za(Yt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Za(Yt.paint_raster["raster-brightness-max"]),"raster-saturation":new Za(Yt.paint_raster["raster-saturation"]),"raster-contrast":new Za(Yt.paint_raster["raster-contrast"]),"raster-resampling":new Za(Yt.paint_raster["raster-resampling"]),"raster-fade-duration":new Za(Yt.paint_raster["raster-fade-duration"])}),L2={paint:C2},P2=function(k){function C(N){k.call(this,N,L2)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(js);function D2(k){var C=[],N=k.id;return N===void 0&&C.push({message:"layers."+N+': missing required property "id"'}),k.render===void 0&&C.push({message:"layers."+N+': missing required method "render"'}),k.renderingMode&&k.renderingMode!=="2d"&&k.renderingMode!=="3d"&&C.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),C}var R2=function(k){function C(N){k.call(this,N,{}),this.implementation=N}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(te){this.implementation.onAdd&&this.implementation.onAdd(te,te.painter.context.gl)},C.prototype.onRemove=function(te){this.implementation.onRemove&&this.implementation.onRemove(te,te.painter.context.gl)},C}(js),I2={circle:ub,heatmap:vb,hillshade:gb,fill:Vb,"fill-extrusion":s_,line:b_,symbol:M2,background:k2,raster:P2};function F2(k){return k.type==="custom"?new R2(k):new I2[k.type](k)}var Tm=self.HTMLImageElement,Am=self.HTMLCanvasElement,Mm=self.HTMLVideoElement,Em=self.ImageData,dp=self.ImageBitmap,Fc=function(C,N,te,he){this.context=C,this.format=te,this.texture=C.gl.createTexture(),this.update(N,he)};Fc.prototype.update=function(C,N,te){var he=C.width,we=C.height,Me=(!this.size||this.size[0]!==he||this.size[1]!==we)&&!te,Ne=this,tt=Ne.context,vt=tt.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),vt.bindTexture(vt.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===vt.RGBA&&(!N||N.premultiply!==!1)),Me)this.size=[he,we],C instanceof Tm||C instanceof Am||C instanceof Mm||C instanceof Em||dp&&C instanceof dp?vt.texImage2D(vt.TEXTURE_2D,0,this.format,this.format,vt.UNSIGNED_BYTE,C):vt.texImage2D(vt.TEXTURE_2D,0,this.format,he,we,0,this.format,vt.UNSIGNED_BYTE,C.data);else{var yt=te||{x:0,y:0},Vt=yt.x,or=yt.y;C instanceof Tm||C instanceof Am||C instanceof Mm||C instanceof Em||dp&&C instanceof dp?vt.texSubImage2D(vt.TEXTURE_2D,0,Vt,or,vt.RGBA,vt.UNSIGNED_BYTE,C):vt.texSubImage2D(vt.TEXTURE_2D,0,Vt,or,he,we,vt.RGBA,vt.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&vt.generateMipmap(vt.TEXTURE_2D)},Fc.prototype.bind=function(C,N,te){var he=this,we=he.context,Me=we.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),te===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(te=Me.LINEAR),C!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,C),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,te||C),this.filter=C),N!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,N),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,N),this.wrap=N)},Fc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Fc.prototype.destroy=function(){var C=this.context,N=C.gl;N.deleteTexture(this.texture),this.texture=null};var jd=function(C){var N=this;this._callback=C,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};jd.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},jd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Th=function(C,N,te){this.target=C,this.parent=N,this.mapId=te,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},E(["receive","process"],this),this.invoker=new jd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?C:self};Th.prototype.send=function(C,N,te,he,we){var Me=this;we===void 0&&(we=!1);var Ne=Math.round(Math.random()*1e18).toString(36).substring(0,10);te&&(this.callbacks[Ne]=te);var tt=ae(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:C,hasCallback:!!te,targetMapId:he,mustQueue:we,sourceMapId:this.mapId,data:Ft(N,tt)},tt),{cancel:function(){te&&delete Me.callbacks[Ne],Me.target.postMessage({id:Ne,type:"<cancel>",targetMapId:he,sourceMapId:Me.mapId})}}},Th.prototype.receive=function(C){var N=C.data,te=N.id;if(!!te&&!(N.targetMapId&&this.mapId!==N.targetMapId))if(N.type==="<cancel>"){delete this.tasks[te];var he=this.cancelCallbacks[te];delete this.cancelCallbacks[te],he&&he()}else ee()||N.mustQueue?(this.tasks[te]=N,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,N)},Th.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),N=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(C,N)}},Th.prototype.processTask=function(C,N){var te=this;if(N.type==="<response>"){var he=this.callbacks[C];delete this.callbacks[C],he&&(N.error?he(qt(N.error)):he(null,qt(N.data)))}else{var we=!1,Me=ae(this.globalScope)?void 0:[],Ne=N.hasCallback?function(or,nr){we=!0,delete te.cancelCallbacks[C],te.target.postMessage({id:C,type:"<response>",sourceMapId:te.mapId,error:or?Ft(or):null,data:Ft(nr,Me)},Me)}:function(or){we=!0},tt=null,vt=qt(N.data);if(this.parent[N.type])tt=this.parent[N.type](N.sourceMapId,vt,Ne);else if(this.parent.getWorkerSource){var yt=N.type.split("."),Vt=this.parent.getWorkerSource(N.sourceMapId,yt[0],vt.source);tt=Vt[yt[1]](vt,Ne)}else Ne(new Error("Could not find function "+N.type));!we&&tt&&tt.cancel&&(this.cancelCallbacks[C]=tt.cancel)}},Th.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function z2(k,C,N){C=Math.pow(2,N)-C-1;var te=Sm(k*256,C*256,N),he=Sm((k+1)*256,(C+1)*256,N);return te[0]+","+te[1]+","+he[0]+","+he[1]}function Sm(k,C,N){var te=2*Math.PI*6378137/256/Math.pow(2,N),he=k*te-2*Math.PI*6378137/2,we=C*te-2*Math.PI*6378137/2;return[he,we]}var os=function(C,N){C&&(N?this.setSouthWest(C).setNorthEast(N):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};os.prototype.setNorthEast=function(C){return this._ne=C instanceof Ro?new Ro(C.lng,C.lat):Ro.convert(C),this},os.prototype.setSouthWest=function(C){return this._sw=C instanceof Ro?new Ro(C.lng,C.lat):Ro.convert(C),this},os.prototype.extend=function(C){var N=this._sw,te=this._ne,he,we;if(C instanceof Ro)he=C,we=C;else if(C instanceof os){if(he=C._sw,we=C._ne,!he||!we)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var Me=C;return this.extend(os.convert(Me))}else{var Ne=C;return this.extend(Ro.convert(Ne))}return this}return!N&&!te?(this._sw=new Ro(he.lng,he.lat),this._ne=new Ro(we.lng,we.lat)):(N.lng=Math.min(he.lng,N.lng),N.lat=Math.min(he.lat,N.lat),te.lng=Math.max(we.lng,te.lng),te.lat=Math.max(we.lat,te.lat)),this},os.prototype.getCenter=function(){return new Ro((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},os.prototype.getSouthWest=function(){return this._sw},os.prototype.getNorthEast=function(){return this._ne},os.prototype.getNorthWest=function(){return new Ro(this.getWest(),this.getNorth())},os.prototype.getSouthEast=function(){return new Ro(this.getEast(),this.getSouth())},os.prototype.getWest=function(){return this._sw.lng},os.prototype.getSouth=function(){return this._sw.lat},os.prototype.getEast=function(){return this._ne.lng},os.prototype.getNorth=function(){return this._ne.lat},os.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},os.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},os.prototype.isEmpty=function(){return!(this._sw&&this._ne)},os.prototype.contains=function(C){var N=Ro.convert(C),te=N.lng,he=N.lat,we=this._sw.lat<=he&&he<=this._ne.lat,Me=this._sw.lng<=te&&te<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=te&&te>=this._ne.lng),we&&Me},os.convert=function(C){return!C||C instanceof os?C:new os(C)};var km=63710088e-1,Ro=function(C,N){if(isNaN(C)||isNaN(N))throw new Error("Invalid LngLat object: ("+C+", "+N+")");if(this.lng=+C,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ro.prototype.wrap=function(){return new Ro(m(this.lng,-180,180),this.lat)},Ro.prototype.toArray=function(){return[this.lng,this.lat]},Ro.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ro.prototype.distanceTo=function(C){var N=Math.PI/180,te=this.lat*N,he=C.lat*N,we=Math.sin(te)*Math.sin(he)+Math.cos(te)*Math.cos(he)*Math.cos((C.lng-this.lng)*N),Me=km*Math.acos(Math.min(we,1));return Me},Ro.prototype.toBounds=function(C){C===void 0&&(C=0);var N=40075017,te=360*C/N,he=te/Math.cos(Math.PI/180*this.lat);return new os(new Ro(this.lng-he,this.lat-te),new Ro(this.lng+he,this.lat+te))},Ro.convert=function(C){if(C instanceof Ro)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new Ro(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new Ro(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Cm=2*Math.PI*km;function Lm(k){return Cm*Math.cos(k*Math.PI/180)}function Pm(k){return(180+k)/360}function Dm(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Rm(k,C){return k/Lm(C)}function O2(k){return k*360-180}function Zd(k){var C=180-k*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function N2(k,C){return k*Lm(Zd(C))}function B2(k){return 1/Math.cos(k*Math.PI/180)}var zc=function(C,N,te){te===void 0&&(te=0),this.x=+C,this.y=+N,this.z=+te};zc.fromLngLat=function(C,N){N===void 0&&(N=0);var te=Ro.convert(C);return new zc(Pm(te.lng),Dm(te.lat),Rm(N,te.lat))},zc.prototype.toLngLat=function(){return new Ro(O2(this.x),Zd(this.y))},zc.prototype.toAltitude=function(){return N2(this.z,this.y)},zc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Cm*B2(Zd(this.y))};var Oc=function(C,N,te){this.z=C,this.x=N,this.y=te,this.key=Tv(0,C,C,N,te)};Oc.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Oc.prototype.url=function(C,N){var te=z2(this.x,this.y,this.z),he=U2(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(N==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",te)},Oc.prototype.getTilePoint=function(C){var N=Math.pow(2,this.z);return new v((C.x*N-this.x)*Ja,(C.y*N-this.y)*Ja)},Oc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Im=function(C,N){this.wrap=C,this.canonical=N,this.key=Tv(C,N.z,N.z,N.x,N.y)},ss=function(C,N,te,he,we){this.overscaledZ=C,this.wrap=N,this.canonical=new Oc(te,+he,+we),this.key=Tv(N,C,te,he,we)};ss.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},ss.prototype.scaledTo=function(C){var N=this.canonical.z-C;return C>this.canonical.z?new ss(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ss(C,this.wrap,C,this.canonical.x>>N,this.canonical.y>>N)},ss.prototype.calculateScaledKey=function(C,N){var te=this.canonical.z-C;return C>this.canonical.z?Tv(this.wrap*+N,C,this.canonical.z,this.canonical.x,this.canonical.y):Tv(this.wrap*+N,C,C,this.canonical.x>>te,this.canonical.y>>te)},ss.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var N=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>N&&C.canonical.y===this.canonical.y>>N},ss.prototype.children=function(C){if(this.overscaledZ>=C)return[new ss(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,te=this.canonical.x*2,he=this.canonical.y*2;return[new ss(N,this.wrap,N,te,he),new ss(N,this.wrap,N,te+1,he),new ss(N,this.wrap,N,te,he+1),new ss(N,this.wrap,N,te+1,he+1)]},ss.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},ss.prototype.wrapped=function(){return new ss(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ss.prototype.unwrapTo=function(C){return new ss(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},ss.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ss.prototype.toUnwrapped=function(){return new Im(this.wrap,this.canonical)},ss.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ss.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new zc(C.x-this.wrap,C.y))};function Tv(k,C,N,te,he){k*=2,k<0&&(k=k*-1-1);var we=1<<N;return(we*we*k+we*he+te).toString(36)+N.toString(36)+C.toString(36)}function U2(k,C,N){for(var te="",he,we=k;we>0;we--)he=1<<we-1,te+=(C&he?1:0)+(N&he?2:0);return te}Be("CanonicalTileID",Oc),Be("OverscaledTileID",ss,{omit:["posMatrix"]});var Uf=function(C,N,te){if(this.uid=C,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(te&&te!=="mapbox"&&te!=="terrarium")return O('"'+te+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var he=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=te||"mapbox";for(var we=0;we<he;we++)this.data[this._idx(-1,we)]=this.data[this._idx(0,we)],this.data[this._idx(he,we)]=this.data[this._idx(he-1,we)],this.data[this._idx(we,-1)]=this.data[this._idx(we,0)],this.data[this._idx(we,he)]=this.data[this._idx(we,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};Uf.prototype.get=function(C,N){var te=new Uint8Array(this.data.buffer),he=this._idx(C,N)*4,we=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return we(te[he],te[he+1],te[he+2])},Uf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Uf.prototype._idx=function(C,N){if(C<-1||C>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(C+1)},Uf.prototype._unpackMapbox=function(C,N,te){return(C*256*256+N*256+te)/10-1e4},Uf.prototype._unpackTerrarium=function(C,N,te){return C*256+N+te/256-32768},Uf.prototype.getPixels=function(){return new Nl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Uf.prototype.backfillBorder=function(C,N,te){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var he=N*this.dim,we=N*this.dim+this.dim,Me=te*this.dim,Ne=te*this.dim+this.dim;switch(N){case-1:he=we-1;break;case 1:we=he+1;break}switch(te){case-1:Me=Ne-1;break;case 1:Ne=Me+1;break}for(var tt=-N*this.dim,vt=-te*this.dim,yt=Me;yt<Ne;yt++)for(var Vt=he;Vt<we;Vt++)this.data[this._idx(Vt,yt)]=C.data[this._idx(Vt+tt,yt+vt)]},Be("DEMData",Uf);function V2(k,C){var N={};if(!C)return N;for(var te=function(){var Me=we[he],Ne=Me.layerIds.map(function(Vt){return C.getLayer(Vt)}).filter(Boolean);if(Ne.length!==0){Me.layers=Ne,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Vt){return Ne.filter(function(or){return or.id===Vt})[0]}));for(var tt=0,vt=Ne;tt<vt.length;tt+=1){var yt=vt[tt];N[yt.id]=Me}}},he=0,we=k;he<we.length;he+=1)te();return N}var gp=function(C){this._stringToNumber={},this._numberToString=[];for(var N=0;N<C.length;N++){var te=C[N];this._stringToNumber[te]=N,this._numberToString[N]=te}};gp.prototype.encode=function(C){return this._stringToNumber[C]},gp.prototype.decode=function(C){return this._numberToString[C]};var mp=function(C,N,te,he,we){this.type="Feature",this._vectorTileFeature=C,C._z=N,C._x=te,C._y=he,this.properties=C.properties,this.id=we},Kd={geometry:{configurable:!0}};Kd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Kd.geometry.set=function(k){this._geometry=k},mp.prototype.toJSON=function(){var C={geometry:this.geometry};for(var N in this)N==="_geometry"||N==="_vectorTileFeature"||(C[N]=this[N]);return C},Object.defineProperties(mp.prototype,Kd);var Ah=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ah.prototype.updateState=function(C,N,te){var he=String(N);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][he]=this.stateChanges[C][he]||{},A(this.stateChanges[C][he],te),this.deletedStates[C]===null){this.deletedStates[C]={};for(var we in this.state[C])we!==he&&(this.deletedStates[C][we]=null)}else{var Me=this.deletedStates[C]&&this.deletedStates[C][he]===null;if(Me){this.deletedStates[C][he]={};for(var Ne in this.state[C][he])te[Ne]||(this.deletedStates[C][he][Ne]=null)}else for(var tt in te){var vt=this.deletedStates[C]&&this.deletedStates[C][he]&&this.deletedStates[C][he][tt]===null;vt&&delete this.deletedStates[C][he][tt]}}},Ah.prototype.removeFeatureState=function(C,N,te){var he=this.deletedStates[C]===null;if(!he){var we=String(N);if(this.deletedStates[C]=this.deletedStates[C]||{},te&&N!==void 0)this.deletedStates[C][we]!==null&&(this.deletedStates[C][we]=this.deletedStates[C][we]||{},this.deletedStates[C][we][te]=null);else if(N!==void 0){var Me=this.stateChanges[C]&&this.stateChanges[C][we];if(Me){this.deletedStates[C][we]={};for(te in this.stateChanges[C][we])this.deletedStates[C][we][te]=null}else this.deletedStates[C][we]=null}else this.deletedStates[C]=null}},Ah.prototype.getState=function(C,N){var te=String(N),he=this.state[C]||{},we=this.stateChanges[C]||{},Me=A({},he[te],we[te]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Ne=this.deletedStates[C][N];if(Ne===null)return{};for(var tt in Ne)delete Me[tt]}return Me},Ah.prototype.initializeTileState=function(C,N){C.setFeatureState(this.state,N)},Ah.prototype.coalesceChanges=function(C,N){var te={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var we={};for(var Me in this.stateChanges[he])this.state[he][Me]||(this.state[he][Me]={}),A(this.state[he][Me],this.stateChanges[he][Me]),we[Me]=this.state[he][Me];te[he]=we}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var tt={};if(this.deletedStates[Ne]===null)for(var vt in this.state[Ne])tt[vt]={},this.state[Ne][vt]={};else for(var yt in this.deletedStates[Ne]){var Vt=this.deletedStates[Ne][yt]===null;if(Vt)this.state[Ne][yt]={};else for(var or=0,nr=Object.keys(this.deletedStates[Ne][yt]);or<nr.length;or+=1){var xr=nr[or];delete this.state[Ne][yt][xr]}tt[yt]=this.state[Ne][yt]}te[Ne]=te[Ne]||{},A(te[Ne],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(te).length!==0)for(var Ur in C){var hn=C[Ur];hn.setFeatureState(te,N)}};var Vf=function(C,N){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Ki(Ja,16,0),this.grid3D=new Ki(Ja,16,0),this.featureIndexArray=new lv,this.promoteId=N};Vf.prototype.insert=function(C,N,te,he,we,Me){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(te,he,we);for(var tt=Me?this.grid3D:this.grid,vt=0;vt<N.length;vt++){for(var yt=N[vt],Vt=[1/0,1/0,-1/0,-1/0],or=0;or<yt.length;or++){var nr=yt[or];Vt[0]=Math.min(Vt[0],nr.x),Vt[1]=Math.min(Vt[1],nr.y),Vt[2]=Math.max(Vt[2],nr.x),Vt[3]=Math.max(Vt[3],nr.y)}Vt[0]<Ja&&Vt[1]<Ja&&Vt[2]>=0&&Vt[3]>=0&&tt.insert(Ne,Vt[0],Vt[1],Vt[2],Vt[3])}},Vf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new hh.VectorTile(new op(this.rawTileData)).layers,this.sourceLayerCoder=new gp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Vf.prototype.query=function(C,N,te,he){var we=this;this.loadVTLayers();for(var Me=C.params||{},Ne=Ja/C.tileSize/C.scale,tt=ju(Me.filter),vt=C.queryGeometry,yt=C.queryPadding*Ne,Vt=zm(vt),or=this.grid.query(Vt.minX-yt,Vt.minY-yt,Vt.maxX+yt,Vt.maxY+yt),nr=zm(C.cameraQueryGeometry),xr=this.grid3D.query(nr.minX-yt,nr.minY-yt,nr.maxX+yt,nr.maxY+yt,function(qn,da,va,Wa){return kf(C.cameraQueryGeometry,qn-yt,da-yt,va+yt,Wa+yt)}),Ur=0,hn=xr;Ur<hn.length;Ur+=1){var an=hn[Ur];or.push(an)}or.sort(H2);for(var Rn={},Mn,Dn=function(qn){var da=or[qn];if(da!==Mn){Mn=da;var va=we.featureIndexArray.get(da),Wa=null;we.loadMatchingFeature(Rn,va.bucketIndex,va.sourceLayerIndex,va.featureIndex,tt,Me.layers,Me.availableImages,N,te,he,function(Da,Oa,ci){return Wa||(Wa=to(Da)),Oa.queryIntersectsFeature(vt,Da,ci,Wa,we.z,C.transform,Ne,C.pixelPosMatrix)})}},Vn=0;Vn<or.length;Vn++)Dn(Vn);return Rn},Vf.prototype.loadMatchingFeature=function(C,N,te,he,we,Me,Ne,tt,vt,yt,Vt){var or=this.bucketLayerIDs[N];if(!(Me&&!D(Me,or))){var nr=this.sourceLayerCoder.decode(te),xr=this.vtLayers[nr],Ur=xr.feature(he);if(!!we.filter(new yi(this.tileID.overscaledZ),Ur))for(var hn=this.getId(Ur,nr),an=0;an<or.length;an++){var Rn=or[an];if(!(Me&&Me.indexOf(Rn)<0)){var Mn=tt[Rn];if(!!Mn){var Dn={};hn!==void 0&&yt&&(Dn=yt.getState(Mn.sourceLayer||"_geojsonTileLayer",hn));var Vn=vt[Rn];Vn.paint=Fm(Vn.paint,Mn.paint,Ur,Dn,Ne),Vn.layout=Fm(Vn.layout,Mn.layout,Ur,Dn,Ne);var qn=!Vt||Vt(Ur,Mn,Dn);if(!!qn){var da=new mp(Ur,this.z,this.x,this.y,hn);da.layer=Vn;var va=C[Rn];va===void 0&&(va=C[Rn]=[]),va.push({featureIndex:he,feature:da,intersectionZ:qn})}}}}}},Vf.prototype.lookupSymbolFeatures=function(C,N,te,he,we,Me,Ne,tt){var vt={};this.loadVTLayers();for(var yt=ju(we),Vt=0,or=C;Vt<or.length;Vt+=1){var nr=or[Vt];this.loadMatchingFeature(vt,te,he,nr,yt,Me,Ne,tt,N)}return vt},Vf.prototype.hasLayer=function(C){for(var N=0,te=this.bucketLayerIDs;N<te.length;N+=1)for(var he=te[N],we=0,Me=he;we<Me.length;we+=1){var Ne=Me[we];if(C===Ne)return!0}return!1},Vf.prototype.getId=function(C,N){var te=C.id;if(this.promoteId){var he=typeof this.promoteId=="string"?this.promoteId:this.promoteId[N];te=C.properties[he],typeof te=="boolean"&&(te=Number(te))}return te},Be("FeatureIndex",Vf,{omit:["rawTileData","sourceLayerCoder"]});function Fm(k,C,N,te,he){return P(k,function(we,Me){var Ne=C instanceof eo?C.get(Me):null;return Ne&&Ne.evaluate?Ne.evaluate(N,te,he):Ne})}function zm(k){for(var C=1/0,N=1/0,te=-1/0,he=-1/0,we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we];C=Math.min(C,Ne.x),N=Math.min(N,Ne.y),te=Math.max(te,Ne.x),he=Math.max(he,Ne.y)}return{minX:C,minY:N,maxX:te,maxY:he}}function H2(k,C){return C-k}var G2=3e4,ks=function(C,N){this.tileID=C,this.uid=w(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ks.prototype.registerFadeDuration=function(C){var N=C+this.timeAdded;N<Q.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},ks.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ks.prototype.loadVectorData=function(C,N,te){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Sf;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=V2(C.buckets,N.style),this.hasSymbolBuckets=!1;for(var he in this.buckets){var we=this.buckets[he];if(we instanceof oo)if(this.hasSymbolBuckets=!0,te)we.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Ne=this.buckets[Me];if(Ne instanceof oo&&Ne.hasRTLText){this.hasRTLText=!0,Ui();break}}this.queryPadding=0;for(var tt in this.buckets){var vt=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(tt).queryRadius(vt))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},ks.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ks.prototype.getBucket=function(C){return this.buckets[C.id]},ks.prototype.upload=function(C){for(var N in this.buckets){var te=this.buckets[N];te.uploadPending()&&te.upload(C)}var he=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Fc(C,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fc(C,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},ks.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},ks.prototype.queryRenderedFeatures=function(C,N,te,he,we,Me,Ne,tt,vt,yt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:we,scale:Me,tileSize:this.tileSize,pixelPosMatrix:yt,transform:tt,params:Ne,queryPadding:this.queryPadding*vt},C,N,te)},ks.prototype.querySourceFeatures=function(C,N){var te=this.latestFeatureIndex;if(!(!te||!te.rawTileData)){var he=te.loadVTLayers(),we=N?N.sourceLayer:"",Me=he._geojsonTileLayer||he[we];if(!!Me)for(var Ne=ju(N&&N.filter),tt=this.tileID.canonical,vt=tt.z,yt=tt.x,Vt=tt.y,or={z:vt,x:yt,y:Vt},nr=0;nr<Me.length;nr++){var xr=Me.feature(nr);if(Ne.filter(new yi(this.tileID.overscaledZ),xr)){var Ur=te.getId(xr,we),hn=new mp(xr,vt,yt,Vt,Ur);hn.tile=or,C.push(hn)}}}},ks.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ks.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ks.prototype.setExpiryData=function(C){var N=this.expirationTime;if(C.cacheControl){var te=j(C.cacheControl);te["max-age"]&&(this.expirationTime=Date.now()+te["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var he=Date.now(),we=!1;if(this.expirationTime>he)we=!1;else if(!N)we=!0;else if(this.expirationTime<N)we=!0;else{var Me=this.expirationTime-N;Me?this.expirationTime=he+Math.max(Me,G2):we=!0}we?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ks.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ks.prototype.setFeatureState=function(C,N){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var te=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(!!N.style.hasLayer(he)){var we=this.buckets[he],Me=we.layers[0].sourceLayer||"_geojsonTileLayer",Ne=te[Me],tt=C[Me];if(!(!Ne||!tt||Object.keys(tt).length===0)){we.update(tt,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var vt=N&&N.style&&N.style.getLayer(he);vt&&(this.queryPadding=Math.max(this.queryPadding,vt.queryRadius(we)))}}}},ks.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ks.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},ks.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ks.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=Q.now()+C},ks.prototype.setDependencies=function(C,N){for(var te={},he=0,we=N;he<we.length;he+=1){var Me=we[he];te[Me]=!0}this.dependencies[C]=te},ks.prototype.hasDependency=function(C,N){for(var te=0,he=C;te<he.length;te+=1){var we=he[te],Me=this.dependencies[we];if(Me)for(var Ne=0,tt=N;Ne<tt.length;Ne+=1){var vt=tt[Ne];if(Me[vt])return!0}}return!1};var Y2=["type","source","source-layer","minzoom","maxzoom","filter","layout"],lc=self.performance,Om=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},lc.mark(this._marks.start)};Om.prototype.finish=function(){lc.mark(this._marks.end);var C=lc.getEntriesByName(this._marks.measure);return C.length===0&&(lc.measure(this._marks.measure,this._marks.start,this._marks.end),C=lc.getEntriesByName(this._marks.measure),lc.clearMarks(this._marks.start),lc.clearMarks(this._marks.end),lc.clearMeasures(this._marks.measure)),C},e.Actor=Th,e.AlphaImage=Ic,e.CanonicalTileID=Oc,e.CollisionBoxArray=Sf,e.Color=Ai,e.DEMData=Uf,e.DataConstantProperty=Za,e.DictionaryCoder=gp,e.EXTENT=Ja,e.ErrorEvent=Ar,e.EvaluationParameters=yi,e.Event=Pr,e.Evented=kr,e.FeatureIndex=Vf,e.FillBucket=hf,e.FillExtrusionBucket=vf,e.ImageAtlas=xv,e.ImagePosition=lp,e.LineBucket=Bl,e.LngLat=Ro,e.LngLatBounds=os,e.MercatorCoordinate=zc,e.ONE_EM=Us,e.OverscaledTileID=ss,e.Point=v,e.Point$1=v,e.Properties=fo,e.Protobuf=op,e.RGBAImage=Nl,e.RequestManager=Se,e.RequestPerformance=Om,e.ResourceType=st,e.SegmentVector=W,e.SourceFeatureState=Ah,e.StructArrayLayout1ui2=rc,e.StructArrayLayout2f1f2i16=uf,e.StructArrayLayout2i4=Sc,e.StructArrayLayout3ui6=ff,e.StructArrayLayout4i8=Tf,e.SymbolBucket=oo,e.Texture=Fc,e.Tile=ks,e.Transitionable=Oo,e.Uniform1f=Xr,e.Uniform1i=$r,e.Uniform2f=rn,e.Uniform3f=xn,e.Uniform4f=Fn,e.UniformColor=Gn,e.UniformMatrix4f=fa,e.UnwrappedTileID=Im,e.ValidationError=gr,e.WritingMode=mu,e.ZoomHistory=ar,e.add=uh,e.addDynamicAttributes=Wd,e.asyncAll=l,e.bezier=g,e.bindAll=E,e.browser=Q,e.cacheEntryPossiblyAdded=Xt,e.clamp=c,e.clearTileCache=sr,e.clipLine=mm,e.clone=qv,e.clone$1=I,e.clone$2=Ad,e.collisionCircleLayout=A_,e.config=ie,e.create=oh,e.create$1=Dc,e.create$2=Pc,e.createCommonjsModule=a,e.createExpression=Jl,e.createLayout=Qo,e.createStyleLayer=F2,e.cross=eb,e.deepEqual=o,e.dot=qx,e.dot$1=ib,e.ease=d,e.emitValidationErrors=Pi,e.endsWith=S,e.enforceCacheSizeLimit=Wt,e.evaluateSizeForFeature=fm,e.evaluateSizeForZoom=cm,e.evaluateVariableOffset=bm,e.evented=Ci,e.extend=A,e.featureFilter=ju,e.filterObject=F,e.fromRotation=ih,e.getAnchorAlignment=Vd,e.getAnchorJustification=Yd,e.getArrayBuffer=ct,e.getImage=xt,e.getJSON=ft,e.getRTLTextPluginStatus=Do,e.getReferrer=er,e.getVideo=Lt,e.identity=sh,e.invert=ac,e.isChar=ir,e.isMapboxURL=Re,e.keysDifference=u,e.makeRequest=Qe,e.mapObject=P,e.mercatorXfromLng=Pm,e.mercatorYfromLat=Dm,e.mercatorZfromAltitude=Rm,e.mul=Td,e.multiply=ic,e.mvt=hh,e.normalize=fv,e.number=go,e.offscreenCanvasSupported=en,e.ortho=wd,e.parseGlyphPBF=$_,e.pbf=op,e.performSymbolLayout=d2,e.perspective=uv,e.pick=_,e.plugin=ii,e.polygonIntersectsPolygon=gi,e.postMapLoadEvent=St,e.postTurnstileEvent=Kt,e.potpack=rm,e.refProperties=Y2,e.register=Be,e.registerForPluginStateChange=Ji,e.rotate=il,e.rotateX=Ol,e.rotateZ=lh,e.scale=zl,e.scale$1=ab,e.scale$2=Ed,e.setCacheLimits=Gr,e.setRTLTextPlugin=_a,e.sphericalToCartesian=Y,e.sqrLen=lb,e.styleSpec=Yt,e.sub=rb,e.symbolSize=o2,e.transformMat3=tb,e.transformMat4=ep,e.translate=Zo,e.triggerPluginCompletionEvent=Va,e.uniqueId=w,e.validateCustomStyleLayer=D2,e.validateLight=ta,e.validateStyle=Hn,e.values=y,e.vectorTile=hh,e.version=i,e.warnOnce=O,e.webpSupported=oe,e.window=self,e.wrap=m}),T(["./shared"],function(e){function a(it){var Qe=typeof it;if(Qe==="number"||Qe==="boolean"||Qe==="string"||it===void 0||it===null)return JSON.stringify(it);if(Array.isArray(it)){for(var ft="[",ct=0,Et=it;ct<Et.length;ct+=1){var Nt=Et[ct];ft+=a(Nt)+","}return ft+"]"}for(var Pe=Object.keys(it).sort(),Le="{",ot=0;ot<Pe.length;ot++)Le+=JSON.stringify(Pe[ot])+":"+a(it[Pe[ot]])+",";return Le+"}"}function i(it){for(var Qe="",ft=0,ct=e.refProperties;ft<ct.length;ft+=1){var Et=ct[ft];Qe+="/"+a(it[Et])}return Qe}function n(it,Qe){for(var ft={},ct=0;ct<it.length;ct++){var Et=Qe&&Qe[it[ct].id]||i(it[ct]);Qe&&(Qe[it[ct].id]=Et);var Nt=ft[Et];Nt||(Nt=ft[Et]=[]),Nt.push(it[ct])}var Pe=[];for(var Le in ft)Pe.push(ft[Le]);return Pe}var r=function(Qe){this.keyCache={},Qe&&this.replace(Qe)};r.prototype.replace=function(Qe){this._layerConfigs={},this._layers={},this.update(Qe,[])},r.prototype.update=function(Qe,ft){for(var ct=this,Et=0,Nt=Qe;Et<Nt.length;Et+=1){var Pe=Nt[Et];this._layerConfigs[Pe.id]=Pe;var Le=this._layers[Pe.id]=e.createStyleLayer(Pe);Le._featureFilter=e.featureFilter(Le.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var ot=0,ut=ft;ot<ut.length;ot+=1){var pt=ut[ot];delete this.keyCache[pt],delete this._layerConfigs[pt],delete this._layers[pt]}this.familiesBySource={};for(var Pt=n(e.values(this._layerConfigs),this.keyCache),xt=0,Lt=Pt;xt<Lt.length;xt+=1){var Zt=Lt[xt],ur=Zt.map(function(br){return ct._layers[br.id]}),Pr=ur[0];if(Pr.visibility!=="none"){var Ar=Pr.source||"",kr=this.familiesBySource[Ar];kr||(kr=this.familiesBySource[Ar]={});var Zr=Pr.sourceLayer||"_geojsonTileLayer",lr=kr[Zr];lr||(lr=kr[Zr]=[]),lr.push(ur)}}};var v=1,s=function(Qe){var ft={},ct=[];for(var Et in Qe){var Nt=Qe[Et],Pe=ft[Et]={};for(var Le in Nt){var ot=Nt[+Le];if(!(!ot||ot.bitmap.width===0||ot.bitmap.height===0)){var ut={x:0,y:0,w:ot.bitmap.width+2*v,h:ot.bitmap.height+2*v};ct.push(ut),Pe[Le]={rect:ut,metrics:ot.metrics}}}}var pt=e.potpack(ct),Pt=pt.w,xt=pt.h,Lt=new e.AlphaImage({width:Pt||1,height:xt||1});for(var Zt in Qe){var ur=Qe[Zt];for(var Pr in ur){var Ar=ur[+Pr];if(!(!Ar||Ar.bitmap.width===0||Ar.bitmap.height===0)){var kr=ft[Zt][Pr].rect;e.AlphaImage.copy(Ar.bitmap,Lt,{x:0,y:0},{x:kr.x+v,y:kr.y+v},Ar.bitmap)}}}this.image=Lt,this.positions=ft};e.register("GlyphAtlas",s);var o=function(Qe){this.tileID=new e.OverscaledTileID(Qe.tileID.overscaledZ,Qe.tileID.wrap,Qe.tileID.canonical.z,Qe.tileID.canonical.x,Qe.tileID.canonical.y),this.uid=Qe.uid,this.zoom=Qe.zoom,this.pixelRatio=Qe.pixelRatio,this.tileSize=Qe.tileSize,this.source=Qe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Qe.showCollisionBoxes,this.collectResourceTiming=!!Qe.collectResourceTiming,this.returnDependencies=!!Qe.returnDependencies,this.promoteId=Qe.promoteId};o.prototype.parse=function(Qe,ft,ct,Et,Nt){var Pe=this;this.status="parsing",this.data=Qe,this.collisionBoxArray=new e.CollisionBoxArray;var Le=new e.DictionaryCoder(Object.keys(Qe.layers).sort()),ot=new e.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];var ut={},pt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ct},Pt=ft.familiesBySource[this.source];for(var xt in Pt){var Lt=Qe.layers[xt];if(!!Lt){Lt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+xt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Zt=Le.encode(xt),ur=[],Pr=0;Pr<Lt.length;Pr++){var Ar=Lt.feature(Pr),kr=ot.getId(Ar,xt);ur.push({feature:Ar,id:kr,index:Pr,sourceLayerIndex:Zt})}for(var Zr=0,lr=Pt[xt];Zr<lr.length;Zr+=1){var br=lr[Zr],Or=br[0];if(!(Or.minzoom&&this.zoom<Math.floor(Or.minzoom))&&!(Or.maxzoom&&this.zoom>=Or.maxzoom)&&Or.visibility!=="none"){b(br,this.zoom,ct);var Hr=ut[Or.id]=Or.createBucket({index:ot.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zt,sourceID:this.source});Hr.populate(ur,pt,this.tileID.canonical),ot.bucketLayerIDs.push(br.map(function(Er){return Er.id}))}}}}var Lr,nt,It,Jt,fr=e.mapObject(pt.glyphDependencies,function(Er){return Object.keys(Er).map(Number)});Object.keys(fr).length?Et.send("getGlyphs",{uid:this.uid,stacks:fr},function(Er,jr){Lr||(Lr=Er,nt=jr,Dr.call(Pe))}):nt={};var Nr=Object.keys(pt.iconDependencies);Nr.length?Et.send("getImages",{icons:Nr,source:this.source,tileID:this.tileID,type:"icons"},function(Er,jr){Lr||(Lr=Er,It=jr,Dr.call(Pe))}):It={};var Vr=Object.keys(pt.patternDependencies);Vr.length?Et.send("getImages",{icons:Vr,source:this.source,tileID:this.tileID,type:"patterns"},function(Er,jr){Lr||(Lr=Er,Jt=jr,Dr.call(Pe))}):Jt={},Dr.call(this);function Dr(){if(Lr)return Nt(Lr);if(nt&&It&&Jt){var Er=new s(nt),jr=new e.ImageAtlas(It,Jt);for(var kn in ut){var mn=ut[kn];mn instanceof e.SymbolBucket?(b(mn.layers,this.zoom,ct),e.performSymbolLayout(mn,nt,Er.positions,It,jr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):mn.hasPattern&&(mn instanceof e.LineBucket||mn instanceof e.FillBucket||mn instanceof e.FillExtrusionBucket)&&(b(mn.layers,this.zoom,ct),mn.addFeatures(pt,this.tileID.canonical,jr.patternPositions))}this.status="done",Nt(null,{buckets:e.values(ut).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Er.image,imageAtlas:jr,glyphMap:this.returnDependencies?nt:null,iconMap:this.returnDependencies?It:null,glyphPositions:this.returnDependencies?Er.positions:null})}}};function b(it,Qe,ft){for(var ct=new e.EvaluationParameters(Qe),Et=0,Nt=it;Et<Nt.length;Et+=1){var Pe=Nt[Et];Pe.recalculate(ct,ft)}}function g(it,Qe){var ft=e.getArrayBuffer(it.request,function(ct,Et,Nt,Pe){ct?Qe(ct):Et&&Qe(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Et)),rawData:Et,cacheControl:Nt,expires:Pe})});return function(){ft.cancel(),Qe()}}var d=function(Qe,ft,ct,Et){this.actor=Qe,this.layerIndex=ft,this.availableImages=ct,this.loadVectorData=Et||g,this.loading={},this.loaded={}};d.prototype.loadTile=function(Qe,ft){var ct=this,Et=Qe.uid;this.loading||(this.loading={});var Nt=Qe&&Qe.request&&Qe.request.collectResourceTiming?new e.RequestPerformance(Qe.request):!1,Pe=this.loading[Et]=new o(Qe);Pe.abort=this.loadVectorData(Qe,function(Le,ot){if(delete ct.loading[Et],Le||!ot)return Pe.status="done",ct.loaded[Et]=Pe,ft(Le);var ut=ot.rawData,pt={};ot.expires&&(pt.expires=ot.expires),ot.cacheControl&&(pt.cacheControl=ot.cacheControl);var Pt={};if(Nt){var xt=Nt.finish();xt&&(Pt.resourceTiming=JSON.parse(JSON.stringify(xt)))}Pe.vectorTile=ot.vectorTile,Pe.parse(ot.vectorTile,ct.layerIndex,ct.availableImages,ct.actor,function(Lt,Zt){if(Lt||!Zt)return ft(Lt);ft(null,e.extend({rawTileData:ut.slice(0)},Zt,pt,Pt))}),ct.loaded=ct.loaded||{},ct.loaded[Et]=Pe})},d.prototype.reloadTile=function(Qe,ft){var ct=this,Et=this.loaded,Nt=Qe.uid,Pe=this;if(Et&&Et[Nt]){var Le=Et[Nt];Le.showCollisionBoxes=Qe.showCollisionBoxes;var ot=function(ut,pt){var Pt=Le.reloadCallback;Pt&&(delete Le.reloadCallback,Le.parse(Le.vectorTile,Pe.layerIndex,ct.availableImages,Pe.actor,Pt)),ft(ut,pt)};Le.status==="parsing"?Le.reloadCallback=ot:Le.status==="done"&&(Le.vectorTile?Le.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}},d.prototype.abortTile=function(Qe,ft){var ct=this.loading,Et=Qe.uid;ct&&ct[Et]&&ct[Et].abort&&(ct[Et].abort(),delete ct[Et]),ft()},d.prototype.removeTile=function(Qe,ft){var ct=this.loaded,Et=Qe.uid;ct&&ct[Et]&&delete ct[Et],ft()};var c=e.window.ImageBitmap,m=function(){this.loaded={}};m.prototype.loadTile=function(Qe,ft){var ct=Qe.uid,Et=Qe.encoding,Nt=Qe.rawImageData,Pe=c&&Nt instanceof c?this.getImageData(Nt):Nt,Le=new e.DEMData(ct,Pe,Et);this.loaded=this.loaded||{},this.loaded[ct]=Le,ft(null,Le)},m.prototype.getImageData=function(Qe){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Qe.width,Qe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Qe.width,this.offscreenCanvas.height=Qe.height,this.offscreenCanvasContext.drawImage(Qe,0,0,Qe.width,Qe.height);var ft=this.offscreenCanvasContext.getImageData(-1,-1,Qe.width+2,Qe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:ft.width,height:ft.height},ft.data)},m.prototype.removeTile=function(Qe){var ft=this.loaded,ct=Qe.uid;ft&&ft[ct]&&delete ft[ct]};var l=y;function y(it,Qe){var ft=it&&it.type,ct;if(ft==="FeatureCollection")for(ct=0;ct<it.features.length;ct++)y(it.features[ct],Qe);else if(ft==="GeometryCollection")for(ct=0;ct<it.geometries.length;ct++)y(it.geometries[ct],Qe);else if(ft==="Feature")y(it.geometry,Qe);else if(ft==="Polygon")u(it.coordinates,Qe);else if(ft==="MultiPolygon")for(ct=0;ct<it.coordinates.length;ct++)u(it.coordinates[ct],Qe);return it}function u(it,Qe){if(it.length!==0){A(it[0],Qe);for(var ft=1;ft<it.length;ft++)A(it[ft],!Qe)}}function A(it,Qe){for(var ft=0,ct=0,Et=it.length,Nt=Et-1;ct<Et;Nt=ct++)ft+=(it[ct][0]-it[Nt][0])*(it[Nt][1]+it[ct][1]);ft>=0!=!!Qe&&it.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(Qe){this._feature=Qe,this.extent=e.EXTENT,this.type=Qe.type,this.properties=Qe.tags,"id"in Qe&&!isNaN(Qe.id)&&(this.id=parseInt(Qe.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Qe=[],ft=0,ct=this._feature.geometry;ft<ct.length;ft+=1){var Et=ct[ft];Qe.push([new e.Point$1(Et[0],Et[1])])}return Qe}else{for(var Nt=[],Pe=0,Le=this._feature.geometry;Pe<Le.length;Pe+=1){for(var ot=Le[Pe],ut=[],pt=0,Pt=ot;pt<Pt.length;pt+=1){var xt=Pt[pt];ut.push(new e.Point$1(xt[0],xt[1]))}Nt.push(ut)}return Nt}},p.prototype.toGeoJSON=function(Qe,ft,ct){return _.call(this,Qe,ft,ct)};var w=function(Qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Qe.length,this._features=Qe};w.prototype.feature=function(Qe){return new p(this._features[Qe])};var h=e.vectorTile.VectorTileFeature,L=E;function E(it,Qe){this.options=Qe||{},this.features=it,this.length=it.length}E.prototype.feature=function(it){return new S(this.features[it],this.options.extent)};function S(it,Qe){this.id=typeof it.id=="number"?it.id:void 0,this.type=it.type,this.rawGeometry=it.type===1?[it.geometry]:it.geometry,this.properties=it.tags,this.extent=Qe||4096}S.prototype.loadGeometry=function(){var it=this.rawGeometry;this.geometry=[];for(var Qe=0;Qe<it.length;Qe++){for(var ft=it[Qe],ct=[],Et=0;Et<ft.length;Et++)ct.push(new e.Point$1(ft[Et][0],ft[Et][1]));this.geometry.push(ct)}return this.geometry},S.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var it=this.geometry,Qe=1/0,ft=-1/0,ct=1/0,Et=-1/0,Nt=0;Nt<it.length;Nt++)for(var Pe=it[Nt],Le=0;Le<Pe.length;Le++){var ot=Pe[Le];Qe=Math.min(Qe,ot.x),ft=Math.max(ft,ot.x),ct=Math.min(ct,ot.y),Et=Math.max(Et,ot.y)}return[Qe,ct,ft,Et]},S.prototype.toGeoJSON=h.prototype.toGeoJSON;var P=R,F=R,I=O,D=L;function R(it){var Qe=new e.pbf;return z(it,Qe),Qe.finish()}function O(it,Qe){Qe=Qe||{};var ft={};for(var ct in it)ft[ct]=new L(it[ct].features,Qe),ft[ct].name=ct,ft[ct].version=Qe.version,ft[ct].extent=Qe.extent;return R({layers:ft})}function z(it,Qe){for(var ft in it.layers)Qe.writeMessage(3,H,it.layers[ft])}function H(it,Qe){Qe.writeVarintField(15,it.version||1),Qe.writeStringField(1,it.name||""),Qe.writeVarintField(5,it.extent||4096);var ft,ct={keys:[],values:[],keycache:{},valuecache:{}};for(ft=0;ft<it.length;ft++)ct.feature=it.feature(ft),Qe.writeMessage(2,Y,ct);var Et=ct.keys;for(ft=0;ft<Et.length;ft++)Qe.writeStringField(3,Et[ft]);var Nt=ct.values;for(ft=0;ft<Nt.length;ft++)Qe.writeMessage(4,fe,Nt[ft])}function Y(it,Qe){var ft=it.feature;ft.id!==void 0&&Qe.writeVarintField(1,ft.id),Qe.writeMessage(2,ee,it),Qe.writeVarintField(3,ft.type),Qe.writeMessage(4,ae,ft)}function ee(it,Qe){var ft=it.feature,ct=it.keys,Et=it.values,Nt=it.keycache,Pe=it.valuecache;for(var Le in ft.properties){var ot=Nt[Le];typeof ot>"u"&&(ct.push(Le),ot=ct.length-1,Nt[Le]=ot),Qe.writeVarint(ot);var ut=ft.properties[Le],pt=typeof ut;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(ut=JSON.stringify(ut));var Pt=pt+":"+ut,xt=Pe[Pt];typeof xt>"u"&&(Et.push(ut),xt=Et.length-1,Pe[Pt]=xt),Qe.writeVarint(xt)}}function j(it,Qe){return(Qe<<3)+(it&7)}function X(it){return it<<1^it>>31}function ae(it,Qe){for(var ft=it.loadGeometry(),ct=it.type,Et=0,Nt=0,Pe=ft.length,Le=0;Le<Pe;Le++){var ot=ft[Le],ut=1;ct===1&&(ut=ot.length),Qe.writeVarint(j(1,ut));for(var pt=ct===3?ot.length-1:ot.length,Pt=0;Pt<pt;Pt++){Pt===1&&ct!==1&&Qe.writeVarint(j(2,pt-1));var xt=ot[Pt].x-Et,Lt=ot[Pt].y-Nt;Qe.writeVarint(X(xt)),Qe.writeVarint(X(Lt)),Et+=xt,Nt+=Lt}ct===3&&Qe.writeVarint(j(7,1))}}function fe(it,Qe){var ft=typeof it;ft==="string"?Qe.writeStringField(1,it):ft==="boolean"?Qe.writeBooleanField(7,it):ft==="number"&&(it%1!==0?Qe.writeDoubleField(3,it):it<0?Qe.writeSVarintField(6,it):Qe.writeVarintField(5,it))}P.fromVectorTileJs=F,P.fromGeojsonVt=I,P.GeoJSONWrapper=D;function K(it,Qe,ft,ct,Et,Nt){if(!(Et-ct<=ft)){var Pe=ct+Et>>1;J(it,Qe,Pe,ct,Et,Nt%2),K(it,Qe,ft,ct,Pe-1,Nt+1),K(it,Qe,ft,Pe+1,Et,Nt+1)}}function J(it,Qe,ft,ct,Et,Nt){for(;Et>ct;){if(Et-ct>600){var Pe=Et-ct+1,Le=ft-ct+1,ot=Math.log(Pe),ut=.5*Math.exp(2*ot/3),pt=.5*Math.sqrt(ot*ut*(Pe-ut)/Pe)*(Le-Pe/2<0?-1:1),Pt=Math.max(ct,Math.floor(ft-Le*ut/Pe+pt)),xt=Math.min(Et,Math.floor(ft+(Pe-Le)*ut/Pe+pt));J(it,Qe,ft,Pt,xt,Nt)}var Lt=Qe[2*ft+Nt],Zt=ct,ur=Et;for(U(it,Qe,ct,ft),Qe[2*Et+Nt]>Lt&&U(it,Qe,ct,Et);Zt<ur;){for(U(it,Qe,Zt,ur),Zt++,ur--;Qe[2*Zt+Nt]<Lt;)Zt++;for(;Qe[2*ur+Nt]>Lt;)ur--}Qe[2*ct+Nt]===Lt?U(it,Qe,ct,ur):(ur++,U(it,Qe,ur,Et)),ur<=ft&&(ct=ur+1),ft<=ur&&(Et=ur-1)}}function U(it,Qe,ft,ct){V(it,ft,ct),V(Qe,2*ft,2*ct),V(Qe,2*ft+1,2*ct+1)}function V(it,Qe,ft){var ct=it[Qe];it[Qe]=it[ft],it[ft]=ct}function q(it,Qe,ft,ct,Et,Nt,Pe){for(var Le=[0,it.length-1,0],ot=[],ut,pt;Le.length;){var Pt=Le.pop(),xt=Le.pop(),Lt=Le.pop();if(xt-Lt<=Pe){for(var Zt=Lt;Zt<=xt;Zt++)ut=Qe[2*Zt],pt=Qe[2*Zt+1],ut>=ft&&ut<=Et&&pt>=ct&&pt<=Nt&&ot.push(it[Zt]);continue}var ur=Math.floor((Lt+xt)/2);ut=Qe[2*ur],pt=Qe[2*ur+1],ut>=ft&&ut<=Et&&pt>=ct&&pt<=Nt&&ot.push(it[ur]);var Pr=(Pt+1)%2;(Pt===0?ft<=ut:ct<=pt)&&(Le.push(Lt),Le.push(ur-1),Le.push(Pr)),(Pt===0?Et>=ut:Nt>=pt)&&(Le.push(ur+1),Le.push(xt),Le.push(Pr))}return ot}function re(it,Qe,ft,ct,Et,Nt){for(var Pe=[0,it.length-1,0],Le=[],ot=Et*Et;Pe.length;){var ut=Pe.pop(),pt=Pe.pop(),Pt=Pe.pop();if(pt-Pt<=Nt){for(var xt=Pt;xt<=pt;xt++)Z(Qe[2*xt],Qe[2*xt+1],ft,ct)<=ot&&Le.push(it[xt]);continue}var Lt=Math.floor((Pt+pt)/2),Zt=Qe[2*Lt],ur=Qe[2*Lt+1];Z(Zt,ur,ft,ct)<=ot&&Le.push(it[Lt]);var Pr=(ut+1)%2;(ut===0?ft-Et<=Zt:ct-Et<=ur)&&(Pe.push(Pt),Pe.push(Lt-1),Pe.push(Pr)),(ut===0?ft+Et>=Zt:ct+Et>=ur)&&(Pe.push(Lt+1),Pe.push(pt),Pe.push(Pr))}return Le}function Z(it,Qe,ft,ct){var Et=it-ft,Nt=Qe-ct;return Et*Et+Nt*Nt}var Q=function(it){return it[0]},ie=function(it){return it[1]},oe=function(Qe,ft,ct,Et,Nt){ft===void 0&&(ft=Q),ct===void 0&&(ct=ie),Et===void 0&&(Et=64),Nt===void 0&&(Nt=Float64Array),this.nodeSize=Et,this.points=Qe;for(var Pe=Qe.length<65536?Uint16Array:Uint32Array,Le=this.ids=new Pe(Qe.length),ot=this.coords=new Nt(Qe.length*2),ut=0;ut<Qe.length;ut++)Le[ut]=ut,ot[2*ut]=ft(Qe[ut]),ot[2*ut+1]=ct(Qe[ut]);K(Le,ot,Et,0,Le.length-1,0)};oe.prototype.range=function(Qe,ft,ct,Et){return q(this.ids,this.coords,Qe,ft,ct,Et,this.nodeSize)},oe.prototype.within=function(Qe,ft,ct){return re(this.ids,this.coords,Qe,ft,ct,this.nodeSize)};var ne={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(it){return it}},se=function(Qe){this.options=Ve(Object.create(ne),Qe),this.trees=new Array(this.options.maxZoom+1)};se.prototype.load=function(Qe){var ft=this.options,ct=ft.log,Et=ft.minZoom,Nt=ft.maxZoom,Pe=ft.nodeSize;ct&&console.time("total time");var Le="prepare "+Qe.length+" points";ct&&console.time(Le),this.points=Qe;for(var ot=[],ut=0;ut<Qe.length;ut++)!Qe[ut].geometry||ot.push(ue(Qe[ut],ut));this.trees[Nt+1]=new oe(ot,Ae,Ce,Pe,Float32Array),ct&&console.timeEnd(Le);for(var pt=Nt;pt>=Et;pt--){var Pt=+Date.now();ot=this._cluster(ot,pt),this.trees[pt]=new oe(ot,Ae,Ce,Pe,Float32Array),ct&&console.log("z%d: %d clusters in %dms",pt,ot.length,+Date.now()-Pt)}return ct&&console.timeEnd("total time"),this},se.prototype.getClusters=function(Qe,ft){var ct=((Qe[0]+180)%360+360)%360-180,Et=Math.max(-90,Math.min(90,Qe[1])),Nt=Qe[2]===180?180:((Qe[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,Qe[3]));if(Qe[2]-Qe[0]>=360)ct=-180,Nt=180;else if(ct>Nt){var Le=this.getClusters([ct,Et,180,Pe],ft),ot=this.getClusters([-180,Et,Nt,Pe],ft);return Le.concat(ot)}for(var ut=this.trees[this._limitZoom(ft)],pt=ut.range(ye(ct),be(Pe),ye(Nt),be(Et)),Pt=[],xt=0,Lt=pt;xt<Lt.length;xt+=1){var Zt=Lt[xt],ur=ut.points[Zt];Pt.push(ur.numPoints?ge(ur):this.points[ur.index])}return Pt},se.prototype.getChildren=function(Qe){var ft=this._getOriginId(Qe),ct=this._getOriginZoom(Qe),Et="No cluster with the specified id.",Nt=this.trees[ct];if(!Nt)throw new Error(Et);var Pe=Nt.points[ft];if(!Pe)throw new Error(Et);for(var Le=this.options.radius/(this.options.extent*Math.pow(2,ct-1)),ot=Nt.within(Pe.x,Pe.y,Le),ut=[],pt=0,Pt=ot;pt<Pt.length;pt+=1){var xt=Pt[pt],Lt=Nt.points[xt];Lt.parentId===Qe&&ut.push(Lt.numPoints?ge(Lt):this.points[Lt.index])}if(ut.length===0)throw new Error(Et);return ut},se.prototype.getLeaves=function(Qe,ft,ct){ft=ft||10,ct=ct||0;var Et=[];return this._appendLeaves(Et,Qe,ft,ct,0),Et},se.prototype.getTile=function(Qe,ft,ct){var Et=this.trees[this._limitZoom(Qe)],Nt=Math.pow(2,Qe),Pe=this.options,Le=Pe.extent,ot=Pe.radius,ut=ot/Le,pt=(ct-ut)/Nt,Pt=(ct+1+ut)/Nt,xt={features:[]};return this._addTileFeatures(Et.range((ft-ut)/Nt,pt,(ft+1+ut)/Nt,Pt),Et.points,ft,ct,Nt,xt),ft===0&&this._addTileFeatures(Et.range(1-ut/Nt,pt,1,Pt),Et.points,Nt,ct,Nt,xt),ft===Nt-1&&this._addTileFeatures(Et.range(0,pt,ut/Nt,Pt),Et.points,-1,ct,Nt,xt),xt.features.length?xt:null},se.prototype.getClusterExpansionZoom=function(Qe){for(var ft=this._getOriginZoom(Qe)-1;ft<=this.options.maxZoom;){var ct=this.getChildren(Qe);if(ft++,ct.length!==1)break;Qe=ct[0].properties.cluster_id}return ft},se.prototype._appendLeaves=function(Qe,ft,ct,Et,Nt){for(var Pe=this.getChildren(ft),Le=0,ot=Pe;Le<ot.length;Le+=1){var ut=ot[Le],pt=ut.properties;if(pt&&pt.cluster?Nt+pt.point_count<=Et?Nt+=pt.point_count:Nt=this._appendLeaves(Qe,pt.cluster_id,ct,Et,Nt):Nt<Et?Nt++:Qe.push(ut),Qe.length===ct)break}return Nt},se.prototype._addTileFeatures=function(Qe,ft,ct,Et,Nt,Pe){for(var Le=0,ot=Qe;Le<ot.length;Le+=1){var ut=ot[Le],pt=ft[ut],Pt=pt.numPoints,xt={type:1,geometry:[[Math.round(this.options.extent*(pt.x*Nt-ct)),Math.round(this.options.extent*(pt.y*Nt-Et))]],tags:Pt?xe(pt):this.points[pt.index].properties},Lt=void 0;Pt?Lt=pt.id:this.options.generateId?Lt=pt.index:this.points[pt.index].id&&(Lt=this.points[pt.index].id),Lt!==void 0&&(xt.id=Lt),Pe.features.push(xt)}},se.prototype._limitZoom=function(Qe){return Math.max(this.options.minZoom,Math.min(Qe,this.options.maxZoom+1))},se.prototype._cluster=function(Qe,ft){for(var ct=[],Et=this.options,Nt=Et.radius,Pe=Et.extent,Le=Et.reduce,ot=Nt/(Pe*Math.pow(2,ft)),ut=0;ut<Qe.length;ut++){var pt=Qe[ut];if(!(pt.zoom<=ft)){pt.zoom=ft;for(var Pt=this.trees[ft+1],xt=Pt.within(pt.x,pt.y,ot),Lt=pt.numPoints||1,Zt=pt.x*Lt,ur=pt.y*Lt,Pr=Le&&Lt>1?this._map(pt,!0):null,Ar=(ut<<5)+(ft+1)+this.points.length,kr=0,Zr=xt;kr<Zr.length;kr+=1){var lr=Zr[kr],br=Pt.points[lr];if(!(br.zoom<=ft)){br.zoom=ft;var Or=br.numPoints||1;Zt+=br.x*Or,ur+=br.y*Or,Lt+=Or,br.parentId=Ar,Le&&(Pr||(Pr=this._map(pt,!0)),Le(Pr,this._map(br)))}}Lt===1?ct.push(pt):(pt.parentId=Ar,ct.push(_e(Zt/Lt,ur/Lt,Ar,Lt,Pr)))}}return ct},se.prototype._getOriginId=function(Qe){return Qe-this.points.length>>5},se.prototype._getOriginZoom=function(Qe){return(Qe-this.points.length)%32},se.prototype._map=function(Qe,ft){if(Qe.numPoints)return ft?Ve({},Qe.properties):Qe.properties;var ct=this.points[Qe.index].properties,Et=this.options.map(ct);return ft&&Et===ct?Ve({},Et):Et};function _e(it,Qe,ft,ct,Et){return{x:it,y:Qe,zoom:1/0,id:ft,parentId:-1,numPoints:ct,properties:Et}}function ue(it,Qe){var ft=it.geometry.coordinates,ct=ft[0],Et=ft[1];return{x:ye(ct),y:be(Et),zoom:1/0,index:Qe,parentId:-1}}function ge(it){return{type:"Feature",id:it.id,properties:xe(it),geometry:{type:"Point",coordinates:[Se(it.x),Re(it.y)]}}}function xe(it){var Qe=it.numPoints,ft=Qe>=1e4?Math.round(Qe/1e3)+"k":Qe>=1e3?Math.round(Qe/100)/10+"k":Qe;return Ve(Ve({},it.properties),{cluster:!0,cluster_id:it.id,point_count:Qe,point_count_abbreviated:ft})}function ye(it){return it/360+.5}function be(it){var Qe=Math.sin(it*Math.PI/180),ft=.5-.25*Math.log((1+Qe)/(1-Qe))/Math.PI;return ft<0?0:ft>1?1:ft}function Se(it){return(it-.5)*360}function Re(it){var Qe=(180-it*360)*Math.PI/180;return 360*Math.atan(Math.exp(Qe))/Math.PI-90}function Ve(it,Qe){for(var ft in Qe)it[ft]=Qe[ft];return it}function Ae(it){return it.x}function Ce(it){return it.y}function Ze(it,Qe,ft,ct){for(var Et=ct,Nt=ft-Qe>>1,Pe=ft-Qe,Le,ot=it[Qe],ut=it[Qe+1],pt=it[ft],Pt=it[ft+1],xt=Qe+3;xt<ft;xt+=3){var Lt=Ye(it[xt],it[xt+1],ot,ut,pt,Pt);if(Lt>Et)Le=xt,Et=Lt;else if(Lt===Et){var Zt=Math.abs(xt-Nt);Zt<Pe&&(Le=xt,Pe=Zt)}}Et>ct&&(Le-Qe>3&&Ze(it,Qe,Le,ct),it[Le+2]=Et,ft-Le>3&&Ze(it,Le,ft,ct))}function Ye(it,Qe,ft,ct,Et,Nt){var Pe=Et-ft,Le=Nt-ct;if(Pe!==0||Le!==0){var ot=((it-ft)*Pe+(Qe-ct)*Le)/(Pe*Pe+Le*Le);ot>1?(ft=Et,ct=Nt):ot>0&&(ft+=Pe*ot,ct+=Le*ot)}return Pe=it-ft,Le=Qe-ct,Pe*Pe+Le*Le}function ze(it,Qe,ft,ct){var Et={id:typeof it>"u"?null:it,type:Qe,geometry:ft,tags:ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ie(Et),Et}function Ie(it){var Qe=it.geometry,ft=it.type;if(ft==="Point"||ft==="MultiPoint"||ft==="LineString")Ge(it,Qe);else if(ft==="Polygon"||ft==="MultiLineString")for(var ct=0;ct<Qe.length;ct++)Ge(it,Qe[ct]);else if(ft==="MultiPolygon")for(ct=0;ct<Qe.length;ct++)for(var Et=0;Et<Qe[ct].length;Et++)Ge(it,Qe[ct][Et])}function Ge(it,Qe){for(var ft=0;ft<Qe.length;ft+=3)it.minX=Math.min(it.minX,Qe[ft]),it.minY=Math.min(it.minY,Qe[ft+1]),it.maxX=Math.max(it.maxX,Qe[ft]),it.maxY=Math.max(it.maxY,Qe[ft+1])}function dt(it,Qe){var ft=[];if(it.type==="FeatureCollection")for(var ct=0;ct<it.features.length;ct++)Rt(ft,it.features[ct],Qe,ct);else it.type==="Feature"?Rt(ft,it,Qe):Rt(ft,{geometry:it},Qe);return ft}function Rt(it,Qe,ft,ct){if(!!Qe.geometry){var Et=Qe.geometry.coordinates,Nt=Qe.geometry.type,Pe=Math.pow(ft.tolerance/((1<<ft.maxZoom)*ft.extent),2),Le=[],ot=Qe.id;if(ft.promoteId?ot=Qe.properties[ft.promoteId]:ft.generateId&&(ot=ct||0),Nt==="Point")Qt(Et,Le);else if(Nt==="MultiPoint")for(var ut=0;ut<Et.length;ut++)Qt(Et[ut],Le);else if(Nt==="LineString")Bt(Et,Le,Pe,!1);else if(Nt==="MultiLineString")if(ft.lineMetrics){for(ut=0;ut<Et.length;ut++)Le=[],Bt(Et[ut],Le,Pe,!1),it.push(ze(ot,"LineString",Le,Qe.properties));return}else Ct(Et,Le,Pe,!1);else if(Nt==="Polygon")Ct(Et,Le,Pe,!0);else if(Nt==="MultiPolygon")for(ut=0;ut<Et.length;ut++){var pt=[];Ct(Et[ut],pt,Pe,!0),Le.push(pt)}else if(Nt==="GeometryCollection"){for(ut=0;ut<Qe.geometry.geometries.length;ut++)Rt(it,{id:ot,geometry:Qe.geometry.geometries[ut],properties:Qe.properties},ft,ct);return}else throw new Error("Input data is not a valid GeoJSON object.");it.push(ze(ot,Nt,Le,Qe.properties))}}function Qt(it,Qe){Qe.push(Kt(it[0])),Qe.push(Ot(it[1])),Qe.push(0)}function Bt(it,Qe,ft,ct){for(var Et,Nt,Pe=0,Le=0;Le<it.length;Le++){var ot=Kt(it[Le][0]),ut=Ot(it[Le][1]);Qe.push(ot),Qe.push(ut),Qe.push(0),Le>0&&(ct?Pe+=(Et*ut-ot*Nt)/2:Pe+=Math.sqrt(Math.pow(ot-Et,2)+Math.pow(ut-Nt,2))),Et=ot,Nt=ut}var pt=Qe.length-3;Qe[2]=1,Ze(Qe,0,pt,ft),Qe[pt+2]=1,Qe.size=Math.abs(Pe),Qe.start=0,Qe.end=Qe.size}function Ct(it,Qe,ft,ct){for(var Et=0;Et<it.length;Et++){var Nt=[];Bt(it[Et],Nt,ft,ct),Qe.push(Nt)}}function Kt(it){return it/360+.5}function Ot(it){var Qe=Math.sin(it*Math.PI/180),ft=.5-.25*Math.log((1+Qe)/(1-Qe))/Math.PI;return ft<0?0:ft>1?1:ft}function St(it,Qe,ft,ct,Et,Nt,Pe,Le){if(ft/=Qe,ct/=Qe,Nt>=ft&&Pe<ct)return it;if(Pe<ft||Nt>=ct)return null;for(var ot=[],ut=0;ut<it.length;ut++){var pt=it[ut],Pt=pt.geometry,xt=pt.type,Lt=Et===0?pt.minX:pt.minY,Zt=Et===0?pt.maxX:pt.maxY;if(Lt>=ft&&Zt<ct){ot.push(pt);continue}else if(Zt<ft||Lt>=ct)continue;var ur=[];if(xt==="Point"||xt==="MultiPoint")Xe(Pt,ur,ft,ct,Et);else if(xt==="LineString")at(Pt,ur,ft,ct,Et,!1,Le.lineMetrics);else if(xt==="MultiLineString")Ee(Pt,ur,ft,ct,Et,!1);else if(xt==="Polygon")Ee(Pt,ur,ft,ct,Et,!0);else if(xt==="MultiPolygon")for(var Pr=0;Pr<Pt.length;Pr++){var Ar=[];Ee(Pt[Pr],Ar,ft,ct,Et,!0),Ar.length&&ur.push(Ar)}if(ur.length){if(Le.lineMetrics&&xt==="LineString"){for(Pr=0;Pr<ur.length;Pr++)ot.push(ze(pt.id,xt,ur[Pr],pt.tags));continue}(xt==="LineString"||xt==="MultiLineString")&&(ur.length===1?(xt="LineString",ur=ur[0]):xt="MultiLineString"),(xt==="Point"||xt==="MultiPoint")&&(xt=ur.length===3?"Point":"MultiPoint"),ot.push(ze(pt.id,xt,ur,pt.tags))}}return ot.length?ot:null}function Xe(it,Qe,ft,ct,Et){for(var Nt=0;Nt<it.length;Nt+=3){var Pe=it[Nt+Et];Pe>=ft&&Pe<=ct&&(Qe.push(it[Nt]),Qe.push(it[Nt+1]),Qe.push(it[Nt+2]))}}function at(it,Qe,ft,ct,Et,Nt,Pe){for(var Le=We(it),ot=Et===0?Ke:et,ut=it.start,pt,Pt,xt=0;xt<it.length-3;xt+=3){var Lt=it[xt],Zt=it[xt+1],ur=it[xt+2],Pr=it[xt+3],Ar=it[xt+4],kr=Et===0?Lt:Zt,Zr=Et===0?Pr:Ar,lr=!1;Pe&&(pt=Math.sqrt(Math.pow(Lt-Pr,2)+Math.pow(Zt-Ar,2))),kr<ft?Zr>ft&&(Pt=ot(Le,Lt,Zt,Pr,Ar,ft),Pe&&(Le.start=ut+pt*Pt)):kr>ct?Zr<ct&&(Pt=ot(Le,Lt,Zt,Pr,Ar,ct),Pe&&(Le.start=ut+pt*Pt)):He(Le,Lt,Zt,ur),Zr<ft&&kr>=ft&&(Pt=ot(Le,Lt,Zt,Pr,Ar,ft),lr=!0),Zr>ct&&kr<=ct&&(Pt=ot(Le,Lt,Zt,Pr,Ar,ct),lr=!0),!Nt&&lr&&(Pe&&(Le.end=ut+pt*Pt),Qe.push(Le),Le=We(it)),Pe&&(ut+=pt)}var br=it.length-3;Lt=it[br],Zt=it[br+1],ur=it[br+2],kr=Et===0?Lt:Zt,kr>=ft&&kr<=ct&&He(Le,Lt,Zt,ur),br=Le.length-3,Nt&&br>=3&&(Le[br]!==Le[0]||Le[br+1]!==Le[1])&&He(Le,Le[0],Le[1],Le[2]),Le.length&&Qe.push(Le)}function We(it){var Qe=[];return Qe.size=it.size,Qe.start=it.start,Qe.end=it.end,Qe}function Ee(it,Qe,ft,ct,Et,Nt){for(var Pe=0;Pe<it.length;Pe++)at(it[Pe],Qe,ft,ct,Et,Nt,!1)}function He(it,Qe,ft,ct){it.push(Qe),it.push(ft),it.push(ct)}function Ke(it,Qe,ft,ct,Et,Nt){var Pe=(Nt-Qe)/(ct-Qe);return it.push(Nt),it.push(ft+(Et-ft)*Pe),it.push(1),Pe}function et(it,Qe,ft,ct,Et,Nt){var Pe=(Nt-ft)/(Et-ft);return it.push(Qe+(ct-Qe)*Pe),it.push(Nt),it.push(1),Pe}function At(it,Qe){var ft=Qe.buffer/Qe.extent,ct=it,Et=St(it,1,-1-ft,ft,0,-1,2,Qe),Nt=St(it,1,1-ft,2+ft,0,-1,2,Qe);return(Et||Nt)&&(ct=St(it,1,-ft,1+ft,0,-1,2,Qe)||[],Et&&(ct=mt(Et,1).concat(ct)),Nt&&(ct=ct.concat(mt(Nt,-1)))),ct}function mt(it,Qe){for(var ft=[],ct=0;ct<it.length;ct++){var Et=it[ct],Nt=Et.type,Pe;if(Nt==="Point"||Nt==="MultiPoint"||Nt==="LineString")Pe=Mt(Et.geometry,Qe);else if(Nt==="MultiLineString"||Nt==="Polygon"){Pe=[];for(var Le=0;Le<Et.geometry.length;Le++)Pe.push(Mt(Et.geometry[Le],Qe))}else if(Nt==="MultiPolygon")for(Pe=[],Le=0;Le<Et.geometry.length;Le++){for(var ot=[],ut=0;ut<Et.geometry[Le].length;ut++)ot.push(Mt(Et.geometry[Le][ut],Qe));Pe.push(ot)}ft.push(ze(Et.id,Nt,Pe,Et.tags))}return ft}function Mt(it,Qe){var ft=[];ft.size=it.size,it.start!==void 0&&(ft.start=it.start,ft.end=it.end);for(var ct=0;ct<it.length;ct+=3)ft.push(it[ct]+Qe,it[ct+1],it[ct+2]);return ft}function Gt(it,Qe){if(it.transformed)return it;var ft=1<<it.z,ct=it.x,Et=it.y,Nt,Pe,Le;for(Nt=0;Nt<it.features.length;Nt++){var ot=it.features[Nt],ut=ot.geometry,pt=ot.type;if(ot.geometry=[],pt===1)for(Pe=0;Pe<ut.length;Pe+=2)ot.geometry.push(zt(ut[Pe],ut[Pe+1],Qe,ft,ct,Et));else for(Pe=0;Pe<ut.length;Pe++){var Pt=[];for(Le=0;Le<ut[Pe].length;Le+=2)Pt.push(zt(ut[Pe][Le],ut[Pe][Le+1],Qe,ft,ct,Et));ot.geometry.push(Pt)}}return it.transformed=!0,it}function zt(it,Qe,ft,ct,Et,Nt){return[Math.round(ft*(it*ct-Et)),Math.round(ft*(Qe*ct-Nt))]}function Ht(it,Qe,ft,ct,Et){for(var Nt=Qe===Et.maxZoom?0:Et.tolerance/((1<<Qe)*Et.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ft,y:ct,z:Qe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Le=0;Le<it.length;Le++){Pe.numFeatures++,Xt(Pe,it[Le],Nt,Et);var ot=it[Le].minX,ut=it[Le].minY,pt=it[Le].maxX,Pt=it[Le].maxY;ot<Pe.minX&&(Pe.minX=ot),ut<Pe.minY&&(Pe.minY=ut),pt>Pe.maxX&&(Pe.maxX=pt),Pt>Pe.maxY&&(Pe.maxY=Pt)}return Pe}function Xt(it,Qe,ft,ct){var Et=Qe.geometry,Nt=Qe.type,Pe=[];if(Nt==="Point"||Nt==="MultiPoint")for(var Le=0;Le<Et.length;Le+=3)Pe.push(Et[Le]),Pe.push(Et[Le+1]),it.numPoints++,it.numSimplified++;else if(Nt==="LineString")Wt(Pe,Et,it,ft,!1,!1);else if(Nt==="MultiLineString"||Nt==="Polygon")for(Le=0;Le<Et.length;Le++)Wt(Pe,Et[Le],it,ft,Nt==="Polygon",Le===0);else if(Nt==="MultiPolygon")for(var ot=0;ot<Et.length;ot++){var ut=Et[ot];for(Le=0;Le<ut.length;Le++)Wt(Pe,ut[Le],it,ft,!0,Le===0)}if(Pe.length){var pt=Qe.tags||null;if(Nt==="LineString"&&ct.lineMetrics){pt={};for(var Pt in Qe.tags)pt[Pt]=Qe.tags[Pt];pt.mapbox_clip_start=Et.start/Et.size,pt.mapbox_clip_end=Et.end/Et.size}var xt={geometry:Pe,type:Nt==="Polygon"||Nt==="MultiPolygon"?3:Nt==="LineString"||Nt==="MultiLineString"?2:1,tags:pt};Qe.id!==null&&(xt.id=Qe.id),it.features.push(xt)}}function Wt(it,Qe,ft,ct,Et,Nt){var Pe=ct*ct;if(ct>0&&Qe.size<(Et?Pe:ct)){ft.numPoints+=Qe.length/3;return}for(var Le=[],ot=0;ot<Qe.length;ot+=3)(ct===0||Qe[ot+2]>Pe)&&(ft.numSimplified++,Le.push(Qe[ot]),Le.push(Qe[ot+1])),ft.numPoints++;Et&&sr(Le,Nt),it.push(Le)}function sr(it,Qe){for(var ft=0,ct=0,Et=it.length,Nt=Et-2;ct<Et;Nt=ct,ct+=2)ft+=(it[ct]-it[Nt])*(it[ct+1]+it[Nt+1]);if(ft>0===Qe)for(ct=0,Et=it.length;ct<Et/2;ct+=2){var Pe=it[ct],Le=it[ct+1];it[ct]=it[Et-2-ct],it[ct+1]=it[Et-1-ct],it[Et-2-ct]=Pe,it[Et-1-ct]=Le}}function Gr(it,Qe){return new cn(it,Qe)}function cn(it,Qe){Qe=this.options=st(Object.create(this.options),Qe);var ft=Qe.debug;if(ft&&console.time("preprocess data"),Qe.maxZoom<0||Qe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Qe.promoteId&&Qe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ct=dt(it,Qe);this.tiles={},this.tileCoords=[],ft&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Qe.indexMaxZoom,Qe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ct=At(ct,Qe),ct.length&&this.splitTile(ct,0,0,0),ft&&(ct.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}cn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},cn.prototype.splitTile=function(it,Qe,ft,ct,Et,Nt,Pe){for(var Le=[it,Qe,ft,ct],ot=this.options,ut=ot.debug;Le.length;){ct=Le.pop(),ft=Le.pop(),Qe=Le.pop(),it=Le.pop();var pt=1<<Qe,Pt=en(Qe,ft,ct),xt=this.tiles[Pt];if(!xt&&(ut>1&&console.time("creation"),xt=this.tiles[Pt]=Ht(it,Qe,ft,ct,ot),this.tileCoords.push({z:Qe,x:ft,y:ct}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Qe,ft,ct,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));var Lt="z"+Qe;this.stats[Lt]=(this.stats[Lt]||0)+1,this.total++}if(xt.source=it,Et){if(Qe===ot.maxZoom||Qe===Et)continue;var Zt=1<<Et-Qe;if(ft!==Math.floor(Nt/Zt)||ct!==Math.floor(Pe/Zt))continue}else if(Qe===ot.indexMaxZoom||xt.numPoints<=ot.indexMaxPoints)continue;if(xt.source=null,it.length!==0){ut>1&&console.time("clipping");var ur=.5*ot.buffer/ot.extent,Pr=.5-ur,Ar=.5+ur,kr=1+ur,Zr,lr,br,Or,Hr,Lr;Zr=lr=br=Or=null,Hr=St(it,pt,ft-ur,ft+Ar,0,xt.minX,xt.maxX,ot),Lr=St(it,pt,ft+Pr,ft+kr,0,xt.minX,xt.maxX,ot),it=null,Hr&&(Zr=St(Hr,pt,ct-ur,ct+Ar,1,xt.minY,xt.maxY,ot),lr=St(Hr,pt,ct+Pr,ct+kr,1,xt.minY,xt.maxY,ot),Hr=null),Lr&&(br=St(Lr,pt,ct-ur,ct+Ar,1,xt.minY,xt.maxY,ot),Or=St(Lr,pt,ct+Pr,ct+kr,1,xt.minY,xt.maxY,ot),Lr=null),ut>1&&console.timeEnd("clipping"),Le.push(Zr||[],Qe+1,ft*2,ct*2),Le.push(lr||[],Qe+1,ft*2,ct*2+1),Le.push(br||[],Qe+1,ft*2+1,ct*2),Le.push(Or||[],Qe+1,ft*2+1,ct*2+1)}}},cn.prototype.getTile=function(it,Qe,ft){var ct=this.options,Et=ct.extent,Nt=ct.debug;if(it<0||it>24)return null;var Pe=1<<it;Qe=(Qe%Pe+Pe)%Pe;var Le=en(it,Qe,ft);if(this.tiles[Le])return Gt(this.tiles[Le],Et);Nt>1&&console.log("drilling down to z%d-%d-%d",it,Qe,ft);for(var ot=it,ut=Qe,pt=ft,Pt;!Pt&&ot>0;)ot--,ut=Math.floor(ut/2),pt=Math.floor(pt/2),Pt=this.tiles[en(ot,ut,pt)];return!Pt||!Pt.source?null:(Nt>1&&console.log("found parent tile z%d-%d-%d",ot,ut,pt),Nt>1&&console.time("drilling down"),this.splitTile(Pt.source,ot,ut,pt,it,Qe,ft),Nt>1&&console.timeEnd("drilling down"),this.tiles[Le]?Gt(this.tiles[Le],Et):null)};function en(it,Qe,ft){return((1<<it)*ft+Qe)*32+it}function st(it,Qe){for(var ft in Qe)it[ft]=Qe[ft];return it}function rr(it,Qe){var ft=it.tileID.canonical;if(!this._geoJSONIndex)return Qe(null,null);var ct=this._geoJSONIndex.getTile(ft.z,ft.x,ft.y);if(!ct)return Qe(null,null);var Et=new w(ct.features),Nt=P(Et);(Nt.byteOffset!==0||Nt.byteLength!==Nt.buffer.byteLength)&&(Nt=new Uint8Array(Nt)),Qe(null,{vectorTile:Et,rawData:Nt.buffer})}var er=function(it){function Qe(ft,ct,Et,Nt){it.call(this,ft,ct,Et,rr),Nt&&(this.loadGeoJSON=Nt)}return it&&(Qe.__proto__=it),Qe.prototype=Object.create(it&&it.prototype),Qe.prototype.constructor=Qe,Qe.prototype.loadData=function(ct,Et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Et,this._pendingLoadDataParams=ct,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Qe.prototype._loadData=function(){var ct=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Et=this._pendingCallback,Nt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=Nt&&Nt.request&&Nt.request.collectResourceTiming?new e.RequestPerformance(Nt.request):!1;this.loadGeoJSON(Nt,function(Le,ot){if(Le||!ot)return Et(Le);if(typeof ot!="object")return Et(new Error("Input data given to '"+Nt.source+"' is not a valid GeoJSON object."));l(ot,!0);try{ct._geoJSONIndex=Nt.cluster?new se(jt(Nt)).load(ot.features):Gr(ot,Nt.geojsonVtOptions)}catch(Pt){return Et(Pt)}ct.loaded={};var ut={};if(Pe){var pt=Pe.finish();pt&&(ut.resourceTiming={},ut.resourceTiming[Nt.source]=JSON.parse(JSON.stringify(pt)))}Et(null,ut)})}},Qe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Qe.prototype.reloadTile=function(ct,Et){var Nt=this.loaded,Pe=ct.uid;return Nt&&Nt[Pe]?it.prototype.reloadTile.call(this,ct,Et):this.loadTile(ct,Et)},Qe.prototype.loadGeoJSON=function(ct,Et){if(ct.request)e.getJSON(ct.request,Et);else if(typeof ct.data=="string")try{return Et(null,JSON.parse(ct.data))}catch{return Et(new Error("Input data given to '"+ct.source+"' is not a valid GeoJSON object."))}else return Et(new Error("Input data given to '"+ct.source+"' is not a valid GeoJSON object."))},Qe.prototype.removeSource=function(ct,Et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Et()},Qe.prototype.getClusterExpansionZoom=function(ct,Et){try{Et(null,this._geoJSONIndex.getClusterExpansionZoom(ct.clusterId))}catch(Nt){Et(Nt)}},Qe.prototype.getClusterChildren=function(ct,Et){try{Et(null,this._geoJSONIndex.getChildren(ct.clusterId))}catch(Nt){Et(Nt)}},Qe.prototype.getClusterLeaves=function(ct,Et){try{Et(null,this._geoJSONIndex.getLeaves(ct.clusterId,ct.limit,ct.offset))}catch(Nt){Et(Nt)}},Qe}(d);function jt(it){var Qe=it.superclusterOptions,ft=it.clusterProperties;if(!ft||!Qe)return Qe;for(var ct={},Et={},Nt={accumulated:null,zoom:0},Pe={properties:null},Le=Object.keys(ft),ot=0,ut=Le;ot<ut.length;ot+=1){var pt=ut[ot],Pt=ft[pt],xt=Pt[0],Lt=Pt[1],Zt=e.createExpression(Lt),ur=e.createExpression(typeof xt=="string"?[xt,["accumulated"],["get",pt]]:xt);ct[pt]=Zt.value,Et[pt]=ur.value}return Qe.map=function(Pr){Pe.properties=Pr;for(var Ar={},kr=0,Zr=Le;kr<Zr.length;kr+=1){var lr=Zr[kr];Ar[lr]=ct[lr].evaluate(Nt,Pe)}return Ar},Qe.reduce=function(Pr,Ar){Pe.properties=Ar;for(var kr=0,Zr=Le;kr<Zr.length;kr+=1){var lr=Zr[kr];Nt.accumulated=Pr[lr],Pr[lr]=Et[lr].evaluate(Nt,Pe)}},Qe}var Mr=function(Qe){var ft=this;this.self=Qe,this.actor=new e.Actor(Qe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:er},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ct,Et){if(ft.workerSourceTypes[ct])throw new Error('Worker source with name "'+ct+'" already registered.');ft.workerSourceTypes[ct]=Et},this.self.registerRTLTextPlugin=function(ct){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ct.applyArabicShaping,e.plugin.processBidirectionalText=ct.processBidirectionalText,e.plugin.processStyledBidirectionalText=ct.processStyledBidirectionalText}};return Mr.prototype.setReferrer=function(Qe,ft){this.referrer=ft},Mr.prototype.setImages=function(Qe,ft,ct){this.availableImages[Qe]=ft;for(var Et in this.workerSources[Qe]){var Nt=this.workerSources[Qe][Et];for(var Pe in Nt)Nt[Pe].availableImages=ft}ct()},Mr.prototype.setLayers=function(Qe,ft,ct){this.getLayerIndex(Qe).replace(ft),ct()},Mr.prototype.updateLayers=function(Qe,ft,ct){this.getLayerIndex(Qe).update(ft.layers,ft.removedIds),ct()},Mr.prototype.loadTile=function(Qe,ft,ct){this.getWorkerSource(Qe,ft.type,ft.source).loadTile(ft,ct)},Mr.prototype.loadDEMTile=function(Qe,ft,ct){this.getDEMWorkerSource(Qe,ft.source).loadTile(ft,ct)},Mr.prototype.reloadTile=function(Qe,ft,ct){this.getWorkerSource(Qe,ft.type,ft.source).reloadTile(ft,ct)},Mr.prototype.abortTile=function(Qe,ft,ct){this.getWorkerSource(Qe,ft.type,ft.source).abortTile(ft,ct)},Mr.prototype.removeTile=function(Qe,ft,ct){this.getWorkerSource(Qe,ft.type,ft.source).removeTile(ft,ct)},Mr.prototype.removeDEMTile=function(Qe,ft){this.getDEMWorkerSource(Qe,ft.source).removeTile(ft)},Mr.prototype.removeSource=function(Qe,ft,ct){if(!(!this.workerSources[Qe]||!this.workerSources[Qe][ft.type]||!this.workerSources[Qe][ft.type][ft.source])){var Et=this.workerSources[Qe][ft.type][ft.source];delete this.workerSources[Qe][ft.type][ft.source],Et.removeSource!==void 0?Et.removeSource(ft,ct):ct()}},Mr.prototype.loadWorkerSource=function(Qe,ft,ct){try{this.self.importScripts(ft.url),ct()}catch(Et){ct(Et.toString())}},Mr.prototype.syncRTLPluginState=function(Qe,ft,ct){try{e.plugin.setState(ft);var Et=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Et!=null){this.self.importScripts(Et);var Nt=e.plugin.isParsed(),Pe=Nt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Et);ct(Pe,Nt)}}catch(Le){ct(Le.toString())}},Mr.prototype.getAvailableImages=function(Qe){var ft=this.availableImages[Qe];return ft||(ft=[]),ft},Mr.prototype.getLayerIndex=function(Qe){var ft=this.layerIndexes[Qe];return ft||(ft=this.layerIndexes[Qe]=new r),ft},Mr.prototype.getWorkerSource=function(Qe,ft,ct){var Et=this;if(this.workerSources[Qe]||(this.workerSources[Qe]={}),this.workerSources[Qe][ft]||(this.workerSources[Qe][ft]={}),!this.workerSources[Qe][ft][ct]){var Nt={send:function(Pe,Le,ot){Et.actor.send(Pe,Le,ot,Qe)}};this.workerSources[Qe][ft][ct]=new this.workerSourceTypes[ft](Nt,this.getLayerIndex(Qe),this.getAvailableImages(Qe))}return this.workerSources[Qe][ft][ct]},Mr.prototype.getDEMWorkerSource=function(Qe,ft){return this.demWorkerSources[Qe]||(this.demWorkerSources[Qe]={}),this.demWorkerSources[Qe][ft]||(this.demWorkerSources[Qe][ft]=new m),this.demWorkerSources[Qe][ft]},Mr.prototype.enforceCacheSizeLimit=function(Qe,ft){e.enforceCacheSizeLimit(ft)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Mr(e.window)),Mr}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(ce){ce.exports?ce.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=pe);function W(Xr){return!pe(Xr)}function pe(Xr){if(!$())return"not a browser";if(!de())return"insufficent Array support";if(!ke())return"insufficient Function support";if(!Fe())return"insufficient Object support";if(!Je())return"insufficient JSON support";if(!ht())return"insufficient worker support";if(!Dt())return"insufficient Uint8ClampedArray support";if(!tr())return"insufficient ArrayBuffer support";if(!pr())return"insufficient Canvas/getImageData support";if(!Rr(Xr&&Xr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function $(){return typeof window<"u"&&typeof document<"u"}function de(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function ke(){return Function.prototype&&Function.prototype.bind}function Fe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Je(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ht(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Xr=new Blob([""],{type:"text/javascript"}),rn=URL.createObjectURL(Xr),xn,Fn;try{Fn=new Worker(rn),xn=!0}catch{xn=!1}return Fn&&Fn.terminate(),URL.revokeObjectURL(rn),xn}function Dt(){return"Uint8ClampedArray"in window}function tr(){return ArrayBuffer.isView}function pr(){var Xr=document.createElement("canvas");Xr.width=Xr.height=1;var rn=Xr.getContext("2d");if(!rn)return!1;var xn=rn.getImageData(0,0,1,1);return xn&&xn.width===Xr.width}var yr={};function Rr(Xr){return yr[Xr]===void 0&&(yr[Xr]=$r(Xr)),yr[Xr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Kr(Xr){var rn=document.createElement("canvas"),xn=Object.create(W.webGLContextAttributes);return xn.failIfMajorPerformanceCaveat=Xr,rn.probablySupportsContext?rn.probablySupportsContext("webgl",xn)||rn.probablySupportsContext("experimental-webgl",xn):rn.supportsContext?rn.supportsContext("webgl",xn)||rn.supportsContext("experimental-webgl",xn):rn.getContext("webgl",xn)||rn.getContext("experimental-webgl",xn)}function $r(Xr){var rn=Kr(Xr);if(!rn)return!1;var xn=rn.createShader(rn.VERTEX_SHADER);return!xn||rn.isContextLost()?!1:(rn.shaderSource(xn,"void main() {}"),rn.compileShader(xn),rn.getShaderParameter(xn,rn.COMPILE_STATUS)===!0)}}),i={};i.create=function(ce,W,pe){var $=e.window.document.createElement(ce);return W!==void 0&&($.className=W),pe&&pe.appendChild($),$},i.createNS=function(ce,W){var pe=e.window.document.createElementNS(ce,W);return pe};var n=e.window.document.documentElement.style;function r(ce){if(!n)return ce[0];for(var W=0;W<ce.length;W++)if(ce[W]in n)return ce[W];return ce[0]}var v=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;i.disableDrag=function(){n&&v&&(s=n[v],n[v]="none")},i.enableDrag=function(){n&&v&&(n[v]=s)};var o=r(["transform","WebkitTransform"]);i.setTransform=function(ce,W){ce.style[o]=W};var b=!1;try{var g=Object.defineProperty({},"passive",{get:function(){b=!0}});e.window.addEventListener("test",g,g),e.window.removeEventListener("test",g,g)}catch{b=!1}i.addEventListener=function(ce,W,pe,$){$===void 0&&($={}),"passive"in $&&b?ce.addEventListener(W,pe,$):ce.addEventListener(W,pe,$.capture)},i.removeEventListener=function(ce,W,pe,$){$===void 0&&($={}),"passive"in $&&b?ce.removeEventListener(W,pe,$):ce.removeEventListener(W,pe,$.capture)};var d=function(ce){ce.preventDefault(),ce.stopPropagation(),e.window.removeEventListener("click",d,!0)};i.suppressClick=function(){e.window.addEventListener("click",d,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",d,!0)},0)},i.mousePos=function(ce,W){var pe=ce.getBoundingClientRect();return new e.Point(W.clientX-pe.left-ce.clientLeft,W.clientY-pe.top-ce.clientTop)},i.touchPos=function(ce,W){for(var pe=ce.getBoundingClientRect(),$=[],de=0;de<W.length;de++)$.push(new e.Point(W[de].clientX-pe.left-ce.clientLeft,W[de].clientY-pe.top-ce.clientTop));return $},i.mouseButton=function(ce){return typeof e.window.InstallTrigger<"u"&&ce.button===2&&ce.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ce.button},i.remove=function(ce){ce.parentNode&&ce.parentNode.removeChild(ce)};function c(ce,W,pe){var $,de,ke,Fe=e.browser.devicePixelRatio>1?"@2x":"",Je=e.getJSON(W.transformRequest(W.normalizeSpriteURL(ce,Fe,".json"),e.ResourceType.SpriteJSON),function(tr,pr){Je=null,ke||(ke=tr,$=pr,Dt())}),ht=e.getImage(W.transformRequest(W.normalizeSpriteURL(ce,Fe,".png"),e.ResourceType.SpriteImage),function(tr,pr){ht=null,ke||(ke=tr,de=pr,Dt())});function Dt(){if(ke)pe(ke);else if($&&de){var tr=e.browser.getImageData(de),pr={};for(var yr in $){var Rr=$[yr],Kr=Rr.width,$r=Rr.height,Xr=Rr.x,rn=Rr.y,xn=Rr.sdf,Fn=Rr.pixelRatio,Gn=Rr.stretchX,oa=Rr.stretchY,fa=Rr.content,la=new e.RGBAImage({width:Kr,height:$r});e.RGBAImage.copy(tr,la,{x:Xr,y:rn},{x:0,y:0},{width:Kr,height:$r}),pr[yr]={data:la,pixelRatio:Fn,sdf:xn,stretchX:Gn,stretchY:oa,content:fa}}pe(null,pr)}}return{cancel:function(){Je&&(Je.cancel(),Je=null),ht&&(ht.cancel(),ht=null)}}}function m(ce){var W=ce.userImage;if(W&&W.render){var pe=W.render();if(pe)return ce.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var l=1,y=function(ce){function W(){ce.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function($){if(this.loaded!==$&&(this.loaded=$,$)){for(var de=0,ke=this.requestors;de<ke.length;de+=1){var Fe=ke[de],Je=Fe.ids,ht=Fe.callback;this._notify(Je,ht)}this.requestors=[]}},W.prototype.getImage=function($){return this.images[$]},W.prototype.addImage=function($,de){this._validate($,de)&&(this.images[$]=de)},W.prototype._validate=function($,de){var ke=!0;return this._validateStretch(de.stretchX,de.data&&de.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchX" value'))),ke=!1),this._validateStretch(de.stretchY,de.data&&de.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchY" value'))),ke=!1),this._validateContent(de.content,de)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "content" value'))),ke=!1),ke},W.prototype._validateStretch=function($,de){if(!$)return!0;for(var ke=0,Fe=0,Je=$;Fe<Je.length;Fe+=1){var ht=Je[Fe];if(ht[0]<ke||ht[1]<ht[0]||de<ht[1])return!1;ke=ht[1]}return!0},W.prototype._validateContent=function($,de){return $?!($.length!==4||$[0]<0||de.data.width<$[0]||$[1]<0||de.data.height<$[1]||$[2]<0||de.data.width<$[2]||$[3]<0||de.data.height<$[3]||$[2]<$[0]||$[3]<$[1]):!0},W.prototype.updateImage=function($,de){var ke=this.images[$];de.version=ke.version+1,this.images[$]=de,this.updatedImages[$]=!0},W.prototype.removeImage=function($){var de=this.images[$];delete this.images[$],delete this.patterns[$],de.userImage&&de.userImage.onRemove&&de.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function($,de){var ke=!0;if(!this.isLoaded())for(var Fe=0,Je=$;Fe<Je.length;Fe+=1){var ht=Je[Fe];this.images[ht]||(ke=!1)}this.isLoaded()||ke?this._notify($,de):this.requestors.push({ids:$,callback:de})},W.prototype._notify=function($,de){for(var ke={},Fe=0,Je=$;Fe<Je.length;Fe+=1){var ht=Je[Fe];this.images[ht]||this.fire(new e.Event("styleimagemissing",{id:ht}));var Dt=this.images[ht];Dt?ke[ht]={data:Dt.data.clone(),pixelRatio:Dt.pixelRatio,sdf:Dt.sdf,version:Dt.version,stretchX:Dt.stretchX,stretchY:Dt.stretchY,content:Dt.content,hasRenderCallback:Boolean(Dt.userImage&&Dt.userImage.render)}:e.warnOnce('Image "'+ht+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}de(null,ke)},W.prototype.getPixelSize=function(){var $=this.atlasImage,de=$.width,ke=$.height;return{width:de,height:ke}},W.prototype.getPattern=function($){var de=this.patterns[$],ke=this.getImage($);if(!ke)return null;if(de&&de.position.version===ke.version)return de.position;if(de)de.position.version=ke.version;else{var Fe=ke.data.width+l*2,Je=ke.data.height+l*2,ht={w:Fe,h:Je,x:0,y:0},Dt=new e.ImagePosition(ht,ke);this.patterns[$]={bin:ht,position:Dt}}return this._updatePatternAtlas(),this.patterns[$].position},W.prototype.bind=function($){var de=$.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture($,this.atlasImage,de.RGBA),this.atlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var $=[];for(var de in this.patterns)$.push(this.patterns[de].bin);var ke=e.potpack($),Fe=ke.w,Je=ke.h,ht=this.atlasImage;ht.resize({width:Fe||1,height:Je||1});for(var Dt in this.patterns){var tr=this.patterns[Dt],pr=tr.bin,yr=pr.x+l,Rr=pr.y+l,Kr=this.images[Dt].data,$r=Kr.width,Xr=Kr.height;e.RGBAImage.copy(Kr,ht,{x:0,y:0},{x:yr,y:Rr},{width:$r,height:Xr}),e.RGBAImage.copy(Kr,ht,{x:0,y:Xr-1},{x:yr,y:Rr-1},{width:$r,height:1}),e.RGBAImage.copy(Kr,ht,{x:0,y:0},{x:yr,y:Rr+Xr},{width:$r,height:1}),e.RGBAImage.copy(Kr,ht,{x:$r-1,y:0},{x:yr-1,y:Rr},{width:1,height:Xr}),e.RGBAImage.copy(Kr,ht,{x:0,y:0},{x:yr+$r,y:Rr},{width:1,height:Xr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function($){for(var de=0,ke=$;de<ke.length;de+=1){var Fe=ke[de];if(!this.callbackDispatchedThisFrame[Fe]){this.callbackDispatchedThisFrame[Fe]=!0;var Je=this.images[Fe],ht=m(Je);ht&&this.updateImage(Fe,Je)}}},W}(e.Evented);function u(ce,W,pe,$,de){var ke=W*256,Fe=ke+255,Je=$.transformRequest($.normalizeGlyphsURL(pe).replace("{fontstack}",ce).replace("{range}",ke+"-"+Fe),e.ResourceType.Glyphs);e.getArrayBuffer(Je,function(ht,Dt){if(ht)de(ht);else if(Dt){for(var tr={},pr=0,yr=e.parseGlyphPBF(Dt);pr<yr.length;pr+=1){var Rr=yr[pr];tr[Rr.id]=Rr}de(null,tr)}})}var A=w,_=w,p=1e20;function w(ce,W,pe,$,de,ke){this.fontSize=ce||24,this.buffer=W===void 0?3:W,this.cutoff=$||.25,this.fontFamily=de||"sans-serif",this.fontWeight=ke||"normal",this.radius=pe||8;var Fe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Fe*Fe),this.gridInner=new Float64Array(Fe*Fe),this.f=new Float64Array(Fe),this.d=new Float64Array(Fe),this.z=new Float64Array(Fe+1),this.v=new Int16Array(Fe),this.middle=Math.round(Fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}w.prototype.draw=function(ce){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ce,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),pe=new Uint8ClampedArray(this.size*this.size),$=0;$<this.size*this.size;$++){var de=W.data[$*4+3]/255;this.gridOuter[$]=de===1?0:de===0?p:Math.pow(Math.max(0,.5-de),2),this.gridInner[$]=de===1?p:de===0?0:Math.pow(Math.max(0,de-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),$=0;$<this.size*this.size;$++){var ke=this.gridOuter[$]-this.gridInner[$];pe[$]=Math.max(0,Math.min(255,Math.round(255-255*(ke/this.radius+this.cutoff))))}return pe};function h(ce,W,pe,$,de,ke,Fe){for(var Je=0;Je<W;Je++){for(var ht=0;ht<pe;ht++)$[ht]=ce[ht*W+Je];for(L($,de,ke,Fe,pe),ht=0;ht<pe;ht++)ce[ht*W+Je]=de[ht]}for(ht=0;ht<pe;ht++){for(Je=0;Je<W;Je++)$[Je]=ce[ht*W+Je];for(L($,de,ke,Fe,W),Je=0;Je<W;Je++)ce[ht*W+Je]=Math.sqrt(de[Je])}}function L(ce,W,pe,$,de){pe[0]=0,$[0]=-p,$[1]=+p;for(var ke=1,Fe=0;ke<de;ke++){for(var Je=(ce[ke]+ke*ke-(ce[pe[Fe]]+pe[Fe]*pe[Fe]))/(2*ke-2*pe[Fe]);Je<=$[Fe];)Fe--,Je=(ce[ke]+ke*ke-(ce[pe[Fe]]+pe[Fe]*pe[Fe]))/(2*ke-2*pe[Fe]);Fe++,pe[Fe]=ke,$[Fe]=Je,$[Fe+1]=+p}for(ke=0,Fe=0;ke<de;ke++){for(;$[Fe+1]<ke;)Fe++;W[ke]=(ke-pe[Fe])*(ke-pe[Fe])+ce[pe[Fe]]}}A.default=_;var E=function(W,pe){this.requestManager=W,this.localIdeographFontFamily=pe,this.entries={}};E.prototype.setURL=function(W){this.url=W},E.prototype.getGlyphs=function(W,pe){var $=this,de=[];for(var ke in W)for(var Fe=0,Je=W[ke];Fe<Je.length;Fe+=1){var ht=Je[Fe];de.push({stack:ke,id:ht})}e.asyncAll(de,function(Dt,tr){var pr=Dt.stack,yr=Dt.id,Rr=$.entries[pr];Rr||(Rr=$.entries[pr]={glyphs:{},requests:{},ranges:{}});var Kr=Rr.glyphs[yr];if(Kr!==void 0){tr(null,{stack:pr,id:yr,glyph:Kr});return}if(Kr=$._tinySDF(Rr,pr,yr),Kr){Rr.glyphs[yr]=Kr,tr(null,{stack:pr,id:yr,glyph:Kr});return}var $r=Math.floor(yr/256);if($r*256>65535){tr(new Error("glyphs > 65535 not supported"));return}if(Rr.ranges[$r]){tr(null,{stack:pr,id:yr,glyph:Kr});return}var Xr=Rr.requests[$r];Xr||(Xr=Rr.requests[$r]=[],E.loadGlyphRange(pr,$r,$.url,$.requestManager,function(rn,xn){if(xn){for(var Fn in xn)$._doesCharSupportLocalGlyph(+Fn)||(Rr.glyphs[+Fn]=xn[+Fn]);Rr.ranges[$r]=!0}for(var Gn=0,oa=Xr;Gn<oa.length;Gn+=1){var fa=oa[Gn];fa(rn,xn)}delete Rr.requests[$r]})),Xr.push(function(rn,xn){rn?tr(rn):xn&&tr(null,{stack:pr,id:yr,glyph:xn[yr]||null})})},function(Dt,tr){if(Dt)pe(Dt);else if(tr){for(var pr={},yr=0,Rr=tr;yr<Rr.length;yr+=1){var Kr=Rr[yr],$r=Kr.stack,Xr=Kr.id,rn=Kr.glyph;(pr[$r]||(pr[$r]={}))[Xr]=rn&&{id:rn.id,bitmap:rn.bitmap.clone(),metrics:rn.metrics}}pe(null,pr)}})},E.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},E.prototype._tinySDF=function(W,pe,$){var de=this.localIdeographFontFamily;if(!!de&&!!this._doesCharSupportLocalGlyph($)){var ke=W.tinySDF;if(!ke){var Fe="400";/bold/i.test(pe)?Fe="900":/medium/i.test(pe)?Fe="500":/light/i.test(pe)&&(Fe="200"),ke=W.tinySDF=new E.TinySDF(24,3,8,.25,de,Fe)}return{id:$,bitmap:new e.AlphaImage({width:30,height:30},ke.draw(String.fromCharCode($))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=u,E.TinySDF=A;var S=function(){this.specification=e.styleSpec.light.position};S.prototype.possiblyEvaluate=function(W,pe){return e.sphericalToCartesian(W.expression.evaluate(pe))},S.prototype.interpolate=function(W,pe,$){return{x:e.number(W.x,pe.x,$),y:e.number(W.y,pe.y,$),z:e.number(W.z,pe.z,$)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new S,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F="-transition",I=function(ce){function W(pe){ce.call(this),this._transitionable=new e.Transitionable(P),this.setLight(pe),this._transitioning=this._transitionable.untransitioned()}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function($,de){if(de===void 0&&(de={}),!this._validate(e.validateLight,$,de))for(var ke in $){var Fe=$[ke];e.endsWith(ke,F)?this._transitionable.setTransition(ke.slice(0,-F.length),Fe):this._transitionable.setValue(ke,Fe)}},W.prototype.updateTransitions=function($){this._transitioning=this._transitionable.transitioned($,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function($){this.properties=this._transitioning.possiblyEvaluate($)},W.prototype._validate=function($,de,ke){return ke&&ke.validate===!1?!1:e.emitValidationErrors(this,$.call(e.validateStyle,e.extend({value:de,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),D=function(W,pe){this.width=W,this.height=pe,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(W,pe){var $=W.join(",")+String(pe);return this.dashEntry[$]||(this.dashEntry[$]=this.addDash(W,pe)),this.dashEntry[$]},D.prototype.getDashRanges=function(W,pe,$){var de=W.length%2===1,ke=[],Fe=de?-W[W.length-1]*$:0,Je=W[0]*$,ht=!0;ke.push({left:Fe,right:Je,isDash:ht,zeroLength:W[0]===0});for(var Dt=W[0],tr=1;tr<W.length;tr++){ht=!ht;var pr=W[tr];Fe=Dt*$,Dt+=pr,Je=Dt*$,ke.push({left:Fe,right:Je,isDash:ht,zeroLength:pr===0})}return ke},D.prototype.addRoundDash=function(W,pe,$){for(var de=pe/2,ke=-$;ke<=$;ke++)for(var Fe=this.nextRow+$+ke,Je=this.width*Fe,ht=0,Dt=W[ht],tr=0;tr<this.width;tr++){tr/Dt.right>1&&(Dt=W[++ht]);var pr=Math.abs(tr-Dt.left),yr=Math.abs(tr-Dt.right),Rr=Math.min(pr,yr),Kr=void 0,$r=ke/$*(de+1);if(Dt.isDash){var Xr=de-Math.abs($r);Kr=Math.sqrt(Rr*Rr+Xr*Xr)}else Kr=de-Math.sqrt(Rr*Rr+$r*$r);this.data[Je+tr]=Math.max(0,Math.min(255,Kr+128))}},D.prototype.addRegularDash=function(W){for(var pe=W.length-1;pe>=0;--pe){var $=W[pe],de=W[pe+1];$.zeroLength?W.splice(pe,1):de&&de.isDash===$.isDash&&(de.left=$.left,W.splice(pe,1))}var ke=W[0],Fe=W[W.length-1];ke.isDash===Fe.isDash&&(ke.left=Fe.left-this.width,Fe.right=ke.right+this.width);for(var Je=this.width*this.nextRow,ht=0,Dt=W[ht],tr=0;tr<this.width;tr++){tr/Dt.right>1&&(Dt=W[++ht]);var pr=Math.abs(tr-Dt.left),yr=Math.abs(tr-Dt.right),Rr=Math.min(pr,yr),Kr=Dt.isDash?Rr:-Rr;this.data[Je+tr]=Math.max(0,Math.min(255,Kr+128))}},D.prototype.addDash=function(W,pe){var $=pe?7:0,de=2*$+1;if(this.nextRow+de>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ke=0,Fe=0;Fe<W.length;Fe++)ke+=W[Fe];if(ke!==0){var Je=this.width/ke,ht=this.getDashRanges(W,this.width,Je);pe?this.addRoundDash(ht,Je,$):this.addRegularDash(ht)}var Dt={y:(this.nextRow+$+.5)/this.height,height:2*$/this.height,width:ke};return this.nextRow+=de,this.dirty=!0,Dt},D.prototype.bind=function(W){var pe=W.gl;this.texture?(pe.bindTexture(pe.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,pe.texSubImage2D(pe.TEXTURE_2D,0,0,0,this.width,this.height,pe.ALPHA,pe.UNSIGNED_BYTE,this.data))):(this.texture=pe.createTexture(),pe.bindTexture(pe.TEXTURE_2D,this.texture),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.REPEAT),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.REPEAT),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),pe.texImage2D(pe.TEXTURE_2D,0,pe.ALPHA,this.width,this.height,0,pe.ALPHA,pe.UNSIGNED_BYTE,this.data))};var R=function ce(W,pe){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var $=this.workerPool.acquire(this.id),de=0;de<$.length;de++){var ke=$[de],Fe=new ce.Actor(ke,pe,this.id);Fe.name="Worker "+de,this.actors.push(Fe)}};R.prototype.broadcast=function(W,pe,$){$=$||function(){},e.asyncAll(this.actors,function(de,ke){de.send(W,pe,ke)},$)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function O(ce,W,pe){var $=function(de,ke){if(de)return pe(de);if(ke){var Fe=e.pick(e.extend(ke,ce),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ke.vector_layers&&(Fe.vectorLayers=ke.vector_layers,Fe.vectorLayerIds=Fe.vectorLayers.map(function(Je){return Je.id})),Fe.tiles=W.canonicalizeTileset(Fe,ce.url),pe(null,Fe)}};return ce.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(ce.url),e.ResourceType.Source),$):e.browser.frame(function(){return $(null,ce)})}var z=function(W,pe,$){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=pe||0,this.maxzoom=$||24};z.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},z.prototype.contains=function(W){var pe=Math.pow(2,W.z),$={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*pe),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*pe),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*pe),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*pe)},de=W.x>=$.minX&&W.x<$.maxX&&W.y>=$.minY&&W.y<$.maxY;return de};var H=function(ce){function W(pe,$,de,ke){if(ce.call(this),this.id=pe,this.dispatcher=de,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick($,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},$),this._collectResourceTiming=$.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ke)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(de,ke){$._tileJSONRequest=null,$._loaded=!0,de?$.fire(new e.ErrorEvent(de)):ke&&(e.extend($,ke),ke.bounds&&($.tileBounds=new z(ke.bounds,$.minzoom,$.maxzoom)),e.postTurnstileEvent(ke.tiles,$.map._requestManager._customAccessToken),e.postMapLoadEvent(ke.tiles,$.map._getMapId(),$.map._requestManager._skuToken,$.map._requestManager._customAccessToken),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function($,de){var ke=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme)),Fe={request:this.map._requestManager.transformRequest(ke,e.ResourceType.Tile),uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,tileSize:this.tileSize*$.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Fe.request.collectResourceTiming=this._collectResourceTiming,!$.actor||$.state==="expired"?($.actor=this.dispatcher.getActor(),$.request=$.actor.send("loadTile",Fe,Je.bind(this))):$.state==="loading"?$.reloadCallback=de:$.request=$.actor.send("reloadTile",Fe,Je.bind(this));function Je(ht,Dt){if(delete $.request,$.aborted)return de(null);if(ht&&ht.status!==404)return de(ht);Dt&&Dt.resourceTiming&&($.resourceTiming=Dt.resourceTiming),this.map._refreshExpiredTiles&&Dt&&$.setExpiryData(Dt),$.loadVectorData(Dt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),de(null),$.reloadCallback&&(this.loadTile($,$.reloadCallback),$.reloadCallback=null)}},W.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.actor&&$.actor.send("abortTile",{uid:$.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function($){$.unloadVectorData(),$.actor&&$.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),Y=function(ce){function W(pe,$,de,ke){ce.call(this),this.id=pe,this.dispatcher=de,this.setEventedParent(ke),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},$),e.extend(this,e.pick($,["url","scheme","tileSize"]))}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(de,ke){$._tileJSONRequest=null,$._loaded=!0,de?$.fire(new e.ErrorEvent(de)):ke&&(e.extend($,ke),ke.bounds&&($.tileBounds=new z(ke.bounds,$.minzoom,$.maxzoom)),e.postTurnstileEvent(ke.tiles),e.postMapLoadEvent(ke.tiles,$.map._getMapId(),$.map._requestManager._skuToken),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},W.prototype.loadTile=function($,de){var ke=this,Fe=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=e.getImage(this.map._requestManager.transformRequest(Fe,e.ResourceType.Tile),function(Je,ht){if(delete $.request,$.aborted)$.state="unloaded",de(null);else if(Je)$.state="errored",de(Je);else if(ht){ke.map._refreshExpiredTiles&&$.setExpiryData(ht),delete ht.cacheControl,delete ht.expires;var Dt=ke.map.painter.context,tr=Dt.gl;$.texture=ke.map.painter.getTileTexture(ht.width),$.texture?$.texture.update(ht,{useMipmap:!0}):($.texture=new e.Texture(Dt,ht,tr.RGBA,{useMipmap:!0}),$.texture.bind(tr.LINEAR,tr.CLAMP_TO_EDGE,tr.LINEAR_MIPMAP_NEAREST),Dt.extTextureFilterAnisotropic&&tr.texParameterf(tr.TEXTURE_2D,Dt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Dt.extTextureFilterAnisotropicMax)),$.state="loaded",e.cacheEntryPossiblyAdded(ke.dispatcher),de(null)}})},W.prototype.abortTile=function($,de){$.request&&($.request.cancel(),delete $.request),de()},W.prototype.unloadTile=function($,de){$.texture&&this.map.painter.saveTileTexture($.texture),de()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),ee=function(ce){function W(pe,$,de,ke){ce.call(this,pe,$,de,ke),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},$),this.encoding=$.encoding||"mapbox"}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function($,de){var ke=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=e.getImage(this.map._requestManager.transformRequest(ke,e.ResourceType.Tile),Fe.bind(this)),$.neighboringTiles=this._getNeighboringTiles($.tileID);function Fe(ht,Dt){if(delete $.request,$.aborted)$.state="unloaded",de(null);else if(ht)$.state="errored",de(ht);else if(Dt){this.map._refreshExpiredTiles&&$.setExpiryData(Dt),delete Dt.cacheControl,delete Dt.expires;var tr=e.window.ImageBitmap&&Dt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),pr=tr?Dt:e.browser.getImageData(Dt,1),yr={uid:$.uid,coord:$.tileID,source:this.id,rawImageData:pr,encoding:this.encoding};(!$.actor||$.state==="expired")&&($.actor=this.dispatcher.getActor(),$.actor.send("loadDEMTile",yr,Je.bind(this)))}}function Je(ht,Dt){ht&&($.state="errored",de(ht)),Dt&&($.dem=Dt,$.needsHillshadePrepare=!0,$.state="loaded",de(null))}},W.prototype._getNeighboringTiles=function($){var de=$.canonical,ke=Math.pow(2,de.z),Fe=(de.x-1+ke)%ke,Je=de.x===0?$.wrap-1:$.wrap,ht=(de.x+1+ke)%ke,Dt=de.x+1===ke?$.wrap+1:$.wrap,tr={};return tr[new e.OverscaledTileID($.overscaledZ,Je,de.z,Fe,de.y).key]={backfilled:!1},tr[new e.OverscaledTileID($.overscaledZ,Dt,de.z,ht,de.y).key]={backfilled:!1},de.y>0&&(tr[new e.OverscaledTileID($.overscaledZ,Je,de.z,Fe,de.y-1).key]={backfilled:!1},tr[new e.OverscaledTileID($.overscaledZ,$.wrap,de.z,de.x,de.y-1).key]={backfilled:!1},tr[new e.OverscaledTileID($.overscaledZ,Dt,de.z,ht,de.y-1).key]={backfilled:!1}),de.y+1<ke&&(tr[new e.OverscaledTileID($.overscaledZ,Je,de.z,Fe,de.y+1).key]={backfilled:!1},tr[new e.OverscaledTileID($.overscaledZ,$.wrap,de.z,de.x,de.y+1).key]={backfilled:!1},tr[new e.OverscaledTileID($.overscaledZ,Dt,de.z,ht,de.y+1).key]={backfilled:!1}),tr},W.prototype.unloadTile=function($){$.demTexture&&this.map.painter.saveTileTexture($.demTexture),$.fbo&&($.fbo.destroy(),delete $.fbo),$.dem&&delete $.dem,delete $.neighboringTiles,$.state="unloaded",$.actor&&$.actor.send("removeDEMTile",{uid:$.uid,source:this.id})},W}(Y),j=function(ce){function W(pe,$,de,ke){ce.call(this),this.id=pe,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=de.getActor(),this.setEventedParent(ke),this._data=$.data,this._options=e.extend({},$),this._collectResourceTiming=$.collectResourceTiming,this._resourceTiming=[],$.maxzoom!==void 0&&(this.maxzoom=$.maxzoom),$.type&&(this.type=$.type),$.attribution&&(this.attribution=$.attribution),this.promoteId=$.promoteId;var Fe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:$.cluster||!1,geojsonVtOptions:{buffer:($.buffer!==void 0?$.buffer:128)*Fe,tolerance:($.tolerance!==void 0?$.tolerance:.375)*Fe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:$.lineMetrics||!1,generateId:$.generateId||!1},superclusterOptions:{maxZoom:$.clusterMaxZoom!==void 0?Math.min($.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:($.clusterRadius||50)*Fe,log:!1,generateId:$.generateId||!1},clusterProperties:$.clusterProperties},$.workerOptions)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(de){if(de){$.fire(new e.ErrorEvent(de));return}var ke={dataType:"source",sourceDataType:"metadata"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(ke.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new e.Event("data",ke))})},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.setData=function($){var de=this;return this._data=$,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ke){if(ke){de.fire(new e.ErrorEvent(ke));return}var Fe={dataType:"source",sourceDataType:"content"};de._collectResourceTiming&&de._resourceTiming&&de._resourceTiming.length>0&&(Fe.resourceTiming=de._resourceTiming,de._resourceTiming=[]),de.fire(new e.Event("data",Fe))}),this},W.prototype.getClusterExpansionZoom=function($,de){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:$,source:this.id},de),this},W.prototype.getClusterChildren=function($,de){return this.actor.send("geojson.getClusterChildren",{clusterId:$,source:this.id},de),this},W.prototype.getClusterLeaves=function($,de,ke,Fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:$,limit:de,offset:ke},Fe),this},W.prototype._updateWorkerData=function($){var de=this;this._loaded=!1;var ke=e.extend({},this.workerOptions),Fe=this._data;typeof Fe=="string"?(ke.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Fe),e.ResourceType.Source),ke.request.collectResourceTiming=this._collectResourceTiming):ke.data=JSON.stringify(Fe),this.actor.send(this.type+".loadData",ke,function(Je,ht){de._removed||ht&&ht.abandoned||(de._loaded=!0,ht&&ht.resourceTiming&&ht.resourceTiming[de.id]&&(de._resourceTiming=ht.resourceTiming[de.id].slice(0)),de.actor.send(de.type+".coalesce",{source:ke.source},null),$(Je))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function($,de){var ke=this,Fe=$.actor?"reloadTile":"loadTile";$.actor=this.actor;var Je={type:this.type,uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};$.request=this.actor.send(Fe,Je,function(ht,Dt){return delete $.request,$.unloadVectorData(),$.aborted?de(null):ht?de(ht):($.loadVectorData(Dt,ke.map.painter,Fe==="reloadTile"),de(null))})},W.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.aborted=!0},W.prototype.unloadTile=function($){$.unloadVectorData(),this.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),X=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ae=function(ce){function W(pe,$,de,ke){ce.call(this),this.id=pe,this.dispatcher=de,this.coordinates=$.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ke),this.options=$}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.load=function($,de){var ke=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Fe,Je){ke._loaded=!0,Fe?ke.fire(new e.ErrorEvent(Fe)):Je&&(ke.image=Je,$&&(ke.coordinates=$),de&&de(),ke._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function($){var de=this;return!this.image||!$.url?this:(this.options.url=$.url,this.load($.coordinates,function(){de.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.setCoordinates=function($){var de=this;this.coordinates=$;var ke=$.map(e.MercatorCoordinate.fromLngLat);this.tileID=fe(ke),this.minzoom=this.maxzoom=this.tileID.z;var Fe=ke.map(function(Je){return de.tileID.getTilePoint(Je)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Fe[0].x,Fe[0].y,0,0),this._boundsArray.emplaceBack(Fe[1].x,Fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Fe[3].x,Fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Fe[2].x,Fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var $=this.map.painter.context,de=$.gl;this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture($,this.image,de.RGBA),this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE));for(var ke in this.tiles){var Fe=this.tiles[ke];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.loadTile=function($,de){this.tileID&&this.tileID.equals($.tileID.canonical)?(this.tiles[String($.tileID.wrap)]=$,$.buckets={},de(null)):($.state="errored",de(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function fe(ce){for(var W=1/0,pe=1/0,$=-1/0,de=-1/0,ke=0,Fe=ce;ke<Fe.length;ke+=1){var Je=Fe[ke];W=Math.min(W,Je.x),pe=Math.min(pe,Je.y),$=Math.max($,Je.x),de=Math.max(de,Je.y)}var ht=$-W,Dt=de-pe,tr=Math.max(ht,Dt),pr=Math.max(0,Math.floor(-Math.log(tr)/Math.LN2)),yr=Math.pow(2,pr);return new e.CanonicalTileID(pr,Math.floor((W+$)/2*yr),Math.floor((pe+de)/2*yr))}var K=function(ce){function W(pe,$,de,ke){ce.call(this,pe,$,de,ke),this.roundZoom=!0,this.type="video",this.options=$}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this._loaded=!1;var de=this.options;this.urls=[];for(var ke=0,Fe=de.urls;ke<Fe.length;ke+=1){var Je=Fe[ke];this.urls.push(this.map._requestManager.transformRequest(Je,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ht,Dt){$._loaded=!0,ht?$.fire(new e.ErrorEvent(ht)):Dt&&($.video=Dt,$.video.loop=!0,$.video.addEventListener("playing",function(){$.map.triggerRepaint()}),$.map&&$.video.play(),$._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function($){if(this.video){var de=this.video.seekable;$<de.start(0)||$>de.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+de.start(0)+" and "+de.end(0)+"-second mark."))):this.video.currentTime=$}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function($){this.map||(this.map=$,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var $=this.map.painter.context,de=$.gl;this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE),de.texSubImage2D(de.TEXTURE_2D,0,0,0,de.RGBA,de.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture($,this.video,de.RGBA),this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE));for(var ke in this.tiles){var Fe=this.tiles[ke];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(ae),J=function(ce){function W(pe,$,de,ke){ce.call(this,pe,$,de,ke),$.coordinates?(!Array.isArray($.coordinates)||$.coordinates.length!==4||$.coordinates.some(function(Fe){return!Array.isArray(Fe)||Fe.length!==2||Fe.some(function(Je){return typeof Je!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+pe,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+pe,null,'missing required property "coordinates"'))),$.animate&&typeof $.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+pe,null,'optional "animate" property must be a boolean value'))),$.canvas?typeof $.canvas!="string"&&!($.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+pe,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+pe,null,'missing required property "canvas"'))),this.options=$,this.animate=$.animate!==void 0?$.animate:!0}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function($){this.map=$,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var $=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,$=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,$=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var de=this.map.painter.context,ke=de.gl;this.boundsBuffer||(this.boundsBuffer=de.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?($||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(de,this.canvas,ke.RGBA,{premultiply:!0});for(var Fe in this.tiles){var Je=this.tiles[Fe];Je.state!=="loaded"&&(Je.state="loaded",Je.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var $=0,de=[this.canvas.width,this.canvas.height];$<de.length;$+=1){var ke=de[$];if(isNaN(ke)||ke<=0)return!0}return!1},W}(ae),U={vector:H,raster:Y,"raster-dem":ee,geojson:j,video:K,image:ae,canvas:J},V=function(ce,W,pe,$){var de=new U[W.type](ce,W,pe,$);if(de.id!==ce)throw new Error("Expected Source id to be "+ce+" instead of "+de.id);return e.bindAll(["load","abort","unload","serialize","prepare"],de),de},q=function(ce){return U[ce]},re=function(ce,W){U[ce]=W};function Z(ce,W){var pe=e.identity([]);return e.translate(pe,pe,[1,1,0]),e.scale(pe,pe,[ce.width*.5,ce.height*.5,1]),e.multiply(pe,pe,ce.calculatePosMatrix(W.toUnwrapped()))}function Q(ce,W,pe){if(ce)for(var $=0,de=ce;$<de.length;$+=1){var ke=de[$],Fe=W[ke];if(Fe&&Fe.source===pe&&Fe.type==="fill-extrusion")return!0}else for(var Je in W){var ht=W[Je];if(ht.source===pe&&ht.type==="fill-extrusion")return!0}return!1}function ie(ce,W,pe,$,de,ke){var Fe=Q(de&&de.layers,W,ce.id),Je=ke.maxPitchScaleFactor(),ht=ce.tilesIn($,Je,Fe);ht.sort(se);for(var Dt=[],tr=0,pr=ht;tr<pr.length;tr+=1){var yr=pr[tr];Dt.push({wrappedTileID:yr.tileID.wrapped().key,queryResults:yr.tile.queryRenderedFeatures(W,pe,ce._state,yr.queryGeometry,yr.cameraQueryGeometry,yr.scale,de,ke,Je,Z(ce.transform,yr.tileID))})}var Rr=_e(Dt);for(var Kr in Rr)Rr[Kr].forEach(function($r){var Xr=$r.feature,rn=ce.getFeatureState(Xr.layer["source-layer"],Xr.id);Xr.source=Xr.layer.source,Xr.layer["source-layer"]&&(Xr.sourceLayer=Xr.layer["source-layer"]),Xr.state=rn});return Rr}function oe(ce,W,pe,$,de,ke,Fe){for(var Je={},ht=ke.queryRenderedSymbols($),Dt=[],tr=0,pr=Object.keys(ht).map(Number);tr<pr.length;tr+=1){var yr=pr[tr];Dt.push(Fe[yr])}Dt.sort(se);for(var Rr=function(){var xn=$r[Kr],Fn=xn.featureIndex.lookupSymbolFeatures(ht[xn.bucketInstanceId],W,xn.bucketIndex,xn.sourceLayerIndex,de.filter,de.layers,de.availableImages,ce);for(var Gn in Fn){var oa=Je[Gn]=Je[Gn]||[],fa=Fn[Gn];fa.sort(function(Ca,Fa){var Ba=xn.featureSortOrder;if(Ba){var ti=Ba.indexOf(Ca.featureIndex),pi=Ba.indexOf(Fa.featureIndex);return pi-ti}else return Fa.featureIndex-Ca.featureIndex});for(var la=0,wa=fa;la<wa.length;la+=1){var La=wa[la];oa.push(La)}}},Kr=0,$r=Dt;Kr<$r.length;Kr+=1)Rr();var Xr=function(xn){Je[xn].forEach(function(Fn){var Gn=Fn.feature,oa=ce[xn],fa=pe[oa.source],la=fa.getFeatureState(Gn.layer["source-layer"],Gn.id);Gn.source=Gn.layer.source,Gn.layer["source-layer"]&&(Gn.sourceLayer=Gn.layer["source-layer"]),Gn.state=la})};for(var rn in Je)Xr(rn);return Je}function ne(ce,W){for(var pe=ce.getRenderableIds().map(function(ht){return ce.getTileByID(ht)}),$=[],de={},ke=0;ke<pe.length;ke++){var Fe=pe[ke],Je=Fe.tileID.canonical.key;de[Je]||(de[Je]=!0,Fe.querySourceFeatures($,W))}return $}function se(ce,W){var pe=ce.tileID,$=W.tileID;return pe.overscaledZ-$.overscaledZ||pe.canonical.y-$.canonical.y||pe.wrap-$.wrap||pe.canonical.x-$.canonical.x}function _e(ce){for(var W={},pe={},$=0,de=ce;$<de.length;$+=1){var ke=de[$],Fe=ke.queryResults,Je=ke.wrappedTileID,ht=pe[Je]=pe[Je]||{};for(var Dt in Fe)for(var tr=Fe[Dt],pr=ht[Dt]=ht[Dt]||{},yr=W[Dt]=W[Dt]||[],Rr=0,Kr=tr;Rr<Kr.length;Rr+=1){var $r=Kr[Rr];pr[$r.featureIndex]||(pr[$r.featureIndex]=!0,yr.push($r))}}return W}var ue=function(W,pe){this.max=W,this.onRemove=pe,this.reset()};ue.prototype.reset=function(){for(var W in this.data)for(var pe=0,$=this.data[W];pe<$.length;pe+=1){var de=$[pe];de.timeout&&clearTimeout(de.timeout),this.onRemove(de.value)}return this.data={},this.order=[],this},ue.prototype.add=function(W,pe,$){var de=this,ke=W.wrapped().key;this.data[ke]===void 0&&(this.data[ke]=[]);var Fe={value:pe,timeout:void 0};if($!==void 0&&(Fe.timeout=setTimeout(function(){de.remove(W,Fe)},$)),this.data[ke].push(Fe),this.order.push(ke),this.order.length>this.max){var Je=this._getAndRemoveByKey(this.order[0]);Je&&this.onRemove(Je)}return this},ue.prototype.has=function(W){return W.wrapped().key in this.data},ue.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},ue.prototype._getAndRemoveByKey=function(W){var pe=this.data[W].shift();return pe.timeout&&clearTimeout(pe.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),pe.value},ue.prototype.getByKey=function(W){var pe=this.data[W];return pe?pe[0].value:null},ue.prototype.get=function(W){if(!this.has(W))return null;var pe=this.data[W.wrapped().key][0];return pe.value},ue.prototype.remove=function(W,pe){if(!this.has(W))return this;var $=W.wrapped().key,de=pe===void 0?0:this.data[$].indexOf(pe),ke=this.data[$][de];return this.data[$].splice(de,1),ke.timeout&&clearTimeout(ke.timeout),this.data[$].length===0&&delete this.data[$],this.onRemove(ke.value),this.order.splice(this.order.indexOf($),1),this},ue.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var pe=this._getAndRemoveByKey(this.order[0]);pe&&this.onRemove(pe)}return this},ue.prototype.filter=function(W){var pe=[];for(var $ in this.data)for(var de=0,ke=this.data[$];de<ke.length;de+=1){var Fe=ke[de];W(Fe.value)||pe.push(Fe)}for(var Je=0,ht=pe;Je<ht.length;Je+=1){var Dt=ht[Je];this.remove(Dt.value.tileID,Dt)}};var ge=function(W,pe,$){this.context=W;var de=W.gl;this.buffer=de.createBuffer(),this.dynamicDraw=Boolean($),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),de.bufferData(de.ELEMENT_ARRAY_BUFFER,pe.arrayBuffer,this.dynamicDraw?de.DYNAMIC_DRAW:de.STATIC_DRAW),this.dynamicDraw||delete pe.arrayBuffer};ge.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ge.prototype.updateData=function(W){var pe=this.context.gl;this.context.unbindVAO(),this.bind(),pe.bufferSubData(pe.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},ge.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ye=function(W,pe,$,de){this.length=pe.length,this.attributes=$,this.itemSize=pe.bytesPerElement,this.dynamicDraw=de,this.context=W;var ke=W.gl;this.buffer=ke.createBuffer(),W.bindVertexBuffer.set(this.buffer),ke.bufferData(ke.ARRAY_BUFFER,pe.arrayBuffer,this.dynamicDraw?ke.DYNAMIC_DRAW:ke.STATIC_DRAW),this.dynamicDraw||delete pe.arrayBuffer};ye.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ye.prototype.updateData=function(W){var pe=this.context.gl;this.bind(),pe.bufferSubData(pe.ARRAY_BUFFER,0,W.arrayBuffer)},ye.prototype.enableAttributes=function(W,pe){for(var $=0;$<this.attributes.length;$++){var de=this.attributes[$],ke=pe.attributes[de.name];ke!==void 0&&W.enableVertexAttribArray(ke)}},ye.prototype.setVertexAttribPointers=function(W,pe,$){for(var de=0;de<this.attributes.length;de++){var ke=this.attributes[de],Fe=pe.attributes[ke.name];Fe!==void 0&&W.vertexAttribPointer(Fe,ke.components,W[xe[ke.type]],!1,this.itemSize,ke.offset+this.itemSize*($||0))}},ye.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var be=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};be.prototype.get=function(){return this.current},be.prototype.set=function(W){},be.prototype.getDefault=function(){return this.default},be.prototype.setDefault=function(){this.set(this.default)};var Se=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function($){var de=this.current;$.r===de.r&&$.g===de.g&&$.b===de.b&&$.a===de.a&&!this.dirty||(this.gl.clearColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},W}(be),Re=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.clearDepth($),this.current=$,this.dirty=!1)},W}(be),Ve=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.clearStencil($),this.current=$,this.dirty=!1)},W}(be),Ae=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function($){var de=this.current;$[0]===de[0]&&$[1]===de[1]&&$[2]===de[2]&&$[3]===de[3]&&!this.dirty||(this.gl.colorMask($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},W}(be),Ce=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.depthMask($),this.current=$,this.dirty=!1)},W}(be),Ze=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.stencilMask($),this.current=$,this.dirty=!1)},W}(be),Ye=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function($){var de=this.current;$.func===de.func&&$.ref===de.ref&&$.mask===de.mask&&!this.dirty||(this.gl.stencilFunc($.func,$.ref,$.mask),this.current=$,this.dirty=!1)},W}(be),ze=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var $=this.gl;return[$.KEEP,$.KEEP,$.KEEP]},W.prototype.set=function($){var de=this.current;$[0]===de[0]&&$[1]===de[1]&&$[2]===de[2]&&!this.dirty||(this.gl.stencilOp($[0],$[1],$[2]),this.current=$,this.dirty=!1)},W}(be),Ie=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;$?de.enable(de.STENCIL_TEST):de.disable(de.STENCIL_TEST),this.current=$,this.dirty=!1}},W}(be),Ge=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function($){var de=this.current;$[0]===de[0]&&$[1]===de[1]&&!this.dirty||(this.gl.depthRange($[0],$[1]),this.current=$,this.dirty=!1)},W}(be),dt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;$?de.enable(de.DEPTH_TEST):de.disable(de.DEPTH_TEST),this.current=$,this.dirty=!1}},W}(be),Rt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.depthFunc($),this.current=$,this.dirty=!1)},W}(be),Qt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;$?de.enable(de.BLEND):de.disable(de.BLEND),this.current=$,this.dirty=!1}},W}(be),Bt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var $=this.gl;return[$.ONE,$.ZERO]},W.prototype.set=function($){var de=this.current;$[0]===de[0]&&$[1]===de[1]&&!this.dirty||(this.gl.blendFunc($[0],$[1]),this.current=$,this.dirty=!1)},W}(be),Ct=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function($){var de=this.current;$.r===de.r&&$.g===de.g&&$.b===de.b&&$.a===de.a&&!this.dirty||(this.gl.blendColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},W}(be),Kt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.blendEquation($),this.current=$,this.dirty=!1)},W}(be),Ot=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;$?de.enable(de.CULL_FACE):de.disable(de.CULL_FACE),this.current=$,this.dirty=!1}},W}(be),St=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.cullFace($),this.current=$,this.dirty=!1)},W}(be),Xe=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.frontFace($),this.current=$,this.dirty=!1)},W}(be),at=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.useProgram($),this.current=$,this.dirty=!1)},W}(be),We=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.activeTexture($),this.current=$,this.dirty=!1)},W}(be),Ee=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var $=this.gl;return[0,0,$.drawingBufferWidth,$.drawingBufferHeight]},W.prototype.set=function($){var de=this.current;$[0]===de[0]&&$[1]===de[1]&&$[2]===de[2]&&$[3]===de[3]&&!this.dirty||(this.gl.viewport($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},W}(be),He=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.bindFramebuffer(de.FRAMEBUFFER,$),this.current=$,this.dirty=!1}},W}(be),Ke=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.bindRenderbuffer(de.RENDERBUFFER,$),this.current=$,this.dirty=!1}},W}(be),et=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.bindTexture(de.TEXTURE_2D,$),this.current=$,this.dirty=!1}},W}(be),At=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.bindBuffer(de.ARRAY_BUFFER,$),this.current=$,this.dirty=!1}},W}(be),mt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){var de=this.gl;de.bindBuffer(de.ELEMENT_ARRAY_BUFFER,$),this.current=$,this.dirty=!1},W}(be),Mt=function(ce){function W(pe){ce.call(this,pe),this.vao=pe.extVertexArrayObject}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){!this.vao||$===this.current&&!this.dirty||(this.vao.bindVertexArrayOES($),this.current=$,this.dirty=!1)},W}(be),Gt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_ALIGNMENT,$),this.current=$,this.dirty=!1}},W}(be),zt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$),this.current=$,this.dirty=!1}},W}(be),Ht=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,$),this.current=$,this.dirty=!1}},W}(be),Xt=function(ce){function W(pe,$){ce.call(this,pe),this.context=pe,this.parent=$}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(be),Wt=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var de=this.gl;de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,$,0),this.current=$,this.dirty=!1}},W}(Xt),sr=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.set=function($){if(!($===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var de=this.gl;de.framebufferRenderbuffer(de.FRAMEBUFFER,de.DEPTH_ATTACHMENT,de.RENDERBUFFER,$),this.current=$,this.dirty=!1}},W}(Xt),Gr=function(W,pe,$,de){this.context=W,this.width=pe,this.height=$;var ke=W.gl,Fe=this.framebuffer=ke.createFramebuffer();this.colorAttachment=new Wt(W,Fe),de&&(this.depthAttachment=new sr(W,Fe))};Gr.prototype.destroy=function(){var W=this.context.gl,pe=this.colorAttachment.get();if(pe&&W.deleteTexture(pe),this.depthAttachment){var $=this.depthAttachment.get();$&&W.deleteRenderbuffer($)}W.deleteFramebuffer(this.framebuffer)};var cn=519,en=function(W,pe,$){this.func=W,this.mask=pe,this.range=$};en.ReadOnly=!1,en.ReadWrite=!0,en.disabled=new en(cn,en.ReadOnly,[0,1]);var st=519,rr=7680,er=function(W,pe,$,de,ke,Fe){this.test=W,this.ref=pe,this.mask=$,this.fail=de,this.depthFail=ke,this.pass=Fe};er.disabled=new er({func:st,mask:0},0,0,rr,rr,rr);var jt=0,Mr=1,it=771,Qe=function(W,pe,$){this.blendFunction=W,this.blendColor=pe,this.mask=$};Qe.Replace=[Mr,jt],Qe.disabled=new Qe(Qe.Replace,e.Color.transparent,[!1,!1,!1,!1]),Qe.unblended=new Qe(Qe.Replace,e.Color.transparent,[!0,!0,!0,!0]),Qe.alphaBlended=new Qe([Mr,it],e.Color.transparent,[!0,!0,!0,!0]);var ft=1029,ct=2305,Et=function(W,pe,$){this.enable=W,this.mode=pe,this.frontFace=$};Et.disabled=new Et(!1,ft,ct),Et.backCCW=new Et(!0,ft,ct);var Nt=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Se(this),this.clearDepth=new Re(this),this.clearStencil=new Ve(this),this.colorMask=new Ae(this),this.depthMask=new Ce(this),this.stencilMask=new Ze(this),this.stencilFunc=new Ye(this),this.stencilOp=new ze(this),this.stencilTest=new Ie(this),this.depthRange=new Ge(this),this.depthTest=new dt(this),this.depthFunc=new Rt(this),this.blend=new Qt(this),this.blendFunc=new Bt(this),this.blendColor=new Ct(this),this.blendEquation=new Kt(this),this.cullFace=new Ot(this),this.cullFaceSide=new St(this),this.frontFace=new Xe(this),this.program=new at(this),this.activeTexture=new We(this),this.viewport=new Ee(this),this.bindFramebuffer=new He(this),this.bindRenderbuffer=new Ke(this),this.bindTexture=new et(this),this.bindVertexBuffer=new At(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Mt(this),this.pixelStoreUnpack=new Gt(this),this.pixelStoreUnpackPremultiplyAlpha=new zt(this),this.pixelStoreUnpackFlipY=new Ht(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Nt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Nt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Nt.prototype.createIndexBuffer=function(W,pe){return new ge(this,W,pe)},Nt.prototype.createVertexBuffer=function(W,pe,$){return new ye(this,W,pe,$)},Nt.prototype.createRenderbuffer=function(W,pe,$){var de=this.gl,ke=de.createRenderbuffer();return this.bindRenderbuffer.set(ke),de.renderbufferStorage(de.RENDERBUFFER,W,pe,$),this.bindRenderbuffer.set(null),ke},Nt.prototype.createFramebuffer=function(W,pe,$){return new Gr(this,W,pe,$)},Nt.prototype.clear=function(W){var pe=W.color,$=W.depth,de=this.gl,ke=0;pe&&(ke|=de.COLOR_BUFFER_BIT,this.clearColor.set(pe),this.colorMask.set([!0,!0,!0,!0])),typeof $<"u"&&(ke|=de.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set($),this.depthMask.set(!0)),de.clear(ke)},Nt.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Nt.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Nt.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Nt.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,Qe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Nt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(ce){function W(pe,$,de){var ke=this;ce.call(this),this.id=pe,this.dispatcher=de,this.on("data",function(Fe){Fe.dataType==="source"&&Fe.sourceDataType==="metadata"&&(ke._sourceLoaded=!0),ke._sourceLoaded&&!ke._paused&&Fe.dataType==="source"&&Fe.sourceDataType==="content"&&(ke.reload(),ke.transform&&ke.update(ke.transform))}),this.on("error",function(){ke._sourceErrored=!0}),this._source=V(pe,$,de,this),this._tiles={},this._cache=new ue(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.onAdd=function($){this.map=$,this._maxTileCacheSize=$?$._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd($)},W.prototype.onRemove=function($){this._source&&this._source.onRemove&&this._source.onRemove($)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var $ in this._tiles){var de=this._tiles[$];if(de.state!=="loaded"&&de.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var $=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,$&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function($,de){return this._source.loadTile($,de)},W.prototype._unloadTile=function($){if(this._source.unloadTile)return this._source.unloadTile($,function(){})},W.prototype._abortTile=function($){if(this._source.abortTile)return this._source.abortTile($,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function($){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var de in this._tiles){var ke=this._tiles[de];ke.upload($),ke.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function($){return $.tileID}).sort(Le).map(function($){return $.key})},W.prototype.getRenderableIds=function($){var de=this,ke=[];for(var Fe in this._tiles)this._isIdRenderable(Fe,$)&&ke.push(this._tiles[Fe]);return $?ke.sort(function(Je,ht){var Dt=Je.tileID,tr=ht.tileID,pr=new e.Point(Dt.canonical.x,Dt.canonical.y)._rotate(de.transform.angle),yr=new e.Point(tr.canonical.x,tr.canonical.y)._rotate(de.transform.angle);return Dt.overscaledZ-tr.overscaledZ||yr.y-pr.y||yr.x-pr.x}).map(function(Je){return Je.tileID.key}):ke.map(function(Je){return Je.tileID}).sort(Le).map(function(Je){return Je.key})},W.prototype.hasRenderableParent=function($){var de=this.findLoadedParent($,0);return de?this._isIdRenderable(de.tileID.key):!1},W.prototype._isIdRenderable=function($,de){return this._tiles[$]&&this._tiles[$].hasData()&&!this._coveredTiles[$]&&(de||!this._tiles[$].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var $ in this._tiles)this._tiles[$].state!=="errored"&&this._reloadTile($,"reloading")},W.prototype._reloadTile=function($,de){var ke=this._tiles[$];!ke||(ke.state!=="loading"&&(ke.state=de),this._loadTile(ke,this._tileLoaded.bind(this,ke,$,de)))},W.prototype._tileLoaded=function($,de,ke,Fe){if(Fe){$.state="errored",Fe.status!==404?this._source.fire(new e.ErrorEvent(Fe,{tile:$})):this.update(this.transform);return}$.timeAdded=e.browser.now(),ke==="expired"&&($.refreshedUponExpiration=!0),this._setTileReloadTimer(de,$),this.getSource().type==="raster-dem"&&$.dem&&this._backfillDEM($),this._state.initializeTileState($,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:$,coord:$.tileID}))},W.prototype._backfillDEM=function($){for(var de=this.getRenderableIds(),ke=0;ke<de.length;ke++){var Fe=de[ke];if($.neighboringTiles&&$.neighboringTiles[Fe]){var Je=this.getTileByID(Fe);ht($,Je),ht(Je,$)}}function ht(Dt,tr){Dt.needsHillshadePrepare=!0;var pr=tr.tileID.canonical.x-Dt.tileID.canonical.x,yr=tr.tileID.canonical.y-Dt.tileID.canonical.y,Rr=Math.pow(2,Dt.tileID.canonical.z),Kr=tr.tileID.key;pr===0&&yr===0||Math.abs(yr)>1||(Math.abs(pr)>1&&(Math.abs(pr+Rr)===1?pr+=Rr:Math.abs(pr-Rr)===1&&(pr-=Rr)),!(!tr.dem||!Dt.dem)&&(Dt.dem.backfillBorder(tr.dem,pr,yr),Dt.neighboringTiles&&Dt.neighboringTiles[Kr]&&(Dt.neighboringTiles[Kr].backfilled=!0)))}},W.prototype.getTile=function($){return this.getTileByID($.key)},W.prototype.getTileByID=function($){return this._tiles[$]},W.prototype._retainLoadedChildren=function($,de,ke,Fe){for(var Je in this._tiles){var ht=this._tiles[Je];if(!(Fe[Je]||!ht.hasData()||ht.tileID.overscaledZ<=de||ht.tileID.overscaledZ>ke)){for(var Dt=ht.tileID;ht&&ht.tileID.overscaledZ>de+1;){var tr=ht.tileID.scaledTo(ht.tileID.overscaledZ-1);ht=this._tiles[tr.key],ht&&ht.hasData()&&(Dt=tr)}for(var pr=Dt;pr.overscaledZ>de;)if(pr=pr.scaledTo(pr.overscaledZ-1),$[pr.key]){Fe[Dt.key]=Dt;break}}}},W.prototype.findLoadedParent=function($,de){if($.key in this._loadedParentTiles){var ke=this._loadedParentTiles[$.key];return ke&&ke.tileID.overscaledZ>=de?ke:null}for(var Fe=$.overscaledZ-1;Fe>=de;Fe--){var Je=$.scaledTo(Fe),ht=this._getLoadedTile(Je);if(ht)return ht}},W.prototype._getLoadedTile=function($){var de=this._tiles[$.key];if(de&&de.hasData())return de;var ke=this._cache.getByKey($.wrapped().key);return ke},W.prototype.updateCacheSize=function($){var de=Math.ceil($.width/this._source.tileSize)+1,ke=Math.ceil($.height/this._source.tileSize)+1,Fe=de*ke,Je=5,ht=Math.floor(Fe*Je),Dt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ht):ht;this._cache.setMaxSize(Dt)},W.prototype.handleWrapJump=function($){var de=this._prevLng===void 0?$:this._prevLng,ke=$-de,Fe=ke/360,Je=Math.round(Fe);if(this._prevLng=$,Je){var ht={};for(var Dt in this._tiles){var tr=this._tiles[Dt];tr.tileID=tr.tileID.unwrapTo(tr.tileID.wrap+Je),ht[tr.tileID.key]=tr}this._tiles=ht;for(var pr in this._timers)clearTimeout(this._timers[pr]),delete this._timers[pr];for(var yr in this._tiles){var Rr=this._tiles[yr];this._setTileReloadTimer(yr,Rr)}}},W.prototype.update=function($){var de=this;if(this.transform=$,!(!this._sourceLoaded||this._paused)){this.updateCacheSize($),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var ke;this.used?this._source.tileID?ke=$.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ca){return new e.OverscaledTileID(Ca.canonical.z,Ca.wrap,Ca.canonical.z,Ca.canonical.x,Ca.canonical.y)}):(ke=$.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ke=ke.filter(function(Ca){return de._source.hasTile(Ca)}))):ke=[];var Fe=$.coveringZoomLevel(this._source),Je=Math.max(Fe-W.maxOverzooming,this._source.minzoom),ht=Math.max(Fe+W.maxUnderzooming,this._source.minzoom),Dt=this._updateRetainedTiles(ke,Fe);if(ot(this._source.type)){for(var tr={},pr={},yr=Object.keys(Dt),Rr=0,Kr=yr;Rr<Kr.length;Rr+=1){var $r=Kr[Rr],Xr=Dt[$r],rn=this._tiles[$r];if(!(!rn||rn.fadeEndTime&&rn.fadeEndTime<=e.browser.now())){var xn=this.findLoadedParent(Xr,Je);xn&&(this._addTile(xn.tileID),tr[xn.tileID.key]=xn.tileID),pr[$r]=Xr}}this._retainLoadedChildren(pr,Fe,ht,Dt);for(var Fn in tr)Dt[Fn]||(this._coveredTiles[Fn]=!0,Dt[Fn]=tr[Fn])}for(var Gn in Dt)this._tiles[Gn].clearFadeHold();for(var oa=e.keysDifference(this._tiles,Dt),fa=0,la=oa;fa<la.length;fa+=1){var wa=la[fa],La=this._tiles[wa];La.hasSymbolBuckets&&!La.holdingForFade()?La.setHoldDuration(this.map._fadeDuration):(!La.hasSymbolBuckets||La.symbolFadeFinished())&&this._removeTile(wa)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var $ in this._tiles)this._tiles[$].holdingForFade()&&this._removeTile($)},W.prototype._updateRetainedTiles=function($,de){for(var ke={},Fe={},Je=Math.max(de-W.maxOverzooming,this._source.minzoom),ht=Math.max(de+W.maxUnderzooming,this._source.minzoom),Dt={},tr=0,pr=$;tr<pr.length;tr+=1){var yr=pr[tr],Rr=this._addTile(yr);ke[yr.key]=yr,!Rr.hasData()&&de<this._source.maxzoom&&(Dt[yr.key]=yr)}this._retainLoadedChildren(Dt,de,ht,ke);for(var Kr=0,$r=$;Kr<$r.length;Kr+=1){var Xr=$r[Kr],rn=this._tiles[Xr.key];if(!rn.hasData()){if(de+1>this._source.maxzoom){var xn=Xr.children(this._source.maxzoom)[0],Fn=this.getTile(xn);if(!!Fn&&Fn.hasData()){ke[xn.key]=xn;continue}}else{var Gn=Xr.children(this._source.maxzoom);if(ke[Gn[0].key]&&ke[Gn[1].key]&&ke[Gn[2].key]&&ke[Gn[3].key])continue}for(var oa=rn.wasRequested(),fa=Xr.overscaledZ-1;fa>=Je;--fa){var la=Xr.scaledTo(fa);if(Fe[la.key]||(Fe[la.key]=!0,rn=this.getTile(la),!rn&&oa&&(rn=this._addTile(la)),rn&&(ke[la.key]=la,oa=rn.wasRequested(),rn.hasData())))break}}}return ke},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var $ in this._tiles){for(var de=[],ke=void 0,Fe=this._tiles[$].tileID;Fe.overscaledZ>0;){if(Fe.key in this._loadedParentTiles){ke=this._loadedParentTiles[Fe.key];break}de.push(Fe.key);var Je=Fe.scaledTo(Fe.overscaledZ-1);if(ke=this._getLoadedTile(Je),ke)break;Fe=Je}for(var ht=0,Dt=de;ht<Dt.length;ht+=1){var tr=Dt[ht];this._loadedParentTiles[tr]=ke}}},W.prototype._addTile=function($){var de=this._tiles[$.key];if(de)return de;de=this._cache.getAndRemove($),de&&(this._setTileReloadTimer($.key,de),de.tileID=$,this._state.initializeTileState(de,this.map?this.map.painter:null),this._cacheTimers[$.key]&&(clearTimeout(this._cacheTimers[$.key]),delete this._cacheTimers[$.key],this._setTileReloadTimer($.key,de)));var ke=Boolean(de);return ke||(de=new e.Tile($,this._source.tileSize*$.overscaleFactor()),this._loadTile(de,this._tileLoaded.bind(this,de,$.key,de.state))),de?(de.uses++,this._tiles[$.key]=de,ke||this._source.fire(new e.Event("dataloading",{tile:de,coord:de.tileID,dataType:"source"})),de):null},W.prototype._setTileReloadTimer=function($,de){var ke=this;$ in this._timers&&(clearTimeout(this._timers[$]),delete this._timers[$]);var Fe=de.getExpiryTimeout();Fe&&(this._timers[$]=setTimeout(function(){ke._reloadTile($,"expired"),delete ke._timers[$]},Fe))},W.prototype._removeTile=function($){var de=this._tiles[$];!de||(de.uses--,delete this._tiles[$],this._timers[$]&&(clearTimeout(this._timers[$]),delete this._timers[$]),!(de.uses>0)&&(de.hasData()&&de.state!=="reloading"?this._cache.add(de.tileID,de,de.getExpiryTimeout()):(de.aborted=!0,this._abortTile(de),this._unloadTile(de))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var $ in this._tiles)this._removeTile($);this._cache.reset()},W.prototype.tilesIn=function($,de,ke){var Fe=this,Je=[],ht=this.transform;if(!ht)return Je;for(var Dt=ke?ht.getCameraQueryGeometry($):$,tr=$.map(function(fa){return ht.pointCoordinate(fa)}),pr=Dt.map(function(fa){return ht.pointCoordinate(fa)}),yr=this.getIds(),Rr=1/0,Kr=1/0,$r=-1/0,Xr=-1/0,rn=0,xn=pr;rn<xn.length;rn+=1){var Fn=xn[rn];Rr=Math.min(Rr,Fn.x),Kr=Math.min(Kr,Fn.y),$r=Math.max($r,Fn.x),Xr=Math.max(Xr,Fn.y)}for(var Gn=function(fa){var la=Fe._tiles[yr[fa]];if(!la.holdingForFade()){var wa=la.tileID,La=Math.pow(2,ht.zoom-la.tileID.overscaledZ),Ca=de*la.queryPadding*e.EXTENT/la.tileSize/La,Fa=[wa.getTilePoint(new e.MercatorCoordinate(Rr,Kr)),wa.getTilePoint(new e.MercatorCoordinate($r,Xr))];if(Fa[0].x-Ca<e.EXTENT&&Fa[0].y-Ca<e.EXTENT&&Fa[1].x+Ca>=0&&Fa[1].y+Ca>=0){var Ba=tr.map(function(pi){return wa.getTilePoint(pi)}),ti=pr.map(function(pi){return wa.getTilePoint(pi)});Je.push({tile:la,tileID:wa,queryGeometry:Ba,cameraQueryGeometry:ti,scale:La})}}},oa=0;oa<yr.length;oa++)Gn(oa);return Je},W.prototype.getVisibleCoordinates=function($){for(var de=this,ke=this.getRenderableIds($).map(function(Dt){return de._tiles[Dt].tileID}),Fe=0,Je=ke;Fe<Je.length;Fe+=1){var ht=Je[Fe];ht.posMatrix=this.transform.calculatePosMatrix(ht.toUnwrapped())}return ke},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(var $ in this._tiles){var de=this._tiles[$];if(de.fadeEndTime!==void 0&&de.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function($,de,ke){$=$||"_geojsonTileLayer",this._state.updateState($,de,ke)},W.prototype.removeFeatureState=function($,de,ke){$=$||"_geojsonTileLayer",this._state.removeFeatureState($,de,ke)},W.prototype.getFeatureState=function($,de){return $=$||"_geojsonTileLayer",this._state.getState($,de)},W.prototype.setDependencies=function($,de,ke){var Fe=this._tiles[$];Fe&&Fe.setDependencies(de,ke)},W.prototype.reloadTilesForDependencies=function($,de){for(var ke in this._tiles){var Fe=this._tiles[ke];Fe.hasDependency($,de)&&this._reloadTile(ke,"reloading")}this._cache.filter(function(Je){return!Je.hasDependency($,de)})},W}(e.Evented);Pe.maxOverzooming=10,Pe.maxUnderzooming=3;function Le(ce,W){var pe=Math.abs(ce.wrap*2)-+(ce.wrap<0),$=Math.abs(W.wrap*2)-+(W.wrap<0);return ce.overscaledZ-W.overscaledZ||$-pe||W.canonical.y-ce.canonical.y||W.canonical.x-ce.canonical.x}function ot(ce){return ce==="raster"||ce==="image"||ce==="video"}function ut(){return new e.window.Worker(Qv.workerUrl)}var pt="mapboxgl_preloaded_worker_pool",Pt=function(){this.active={}};Pt.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new ut);return this.active[W]=!0,this.workers.slice()},Pt.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(pe){pe.terminate()}),this.workers=null)},Pt.prototype.isPreloaded=function(){return!!this.active[pt]},Pt.prototype.numActive=function(){return Object.keys(this.active).length};var xt=Math.floor(e.browser.hardwareConcurrency/2);Pt.workerCount=Math.max(Math.min(xt,6),1);var Lt;function Zt(){return Lt||(Lt=new Pt),Lt}function ur(){var ce=Zt();ce.acquire(pt)}function Pr(){var ce=Lt;ce&&(ce.isPreloaded()&&ce.numActive()===1?(ce.release(pt),Lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Ar(ce,W){var pe={};for(var $ in ce)$!=="ref"&&(pe[$]=ce[$]);return e.refProperties.forEach(function(de){de in W&&(pe[de]=W[de])}),pe}function kr(ce){ce=ce.slice();for(var W=Object.create(null),pe=0;pe<ce.length;pe++)W[ce[pe].id]=ce[pe];for(var $=0;$<ce.length;$++)"ref"in ce[$]&&(ce[$]=Ar(ce[$],W[ce[$].ref]));return ce}function Zr(){var ce={},W=e.styleSpec.$version;for(var pe in e.styleSpec.$root){var $=e.styleSpec.$root[pe];if($.required){var de=null;pe==="version"?de=W:$.type==="array"?de=[]:de={},de!=null&&(ce[pe]=de)}}return ce}var lr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function br(ce,W,pe){pe.push({command:lr.addSource,args:[ce,W[ce]]})}function Or(ce,W,pe){W.push({command:lr.removeSource,args:[ce]}),pe[ce]=!0}function Hr(ce,W,pe,$){Or(ce,pe,$),br(ce,W,pe)}function Lr(ce,W,pe){var $;for($ in ce[pe])if(!!ce[pe].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(ce[pe][$],W[pe][$]))return!1;for($ in W[pe])if(!!W[pe].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(ce[pe][$],W[pe][$]))return!1;return!0}function nt(ce,W,pe,$){ce=ce||{},W=W||{};var de;for(de in ce)!ce.hasOwnProperty(de)||W.hasOwnProperty(de)||Or(de,pe,$);for(de in W)!W.hasOwnProperty(de)||(ce.hasOwnProperty(de)?e.deepEqual(ce[de],W[de])||(ce[de].type==="geojson"&&W[de].type==="geojson"&&Lr(ce,W,de)?pe.push({command:lr.setGeoJSONSourceData,args:[de,W[de].data]}):Hr(de,W,pe,$)):br(de,W,pe))}function It(ce,W,pe,$,de,ke){ce=ce||{},W=W||{};var Fe;for(Fe in ce)!ce.hasOwnProperty(Fe)||e.deepEqual(ce[Fe],W[Fe])||pe.push({command:ke,args:[$,Fe,W[Fe],de]});for(Fe in W)!W.hasOwnProperty(Fe)||ce.hasOwnProperty(Fe)||e.deepEqual(ce[Fe],W[Fe])||pe.push({command:ke,args:[$,Fe,W[Fe],de]})}function Jt(ce){return ce.id}function fr(ce,W){return ce[W.id]=W,ce}function Nr(ce,W,pe){ce=ce||[],W=W||[];var $=ce.map(Jt),de=W.map(Jt),ke=ce.reduce(fr,{}),Fe=W.reduce(fr,{}),Je=$.slice(),ht=Object.create(null),Dt,tr,pr,yr,Rr,Kr,$r;for(Dt=0,tr=0;Dt<$.length;Dt++)pr=$[Dt],Fe.hasOwnProperty(pr)?tr++:(pe.push({command:lr.removeLayer,args:[pr]}),Je.splice(Je.indexOf(pr,tr),1));for(Dt=0,tr=0;Dt<de.length;Dt++)pr=de[de.length-1-Dt],Je[Je.length-1-Dt]!==pr&&(ke.hasOwnProperty(pr)?(pe.push({command:lr.removeLayer,args:[pr]}),Je.splice(Je.lastIndexOf(pr,Je.length-tr),1)):tr++,Kr=Je[Je.length-Dt],pe.push({command:lr.addLayer,args:[Fe[pr],Kr]}),Je.splice(Je.length-Dt,0,pr),ht[pr]=!0);for(Dt=0;Dt<de.length;Dt++)if(pr=de[Dt],yr=ke[pr],Rr=Fe[pr],!(ht[pr]||e.deepEqual(yr,Rr))){if(!e.deepEqual(yr.source,Rr.source)||!e.deepEqual(yr["source-layer"],Rr["source-layer"])||!e.deepEqual(yr.type,Rr.type)){pe.push({command:lr.removeLayer,args:[pr]}),Kr=Je[Je.lastIndexOf(pr)+1],pe.push({command:lr.addLayer,args:[Rr,Kr]});continue}It(yr.layout,Rr.layout,pe,pr,null,lr.setLayoutProperty),It(yr.paint,Rr.paint,pe,pr,null,lr.setPaintProperty),e.deepEqual(yr.filter,Rr.filter)||pe.push({command:lr.setFilter,args:[pr,Rr.filter]}),(!e.deepEqual(yr.minzoom,Rr.minzoom)||!e.deepEqual(yr.maxzoom,Rr.maxzoom))&&pe.push({command:lr.setLayerZoomRange,args:[pr,Rr.minzoom,Rr.maxzoom]});for($r in yr)!yr.hasOwnProperty($r)||$r==="layout"||$r==="paint"||$r==="filter"||$r==="metadata"||$r==="minzoom"||$r==="maxzoom"||($r.indexOf("paint.")===0?It(yr[$r],Rr[$r],pe,pr,$r.slice(6),lr.setPaintProperty):e.deepEqual(yr[$r],Rr[$r])||pe.push({command:lr.setLayerProperty,args:[pr,$r,Rr[$r]]}));for($r in Rr)!Rr.hasOwnProperty($r)||yr.hasOwnProperty($r)||$r==="layout"||$r==="paint"||$r==="filter"||$r==="metadata"||$r==="minzoom"||$r==="maxzoom"||($r.indexOf("paint.")===0?It(yr[$r],Rr[$r],pe,pr,$r.slice(6),lr.setPaintProperty):e.deepEqual(yr[$r],Rr[$r])||pe.push({command:lr.setLayerProperty,args:[pr,$r,Rr[$r]]}))}}function Vr(ce,W){if(!ce)return[{command:lr.setStyle,args:[W]}];var pe=[];try{if(!e.deepEqual(ce.version,W.version))return[{command:lr.setStyle,args:[W]}];e.deepEqual(ce.center,W.center)||pe.push({command:lr.setCenter,args:[W.center]}),e.deepEqual(ce.zoom,W.zoom)||pe.push({command:lr.setZoom,args:[W.zoom]}),e.deepEqual(ce.bearing,W.bearing)||pe.push({command:lr.setBearing,args:[W.bearing]}),e.deepEqual(ce.pitch,W.pitch)||pe.push({command:lr.setPitch,args:[W.pitch]}),e.deepEqual(ce.sprite,W.sprite)||pe.push({command:lr.setSprite,args:[W.sprite]}),e.deepEqual(ce.glyphs,W.glyphs)||pe.push({command:lr.setGlyphs,args:[W.glyphs]}),e.deepEqual(ce.transition,W.transition)||pe.push({command:lr.setTransition,args:[W.transition]}),e.deepEqual(ce.light,W.light)||pe.push({command:lr.setLight,args:[W.light]});var $={},de=[];nt(ce.sources,W.sources,de,$);var ke=[];ce.layers&&ce.layers.forEach(function(Fe){$[Fe.source]?pe.push({command:lr.removeLayer,args:[Fe.id]}):ke.push(Fe)}),pe=pe.concat(de),Nr(ke,W.layers,pe)}catch(Fe){console.warn("Unable to compute style diff:",Fe),pe=[{command:lr.setStyle,args:[W]}]}return pe}var Dr=function(W,pe){this.reset(W,pe)};Dr.prototype.reset=function(W,pe){this.points=W||[],this._distances=[0];for(var $=1;$<this.points.length;$++)this._distances[$]=this._distances[$-1]+this.points[$].dist(this.points[$-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(pe||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Dr.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var pe=1,$=this._distances[pe],de=W*this.paddedLength+this.padding;$<de&&pe<this._distances.length;)$=this._distances[++pe];var ke=pe-1,Fe=this._distances[ke],Je=$-Fe,ht=Je>0?(de-Fe)/Je:0;return this.points[ke].mult(1-ht).add(this.points[pe].mult(ht))};var Er=function(W,pe,$){var de=this.boxCells=[],ke=this.circleCells=[];this.xCellCount=Math.ceil(W/$),this.yCellCount=Math.ceil(pe/$);for(var Fe=0;Fe<this.xCellCount*this.yCellCount;Fe++)de.push([]),ke.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=pe,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/pe,this.boxUid=0,this.circleUid=0};Er.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Er.prototype.insert=function(W,pe,$,de,ke){this._forEachCell(pe,$,de,ke,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(pe),this.bboxes.push($),this.bboxes.push(de),this.bboxes.push(ke)},Er.prototype.insertCircle=function(W,pe,$,de){this._forEachCell(pe-de,$-de,pe+de,$+de,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(pe),this.circles.push($),this.circles.push(de)},Er.prototype._insertBoxCell=function(W,pe,$,de,ke,Fe){this.boxCells[ke].push(Fe)},Er.prototype._insertCircleCell=function(W,pe,$,de,ke,Fe){this.circleCells[ke].push(Fe)},Er.prototype._query=function(W,pe,$,de,ke,Fe){if($<0||W>this.width||de<0||pe>this.height)return ke?!1:[];var Je=[];if(W<=0&&pe<=0&&this.width<=$&&this.height<=de){if(ke)return!0;for(var ht=0;ht<this.boxKeys.length;ht++)Je.push({key:this.boxKeys[ht],x1:this.bboxes[ht*4],y1:this.bboxes[ht*4+1],x2:this.bboxes[ht*4+2],y2:this.bboxes[ht*4+3]});for(var Dt=0;Dt<this.circleKeys.length;Dt++){var tr=this.circles[Dt*3],pr=this.circles[Dt*3+1],yr=this.circles[Dt*3+2];Je.push({key:this.circleKeys[Dt],x1:tr-yr,y1:pr-yr,x2:tr+yr,y2:pr+yr})}return Fe?Je.filter(Fe):Je}else{var Rr={hitTest:ke,seenUids:{box:{},circle:{}}};return this._forEachCell(W,pe,$,de,this._queryCell,Je,Rr,Fe),ke?Je.length>0:Je}},Er.prototype._queryCircle=function(W,pe,$,de,ke){var Fe=W-$,Je=W+$,ht=pe-$,Dt=pe+$;if(Je<0||Fe>this.width||Dt<0||ht>this.height)return de?!1:[];var tr=[],pr={hitTest:de,circle:{x:W,y:pe,radius:$},seenUids:{box:{},circle:{}}};return this._forEachCell(Fe,ht,Je,Dt,this._queryCellCircle,tr,pr,ke),de?tr.length>0:tr},Er.prototype.query=function(W,pe,$,de,ke){return this._query(W,pe,$,de,!1,ke)},Er.prototype.hitTest=function(W,pe,$,de,ke){return this._query(W,pe,$,de,!0,ke)},Er.prototype.hitTestCircle=function(W,pe,$,de){return this._queryCircle(W,pe,$,!0,de)},Er.prototype._queryCell=function(W,pe,$,de,ke,Fe,Je,ht){var Dt=Je.seenUids,tr=this.boxCells[ke];if(tr!==null)for(var pr=this.bboxes,yr=0,Rr=tr;yr<Rr.length;yr+=1){var Kr=Rr[yr];if(!Dt.box[Kr]){Dt.box[Kr]=!0;var $r=Kr*4;if(W<=pr[$r+2]&&pe<=pr[$r+3]&&$>=pr[$r+0]&&de>=pr[$r+1]&&(!ht||ht(this.boxKeys[Kr]))){if(Je.hitTest)return Fe.push(!0),!0;Fe.push({key:this.boxKeys[Kr],x1:pr[$r],y1:pr[$r+1],x2:pr[$r+2],y2:pr[$r+3]})}}}var Xr=this.circleCells[ke];if(Xr!==null)for(var rn=this.circles,xn=0,Fn=Xr;xn<Fn.length;xn+=1){var Gn=Fn[xn];if(!Dt.circle[Gn]){Dt.circle[Gn]=!0;var oa=Gn*3;if(this._circleAndRectCollide(rn[oa],rn[oa+1],rn[oa+2],W,pe,$,de)&&(!ht||ht(this.circleKeys[Gn]))){if(Je.hitTest)return Fe.push(!0),!0;var fa=rn[oa],la=rn[oa+1],wa=rn[oa+2];Fe.push({key:this.circleKeys[Gn],x1:fa-wa,y1:la-wa,x2:fa+wa,y2:la+wa})}}}},Er.prototype._queryCellCircle=function(W,pe,$,de,ke,Fe,Je,ht){var Dt=Je.circle,tr=Je.seenUids,pr=this.boxCells[ke];if(pr!==null)for(var yr=this.bboxes,Rr=0,Kr=pr;Rr<Kr.length;Rr+=1){var $r=Kr[Rr];if(!tr.box[$r]){tr.box[$r]=!0;var Xr=$r*4;if(this._circleAndRectCollide(Dt.x,Dt.y,Dt.radius,yr[Xr+0],yr[Xr+1],yr[Xr+2],yr[Xr+3])&&(!ht||ht(this.boxKeys[$r])))return Fe.push(!0),!0}}var rn=this.circleCells[ke];if(rn!==null)for(var xn=this.circles,Fn=0,Gn=rn;Fn<Gn.length;Fn+=1){var oa=Gn[Fn];if(!tr.circle[oa]){tr.circle[oa]=!0;var fa=oa*3;if(this._circlesCollide(xn[fa],xn[fa+1],xn[fa+2],Dt.x,Dt.y,Dt.radius)&&(!ht||ht(this.circleKeys[oa])))return Fe.push(!0),!0}}},Er.prototype._forEachCell=function(W,pe,$,de,ke,Fe,Je,ht){for(var Dt=this._convertToXCellCoord(W),tr=this._convertToYCellCoord(pe),pr=this._convertToXCellCoord($),yr=this._convertToYCellCoord(de),Rr=Dt;Rr<=pr;Rr++)for(var Kr=tr;Kr<=yr;Kr++){var $r=this.xCellCount*Kr+Rr;if(ke.call(this,W,pe,$,de,$r,Fe,Je,ht))return}},Er.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},Er.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},Er.prototype._circlesCollide=function(W,pe,$,de,ke,Fe){var Je=de-W,ht=ke-pe,Dt=$+Fe;return Dt*Dt>Je*Je+ht*ht},Er.prototype._circleAndRectCollide=function(W,pe,$,de,ke,Fe,Je){var ht=(Fe-de)/2,Dt=Math.abs(W-(de+ht));if(Dt>ht+$)return!1;var tr=(Je-ke)/2,pr=Math.abs(pe-(ke+tr));if(pr>tr+$)return!1;if(Dt<=ht||pr<=tr)return!0;var yr=Dt-ht,Rr=pr-tr;return yr*yr+Rr*Rr<=$*$};function jr(ce,W,pe,$,de){var ke=e.create();return W?(e.scale(ke,ke,[1/de,1/de,1]),pe||e.rotateZ(ke,ke,$.angle)):e.multiply(ke,$.labelPlaneMatrix,ce),ke}function kn(ce,W,pe,$,de){if(W){var ke=e.clone(ce);return e.scale(ke,ke,[de,de,1]),pe||e.rotateZ(ke,ke,-$.angle),ke}else return $.glCoordMatrix}function mn(ce,W){var pe=[ce.x,ce.y,0,1];Sr(pe,pe,W);var $=pe[3];return{point:new e.Point(pe[0]/$,pe[1]/$),signedDistanceFromCamera:$}}function Wn(ce,W){return .5+.5*(ce/W)}function In(ce,W){var pe=ce[0]/ce[3],$=ce[1]/ce[3],de=pe>=-W[0]&&pe<=W[0]&&$>=-W[1]&&$<=W[1];return de}function $n(ce,W,pe,$,de,ke,Fe,Je){var ht=$?ce.textSizeData:ce.iconSizeData,Dt=e.evaluateSizeForZoom(ht,pe.transform.zoom),tr=[256/pe.width*2+1,256/pe.height*2+1],pr=$?ce.text.dynamicLayoutVertexArray:ce.icon.dynamicLayoutVertexArray;pr.clear();for(var yr=ce.lineVertexArray,Rr=$?ce.text.placedSymbolArray:ce.icon.placedSymbolArray,Kr=pe.transform.width/pe.transform.height,$r=!1,Xr=0;Xr<Rr.length;Xr++){var rn=Rr.get(Xr);if(rn.hidden||rn.writingMode===e.WritingMode.vertical&&!$r){ei(rn.numGlyphs,pr);continue}$r=!1;var xn=[rn.anchorX,rn.anchorY,0,1];if(e.transformMat4(xn,xn,W),!In(xn,tr)){ei(rn.numGlyphs,pr);continue}var Fn=xn[3],Gn=Wn(pe.transform.cameraToCenterDistance,Fn),oa=e.evaluateSizeForFeature(ht,Dt,rn),fa=Fe?oa/Gn:oa*Gn,la=new e.Point(rn.anchorX,rn.anchorY),wa=mn(la,de).point,La={},Ca=Ra(rn,fa,!1,Je,W,de,ke,ce.glyphOffsetArray,yr,pr,wa,la,La,Kr);$r=Ca.useVertical,(Ca.notEnoughRoom||$r||Ca.needsFlipping&&Ra(rn,fa,!0,Je,W,de,ke,ce.glyphOffsetArray,yr,pr,wa,la,La,Kr).notEnoughRoom)&&ei(rn.numGlyphs,pr)}$?ce.text.dynamicLayoutVertexBuffer.updateData(pr):ce.icon.dynamicLayoutVertexBuffer.updateData(pr)}function Kn(ce,W,pe,$,de,ke,Fe,Je,ht,Dt,tr){var pr=Je.glyphStartIndex+Je.numGlyphs,yr=Je.lineStartIndex,Rr=Je.lineStartIndex+Je.lineLength,Kr=W.getoffsetX(Je.glyphStartIndex),$r=W.getoffsetX(pr-1),Xr=Ka(ce*Kr,pe,$,de,ke,Fe,Je.segment,yr,Rr,ht,Dt,tr);if(!Xr)return null;var rn=Ka(ce*$r,pe,$,de,ke,Fe,Je.segment,yr,Rr,ht,Dt,tr);return rn?{first:Xr,last:rn}:null}function ma(ce,W,pe,$){if(ce===e.WritingMode.horizontal){var de=Math.abs(pe.y-W.y),ke=Math.abs(pe.x-W.x)*$;if(de>ke)return{useVertical:!0}}return(ce===e.WritingMode.vertical?W.y<pe.y:W.x>pe.x)?{needsFlipping:!0}:null}function Ra(ce,W,pe,$,de,ke,Fe,Je,ht,Dt,tr,pr,yr,Rr){var Kr=W/24,$r=ce.lineOffsetX*Kr,Xr=ce.lineOffsetY*Kr,rn;if(ce.numGlyphs>1){var xn=ce.glyphStartIndex+ce.numGlyphs,Fn=ce.lineStartIndex,Gn=ce.lineStartIndex+ce.lineLength,oa=Kn(Kr,Je,$r,Xr,pe,tr,pr,ce,ht,ke,yr);if(!oa)return{notEnoughRoom:!0};var fa=mn(oa.first.point,Fe).point,la=mn(oa.last.point,Fe).point;if($&&!pe){var wa=ma(ce.writingMode,fa,la,Rr);if(wa)return wa}rn=[oa.first];for(var La=ce.glyphStartIndex+1;La<xn-1;La++)rn.push(Ka(Kr*Je.getoffsetX(La),$r,Xr,pe,tr,pr,ce.segment,Fn,Gn,ht,ke,yr));rn.push(oa.last)}else{if($&&!pe){var Ca=mn(pr,de).point,Fa=ce.lineStartIndex+ce.segment+1,Ba=new e.Point(ht.getx(Fa),ht.gety(Fa)),ti=mn(Ba,de),pi=ti.signedDistanceFromCamera>0?ti.point:_i(pr,Ba,Ca,1,de),Yi=ma(ce.writingMode,Ca,pi,Rr);if(Yi)return Yi}var xi=Ka(Kr*Je.getoffsetX(ce.glyphStartIndex),$r,Xr,pe,tr,pr,ce.segment,ce.lineStartIndex,ce.lineStartIndex+ce.lineLength,ht,ke,yr);if(!xi)return{notEnoughRoom:!0};rn=[xi]}for(var ki=0,Ja=rn;ki<Ja.length;ki+=1){var Wi=Ja[ki];e.addDynamicAttributes(Dt,Wi.point,Wi.angle)}return{}}function _i(ce,W,pe,$,de){var ke=mn(ce.add(ce.sub(W)._unit()),de).point,Fe=pe.sub(ke);return pe.add(Fe._mult($/Fe.mag()))}function Ka(ce,W,pe,$,de,ke,Fe,Je,ht,Dt,tr,pr){var yr=$?ce-W:ce+W,Rr=yr>0?1:-1,Kr=0;$&&(Rr*=-1,Kr=Math.PI),Rr<0&&(Kr+=Math.PI);for(var $r=Rr>0?Je+Fe:Je+Fe+1,Xr=de,rn=de,xn=0,Fn=0,Gn=Math.abs(yr),oa=[];xn+Fn<=Gn;){if($r+=Rr,$r<Je||$r>=ht)return null;if(rn=Xr,oa.push(Xr),Xr=pr[$r],Xr===void 0){var fa=new e.Point(Dt.getx($r),Dt.gety($r)),la=mn(fa,tr);if(la.signedDistanceFromCamera>0)Xr=pr[$r]=la.point;else{var wa=$r-Rr,La=xn===0?ke:new e.Point(Dt.getx(wa),Dt.gety(wa));Xr=_i(La,fa,rn,Gn-xn+1,tr)}}xn+=Fn,Fn=rn.dist(Xr)}var Ca=(Gn-xn)/Fn,Fa=Xr.sub(rn),Ba=Fa.mult(Ca)._add(rn);Ba._add(Fa._unit()._perp()._mult(pe*Rr));var ti=Kr+Math.atan2(Xr.y-rn.y,Xr.x-rn.x);return oa.push(Ba),{point:Ba,angle:ti,path:oa}}var ri=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ei(ce,W){for(var pe=0;pe<ce;pe++){var $=W.length;W.resize($+4),W.float32.set(ri,$*3)}}function Sr(ce,W,pe){var $=W[0],de=W[1];return ce[0]=pe[0]*$+pe[4]*de+pe[12],ce[1]=pe[1]*$+pe[5]*de+pe[13],ce[3]=pe[3]*$+pe[7]*de+pe[15],ce}var bn=100,dn=function(W,pe,$){pe===void 0&&(pe=new Er(W.width+2*bn,W.height+2*bn,25)),$===void 0&&($=new Er(W.width+2*bn,W.height+2*bn,25)),this.transform=W,this.grid=pe,this.ignoredGrid=$,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+bn,this.screenBottomBoundary=W.height+bn,this.gridRightBoundary=W.width+2*bn,this.gridBottomBoundary=W.height+2*bn};dn.prototype.placeCollisionBox=function(W,pe,$,de,ke){var Fe=this.projectAndGetPerspectiveRatio(de,W.anchorPointX,W.anchorPointY),Je=$*Fe.perspectiveRatio,ht=W.x1*Je+Fe.point.x,Dt=W.y1*Je+Fe.point.y,tr=W.x2*Je+Fe.point.x,pr=W.y2*Je+Fe.point.y;return!this.isInsideGrid(ht,Dt,tr,pr)||!pe&&this.grid.hitTest(ht,Dt,tr,pr,ke)?{box:[],offscreen:!1}:{box:[ht,Dt,tr,pr],offscreen:this.isOffscreen(ht,Dt,tr,pr)}},dn.prototype.placeCollisionCircles=function(W,pe,$,de,ke,Fe,Je,ht,Dt,tr,pr,yr,Rr){var Kr=[],$r=new e.Point(pe.anchorX,pe.anchorY),Xr=mn($r,Fe),rn=Wn(this.transform.cameraToCenterDistance,Xr.signedDistanceFromCamera),xn=tr?ke/rn:ke*rn,Fn=xn/e.ONE_EM,Gn=mn($r,Je).point,oa={},fa=pe.lineOffsetX*Fn,la=pe.lineOffsetY*Fn,wa=Kn(Fn,de,fa,la,!1,Gn,$r,pe,$,Je,oa),La=!1,Ca=!1,Fa=!0;if(wa){for(var Ba=yr*.5*rn+Rr,ti=new e.Point(-bn,-bn),pi=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Yi=new Dr,xi=wa.first,ki=wa.last,Ja=[],Wi=xi.path.length-1;Wi>=1;Wi--)Ja.push(xi.path[Wi]);for(var $i=1;$i<ki.path.length;$i++)Ja.push(ki.path[$i]);var to=Ba*2.5;if(ht){var Ri=Ja.map(function(Qu){return mn(Qu,ht)});Ri.some(function(Qu){return Qu.signedDistanceFromCamera<=0})?Ja=[]:Ja=Ri.map(function(Qu){return Qu.point})}var ho=[];if(Ja.length>0){for(var gi=Ja[0].clone(),zi=Ja[0].clone(),Go=1;Go<Ja.length;Go++)gi.x=Math.min(gi.x,Ja[Go].x),gi.y=Math.min(gi.y,Ja[Go].y),zi.x=Math.max(zi.x,Ja[Go].x),zi.y=Math.max(zi.y,Ja[Go].y);gi.x>=ti.x&&zi.x<=pi.x&&gi.y>=ti.y&&zi.y<=pi.y?ho=[Ja]:zi.x<ti.x||gi.x>pi.x||zi.y<ti.y||gi.y>pi.y?ho=[]:ho=e.clipLine([Ja],ti.x,ti.y,pi.x,pi.y)}for(var as=0,du=ho;as<du.length;as+=1){var gu=du[as];Yi.reset(gu,Ba*.25);var Zu=0;Yi.length<=.5*Ba?Zu=1:Zu=Math.ceil(Yi.paddedLength/to)+1;for(var Ku=0;Ku<Zu;Ku++){var cf=Ku/Math.max(Zu-1,1),Ju=Yi.lerp(cf),bl=Ju.x+bn,kf=Ju.y+bn;Kr.push(bl,kf,Ba,0);var Zs=bl-Ba,Ql=kf-Ba,$u=bl+Ba,zu=kf+Ba;if(Fa=Fa&&this.isOffscreen(Zs,Ql,$u,zu),Ca=Ca||this.isInsideGrid(Zs,Ql,$u,zu),!W&&this.grid.hitTestCircle(bl,kf,Ba,pr)&&(La=!0,!Dt))return{circles:[],offscreen:!1,collisionDetected:La}}}}return{circles:!Dt&&La||!Ca?[]:Kr,offscreen:Fa,collisionDetected:La}},dn.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var pe=[],$=1/0,de=1/0,ke=-1/0,Fe=-1/0,Je=0,ht=W;Je<ht.length;Je+=1){var Dt=ht[Je],tr=new e.Point(Dt.x+bn,Dt.y+bn);$=Math.min($,tr.x),de=Math.min(de,tr.y),ke=Math.max(ke,tr.x),Fe=Math.max(Fe,tr.y),pe.push(tr)}for(var pr=this.grid.query($,de,ke,Fe).concat(this.ignoredGrid.query($,de,ke,Fe)),yr={},Rr={},Kr=0,$r=pr;Kr<$r.length;Kr+=1){var Xr=$r[Kr],rn=Xr.key;if(yr[rn.bucketInstanceId]===void 0&&(yr[rn.bucketInstanceId]={}),!yr[rn.bucketInstanceId][rn.featureIndex]){var xn=[new e.Point(Xr.x1,Xr.y1),new e.Point(Xr.x2,Xr.y1),new e.Point(Xr.x2,Xr.y2),new e.Point(Xr.x1,Xr.y2)];!e.polygonIntersectsPolygon(pe,xn)||(yr[rn.bucketInstanceId][rn.featureIndex]=!0,Rr[rn.bucketInstanceId]===void 0&&(Rr[rn.bucketInstanceId]=[]),Rr[rn.bucketInstanceId].push(rn.featureIndex))}}return Rr},dn.prototype.insertCollisionBox=function(W,pe,$,de,ke){var Fe=pe?this.ignoredGrid:this.grid,Je={bucketInstanceId:$,featureIndex:de,collisionGroupID:ke};Fe.insert(Je,W[0],W[1],W[2],W[3])},dn.prototype.insertCollisionCircles=function(W,pe,$,de,ke){for(var Fe=pe?this.ignoredGrid:this.grid,Je={bucketInstanceId:$,featureIndex:de,collisionGroupID:ke},ht=0;ht<W.length;ht+=4)Fe.insertCircle(Je,W[ht],W[ht+1],W[ht+2])},dn.prototype.projectAndGetPerspectiveRatio=function(W,pe,$){var de=[pe,$,0,1];Sr(de,de,W);var ke=new e.Point((de[0]/de[3]+1)/2*this.transform.width+bn,(-de[1]/de[3]+1)/2*this.transform.height+bn);return{point:ke,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/de[3])}},dn.prototype.isOffscreen=function(W,pe,$,de){return $<bn||W>=this.screenRightBoundary||de<bn||pe>this.screenBottomBoundary},dn.prototype.isInsideGrid=function(W,pe,$,de){return $>=0&&W<this.gridRightBoundary&&de>=0&&pe<this.gridBottomBoundary},dn.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-bn,-bn,0]),W};function Ln(ce,W,pe){return W*(e.EXTENT/(ce.tileSize*Math.pow(2,pe-ce.tileID.overscaledZ)))}var ra=function(W,pe,$,de){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?pe:-pe))):this.opacity=de&&$?1:0,this.placed=$};ra.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ya=function(W,pe,$,de,ke){this.text=new ra(W?W.text:null,pe,$,ke),this.icon=new ra(W?W.icon:null,pe,de,ke)};ya.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var sa=function(W,pe,$){this.text=W,this.icon=pe,this.skipFade=$},Bn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Qn=function(W,pe,$,de,ke){this.bucketInstanceId=W,this.featureIndex=pe,this.sourceLayerIndex=$,this.bucketIndex=de,this.tileID=ke},Xa=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};Xa.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var pe=++this.maxGroupID;this.collisionGroups[W]={ID:pe,predicate:function($){return $.collisionGroupID===pe}}}return this.collisionGroups[W]};function mi(ce,W,pe,$,de){var ke=e.getAnchorAlignment(ce),Fe=ke.horizontalAlign,Je=ke.verticalAlign,ht=-(Fe-.5)*W,Dt=-(Je-.5)*pe,tr=e.evaluateVariableOffset(ce,$);return new e.Point(ht+tr[0]*de,Dt+tr[1]*de)}function Yt(ce,W,pe,$,de,ke){var Fe=ce.x1,Je=ce.x2,ht=ce.y1,Dt=ce.y2,tr=ce.anchorPointX,pr=ce.anchorPointY,yr=new e.Point(W,pe);return $&&yr._rotate(de?ke:-ke),{x1:Fe+yr.x,y1:ht+yr.y,x2:Je+yr.x,y2:Dt+yr.y,anchorPointX:tr,anchorPointY:pr}}var gr=function(W,pe,$,de){this.transform=W.clone(),this.collisionIndex=new dn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=pe,this.retainedQueryData={},this.collisionGroups=new Xa($),this.collisionCircleArrays={},this.prevPlacement=de,de&&(de.prevPlacement=void 0),this.placedOrientations={}};gr.prototype.getBucketParts=function(W,pe,$,de){var ke=$.getBucket(pe),Fe=$.latestFeatureIndex;if(!(!ke||!Fe||pe.id!==ke.layerIds[0])){var Je=$.collisionBoxArray,ht=ke.layers[0].layout,Dt=Math.pow(2,this.transform.zoom-$.tileID.overscaledZ),tr=$.tileSize/e.EXTENT,pr=this.transform.calculatePosMatrix($.tileID.toUnwrapped()),yr=ht.get("text-pitch-alignment")==="map",Rr=ht.get("text-rotation-alignment")==="map",Kr=Ln($,1,this.transform.zoom),$r=jr(pr,yr,Rr,this.transform,Kr),Xr=null;if(yr){var rn=kn(pr,yr,Rr,this.transform,Kr);Xr=e.multiply([],this.transform.labelPlaneMatrix,rn)}this.retainedQueryData[ke.bucketInstanceId]=new Qn(ke.bucketInstanceId,Fe,ke.sourceLayerIndex,ke.index,$.tileID);var xn={bucket:ke,layout:ht,posMatrix:pr,textLabelPlaneMatrix:$r,labelToScreenMatrix:Xr,scale:Dt,textPixelRatio:tr,holdingForFade:$.holdingForFade(),collisionBoxArray:Je,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ke.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ke.sourceID)};if(de)for(var Fn=0,Gn=ke.sortKeyRanges;Fn<Gn.length;Fn+=1){var oa=Gn[Fn],fa=oa.sortKey,la=oa.symbolInstanceStart,wa=oa.symbolInstanceEnd;W.push({sortKey:fa,symbolInstanceStart:la,symbolInstanceEnd:wa,parameters:xn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:ke.symbolInstances.length,parameters:xn})}},gr.prototype.attemptAnchorPlacement=function(W,pe,$,de,ke,Fe,Je,ht,Dt,tr,pr,yr,Rr,Kr,$r){var Xr=[yr.textOffset0,yr.textOffset1],rn=mi(W,$,de,Xr,ke),xn=this.collisionIndex.placeCollisionBox(Yt(pe,rn.x,rn.y,Fe,Je,this.transform.angle),pr,ht,Dt,tr.predicate);if($r){var Fn=this.collisionIndex.placeCollisionBox(Yt($r,rn.x,rn.y,Fe,Je,this.transform.angle),pr,ht,Dt,tr.predicate);if(Fn.box.length===0)return}if(xn.box.length>0){var Gn;return this.prevPlacement&&this.prevPlacement.variableOffsets[yr.crossTileID]&&this.prevPlacement.placements[yr.crossTileID]&&this.prevPlacement.placements[yr.crossTileID].text&&(Gn=this.prevPlacement.variableOffsets[yr.crossTileID].anchor),this.variableOffsets[yr.crossTileID]={textOffset:Xr,width:$,height:de,anchor:W,textBoxScale:ke,prevAnchor:Gn},this.markUsedJustification(Rr,W,yr,Kr),Rr.allowVerticalPlacement&&(this.markUsedOrientation(Rr,Kr,yr),this.placedOrientations[yr.crossTileID]=Kr),{shift:rn,placedGlyphBoxes:xn}}},gr.prototype.placeLayerBucketPart=function(W,pe,$){var de=this,ke=W.parameters,Fe=ke.bucket,Je=ke.layout,ht=ke.posMatrix,Dt=ke.textLabelPlaneMatrix,tr=ke.labelToScreenMatrix,pr=ke.textPixelRatio,yr=ke.holdingForFade,Rr=ke.collisionBoxArray,Kr=ke.partiallyEvaluatedTextSize,$r=ke.collisionGroup,Xr=Je.get("text-optional"),rn=Je.get("icon-optional"),xn=Je.get("text-allow-overlap"),Fn=Je.get("icon-allow-overlap"),Gn=Je.get("text-rotation-alignment")==="map",oa=Je.get("text-pitch-alignment")==="map",fa=Je.get("icon-text-fit")!=="none",la=Je.get("symbol-z-order")==="viewport-y",wa=xn&&(Fn||!Fe.hasIconData()||rn),La=Fn&&(xn||!Fe.hasTextData()||Xr);!Fe.collisionArrays&&Rr&&Fe.deserializeCollisionBoxes(Rr);var Ca=function(xi,ki){if(!pe[xi.crossTileID]){if(yr){de.placements[xi.crossTileID]=new sa(!1,!1,!1);return}var Ja=!1,Wi=!1,$i=!0,to=null,Ri={box:null,offscreen:null},ho={box:null,offscreen:null},gi=null,zi=null,Go=null,as=0,du=0,gu=0;ki.textFeatureIndex?as=ki.textFeatureIndex:xi.useRuntimeCollisionCircles&&(as=xi.featureIndex),ki.verticalTextFeatureIndex&&(du=ki.verticalTextFeatureIndex);var Zu=ki.textBox;if(Zu){var Ku=function(Zo){var zl=e.WritingMode.horizontal;if(Fe.allowVerticalPlacement&&!Zo&&de.prevPlacement){var Ol=de.prevPlacement.placedOrientations[xi.crossTileID];Ol&&(de.placedOrientations[xi.crossTileID]=Ol,zl=Ol,de.markUsedOrientation(Fe,zl,xi))}return zl},cf=function(Zo,zl){if(Fe.allowVerticalPlacement&&xi.numVerticalGlyphVertices>0&&ki.verticalTextBox)for(var Ol=0,lh=Fe.writingModes;Ol<lh.length;Ol+=1){var uv=lh[Ol];if(uv===e.WritingMode.vertical?(Ri=zl(),ho=Ri):Ri=Zo(),Ri&&Ri.box&&Ri.box.length)break}else Ri=Zo()};if(Je.get("text-variable-anchor")){var Zs=Je.get("text-variable-anchor");if(de.prevPlacement&&de.prevPlacement.variableOffsets[xi.crossTileID]){var Ql=de.prevPlacement.variableOffsets[xi.crossTileID];Zs.indexOf(Ql.anchor)>0&&(Zs=Zs.filter(function(Zo){return Zo!==Ql.anchor}),Zs.unshift(Ql.anchor))}var $u=function(Zo,zl,Ol){for(var lh=Zo.x2-Zo.x1,uv=Zo.y2-Zo.y1,wd=xi.textBoxScale,Td=fa&&!Fn?zl:null,Rc={box:[],offscreen:!1},Ad=xn?Zs.length*2:Zs.length,uh=0;uh<Ad;++uh){var Md=Zs[uh%Zs.length],Ed=uh>=Zs.length,fv=de.attemptAnchorPlacement(Md,Zo,lh,uv,wd,Gn,oa,pr,ht,$r,Ed,xi,Fe,Ol,Td);if(fv&&(Rc=fv.placedGlyphBoxes,Rc&&Rc.box&&Rc.box.length)){Ja=!0,to=fv.shift;break}}return Rc},zu=function(){return $u(Zu,ki.iconBox,e.WritingMode.horizontal)},Qu=function(){var Zo=ki.verticalTextBox,zl=Ri&&Ri.box&&Ri.box.length;return Fe.allowVerticalPlacement&&!zl&&xi.numVerticalGlyphVertices>0&&Zo?$u(Zo,ki.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};cf(zu,Qu),Ri&&(Ja=Ri.box,$i=Ri.offscreen);var ah=Ku(Ri&&Ri.box);if(!Ja&&de.prevPlacement){var Nf=de.prevPlacement.variableOffsets[xi.crossTileID];Nf&&(de.variableOffsets[xi.crossTileID]=Nf,de.markUsedJustification(Fe,Nf.anchor,xi,ah))}}else{var Ju=function(Zo,zl){var Ol=de.collisionIndex.placeCollisionBox(Zo,xn,pr,ht,$r.predicate);return Ol&&Ol.box&&Ol.box.length&&(de.markUsedOrientation(Fe,zl,xi),de.placedOrientations[xi.crossTileID]=zl),Ol},bl=function(){return Ju(Zu,e.WritingMode.horizontal)},kf=function(){var Zo=ki.verticalTextBox;return Fe.allowVerticalPlacement&&xi.numVerticalGlyphVertices>0&&Zo?Ju(Zo,e.WritingMode.vertical):{box:null,offscreen:null}};cf(bl,kf),Ku(Ri&&Ri.box&&Ri.box.length)}}if(gi=Ri,Ja=gi&&gi.box&&gi.box.length>0,$i=gi&&gi.offscreen,xi.useRuntimeCollisionCircles){var Bs=Fe.text.placedSymbolArray.get(xi.centerJustifiedTextSymbolIndex),Pc=e.evaluateSizeForFeature(Fe.textSizeData,Kr,Bs),il=Je.get("text-padding"),Dc=xi.collisionCircleDiameter;zi=de.collisionIndex.placeCollisionCircles(xn,Bs,Fe.lineVertexArray,Fe.glyphOffsetArray,Pc,ht,Dt,tr,$,oa,$r.predicate,Dc,il),Ja=xn||zi.circles.length>0&&!zi.collisionDetected,$i=$i&&zi.offscreen}if(ki.iconFeatureIndex&&(gu=ki.iconFeatureIndex),ki.iconBox){var ih=function(Zo){var zl=fa&&to?Yt(Zo,to.x,to.y,Gn,oa,de.transform.angle):Zo;return de.collisionIndex.placeCollisionBox(zl,Fn,pr,ht,$r.predicate)};ho&&ho.box&&ho.box.length&&ki.verticalIconBox?(Go=ih(ki.verticalIconBox),Wi=Go.box.length>0):(Go=ih(ki.iconBox),Wi=Go.box.length>0),$i=$i&&Go.offscreen}var oh=Xr||xi.numHorizontalGlyphVertices===0&&xi.numVerticalGlyphVertices===0,qv=rn||xi.numIconVertices===0;if(!oh&&!qv?Wi=Ja=Wi&&Ja:qv?oh||(Wi=Wi&&Ja):Ja=Wi&&Ja,Ja&&gi&&gi.box&&(ho&&ho.box&&du?de.collisionIndex.insertCollisionBox(gi.box,Je.get("text-ignore-placement"),Fe.bucketInstanceId,du,$r.ID):de.collisionIndex.insertCollisionBox(gi.box,Je.get("text-ignore-placement"),Fe.bucketInstanceId,as,$r.ID)),Wi&&Go&&de.collisionIndex.insertCollisionBox(Go.box,Je.get("icon-ignore-placement"),Fe.bucketInstanceId,gu,$r.ID),zi&&(Ja&&de.collisionIndex.insertCollisionCircles(zi.circles,Je.get("text-ignore-placement"),Fe.bucketInstanceId,as,$r.ID),$)){var sh=Fe.bucketInstanceId,ac=de.collisionCircleArrays[sh];ac===void 0&&(ac=de.collisionCircleArrays[sh]=new Bn);for(var ic=0;ic<zi.circles.length;ic+=4)ac.circles.push(zi.circles[ic+0]),ac.circles.push(zi.circles[ic+1]),ac.circles.push(zi.circles[ic+2]),ac.circles.push(zi.collisionDetected?1:0)}de.placements[xi.crossTileID]=new sa(Ja||wa,Wi||La,$i||Fe.justReloaded),pe[xi.crossTileID]=!0}};if(la)for(var Fa=Fe.getSortedSymbolIndexes(this.transform.angle),Ba=Fa.length-1;Ba>=0;--Ba){var ti=Fa[Ba];Ca(Fe.symbolInstances.get(ti),Fe.collisionArrays[ti])}else for(var pi=W.symbolInstanceStart;pi<W.symbolInstanceEnd;pi++)Ca(Fe.symbolInstances.get(pi),Fe.collisionArrays[pi]);if($&&Fe.bucketInstanceId in this.collisionCircleArrays){var Yi=this.collisionCircleArrays[Fe.bucketInstanceId];e.invert(Yi.invProjMatrix,ht),Yi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Fe.justReloaded=!1},gr.prototype.markUsedJustification=function(W,pe,$,de){var ke={left:$.leftJustifiedTextSymbolIndex,center:$.centerJustifiedTextSymbolIndex,right:$.rightJustifiedTextSymbolIndex},Fe;de===e.WritingMode.vertical?Fe=$.verticalPlacedTextSymbolIndex:Fe=ke[e.getAnchorJustification(pe)];for(var Je=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex,$.verticalPlacedTextSymbolIndex],ht=0,Dt=Je;ht<Dt.length;ht+=1){var tr=Dt[ht];tr>=0&&(Fe>=0&&tr!==Fe?W.text.placedSymbolArray.get(tr).crossTileID=0:W.text.placedSymbolArray.get(tr).crossTileID=$.crossTileID)}},gr.prototype.markUsedOrientation=function(W,pe,$){for(var de=pe===e.WritingMode.horizontal||pe===e.WritingMode.horizontalOnly?pe:0,ke=pe===e.WritingMode.vertical?pe:0,Fe=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex],Je=0,ht=Fe;Je<ht.length;Je+=1){var Dt=ht[Je];W.text.placedSymbolArray.get(Dt).placedOrientation=de}$.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get($.verticalPlacedTextSymbolIndex).placedOrientation=ke)},gr.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var pe=this.prevPlacement,$=!1;this.prevZoomAdjustment=pe?pe.zoomAdjustment(this.transform.zoom):0;var de=pe?pe.symbolFadeChange(W):1,ke=pe?pe.opacities:{},Fe=pe?pe.variableOffsets:{},Je=pe?pe.placedOrientations:{};for(var ht in this.placements){var Dt=this.placements[ht],tr=ke[ht];tr?(this.opacities[ht]=new ya(tr,de,Dt.text,Dt.icon),$=$||Dt.text!==tr.text.placed||Dt.icon!==tr.icon.placed):(this.opacities[ht]=new ya(null,de,Dt.text,Dt.icon,Dt.skipFade),$=$||Dt.text||Dt.icon)}for(var pr in ke){var yr=ke[pr];if(!this.opacities[pr]){var Rr=new ya(yr,de,!1,!1);Rr.isHidden()||(this.opacities[pr]=Rr,$=$||yr.text.placed||yr.icon.placed)}}for(var Kr in Fe)!this.variableOffsets[Kr]&&this.opacities[Kr]&&!this.opacities[Kr].isHidden()&&(this.variableOffsets[Kr]=Fe[Kr]);for(var $r in Je)!this.placedOrientations[$r]&&this.opacities[$r]&&!this.opacities[$r].isHidden()&&(this.placedOrientations[$r]=Je[$r]);$?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=pe?pe.lastPlacementChangeTime:W)},gr.prototype.updateLayerOpacities=function(W,pe){for(var $={},de=0,ke=pe;de<ke.length;de+=1){var Fe=ke[de],Je=Fe.getBucket(W);Je&&Fe.latestFeatureIndex&&W.id===Je.layerIds[0]&&this.updateBucketOpacities(Je,$,Fe.collisionBoxArray)}},gr.prototype.updateBucketOpacities=function(W,pe,$){var de=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var ke=W.layers[0].layout,Fe=new ya(null,0,!1,!1,!0),Je=ke.get("text-allow-overlap"),ht=ke.get("icon-allow-overlap"),Dt=ke.get("text-variable-anchor"),tr=ke.get("text-rotation-alignment")==="map",pr=ke.get("text-pitch-alignment")==="map",yr=ke.get("icon-text-fit")!=="none",Rr=new ya(null,0,Je&&(ht||!W.hasIconData()||ke.get("icon-optional")),ht&&(Je||!W.hasTextData()||ke.get("text-optional")),!0);!W.collisionArrays&&$&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes($);for(var Kr=function(xn,Fn,Gn){for(var oa=0;oa<Fn/4;oa++)xn.opacityVertexArray.emplaceBack(Gn)},$r=function(xn){var Fn=W.symbolInstances.get(xn),Gn=Fn.numHorizontalGlyphVertices,oa=Fn.numVerticalGlyphVertices,fa=Fn.crossTileID,la=pe[fa],wa=de.opacities[fa];la?wa=Fe:wa||(wa=Rr,de.opacities[fa]=wa),pe[fa]=!0;var La=Gn>0||oa>0,Ca=Fn.numIconVertices>0,Fa=de.placedOrientations[Fn.crossTileID],Ba=Fa===e.WritingMode.vertical,ti=Fa===e.WritingMode.horizontal||Fa===e.WritingMode.horizontalOnly;if(La){var pi=Br(wa.text),Yi=Ba?An:pi;Kr(W.text,Gn,Yi);var xi=ti?An:pi;Kr(W.text,oa,xi);var ki=wa.text.isHidden();[Fn.rightJustifiedTextSymbolIndex,Fn.centerJustifiedTextSymbolIndex,Fn.leftJustifiedTextSymbolIndex].forEach(function(gu){gu>=0&&(W.text.placedSymbolArray.get(gu).hidden=ki||Ba?1:0)}),Fn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Fn.verticalPlacedTextSymbolIndex).hidden=ki||ti?1:0);var Ja=de.variableOffsets[Fn.crossTileID];Ja&&de.markUsedJustification(W,Ja.anchor,Fn,Fa);var Wi=de.placedOrientations[Fn.crossTileID];Wi&&(de.markUsedJustification(W,"left",Fn,Wi),de.markUsedOrientation(W,Wi,Fn))}if(Ca){var $i=Br(wa.icon),to=!(yr&&Fn.verticalPlacedIconSymbolIndex&&Ba);if(Fn.placedIconSymbolIndex>=0){var Ri=to?$i:An;Kr(W.icon,Fn.numIconVertices,Ri),W.icon.placedSymbolArray.get(Fn.placedIconSymbolIndex).hidden=wa.icon.isHidden()}if(Fn.verticalPlacedIconSymbolIndex>=0){var ho=to?An:$i;Kr(W.icon,Fn.numVerticalIconVertices,ho),W.icon.placedSymbolArray.get(Fn.verticalPlacedIconSymbolIndex).hidden=wa.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var gi=W.collisionArrays[xn];if(gi){var zi=new e.Point(0,0);if(gi.textBox||gi.verticalTextBox){var Go=!0;if(Dt){var as=de.variableOffsets[fa];as?(zi=mi(as.anchor,as.width,as.height,as.textOffset,as.textBoxScale),tr&&zi._rotate(pr?de.transform.angle:-de.transform.angle)):Go=!1}gi.textBox&&un(W.textCollisionBox.collisionVertexArray,wa.text.placed,!Go||Ba,zi.x,zi.y),gi.verticalTextBox&&un(W.textCollisionBox.collisionVertexArray,wa.text.placed,!Go||ti,zi.x,zi.y)}var du=Boolean(!ti&&gi.verticalIconBox);gi.iconBox&&un(W.iconCollisionBox.collisionVertexArray,wa.icon.placed,du,yr?zi.x:0,yr?zi.y:0),gi.verticalIconBox&&un(W.iconCollisionBox.collisionVertexArray,wa.icon.placed,!du,yr?zi.x:0,yr?zi.y:0)}}},Xr=0;Xr<W.symbolInstances.length;Xr++)$r(Xr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var rn=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=rn.invProjMatrix,W.placementViewportMatrix=rn.viewportMatrix,W.collisionCircleArray=rn.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},gr.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},gr.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},gr.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},gr.prototype.stillRecent=function(W,pe){var $=this.zoomAtLastRecencyCheck===pe?1-this.zoomAdjustment(pe):1;return this.zoomAtLastRecencyCheck=pe,this.commitTime+this.fadeDuration*$>W},gr.prototype.setStale=function(){this.stale=!0};function un(ce,W,pe,$,de){ce.emplaceBack(W?1:0,pe?1:0,$||0,de||0),ce.emplaceBack(W?1:0,pe?1:0,$||0,de||0),ce.emplaceBack(W?1:0,pe?1:0,$||0,de||0),ce.emplaceBack(W?1:0,pe?1:0,$||0,de||0)}var yn=Math.pow(2,25),sn=Math.pow(2,24),Cn=Math.pow(2,17),Tn=Math.pow(2,16),gn=Math.pow(2,9),_r=Math.pow(2,8),wr=Math.pow(2,1);function Br(ce){if(ce.opacity===0&&!ce.placed)return 0;if(ce.opacity===1&&ce.placed)return 4294967295;var W=ce.placed?1:0,pe=Math.floor(ce.opacity*127);return pe*yn+W*sn+pe*Cn+W*Tn+pe*gn+W*_r+pe*wr+W}var An=0,Yn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yn.prototype.continuePlacement=function(W,pe,$,de,ke){for(var Fe=this._bucketParts;this._currentTileIndex<W.length;){var Je=W[this._currentTileIndex];if(pe.getBucketParts(Fe,de,Je,this._sortAcrossTiles),this._currentTileIndex++,ke())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fe.sort(function(Dt,tr){return Dt.sortKey-tr.sortKey}));this._currentPartIndex<Fe.length;){var ht=Fe[this._currentPartIndex];if(pe.placeLayerBucketPart(ht,this._seenCrossTileIDs,$),this._currentPartIndex++,ke())return!0}return!1};var ua=function(W,pe,$,de,ke,Fe,Je){this.placement=new gr(W,ke,Fe,Je),this._currentPlacementIndex=pe.length-1,this._forceFullPlacement=$,this._showCollisionBoxes=de,this._done=!1};ua.prototype.isDone=function(){return this._done},ua.prototype.continuePlacement=function(W,pe,$){for(var de=this,ke=e.browser.now(),Fe=function(){var pr=e.browser.now()-ke;return de._forceFullPlacement?!1:pr>2};this._currentPlacementIndex>=0;){var Je=W[this._currentPlacementIndex],ht=pe[Je],Dt=this.placement.collisionIndex.transform.zoom;if(ht.type==="symbol"&&(!ht.minzoom||ht.minzoom<=Dt)&&(!ht.maxzoom||ht.maxzoom>Dt)){this._inProgressLayer||(this._inProgressLayer=new Yn(ht));var tr=this._inProgressLayer.continuePlacement($[ht.source],this.placement,this._showCollisionBoxes,ht,Fe);if(tr)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ua.prototype.commit=function(W){return this.placement.commit(W),this.placement};var Sn=512/e.EXTENT/2,na=function(W,pe,$){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=$;for(var de=0;de<pe.length;de++){var ke=pe.get(de),Fe=ke.key;this.indexedSymbolInstances[Fe]||(this.indexedSymbolInstances[Fe]=[]),this.indexedSymbolInstances[Fe].push({crossTileID:ke.crossTileID,coord:this.getScaledCoordinates(ke,W)})}};na.prototype.getScaledCoordinates=function(W,pe){var $=pe.canonical.z-this.tileID.canonical.z,de=Sn/Math.pow(2,$);return{x:Math.floor((pe.canonical.x*e.EXTENT+W.anchorX)*de),y:Math.floor((pe.canonical.y*e.EXTENT+W.anchorY)*de)}},na.prototype.findMatches=function(W,pe,$){for(var de=this.tileID.canonical.z<pe.canonical.z?1:Math.pow(2,this.tileID.canonical.z-pe.canonical.z),ke=0;ke<W.length;ke++){var Fe=W.get(ke);if(!Fe.crossTileID){var Je=this.indexedSymbolInstances[Fe.key];if(!!Je)for(var ht=this.getScaledCoordinates(Fe,pe),Dt=0,tr=Je;Dt<tr.length;Dt+=1){var pr=tr[Dt];if(Math.abs(pr.coord.x-ht.x)<=de&&Math.abs(pr.coord.y-ht.y)<=de&&!$[pr.crossTileID]){$[pr.crossTileID]=!0,Fe.crossTileID=pr.crossTileID;break}}}}};var ca=function(){this.maxCrossTileID=0};ca.prototype.generate=function(){return++this.maxCrossTileID};var Ma=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ma.prototype.handleWrapJump=function(W){var pe=Math.round((W-this.lng)/360);if(pe!==0)for(var $ in this.indexes){var de=this.indexes[$],ke={};for(var Fe in de){var Je=de[Fe];Je.tileID=Je.tileID.unwrapTo(Je.tileID.wrap+pe),ke[Je.tileID.key]=Je}this.indexes[$]=ke}this.lng=W},Ma.prototype.addBucket=function(W,pe,$){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===pe.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var de=0;de<pe.symbolInstances.length;de++){var ke=pe.symbolInstances.get(de);ke.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Fe=this.usedCrossTileIDs[W.overscaledZ];for(var Je in this.indexes){var ht=this.indexes[Je];if(Number(Je)>W.overscaledZ)for(var Dt in ht){var tr=ht[Dt];tr.tileID.isChildOf(W)&&tr.findMatches(pe.symbolInstances,W,Fe)}else{var pr=W.scaledTo(Number(Je)),yr=ht[pr.key];yr&&yr.findMatches(pe.symbolInstances,W,Fe)}}for(var Rr=0;Rr<pe.symbolInstances.length;Rr++){var Kr=pe.symbolInstances.get(Rr);Kr.crossTileID||(Kr.crossTileID=$.generate(),Fe[Kr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new na(W,pe.symbolInstances,pe.bucketInstanceId),!0},Ma.prototype.removeBucketCrossTileIDs=function(W,pe){for(var $ in pe.indexedSymbolInstances)for(var de=0,ke=pe.indexedSymbolInstances[$];de<ke.length;de+=1){var Fe=ke[de];delete this.usedCrossTileIDs[W][Fe.crossTileID]}},Ma.prototype.removeStaleBuckets=function(W){var pe=!1;for(var $ in this.indexes){var de=this.indexes[$];for(var ke in de)W[de[ke].bucketInstanceId]||(this.removeBucketCrossTileIDs($,de[ke]),delete de[ke],pe=!0)}return pe};var ka=function(){this.layerIndexes={},this.crossTileIDs=new ca,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ka.prototype.addLayer=function(W,pe,$){var de=this.layerIndexes[W.id];de===void 0&&(de=this.layerIndexes[W.id]=new Ma);var ke=!1,Fe={};de.handleWrapJump($);for(var Je=0,ht=pe;Je<ht.length;Je+=1){var Dt=ht[Je],tr=Dt.getBucket(W);!tr||W.id!==tr.layerIds[0]||(tr.bucketInstanceId||(tr.bucketInstanceId=++this.maxBucketInstanceId),de.addBucket(Dt.tileID,tr,this.crossTileIDs)&&(ke=!0),Fe[tr.bucketInstanceId]=!0)}return de.removeStaleBuckets(Fe)&&(ke=!0),ke},ka.prototype.pruneUnusedLayers=function(W){var pe={};W.forEach(function(de){pe[de]=!0});for(var $ in this.layerIndexes)pe[$]||delete this.layerIndexes[$]};var ga=function(ce,W){return e.emitValidationErrors(ce,W&&W.filter(function(pe){return pe.identifier!=="source.canvas"}))},Ia=e.pick(lr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Mo=e.pick(lr,["setCenter","setZoom","setBearing","setPitch"]),ro=Zr(),Jo=function(ce){function W(pe,$){var de=this;$===void 0&&($={}),ce.call(this),this.map=pe,this.dispatcher=new R(Zt(),this),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new E(pe._requestManager,$.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new ka,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ke=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Fe){var Je={pluginStatus:Fe.pluginStatus,pluginURL:Fe.pluginURL};ke.dispatcher.broadcast("syncRTLPluginState",Je,function(ht,Dt){if(e.triggerPluginCompletionEvent(ht),Dt){var tr=Dt.every(function(yr){return yr});if(tr)for(var pr in ke.sourceCaches)ke.sourceCaches[pr].reload()}})}),this.on("data",function(Fe){if(!(Fe.dataType!=="source"||Fe.sourceDataType!=="metadata")){var Je=de.sourceCaches[Fe.sourceId];if(!!Je){var ht=Je.getSource();if(!(!ht||!ht.vectorLayerIds))for(var Dt in de._layers){var tr=de._layers[Dt];tr.source===ht.id&&de._validateLayer(tr)}}}})}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.loadURL=function($,de){var ke=this;de===void 0&&(de={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Fe=typeof de.validate=="boolean"?de.validate:!e.isMapboxURL($);$=this.map._requestManager.normalizeStyleURL($,de.accessToken);var Je=this.map._requestManager.transformRequest($,e.ResourceType.Style);this._request=e.getJSON(Je,function(ht,Dt){ke._request=null,ht?ke.fire(new e.ErrorEvent(ht)):Dt&&ke._load(Dt,Fe)})},W.prototype.loadJSON=function($,de){var ke=this;de===void 0&&(de={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ke._request=null,ke._load($,de.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(ro,!1)},W.prototype._load=function($,de){if(!(de&&ga(this,e.validateStyle($)))){this._loaded=!0,this.stylesheet=$;for(var ke in $.sources)this.addSource(ke,$.sources[ke],{validate:!1});$.sprite?this._loadSprite($.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL($.glyphs);var Fe=kr(this.stylesheet.layers);this._order=Fe.map(function(tr){return tr.id}),this._layers={},this._serializedLayers={};for(var Je=0,ht=Fe;Je<ht.length;Je+=1){var Dt=ht[Je];Dt=e.createStyleLayer(Dt),Dt.setEventedParent(this,{layer:{id:Dt.id}}),this._layers[Dt.id]=Dt,this._serializedLayers[Dt.id]=Dt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function($){var de=this;this._spriteRequest=c($,this.map._requestManager,function(ke,Fe){if(de._spriteRequest=null,ke)de.fire(new e.ErrorEvent(ke));else if(Fe)for(var Je in Fe)de.imageManager.addImage(Je,Fe[Je]);de.imageManager.setLoaded(!0),de._availableImages=de.imageManager.listImages(),de.dispatcher.broadcast("setImages",de._availableImages),de.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function($){var de=this.sourceCaches[$.source];if(!!de){var ke=$.sourceLayer;if(!!ke){var Fe=de.getSource();(Fe.type==="geojson"||Fe.vectorLayerIds&&Fe.vectorLayerIds.indexOf(ke)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ke+'" does not exist on source "'+Fe.id+'" as specified by style layer "'+$.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var $ in this.sourceCaches)if(!this.sourceCaches[$].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function($){for(var de=[],ke=0,Fe=$;ke<Fe.length;ke+=1){var Je=Fe[ke],ht=this._layers[Je];ht.type!=="custom"&&de.push(ht.serialize())}return de},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var $ in this.sourceCaches)if(this.sourceCaches[$].hasTransition())return!0;for(var de in this._layers)if(this._layers[de].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function($){if(!!this._loaded){var de=this._changed;if(this._changed){var ke=Object.keys(this._updatedLayers),Fe=Object.keys(this._removedLayers);(ke.length||Fe.length)&&this._updateWorkerLayers(ke,Fe);for(var Je in this._updatedSources){var ht=this._updatedSources[Je];ht==="reload"?this._reloadSource(Je):ht==="clear"&&this._clearSource(Je)}this._updateTilesForChangedImages();for(var Dt in this._updatedPaintProps)this._layers[Dt].updateTransitions($);this.light.updateTransitions($),this._resetUpdates()}for(var tr in this.sourceCaches)this.sourceCaches[tr].used=!1;for(var pr=0,yr=this._order;pr<yr.length;pr+=1){var Rr=yr[pr],Kr=this._layers[Rr];Kr.recalculate($,this._availableImages),!Kr.isHidden($.zoom)&&Kr.source&&(this.sourceCaches[Kr.source].used=!0)}this.light.recalculate($),this.z=$.zoom,de&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var $=Object.keys(this._changedImages);if($.length){for(var de in this.sourceCaches)this.sourceCaches[de].reloadTilesForDependencies(["icons","patterns"],$);this._changedImages={}}},W.prototype._updateWorkerLayers=function($,de){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers($),removedIds:de})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function($){var de=this;if(this._checkLoaded(),ga(this,e.validateStyle($)))return!1;$=e.clone$1($),$.layers=kr($.layers);var ke=Vr(this.serialize(),$).filter(function(Je){return!(Je.command in Mo)});if(ke.length===0)return!1;var Fe=ke.filter(function(Je){return!(Je.command in Ia)});if(Fe.length>0)throw new Error("Unimplemented: "+Fe.map(function(Je){return Je.command}).join(", ")+".");return ke.forEach(function(Je){Je.command!=="setTransition"&&de[Je.command].apply(de,Je.args)}),this.stylesheet=$,!0},W.prototype.addImage=function($,de){if(this.getImage($))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage($,de),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function($,de){this.imageManager.updateImage($,de)},W.prototype.getImage=function($){return this.imageManager.getImage($)},W.prototype.removeImage=function($){if(!this.getImage($))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage($),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function($,de,ke){var Fe=this;if(ke===void 0&&(ke={}),this._checkLoaded(),this.sourceCaches[$]!==void 0)throw new Error("There is already a source with this ID");if(!de.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(de).join(", ")+".");var Je=["vector","raster","geojson","video","image"],ht=Je.indexOf(de.type)>=0;if(!(ht&&this._validate(e.validateStyle.source,"sources."+$,de,null,ke))){this.map&&this.map._collectResourceTiming&&(de.collectResourceTiming=!0);var Dt=this.sourceCaches[$]=new Pe($,de,this.dispatcher);Dt.style=this,Dt.setEventedParent(this,function(){return{isSourceLoaded:Fe.loaded(),source:Dt.serialize(),sourceId:$}}),Dt.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function($){if(this._checkLoaded(),this.sourceCaches[$]===void 0)throw new Error("There is no source with this ID");for(var de in this._layers)if(this._layers[de].source===$)return this.fire(new e.ErrorEvent(new Error('Source "'+$+'" cannot be removed while layer "'+de+'" is using it.')));var ke=this.sourceCaches[$];delete this.sourceCaches[$],delete this._updatedSources[$],ke.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:$})),ke.setEventedParent(null),ke.clearTiles(),ke.onRemove&&ke.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function($,de){this._checkLoaded();var ke=this.sourceCaches[$].getSource();ke.setData(de),this._changed=!0},W.prototype.getSource=function($){return this.sourceCaches[$]&&this.sourceCaches[$].getSource()},W.prototype.addLayer=function($,de,ke){ke===void 0&&(ke={}),this._checkLoaded();var Fe=$.id;if(this.getLayer(Fe)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Fe+'" already exists on this map')));return}var Je;if($.type==="custom"){if(ga(this,e.validateCustomStyleLayer($)))return;Je=e.createStyleLayer($)}else{if(typeof $.source=="object"&&(this.addSource(Fe,$.source),$=e.clone$1($),$=e.extend($,{source:Fe})),this._validate(e.validateStyle.layer,"layers."+Fe,$,{arrayIndex:-1},ke))return;Je=e.createStyleLayer($),this._validateLayer(Je),Je.setEventedParent(this,{layer:{id:Fe}}),this._serializedLayers[Je.id]=Je.serialize()}var ht=de?this._order.indexOf(de):this._order.length;if(de&&ht===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+de+'" does not exist on this map.')));return}if(this._order.splice(ht,0,Fe),this._layerOrderChanged=!0,this._layers[Fe]=Je,this._removedLayers[Fe]&&Je.source&&Je.type!=="custom"){var Dt=this._removedLayers[Fe];delete this._removedLayers[Fe],Dt.type!==Je.type?this._updatedSources[Je.source]="clear":(this._updatedSources[Je.source]="reload",this.sourceCaches[Je.source].pause())}this._updateLayer(Je),Je.onAdd&&Je.onAdd(this.map)},W.prototype.moveLayer=function($,de){this._checkLoaded(),this._changed=!0;var ke=this._layers[$];if(!ke){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be moved.")));return}if($!==de){var Fe=this._order.indexOf($);this._order.splice(Fe,1);var Je=de?this._order.indexOf(de):this._order.length;if(de&&Je===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+de+'" does not exist on this map.')));return}this._order.splice(Je,0,$),this._layerOrderChanged=!0}},W.prototype.removeLayer=function($){this._checkLoaded();var de=this._layers[$];if(!de){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be removed.")));return}de.setEventedParent(null);var ke=this._order.indexOf($);this._order.splice(ke,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[$]=de,delete this._layers[$],delete this._serializedLayers[$],delete this._updatedLayers[$],delete this._updatedPaintProps[$],de.onRemove&&de.onRemove(this.map)},W.prototype.getLayer=function($){return this._layers[$]},W.prototype.hasLayer=function($){return $ in this._layers},W.prototype.setLayerZoomRange=function($,de,ke){this._checkLoaded();var Fe=this.getLayer($);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot have zoom extent.")));return}Fe.minzoom===de&&Fe.maxzoom===ke||(de!=null&&(Fe.minzoom=de),ke!=null&&(Fe.maxzoom=ke),this._updateLayer(Fe))},W.prototype.setFilter=function($,de,ke){ke===void 0&&(ke={}),this._checkLoaded();var Fe=this.getLayer($);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Fe.filter,de)){if(de==null){Fe.filter=void 0,this._updateLayer(Fe);return}this._validate(e.validateStyle.filter,"layers."+Fe.id+".filter",de,null,ke)||(Fe.filter=e.clone$1(de),this._updateLayer(Fe))}},W.prototype.getFilter=function($){return e.clone$1(this.getLayer($).filter)},W.prototype.setLayoutProperty=function($,de,ke,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Je=this.getLayer($);if(!Je){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Je.getLayoutProperty(de),ke)||(Je.setLayoutProperty(de,ke,Fe),this._updateLayer(Je))},W.prototype.getLayoutProperty=function($,de){var ke=this.getLayer($);if(!ke){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style.")));return}return ke.getLayoutProperty(de)},W.prototype.setPaintProperty=function($,de,ke,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Je=this.getLayer($);if(!Je){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Je.getPaintProperty(de),ke)){var ht=Je.setPaintProperty(de,ke,Fe);ht&&this._updateLayer(Je),this._changed=!0,this._updatedPaintProps[$]=!0}},W.prototype.getPaintProperty=function($,de){return this.getLayer($).getPaintProperty(de)},W.prototype.setFeatureState=function($,de){this._checkLoaded();var ke=$.source,Fe=$.sourceLayer,Je=this.sourceCaches[ke];if(Je===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ke+"' does not exist in the map's style.")));return}var ht=Je.getSource().type;if(ht==="geojson"&&Fe){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ht==="vector"&&!Fe){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}$.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Je.setFeatureState(Fe,$.id,de)},W.prototype.removeFeatureState=function($,de){this._checkLoaded();var ke=$.source,Fe=this.sourceCaches[ke];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ke+"' does not exist in the map's style.")));return}var Je=Fe.getSource().type,ht=Je==="vector"?$.sourceLayer:void 0;if(Je==="vector"&&!ht){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(de&&typeof $.id!="string"&&typeof $.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Fe.removeFeatureState(ht,$.id,de)},W.prototype.getFeatureState=function($){this._checkLoaded();var de=$.source,ke=$.sourceLayer,Fe=this.sourceCaches[de];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+de+"' does not exist in the map's style.")));return}var Je=Fe.getSource().type;if(Je==="vector"&&!ke){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return $.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Fe.getFeatureState(ke,$.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function($){return $.serialize()}),layers:this._serializeLayers(this._order)},function($){return $!==void 0})},W.prototype._updateLayer=function($){this._updatedLayers[$.id]=!0,$.source&&!this._updatedSources[$.source]&&this.sourceCaches[$.source].getSource().type!=="raster"&&(this._updatedSources[$.source]="reload",this.sourceCaches[$.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function($){for(var de=this,ke=function(ti){return de._layers[ti].type==="fill-extrusion"},Fe={},Je=[],ht=this._order.length-1;ht>=0;ht--){var Dt=this._order[ht];if(ke(Dt)){Fe[Dt]=ht;for(var tr=0,pr=$;tr<pr.length;tr+=1){var yr=pr[tr],Rr=yr[Dt];if(Rr)for(var Kr=0,$r=Rr;Kr<$r.length;Kr+=1){var Xr=$r[Kr];Je.push(Xr)}}}}Je.sort(function(ti,pi){return pi.intersectionZ-ti.intersectionZ});for(var rn=[],xn=this._order.length-1;xn>=0;xn--){var Fn=this._order[xn];if(ke(Fn))for(var Gn=Je.length-1;Gn>=0;Gn--){var oa=Je[Gn].feature;if(Fe[oa.layer.id]<xn)break;rn.push(oa),Je.pop()}else for(var fa=0,la=$;fa<la.length;fa+=1){var wa=la[fa],La=wa[Fn];if(La)for(var Ca=0,Fa=La;Ca<Fa.length;Ca+=1){var Ba=Fa[Ca];rn.push(Ba.feature)}}}return rn},W.prototype.queryRenderedFeatures=function($,de,ke){de&&de.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",de.filter,null,de);var Fe={};if(de&&de.layers){if(!Array.isArray(de.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Je=0,ht=de.layers;Je<ht.length;Je+=1){var Dt=ht[Je],tr=this._layers[Dt];if(!tr)return this.fire(new e.ErrorEvent(new Error("The layer '"+Dt+"' does not exist in the map's style and cannot be queried for features."))),[];Fe[tr.source]=!0}}var pr=[];de.availableImages=this._availableImages;for(var yr in this.sourceCaches)de.layers&&!Fe[yr]||pr.push(ie(this.sourceCaches[yr],this._layers,this._serializedLayers,$,de,ke));return this.placement&&pr.push(oe(this._layers,this._serializedLayers,this.sourceCaches,$,de,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(pr)},W.prototype.querySourceFeatures=function($,de){de&&de.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",de.filter,null,de);var ke=this.sourceCaches[$];return ke?ne(ke,de):[]},W.prototype.addSourceType=function($,de,ke){if(W.getSourceType($))return ke(new Error('A source type called "'+$+'" already exists.'));if(W.setSourceType($,de),!de.workerSourceURL)return ke(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:$,url:de.workerSourceURL},ke)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function($,de){de===void 0&&(de={}),this._checkLoaded();var ke=this.light.getLight(),Fe=!1;for(var Je in $)if(!e.deepEqual($[Je],ke[Je])){Fe=!0;break}if(!!Fe){var ht={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight($,de),this.light.updateTransitions(ht)}},W.prototype._validate=function($,de,ke,Fe,Je){return Je===void 0&&(Je={}),Je&&Je.validate===!1?!1:ga(this,$.call(e.validateStyle,e.extend({key:de,style:this.serialize(),value:ke,styleSpec:e.styleSpec},Fe)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var $ in this._layers){var de=this._layers[$];de.setEventedParent(null)}for(var ke in this.sourceCaches)this.sourceCaches[ke].clearTiles(),this.sourceCaches[ke].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function($){this.sourceCaches[$].clearTiles()},W.prototype._reloadSource=function($){this.sourceCaches[$].resume(),this.sourceCaches[$].reload()},W.prototype._updateSources=function($){for(var de in this.sourceCaches)this.sourceCaches[de].update($)},W.prototype._generateCollisionBoxes=function(){for(var $ in this.sourceCaches)this._reloadSource($)},W.prototype._updatePlacement=function($,de,ke,Fe,Je){Je===void 0&&(Je=!1);for(var ht=!1,Dt=!1,tr={},pr=0,yr=this._order;pr<yr.length;pr+=1){var Rr=yr[pr],Kr=this._layers[Rr];if(Kr.type==="symbol"){if(!tr[Kr.source]){var $r=this.sourceCaches[Kr.source];tr[Kr.source]=$r.getRenderableIds(!0).map(function(fa){return $r.getTileByID(fa)}).sort(function(fa,la){return la.tileID.overscaledZ-fa.tileID.overscaledZ||(fa.tileID.isLessThan(la.tileID)?-1:1)})}var Xr=this.crossTileSymbolIndex.addLayer(Kr,tr[Kr.source],$.center.lng);ht=ht||Xr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Je=Je||this._layerOrderChanged||ke===0,(Je||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),$.zoom))&&(this.pauseablePlacement=new ua($,this._order,Je,de,ke,Fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,tr),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Dt=!0),ht&&this.pauseablePlacement.placement.setStale()),Dt||ht)for(var rn=0,xn=this._order;rn<xn.length;rn+=1){var Fn=xn[rn],Gn=this._layers[Fn];Gn.type==="symbol"&&this.placement.updateLayerOpacities(Gn,tr[Gn.source])}var oa=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return oa},W.prototype._releaseSymbolFadeTiles=function(){for(var $ in this.sourceCaches)this.sourceCaches[$].releaseSymbolFadeTiles()},W.prototype.getImages=function($,de,ke){this.imageManager.getImages(de.icons,ke),this._updateTilesForChangedImages();var Fe=this.sourceCaches[de.source];Fe&&Fe.setDependencies(de.tileID.key,de.type,de.icons)},W.prototype.getGlyphs=function($,de,ke){this.glyphManager.getGlyphs(de.stacks,ke)},W.prototype.getResource=function($,de,ke){return e.makeRequest(de,ke)},W}(e.Evented);Jo.getSourceType=q,Jo.setSourceType=re,Jo.registerForPluginStateChange=e.registerForPluginStateChange;var Ks=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Vs=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Gl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Ai=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Gs=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ji="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Io=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ml=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,ws="void main() {gl_FragColor=vec4(1.0);}",Ii="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",fl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lo=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Fi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,po="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",no="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",us="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Js="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",au="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",es="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",bu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Ds=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,No=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,sf=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ko=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Rs=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yl=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Vu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Ys=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,El=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Is=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,cl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ou="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",_u=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wl="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",wu=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$s=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Xl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hl=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ts=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,su=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Au=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jl="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Qs=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,fs=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wo=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,qs=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,As=Bi(Vs,Gl),Fo=Bi(Ai,Hs),kl=Bi(Gs,ji),Ms=Bi(Io,Ml),Fs=Bi(ws,Ii),go=Bi(fl,lo),Cl=Bi(Fi,po),Ll=Bi(no,us),el=Bi(Js,au),cs=Bi(es,bu),vl=Bi(Ds,No),pl=Bi(sf,ko),Zl=Bi(Rs,Yl),Pl=Bi(Vu,Hu),tl=Bi(Ys,El),Gu=Bi(Is,iu),hs=Bi(cl,ou),Ws=Bi(_u,Wl),uu=Bi(wu,$s),dl=Bi(Xl,hl),Dl=Bi(Ts,Sl),rl=Bi(su,Tu),Rl=Bi(Au,jl),fu=Bi(Qs,Mu),Eu=Bi(fs,Wo),lf=Bi(qs,lu);function Bi(ce,W){var pe=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,$={};return ce=ce.replace(pe,function(de,ke,Fe,Je,ht){return $[ht]=!0,ke==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
varying `+Fe+" "+Je+" "+ht+`;
#else
uniform `+Fe+" "+Je+" u_"+ht+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`}),W=W.replace(pe,function(de,ke,Fe,Je,ht){var Dt=Je==="float"?"vec2":"vec4",tr=ht.match(/color/)?"color":Dt;return $[ht]?ke==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
uniform lowp float u_`+ht+`_t;
attribute `+Fe+" "+Dt+" a_"+ht+`;
varying `+Fe+" "+Je+" "+ht+`;
#else
uniform `+Fe+" "+Je+" u_"+ht+`;
#endif
`:tr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+ht+" = a_"+ht+`;
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+ht+" = unpack_mix_"+tr+"(a_"+ht+", u_"+ht+`_t);
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`:ke==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
uniform lowp float u_`+ht+`_t;
attribute `+Fe+" "+Dt+" a_"+ht+`;
#else
uniform `+Fe+" "+Je+" u_"+ht+`;
#endif
`:tr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+Je+" "+ht+" = a_"+ht+`;
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+Je+" "+ht+" = unpack_mix_"+tr+"(a_"+ht+", u_"+ht+`_t);
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`}),{fragmentSource:ce,vertexSource:W}}var ml=Object.freeze({__proto__:null,prelude:As,background:Fo,backgroundPattern:kl,circle:Ms,clippingMask:Fs,heatmap:go,heatmapTexture:Cl,collisionBox:Ll,collisionCircle:el,debug:cs,fill:vl,fillOutline:pl,fillOutlinePattern:Zl,fillPattern:Pl,fillExtrusion:tl,fillExtrusionPattern:Gu,hillshadePrepare:hs,hillshade:Ws,line:uu,lineGradient:dl,linePattern:Dl,lineSDF:rl,raster:Rl,symbolIcon:fu,symbolSDF:Eu,symbolTextAndIcon:lf}),nl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};nl.prototype.bind=function(W,pe,$,de,ke,Fe,Je,ht){this.context=W;for(var Dt=this.boundPaintVertexBuffers.length!==de.length,tr=0;!Dt&&tr<de.length;tr++)this.boundPaintVertexBuffers[tr]!==de[tr]&&(Dt=!0);var pr=!this.vao||this.boundProgram!==pe||this.boundLayoutVertexBuffer!==$||Dt||this.boundIndexBuffer!==ke||this.boundVertexOffset!==Fe||this.boundDynamicVertexBuffer!==Je||this.boundDynamicVertexBuffer2!==ht;!W.extVertexArrayObject||pr?this.freshBind(pe,$,de,ke,Fe,Je,ht):(W.bindVertexArrayOES.set(this.vao),Je&&Je.bind(),ke&&ke.dynamicDraw&&ke.bind(),ht&&ht.bind())},nl.prototype.freshBind=function(W,pe,$,de,ke,Fe,Je){var ht,Dt=W.numAttributes,tr=this.context,pr=tr.gl;if(tr.extVertexArrayObject)this.vao&&this.destroy(),this.vao=tr.extVertexArrayObject.createVertexArrayOES(),tr.bindVertexArrayOES.set(this.vao),ht=0,this.boundProgram=W,this.boundLayoutVertexBuffer=pe,this.boundPaintVertexBuffers=$,this.boundIndexBuffer=de,this.boundVertexOffset=ke,this.boundDynamicVertexBuffer=Fe,this.boundDynamicVertexBuffer2=Je;else{ht=tr.currentNumAttributes||0;for(var yr=Dt;yr<ht;yr++)pr.disableVertexAttribArray(yr)}pe.enableAttributes(pr,W);for(var Rr=0,Kr=$;Rr<Kr.length;Rr+=1){var $r=Kr[Rr];$r.enableAttributes(pr,W)}Fe&&Fe.enableAttributes(pr,W),Je&&Je.enableAttributes(pr,W),pe.bind(),pe.setVertexAttribPointers(pr,W,ke);for(var Xr=0,rn=$;Xr<rn.length;Xr+=1){var xn=rn[Xr];xn.bind(),xn.setVertexAttribPointers(pr,W,ke)}Fe&&(Fe.bind(),Fe.setVertexAttribPointers(pr,W,ke)),de&&de.bind(),Je&&(Je.bind(),Je.setVertexAttribPointers(pr,W,ke)),tr.currentNumAttributes=Dt},nl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ts=function(W,pe,$,de,ke){var Fe=W.gl;this.program=Fe.createProgram();var Je=$?$.defines():[];ke&&Je.push("#define OVERDRAW_INSPECTOR;");var ht=Je.concat(As.fragmentSource,pe.fragmentSource).join(`
`),Dt=Je.concat(As.vertexSource,pe.vertexSource).join(`
`),tr=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(tr,ht),Fe.compileShader(tr),Fe.attachShader(this.program,tr);var pr=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(pr,Dt),Fe.compileShader(pr),Fe.attachShader(this.program,pr);for(var yr=$?$.layoutAttributes:[],Rr=0;Rr<yr.length;Rr++)Fe.bindAttribLocation(this.program,Rr,yr[Rr].name);Fe.linkProgram(this.program),Fe.deleteShader(pr),Fe.deleteShader(tr),this.numAttributes=Fe.getProgramParameter(this.program,Fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Kr={},$r=0;$r<this.numAttributes;$r++){var Xr=Fe.getActiveAttrib(this.program,$r);Xr&&(this.attributes[Xr.name]=Fe.getAttribLocation(this.program,Xr.name))}for(var rn=Fe.getProgramParameter(this.program,Fe.ACTIVE_UNIFORMS),xn=0;xn<rn;xn++){var Fn=Fe.getActiveUniform(this.program,xn);Fn&&(Kr[Fn.name]=Fe.getUniformLocation(this.program,Fn.name))}this.fixedUniforms=de(W,Kr),this.binderUniforms=$?$.getUniforms(W,Kr):[]};ts.prototype.draw=function(W,pe,$,de,ke,Fe,Je,ht,Dt,tr,pr,yr,Rr,Kr,$r,Xr){var rn,xn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode($),W.setStencilMode(de),W.setColorMode(ke),W.setCullFace(Fe);for(var Fn in this.fixedUniforms)this.fixedUniforms[Fn].set(Je[Fn]);Kr&&Kr.setUniforms(W,this.binderUniforms,yr,{zoom:Rr});for(var Gn=(rn={},rn[xn.LINES]=2,rn[xn.TRIANGLES]=3,rn[xn.LINE_STRIP]=1,rn)[pe],oa=0,fa=pr.get();oa<fa.length;oa+=1){var la=fa[oa],wa=la.vaos||(la.vaos={}),La=wa[ht]||(wa[ht]=new nl);La.bind(W,this,Dt,Kr?Kr.getPaintVertexBuffers():[],tr,la.vertexOffset,$r,Xr),xn.drawElements(pe,la.primitiveLength*Gn,xn.UNSIGNED_SHORT,la.primitiveOffset*Gn*2)}}};function vs(ce,W,pe){var $=1/Ln(pe,1,W.transform.tileZoom),de=Math.pow(2,pe.tileID.overscaledZ),ke=pe.tileSize*Math.pow(2,W.transform.tileZoom)/de,Fe=ke*(pe.tileID.canonical.x+pe.tileID.wrap*de),Je=ke*pe.tileID.canonical.y;return{u_image:0,u_texsize:pe.imageAtlasTexture.size,u_scale:[$,ce.fromScale,ce.toScale],u_fade:ce.t,u_pixel_coord_upper:[Fe>>16,Je>>16],u_pixel_coord_lower:[Fe&65535,Je&65535]}}function Il(ce,W,pe,$){var de=pe.imageManager.getPattern(ce.from.toString()),ke=pe.imageManager.getPattern(ce.to.toString()),Fe=pe.imageManager.getPixelSize(),Je=Fe.width,ht=Fe.height,Dt=Math.pow(2,$.tileID.overscaledZ),tr=$.tileSize*Math.pow(2,pe.transform.tileZoom)/Dt,pr=tr*($.tileID.canonical.x+$.tileID.wrap*Dt),yr=tr*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:de.tl,u_pattern_br_a:de.br,u_pattern_tl_b:ke.tl,u_pattern_br_b:ke.br,u_texsize:[Je,ht],u_mix:W.t,u_pattern_size_a:de.displaySize,u_pattern_size_b:ke.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Ln($,1,pe.transform.tileZoom),u_pixel_coord_upper:[pr>>16,yr>>16],u_pixel_coord_lower:[pr&65535,yr&65535]}}var uo=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_lightpos:new e.Uniform3f(ce,W.u_lightpos),u_lightintensity:new e.Uniform1f(ce,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,W.u_vertical_gradient),u_opacity:new e.Uniform1f(ce,W.u_opacity)}},Su=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_lightpos:new e.Uniform3f(ce,W.u_lightpos),u_lightintensity:new e.Uniform1f(ce,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(ce,W.u_height_factor),u_image:new e.Uniform1i(ce,W.u_image),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,W.u_scale),u_fade:new e.Uniform1f(ce,W.u_fade),u_opacity:new e.Uniform1f(ce,W.u_opacity)}},Xo=function(ce,W,pe,$){var de=W.style.light,ke=de.properties.get("position"),Fe=[ke.x,ke.y,ke.z],Je=e.create$1();de.properties.get("anchor")==="viewport"&&e.fromRotation(Je,-W.transform.angle),e.transformMat3(Fe,Fe,Je);var ht=de.properties.get("color");return{u_matrix:ce,u_lightpos:Fe,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[ht.r,ht.g,ht.b],u_vertical_gradient:+pe,u_opacity:$}},Xs=function(ce,W,pe,$,de,ke,Fe){return e.extend(Xo(ce,W,pe,$),vs(ke,W,Fe),{u_height_factor:-Math.pow(2,de.overscaledZ)/Fe.tileSize/8})},zs=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix)}},Es=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_image:new e.Uniform1i(ce,W.u_image),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,W.u_scale),u_fade:new e.Uniform1f(ce,W.u_fade)}},Ho=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_world:new e.Uniform2f(ce,W.u_world)}},Zi=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_world:new e.Uniform2f(ce,W.u_world),u_image:new e.Uniform1i(ce,W.u_image),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,W.u_scale),u_fade:new e.Uniform1f(ce,W.u_fade)}},Bo=function(ce){return{u_matrix:ce}},ps=function(ce,W,pe,$){return e.extend(Bo(ce),vs(pe,W,$))},ku=function(ce,W){return{u_matrix:ce,u_world:W}},Kl=function(ce,W,pe,$,de){return e.extend(ps(ce,W,pe,$),{u_world:de})},Cu=function(ce,W){return{u_camera_to_center_distance:new e.Uniform1f(ce,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ce,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ce,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ce,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ce,W.u_matrix)}},bt=function(ce,W,pe,$){var de=ce.transform,ke,Fe;if($.paint.get("circle-pitch-alignment")==="map"){var Je=Ln(pe,1,de.zoom);ke=!0,Fe=[Je,Je]}else ke=!1,Fe=de.pixelsToGLUnits;return{u_camera_to_center_distance:de.cameraToCenterDistance,u_scale_with_map:+($.paint.get("circle-pitch-scale")==="map"),u_matrix:ce.translatePosMatrix(W.posMatrix,pe,$.paint.get("circle-translate"),$.paint.get("circle-translate-anchor")),u_pitch_with_map:+ke,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Fe}},Ut=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ce,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ce,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ce,W.u_overscale_factor)}},dr=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ce,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ce,W.u_viewport_size)}},cr=function(ce,W,pe){var $=Ln(pe,1,W.zoom),de=Math.pow(2,W.zoom-pe.tileID.overscaledZ),ke=pe.tileID.overscaleFactor();return{u_matrix:ce,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:$,u_extrude_scale:[W.pixelsToGLUnits[0]/($*de),W.pixelsToGLUnits[1]/($*de)],u_overscale_factor:ke}},zr=function(ce,W,pe){return{u_matrix:ce,u_inv_matrix:W,u_camera_to_center_distance:pe.cameraToCenterDistance,u_viewport_size:[pe.width,pe.height]}},ln=function(ce,W){return{u_color:new e.UniformColor(ce,W.u_color),u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_overlay:new e.Uniform1i(ce,W.u_overlay),u_overlay_scale:new e.Uniform1f(ce,W.u_overlay_scale)}},_n=function(ce,W,pe){return pe===void 0&&(pe=1),{u_matrix:ce,u_color:W,u_overlay:0,u_overlay_scale:pe}},Pn=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix)}},zn=function(ce){return{u_matrix:ce}},Xn=function(ce,W){return{u_extrude_scale:new e.Uniform1f(ce,W.u_extrude_scale),u_intensity:new e.Uniform1f(ce,W.u_intensity),u_matrix:new e.UniformMatrix4f(ce,W.u_matrix)}},wn=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_world:new e.Uniform2f(ce,W.u_world),u_image:new e.Uniform1i(ce,W.u_image),u_color_ramp:new e.Uniform1i(ce,W.u_color_ramp),u_opacity:new e.Uniform1f(ce,W.u_opacity)}},Un=function(ce,W,pe,$){return{u_matrix:ce,u_extrude_scale:Ln(W,1,pe),u_intensity:$}},On=function(ce,W,pe,$){var de=e.create();e.ortho(de,0,ce.width,ce.height,0,0,1);var ke=ce.context.gl;return{u_matrix:de,u_world:[ke.drawingBufferWidth,ke.drawingBufferHeight],u_image:pe,u_color_ramp:$,u_opacity:W.paint.get("heatmap-opacity")}},jn=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_image:new e.Uniform1i(ce,W.u_image),u_latrange:new e.Uniform2f(ce,W.u_latrange),u_light:new e.Uniform2f(ce,W.u_light),u_shadow:new e.UniformColor(ce,W.u_shadow),u_highlight:new e.UniformColor(ce,W.u_highlight),u_accent:new e.UniformColor(ce,W.u_accent)}},ia=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_image:new e.Uniform1i(ce,W.u_image),u_dimension:new e.Uniform2f(ce,W.u_dimension),u_zoom:new e.Uniform1f(ce,W.u_zoom),u_maxzoom:new e.Uniform1f(ce,W.u_maxzoom),u_unpack:new e.Uniform4f(ce,W.u_unpack)}},Ga=function(ce,W,pe){var $=pe.paint.get("hillshade-shadow-color"),de=pe.paint.get("hillshade-highlight-color"),ke=pe.paint.get("hillshade-accent-color"),Fe=pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ce.transform.angle);var Je=!ce.options.moving;return{u_matrix:ce.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Ya(ce,W.tileID),u_light:[pe.paint.get("hillshade-exaggeration"),Fe],u_shadow:$,u_highlight:de,u_accent:ke}},za=function(ce,W,pe){var $=W.stride,de=e.create();return e.ortho(de,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(de,de,[0,-e.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[$,$],u_zoom:ce.overscaledZ,u_maxzoom:pe,u_unpack:W.getUnpackVector()}};function Ya(ce,W){var pe=Math.pow(2,W.canonical.z),$=W.canonical.y;return[new e.MercatorCoordinate(0,$/pe).toLngLat().lat,new e.MercatorCoordinate(0,($+1)/pe).toLngLat().lat]}var ja=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_ratio:new e.Uniform1f(ce,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,W.u_units_to_pixels)}},aa=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_ratio:new e.Uniform1f(ce,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,W.u_units_to_pixels),u_image:new e.Uniform1i(ce,W.u_image)}},ba=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_ratio:new e.Uniform1f(ce,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_image:new e.Uniform1i(ce,W.u_image),u_units_to_pixels:new e.Uniform2f(ce,W.u_units_to_pixels),u_scale:new e.Uniform3f(ce,W.u_scale),u_fade:new e.Uniform1f(ce,W.u_fade)}},Qa=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_ratio:new e.Uniform1f(ce,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ce,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ce,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ce,W.u_sdfgamma),u_image:new e.Uniform1i(ce,W.u_image),u_tex_y_a:new e.Uniform1f(ce,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ce,W.u_tex_y_b),u_mix:new e.Uniform1f(ce,W.u_mix)}},si=function(ce,W,pe){var $=ce.transform;return{u_matrix:hi(ce,W,pe),u_ratio:1/Ln(W,1,$.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]]}},Mi=function(ce,W,pe){return e.extend(si(ce,W,pe),{u_image:0})},Ei=function(ce,W,pe,$){var de=ce.transform,ke=Li(W,de);return{u_matrix:hi(ce,W,pe),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Ln(W,1,de.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ke,$.fromScale,$.toScale],u_fade:$.t,u_units_to_pixels:[1/de.pixelsToGLUnits[0],1/de.pixelsToGLUnits[1]]}},wi=function(ce,W,pe,$,de){var ke=ce.transform,Fe=ce.lineAtlas,Je=Li(W,ke),ht=pe.layout.get("line-cap")==="round",Dt=Fe.getDash($.from,ht),tr=Fe.getDash($.to,ht),pr=Dt.width*de.fromScale,yr=tr.width*de.toScale;return e.extend(si(ce,W,pe),{u_patternscale_a:[Je/pr,-Dt.height/2],u_patternscale_b:[Je/yr,-tr.height/2],u_sdfgamma:Fe.width/(Math.min(pr,yr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Dt.y,u_tex_y_b:tr.y,u_mix:de.t})};function Li(ce,W){return 1/Ln(ce,1,W.tileZoom)}function hi(ce,W,pe){return ce.translatePosMatrix(W.tileID.posMatrix,W,pe.paint.get("line-translate"),pe.paint.get("line-translate-anchor"))}var Co=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_tl_parent:new e.Uniform2f(ce,W.u_tl_parent),u_scale_parent:new e.Uniform1f(ce,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(ce,W.u_buffer_scale),u_fade_t:new e.Uniform1f(ce,W.u_fade_t),u_opacity:new e.Uniform1f(ce,W.u_opacity),u_image0:new e.Uniform1i(ce,W.u_image0),u_image1:new e.Uniform1i(ce,W.u_image1),u_brightness_low:new e.Uniform1f(ce,W.u_brightness_low),u_brightness_high:new e.Uniform1f(ce,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(ce,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ce,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(ce,W.u_spin_weights)}},ao=function(ce,W,pe,$,de){return{u_matrix:ce,u_tl_parent:W,u_scale_parent:pe,u_buffer_scale:1,u_fade_t:$.mix,u_opacity:$.opacity*de.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:de.paint.get("raster-brightness-min"),u_brightness_high:de.paint.get("raster-brightness-max"),u_saturation_factor:Si(de.paint.get("raster-saturation")),u_contrast_factor:Aa(de.paint.get("raster-contrast")),u_spin_weights:li(de.paint.get("raster-hue-rotate"))}};function li(ce){ce*=Math.PI/180;var W=Math.sin(ce),pe=Math.cos(ce);return[(2*pe+1)/3,(-Math.sqrt(3)*W-pe+1)/3,(Math.sqrt(3)*W-pe+1)/3]}function Aa(ce){return ce>0?1/(1-ce):1+ce}function Si(ce){return ce>0?1-1/(1.001-ce):-ce}var _o=function(ce,W){return{u_is_size_zoom_constant:new e.Uniform1i(ce,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,W.u_size_t),u_size:new e.Uniform1f(ce,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,W.u_coord_matrix),u_is_text:new e.Uniform1i(ce,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_texture:new e.Uniform1i(ce,W.u_texture)}},Eo=function(ce,W){return{u_is_size_zoom_constant:new e.Uniform1i(ce,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,W.u_size_t),u_size:new e.Uniform1f(ce,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,W.u_coord_matrix),u_is_text:new e.Uniform1i(ce,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_texture:new e.Uniform1i(ce,W.u_texture),u_gamma_scale:new e.Uniform1f(ce,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,W.u_is_halo)}},ds=function(ce,W){return{u_is_size_zoom_constant:new e.Uniform1i(ce,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,W.u_size_t),u_size:new e.Uniform1f(ce,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,W.u_coord_matrix),u_is_text:new e.Uniform1i(ce,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_texsize_icon:new e.Uniform2f(ce,W.u_texsize_icon),u_texture:new e.Uniform1i(ce,W.u_texture),u_texture_icon:new e.Uniform1i(ce,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(ce,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,W.u_is_halo)}},Os=function(ce,W,pe,$,de,ke,Fe,Je,ht,Dt){var tr=de.transform;return{u_is_size_zoom_constant:+(ce==="constant"||ce==="source"),u_is_size_feature_constant:+(ce==="constant"||ce==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:tr.cameraToCenterDistance,u_pitch:tr.pitch/360*2*Math.PI,u_rotate_symbol:+pe,u_aspect_ratio:tr.width/tr.height,u_fade_change:de.options.fadeDuration?de.symbolFadeChange:1,u_matrix:ke,u_label_plane_matrix:Fe,u_coord_matrix:Je,u_is_text:+ht,u_pitch_with_map:+$,u_texsize:Dt,u_texture:0}},Lo=function(ce,W,pe,$,de,ke,Fe,Je,ht,Dt,tr){var pr=de.transform;return e.extend(Os(ce,W,pe,$,de,ke,Fe,Je,ht,Dt),{u_gamma_scale:$?Math.cos(pr._pitch)*pr.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+tr})},al=function(ce,W,pe,$,de,ke,Fe,Je,ht,Dt){return e.extend(Lo(ce,W,pe,$,de,ke,Fe,Je,!0,ht,!0),{u_texsize_icon:Dt,u_texture_icon:1})},Ns=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_opacity:new e.Uniform1f(ce,W.u_opacity),u_color:new e.UniformColor(ce,W.u_color)}},zo=function(ce,W){return{u_matrix:new e.UniformMatrix4f(ce,W.u_matrix),u_opacity:new e.Uniform1f(ce,W.u_opacity),u_image:new e.Uniform1i(ce,W.u_image),u_pattern_tl_a:new e.Uniform2f(ce,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ce,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ce,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ce,W.u_pattern_br_b),u_texsize:new e.Uniform2f(ce,W.u_texsize),u_mix:new e.Uniform1f(ce,W.u_mix),u_pattern_size_a:new e.Uniform2f(ce,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ce,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(ce,W.u_scale_a),u_scale_b:new e.Uniform1f(ce,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ce,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ce,W.u_tile_units_to_pixels)}},Po=function(ce,W,pe){return{u_matrix:ce,u_opacity:W,u_color:pe}},Jl=function(ce,W,pe,$,de,ke){return e.extend(Il($,ke,pe,de),{u_matrix:ce,u_opacity:W})},cu={fillExtrusion:uo,fillExtrusionPattern:Su,fill:zs,fillPattern:Es,fillOutline:Ho,fillOutlinePattern:Zi,circle:Cu,collisionBox:Ut,collisionCircle:dr,debug:ln,clippingMask:Pn,heatmap:Xn,heatmapTexture:wn,hillshade:jn,hillshadePrepare:ia,line:ja,lineGradient:aa,linePattern:ba,lineSDF:Qa,raster:Co,symbolIcon:_o,symbolSDF:Eo,symbolTextAndIcon:ds,background:Ns,backgroundPattern:zo},gs;function Lu(ce,W,pe,$,de,ke,Fe){for(var Je=ce.context,ht=Je.gl,Dt=ce.useProgram("collisionBox"),tr=[],pr=0,yr=0,Rr=0;Rr<$.length;Rr++){var Kr=$[Rr],$r=W.getTile(Kr),Xr=$r.getBucket(pe);if(!!Xr){var rn=Kr.posMatrix;(de[0]!==0||de[1]!==0)&&(rn=ce.translatePosMatrix(Kr.posMatrix,$r,de,ke));var xn=Fe?Xr.textCollisionBox:Xr.iconCollisionBox,Fn=Xr.collisionCircleArray;if(Fn.length>0){var Gn=e.create(),oa=rn;e.mul(Gn,Xr.placementInvProjMatrix,ce.transform.glCoordMatrix),e.mul(Gn,Gn,Xr.placementViewportMatrix),tr.push({circleArray:Fn,circleOffset:yr,transform:oa,invTransform:Gn}),pr+=Fn.length/4,yr=pr}!xn||Dt.draw(Je,ht.LINES,en.disabled,er.disabled,ce.colorModeForRenderPass(),Et.disabled,cr(rn,ce.transform,$r),pe.id,xn.layoutVertexBuffer,xn.indexBuffer,xn.segments,null,ce.transform.zoom,null,null,xn.collisionVertexBuffer)}}if(!(!Fe||!tr.length)){var fa=ce.useProgram("collisionCircle"),la=new e.StructArrayLayout2f1f2i16;la.resize(pr*4),la._trim();for(var wa=0,La=0,Ca=tr;La<Ca.length;La+=1)for(var Fa=Ca[La],Ba=0;Ba<Fa.circleArray.length/4;Ba++){var ti=Ba*4,pi=Fa.circleArray[ti+0],Yi=Fa.circleArray[ti+1],xi=Fa.circleArray[ti+2],ki=Fa.circleArray[ti+3];la.emplace(wa++,pi,Yi,xi,ki,0),la.emplace(wa++,pi,Yi,xi,ki,1),la.emplace(wa++,pi,Yi,xi,ki,2),la.emplace(wa++,pi,Yi,xi,ki,3)}(!gs||gs.length<pr*2)&&(gs=$l(pr));for(var Ja=Je.createIndexBuffer(gs,!0),Wi=Je.createVertexBuffer(la,e.collisionCircleLayout.members,!0),$i=0,to=tr;$i<to.length;$i+=1){var Ri=to[$i],ho=zr(Ri.transform,Ri.invTransform,ce.transform);fa.draw(Je,ht.TRIANGLES,en.disabled,er.disabled,ce.colorModeForRenderPass(),Et.disabled,ho,pe.id,Wi,Ja,e.SegmentVector.simpleSegment(0,Ri.circleOffset*2,Ri.circleArray.length,Ri.circleArray.length/2),null,ce.transform.zoom,null,null,null)}Wi.destroy(),Ja.destroy()}}function $l(ce){var W=ce*2,pe=new e.StructArrayLayout3ui6;pe.resize(W),pe._trim();for(var $=0;$<W;$++){var de=$*6;pe.uint16[de+0]=$*4+0,pe.uint16[de+1]=$*4+1,pe.uint16[de+2]=$*4+2,pe.uint16[de+3]=$*4+2,pe.uint16[de+4]=$*4+3,pe.uint16[de+5]=$*4+0}return pe}var Of=e.identity(new Float32Array(16));function Yu(ce,W,pe,$,de){if(ce.renderPass==="translucent"){var ke=er.disabled,Fe=ce.colorModeForRenderPass(),Je=pe.layout.get("text-variable-anchor");Je&&Wu($,ce,pe,W,pe.layout.get("text-rotation-alignment"),pe.layout.get("text-pitch-alignment"),de),pe.paint.get("icon-opacity").constantOr(1)!==0&&Pu(ce,W,pe,$,!1,pe.paint.get("icon-translate"),pe.paint.get("icon-translate-anchor"),pe.layout.get("icon-rotation-alignment"),pe.layout.get("icon-pitch-alignment"),pe.layout.get("icon-keep-upright"),ke,Fe),pe.paint.get("text-opacity").constantOr(1)!==0&&Pu(ce,W,pe,$,!0,pe.paint.get("text-translate"),pe.paint.get("text-translate-anchor"),pe.layout.get("text-rotation-alignment"),pe.layout.get("text-pitch-alignment"),pe.layout.get("text-keep-upright"),ke,Fe),W.map.showCollisionBoxes&&(Lu(ce,W,pe,$,pe.paint.get("text-translate"),pe.paint.get("text-translate-anchor"),!0),Lu(ce,W,pe,$,pe.paint.get("icon-translate"),pe.paint.get("icon-translate-anchor"),!1))}}function hu(ce,W,pe,$,de,ke){var Fe=e.getAnchorAlignment(ce),Je=Fe.horizontalAlign,ht=Fe.verticalAlign,Dt=-(Je-.5)*W,tr=-(ht-.5)*pe,pr=e.evaluateVariableOffset(ce,$);return new e.Point((Dt/de+pr[0])*ke,(tr/de+pr[1])*ke)}function Wu(ce,W,pe,$,de,ke,Fe){for(var Je=W.transform,ht=de==="map",Dt=ke==="map",tr=0,pr=ce;tr<pr.length;tr+=1){var yr=pr[tr],Rr=$.getTile(yr),Kr=Rr.getBucket(pe);if(!(!Kr||!Kr.text||!Kr.text.segments.get().length)){var $r=Kr.textSizeData,Xr=e.evaluateSizeForZoom($r,Je.zoom),rn=Ln(Rr,1,W.transform.zoom),xn=jr(yr.posMatrix,Dt,ht,W.transform,rn),Fn=pe.layout.get("icon-text-fit")!=="none"&&Kr.hasIconData();if(Xr){var Gn=Math.pow(2,Je.zoom-Rr.tileID.overscaledZ);Ss(Kr,ht,Dt,Fe,e.symbolSize,Je,xn,yr.posMatrix,Gn,Xr,Fn)}}}}function Ss(ce,W,pe,$,de,ke,Fe,Je,ht,Dt,tr){var pr=ce.text.placedSymbolArray,yr=ce.text.dynamicLayoutVertexArray,Rr=ce.icon.dynamicLayoutVertexArray,Kr={};yr.clear();for(var $r=0;$r<pr.length;$r++){var Xr=pr.get($r),rn=ce.allowVerticalPlacement&&!Xr.placedOrientation,xn=!Xr.hidden&&Xr.crossTileID&&!rn?$[Xr.crossTileID]:null;if(!xn)ei(Xr.numGlyphs,yr);else{var Fn=new e.Point(Xr.anchorX,Xr.anchorY),Gn=mn(Fn,pe?Je:Fe),oa=Wn(ke.cameraToCenterDistance,Gn.signedDistanceFromCamera),fa=de.evaluateSizeForFeature(ce.textSizeData,Dt,Xr)*oa/e.ONE_EM;pe&&(fa*=ce.tilePixelRatio/ht);for(var la=xn.width,wa=xn.height,La=xn.anchor,Ca=xn.textOffset,Fa=xn.textBoxScale,Ba=hu(La,la,wa,Ca,Fa,fa),ti=pe?mn(Fn.add(Ba),Fe).point:Gn.point.add(W?Ba.rotate(-ke.angle):Ba),pi=ce.allowVerticalPlacement&&Xr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Yi=0;Yi<Xr.numGlyphs;Yi++)e.addDynamicAttributes(yr,ti,pi);tr&&Xr.associatedIconIndex>=0&&(Kr[Xr.associatedIconIndex]={shiftedAnchor:ti,angle:pi})}}if(tr){Rr.clear();for(var xi=ce.icon.placedSymbolArray,ki=0;ki<xi.length;ki++){var Ja=xi.get(ki);if(Ja.hidden)ei(Ja.numGlyphs,Rr);else{var Wi=Kr[ki];if(!Wi)ei(Ja.numGlyphs,Rr);else for(var $i=0;$i<Ja.numGlyphs;$i++)e.addDynamicAttributes(Rr,Wi.shiftedAnchor,Wi.angle)}}ce.icon.dynamicLayoutVertexBuffer.updateData(Rr)}ce.text.dynamicLayoutVertexBuffer.updateData(yr)}function yl(ce,W,pe){return pe.iconsInText&&W?"symbolTextAndIcon":ce?"symbolSDF":"symbolIcon"}function Pu(ce,W,pe,$,de,ke,Fe,Je,ht,Dt,tr,pr){for(var yr=ce.context,Rr=yr.gl,Kr=ce.transform,$r=Je==="map",Xr=ht==="map",rn=$r&&pe.layout.get("symbol-placement")!=="point",xn=$r&&!Xr&&!rn,Fn=pe.layout.get("symbol-sort-key").constantOr(1)!==void 0,Gn=ce.depthModeForSublayer(0,en.ReadOnly),oa=pe.layout.get("text-variable-anchor"),fa=[],la=0,wa=$;la<wa.length;la+=1){var La=wa[la],Ca=W.getTile(La),Fa=Ca.getBucket(pe);if(!!Fa){var Ba=de?Fa.text:Fa.icon;if(!(!Ba||!Ba.segments.get().length)){var ti=Ba.programConfigurations.get(pe.id),pi=de||Fa.sdfIcons,Yi=de?Fa.textSizeData:Fa.iconSizeData,xi=Xr||Kr.pitch!==0,ki=ce.useProgram(yl(pi,de,Fa),ti),Ja=e.evaluateSizeForZoom(Yi,Kr.zoom),Wi=void 0,$i=[0,0],to=void 0,Ri=void 0,ho=null,gi=void 0;if(de){if(to=Ca.glyphAtlasTexture,Ri=Rr.LINEAR,Wi=Ca.glyphAtlasTexture.size,Fa.iconsInText){$i=Ca.imageAtlasTexture.size,ho=Ca.imageAtlasTexture;var zi=Yi.kind==="composite"||Yi.kind==="camera";gi=xi||ce.options.rotating||ce.options.zooming||zi?Rr.LINEAR:Rr.NEAREST}}else{var Go=pe.layout.get("icon-size").constantOr(0)!==1||Fa.iconsNeedLinear;to=Ca.imageAtlasTexture,Ri=pi||ce.options.rotating||ce.options.zooming||Go||xi?Rr.LINEAR:Rr.NEAREST,Wi=Ca.imageAtlasTexture.size}var as=Ln(Ca,1,ce.transform.zoom),du=jr(La.posMatrix,Xr,$r,ce.transform,as),gu=kn(La.posMatrix,Xr,$r,ce.transform,as),Zu=oa&&Fa.hasTextData(),Ku=pe.layout.get("icon-text-fit")!=="none"&&Zu&&Fa.hasIconData();rn&&$n(Fa,La.posMatrix,ce,de,du,gu,Xr,Dt);var cf=ce.translatePosMatrix(La.posMatrix,Ca,ke,Fe),Ju=rn||de&&oa||Ku?Of:du,bl=ce.translatePosMatrix(gu,Ca,ke,Fe,!0),kf=pi&&pe.paint.get(de?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Zs=void 0;pi?Fa.iconsInText?Zs=al(Yi.kind,Ja,xn,Xr,ce,cf,Ju,bl,Wi,$i):Zs=Lo(Yi.kind,Ja,xn,Xr,ce,cf,Ju,bl,de,Wi,!0):Zs=Os(Yi.kind,Ja,xn,Xr,ce,cf,Ju,bl,de,Wi);var Ql={program:ki,buffers:Ba,uniformValues:Zs,atlasTexture:to,atlasTextureIcon:ho,atlasInterpolation:Ri,atlasInterpolationIcon:gi,isSDF:pi,hasHalo:kf};if(Fn)for(var $u=Ba.segments.get(),zu=0,Qu=$u;zu<Qu.length;zu+=1){var ah=Qu[zu];fa.push({segments:new e.SegmentVector([ah]),sortKey:ah.sortKey,state:Ql})}else fa.push({segments:Ba.segments,sortKey:0,state:Ql})}}}Fn&&fa.sort(function(ih,oh){return ih.sortKey-oh.sortKey});for(var Nf=0,Bs=fa;Nf<Bs.length;Nf+=1){var Pc=Bs[Nf],il=Pc.state;if(yr.activeTexture.set(Rr.TEXTURE0),il.atlasTexture.bind(il.atlasInterpolation,Rr.CLAMP_TO_EDGE),il.atlasTextureIcon&&(yr.activeTexture.set(Rr.TEXTURE1),il.atlasTextureIcon&&il.atlasTextureIcon.bind(il.atlasInterpolationIcon,Rr.CLAMP_TO_EDGE)),il.isSDF){var Dc=il.uniformValues;il.hasHalo&&(Dc.u_is_halo=1,vu(il.buffers,Pc.segments,pe,ce,il.program,Gn,tr,pr,Dc)),Dc.u_is_halo=0}vu(il.buffers,Pc.segments,pe,ce,il.program,Gn,tr,pr,il.uniformValues)}}function vu(ce,W,pe,$,de,ke,Fe,Je,ht){var Dt=$.context,tr=Dt.gl;de.draw(Dt,tr.TRIANGLES,ke,Fe,Je,Et.disabled,ht,pe.id,ce.layoutVertexBuffer,ce.indexBuffer,W,pe.paint,$.transform.zoom,ce.programConfigurations.get(pe.id),ce.dynamicLayoutVertexBuffer,ce.opacityVertexBuffer)}function jo(ce,W,pe,$){if(ce.renderPass==="translucent"){var de=pe.paint.get("circle-opacity"),ke=pe.paint.get("circle-stroke-width"),Fe=pe.paint.get("circle-stroke-opacity"),Je=pe.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(de.constantOr(1)===0&&(ke.constantOr(1)===0||Fe.constantOr(1)===0))){for(var ht=ce.context,Dt=ht.gl,tr=ce.depthModeForSublayer(0,en.ReadOnly),pr=er.disabled,yr=ce.colorModeForRenderPass(),Rr=[],Kr=0;Kr<$.length;Kr++){var $r=$[Kr],Xr=W.getTile($r),rn=Xr.getBucket(pe);if(!!rn){var xn=rn.programConfigurations.get(pe.id),Fn=ce.useProgram("circle",xn),Gn=rn.layoutVertexBuffer,oa=rn.indexBuffer,fa=bt(ce,$r,Xr,pe),la={programConfiguration:xn,program:Fn,layoutVertexBuffer:Gn,indexBuffer:oa,uniformValues:fa};if(Je)for(var wa=rn.segments.get(),La=0,Ca=wa;La<Ca.length;La+=1){var Fa=Ca[La];Rr.push({segments:new e.SegmentVector([Fa]),sortKey:Fa.sortKey,state:la})}else Rr.push({segments:rn.segments,sortKey:0,state:la})}}Je&&Rr.sort(function(Ri,ho){return Ri.sortKey-ho.sortKey});for(var Ba=0,ti=Rr;Ba<ti.length;Ba+=1){var pi=ti[Ba],Yi=pi.state,xi=Yi.programConfiguration,ki=Yi.program,Ja=Yi.layoutVertexBuffer,Wi=Yi.indexBuffer,$i=Yi.uniformValues,to=pi.segments;ki.draw(ht,Dt.TRIANGLES,tr,pr,yr,Et.disabled,$i,pe.id,Ja,Wi,to,pe.paint,ce.transform.zoom,xi)}}}}function Xu(ce,W,pe,$){if(pe.paint.get("heatmap-opacity")!==0)if(ce.renderPass==="offscreen"){var de=ce.context,ke=de.gl,Fe=er.disabled,Je=new Qe([ke.ONE,ke.ONE],e.Color.transparent,[!0,!0,!0,!0]);wf(de,ce,pe),de.clear({color:e.Color.transparent});for(var ht=0;ht<$.length;ht++){var Dt=$[ht];if(!W.hasRenderableParent(Dt)){var tr=W.getTile(Dt),pr=tr.getBucket(pe);if(!!pr){var yr=pr.programConfigurations.get(pe.id),Rr=ce.useProgram("heatmap",yr),Kr=ce.transform,$r=Kr.zoom;Rr.draw(de,ke.TRIANGLES,en.disabled,Fe,Je,Et.disabled,Un(Dt.posMatrix,tr,$r,pe.paint.get("heatmap-intensity")),pe.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,pe.paint,ce.transform.zoom,yr)}}}de.viewport.set([0,0,ce.width,ce.height])}else ce.renderPass==="translucent"&&(ce.context.setColorMode(ce.colorModeForRenderPass()),Du(ce,pe))}function wf(ce,W,pe){var $=ce.gl;ce.activeTexture.set($.TEXTURE1),ce.viewport.set([0,0,W.width/4,W.height/4]);var de=pe.heatmapFbo;if(de)$.bindTexture($.TEXTURE_2D,de.colorAttachment.get()),ce.bindFramebuffer.set(de.framebuffer);else{var ke=$.createTexture();$.bindTexture($.TEXTURE_2D,ke),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),de=pe.heatmapFbo=ce.createFramebuffer(W.width/4,W.height/4,!1),rs(ce,W,ke,de)}}function rs(ce,W,pe,$){var de=ce.gl,ke=ce.extRenderToTextureHalfFloat?ce.extTextureHalfFloat.HALF_FLOAT_OES:de.UNSIGNED_BYTE;de.texImage2D(de.TEXTURE_2D,0,de.RGBA,W.width/4,W.height/4,0,de.RGBA,ke,null),$.colorAttachment.set(pe)}function Du(ce,W){var pe=ce.context,$=pe.gl,de=W.heatmapFbo;if(!!de){pe.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,de.colorAttachment.get()),pe.activeTexture.set($.TEXTURE1);var ke=W.colorRampTexture;ke||(ke=W.colorRampTexture=new e.Texture(pe,W.colorRamp,$.RGBA)),ke.bind($.LINEAR,$.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(pe,$.TRIANGLES,en.disabled,er.disabled,ce.colorModeForRenderPass(),Et.disabled,On(ce,W,0,1),W.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,W.paint,ce.transform.zoom)}}function Ru(ce,W,pe,$){if(ce.renderPass==="translucent"){var de=pe.paint.get("line-opacity"),ke=pe.paint.get("line-width");if(!(de.constantOr(1)===0||ke.constantOr(1)===0)){var Fe=ce.depthModeForSublayer(0,en.ReadOnly),Je=ce.colorModeForRenderPass(),ht=pe.paint.get("line-dasharray"),Dt=pe.paint.get("line-pattern"),tr=Dt.constantOr(1),pr=pe.paint.get("line-gradient"),yr=pe.getCrossfadeParameters(),Rr=tr?"linePattern":ht?"lineSDF":pr?"lineGradient":"line",Kr=ce.context,$r=Kr.gl,Xr=!0;if(pr){Kr.activeTexture.set($r.TEXTURE0);var rn=pe.gradientTexture;if(!pe.gradient)return;rn||(rn=pe.gradientTexture=new e.Texture(Kr,pe.gradient,$r.RGBA)),rn.bind($r.LINEAR,$r.CLAMP_TO_EDGE)}for(var xn=0,Fn=$;xn<Fn.length;xn+=1){var Gn=Fn[xn],oa=W.getTile(Gn);if(!(tr&&!oa.patternsLoaded())){var fa=oa.getBucket(pe);if(!!fa){var la=fa.programConfigurations.get(pe.id),wa=ce.context.program.get(),La=ce.useProgram(Rr,la),Ca=Xr||La.program!==wa,Fa=Dt.constantOr(null);if(Fa&&oa.imageAtlas){var Ba=oa.imageAtlas,ti=Ba.patternPositions[Fa.to.toString()],pi=Ba.patternPositions[Fa.from.toString()];ti&&pi&&la.setConstantPatternPositions(ti,pi)}var Yi=tr?Ei(ce,oa,pe,yr):ht?wi(ce,oa,pe,ht,yr):pr?Mi(ce,oa,pe):si(ce,oa,pe);tr?(Kr.activeTexture.set($r.TEXTURE0),oa.imageAtlasTexture.bind($r.LINEAR,$r.CLAMP_TO_EDGE),la.updatePaintBuffers(yr)):ht&&(Ca||ce.lineAtlas.dirty)&&(Kr.activeTexture.set($r.TEXTURE0),ce.lineAtlas.bind(Kr)),La.draw(Kr,$r.TRIANGLES,Fe,ce.stencilModeForClipping(Gn),Je,Et.disabled,Yi,pe.id,fa.layoutVertexBuffer,fa.indexBuffer,fa.segments,pe.paint,ce.transform.zoom,la),Xr=!1}}}}}}function ju(ce,W,pe,$){var de=pe.paint.get("fill-color"),ke=pe.paint.get("fill-opacity");if(ke.constantOr(1)!==0){var Fe=ce.colorModeForRenderPass(),Je=pe.paint.get("fill-pattern"),ht=ce.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&de.constantOr(e.Color.transparent).a===1&&ke.constantOr(0)===1?"opaque":"translucent";if(ce.renderPass===ht){var Dt=ce.depthModeForSublayer(1,ce.renderPass==="opaque"?en.ReadWrite:en.ReadOnly);Oe(ce,W,pe,$,Dt,Fe,!1)}if(ce.renderPass==="translucent"&&pe.paint.get("fill-antialias")){var tr=ce.depthModeForSublayer(pe.getPaintProperty("fill-outline-color")?2:0,en.ReadOnly);Oe(ce,W,pe,$,tr,Fe,!0)}}}function Oe(ce,W,pe,$,de,ke,Fe){var Je=ce.context.gl,ht=pe.paint.get("fill-pattern"),Dt=ht&&ht.constantOr(1),tr=pe.getCrossfadeParameters(),pr,yr,Rr,Kr,$r;Fe?(yr=Dt&&!pe.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pr=Je.LINES):(yr=Dt?"fillPattern":"fill",pr=Je.TRIANGLES);for(var Xr=0,rn=$;Xr<rn.length;Xr+=1){var xn=rn[Xr],Fn=W.getTile(xn);if(!(Dt&&!Fn.patternsLoaded())){var Gn=Fn.getBucket(pe);if(!!Gn){var oa=Gn.programConfigurations.get(pe.id),fa=ce.useProgram(yr,oa);Dt&&(ce.context.activeTexture.set(Je.TEXTURE0),Fn.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),oa.updatePaintBuffers(tr));var la=ht.constantOr(null);if(la&&Fn.imageAtlas){var wa=Fn.imageAtlas,La=wa.patternPositions[la.to.toString()],Ca=wa.patternPositions[la.from.toString()];La&&Ca&&oa.setConstantPatternPositions(La,Ca)}var Fa=ce.translatePosMatrix(xn.posMatrix,Fn,pe.paint.get("fill-translate"),pe.paint.get("fill-translate-anchor"));if(!Fe)Kr=Gn.indexBuffer,$r=Gn.segments,Rr=Dt?ps(Fa,ce,tr,Fn):Bo(Fa);else{Kr=Gn.indexBuffer2,$r=Gn.segments2;var Ba=[Je.drawingBufferWidth,Je.drawingBufferHeight];Rr=yr==="fillOutlinePattern"&&Dt?Kl(Fa,ce,tr,Fn,Ba):ku(Fa,Ba)}fa.draw(ce.context,pr,de,ce.stencilModeForClipping(xn),ke,Et.disabled,Rr,pe.id,Gn.layoutVertexBuffer,Kr,$r,pe.paint,ce.transform.zoom,oa)}}}}function je(ce,W,pe,$){var de=pe.paint.get("fill-extrusion-opacity");if(de!==0&&ce.renderPass==="translucent"){var ke=new en(ce.context.gl.LEQUAL,en.ReadWrite,ce.depthRangeFor3D);if(de===1&&!pe.paint.get("fill-extrusion-pattern").constantOr(1)){var Fe=ce.colorModeForRenderPass();rt(ce,W,pe,$,ke,er.disabled,Fe)}else rt(ce,W,pe,$,ke,er.disabled,Qe.disabled),rt(ce,W,pe,$,ke,ce.stencilModeFor3D(),ce.colorModeForRenderPass())}}function rt(ce,W,pe,$,de,ke,Fe){for(var Je=ce.context,ht=Je.gl,Dt=pe.paint.get("fill-extrusion-pattern"),tr=Dt.constantOr(1),pr=pe.getCrossfadeParameters(),yr=pe.paint.get("fill-extrusion-opacity"),Rr=0,Kr=$;Rr<Kr.length;Rr+=1){var $r=Kr[Rr],Xr=W.getTile($r),rn=Xr.getBucket(pe);if(!!rn){var xn=rn.programConfigurations.get(pe.id),Fn=ce.useProgram(tr?"fillExtrusionPattern":"fillExtrusion",xn);tr&&(ce.context.activeTexture.set(ht.TEXTURE0),Xr.imageAtlasTexture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),xn.updatePaintBuffers(pr));var Gn=Dt.constantOr(null);if(Gn&&Xr.imageAtlas){var oa=Xr.imageAtlas,fa=oa.patternPositions[Gn.to.toString()],la=oa.patternPositions[Gn.from.toString()];fa&&la&&xn.setConstantPatternPositions(fa,la)}var wa=ce.translatePosMatrix($r.posMatrix,Xr,pe.paint.get("fill-extrusion-translate"),pe.paint.get("fill-extrusion-translate-anchor")),La=pe.paint.get("fill-extrusion-vertical-gradient"),Ca=tr?Xs(wa,ce,La,yr,$r,pr,Xr):Xo(wa,ce,La,yr);Fn.draw(Je,Je.gl.TRIANGLES,de,ke,Fe,Et.backCCW,Ca,pe.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,pe.paint,ce.transform.zoom,xn)}}}function lt(ce,W,pe,$){if(!(ce.renderPass!=="offscreen"&&ce.renderPass!=="translucent")){for(var de=ce.context,ke=W.getSource().maxzoom,Fe=ce.depthModeForSublayer(0,en.ReadOnly),Je=ce.colorModeForRenderPass(),ht=ce.renderPass==="translucent"?ce.stencilConfigForOverlap($):[{},$],Dt=ht[0],tr=ht[1],pr=0,yr=tr;pr<yr.length;pr+=1){var Rr=yr[pr],Kr=W.getTile(Rr);Kr.needsHillshadePrepare&&ce.renderPass==="offscreen"?_t(ce,Kr,pe,ke,Fe,er.disabled,Je):ce.renderPass==="translucent"&&Tt(ce,Kr,pe,Fe,Dt[Rr.overscaledZ],Je)}de.viewport.set([0,0,ce.width,ce.height])}}function Tt(ce,W,pe,$,de,ke){var Fe=ce.context,Je=Fe.gl,ht=W.fbo;if(!!ht){var Dt=ce.useProgram("hillshade");Fe.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_2D,ht.colorAttachment.get());var tr=Ga(ce,W,pe);Dt.draw(Fe,Je.TRIANGLES,$,de,ke,Et.disabled,tr,pe.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function _t(ce,W,pe,$,de,ke,Fe){var Je=ce.context,ht=Je.gl,Dt=W.dem;if(Dt&&Dt.data){var tr=Dt.dim,pr=Dt.stride,yr=Dt.getPixels();if(Je.activeTexture.set(ht.TEXTURE1),Je.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||ce.getTileTexture(pr),W.demTexture){var Rr=W.demTexture;Rr.update(yr,{premultiply:!1}),Rr.bind(ht.NEAREST,ht.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture(Je,yr,ht.RGBA,{premultiply:!1}),W.demTexture.bind(ht.NEAREST,ht.CLAMP_TO_EDGE);Je.activeTexture.set(ht.TEXTURE0);var Kr=W.fbo;if(!Kr){var $r=new e.Texture(Je,{width:tr,height:tr,data:null},ht.RGBA);$r.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),Kr=W.fbo=Je.createFramebuffer(tr,tr,!0),Kr.colorAttachment.set($r.texture)}Je.bindFramebuffer.set(Kr.framebuffer),Je.viewport.set([0,0,tr,tr]),ce.useProgram("hillshadePrepare").draw(Je,ht.TRIANGLES,de,ke,Fe,Et.disabled,za(W.tileID,Dt,$),pe.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function kt(ce,W,pe,$){if(ce.renderPass==="translucent"&&pe.paint.get("raster-opacity")!==0&&!!$.length)for(var de=ce.context,ke=de.gl,Fe=W.getSource(),Je=ce.useProgram("raster"),ht=ce.colorModeForRenderPass(),Dt=Fe instanceof ae?[{},$]:ce.stencilConfigForOverlap($),tr=Dt[0],pr=Dt[1],yr=pr[pr.length-1].overscaledZ,Rr=!ce.options.moving,Kr=0,$r=pr;Kr<$r.length;Kr+=1){var Xr=$r[Kr],rn=ce.depthModeForSublayer(Xr.overscaledZ-yr,pe.paint.get("raster-opacity")===1?en.ReadWrite:en.ReadOnly,ke.LESS),xn=W.getTile(Xr),Fn=ce.transform.calculatePosMatrix(Xr.toUnwrapped(),Rr);xn.registerFadeDuration(pe.paint.get("raster-fade-duration"));var Gn=W.findLoadedParent(Xr,0),oa=vr(xn,Gn,W,pe,ce.transform),fa=void 0,la=void 0,wa=pe.paint.get("raster-resampling")==="nearest"?ke.NEAREST:ke.LINEAR;de.activeTexture.set(ke.TEXTURE0),xn.texture.bind(wa,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),de.activeTexture.set(ke.TEXTURE1),Gn?(Gn.texture.bind(wa,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),fa=Math.pow(2,Gn.tileID.overscaledZ-xn.tileID.overscaledZ),la=[xn.tileID.canonical.x*fa%1,xn.tileID.canonical.y*fa%1]):xn.texture.bind(wa,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST);var La=ao(Fn,la||[0,0],fa||1,oa,pe);Fe instanceof ae?Je.draw(de,ke.TRIANGLES,rn,er.disabled,ht,Et.disabled,La,pe.id,Fe.boundsBuffer,ce.quadTriangleIndexBuffer,Fe.boundsSegments):Je.draw(de,ke.TRIANGLES,rn,tr[Xr.overscaledZ],ht,Et.disabled,La,pe.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function vr(ce,W,pe,$,de){var ke=$.paint.get("raster-fade-duration");if(ke>0){var Fe=e.browser.now(),Je=(Fe-ce.timeAdded)/ke,ht=W?(Fe-W.timeAdded)/ke:-1,Dt=pe.getSource(),tr=de.coveringZoomLevel({tileSize:Dt.tileSize,roundZoom:Dt.roundZoom}),pr=!W||Math.abs(W.tileID.overscaledZ-tr)>Math.abs(ce.tileID.overscaledZ-tr),yr=pr&&ce.refreshedUponExpiration?1:e.clamp(pr?Je:1-ht,0,1);return ce.refreshedUponExpiration&&Je>=1&&(ce.refreshedUponExpiration=!1),W?{opacity:1,mix:1-yr}:{opacity:yr,mix:0}}else return{opacity:1,mix:0}}function mr(ce,W,pe){var $=pe.paint.get("background-color"),de=pe.paint.get("background-opacity");if(de!==0){var ke=ce.context,Fe=ke.gl,Je=ce.transform,ht=Je.tileSize,Dt=pe.paint.get("background-pattern");if(!ce.isPatternMissing(Dt)){var tr=!Dt&&$.a===1&&de===1&&ce.opaquePassEnabledForLayer()?"opaque":"translucent";if(ce.renderPass===tr){var pr=er.disabled,yr=ce.depthModeForSublayer(0,tr==="opaque"?en.ReadWrite:en.ReadOnly),Rr=ce.colorModeForRenderPass(),Kr=ce.useProgram(Dt?"backgroundPattern":"background"),$r=Je.coveringTiles({tileSize:ht});Dt&&(ke.activeTexture.set(Fe.TEXTURE0),ce.imageManager.bind(ce.context));for(var Xr=pe.getCrossfadeParameters(),rn=0,xn=$r;rn<xn.length;rn+=1){var Fn=xn[rn],Gn=ce.transform.calculatePosMatrix(Fn.toUnwrapped()),oa=Dt?Jl(Gn,de,ce,Dt,{tileID:Fn,tileSize:ht},Xr):Po(Gn,de,$);Kr.draw(ke,Fe.TRIANGLES,yr,pr,Rr,Et.disabled,oa,pe.id,ce.tileExtentBuffer,ce.quadTriangleIndexBuffer,ce.tileExtentSegments)}}}}}var hr=new e.Color(1,0,0,1),Tr=new e.Color(0,1,0,1),Fr=new e.Color(0,0,1,1),Qr=new e.Color(1,0,1,1),on=new e.Color(0,1,1,1);function En(ce){var W=ce.transform.padding,pe=3;Jn(ce,ce.transform.height-(W.top||0),pe,hr),Jn(ce,W.bottom||0,pe,Tr),Ta(ce,W.left||0,pe,Fr),Ta(ce,ce.transform.width-(W.right||0),pe,Qr);var $=ce.transform.centerPoint;Nn(ce,$.x,ce.transform.height-$.y,on)}function Nn(ce,W,pe,$){var de=20,ke=2;Ea(ce,W-ke/2,pe-de/2,ke,de,$),Ea(ce,W-de/2,pe-ke/2,de,ke,$)}function Jn(ce,W,pe,$){Ea(ce,0,W+pe/2,ce.transform.width,pe,$)}function Ta(ce,W,pe,$){Ea(ce,W-pe/2,0,pe,ce.transform.height,$)}function Ea(ce,W,pe,$,de,ke){var Fe=ce.context,Je=Fe.gl;Je.enable(Je.SCISSOR_TEST),Je.scissor(W*e.browser.devicePixelRatio,pe*e.browser.devicePixelRatio,$*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio),Fe.clear({color:ke}),Je.disable(Je.SCISSOR_TEST)}function ni(ce,W,pe){for(var $=0;$<pe.length;$++)qa(ce,W,pe[$])}function qa(ce,W,pe){var $=ce.context,de=$.gl,ke=pe.posMatrix,Fe=ce.useProgram("debug"),Je=en.disabled,ht=er.disabled,Dt=ce.colorModeForRenderPass(),tr="$debug";$.activeTexture.set(de.TEXTURE0),ce.emptyTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Fe.draw($,de.LINE_STRIP,Je,ht,Dt,Et.disabled,_n(ke,e.Color.red),tr,ce.debugBuffer,ce.tileBorderIndexBuffer,ce.debugSegments);var pr=W.getTileByID(pe.key).latestRawTileData,yr=pr&&pr.byteLength||0,Rr=Math.floor(yr/1024),Kr=W.getTile(pe).tileSize,$r=512/Math.min(Kr,512)*(pe.overscaledZ/ce.transform.zoom)*.5,Xr=pe.canonical.toString();pe.overscaledZ!==pe.canonical.z&&(Xr+=" => "+pe.overscaledZ);var rn=Xr+" "+Rr+"kb";ai(ce,rn),Fe.draw($,de.TRIANGLES,Je,ht,Qe.alphaBlended,Et.disabled,_n(ke,e.Color.transparent,$r),tr,ce.debugBuffer,ce.quadTriangleIndexBuffer,ce.debugSegments)}function ai(ce,W){ce.initDebugOverlayCanvas();var pe=ce.debugOverlayCanvas,$=ce.context.gl,de=ce.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,pe.width,pe.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold "+36+"px Open Sans, sans-serif",de.fillText(W,5,5),de.strokeText(W,5,5),ce.debugOverlayTexture.update(pe),ce.debugOverlayTexture.bind($.LINEAR,$.CLAMP_TO_EDGE)}function Ti(ce,W,pe){var $=ce.context,de=pe.implementation;if(ce.renderPass==="offscreen"){var ke=de.prerender;ke&&(ce.setCustomLayerDefaults(),$.setColorMode(ce.colorModeForRenderPass()),ke.call(de,$.gl,ce.transform.customLayerMatrix()),$.setDirty(),ce.setBaseState())}else if(ce.renderPass==="translucent"){ce.setCustomLayerDefaults(),$.setColorMode(ce.colorModeForRenderPass()),$.setStencilMode(er.disabled);var Fe=de.renderingMode==="3d"?new en(ce.context.gl.LEQUAL,en.ReadWrite,ce.depthRangeFor3D):ce.depthModeForSublayer(0,en.ReadOnly);$.setDepthMode(Fe),de.render($.gl,ce.transform.customLayerMatrix()),$.setDirty(),ce.setBaseState(),$.bindFramebuffer.set(null)}}var Yr={symbol:Yu,circle:jo,heatmap:Xu,line:Ru,fill:ju,"fill-extrusion":je,hillshade:lt,raster:kt,background:mr,debug:ni,custom:Ti},qe=function(W,pe){this.context=new Nt(W),this.transform=pe,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ka,this.gpuTimers={}};qe.prototype.resize=function(W,pe){if(this.width=W*e.browser.devicePixelRatio,this.height=pe*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var $=0,de=this.style._order;$<de.length;$+=1){var ke=de[$];this.style._layers[ke].resize()}},qe.prototype.setup=function(){var W=this.context,pe=new e.StructArrayLayout2i4;pe.emplaceBack(0,0),pe.emplaceBack(e.EXTENT,0),pe.emplaceBack(0,e.EXTENT),pe.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(pe,Ks.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var $=new e.StructArrayLayout2i4;$.emplaceBack(0,0),$.emplaceBack(e.EXTENT,0),$.emplaceBack(0,e.EXTENT),$.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer($,Ks.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var de=new e.StructArrayLayout4i8;de.emplaceBack(0,0,0,0),de.emplaceBack(e.EXTENT,0,e.EXTENT,0),de.emplaceBack(0,e.EXTENT,0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(de,X.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ke=new e.StructArrayLayout2i4;ke.emplaceBack(0,0),ke.emplaceBack(1,0),ke.emplaceBack(0,1),ke.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(ke,Ks.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Fe=new e.StructArrayLayout1ui2;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Fe);var Je=new e.StructArrayLayout3ui6;Je.emplaceBack(0,1,2),Je.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer(Je),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var ht=this.context.gl;this.stencilClearMode=new er({func:ht.ALWAYS,mask:0},0,255,ht.ZERO,ht.ZERO,ht.ZERO)},qe.prototype.clearStencil=function(){var W=this.context,pe=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var $=e.create();e.ortho($,0,this.width,this.height,0,0,1),e.scale($,$,[pe.drawingBufferWidth,pe.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,pe.TRIANGLES,en.disabled,this.stencilClearMode,Qe.disabled,Et.disabled,zn($),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qe.prototype._renderTileClippingMasks=function(W,pe){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!pe||!pe.length)){this.currentStencilSource=W.source;var $=this.context,de=$.gl;this.nextStencilID+pe.length>256&&this.clearStencil(),$.setColorMode(Qe.disabled),$.setDepthMode(en.disabled);var ke=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Fe=0,Je=pe;Fe<Je.length;Fe+=1){var ht=Je[Fe],Dt=this._tileClippingMaskIDs[ht.key]=this.nextStencilID++;ke.draw($,de.TRIANGLES,en.disabled,new er({func:de.ALWAYS,mask:0},Dt,255,de.KEEP,de.KEEP,de.REPLACE),Qe.disabled,Et.disabled,zn(ht.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qe.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,pe=this.context.gl;return new er({func:pe.NOTEQUAL,mask:255},W,255,pe.KEEP,pe.KEEP,pe.REPLACE)},qe.prototype.stencilModeForClipping=function(W){var pe=this.context.gl;return new er({func:pe.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,pe.KEEP,pe.KEEP,pe.REPLACE)},qe.prototype.stencilConfigForOverlap=function(W){var pe,$=this.context.gl,de=W.sort(function(Dt,tr){return tr.overscaledZ-Dt.overscaledZ}),ke=de[de.length-1].overscaledZ,Fe=de[0].overscaledZ-ke+1;if(Fe>1){this.currentStencilSource=void 0,this.nextStencilID+Fe>256&&this.clearStencil();for(var Je={},ht=0;ht<Fe;ht++)Je[ht+ke]=new er({func:$.GEQUAL,mask:255},ht+this.nextStencilID,255,$.KEEP,$.KEEP,$.REPLACE);return this.nextStencilID+=Fe,[Je,de]}return[(pe={},pe[ke]=er.disabled,pe),de]},qe.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var pe=8,$=1/pe;return new Qe([W.CONSTANT_COLOR,W.ONE],new e.Color($,$,$,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Qe.unblended:Qe.alphaBlended},qe.prototype.depthModeForSublayer=function(W,pe,$){if(!this.opaquePassEnabledForLayer())return en.disabled;var de=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new en($||this.context.gl.LEQUAL,pe,[de,de])},qe.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qe.prototype.render=function(W,pe){var $=this;this.style=W,this.options=pe,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var de=this.style._order,ke=this.style.sourceCaches;for(var Fe in ke){var Je=ke[Fe];Je.used&&Je.prepare(this.context)}var ht={},Dt={},tr={};for(var pr in ke){var yr=ke[pr];ht[pr]=yr.getVisibleCoordinates(),Dt[pr]=ht[pr].slice().reverse(),tr[pr]=yr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Rr=0;Rr<de.length;Rr++){var Kr=de[Rr];if(this.style._layers[Kr].is3D()){this.opaquePassCutoff=Rr;break}}this.renderPass="offscreen";for(var $r=0,Xr=de;$r<Xr.length;$r+=1){var rn=Xr[$r],xn=this.style._layers[rn];if(!(!xn.hasOffscreenPass()||xn.isHidden(this.transform.zoom))){var Fn=Dt[xn.source];xn.type!=="custom"&&!Fn.length||this.renderLayer(this,ke[xn.source],xn,Fn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:pe.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=pe.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=de.length-1;this.currentLayer>=0;this.currentLayer--){var Gn=this.style._layers[de[this.currentLayer]],oa=ke[Gn.source],fa=ht[Gn.source];this._renderTileClippingMasks(Gn,fa),this.renderLayer(this,oa,Gn,fa)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<de.length;this.currentLayer++){var la=this.style._layers[de[this.currentLayer]],wa=ke[la.source],La=(la.type==="symbol"?tr:Dt)[la.source];this._renderTileClippingMasks(la,ht[la.source]),this.renderLayer(this,wa,la,La)}if(this.options.showTileBoundaries){var Ca,Fa,Ba=e.values(this.style._layers);Ba.forEach(function(ti){ti.source&&!ti.isHidden($.transform.zoom)&&(ti.source!==(Fa&&Fa.id)&&(Fa=$.style.sourceCaches[ti.source]),(!Ca||Ca.getSource().maxzoom<Fa.getSource().maxzoom)&&(Ca=Fa))}),Ca&&Yr.debug(this,Ca,Ca.getVisibleCoordinates())}this.options.showPadding&&En(this),this.context.setDefault()},qe.prototype.renderLayer=function(W,pe,$,de){$.isHidden(this.transform.zoom)||$.type!=="background"&&$.type!=="custom"&&!de.length||(this.id=$.id,this.gpuTimingStart($),Yr[$.type](W,pe,$,de,this.style.placement.variableOffsets),this.gpuTimingEnd())},qe.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var pe=this.context.extTimerQuery,$=this.gpuTimers[W.id];$||($=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:pe.createQueryEXT()}),$.calls++,pe.beginQueryEXT(pe.TIME_ELAPSED_EXT,$.query)}},qe.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},qe.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},qe.prototype.queryGpuTimers=function(W){var pe={};for(var $ in W){var de=W[$],ke=this.context.extTimerQuery,Fe=ke.getQueryObjectEXT(de.query,ke.QUERY_RESULT_EXT)/(1e3*1e3);ke.deleteQueryEXT(de.query),pe[$]=Fe}return pe},qe.prototype.translatePosMatrix=function(W,pe,$,de,ke){if(!$[0]&&!$[1])return W;var Fe=ke?de==="map"?this.transform.angle:0:de==="viewport"?-this.transform.angle:0;if(Fe){var Je=Math.sin(Fe),ht=Math.cos(Fe);$=[$[0]*ht-$[1]*Je,$[0]*Je+$[1]*ht]}var Dt=[ke?$[0]:Ln(pe,$[0],this.transform.zoom),ke?$[1]:Ln(pe,$[1],this.transform.zoom),0],tr=new Float32Array(16);return e.translate(tr,W,Dt),tr},qe.prototype.saveTileTexture=function(W){var pe=this._tileTextures[W.size[0]];pe?pe.push(W):this._tileTextures[W.size[0]]=[W]},qe.prototype.getTileTexture=function(W){var pe=this._tileTextures[W];return pe&&pe.length>0?pe.pop():null},qe.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var pe=this.imageManager.getPattern(W.from.toString()),$=this.imageManager.getPattern(W.to.toString());return!pe||!$},qe.prototype.useProgram=function(W,pe){this.cache=this.cache||{};var $=""+W+(pe?pe.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[$]||(this.cache[$]=new ts(this.context,ml[W],pe,cu[W],this._showOverdrawInspector)),this.cache[$]},qe.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qe.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},qe.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},qe.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var $t=function(W,pe){this.points=W,this.planes=pe};$t.fromInvProjectionMatrix=function(W,pe,$){var de=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],ke=Math.pow(2,$),Fe=de.map(function(Dt){return e.transformMat4([],Dt,W)}).map(function(Dt){return e.scale$1([],Dt,1/Dt[3]/pe*ke)}),Je=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ht=Je.map(function(Dt){var tr=e.sub([],Fe[Dt[0]],Fe[Dt[1]]),pr=e.sub([],Fe[Dt[2]],Fe[Dt[1]]),yr=e.normalize([],e.cross([],tr,pr)),Rr=-e.dot(yr,Fe[Dt[1]]);return yr.concat(Rr)});return new $t(Fe,ht)};var Jr=function(W,pe){this.min=W,this.max=pe,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Jr.prototype.quadrant=function(W){for(var pe=[W%2===0,W<2],$=e.clone$2(this.min),de=e.clone$2(this.max),ke=0;ke<pe.length;ke++)$[ke]=pe[ke]?this.min[ke]:this.center[ke],de[ke]=pe[ke]?this.center[ke]:this.max[ke];return de[2]=this.max[2],new Jr($,de)},Jr.prototype.distanceX=function(W){var pe=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return pe-W[0]},Jr.prototype.distanceY=function(W){var pe=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return pe-W[1]},Jr.prototype.intersects=function(W){for(var pe=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],$=!0,de=0;de<W.planes.length;de++){for(var ke=W.planes[de],Fe=0,Je=0;Je<pe.length;Je++)Fe+=e.dot$1(ke,pe[Je])>=0;if(Fe===0)return 0;Fe!==pe.length&&($=!1)}if($)return 2;for(var ht=0;ht<3;ht++){for(var Dt=Number.MAX_VALUE,tr=-Number.MAX_VALUE,pr=0;pr<W.points.length;pr++){var yr=W.points[pr][ht]-this.min[ht];Dt=Math.min(Dt,yr),tr=Math.max(tr,yr)}if(tr<0||Dt>this.max[ht]-this.min[ht])return 0}return 1};var Hn=function(W,pe,$,de){if(W===void 0&&(W=0),pe===void 0&&(pe=0),$===void 0&&($=0),de===void 0&&(de=0),isNaN(W)||W<0||isNaN(pe)||pe<0||isNaN($)||$<0||isNaN(de)||de<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=pe,this.left=$,this.right=de};Hn.prototype.interpolate=function(W,pe,$){return pe.top!=null&&W.top!=null&&(this.top=e.number(W.top,pe.top,$)),pe.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,pe.bottom,$)),pe.left!=null&&W.left!=null&&(this.left=e.number(W.left,pe.left,$)),pe.right!=null&&W.right!=null&&(this.right=e.number(W.right,pe.right,$)),this},Hn.prototype.getCenter=function(W,pe){var $=e.clamp((this.left+W-this.right)/2,0,W),de=e.clamp((this.top+pe-this.bottom)/2,0,pe);return new e.Point($,de)},Hn.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},Hn.prototype.clone=function(){return new Hn(this.top,this.bottom,this.left,this.right)},Hn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ta=function(W,pe,$,de,ke){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ke===void 0?!0:ke,this._minZoom=W||0,this._maxZoom=pe||22,this._minPitch=$==null?0:$,this._maxPitch=de==null?60:de,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hn,this._posMatrixCache={},this._alignedPosMatrixCache={}},ea={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ta.prototype.clone=function(){var W=new ta(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},ea.minZoom.get=function(){return this._minZoom},ea.minZoom.set=function(ce){this._minZoom!==ce&&(this._minZoom=ce,this.zoom=Math.max(this.zoom,ce))},ea.maxZoom.get=function(){return this._maxZoom},ea.maxZoom.set=function(ce){this._maxZoom!==ce&&(this._maxZoom=ce,this.zoom=Math.min(this.zoom,ce))},ea.minPitch.get=function(){return this._minPitch},ea.minPitch.set=function(ce){this._minPitch!==ce&&(this._minPitch=ce,this.pitch=Math.max(this.pitch,ce))},ea.maxPitch.get=function(){return this._maxPitch},ea.maxPitch.set=function(ce){this._maxPitch!==ce&&(this._maxPitch=ce,this.pitch=Math.min(this.pitch,ce))},ea.renderWorldCopies.get=function(){return this._renderWorldCopies},ea.renderWorldCopies.set=function(ce){ce===void 0?ce=!0:ce===null&&(ce=!1),this._renderWorldCopies=ce},ea.worldSize.get=function(){return this.tileSize*this.scale},ea.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ea.size.get=function(){return new e.Point(this.width,this.height)},ea.bearing.get=function(){return-this.angle/Math.PI*180},ea.bearing.set=function(ce){var W=-e.wrap(ce,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ea.pitch.get=function(){return this._pitch/Math.PI*180},ea.pitch.set=function(ce){var W=e.clamp(ce,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},ea.fov.get=function(){return this._fov/Math.PI*180},ea.fov.set=function(ce){ce=Math.max(.01,Math.min(60,ce)),this._fov!==ce&&(this._unmodified=!1,this._fov=ce/180*Math.PI,this._calcMatrices())},ea.zoom.get=function(){return this._zoom},ea.zoom.set=function(ce){var W=Math.min(Math.max(ce,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},ea.center.get=function(){return this._center},ea.center.set=function(ce){ce.lat===this._center.lat&&ce.lng===this._center.lng||(this._unmodified=!1,this._center=ce,this._constrain(),this._calcMatrices())},ea.padding.get=function(){return this._edgeInsets.toJSON()},ea.padding.set=function(ce){this._edgeInsets.equals(ce)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ce,1),this._calcMatrices())},ea.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ta.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},ta.prototype.interpolatePadding=function(W,pe,$){this._unmodified=!1,this._edgeInsets.interpolate(W,pe,$),this._constrain(),this._calcMatrices()},ta.prototype.coveringZoomLevel=function(W){var pe=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,pe)},ta.prototype.getVisibleUnwrappedCoordinates=function(W){var pe=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var $=this.pointCoordinate(new e.Point(0,0)),de=this.pointCoordinate(new e.Point(this.width,0)),ke=this.pointCoordinate(new e.Point(this.width,this.height)),Fe=this.pointCoordinate(new e.Point(0,this.height)),Je=Math.floor(Math.min($.x,de.x,ke.x,Fe.x)),ht=Math.floor(Math.max($.x,de.x,ke.x,Fe.x)),Dt=1,tr=Je-Dt;tr<=ht+Dt;tr++)tr!==0&&pe.push(new e.UnwrappedTileID(tr,W));return pe},ta.prototype.coveringTiles=function(W){var pe=this.coveringZoomLevel(W),$=pe;if(W.minzoom!==void 0&&pe<W.minzoom)return[];W.maxzoom!==void 0&&pe>W.maxzoom&&(pe=W.maxzoom);var de=e.MercatorCoordinate.fromLngLat(this.center),ke=Math.pow(2,pe),Fe=[ke*de.x,ke*de.y,0],Je=$t.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,pe),ht=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ht=pe);var Dt=3,tr=function(Ba){return{aabb:new Jr([Ba*ke,0,0],[(Ba+1)*ke,ke,0]),zoom:0,x:0,y:0,wrap:Ba,fullyVisible:!1}},pr=[],yr=[],Rr=pe,Kr=W.reparseOverscaled?$:pe;if(this._renderWorldCopies)for(var $r=1;$r<=3;$r++)pr.push(tr(-$r)),pr.push(tr($r));for(pr.push(tr(0));pr.length>0;){var Xr=pr.pop(),rn=Xr.x,xn=Xr.y,Fn=Xr.fullyVisible;if(!Fn){var Gn=Xr.aabb.intersects(Je);if(Gn===0)continue;Fn=Gn===2}var oa=Xr.aabb.distanceX(Fe),fa=Xr.aabb.distanceY(Fe),la=Math.max(Math.abs(oa),Math.abs(fa)),wa=Dt+(1<<Rr-Xr.zoom)-2;if(Xr.zoom===Rr||la>wa&&Xr.zoom>=ht){yr.push({tileID:new e.OverscaledTileID(Xr.zoom===Rr?Kr:Xr.zoom,Xr.wrap,Xr.zoom,rn,xn),distanceSq:e.sqrLen([Fe[0]-.5-rn,Fe[1]-.5-xn])});continue}for(var La=0;La<4;La++){var Ca=(rn<<1)+La%2,Fa=(xn<<1)+(La>>1);pr.push({aabb:Xr.aabb.quadrant(La),zoom:Xr.zoom+1,x:Ca,y:Fa,wrap:Xr.wrap,fullyVisible:Fn})}}return yr.sort(function(Ba,ti){return Ba.distanceSq-ti.distanceSq}).map(function(Ba){return Ba.tileID})},ta.prototype.resize=function(W,pe){this.width=W,this.height=pe,this.pixelsToGLUnits=[2/W,-2/pe],this._constrain(),this._calcMatrices()},ea.unmodified.get=function(){return this._unmodified},ta.prototype.zoomScale=function(W){return Math.pow(2,W)},ta.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},ta.prototype.project=function(W){var pe=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(pe)*this.worldSize)},ta.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},ea.point.get=function(){return this.project(this.center)},ta.prototype.setLocationAtPoint=function(W,pe){var $=this.pointCoordinate(pe),de=this.pointCoordinate(this.centerPoint),ke=this.locationCoordinate(W),Fe=new e.MercatorCoordinate(ke.x-($.x-de.x),ke.y-($.y-de.y));this.center=this.coordinateLocation(Fe),this._renderWorldCopies&&(this.center=this.center.wrap())},ta.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},ta.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},ta.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},ta.prototype.coordinateLocation=function(W){return W.toLngLat()},ta.prototype.pointCoordinate=function(W){var pe=0,$=[W.x,W.y,0,1],de=[W.x,W.y,1,1];e.transformMat4($,$,this.pixelMatrixInverse),e.transformMat4(de,de,this.pixelMatrixInverse);var ke=$[3],Fe=de[3],Je=$[0]/ke,ht=de[0]/Fe,Dt=$[1]/ke,tr=de[1]/Fe,pr=$[2]/ke,yr=de[2]/Fe,Rr=pr===yr?0:(pe-pr)/(yr-pr);return new e.MercatorCoordinate(e.number(Je,ht,Rr)/this.worldSize,e.number(Dt,tr,Rr)/this.worldSize)},ta.prototype.coordinatePoint=function(W){var pe=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(pe,pe,this.pixelMatrix),new e.Point(pe[0]/pe[3],pe[1]/pe[3])},ta.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},ta.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ta.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ta.prototype.calculatePosMatrix=function(W,pe){pe===void 0&&(pe=!1);var $=W.key,de=pe?this._alignedPosMatrixCache:this._posMatrixCache;if(de[$])return de[$];var ke=W.canonical,Fe=this.worldSize/this.zoomScale(ke.z),Je=ke.x+Math.pow(2,ke.z)*W.wrap,ht=e.identity(new Float64Array(16));return e.translate(ht,ht,[Je*Fe,ke.y*Fe,0]),e.scale(ht,ht,[Fe/e.EXTENT,Fe/e.EXTENT,1]),e.multiply(ht,pe?this.alignedProjMatrix:this.projMatrix,ht),de[$]=new Float32Array(ht),de[$]},ta.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ta.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,pe=90,$=-180,de=180,ke,Fe,Je,ht,Dt=this.size,tr=this._unmodified;if(this.latRange){var pr=this.latRange;W=e.mercatorYfromLat(pr[1])*this.worldSize,pe=e.mercatorYfromLat(pr[0])*this.worldSize,ke=pe-W<Dt.y?Dt.y/(pe-W):0}if(this.lngRange){var yr=this.lngRange;$=e.mercatorXfromLng(yr[0])*this.worldSize,de=e.mercatorXfromLng(yr[1])*this.worldSize,Fe=de-$<Dt.x?Dt.x/(de-$):0}var Rr=this.point,Kr=Math.max(Fe||0,ke||0);if(Kr){this.center=this.unproject(new e.Point(Fe?(de+$)/2:Rr.x,ke?(pe+W)/2:Rr.y)),this.zoom+=this.scaleZoom(Kr),this._unmodified=tr,this._constraining=!1;return}if(this.latRange){var $r=Rr.y,Xr=Dt.y/2;$r-Xr<W&&(ht=W+Xr),$r+Xr>pe&&(ht=pe-Xr)}if(this.lngRange){var rn=Rr.x,xn=Dt.x/2;rn-xn<$&&(Je=$+xn),rn+xn>de&&(Je=de-xn)}(Je!==void 0||ht!==void 0)&&(this.center=this.unproject(new e.Point(Je!==void 0?Je:Rr.x,ht!==void 0?ht:Rr.y))),this._unmodified=tr,this._constraining=!1}},ta.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,pe=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var $=Math.PI/2+this._pitch,de=this._fov*(.5+pe.y/this.height),ke=Math.sin(de)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-$-de,.01,Math.PI-.01)),Fe=this.point,Je=Fe.x,ht=Fe.y,Dt=Math.cos(Math.PI/2-this._pitch)*ke+this.cameraToCenterDistance,tr=Dt*1.01,pr=this.height/50,yr=new Float64Array(16);e.perspective(yr,this._fov,this.width/this.height,pr,tr),yr[8]=-pe.x*2/this.width,yr[9]=pe.y*2/this.height,e.scale(yr,yr,[1,-1,1]),e.translate(yr,yr,[0,0,-this.cameraToCenterDistance]),e.rotateX(yr,yr,this._pitch),e.rotateZ(yr,yr,this.angle),e.translate(yr,yr,[-Je,-ht,0]),this.mercatorMatrix=e.scale([],yr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(yr,yr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=yr,this.invProjMatrix=e.invert([],this.projMatrix);var Rr=this.width%2/2,Kr=this.height%2/2,$r=Math.cos(this.angle),Xr=Math.sin(this.angle),rn=Je-Math.round(Je)+$r*Rr+Xr*Kr,xn=ht-Math.round(ht)+$r*Kr+Xr*Rr,Fn=new Float64Array(yr);if(e.translate(Fn,Fn,[rn>.5?rn-1:rn,xn>.5?xn-1:xn,0]),this.alignedProjMatrix=Fn,yr=e.create(),e.scale(yr,yr,[this.width/2,-this.height/2,1]),e.translate(yr,yr,[1,-1,0]),this.labelPlaneMatrix=yr,yr=e.create(),e.scale(yr,yr,[1,-1,1]),e.translate(yr,yr,[-1,-1,0]),e.scale(yr,yr,[2/this.width,2/this.height,1]),this.glCoordMatrix=yr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),yr=e.invert(new Float64Array(16),this.pixelMatrix),!yr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=yr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ta.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),pe=[W.x*this.worldSize,W.y*this.worldSize,0,1],$=e.transformMat4(pe,pe,this.pixelMatrix);return $[3]/this.cameraToCenterDistance},ta.prototype.getCameraPoint=function(){var W=this._pitch,pe=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,pe))},ta.prototype.getCameraQueryGeometry=function(W){var pe=this.getCameraPoint();if(W.length===1)return[W[0],pe];for(var $=pe.x,de=pe.y,ke=pe.x,Fe=pe.y,Je=0,ht=W;Je<ht.length;Je+=1){var Dt=ht[Je];$=Math.min($,Dt.x),de=Math.min(de,Dt.y),ke=Math.max(ke,Dt.x),Fe=Math.max(Fe,Dt.y)}return[new e.Point($,de),new e.Point(ke,de),new e.Point(ke,Fe),new e.Point($,Fe),new e.Point($,de)]},Object.defineProperties(ta.prototype,ea);function vi(ce,W){var pe=!1,$=null,de=function(){$=null,pe&&(ce(),$=setTimeout(de,W),pe=!1)};return function(){return pe=!0,$||de(),$}}var Pi=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=vi(this._updateHashUnthrottled.bind(this),30*1e3/100)};Pi.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Pi.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Pi.prototype.getHashString=function(W){var pe=this._map.getCenter(),$=Math.round(this._map.getZoom()*100)/100,de=Math.ceil(($*Math.LN2+Math.log(512/360/.5))/Math.LN10),ke=Math.pow(10,de),Fe=Math.round(pe.lng*ke)/ke,Je=Math.round(pe.lat*ke)/ke,ht=this._map.getBearing(),Dt=this._map.getPitch(),tr="";if(W?tr+="/"+Fe+"/"+Je+"/"+$:tr+=$+"/"+Je+"/"+Fe,(ht||Dt)&&(tr+="/"+Math.round(ht*10)/10),Dt&&(tr+="/"+Math.round(Dt)),this._hashName){var pr=this._hashName,yr=!1,Rr=e.window.location.hash.slice(1).split("&").map(function(Kr){var $r=Kr.split("=")[0];return $r===pr?(yr=!0,$r+"="+tr):Kr}).filter(function(Kr){return Kr});return yr||Rr.push(pr+"="+tr),"#"+Rr.join("&")}return"#"+tr},Pi.prototype._getCurrentHash=function(){var W=this,pe=e.window.location.hash.replace("#","");if(this._hashName){var $;return pe.split("&").map(function(de){return de.split("=")}).forEach(function(de){de[0]===W._hashName&&($=de)}),($&&$[1]||"").split("/")}return pe.split("/")},Pi.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function($){return isNaN($)})){var pe=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:pe,pitch:+(W[4]||0)}),!0}return!1},Pi.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var Ki={linearity:.3,easing:e.bezier(0,0,.3,1)},Di=e.extend({deceleration:2500,maxSpeed:1400},Ki),le=e.extend({deceleration:20,maxSpeed:1400},Ki),Te=e.extend({deceleration:1e3,maxSpeed:360},Ki),De=e.extend({deceleration:1e3,maxSpeed:90},Ki),Ue=function(W){this._map=W,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Ue.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,pe=e.browser.now(),$=160;W.length>0&&pe-W[0].time>$;)W.shift()},Ue.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var pe={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},$=0,de=this._inertiaBuffer;$<de.length;$+=1){var ke=de[$],Fe=ke.settings;pe.zoom+=Fe.zoomDelta||0,pe.bearing+=Fe.bearingDelta||0,pe.pitch+=Fe.pitchDelta||0,Fe.panDelta&&pe.pan._add(Fe.panDelta),Fe.around&&(pe.around=Fe.around),Fe.pinchAround&&(pe.pinchAround=Fe.pinchAround)}var Je=this._inertiaBuffer[this._inertiaBuffer.length-1],ht=Je.time-this._inertiaBuffer[0].time,Dt={};if(pe.pan.mag()){var tr=$e(pe.pan.mag(),ht,e.extend({},Di,W||{}));Dt.offset=pe.pan.mult(tr.amount/pe.pan.mag()),Dt.center=this._map.transform.center,Be(Dt,tr)}if(pe.zoom){var pr=$e(pe.zoom,ht,le);Dt.zoom=this._map.transform.zoom+pr.amount,Be(Dt,pr)}if(pe.bearing){var yr=$e(pe.bearing,ht,Te);Dt.bearing=this._map.transform.bearing+e.clamp(yr.amount,-179,179),Be(Dt,yr)}if(pe.pitch){var Rr=$e(pe.pitch,ht,De);Dt.pitch=this._map.transform.pitch+Rr.amount,Be(Dt,Rr)}if(Dt.zoom||Dt.bearing){var Kr=pe.pinchAround===void 0?pe.around:pe.pinchAround;Dt.around=Kr?this._map.unproject(Kr):this._map.getCenter()}return this.clear(),e.extend(Dt,{noMoveStart:!0})}};function Be(ce,W){(!ce.duration||ce.duration<W.duration)&&(ce.duration=W.duration,ce.easing=W.easing)}function $e(ce,W,pe){var $=pe.maxSpeed,de=pe.linearity,ke=pe.deceleration,Fe=e.clamp(ce*de/(W/1e3),-$,$),Je=Math.abs(Fe)/(ke*de);return{easing:pe.easing,duration:Je*1e3,amount:Fe*(Je/2)}}var wt=function(ce){function W($,de,ke,Fe){Fe===void 0&&(Fe={});var Je=i.mousePos(de.getCanvasContainer(),ke),ht=de.unproject(Je);ce.call(this,$,e.extend({point:Je,lngLat:ht,originalEvent:ke},Fe)),this._defaultPrevented=!1,this.target=de}ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W;var pe={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},pe.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,pe),W}(e.Event),gt=function(ce){function W($,de,ke){var Fe=$==="touchend"?ke.changedTouches:ke.touches,Je=i.touchPos(de.getCanvasContainer(),Fe),ht=Je.map(function(pr){return de.unproject(pr)}),Dt=Je.reduce(function(pr,yr,Rr,Kr){return pr.add(yr.div(Kr.length))},new e.Point(0,0)),tr=de.unproject(Dt);ce.call(this,$,{points:Je,point:Dt,lngLats:ht,lngLat:tr,originalEvent:ke}),this._defaultPrevented=!1}ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W;var pe={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},pe.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,pe),W}(e.Event),Ft=function(ce){function W($,de,ke){ce.call(this,$,{originalEvent:ke}),this._defaultPrevented=!1}ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W;var pe={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},pe.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,pe),W}(e.Event),qt=function(W,pe){this._map=W,this._clickTolerance=pe.clickTolerance};qt.prototype.reset=function(){delete this._mousedownPos},qt.prototype.wheel=function(W){return this._firePreventable(new Ft(W.type,this._map,W))},qt.prototype.mousedown=function(W,pe){return this._mousedownPos=pe,this._firePreventable(new wt(W.type,this._map,W))},qt.prototype.mouseup=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.click=function(W,pe){this._mousedownPos&&this._mousedownPos.dist(pe)>=this._clickTolerance||this._map.fire(new wt(W.type,this._map,W))},qt.prototype.dblclick=function(W){return this._firePreventable(new wt(W.type,this._map,W))},qt.prototype.mouseover=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.mouseout=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.touchstart=function(W){return this._firePreventable(new gt(W.type,this._map,W))},qt.prototype.touchmove=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype.touchend=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype.touchcancel=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},qt.prototype.isEnabled=function(){return!0},qt.prototype.isActive=function(){return!1},qt.prototype.enable=function(){},qt.prototype.disable=function(){};var ar=function(W){this._map=W};ar.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ar.prototype.mousemove=function(W){this._map.fire(new wt(W.type,this._map,W))},ar.prototype.mousedown=function(){this._delayContextMenu=!0},ar.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ar.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new wt(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},ar.prototype.isEnabled=function(){return!0},ar.prototype.isActive=function(){return!1},ar.prototype.enable=function(){},ar.prototype.disable=function(){};var ir=function(W,pe){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=pe.clickTolerance||1};ir.prototype.isEnabled=function(){return!!this._enabled},ir.prototype.isActive=function(){return!!this._active},ir.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ir.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},ir.prototype.mousedown=function(W,pe){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(i.disableDrag(),this._startPos=this._lastPos=pe,this._active=!0)},ir.prototype.mousemoveWindow=function(W,pe){if(!!this._active){var $=pe;if(!(this._lastPos.equals($)||!this._box&&$.dist(this._startPos)<this._clickTolerance)){var de=this._startPos;this._lastPos=$,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var ke=Math.min(de.x,$.x),Fe=Math.max(de.x,$.x),Je=Math.min(de.y,$.y),ht=Math.max(de.y,$.y);i.setTransform(this._box,"translate("+ke+"px,"+Je+"px)"),this._box.style.width=Fe-ke+"px",this._box.style.height=ht-Je+"px"}}},ir.prototype.mouseupWindow=function(W,pe){var $=this;if(!!this._active&&W.button===0){var de=this._startPos,ke=pe;if(this.reset(),i.suppressClick(),de.x===ke.x&&de.y===ke.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Fe){return Fe.fitScreenCoordinates(de,ke,$._map.getBearing(),{linear:!0})}}}},ir.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},ir.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},ir.prototype._fireEvent=function(W,pe){return this._map.fire(new e.Event(W,{originalEvent:pe}))};function Cr(ce,W){for(var pe={},$=0;$<ce.length;$++)pe[ce[$].identifier]=W[$];return pe}function nn(ce){for(var W=new e.Point(0,0),pe=0,$=ce;pe<$.length;pe+=1){var de=$[pe];W._add(de)}return W.div(ce.length)}var pn=500,Ir=500,Wr=30,qr=function(W){this.reset(),this.numTouches=W.numTouches};qr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},qr.prototype.touchstart=function(W,pe,$){(this.centroid||$.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),$.length===this.numTouches&&(this.centroid=nn(pe),this.touches=Cr($,pe)))},qr.prototype.touchmove=function(W,pe,$){if(!(this.aborted||!this.centroid)){var de=Cr($,pe);for(var ke in this.touches){var Fe=this.touches[ke],Je=de[ke];(!Je||Je.dist(Fe)>Wr)&&(this.aborted=!0)}}},qr.prototype.touchend=function(W,pe,$){if((!this.centroid||W.timeStamp-this.startTime>Ir)&&(this.aborted=!0),$.length===0){var de=!this.aborted&&this.centroid;if(this.reset(),de)return de}};var fn=function(W){this.singleTap=new qr(W),this.numTaps=W.numTaps,this.reset()};fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fn.prototype.touchstart=function(W,pe,$){this.singleTap.touchstart(W,pe,$)},fn.prototype.touchmove=function(W,pe,$){this.singleTap.touchmove(W,pe,$)},fn.prototype.touchend=function(W,pe,$){var de=this.singleTap.touchend(W,pe,$);if(de){var ke=W.timeStamp-this.lastTime<pn,Fe=!this.lastTap||this.lastTap.dist(de)<Wr;if((!ke||!Fe)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=de,this.count===this.numTaps)return this.reset(),de}};var vn=function(){this._zoomIn=new fn({numTouches:1,numTaps:2}),this._zoomOut=new fn({numTouches:2,numTaps:1}),this.reset()};vn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},vn.prototype.touchstart=function(W,pe,$){this._zoomIn.touchstart(W,pe,$),this._zoomOut.touchstart(W,pe,$)},vn.prototype.touchmove=function(W,pe,$){this._zoomIn.touchmove(W,pe,$),this._zoomOut.touchmove(W,pe,$)},vn.prototype.touchend=function(W,pe,$){var de=this,ke=this._zoomIn.touchend(W,pe,$),Fe=this._zoomOut.touchend(W,pe,$);if(ke)return this._active=!0,W.preventDefault(),setTimeout(function(){return de.reset()},0),{cameraAnimation:function(Je){return Je.easeTo({duration:300,zoom:Je.getZoom()+1,around:Je.unproject(ke)},{originalEvent:W})}};if(Fe)return this._active=!0,W.preventDefault(),setTimeout(function(){return de.reset()},0),{cameraAnimation:function(Je){return Je.easeTo({duration:300,zoom:Je.getZoom()-1,around:Je.unproject(Fe)},{originalEvent:W})}}},vn.prototype.touchcancel=function(){this.reset()},vn.prototype.enable=function(){this._enabled=!0},vn.prototype.disable=function(){this._enabled=!1,this.reset()},vn.prototype.isEnabled=function(){return this._enabled},vn.prototype.isActive=function(){return this._active};var tn=0,Zn=2,ha=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};ha.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ha.prototype._correctButton=function(W,pe){return!1},ha.prototype._move=function(W,pe){return{}},ha.prototype.mousedown=function(W,pe){if(!this._lastPoint){var $=i.mouseButton(W);!this._correctButton(W,$)||(this._lastPoint=pe,this._eventButton=$)}},ha.prototype.mousemoveWindow=function(W,pe){var $=this._lastPoint;if(!!$&&(W.preventDefault(),!(!this._moved&&pe.dist($)<this._clickTolerance)))return this._moved=!0,this._lastPoint=pe,this._move($,pe)},ha.prototype.mouseupWindow=function(W){var pe=i.mouseButton(W);pe===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var Pa=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.mousedown=function($,de){ce.prototype.mousedown.call(this,$,de),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function($,de){return de===tn&&!$.ctrlKey},W.prototype._move=function($,de){return{around:de,panDelta:de.sub($)}},W}(ha),pa=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype._correctButton=function($,de){return de===tn&&$.ctrlKey||de===Zn},W.prototype._move=function($,de){var ke=.8,Fe=(de.x-$.x)*ke;if(Fe)return this._active=!0,{bearingDelta:Fe}},W.prototype.contextmenu=function($){$.preventDefault()},W}(ha),Na=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype._correctButton=function($,de){return de===tn&&$.ctrlKey||de===Zn},W.prototype._move=function($,de){var ke=-.5,Fe=(de.y-$.y)*ke;if(Fe)return this._active=!0,{pitchDelta:Fe}},W.prototype.contextmenu=function($){$.preventDefault()},W}(ha),xa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};xa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},xa.prototype.touchstart=function(W,pe,$){return this._calculateTransform(W,pe,$)},xa.prototype.touchmove=function(W,pe,$){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,pe,$)},xa.prototype.touchend=function(W,pe,$){this._calculateTransform(W,pe,$),this._active&&$.length<this._minTouches&&this.reset()},xa.prototype.touchcancel=function(){this.reset()},xa.prototype._calculateTransform=function(W,pe,$){$.length>0&&(this._active=!0);var de=Cr($,pe),ke=new e.Point(0,0),Fe=new e.Point(0,0),Je=0;for(var ht in de){var Dt=de[ht],tr=this._touches[ht];tr&&(ke._add(Dt),Fe._add(Dt.sub(tr)),Je++,de[ht]=Dt)}if(this._touches=de,!(Je<this._minTouches||!Fe.mag())){var pr=Fe.div(Je);if(this._sum._add(pr),!(this._sum.mag()<this._clickTolerance)){var yr=ke.div(Je);return{around:yr,panDelta:pr}}}},xa.prototype.enable=function(){this._enabled=!0},xa.prototype.disable=function(){this._enabled=!1,this.reset()},xa.prototype.isEnabled=function(){return this._enabled},xa.prototype.isActive=function(){return this._active};var $a=function(){this.reset()};$a.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},$a.prototype._start=function(W){},$a.prototype._move=function(W,pe,$){return{}},$a.prototype.touchstart=function(W,pe,$){this._firstTwoTouches||$.length<2||(this._firstTwoTouches=[$[0].identifier,$[1].identifier],this._start([pe[0],pe[1]]))},$a.prototype.touchmove=function(W,pe,$){if(!!this._firstTwoTouches){W.preventDefault();var de=this._firstTwoTouches,ke=de[0],Fe=de[1],Je=Va($,pe,ke),ht=Va($,pe,Fe);if(!(!Je||!ht)){var Dt=this._aroundCenter?null:Je.add(ht).div(2);return this._move([Je,ht],Dt,W)}}},$a.prototype.touchend=function(W,pe,$){if(!!this._firstTwoTouches){var de=this._firstTwoTouches,ke=de[0],Fe=de[1],Je=Va($,pe,ke),ht=Va($,pe,Fe);Je&&ht||(this._active&&i.suppressClick(),this.reset())}},$a.prototype.touchcancel=function(){this.reset()},$a.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},$a.prototype.disable=function(){this._enabled=!1,this.reset()},$a.prototype.isEnabled=function(){return this._enabled},$a.prototype.isActive=function(){return this._active};function Va(ce,W,pe){for(var $=0;$<ce.length;$++)if(ce[$].identifier===pe)return W[$]}var ui=.1;function Ci(ce,W){return Math.log(ce/W)/Math.LN2}var Do=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ce.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function($){this._startDistance=this._distance=$[0].dist($[1])},W.prototype._move=function($,de){var ke=this._distance;if(this._distance=$[0].dist($[1]),!(!this._active&&Math.abs(Ci(this._distance,this._startDistance))<ui))return this._active=!0,{zoomDelta:Ci(this._distance,ke),pinchAround:de}},W}($a),Ji=25;function _a(ce,W){return ce.angleWith(W)*180/Math.PI}var di=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ce.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function($){this._startVector=this._vector=$[0].sub($[1]),this._minDiameter=$[0].dist($[1])},W.prototype._move=function($,de){var ke=this._vector;if(this._vector=$[0].sub($[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:_a(this._vector,ke),pinchAround:de}},W.prototype._isBelowThreshold=function($){this._minDiameter=Math.min(this._minDiameter,$.mag());var de=Math.PI*this._minDiameter,ke=Ji/de*360,Fe=_a($,this._startVector);return Math.abs(Fe)<ke},W}($a);function ii(ce){return Math.abs(ce.y)>Math.abs(ce.x)}var Ui=100,yi=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ce.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function($){this._lastPoints=$,ii($[0].sub($[1]))&&(this._valid=!1)},W.prototype._move=function($,de,ke){var Fe=$[0].sub(this._lastPoints[0]),Je=$[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Fe,Je,ke.timeStamp),!!this._valid){this._lastPoints=$,this._active=!0;var ht=(Fe.y+Je.y)/2,Dt=-.5;return{pitchDelta:ht*Dt}}},W.prototype.gestureBeginsVertically=function($,de,ke){if(this._valid!==void 0)return this._valid;var Fe=2,Je=$.mag()>=Fe,ht=de.mag()>=Fe;if(!(!Je&&!ht)){if(!Je||!ht)return this._firstMove===void 0&&(this._firstMove=ke),ke-this._firstMove<Ui?void 0:!1;var Dt=$.y>0==de.y>0;return ii($)&&ii(de)&&Dt}},W}($a),So={panStep:100,bearingStep:15,pitchStep:10},mo=function(){var W=So;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};mo.prototype.reset=function(){this._active=!1},mo.prototype.keydown=function(W){var pe=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var $=0,de=0,ke=0,Fe=0,Je=0;switch(W.keyCode){case 61:case 107:case 171:case 187:$=1;break;case 189:case 109:case 173:$=-1;break;case 37:W.shiftKey?de=-1:(W.preventDefault(),Fe=-1);break;case 39:W.shiftKey?de=1:(W.preventDefault(),Fe=1);break;case 38:W.shiftKey?ke=1:(W.preventDefault(),Je=-1);break;case 40:W.shiftKey?ke=-1:(W.preventDefault(),Je=1);break;default:return}return{cameraAnimation:function(ht){var Dt=ht.getZoom();ht.easeTo({duration:300,easeId:"keyboardHandler",easing:Oo,zoom:$?Math.round(Dt)+$*(W.shiftKey?2:1):Dt,bearing:ht.getBearing()+de*pe._bearingStep,pitch:ht.getPitch()+ke*pe._pitchStep,offset:[-Fe*pe._panStep,-Je*pe._panStep],center:ht.getCenter()},{originalEvent:W})}}}},mo.prototype.enable=function(){this._enabled=!0},mo.prototype.disable=function(){this._enabled=!1,this.reset()},mo.prototype.isEnabled=function(){return this._enabled},mo.prototype.isActive=function(){return this._active};function Oo(ce){return ce*(2-ce)}var ms=4.000244140625,ns=1/100,ys=1/450,io=2,eo=function(W,pe){this._map=W,this._el=W.getCanvasContainer(),this._handler=pe,this._delta=0,this._defaultZoomRate=ns,this._wheelZoomRate=ys,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};eo.prototype.setZoomRate=function(W){this._defaultZoomRate=W},eo.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},eo.prototype.isEnabled=function(){return!!this._enabled},eo.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},eo.prototype.isZooming=function(){return!!this._zooming},eo.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},eo.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},eo.prototype.wheel=function(W){if(!!this.isEnabled()){var pe=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,$=e.browser.now(),de=$-(this._lastWheelEventTime||0);this._lastWheelEventTime=$,pe!==0&&pe%ms===0?this._type="wheel":pe!==0&&Math.abs(pe)<4?this._type="trackpad":de>400?(this._type=null,this._lastValue=pe,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(de*pe)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,pe+=this._lastValue)),W.shiftKey&&pe&&(pe=pe/4),this._type&&(this._lastWheelEvent=W,this._delta-=pe,this._active||this._start(W)),W.preventDefault()}},eo.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},eo.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var pe=i.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(pe)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},eo.prototype.renderFrame=function(){return this._onScrollFrame()},eo.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var pe=this._map.transform;if(this._delta!==0){var $=this._type==="wheel"&&Math.abs(this._delta)>ms?this._wheelZoomRate:this._defaultZoomRate,de=io/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&de!==0&&(de=1/de);var ke=typeof this._targetZoom=="number"?pe.zoomScale(this._targetZoom):pe.scale;this._targetZoom=Math.min(pe.maxZoom,Math.max(pe.minZoom,pe.scaleZoom(ke*de))),this._type==="wheel"&&(this._startZoom=pe.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Fe=typeof this._targetZoom=="number"?this._targetZoom:pe.zoom,Je=this._startZoom,ht=this._easing,Dt=!1,tr;if(this._type==="wheel"&&Je&&ht){var pr=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),yr=ht(pr);tr=e.number(Je,Fe,yr),pr<1?this._frameId||(this._frameId=!0):Dt=!0}else tr=Fe,Dt=!0;return this._active=!0,Dt&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Dt,zoomDelta:tr-pe.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},eo.prototype._smoothOutEasing=function(W){var pe=e.ease;if(this._prevEase){var $=this._prevEase,de=(e.browser.now()-$.start)/$.duration,ke=$.easing(de+.01)-$.easing(de),Fe=.27/Math.sqrt(ke*ke+1e-4)*.01,Je=Math.sqrt(.27*.27-Fe*Fe);pe=e.bezier(Fe,Je,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:pe},pe},eo.prototype.reset=function(){this._active=!1};var Za=function(W,pe){this._clickZoom=W,this._tapZoom=pe};Za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var oi=function(){this.reset()};oi.prototype.reset=function(){this._active=!1},oi.prototype.dblclick=function(W,pe){return W.preventDefault(),{cameraAnimation:function($){$.easeTo({duration:300,zoom:$.getZoom()+(W.shiftKey?-1:1),around:$.unproject(pe)},{originalEvent:W})}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Uo=function(){this._tap=new fn({numTouches:1,numTaps:1}),this.reset()};Uo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Uo.prototype.touchstart=function(W,pe,$){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>pn&&this.reset(),this._tapTime?$.length>0&&(this._swipePoint=pe[0],this._swipeTouch=$[0].identifier):this._tap.touchstart(W,pe,$))},Uo.prototype.touchmove=function(W,pe,$){if(!this._tapTime)this._tap.touchmove(W,pe,$);else if(this._swipePoint){if($[0].identifier!==this._swipeTouch)return;var de=pe[0],ke=de.y-this._swipePoint.y;return this._swipePoint=de,W.preventDefault(),this._active=!0,{zoomDelta:ke/128}}},Uo.prototype.touchend=function(W,pe,$){if(this._tapTime)this._swipePoint&&$.length===0&&this.reset();else{var de=this._tap.touchend(W,pe,$);de&&(this._tapTime=W.timeStamp)}},Uo.prototype.touchcancel=function(){this.reset()},Uo.prototype.enable=function(){this._enabled=!0},Uo.prototype.disable=function(){this._enabled=!1,this.reset()},Uo.prototype.isEnabled=function(){return this._enabled},Uo.prototype.isActive=function(){return this._active};var wo=function(W,pe,$){this._el=W,this._mousePan=pe,this._touchPan=$};wo.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},wo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},wo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},wo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var $o=function(W,pe,$){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=pe,this._mousePitch=$};$o.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},$o.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},$o.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},$o.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var fo=function(W,pe,$,de){this._el=W,this._touchZoom=pe,this._touchRotate=$,this._tapDragZoom=de,this._rotationDisabled=!1,this._enabled=!0};fo.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},fo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},fo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},fo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},fo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},fo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xs=function(ce){return ce.zoom||ce.drag||ce.pitch||ce.rotate},js=function(ce){function W(){ce.apply(this,arguments)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W}(e.Event);function Iu(ce){return ce.panDelta&&ce.panDelta.mag()||ce.zoomDelta||ce.bearingDelta||ce.pitchDelta}var co=function(W,pe){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(W),this._bearingSnap=pe.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(pe),e.bindAll(["handleEvent","handleWindowEvent"],this);var $=this._el;this._listeners=[[$,"touchstart",{passive:!1}],[$,"touchmove",{passive:!1}],[$,"touchend",void 0],[$,"touchcancel",void 0],[$,"mousedown",void 0],[$,"mousemove",void 0],[$,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[$,"mouseover",void 0],[$,"mouseout",void 0],[$,"dblclick",void 0],[$,"click",void 0],[$,"keydown",{capture:!1}],[$,"keyup",void 0],[$,"wheel",{passive:!1}],[$,"contextmenu",void 0],[e.window,"blur",void 0]];for(var de=0,ke=this._listeners;de<ke.length;de+=1){var Fe=ke[de],Je=Fe[0],ht=Fe[1],Dt=Fe[2];i.addEventListener(Je,ht,Je===e.window.document?this.handleWindowEvent:this.handleEvent,Dt)}};co.prototype.destroy=function(){for(var W=0,pe=this._listeners;W<pe.length;W+=1){var $=pe[W],de=$[0],ke=$[1],Fe=$[2];i.removeEventListener(de,ke,de===e.window.document?this.handleWindowEvent:this.handleEvent,Fe)}},co.prototype._addDefaultHandlers=function(W){var pe=this._map,$=pe.getCanvasContainer();this._add("mapEvent",new qt(pe,W));var de=pe.boxZoom=new ir(pe,W);this._add("boxZoom",de);var ke=new vn,Fe=new oi;pe.doubleClickZoom=new Za(Fe,ke),this._add("tapZoom",ke),this._add("clickZoom",Fe);var Je=new Uo;this._add("tapDragZoom",Je);var ht=pe.touchPitch=new yi;this._add("touchPitch",ht);var Dt=new pa(W),tr=new Na(W);pe.dragRotate=new $o(W,Dt,tr),this._add("mouseRotate",Dt,["mousePitch"]),this._add("mousePitch",tr,["mouseRotate"]);var pr=new Pa(W),yr=new xa(W);pe.dragPan=new wo($,pr,yr),this._add("mousePan",pr),this._add("touchPan",yr,["touchZoom","touchRotate"]);var Rr=new di,Kr=new Do;pe.touchZoomRotate=new fo($,Kr,Rr,Je),this._add("touchRotate",Rr,["touchPan","touchZoom"]),this._add("touchZoom",Kr,["touchPan","touchRotate"]);var $r=pe.scrollZoom=new eo(pe,this);this._add("scrollZoom",$r,["mousePan"]);var Xr=pe.keyboard=new mo;this._add("keyboard",Xr),this._add("blockableMapEvent",new ar(pe));for(var rn=0,xn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];rn<xn.length;rn+=1){var Fn=xn[rn];W.interactive&&W[Fn]&&pe[Fn].enable(W[Fn])}},co.prototype._add=function(W,pe,$){this._handlers.push({handlerName:W,handler:pe,allowed:$}),this._handlersById[W]=pe},co.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,pe=this._handlers;W<pe.length;W+=1){var $=pe[W],de=$.handler;de.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},co.prototype.isActive=function(){for(var W=0,pe=this._handlers;W<pe.length;W+=1){var $=pe[W],de=$.handler;if(de.isActive())return!0}return!1},co.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},co.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},co.prototype.isMoving=function(){return Boolean(xs(this._eventsInProgress))||this.isZooming()},co.prototype._blockedByActive=function(W,pe,$){for(var de in W)if(de!==$&&(!pe||pe.indexOf(de)<0))return!0;return!1},co.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},co.prototype._getMapTouches=function(W){for(var pe=[],$=0,de=W;$<de.length;$+=1){var ke=de[$],Fe=ke.target;this._el.contains(Fe)&&pe.push(ke)}return pe},co.prototype.handleEvent=function(W,pe){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var $=W.type==="renderFrame"?void 0:W,de={needsRenderFrame:!1},ke={},Fe={},Je=W.touches?this._getMapTouches(W.touches):void 0,ht=Je?i.touchPos(this._el,Je):i.mousePos(this._el,W),Dt=0,tr=this._handlers;Dt<tr.length;Dt+=1){var pr=tr[Dt],yr=pr.handlerName,Rr=pr.handler,Kr=pr.allowed;if(!!Rr.isEnabled()){var $r=void 0;this._blockedByActive(Fe,Kr,yr)?Rr.reset():Rr[pe||W.type]&&($r=Rr[pe||W.type](W,ht,Je),this.mergeHandlerResult(de,ke,$r,yr,$),$r&&$r.needsRenderFrame&&this._triggerRenderFrame()),($r||Rr.isActive())&&(Fe[yr]=Rr)}}var Xr={};for(var rn in this._previousActiveHandlers)Fe[rn]||(Xr[rn]=$);this._previousActiveHandlers=Fe,(Object.keys(Xr).length||Iu(de))&&(this._changes.push([de,ke,Xr]),this._triggerRenderFrame()),(Object.keys(Fe).length||Iu(de))&&this._map._stop(!0),this._updatingCamera=!1;var xn=de.cameraAnimation;xn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],xn(this._map))},co.prototype.mergeHandlerResult=function(W,pe,$,de,ke){if(!!$){e.extend(W,$);var Fe={handlerName:de,originalEvent:$.originalEvent||ke};$.zoomDelta!==void 0&&(pe.zoom=Fe),$.panDelta!==void 0&&(pe.drag=Fe),$.pitchDelta!==void 0&&(pe.pitch=Fe),$.bearingDelta!==void 0&&(pe.rotate=Fe)}},co.prototype._applyChanges=function(){for(var W={},pe={},$={},de=0,ke=this._changes;de<ke.length;de+=1){var Fe=ke[de],Je=Fe[0],ht=Fe[1],Dt=Fe[2];Je.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add(Je.panDelta)),Je.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Je.zoomDelta),Je.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Je.bearingDelta),Je.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Je.pitchDelta),Je.around!==void 0&&(W.around=Je.around),Je.pinchAround!==void 0&&(W.pinchAround=Je.pinchAround),Je.noInertia&&(W.noInertia=Je.noInertia),e.extend(pe,ht),e.extend($,Dt)}this._updateMapTransform(W,pe,$),this._changes=[]},co.prototype._updateMapTransform=function(W,pe,$){var de=this._map,ke=de.transform;if(!Iu(W))return this._fireEvents(pe,$);var Fe=W.panDelta,Je=W.zoomDelta,ht=W.bearingDelta,Dt=W.pitchDelta,tr=W.around,pr=W.pinchAround;pr!==void 0&&(tr=pr),de._stop(!0),tr=tr||de.transform.centerPoint;var yr=ke.pointLocation(Fe?tr.sub(Fe):tr);ht&&(ke.bearing+=ht),Dt&&(ke.pitch+=Dt),Je&&(ke.zoom+=Je),ke.setLocationAtPoint(yr,tr),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(pe,$)},co.prototype._fireEvents=function(W,pe){var $=this,de=xs(this._eventsInProgress),ke=xs(W),Fe={};for(var Je in W){var ht=W[Je],Dt=ht.originalEvent;this._eventsInProgress[Je]||(Fe[Je+"start"]=Dt),this._eventsInProgress[Je]=W[Je]}!de&&ke&&this._fireEvent("movestart",ke.originalEvent);for(var tr in Fe)this._fireEvent(tr,Fe[tr]);W.rotate&&(this._bearingChanged=!0),ke&&this._fireEvent("move",ke.originalEvent);for(var pr in W){var yr=W[pr],Rr=yr.originalEvent;this._fireEvent(pr,Rr)}var Kr={},$r;for(var Xr in this._eventsInProgress){var rn=this._eventsInProgress[Xr],xn=rn.handlerName,Fn=rn.originalEvent;this._handlersById[xn].isActive()||(delete this._eventsInProgress[Xr],$r=pe[xn]||Fn,Kr[Xr+"end"]=$r)}for(var Gn in Kr)this._fireEvent(Gn,Kr[Gn]);var oa=xs(this._eventsInProgress);if((de||ke)&&!oa){this._updatingCamera=!0;var fa=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),la=function(wa){return wa!==0&&-$._bearingSnap<wa&&wa<$._bearingSnap};fa?(la(fa.bearing||this._map.getBearing())&&(fa.bearing=0),this._map.easeTo(fa,{originalEvent:$r})):(this._map.fire(new e.Event("moveend",{originalEvent:$r})),la(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},co.prototype._fireEvent=function(W,pe){this._map.fire(new e.Event(W,pe?{originalEvent:pe}:{}))},co.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(pe){delete W._frameId,W.handleEvent(new js("renderFrame",{timeStamp:pe})),W._applyChanges()}))};var qf=function(ce){function W(pe,$){ce.call(this),this._moving=!1,this._zooming=!1,this.transform=pe,this._bearingSnap=$.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function($,de){return this.jumpTo({center:$},de)},W.prototype.panBy=function($,de,ke){return $=e.Point.convert($).mult(-1),this.panTo(this.transform.center,e.extend({offset:$},de),ke)},W.prototype.panTo=function($,de,ke){return this.easeTo(e.extend({center:$},de),ke)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function($,de){return this.jumpTo({zoom:$},de),this},W.prototype.zoomTo=function($,de,ke){return this.easeTo(e.extend({zoom:$},de),ke)},W.prototype.zoomIn=function($,de){return this.zoomTo(this.getZoom()+1,$,de),this},W.prototype.zoomOut=function($,de){return this.zoomTo(this.getZoom()-1,$,de),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function($,de){return this.jumpTo({bearing:$},de),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function($,de){return this.jumpTo({padding:$},de),this},W.prototype.rotateTo=function($,de,ke){return this.easeTo(e.extend({bearing:$},de),ke)},W.prototype.resetNorth=function($,de){return this.rotateTo(0,e.extend({duration:1e3},$),de),this},W.prototype.resetNorthPitch=function($,de){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},$),de),this},W.prototype.snapToNorth=function($,de){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth($,de):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function($,de){return this.jumpTo({pitch:$},de),this},W.prototype.cameraForBounds=function($,de){return $=e.LngLatBounds.convert($),this._cameraForBoxAndBearing($.getNorthWest(),$.getSouthEast(),0,de)},W.prototype._cameraForBoxAndBearing=function($,de,ke,Fe){var Je={top:0,bottom:0,right:0,left:0};if(Fe=e.extend({padding:Je,offset:[0,0],maxZoom:this.transform.maxZoom},Fe),typeof Fe.padding=="number"){var ht=Fe.padding;Fe.padding={top:ht,bottom:ht,right:ht,left:ht}}Fe.padding=e.extend(Je,Fe.padding);var Dt=this.transform,tr=Dt.padding,pr=Dt.project(e.LngLat.convert($)),yr=Dt.project(e.LngLat.convert(de)),Rr=pr.rotate(-ke*Math.PI/180),Kr=yr.rotate(-ke*Math.PI/180),$r=new e.Point(Math.max(Rr.x,Kr.x),Math.max(Rr.y,Kr.y)),Xr=new e.Point(Math.min(Rr.x,Kr.x),Math.min(Rr.y,Kr.y)),rn=$r.sub(Xr),xn=(Dt.width-(tr.left+tr.right+Fe.padding.left+Fe.padding.right))/rn.x,Fn=(Dt.height-(tr.top+tr.bottom+Fe.padding.top+Fe.padding.bottom))/rn.y;if(Fn<0||xn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Gn=Math.min(Dt.scaleZoom(Dt.scale*Math.min(xn,Fn)),Fe.maxZoom),oa=e.Point.convert(Fe.offset),fa=(Fe.padding.left-Fe.padding.right)/2,la=(Fe.padding.top-Fe.padding.bottom)/2,wa=new e.Point(oa.x+fa,oa.y+la),La=wa.mult(Dt.scale/Dt.zoomScale(Gn)),Ca=Dt.unproject(pr.add(yr).div(2).sub(La));return{center:Ca,zoom:Gn,bearing:ke}},W.prototype.fitBounds=function($,de,ke){return this._fitInternal(this.cameraForBounds($,de),de,ke)},W.prototype.fitScreenCoordinates=function($,de,ke,Fe,Je){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert($)),this.transform.pointLocation(e.Point.convert(de)),ke,Fe),Fe,Je)},W.prototype._fitInternal=function($,de,ke){return $?(de=e.extend($,de),delete de.padding,de.linear?this.easeTo(de,ke):this.flyTo(de,ke)):this},W.prototype.jumpTo=function($,de){this.stop();var ke=this.transform,Fe=!1,Je=!1,ht=!1;return"zoom"in $&&ke.zoom!==+$.zoom&&(Fe=!0,ke.zoom=+$.zoom),$.center!==void 0&&(ke.center=e.LngLat.convert($.center)),"bearing"in $&&ke.bearing!==+$.bearing&&(Je=!0,ke.bearing=+$.bearing),"pitch"in $&&ke.pitch!==+$.pitch&&(ht=!0,ke.pitch=+$.pitch),$.padding!=null&&!ke.isPaddingEqual($.padding)&&(ke.padding=$.padding),this.fire(new e.Event("movestart",de)).fire(new e.Event("move",de)),Fe&&this.fire(new e.Event("zoomstart",de)).fire(new e.Event("zoom",de)).fire(new e.Event("zoomend",de)),Je&&this.fire(new e.Event("rotatestart",de)).fire(new e.Event("rotate",de)).fire(new e.Event("rotateend",de)),ht&&this.fire(new e.Event("pitchstart",de)).fire(new e.Event("pitch",de)).fire(new e.Event("pitchend",de)),this.fire(new e.Event("moveend",de))},W.prototype.easeTo=function($,de){var ke=this;this._stop(!1,$.easeId),$=e.extend({offset:[0,0],duration:500,easing:e.ease},$),($.animate===!1||!$.essential&&e.browser.prefersReducedMotion)&&($.duration=0);var Fe=this.transform,Je=this.getZoom(),ht=this.getBearing(),Dt=this.getPitch(),tr=this.getPadding(),pr="zoom"in $?+$.zoom:Je,yr="bearing"in $?this._normalizeBearing($.bearing,ht):ht,Rr="pitch"in $?+$.pitch:Dt,Kr="padding"in $?$.padding:Fe.padding,$r=e.Point.convert($.offset),Xr=Fe.centerPoint.add($r),rn=Fe.pointLocation(Xr),xn=e.LngLat.convert($.center||rn);this._normalizeCenter(xn);var Fn=Fe.project(rn),Gn=Fe.project(xn).sub(Fn),oa=Fe.zoomScale(pr-Je),fa,la;$.around&&(fa=e.LngLat.convert($.around),la=Fe.locationPoint(fa));var wa={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pr!==Je,this._rotating=this._rotating||ht!==yr,this._pitching=this._pitching||Rr!==Dt,this._padding=!Fe.isPaddingEqual(Kr),this._easeId=$.easeId,this._prepareEase(de,$.noMoveStart,wa),clearTimeout(this._easeEndTimeoutID),this._ease(function(La){if(ke._zooming&&(Fe.zoom=e.number(Je,pr,La)),ke._rotating&&(Fe.bearing=e.number(ht,yr,La)),ke._pitching&&(Fe.pitch=e.number(Dt,Rr,La)),ke._padding&&(Fe.interpolatePadding(tr,Kr,La),Xr=Fe.centerPoint.add($r)),fa)Fe.setLocationAtPoint(fa,la);else{var Ca=Fe.zoomScale(Fe.zoom-Je),Fa=pr>Je?Math.min(2,oa):Math.max(.5,oa),Ba=Math.pow(Fa,1-La),ti=Fe.unproject(Fn.add(Gn.mult(La*Ba)).mult(Ca));Fe.setLocationAtPoint(Fe.renderWorldCopies?ti.wrap():ti,Xr)}ke._fireMoveEvents(de)},function(La){ke._afterEase(de,La)},$),this},W.prototype._prepareEase=function($,de,ke){ke===void 0&&(ke={}),this._moving=!0,!de&&!ke.moving&&this.fire(new e.Event("movestart",$)),this._zooming&&!ke.zooming&&this.fire(new e.Event("zoomstart",$)),this._rotating&&!ke.rotating&&this.fire(new e.Event("rotatestart",$)),this._pitching&&!ke.pitching&&this.fire(new e.Event("pitchstart",$))},W.prototype._fireMoveEvents=function($){this.fire(new e.Event("move",$)),this._zooming&&this.fire(new e.Event("zoom",$)),this._rotating&&this.fire(new e.Event("rotate",$)),this._pitching&&this.fire(new e.Event("pitch",$))},W.prototype._afterEase=function($,de){if(!(this._easeId&&de&&this._easeId===de)){delete this._easeId;var ke=this._zooming,Fe=this._rotating,Je=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ke&&this.fire(new e.Event("zoomend",$)),Fe&&this.fire(new e.Event("rotateend",$)),Je&&this.fire(new e.Event("pitchend",$)),this.fire(new e.Event("moveend",$))}},W.prototype.flyTo=function($,de){var ke=this;if(!$.essential&&e.browser.prefersReducedMotion){var Fe=e.pick($,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,de)}this.stop(),$=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},$);var Je=this.transform,ht=this.getZoom(),Dt=this.getBearing(),tr=this.getPitch(),pr=this.getPadding(),yr="zoom"in $?e.clamp(+$.zoom,Je.minZoom,Je.maxZoom):ht,Rr="bearing"in $?this._normalizeBearing($.bearing,Dt):Dt,Kr="pitch"in $?+$.pitch:tr,$r="padding"in $?$.padding:Je.padding,Xr=Je.zoomScale(yr-ht),rn=e.Point.convert($.offset),xn=Je.centerPoint.add(rn),Fn=Je.pointLocation(xn),Gn=e.LngLat.convert($.center||Fn);this._normalizeCenter(Gn);var oa=Je.project(Fn),fa=Je.project(Gn).sub(oa),la=$.curve,wa=Math.max(Je.width,Je.height),La=wa/Xr,Ca=fa.mag();if("minZoom"in $){var Fa=e.clamp(Math.min($.minZoom,ht,yr),Je.minZoom,Je.maxZoom),Ba=wa/Je.zoomScale(Fa-ht);la=Math.sqrt(Ba/Ca*2)}var ti=la*la;function pi(gi){var zi=(La*La-wa*wa+(gi?-1:1)*ti*ti*Ca*Ca)/(2*(gi?La:wa)*ti*Ca);return Math.log(Math.sqrt(zi*zi+1)-zi)}function Yi(gi){return(Math.exp(gi)-Math.exp(-gi))/2}function xi(gi){return(Math.exp(gi)+Math.exp(-gi))/2}function ki(gi){return Yi(gi)/xi(gi)}var Ja=pi(0),Wi=function(gi){return xi(Ja)/xi(Ja+la*gi)},$i=function(gi){return wa*((xi(Ja)*ki(Ja+la*gi)-Yi(Ja))/ti)/Ca},to=(pi(1)-Ja)/la;if(Math.abs(Ca)<1e-6||!isFinite(to)){if(Math.abs(wa-La)<1e-6)return this.easeTo($,de);var Ri=La<wa?-1:1;to=Math.abs(Math.log(La/wa))/la,$i=function(){return 0},Wi=function(gi){return Math.exp(Ri*la*gi)}}if("duration"in $)$.duration=+$.duration;else{var ho="screenSpeed"in $?+$.screenSpeed/la:+$.speed;$.duration=1e3*to/ho}return $.maxDuration&&$.duration>$.maxDuration&&($.duration=0),this._zooming=!0,this._rotating=Dt!==Rr,this._pitching=Kr!==tr,this._padding=!Je.isPaddingEqual($r),this._prepareEase(de,!1),this._ease(function(gi){var zi=gi*to,Go=1/Wi(zi);Je.zoom=gi===1?yr:ht+Je.scaleZoom(Go),ke._rotating&&(Je.bearing=e.number(Dt,Rr,gi)),ke._pitching&&(Je.pitch=e.number(tr,Kr,gi)),ke._padding&&(Je.interpolatePadding(pr,$r,gi),xn=Je.centerPoint.add(rn));var as=gi===1?Gn:Je.unproject(oa.add(fa.mult($i(zi))).mult(Go));Je.setLocationAtPoint(Je.renderWorldCopies?as.wrap():as,xn),ke._fireMoveEvents(de)},function(){return ke._afterEase(de)},$),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function($,de){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ke=this._onEaseEnd;delete this._onEaseEnd,ke.call(this,de)}if(!$){var Fe=this.handlers;Fe&&Fe.stop()}return this},W.prototype._ease=function($,de,ke){ke.animate===!1||ke.duration===0?($(1),de()):(this._easeStart=e.browser.now(),this._easeOptions=ke,this._onEaseFrame=$,this._onEaseEnd=de,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var $=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing($)),$<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function($,de){$=e.wrap($,-180,180);var ke=Math.abs($-de);return Math.abs($-360-de)<ke&&($-=360),Math.abs($+360-de)<ke&&($+=360),$},W.prototype._normalizeCenter=function($){var de=this.transform;if(!(!de.renderWorldCopies||de.lngRange)){var ke=$.lng-de.center.lng;$.lng+=ke>180?-360:ke<-180?360:0}},W}(e.Evented),pu=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};pu.prototype.getDefaultPosition=function(){return"bottom-right"},pu.prototype.onAdd=function(W){var pe=this.options&&this.options.compact;return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),pe&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),pe===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},pu.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},pu.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var pe=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var $=pe.reduce(function(de,ke,Fe){return ke.value&&(de+=ke.key+"="+ke.value+(Fe<pe.length-1?"&":"")),de},"?");W.href=e.config.FEEDBACK_URL+"/"+$+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},pu.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},pu.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(ht){return typeof ht!="string"?"":ht})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var pe=this._map.style.stylesheet;this.styleOwner=pe.owner,this.styleId=pe.id}var $=this._map.style.sourceCaches;for(var de in $){var ke=$[de];if(ke.used){var Fe=ke.getSource();Fe.attribution&&W.indexOf(Fe.attribution)<0&&W.push(Fe.attribution)}}W.sort(function(ht,Dt){return ht.length-Dt.length}),W=W.filter(function(ht,Dt){for(var tr=Dt+1;tr<W.length;tr++)if(W[tr].indexOf(ht)>=0)return!1;return!0});var Je=W.join(" | ");Je!==this._attribHTML&&(this._attribHTML=Je,W.length?(this._innerContainer.innerHTML=Je,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},pu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var qi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};qi.prototype.onAdd=function(W){this._map=W,this._container=i.create("div","mapboxgl-ctrl");var pe=i.create("a","mapboxgl-ctrl-logo");return pe.target="_blank",pe.rel="noopener nofollow",pe.href="https://www.mapbox.com/",pe.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),pe.setAttribute("rel","noopener nofollow"),this._container.appendChild(pe),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},qi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},qi.prototype.getDefaultPosition=function(){return"bottom-left"},qi.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},qi.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var pe in W){var $=W[pe].getSource();if($.mapbox_logo)return!0}return!1}},qi.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var pe=W[0];this._map.getCanvasContainer().offsetWidth<250?pe.classList.add("mapboxgl-compact"):pe.classList.remove("mapboxgl-compact")}};var Qo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Qo.prototype.add=function(W){var pe=++this._id,$=this._queue;return $.push({callback:W,id:pe,cancelled:!1}),pe},Qo.prototype.remove=function(W){for(var pe=this._currentlyRunning,$=pe?this._queue.concat(pe):this._queue,de=0,ke=$;de<ke.length;de+=1){var Fe=ke[de];if(Fe.id===W){Fe.cancelled=!0;return}}},Qo.prototype.run=function(W){W===void 0&&(W=0);var pe=this._currentlyRunning=this._queue;this._queue=[];for(var $=0,de=pe;$<de.length;$+=1){var ke=de[$];if(!ke.cancelled&&(ke.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Qo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var _d={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},eh=e.window.HTMLImageElement,Sc=e.window.HTMLElement,Tf=e.window.ImageBitmap,ec=-2,th=22,xl=0,Af=60,nv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:ec,maxZoom:th,minPitch:xl,maxPitch:Af,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},av=function(ce){function W($){var de=this;if($=e.extend({},nv,$),$.minZoom!=null&&$.maxZoom!=null&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if($.minPitch!=null&&$.maxPitch!=null&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if($.minPitch!=null&&$.minPitch<xl)throw new Error("minPitch must be greater than or equal to "+xl);if($.maxPitch!=null&&$.maxPitch>Af)throw new Error("maxPitch must be less than or equal to "+Af);var ke=new ta($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies);if(ce.call(this,ke,$),this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new Qo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},_d,$.locale),this._requestManager=new e.RequestManager($.transformRequest,$.accessToken),typeof $.container=="string"){if(this._container=e.window.document.getElementById($.container),!this._container)throw new Error("Container '"+$.container+"' not found.")}else if($.container instanceof Sc)this._container=$.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if($.maxBounds&&this.setMaxBounds($.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return de._update(!1)}),this.on("moveend",function(){return de._update(!1)}),this.on("zoom",function(){return de._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new co(this,$);var Fe=typeof $.hash=="string"&&$.hash||void 0;this._hash=$.hash&&new Pi(Fe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,e.extend({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new pu({customAttribution:$.customAttribution})),this.addControl(new qi,$.logoPosition),this.on("style.load",function(){de.transform.unmodified&&de.jumpTo(de.style.stylesheet)}),this.on("data",function(Je){de._update(Je.dataType==="style"),de.fire(new e.Event(Je.dataType+"data",Je))}),this.on("dataloading",function(Je){de.fire(new e.Event(Je.dataType+"dataloading",Je))})}ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W;var pe={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(de,ke){if(ke===void 0&&de.getDefaultPosition&&(ke=de.getDefaultPosition()),ke===void 0&&(ke="top-right"),!de||!de.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Fe=de.onAdd(this);this._controls.push(de);var Je=this._controlPositions[ke];return ke.indexOf("bottom")!==-1?Je.insertBefore(Fe,Je.firstChild):Je.appendChild(Fe),this},W.prototype.removeControl=function(de){if(!de||!de.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ke=this._controls.indexOf(de);return ke>-1&&this._controls.splice(ke,1),de.onRemove(this),this},W.prototype.resize=function(de){var ke=this._containerDimensions(),Fe=ke[0],Je=ke[1];this._resizeCanvas(Fe,Je),this.transform.resize(Fe,Je),this.painter.resize(Fe,Je);var ht=!this._moving;return ht&&(this.stop(),this.fire(new e.Event("movestart",de)).fire(new e.Event("move",de))),this.fire(new e.Event("resize",de)),ht&&this.fire(new e.Event("moveend",de)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(de){return this.transform.setMaxBounds(e.LngLatBounds.convert(de)),this._update()},W.prototype.setMinZoom=function(de){if(de=de==null?ec:de,de>=ec&&de<=this.transform.maxZoom)return this.transform.minZoom=de,this._update(),this.getZoom()<de&&this.setZoom(de),this;throw new Error("minZoom must be between "+ec+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(de){if(de=de==null?th:de,de>=this.transform.minZoom)return this.transform.maxZoom=de,this._update(),this.getZoom()>de&&this.setZoom(de),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(de){if(de=de==null?xl:de,de<xl)throw new Error("minPitch must be greater than or equal to "+xl);if(de>=xl&&de<=this.transform.maxPitch)return this.transform.minPitch=de,this._update(),this.getPitch()<de&&this.setPitch(de),this;throw new Error("minPitch must be between "+xl+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(de){if(de=de==null?Af:de,de>Af)throw new Error("maxPitch must be less than or equal to "+Af);if(de>=this.transform.minPitch)return this.transform.maxPitch=de,this._update(),this.getPitch()>de&&this.setPitch(de),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(de){return this.transform.renderWorldCopies=de,this._update()},W.prototype.project=function(de){return this.transform.locationPoint(e.LngLat.convert(de))},W.prototype.unproject=function(de){return this.transform.pointLocation(e.Point.convert(de))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(de,ke,Fe){var Je=this,ht;if(de==="mouseenter"||de==="mouseover"){var Dt=!1,tr=function(Xr){var rn=Je.getLayer(ke)?Je.queryRenderedFeatures(Xr.point,{layers:[ke]}):[];rn.length?Dt||(Dt=!0,Fe.call(Je,new wt(de,Je,Xr.originalEvent,{features:rn}))):Dt=!1},pr=function(){Dt=!1};return{layer:ke,listener:Fe,delegates:{mousemove:tr,mouseout:pr}}}else if(de==="mouseleave"||de==="mouseout"){var yr=!1,Rr=function(Xr){var rn=Je.getLayer(ke)?Je.queryRenderedFeatures(Xr.point,{layers:[ke]}):[];rn.length?yr=!0:yr&&(yr=!1,Fe.call(Je,new wt(de,Je,Xr.originalEvent)))},Kr=function(Xr){yr&&(yr=!1,Fe.call(Je,new wt(de,Je,Xr.originalEvent)))};return{layer:ke,listener:Fe,delegates:{mousemove:Rr,mouseout:Kr}}}else{var $r=function(Xr){var rn=Je.getLayer(ke)?Je.queryRenderedFeatures(Xr.point,{layers:[ke]}):[];rn.length&&(Xr.features=rn,Fe.call(Je,Xr),delete Xr.features)};return{layer:ke,listener:Fe,delegates:(ht={},ht[de]=$r,ht)}}},W.prototype.on=function(de,ke,Fe){if(Fe===void 0)return ce.prototype.on.call(this,de,ke);var Je=this._createDelegatedListener(de,ke,Fe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[de]=this._delegatedListeners[de]||[],this._delegatedListeners[de].push(Je);for(var ht in Je.delegates)this.on(ht,Je.delegates[ht]);return this},W.prototype.once=function(de,ke,Fe){if(Fe===void 0)return ce.prototype.once.call(this,de,ke);var Je=this._createDelegatedListener(de,ke,Fe);for(var ht in Je.delegates)this.once(ht,Je.delegates[ht]);return this},W.prototype.off=function(de,ke,Fe){var Je=this;if(Fe===void 0)return ce.prototype.off.call(this,de,ke);var ht=function(Dt){for(var tr=Dt[de],pr=0;pr<tr.length;pr++){var yr=tr[pr];if(yr.layer===ke&&yr.listener===Fe){for(var Rr in yr.delegates)Je.off(Rr,yr.delegates[Rr]);return tr.splice(pr,1),Je}}};return this._delegatedListeners&&this._delegatedListeners[de]&&ht(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(de,ke){if(!this.style)return[];ke===void 0&&de!==void 0&&!(de instanceof e.Point)&&!Array.isArray(de)&&(ke=de,de=void 0),ke=ke||{},de=de||[[0,0],[this.transform.width,this.transform.height]];var Fe;if(de instanceof e.Point||typeof de[0]=="number")Fe=[e.Point.convert(de)];else{var Je=e.Point.convert(de[0]),ht=e.Point.convert(de[1]);Fe=[Je,new e.Point(ht.x,Je.y),ht,new e.Point(Je.x,ht.y),Je]}return this.style.queryRenderedFeatures(Fe,ke,this.transform)},W.prototype.querySourceFeatures=function(de,ke){return this.style.querySourceFeatures(de,ke)},W.prototype.setStyle=function(de,ke){return ke=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ke),ke.diff!==!1&&ke.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&de?(this._diffStyle(de,ke),this):(this._localIdeographFontFamily=ke.localIdeographFontFamily,this._updateStyle(de,ke))},W.prototype._getUIString=function(de){var ke=this._locale[de];if(ke==null)throw new Error("Missing UI string '"+de+"'");return ke},W.prototype._updateStyle=function(de,ke){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),de)this.style=new Jo(this,ke||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof de=="string"?this.style.loadURL(de):this.style.loadJSON(de),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Jo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(de,ke){var Fe=this;if(typeof de=="string"){var Je=this._requestManager.normalizeStyleURL(de),ht=this._requestManager.transformRequest(Je,e.ResourceType.Style);e.getJSON(ht,function(Dt,tr){Dt?Fe.fire(new e.ErrorEvent(Dt)):tr&&Fe._updateDiff(tr,ke)})}else typeof de=="object"&&this._updateDiff(de,ke)},W.prototype._updateDiff=function(de,ke){try{this.style.setState(de)&&this._update(!0)}catch(Fe){e.warnOnce("Unable to perform style diff: "+(Fe.message||Fe.error||Fe)+".  Rebuilding the style from scratch."),this._updateStyle(de,ke)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(de,ke){return this._lazyInitEmptyStyle(),this.style.addSource(de,ke),this._update(!0)},W.prototype.isSourceLoaded=function(de){var ke=this.style&&this.style.sourceCaches[de];if(ke===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+de+"'")));return}return ke.loaded()},W.prototype.areTilesLoaded=function(){var de=this.style&&this.style.sourceCaches;for(var ke in de){var Fe=de[ke],Je=Fe._tiles;for(var ht in Je){var Dt=Je[ht];if(!(Dt.state==="loaded"||Dt.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(de,ke,Fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(de,ke,Fe)},W.prototype.removeSource=function(de){return this.style.removeSource(de),this._update(!0)},W.prototype.getSource=function(de){return this.style.getSource(de)},W.prototype.addImage=function(de,ke,Fe){Fe===void 0&&(Fe={});var Je=Fe.pixelRatio;Je===void 0&&(Je=1);var ht=Fe.sdf;ht===void 0&&(ht=!1);var Dt=Fe.stretchX,tr=Fe.stretchY,pr=Fe.content;this._lazyInitEmptyStyle();var yr=0;if(ke instanceof eh||Tf&&ke instanceof Tf){var Rr=e.browser.getImageData(ke),Kr=Rr.width,$r=Rr.height,Xr=Rr.data;this.style.addImage(de,{data:new e.RGBAImage({width:Kr,height:$r},Xr),pixelRatio:Je,stretchX:Dt,stretchY:tr,content:pr,sdf:ht,version:yr})}else{if(ke.width===void 0||ke.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var rn=ke.width,xn=ke.height,Fn=ke.data,Gn=ke;this.style.addImage(de,{data:new e.RGBAImage({width:rn,height:xn},new Uint8Array(Fn)),pixelRatio:Je,stretchX:Dt,stretchY:tr,content:pr,sdf:ht,version:yr,userImage:Gn}),Gn.onAdd&&Gn.onAdd(this,de)}},W.prototype.updateImage=function(de,ke){var Fe=this.style.getImage(de);if(!Fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Je=ke instanceof eh||Tf&&ke instanceof Tf?e.browser.getImageData(ke):ke,ht=Je.width,Dt=Je.height,tr=Je.data;if(ht===void 0||Dt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ht!==Fe.data.width||Dt!==Fe.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var pr=!(ke instanceof eh||Tf&&ke instanceof Tf);Fe.data.replace(tr,pr),this.style.updateImage(de,Fe)},W.prototype.hasImage=function(de){return de?!!this.style.getImage(de):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(de){this.style.removeImage(de)},W.prototype.loadImage=function(de,ke){e.getImage(this._requestManager.transformRequest(de,e.ResourceType.Image),ke)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(de,ke){return this._lazyInitEmptyStyle(),this.style.addLayer(de,ke),this._update(!0)},W.prototype.moveLayer=function(de,ke){return this.style.moveLayer(de,ke),this._update(!0)},W.prototype.removeLayer=function(de){return this.style.removeLayer(de),this._update(!0)},W.prototype.getLayer=function(de){return this.style.getLayer(de)},W.prototype.setLayerZoomRange=function(de,ke,Fe){return this.style.setLayerZoomRange(de,ke,Fe),this._update(!0)},W.prototype.setFilter=function(de,ke,Fe){return Fe===void 0&&(Fe={}),this.style.setFilter(de,ke,Fe),this._update(!0)},W.prototype.getFilter=function(de){return this.style.getFilter(de)},W.prototype.setPaintProperty=function(de,ke,Fe,Je){return Je===void 0&&(Je={}),this.style.setPaintProperty(de,ke,Fe,Je),this._update(!0)},W.prototype.getPaintProperty=function(de,ke){return this.style.getPaintProperty(de,ke)},W.prototype.setLayoutProperty=function(de,ke,Fe,Je){return Je===void 0&&(Je={}),this.style.setLayoutProperty(de,ke,Fe,Je),this._update(!0)},W.prototype.getLayoutProperty=function(de,ke){return this.style.getLayoutProperty(de,ke)},W.prototype.setLight=function(de,ke){return ke===void 0&&(ke={}),this._lazyInitEmptyStyle(),this.style.setLight(de,ke),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(de,ke){return this.style.setFeatureState(de,ke),this._update()},W.prototype.removeFeatureState=function(de,ke){return this.style.removeFeatureState(de,ke),this._update()},W.prototype.getFeatureState=function(de){return this.style.getFeatureState(de)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var de=0,ke=0;return this._container&&(de=this._container.clientWidth||400,ke=this._container.clientHeight||300),[de,ke]},W.prototype._detectMissingCSS=function(){var de=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");de!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var de=this._container;de.classList.add("mapboxgl-map");var ke=this._missingCSSCanary=i.create("div","mapboxgl-canary",de);ke.style.visibility="hidden",this._detectMissingCSS();var Fe=this._canvasContainer=i.create("div","mapboxgl-canvas-container",de);this._interactive&&Fe.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",Fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Je=this._containerDimensions();this._resizeCanvas(Je[0],Je[1]);var ht=this._controlContainer=i.create("div","mapboxgl-control-container",de),Dt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(tr){Dt[tr]=i.create("div","mapboxgl-ctrl-"+tr,ht)})},W.prototype._resizeCanvas=function(de,ke){var Fe=e.browser.devicePixelRatio||1;this._canvas.width=Fe*de,this._canvas.height=Fe*ke,this._canvas.style.width=de+"px",this._canvas.style.height=ke+"px"},W.prototype._setupPainter=function(){var de=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ke=this._canvas.getContext("webgl",de)||this._canvas.getContext("experimental-webgl",de);if(!ke){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new qe(ke,this.transform),e.webpSupported.testSupport(ke)},W.prototype._contextLost=function(de){de.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:de}))},W.prototype._contextRestored=function(de){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:de}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(de){return this.style?(this._styleDirty=this._styleDirty||de,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(de){return this._update(),this._renderTaskQueue.add(de)},W.prototype._cancelRenderFrame=function(de){this._renderTaskQueue.remove(de)},W.prototype._render=function(de){var ke=this,Fe,Je=0,ht=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Fe=ht.createQueryEXT(),ht.beginQueryEXT(ht.TIME_ELAPSED_EXT,Fe),Je=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(de),!this._removed){var Dt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var tr=this.transform.zoom,pr=e.browser.now();this.style.zoomHistory.update(tr,pr);var yr=new e.EvaluationParameters(tr,{now:pr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Rr=yr.crossFadingFactor();(Rr!==1||Rr!==this._crossFadingFactor)&&(Dt=!0,this._crossFadingFactor=Rr),this.style.update(yr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Dt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Kr=e.browser.now()-Je;ht.endQueryEXT(ht.TIME_ELAPSED_EXT,Fe),setTimeout(function(){var rn=ht.getQueryObjectEXT(Fe,ht.QUERY_RESULT_EXT)/1e6;ht.deleteQueryEXT(Fe),ke.fire(new e.Event("gpu-timing-frame",{cpuTime:Kr,gpuTime:rn}))},50)}if(this.listens("gpu-timing-layer")){var $r=this.painter.collectGpuTimers();setTimeout(function(){var rn=ke.painter.queryGpuTimers($r);ke.fire(new e.Event("gpu-timing-layer",{layerTimes:rn}))},50)}var Xr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Xr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var de=0,ke=this._controls;de<ke.length;de+=1){var Fe=ke[de];Fe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Je=this.painter.context.gl.getExtension("WEBGL_lose_context");Je&&Je.loseContext(),kc(this._canvasContainer),kc(this._controlContainer),kc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var de=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ke){de._frame=null,de._render(ke)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(de){this._trackResize&&this.resize({originalEvent:de})._update()},pe.showTileBoundaries.get=function(){return!!this._showTileBoundaries},pe.showTileBoundaries.set=function($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())},pe.showPadding.get=function(){return!!this._showPadding},pe.showPadding.set=function($){this._showPadding!==$&&(this._showPadding=$,this._update())},pe.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},pe.showCollisionBoxes.set=function($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())},pe.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},pe.showOverdrawInspector.set=function($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())},pe.repaint.get=function(){return!!this._repaint},pe.repaint.set=function($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())},pe.vertices.get=function(){return!!this._vertices},pe.vertices.set=function($){this._vertices=$,this._update()},W.prototype._setCacheLimits=function(de,ke){e.setCacheLimits(de,ke)},pe.version.get=function(){return e.version},Object.defineProperties(W.prototype,pe),W}(qf);function kc(ce){ce.parentNode&&ce.parentNode.removeChild(ce)}var rh={showCompass:!0,showZoom:!0,visualizePitch:!1},uf=function(W){var pe=this;this.options=e.extend({},rh,W),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function($){return pe._map.zoomIn({},{originalEvent:$})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function($){return pe._map.zoomOut({},{originalEvent:$})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function($){pe.options.visualizePitch?pe._map.resetNorthPitch({},{originalEvent:$}):pe._map.resetNorth({},{originalEvent:$})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};uf.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},uf.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},uf.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fl(this._map,this._compass,this.options.visualizePitch)),this._container},uf.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},uf.prototype._createButton=function(W,pe){var $=i.create("button",W,this._container);return $.type="button",$.addEventListener("click",pe),$},uf.prototype._setButtonTitle=function(W,pe){var $=this._map._getUIString("NavigationControl."+pe);W.title=$,W.setAttribute("aria-label",$)};var Fl=function(W,pe,$){$===void 0&&($=!1),this._clickTolerance=10,this.element=pe,this.mouseRotate=new pa({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,$&&(this.mousePitch=new Na({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(pe,"mousedown",this.mousedown),i.addEventListener(pe,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(pe,"touchmove",this.touchmove),i.addEventListener(pe,"touchend",this.touchend),i.addEventListener(pe,"touchcancel",this.reset)};Fl.prototype.down=function(W,pe){this.mouseRotate.mousedown(W,pe),this.mousePitch&&this.mousePitch.mousedown(W,pe),i.disableDrag()},Fl.prototype.move=function(W,pe){var $=this.map,de=this.mouseRotate.mousemoveWindow(W,pe);if(de&&de.bearingDelta&&$.setBearing($.getBearing()+de.bearingDelta),this.mousePitch){var ke=this.mousePitch.mousemoveWindow(W,pe);ke&&ke.pitchDelta&&$.setPitch($.getPitch()+ke.pitchDelta)}},Fl.prototype.off=function(){var W=this.element;i.removeEventListener(W,"mousedown",this.mousedown),i.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(W,"touchmove",this.touchmove),i.removeEventListener(W,"touchend",this.touchend),i.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},Fl.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},Fl.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),i.mousePos(this.element,W)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},Fl.prototype.mousemove=function(W){this.move(W,i.mousePos(this.element,W))},Fl.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},Fl.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},Fl.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},Fl.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Fl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function ff(ce,W,pe){if(ce=new e.LngLat(ce.lng,ce.lat),W){var $=new e.LngLat(ce.lng-360,ce.lat),de=new e.LngLat(ce.lng+360,ce.lat),ke=pe.locationPoint(ce).distSqr(W);pe.locationPoint($).distSqr(W)<ke?ce=$:pe.locationPoint(de).distSqr(W)<ke&&(ce=de)}for(;Math.abs(ce.lng-pe.center.lng)>180;){var Fe=pe.locationPoint(ce);if(Fe.x>=0&&Fe.y>=0&&Fe.x<=pe.width&&Fe.y<=pe.height)break;ce.lng>pe.center.lng?ce.lng-=360:ce.lng+=360}return ce}var Cc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nh(ce,W,pe){var $=ce.classList;for(var de in Cc)$.remove("mapboxgl-"+pe+"-anchor-"+de);$.add("mapboxgl-"+pe+"-anchor-"+W)}var tc=function(ce){function W(pe,$){var de=this;if(ce.call(this),(pe instanceof e.window.HTMLElement||$)&&(pe=e.extend({element:pe},$)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=pe&&pe.anchor||"center",this._color=pe&&pe.color||"#3FB1CE",this._draggable=pe&&pe.draggable||!1,this._state="inactive",this._rotation=pe&&pe.rotation||0,this._rotationAlignment=pe&&pe.rotationAlignment||"auto",this._pitchAlignment=pe&&pe.pitchAlignment&&pe.pitchAlignment!=="auto"?pe.pitchAlignment:this._rotationAlignment,!pe||!pe.element){this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var ke=i.createNS("http://www.w3.org/2000/svg","svg");ke.setAttributeNS(null,"display","block"),ke.setAttributeNS(null,"height","41px"),ke.setAttributeNS(null,"width","27px"),ke.setAttributeNS(null,"viewBox","0 0 27 41");var Fe=i.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"stroke","none"),Fe.setAttributeNS(null,"stroke-width","1"),Fe.setAttributeNS(null,"fill","none"),Fe.setAttributeNS(null,"fill-rule","evenodd");var Je=i.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"fill-rule","nonzero");var ht=i.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ht.setAttributeNS(null,"fill","#000000");for(var Dt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],tr=0,pr=Dt;tr<pr.length;tr+=1){var yr=pr[tr],Rr=i.createNS("http://www.w3.org/2000/svg","ellipse");Rr.setAttributeNS(null,"opacity","0.04"),Rr.setAttributeNS(null,"cx","10.5"),Rr.setAttributeNS(null,"cy","5.80029008"),Rr.setAttributeNS(null,"rx",yr.rx),Rr.setAttributeNS(null,"ry",yr.ry),ht.appendChild(Rr)}var Kr=i.createNS("http://www.w3.org/2000/svg","g");Kr.setAttributeNS(null,"fill",this._color);var $r=i.createNS("http://www.w3.org/2000/svg","path");$r.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Kr.appendChild($r);var Xr=i.createNS("http://www.w3.org/2000/svg","g");Xr.setAttributeNS(null,"opacity","0.25"),Xr.setAttributeNS(null,"fill","#000000");var rn=i.createNS("http://www.w3.org/2000/svg","path");rn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Xr.appendChild(rn);var xn=i.createNS("http://www.w3.org/2000/svg","g");xn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xn.setAttributeNS(null,"fill","#FFFFFF");var Fn=i.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Gn=i.createNS("http://www.w3.org/2000/svg","circle");Gn.setAttributeNS(null,"fill","#000000"),Gn.setAttributeNS(null,"opacity","0.25"),Gn.setAttributeNS(null,"cx","5.5"),Gn.setAttributeNS(null,"cy","5.5"),Gn.setAttributeNS(null,"r","5.4999962");var oa=i.createNS("http://www.w3.org/2000/svg","circle");oa.setAttributeNS(null,"fill","#FFFFFF"),oa.setAttributeNS(null,"cx","5.5"),oa.setAttributeNS(null,"cy","5.5"),oa.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(Gn),Fn.appendChild(oa),Je.appendChild(ht),Je.appendChild(Kr),Je.appendChild(Xr),Je.appendChild(xn),Je.appendChild(Fn),ke.appendChild(Je),this._element.appendChild(ke),this._offset=e.Point.convert(pe&&pe.offset||[0,-14])}else this._element=pe.element,this._offset=e.Point.convert(pe&&pe.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(fa){fa.preventDefault()}),this._element.addEventListener("mousedown",function(fa){fa.preventDefault()}),this._element.addEventListener("focus",function(){var fa=de._map.getContainer();fa.scrollTop=0,fa.scrollLeft=0}),nh(this._element,this._anchor,"marker"),this._popup=null}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.addTo=function($){return this.remove(),this._map=$,$.getCanvasContainer().appendChild(this._element),$.on("move",this._update),$.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function($){return this._lngLat=e.LngLat.convert($),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function($){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),$){if(!("offset"in $.options)){var de=38.1,ke=13.5,Fe=Math.sqrt(Math.pow(ke,2)/2);$.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-de],"bottom-left":[Fe,(de-ke+Fe)*-1],"bottom-right":[-Fe,(de-ke+Fe)*-1],left:[ke,(de-ke)*-1],right:[-ke,(de-ke)*-1]}:this._offset}this._popup=$,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function($){var de=$.code,ke=$.charCode||$.keyCode;(de==="Space"||de==="Enter"||ke===32||ke===13)&&this.togglePopup()},W.prototype._onMapClick=function($){var de=$.originalEvent.target,ke=this._element;this._popup&&(de===ke||ke.contains(de))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var $=this._popup;if($)$.isOpen()?$.remove():$.addTo(this._map);else return this;return this},W.prototype._update=function($){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ff(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var de="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?de="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(de="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ke="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?ke="rotateX(0deg)":this._pitchAlignment==="map"&&(ke="rotateX("+this._map.getPitch()+"deg)"),(!$||$.type==="moveend")&&(this._pos=this._pos.round()),i.setTransform(this._element,Cc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ke+" "+de)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function($){return this._offset=e.Point.convert($),this._update(),this},W.prototype._onMove=function($){this._pos=$.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function($){this._element.contains($.originalEvent.target)&&($.preventDefault(),this._positionDelta=$.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function($){return this._draggable=!!$,this._map&&($?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function($){return this._rotation=$||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function($){return this._rotationAlignment=$||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function($){return this._pitchAlignment=$&&$!=="auto"?$:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),iv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Mf;function Lc(ce){Mf!==void 0?ce(Mf):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){Mf=W.state!=="denied",ce(Mf)}):(Mf=!!e.window.navigator.geolocation,ce(Mf))}var rc=0,Ef=!1,ov=function(ce){function W(pe){ce.call(this),this.options=e.extend({},iv,pe),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.onAdd=function($){return this._map=$,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Lc(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rc=0,Ef=!1},W.prototype._isOutOfMapMaxBounds=function($){var de=this._map.getMaxBounds(),ke=$.coords;return de&&(ke.longitude<de.getWest()||ke.longitude>de.getEast()||ke.latitude<de.getSouth()||ke.latitude>de.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function($){if(!!this._map){if(this._isOutOfMapMaxBounds($)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",$)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=$,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker($),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera($),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",$)),this._finish()}},W.prototype._updateCamera=function($){var de=new e.LngLat($.coords.longitude,$.coords.latitude),ke=$.coords.accuracy,Fe=this._map.getBearing(),Je=e.extend({bearing:Fe},this.options.fitBoundsOptions);this._map.fitBounds(de.toBounds(ke),Je,{geolocateSource:!0})},W.prototype._updateMarker=function($){if($){var de=new e.LngLat($.coords.longitude,$.coords.latitude);this._accuracyCircleMarker.setLngLat(de).addTo(this._map),this._userLocationDotMarker.setLngLat(de).addTo(this._map),this._accuracy=$.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var $=this._map._container.clientHeight/2,de=this._map.unproject([0,$]),ke=this._map.unproject([1,$]),Fe=de.distanceTo(ke),Je=Math.ceil(2*this._accuracy/Fe);this._circleElement.style.width=Je+"px",this._circleElement.style.height=Je+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function($){if(!!this._map){if(this.options.trackUserLocation)if($.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var de=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=de,this._geolocateButton.setAttribute("aria-label",de),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if($.code===3&&Ef)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",$)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function($){var de=this;if(this._container.addEventListener("contextmenu",function(Je){return Je.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",$===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ke=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ke,this._geolocateButton.setAttribute("aria-label",ke)}else{var Fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Fe,this._geolocateButton.setAttribute("aria-label",Fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new tc(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Je){var ht=Je.originalEvent&&Je.originalEvent.type==="resize";!Je.geolocateSource&&de._watchState==="ACTIVE_LOCK"&&!ht&&(de._watchState="BACKGROUND",de._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),de._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),de.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rc--,Ef=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rc++;var $;rc>1?($={maximumAge:6e5,timeout:0},Ef=!0):($=this.options.positionOptions,Ef=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,$)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),jv={maxWidth:100,unit:"metric"},Sf=function(W){this.options=e.extend({},jv,W),e.bindAll(["_onMove","setUnit"],this)};Sf.prototype.getDefaultPosition=function(){return"bottom-left"},Sf.prototype._onMove=function(){sv(this._map,this._container,this.options)},Sf.prototype.onAdd=function(W){return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Sf.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Sf.prototype.setUnit=function(W){this.options.unit=W,sv(this._map,this._container,this.options)};function sv(ce,W,pe){var $=pe&&pe.maxWidth||100,de=ce._container.clientHeight/2,ke=ce.unproject([0,de]),Fe=ce.unproject([$,de]),Je=ke.distanceTo(Fe);if(pe&&pe.unit==="imperial"){var ht=3.2808*Je;if(ht>5280){var Dt=ht/5280;nc(W,$,Dt,ce._getUIString("ScaleControl.Miles"))}else nc(W,$,ht,ce._getUIString("ScaleControl.Feet"))}else if(pe&&pe.unit==="nautical"){var tr=Je/1852;nc(W,$,tr,ce._getUIString("ScaleControl.NauticalMiles"))}else Je>=1e3?nc(W,$,Je/1e3,ce._getUIString("ScaleControl.Kilometers")):nc(W,$,Je,ce._getUIString("ScaleControl.Meters"))}function nc(ce,W,pe,$){var de=Kv(pe),ke=de/pe;ce.style.width=W*ke+"px",ce.innerHTML=de+"&nbsp;"+$}function Zv(ce){var W=Math.pow(10,Math.ceil(-Math.log(ce)/Math.LN10));return Math.round(ce*W)/W}function Kv(ce){var W=Math.pow(10,(""+Math.floor(ce)).length-1),pe=ce/W;return pe=pe>=10?10:pe>=5?5:pe>=3?3:pe>=2?2:pe>=1?1:Zv(pe),W*pe}var Fu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Fu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Fu.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Fu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Fu.prototype._setupUI=function(){var W=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Fu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},Fu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Fu.prototype._isFullscreen=function(){return this._fullscreen},Fu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Fu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Jv={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},$v=function(ce){function W(pe){ce.call(this),this.options=e.extend(Object.create(Jv),pe),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ce&&(W.__proto__=ce),W.prototype=Object.create(ce&&ce.prototype),W.prototype.constructor=W,W.prototype.addTo=function($){return this._map&&this.remove(),this._map=$,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function($){return this._lngLat=e.LngLat.convert($),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function($){return this.setDOMContent(e.window.document.createTextNode($))},W.prototype.setHTML=function($){var de=e.window.document.createDocumentFragment(),ke=e.window.document.createElement("body"),Fe;for(ke.innerHTML=$;Fe=ke.firstChild,!!Fe;)de.appendChild(Fe);return this.setDOMContent(de)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function($){return this.options.maxWidth=$,this._update(),this},W.prototype.setDOMContent=function($){return this._createContent(),this._content.appendChild($),this._update(),this},W.prototype.addClassName=function($){this._container&&this._container.classList.add($)},W.prototype.removeClassName=function($){this._container&&this._container.classList.remove($)},W.prototype.toggleClassName=function($){if(this._container)return this._container.classList.toggle($)},W.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function($){this._update($.point)},W.prototype._onMouseMove=function($){this._update($.point)},W.prototype._onDrag=function($){this._update($.point)},W.prototype._update=function($){var de=this,ke=this._lngLat||this._trackPointer;if(!(!this._map||!ke||!this._content)&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Rr){return de._container.classList.add(Rr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ff(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!$))){var Fe=this._pos=this._trackPointer&&$?$:this._map.project(this._lngLat),Je=this.options.anchor,ht=lv(this.options.offset);if(!Je){var Dt=this._container.offsetWidth,tr=this._container.offsetHeight,pr;Fe.y+ht.bottom.y<tr?pr=["top"]:Fe.y>this._map.transform.height-tr?pr=["bottom"]:pr=[],Fe.x<Dt/2?pr.push("left"):Fe.x>this._map.transform.width-Dt/2&&pr.push("right"),pr.length===0?Je="bottom":Je=pr.join("-")}var yr=Fe.add(ht[Je]).round();i.setTransform(this._container,Cc[Je]+" translate("+yr.x+"px,"+yr.y+"px)"),nh(this._container,Je,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function lv(ce){if(ce)if(typeof ce=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(ce,2)));return{center:new e.Point(0,0),top:new e.Point(0,ce),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-ce),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(ce,0),right:new e.Point(-ce,0)}}else if(ce instanceof e.Point||Array.isArray(ce)){var pe=e.Point.convert(ce);return{center:pe,top:pe,"top-left":pe,"top-right":pe,bottom:pe,"bottom-left":pe,"bottom-right":pe,left:pe,right:pe}}else return{center:e.Point.convert(ce.center||[0,0]),top:e.Point.convert(ce.top||[0,0]),"top-left":e.Point.convert(ce["top-left"]||[0,0]),"top-right":e.Point.convert(ce["top-right"]||[0,0]),bottom:e.Point.convert(ce.bottom||[0,0]),"bottom-left":e.Point.convert(ce["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ce["bottom-right"]||[0,0]),left:e.Point.convert(ce.left||[0,0]),right:e.Point.convert(ce.right||[0,0])};else return lv(new e.Point(0,0))}var Qv={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:av,NavigationControl:uf,GeolocateControl:ov,AttributionControl:pu,ScaleControl:Sf,FullscreenControl:Fu,Popup:$v,Marker:tc,Style:Jo,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:ur,clearPrewarmedResources:Pr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ce){e.config.ACCESS_TOKEN=ce},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ce){e.config.API_URL=ce},get workerCount(){return Pt.workerCount},set workerCount(ce){Pt.workerCount=ce},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ce){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ce},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return Qv}),M})},{}],240:[function(t,B,G){B.exports=Math.log2||function(x){return Math.log(x)*Math.LOG2E}},{}],241:[function(t,B,G){B.exports=f;var x=t("mouse-event");function f(M,T){T||(T=M,M=window);var e=0,a=0,i=0,n={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function v(A){var _=!1;return"altKey"in A&&(_=_||A.altKey!==n.alt,n.alt=!!A.altKey),"shiftKey"in A&&(_=_||A.shiftKey!==n.shift,n.shift=!!A.shiftKey),"ctrlKey"in A&&(_=_||A.ctrlKey!==n.control,n.control=!!A.ctrlKey),"metaKey"in A&&(_=_||A.metaKey!==n.meta,n.meta=!!A.metaKey),_}function s(A,_){var p=x.x(_),w=x.y(_);"buttons"in _&&(A=_.buttons|0),(A!==e||p!==a||w!==i||v(_))&&(e=A|0,a=p||0,i=w||0,T&&T(e,a,i,n))}function o(A){s(0,A)}function b(){(e||a||i||n.shift||n.alt||n.meta||n.control)&&(a=i=0,e=0,n.shift=n.alt=n.control=n.meta=!1,T&&T(0,0,0,n))}function g(A){v(A)&&T&&T(e,a,i,n)}function d(A){x.buttons(A)===0?s(0,A):s(e,A)}function c(A){s(e|x.buttons(A),A)}function m(A){s(e&~x.buttons(A),A)}function l(){r||(r=!0,M.addEventListener("mousemove",d),M.addEventListener("mousedown",c),M.addEventListener("mouseup",m),M.addEventListener("mouseleave",o),M.addEventListener("mouseenter",o),M.addEventListener("mouseout",o),M.addEventListener("mouseover",o),M.addEventListener("blur",b),M.addEventListener("keyup",g),M.addEventListener("keydown",g),M.addEventListener("keypress",g),M!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function y(){!r||(r=!1,M.removeEventListener("mousemove",d),M.removeEventListener("mousedown",c),M.removeEventListener("mouseup",m),M.removeEventListener("mouseleave",o),M.removeEventListener("mouseenter",o),M.removeEventListener("mouseout",o),M.removeEventListener("mouseover",o),M.removeEventListener("blur",b),M.removeEventListener("keyup",g),M.removeEventListener("keydown",g),M.removeEventListener("keypress",g),M!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}l();var u={element:M};return Object.defineProperties(u,{enabled:{get:function(){return r},set:function(A){A?l():y()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),u}},{"mouse-event":243}],242:[function(t,B,G){var x={left:0,top:0};B.exports=f;function f(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var i=T.clientX||0,n=T.clientY||0,r=M(e);return a[0]=i-r.left,a[1]=n-r.top,a}function M(T){return T===window||T===document||T===document.body?x:T.getBoundingClientRect()}},{}],243:[function(t,B,G){function x(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}G.buttons=x;function f(e){return e.target||e.srcElement||window}G.element=f;function M(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=f(e),i=a.getBoundingClientRect();return e.clientX-i.left}return 0}G.x=M;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=f(e),i=a.getBoundingClientRect();return e.clientY-i.top}return 0}G.y=T},{}],244:[function(t,B,G){var x=t("to-px");B.exports=f;function f(M,T,e){typeof M=="function"&&(e=!!T,T=M,M=window);var a=x("ex",M),i=function(n){e&&n.preventDefault();var r=n.deltaX||0,v=n.deltaY||0,s=n.deltaZ||0,o=n.deltaMode,b=1;switch(o){case 1:b=a;break;case 2:b=window.innerHeight;break}if(r*=b,v*=b,s*=b,r||v||s)return T(r,v,s,n)};return M.addEventListener("wheel",i),i}},{"to-px":315}],245:[function(t,B,G){(function(x,f){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof B<"u"&&B.exports&&(B.exports=e[T])})("Promise",typeof x<"u"?x:this,function(){var T,e,a,i=Object.prototype.toString,n=typeof f<"u"?function(A){return f(A)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(A,_,p,w){return Object.defineProperty(A,_,{value:p,writable:!0,configurable:w!==!1})}}catch{T=function(_,p,w){return _[p]=w,_}}a=function(){var A,_,p;function w(h,L){this.fn=h,this.self=L,this.next=void 0}return{add:function(L,E){p=new w(L,E),_?_.next=p:A=p,_=p,p=void 0},drain:function(){var L=A;for(A=_=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function r(u,A){a.add(u,A),e||(e=n(a.drain))}function v(u){var A,_=typeof u;return u!=null&&(_=="object"||_=="function")&&(A=u.then),typeof A=="function"?A:!1}function s(){for(var u=0;u<this.chain.length;u++)o(this,this.state===1?this.chain[u].success:this.chain[u].failure,this.chain[u]);this.chain.length=0}function o(u,A,_){var p,w;try{A===!1?_.reject(u.msg):(A===!0?p=u.msg:p=A.call(void 0,u.msg),p===_.promise?_.reject(TypeError("Promise-chain cycle")):(w=v(p))?w.call(p,_.resolve,_.reject):_.resolve(p))}catch(h){_.reject(h)}}function b(u){var A,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(A=v(u))?r(function(){var p=new c(_);try{A.call(u,function(){b.apply(p,arguments)},function(){g.apply(p,arguments)})}catch(w){g.call(p,w)}}):(_.msg=u,_.state=1,_.chain.length>0&&r(s,_))}catch(p){g.call(new c(_),p)}}}function g(u){var A=this;A.triggered||(A.triggered=!0,A.def&&(A=A.def),A.msg=u,A.state=2,A.chain.length>0&&r(s,A))}function d(u,A,_,p){for(var w=0;w<A.length;w++)(function(L){u.resolve(A[L]).then(function(S){_(L,S)},p)})(w)}function c(u){this.def=u,this.triggered=!1}function m(u){this.promise=u,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(u){if(typeof u!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var A=new m(this);this.then=function(p,w){var h={success:typeof p=="function"?p:!0,failure:typeof w=="function"?w:!1};return h.promise=new this.constructor(function(E,S){if(typeof E!="function"||typeof S!="function")throw TypeError("Not a function");h.resolve=E,h.reject=S}),A.chain.push(h),A.state!==0&&r(s,A),h.promise},this.catch=function(p){return this.then(void 0,p)};try{u.call(void 0,function(p){b.call(A,p)},function(p){g.call(A,p)})}catch(_){g.call(A,_)}}var y=T({},"constructor",l,!1);return l.prototype=y,T(y,"__NPO__",0,!1),T(l,"resolve",function(A){var _=this;return A&&typeof A=="object"&&A.__NPO__===1?A:new _(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");w(A)})}),T(l,"reject",function(A){return new this(function(p,w){if(typeof p!="function"||typeof w!="function")throw TypeError("Not a function");w(A)})}),T(l,"all",function(A){var _=this;return i.call(A)!="[object Array]"?_.reject(TypeError("Not an array")):A.length===0?_.resolve([]):new _(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");var L=A.length,E=Array(L),S=0;d(_,A,function(F,I){E[F]=I,++S===L&&w(E)},h)})}),T(l,"race",function(A){var _=this;return i.call(A)!="[object Array]"?_.reject(TypeError("Not an array")):new _(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");d(_,A,function(E,S){w(S)},h)})}),l})}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{timers:312}],246:[function(t,B,G){var x=Math.PI,f=n(120);B.exports=M;function M(r){for(var v,s=[],o=0,b=0,g=0,d=0,c=null,m=null,l=0,y=0,u=0,A=r.length;u<A;u++){var _=r[u],p=_[0];switch(p){case"M":g=_[1],d=_[2];break;case"A":_=a(l,y,_[1],_[2],n(_[3]),_[4],_[5],_[6],_[7]),_.unshift("C"),_.length>7&&(s.push(_.splice(0,7)),_.unshift("C"));break;case"S":var w=l,h=y;(v=="C"||v=="S")&&(w+=w-o,h+=h-b),_=["C",w,h,_[1],_[2],_[3],_[4]];break;case"T":v=="Q"||v=="T"?(c=l*2-c,m=y*2-m):(c=l,m=y),_=e(l,y,c,m,_[1],_[2]);break;case"Q":c=_[1],m=_[2],_=e(l,y,_[1],_[2],_[3],_[4]);break;case"L":_=T(l,y,_[1],_[2]);break;case"H":_=T(l,y,_[1],y);break;case"V":_=T(l,y,l,_[1]);break;case"Z":_=T(l,y,g,d);break}v=p,l=_[_.length-2],y=_[_.length-1],_.length>4?(o=_[_.length-4],b=_[_.length-3]):(o=l,b=y),s.push(_)}return s}function T(r,v,s,o){return["C",r,v,s,o,s,o]}function e(r,v,s,o,b,g){return["C",r/3+2/3*s,v/3+2/3*o,b/3+2/3*s,g/3+2/3*o,b,g]}function a(r,v,s,o,b,g,d,c,m,l){if(l)S=l[0],P=l[1],L=l[2],E=l[3];else{var y=i(r,v,-b);r=y.x,v=y.y,y=i(c,m,-b),c=y.x,m=y.y;var u=(r-c)/2,A=(v-m)/2,_=u*u/(s*s)+A*A/(o*o);_>1&&(_=Math.sqrt(_),s=_*s,o=_*o);var p=s*s,w=o*o,h=(g==d?-1:1)*Math.sqrt(Math.abs((p*w-p*A*A-w*u*u)/(p*A*A+w*u*u)));h==1/0&&(h=1);var L=h*s*A/o+(r+c)/2,E=h*-o*u/s+(v+m)/2,S=Math.asin(((v-E)/o).toFixed(9)),P=Math.asin(((m-E)/o).toFixed(9));S=r<L?x-S:S,P=c<L?x-P:P,S<0&&(S=x*2+S),P<0&&(P=x*2+P),d&&S>P&&(S=S-x*2),!d&&P>S&&(P=P-x*2)}if(Math.abs(P-S)>f){var F=P,I=c,D=m;P=S+f*(d&&P>S?1:-1),c=L+s*Math.cos(P),m=E+o*Math.sin(P);var R=a(c,m,s,o,b,0,d,I,D,[P,F,L,E])}var O=Math.tan((P-S)/4),z=4/3*s*O,H=4/3*o*O,Y=[2*r-(r+z*Math.sin(S)),2*v-(v-H*Math.cos(S)),c+z*Math.sin(P),m-H*Math.cos(P),c,m];if(l)return Y;R&&(Y=Y.concat(R));for(var ee=0;ee<Y.length;){var j=i(Y[ee],Y[ee+1],b);Y[ee++]=j.x,Y[ee++]=j.y}return Y}function i(r,v,s){return{x:r*Math.cos(s)-v*Math.sin(s),y:r*Math.sin(s)+v*Math.cos(s)}}function n(r){return r*(x/180)}},{}],247:[function(t,B,G){var x=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var i={},n=0;n<10;n++)i["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(i).map(function(s){return i[s]});if(r.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(s){v[s]=s}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}B.exports=e()?Object.assign:function(a,i){for(var n,r=T(a),v,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)f.call(n,o)&&(r[o]=n[o]);if(x){v=x(n);for(var b=0;b<v.length;b++)M.call(n,v[b])&&(r[v[b]]=n[v[b]])}}return r}},{}],248:[function(t,B,G){function x(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var i=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],n=e.escape||"___",r=!!e.flat;i.forEach(function(o){var b=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),g=[];function d(c,m,l){var y=a.push(c.slice(o[0].length,-o[1].length))-1;return g.push(y),n+y+n}a.forEach(function(c,m){for(var l,y=0;c!=l;)if(l=c,c=c.replace(b,d),y++>1e4)throw Error("References have circular dependency. Please, check them.");a[m]=c}),g=g.reverse(),a=a.map(function(c){return g.forEach(function(m){c=c.replace(new RegExp("(\\"+n+m+"\\"+n+")","g"),o[0]+"$1"+o[1])}),c})});var v=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(o,b,g){for(var d=[],c,m=0;c=v.exec(o);){if(m++>1e4)throw Error("Circular references in parenthesis");d.push(o.slice(0,c.index)),d.push(s(b[c[1]],b)),o=o.slice(c.index+c[0].length)}return d.push(o),d}return r?a:s(a[0],a)}function f(T,e){if(e&&e.flat){var a=e&&e.escape||"___",i=T[0],n;if(!i)return"";for(var r=new RegExp("\\"+a+"([0-9]+)\\"+a),v=0;i!=n;){if(v++>1e4)throw Error("Circular references in "+T);n=i,i=i.replace(r,s)}return i}return T.reduce(function o(b,g){return Array.isArray(g)&&(g=g.reduce(o,"")),b+g},"");function s(o,b){if(T[b]==null)throw Error("Reference "+b+"is undefined");return T[b]}}function M(T,e){return Array.isArray(T)?f(T,e):x(T,e)}M.parse=x,M.stringify=f,B.exports=M},{}],249:[function(t,B,G){var x=t("pick-by-alias");B.exports=f;function f(M){var T;return arguments.length>1&&(M=arguments),typeof M=="string"?M=M.split(/\s/).map(parseFloat):typeof M=="number"&&(M=[M]),M.length&&typeof M[0]=="number"?M.length===1?T={width:M[0],height:M[0],x:0,y:0}:M.length===2?T={width:M[0],height:M[1],x:0,y:0}:T={x:M[0],y:M[1],width:M[2]-M[0]||0,height:M[3]-M[1]||0}:M&&(M=x(M,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:M.left||0,y:M.top||0},M.width==null?M.right?T.width=M.right-T.x:T.width=0:T.width=M.width,M.height==null?M.bottom?T.height=M.bottom-T.y:T.height=0:T.height=M.height),T}},{"pick-by-alias":253}],250:[function(t,B,G){B.exports=M;var x={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},f=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(a){var i=[];return a.replace(f,function(n,r,v){var s=r.toLowerCase();for(v=e(v),s=="m"&&v.length>2&&(i.push([r].concat(v.splice(0,2))),s="l",r=r=="m"?"l":"L");;){if(v.length==x[s])return v.unshift(r),i.push(v);if(v.length<x[s])throw new Error("malformed path data");i.push([r].concat(v.splice(0,x[s])))}}),i}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var i=a.match(T);return i?i.map(Number):[]}},{}],251:[function(t,B,G){B.exports=function(f,M){M||(M=[0,""]),f=String(f);var T=parseFloat(f,10);return M[0]=T,M[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"",M}},{}],252:[function(t,B,G){(function(x){(function(){(function(){var f,M,T,e,a,i;typeof performance<"u"&&performance!==null&&performance.now?B.exports=function(){return performance.now()}:typeof x<"u"&&x!==null&&x.hrtime?(B.exports=function(){return(f()-a)/1e6},M=x.hrtime,f=function(){var n;return n=M(),n[0]*1e9+n[1]},e=f(),i=x.uptime()*1e9,a=e-i):Date.now?(B.exports=function(){return Date.now()-T},T=Date.now()):(B.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,t("_process"))},{_process:278}],253:[function(t,B,G){B.exports=function(T,e,a){var i={},n,r;if(typeof e=="string"&&(e=f(e)),Array.isArray(e)){var v={};for(r=0;r<e.length;r++)v[e[r]]=!0;e=v}for(n in e)e[n]=f(e[n]);var s={};for(n in e){var o=e[n];if(Array.isArray(o))for(r=0;r<o.length;r++){var b=o[r];if(a&&(s[b]=!0),b in T){if(i[n]=T[b],a)for(var g=r;g<o.length;g++)s[o[g]]=!0;break}}else n in T&&(e[n]&&(i[n]=T[n]),a&&(s[n]=!0))}if(a)for(n in T)s[n]||(i[n]=T[n]);return i};var x={};function f(M){return x[M]?x[M]:(typeof M=="string"&&(M=x[M]=M.split(/\s*,\s*|\s+/)),M)}},{}],254:[function(t,B,G){B.exports=function(f,M,T,e){var a=f[0],i=f[1],n=!1;T===void 0&&(T=0),e===void 0&&(e=M.length);for(var r=e-T,v=0,s=r-1;v<r;s=v++){var o=M[v+T][0],b=M[v+T][1],g=M[s+T][0],d=M[s+T][1],c=b>i!=d>i&&a<(g-o)*(i-b)/(d-b)+o;c&&(n=!n)}return n}},{}],255:[function(t,B,G){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var x=t("./lib/build-log"),f=t("./lib/epsilon"),M=t("./lib/intersecter"),T=t("./lib/segment-chainer"),e=t("./lib/segment-selector"),a=t("./lib/geojson"),i=!1,n=f(),r;r={buildLog:function(s){return s===!0?i=x():s===!1&&(i=!1),i===!1?!1:i.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var o=M(!0,n,i);return s.regions.forEach(o.addRegion),{segments:o.calculate(s.inverted),inverted:s.inverted}},combine:function(s,o){var b=M(!1,n,i);return{combined:b.calculate(s.segments,s.inverted,o.segments,o.inverted),inverted1:s.inverted,inverted2:o.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,i),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,i),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,i),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,i),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,i),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:T(s.segments,n,i),inverted:s.inverted}},polygonFromGeoJSON:function(s){return a.toPolygon(r,s)},polygonToGeoJSON:function(s){return a.fromPolygon(r,n,s)},union:function(s,o){return v(s,o,r.selectUnion)},intersect:function(s,o){return v(s,o,r.selectIntersect)},difference:function(s,o){return v(s,o,r.selectDifference)},differenceRev:function(s,o){return v(s,o,r.selectDifferenceRev)},xor:function(s,o){return v(s,o,r.selectXor)}};function v(s,o,b){var g=r.segments(s),d=r.segments(o),c=r.combine(g,d),m=b(c);return r.polygon(m)}typeof window=="object"&&(window.PolyBool=r),B.exports=r},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(t,B,G){function x(){var f,M=0,T=!1;function e(a,i){return f.list.push({type:a,data:i?JSON.parse(JSON.stringify(i)):void 0}),f}return f={list:[],segmentId:function(){return M++},checkIntersection:function(a,i){return e("check",{seg1:a,seg2:i})},segmentChop:function(a,i){return e("div_seg",{seg:a,pt:i}),e("chop",{seg:a,pt:i})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,i){return e("new_seg",{seg:a,primary:i})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,i,n){return e("temp_status",{seg:a,above:i,below:n})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,i,n){return e("status",{seg:a,above:i,below:n})},vert:function(a){return a===T?f:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,i){return e("chain_rem_head",{index:a,pt:i})},chainRemoveTail:function(a,i){return e("chain_rem_tail",{index:a,pt:i})},chainNew:function(a,i){return e("chain_new",{pt1:a,pt2:i})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,i){return e("chain_add_head",{index:a,pt:i})},chainAddTail:function(a,i){return e("chain_add_tail",{index:a,pt:i})},chainConnect:function(a,i){return e("chain_con",{index1:a,index2:i})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,i){return e("chain_join",{index1:a,index2:i})},done:function(){return e("done")}},f}B.exports=x},{}],257:[function(t,B,G){function x(f){typeof f!="number"&&(f=1e-10);var M={epsilon:function(T){return typeof T=="number"&&(f=T),f},pointAboveOrOnLine:function(T,e,a){var i=e[0],n=e[1],r=a[0],v=a[1],s=T[0],o=T[1];return(r-i)*(o-n)-(v-n)*(s-i)>=-f},pointBetween:function(T,e,a){var i=T[1]-e[1],n=a[0]-e[0],r=T[0]-e[0],v=a[1]-e[1],s=r*n+i*v;if(s<f)return!1;var o=n*n+v*v;return!(s-o>-f)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<f},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<f},pointsSame:function(T,e){return M.pointsSameX(T,e)&&M.pointsSameY(T,e)},pointsCompare:function(T,e){return M.pointsSameX(T,e)?M.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var i=T[0]-e[0],n=T[1]-e[1],r=e[0]-a[0],v=e[1]-a[1];return Math.abs(i*v-r*n)<f},linesIntersect:function(T,e,a,i){var n=e[0]-T[0],r=e[1]-T[1],v=i[0]-a[0],s=i[1]-a[1],o=n*s-r*v;if(Math.abs(o)<f)return!1;var b=T[0]-a[0],g=T[1]-a[1],d=(v*g-s*b)/o,c=(n*g-r*b)/o,m={alongA:0,alongB:0,pt:[T[0]+d*n,T[1]+d*r]};return d<=-f?m.alongA=-2:d<f?m.alongA=-1:d-1<=-f?m.alongA=0:d-1<f?m.alongA=1:m.alongA=2,c<=-f?m.alongB=-2:c<f?m.alongB=-1:c-1<=-f?m.alongB=0:c-1<f?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(T,e){for(var a=T[0],i=T[1],n=e[e.length-1][0],r=e[e.length-1][1],v=!1,s=0;s<e.length;s++){var o=e[s][0],b=e[s][1];b-i>f!=r-i>f&&(n-o)*(i-b)/(r-b)+o-a>f&&(v=!v),n=o,r=b}return v}};return M}B.exports=x},{}],258:[function(t,B,G){var x={toPolygon:function(f,M){function T(i){if(i.length<=0)return f.segments({inverted:!1,regions:[]});function n(s){var o=s.slice(0,s.length-1);return f.segments({inverted:!1,regions:[o]})}for(var r=n(i[0]),v=1;v<i.length;v++)r=f.selectDifference(f.combine(r,n(i[v])));return r}if(M.type==="Polygon")return f.polygon(T(M.coordinates));if(M.type==="MultiPolygon"){for(var e=f.segments({inverted:!1,regions:[]}),a=0;a<M.coordinates.length;a++)e=f.selectUnion(f.combine(e,T(M.coordinates[a])));return f.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(f,M,T){T=f.polygon(f.segments(T));function e(d,c){return M.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],c)}function a(d){return{region:d,children:[]}}var i=a(null);function n(d,c){for(var m=0;m<d.children.length;m++){var l=d.children[m];if(e(c,l.region)){n(l,c);return}}for(var y=a(c),m=0;m<d.children.length;m++){var l=d.children[m];e(l.region,c)&&(y.children.push(l),d.children.splice(m,1),m--)}d.children.push(y)}for(var r=0;r<T.regions.length;r++){var v=T.regions[r];v.length<3||n(i,v)}function s(d,c){for(var m=0,l=d[d.length-1][0],y=d[d.length-1][1],u=[],A=0;A<d.length;A++){var _=d[A][0],p=d[A][1];u.push([_,p]),m+=p*l-_*y,l=_,y=p}var w=m<0;return w!==c&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var o=[];function b(d){var c=[s(d.region,!1)];o.push(c);for(var m=0;m<d.children.length;m++)c.push(g(d.children[m]))}function g(d){for(var c=0;c<d.children.length;c++)b(d.children[c]);return s(d.region,!0)}for(var r=0;r<i.children.length;r++)b(i.children[r]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};B.exports=x},{}],259:[function(t,B,G){var x=t("./linked-list");function f(M,T,e){function a(m,l){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:null,below:null},otherFill:null}}function i(m,l,y){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:y.myFill.above,below:y.myFill.below},otherFill:null}}var n=x.create();function r(m,l,y,u,A,_){var p=T.pointsCompare(l,A);return p!==0?p:T.pointsSame(y,_)?0:m!==u?m?1:-1:T.pointAboveOrOnLine(y,u?A:_,u?_:A)?1:-1}function v(m,l){n.insertBefore(m,function(y){var u=r(m.isStart,m.pt,l,y.isStart,y.pt,y.other.pt);return u<0})}function s(m,l){var y=x.node({isStart:!0,pt:m.start,seg:m,primary:l,other:null,status:null});return v(y,m.end),y}function o(m,l,y){var u=x.node({isStart:!1,pt:l.end,seg:l,primary:y,other:m,status:null});m.other=u,v(u,m.pt)}function b(m,l){var y=s(m,l);return o(y,m,l),y}function g(m,l){e&&e.segmentChop(m.seg,l),m.other.remove(),m.seg.end=l,m.other.pt=l,v(m.other,m.pt)}function d(m,l){var y=i(l,m.seg.end,m.seg);return g(m,l),b(y,m.primary)}function c(m,l){var y=x.create();function u(O,z){var H=O.seg.start,Y=O.seg.end,ee=z.seg.start,j=z.seg.end;return T.pointsCollinear(H,ee,j)?T.pointsCollinear(Y,ee,j)||T.pointAboveOrOnLine(Y,ee,j)?1:-1:T.pointAboveOrOnLine(H,ee,j)?1:-1}function A(O){return y.findTransition(function(z){var H=u(O,z.ev);return H>0})}function _(O,z){var H=O.seg,Y=z.seg,ee=H.start,j=H.end,X=Y.start,ae=Y.end;e&&e.checkIntersection(H,Y);var fe=T.linesIntersect(ee,j,X,ae);if(fe===!1){if(!T.pointsCollinear(ee,j,X)||T.pointsSame(ee,ae)||T.pointsSame(j,X))return!1;var K=T.pointsSame(ee,X),J=T.pointsSame(j,ae);if(K&&J)return z;var U=!K&&T.pointBetween(ee,X,ae),V=!J&&T.pointBetween(j,X,ae);if(K)return V?d(z,j):d(O,ae),z;U&&(J||(V?d(z,j):d(O,ae)),d(z,ee))}else fe.alongA===0&&(fe.alongB===-1?d(O,X):fe.alongB===0?d(O,fe.pt):fe.alongB===1&&d(O,ae)),fe.alongB===0&&(fe.alongA===-1?d(z,ee):fe.alongA===0?d(z,fe.pt):fe.alongA===1&&d(z,j));return!1}for(var p=[];!n.isEmpty();){var w=n.getHead();if(e&&e.vert(w.pt[0]),w.isStart){let O=function(){if(L){var z=_(w,L);if(z)return z}return E?_(w,E):!1};var R=O;e&&e.segmentNew(w.seg,w.primary);var h=A(w),L=h.before?h.before.ev:null,E=h.after?h.after.ev:null;e&&e.tempStatus(w.seg,L?L.seg:!1,E?E.seg:!1);var S=O();if(S){if(M){var P;w.seg.myFill.below===null?P=!0:P=w.seg.myFill.above!==w.seg.myFill.below,P&&(S.seg.myFill.above=!S.seg.myFill.above)}else S.seg.otherFill=w.seg.myFill;e&&e.segmentUpdate(S.seg),w.other.remove(),w.remove()}if(n.getHead()!==w){e&&e.rewind(w.seg);continue}if(M){var P;w.seg.myFill.below===null?P=!0:P=w.seg.myFill.above!==w.seg.myFill.below,E?w.seg.myFill.below=E.seg.myFill.above:w.seg.myFill.below=m,P?w.seg.myFill.above=!w.seg.myFill.below:w.seg.myFill.above=w.seg.myFill.below}else if(w.seg.otherFill===null){var F;E?w.primary===E.primary?F=E.seg.otherFill.above:F=E.seg.myFill.above:F=w.primary?l:m,w.seg.otherFill={above:F,below:F}}e&&e.status(w.seg,L?L.seg:!1,E?E.seg:!1),w.other.status=h.insert(x.node({ev:w}))}else{var I=w.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(y.exists(I.prev)&&y.exists(I.next)&&_(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!w.primary){var D=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=D}p.push(w.seg)}n.getHead().remove()}return e&&e.done(),p}return M?{addRegion:function(m){for(var l,y=m[m.length-1],u=0;u<m.length;u++){l=y,y=m[u];var A=T.pointsCompare(l,y);A!==0&&b(a(A<0?l:y,A<0?y:l),!0)}},calculate:function(m){return c(m,!1)}}:{calculate:function(m,l,y,u){return m.forEach(function(A){b(i(A.start,A.end,A),!0)}),y.forEach(function(A){b(i(A.start,A.end,A),!1)}),c(l,u)}}}B.exports=f},{"./linked-list":260}],260:[function(t,B,G){var x={create:function(){var f={root:{root:!0,next:null},exists:function(M){return!(M===null||M===f.root)},isEmpty:function(){return f.root.next===null},getHead:function(){return f.root.next},insertBefore:function(M,T){for(var e=f.root,a=f.root.next;a!==null;){if(T(a)){M.prev=a.prev,M.next=a,a.prev.next=M,a.prev=M;return}e=a,a=a.next}e.next=M,M.prev=e,M.next=null},findTransition:function(M){for(var T=f.root,e=f.root.next;e!==null&&!M(e);)T=e,e=e.next;return{before:T===f.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return f},node:function(f){return f.prev=null,f.next=null,f.remove=function(){f.prev.next=f.next,f.next&&(f.next.prev=f.prev),f.prev=null,f.next=null},f}};B.exports=x},{}],261:[function(t,B,G){function x(f,M,T){var e=[],a=[];return f.forEach(function(i){var n=i.start,r=i.end;if(M.pointsSame(n,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(i);var v={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=v;function b(F,I,D){return o.index=F,o.matches_head=I,o.matches_pt1=D,o===v?(o=s,!1):(o=null,!0)}for(var g=0;g<e.length;g++){var d=e[g],c=d[0];d[1];var m=d[d.length-1];if(d[d.length-2],M.pointsSame(c,n)){if(b(g,!0,!0))break}else if(M.pointsSame(c,r)){if(b(g,!0,!1))break}else if(M.pointsSame(m,n)){if(b(g,!1,!0))break}else if(M.pointsSame(m,r)&&b(g,!1,!1))break}if(o===v){e.push([n,r]),T&&T.chainNew(n,r);return}if(o===s){T&&T.chainMatch(v.index);var l=v.index,y=v.matches_pt1?r:n,u=v.matches_head,d=e[l],A=u?d[0]:d[d.length-1],_=u?d[1]:d[d.length-2],p=u?d[d.length-1]:d[0],w=u?d[d.length-2]:d[1];if(M.pointsCollinear(_,A,y)&&(u?(T&&T.chainRemoveHead(v.index,y),d.shift()):(T&&T.chainRemoveTail(v.index,y),d.pop()),A=_),M.pointsSame(p,y)){e.splice(l,1),M.pointsCollinear(w,p,A)&&(u?(T&&T.chainRemoveTail(v.index,A),d.pop()):(T&&T.chainRemoveHead(v.index,A),d.shift())),T&&T.chainClose(v.index),a.push(d);return}u?(T&&T.chainAddHead(v.index,y),d.unshift(y)):(T&&T.chainAddTail(v.index,y),d.push(y));return}function h(F){T&&T.chainReverse(F),e[F].reverse()}function L(F,I){var D=e[F],R=e[I],O=D[D.length-1],z=D[D.length-2],H=R[0],Y=R[1];M.pointsCollinear(z,O,H)&&(T&&T.chainRemoveTail(F,O),D.pop(),O=z),M.pointsCollinear(O,H,Y)&&(T&&T.chainRemoveHead(I,H),R.shift()),T&&T.chainJoin(F,I),e[F]=D.concat(R),e.splice(I,1)}var E=v.index,S=s.index;T&&T.chainConnect(E,S);var P=e[E].length<e[S].length;v.matches_head?s.matches_head?P?(h(E),L(E,S)):(h(S),L(S,E)):L(S,E):s.matches_head?L(E,S):P?(h(E),L(S,E)):(h(S),L(E,S))}),a}B.exports=x},{}],262:[function(t,B,G){function x(M,T,e){var a=[];return M.forEach(function(i){var n=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);T[n]!==0&&a.push({id:e?e.segmentId():-1,start:i.start,end:i.end,myFill:{above:T[n]===1,below:T[n]===2},otherFill:null})}),e&&e.selected(a),a}var f={union:function(M,T){return x(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(M,T){return x(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(M,T){return x(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(M,T){return x(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(M,T){return x(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};B.exports=f},{}],263:[function(t,B,G){var x=t("stream").Transform,f=t("stream-parser");function M(){x.call(this,{readableObjectMode:!0})}M.prototype=Object.create(x.prototype),M.prototype.constructor=M,f(M.prototype),G.ParserStream=M,G.sliceEq=function(e,a,i){for(var n=a,r=0;r<i.length;)if(e[n++]!==i[r++])return!1;return!0},G.str2arr=function(e,a){var i=[],n=0;if(a&&a==="hex")for(;n<e.length;)i.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)i.push(e.charCodeAt(n)&255);return i},G.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},G.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},G.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},G.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),i&&(this.statusCode=i)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,G.ProbeError=T},{stream:286,"stream-parser":302}],264:[function(t,B,G){function x(T,e){var a=new Error(T);return a.code=e,a}function f(T){try{return decodeURIComponent(escape(T))}catch{return T}}function M(T,e,a){this.input=T.subarray(e,a),this.start=e;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw x("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}M.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},M.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw x("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},M.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw x("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},M.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},M.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(T,e,a){var i=this.read_uint16(e);e+=2;for(var n=0;n<i;n++){var r=this.read_uint16(e),v=this.read_uint16(e+2),s=this.read_uint32(e+4),o=this.exif_format_length(v),b=s*o,g=b<=4?e+8:this.read_uint32(e+8),d=!1;if(g+b>this.input.length)throw x("unexpected EOF","EBADDATA");for(var c=[],m=g,l=0;l<s;l++,m+=o){var y=this.exif_format_read(v,m);if(y===null){c=null;break}c.push(y)}Array.isArray(c)&&v===2&&(c=f(String.fromCharCode.apply(null,c)),c&&c[c.length-1]==="\0"&&(c=c.slice(0,-1))),this.is_subifd_link(T,r)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:r,offset:c[0]}),d=!0);var u={is_big_endian:this.big_endian,ifd:T,tag:r,format:v,count:s,entry_offset:e+this.start,data_length:b,data_offset:g+this.start,value:c,is_subifd_link:d};if(a(u)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},B.exports.ExifParser=M,B.exports.get_orientation=function(T){var e=0;try{return new M(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],265:[function(t,B,G){var x=t("./common").readUInt16BE,f=t("./common").readUInt32BE;function M(s,o){if(s.length<4+o)return null;var b=f(s,o);return s.length<b+o||b<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(o+4,o+8)),data:s.slice(o+8,o+b),end:o+b}}B.exports.unbox=M;function T(s,o){for(var b=0;;){var g=M(s,b);if(!g)break;switch(g.boxtype){case"ispe":o.sizes.push({width:f(g.data,4),height:f(g.data,8)});break;case"irot":o.transforms.push({type:"irot",value:g.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:g.data[0]&1});break}b=g.end}}function e(s,o,b){for(var g=0,d=0;d<b;d++)g=g*256+(s[o+d]||0);return g}function a(s,o){for(var b=s[4]>>4&15,g=s[4]&15,d=s[5]>>4&15,c=x(s,6),m=8,l=0;l<c;l++){var y=x(s,m);m+=2;var u=x(s,m);m+=2;var A=e(s,m,d);m+=d;var _=x(s,m);if(m+=2,u===0&&_===1){var p=e(s,m,b),w=e(s,m+b,g);o.item_loc[y]={length:w,offset:p+A}}m+=_*(b+g)}}function i(s,o){for(var b=x(s,4),g=6,d=0;d<b;d++){var c=M(s,g);if(!c)break;if(c.boxtype==="infe"){for(var m=x(c.data,4),l="",y=8;y<c.data.length&&c.data[y];y++)l+=String.fromCharCode(c.data[y]);o.item_inf[l]=m}g=c.end}}function n(s,o){for(var b=0;;){var g=M(s,b);if(!g)break;g.boxtype==="ipco"&&T(g.data,o),b=g.end}}function r(s,o){for(var b=4;;){var g=M(s,b);if(!g)break;g.boxtype==="iprp"&&n(g.data,o),g.boxtype==="iloc"&&a(g.data,o),g.boxtype==="iinf"&&i(g.data,o),b=g.end}}function v(s){var o=s.reduce(function(d,c){return d.width>c.width||d.width===c.width&&d.height>c.height?d:c}),b=s.reduce(function(d,c){return d.height>c.height||d.height===c.height&&d.width>c.width?d:c}),g;return o.width>b.height||o.width===b.height&&o.height>b.width?g=o:g=b,g}B.exports.readSizeFromMeta=function(s){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(s,o),!!o.sizes.length){var b=v(o.sizes),g=1;o.transforms.forEach(function(c){var m={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(c.type==="imir"&&(c.value===0?g=l[g]:(g=l[g],g=m[g],g=m[g])),c.type==="irot")for(var y=0;y<c.value;y++)g=m[g]});var d=null;return o.item_inf.Exif&&(d=o.item_loc[o.item_inf.Exif]),{width:b.width,height:b.height,orientation:o.transforms.length?g:null,variants:o.sizes,exif_location:d}}},B.exports.getMimeType=function(s){var o=String.fromCharCode.apply(null,s.slice(0,4)),b={};b[o]=!0;for(var g=8;g<s.length;g+=4)b[String.fromCharCode.apply(null,s.slice(g,g+4))]=!0;if(!(!b.mif1&&!b.msf1&&!b.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:b.avif||b.avis?{type:"avif",mime:"image/avif"}:b.heic||b.heix||b.hevc||b.hevx||b.heis?b.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt32BE,T=t("../miaf_utils"),e=t("../exif_utils"),a=x("ftyp");B.exports=function(i){if(!!f(i,4,a)){var n=T.unbox(i,0);if(!!n){var r=T.getMimeType(n.data);if(!!r){for(var v,s=n.end;;){var o=T.unbox(i,s);if(!o)break;if(s=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){v=o.data;break}}if(!!v){var b=T.readSizeFromMeta(v);if(!!b){var g={width:b.width,height:b.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(b.variants.length>1&&(g.variants=b.variants),b.orientation&&(g.orientation=b.orientation),b.exif_location&&b.exif_location.offset+b.exif_location.length<=i.length){var d=M(i,b.exif_location.offset),c=i.slice(b.exif_location.offset+d+4,b.exif_location.offset+b.exif_location.length),m=e.get_orientation(c);m>0&&(g.orientation=m)}return g}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt16LE,T=x("BM");B.exports=function(e){if(!(e.length<26)&&!!f(e,0,T))return{width:M(e,18),height:M(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt16LE,T=x("GIF87a"),e=x("GIF89a");B.exports=function(a){if(!(a.length<10)&&!(!f(a,0,T)&&!f(a,0,e)))return{width:M(a,6),height:M(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(t,B,G){var x=t("../common").readUInt16LE,f=0,M=1,T=16;B.exports=function(e){var a=x(e,0),i=x(e,2),n=x(e,4);if(!(a!==f||i!==M||!n)){for(var r=[],v={width:0,height:0},s=0;s<n;s++){var o=e[6+T*s]||256,b=e[6+T*s+1]||256,g={width:o,height:b};r.push(g),(o>v.width||b>v.height)&&(v=g)}return{width:v.width,height:v.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(t,B,G){var x=t("../common").readUInt16BE,f=t("../common").str2arr,M=t("../common").sliceEq,T=t("../exif_utils"),e=f("Exif\0\0");B.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var i=2;;){for(;;){if(a.length-i<2)return;if(a[i++]===255)break}for(var n=a[i++],r;n===255;)n=a[i++];if(208<=n&&n<=217||n===1)r=0;else if(192<=n&&n<=254){if(a.length-i<2)return;r=x(a,i)-2,i+=2}else return;if(n===217||n===218)return;var v;if(n===225&&r>=10&&M(a,i,e)&&(v=T.get_orientation(a.slice(i+6,i+r))),r>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(a.length-i<r)return;var s={width:x(a,i+3),height:x(a,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return v>0&&(s.orientation=v),s}i+=r}}},{"../common":263,"../exif_utils":264}],271:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt32BE,T=x(`\x89PNG\r

`),e=x("IHDR");B.exports=function(a){if(!(a.length<24)&&!!f(a,0,T)&&!!f(a,12,e))return{width:M(a,16),height:M(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt32BE,T=x("8BPS\0");B.exports=function(e){if(!(e.length<6+16)&&!!f(e,0,T))return{width:M(e,6+12),height:M(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(t,B,G){function x(o){return o===32||o===9||o===13||o===10}function f(o){return typeof o=="number"&&isFinite(o)&&o>0}function M(o){var b=0,g=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(b=3);b<g&&x(o[b]);)b++;return b===g?!1:o[b]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function v(o){var b=o.match(a),g=o.match(i),d=o.match(n);return{width:b&&(b[1]||b[2]),height:g&&(g[1]||g[2]),viewbox:d&&(d[1]||d[2])}}function s(o){return r.test(o)?o.match(r)[0]:"px"}B.exports=function(o){if(!!M(o)){for(var b="",g=0;g<o.length;g++)b+=String.fromCharCode(o[g]);var d=(b.match(T)||[""])[0];if(!!e.test(d)){var c=v(d),m=parseFloat(c.width),l=parseFloat(c.height);if(c.width&&c.height)return!f(m)||!f(l)?void 0:{width:m,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(c.width),hUnits:s(c.height)};var y=(c.viewbox||"").split(" "),u={width:y[2],height:y[3]},A=parseFloat(u.width),_=parseFloat(u.height);if(!(!f(A)||!f(_))&&s(u.width)===s(u.height)){var p=A/_;return c.width?f(m)?{width:m,height:m/p,type:"svg",mime:"image/svg+xml",wUnits:s(c.width),hUnits:s(c.width)}:void 0:c.height?f(l)?{width:l*p,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(c.height),hUnits:s(c.height)}:void 0:{width:A,height:_,type:"svg",mime:"image/svg+xml",wUnits:s(u.width),hUnits:s(u.height)}}}}}},{}],274:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt16LE,T=t("../common").readUInt16BE,e=t("../common").readUInt32LE,a=t("../common").readUInt32BE,i=x("II*\0"),n=x("MM\0*");function r(o,b,g){return g?T(o,b):M(o,b)}function v(o,b,g){return g?a(o,b):e(o,b)}function s(o,b,g){var d=r(o,b+2,g),c=v(o,b+4,g);return c!==1||d!==3&&d!==4?null:d===3?r(o,b+8,g):v(o,b+8,g)}B.exports=function(o){if(!(o.length<8)&&!(!f(o,0,i)&&!f(o,0,n))){var b=o[0]===77,g=v(o,4,b)-8;if(!(g<0)){var d=g+8;if(!(o.length-d<2)){var c=r(o,d+0,b)*12;if(!(c<=0)&&(d+=2,!(o.length-d<c))){var m,l,y,u;for(m=0;m<c;m+=12)u=r(o,d+m,b),u===256?l=s(o,d+m,b):u===257&&(y=s(o,d+m,b));if(l&&y)return{width:l,height:y,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(t,B,G){var x=t("../common").str2arr,f=t("../common").sliceEq,M=t("../common").readUInt16LE,T=t("../common").readUInt32LE,e=t("../exif_utils"),a=x("RIFF"),i=x("WEBP");function n(s,o){if(!(s[o+3]!==157||s[o+4]!==1||s[o+5]!==42))return{width:M(s,o+6)&16383,height:M(s,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,o){if(s[o]===47){var b=T(s,o+1);return{width:(b&16383)+1,height:(b>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function v(s,o){return{width:(s[o+6]<<16|s[o+5]<<8|s[o+4])+1,height:(s[o+9]<<o|s[o+8]<<8|s[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}B.exports=function(s){if(!(s.length<16)&&!(!f(s,0,a)&&!f(s,8,i))){var o=12,b=null,g=0,d=T(s,4)+8;if(!(d>s.length)){for(;o+8<d;){if(s[o]===0){o++;continue}var c=String.fromCharCode.apply(null,s.slice(o,o+4)),m=T(s,o+4);c==="VP8 "&&m>=10?b=b||n(s,o+8):c==="VP8L"&&m>=9?b=b||r(s,o+8):c==="VP8X"&&m>=10?b=b||v(s,o+8):c==="EXIF"&&(g=e.get_orientation(s.slice(o+8,o+8+m)),o=1/0),o+=8+m}if(!!b)return g>0&&(b.orientation=g),b}}}},{"../common":263,"../exif_utils":264}],276:[function(t,B,G){B.exports={avif:t("./parse_sync/avif"),bmp:t("./parse_sync/bmp"),gif:t("./parse_sync/gif"),ico:t("./parse_sync/ico"),jpeg:t("./parse_sync/jpeg"),png:t("./parse_sync/png"),psd:t("./parse_sync/psd"),svg:t("./parse_sync/svg"),tiff:t("./parse_sync/tiff"),webp:t("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(t,B,G){var x=t("./lib/parsers_sync");function f(M){for(var T=Object.keys(x),e=0;e<T.length;e++){var a=x[T[e]](M);if(a)return a}return null}B.exports=function(T){return f(T)},B.exports.parsers=x},{"./lib/parsers_sync":276}],278:[function(t,B,G){var x=B.exports={},f,M;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?f=setTimeout:f=T}catch{f=T}try{typeof clearTimeout=="function"?M=clearTimeout:M=e}catch{M=e}})();function a(c){if(f===setTimeout)return setTimeout(c,0);if((f===T||!f)&&setTimeout)return f=setTimeout,setTimeout(c,0);try{return f(c,0)}catch{try{return f.call(null,c,0)}catch{return f.call(this,c,0)}}}function i(c){if(M===clearTimeout)return clearTimeout(c);if((M===e||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(c);try{return M(c)}catch{try{return M.call(null,c)}catch{return M.call(this,c)}}}var n=[],r=!1,v,s=-1;function o(){!r||!v||(r=!1,v.length?n=v.concat(n):s=-1,n.length&&b())}function b(){if(!r){var c=a(o);r=!0;for(var m=n.length;m;){for(v=n,n=[];++s<m;)v&&v[s].run();s=-1,m=n.length}v=null,r=!1,i(c)}}x.nextTick=function(c){var m=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)m[l-1]=arguments[l];n.push(new g(c,m)),n.length===1&&!r&&a(b)};function g(c,m){this.fun=c,this.array=m}g.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={};function d(){}x.on=d,x.addListener=d,x.once=d,x.off=d,x.removeListener=d,x.removeAllListeners=d,x.emit=d,x.prependListener=d,x.prependOnceListener=d,x.listeners=function(c){return[]},x.binding=function(c){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(c){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],279:[function(t,B,G){(function(x){(function(){for(var f=t("performance-now"),M=typeof window>"u"?x:window,T=["moz","webkit"],e="AnimationFrame",a=M["request"+e],i=M["cancel"+e]||M["cancelRequest"+e],n=0;!a&&n<T.length;n++)a=M[T[n]+"Request"+e],i=M[T[n]+"Cancel"+e]||M[T[n]+"CancelRequest"+e];if(!a||!i){var r=0,v=0,s=[],o=1e3/60;a=function(b){if(s.length===0){var g=f(),d=Math.max(0,o-(g-r));r=d+g,setTimeout(function(){var c=s.slice(0);s.length=0;for(var m=0;m<c.length;m++)if(!c[m].cancelled)try{c[m].callback(r)}catch(l){setTimeout(function(){throw l},0)}},Math.round(d))}return s.push({handle:++v,callback:b,cancelled:!1}),v},i=function(b){for(var g=0;g<s.length;g++)s[g].handle===b&&(s[g].cancelled=!0)}}B.exports=function(b){return a.call(M,b)},B.exports.cancel=function(){i.apply(M,arguments)},B.exports.polyfill=function(b){b||(b=M),b.requestAnimationFrame=a,b.cancelAnimationFrame=i}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(t,B,G){var x=t("array-bounds"),f=t("color-normalize"),M=t("update-diff"),T=t("pick-by-alias"),e=t("object-assign"),a=t("flatten-vertex-data"),i=t("to-float32"),n=i.float32,r=i.fract32;B.exports=s;var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(o,b){if(typeof o=="function"?(b||(b={}),b.regl=o):b=o,b.length&&(b.positions=b),o=b.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var g=o._gl,d,c,m,l,y,u,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return l=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=o.buffer({usage:"static",type:"float",data:v}),L(b),d=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(S,P){return[P.viewport.x,P.viewport.y,S.viewportWidth,S.viewportHeight]}},attributes:{color:{buffer:l,offset:function(S,P){return P.offset*4},divisor:1},position:{buffer:c,offset:function(S,P){return P.offset*8},divisor:1},positionFract:{buffer:m,offset:function(S,P){return P.offset*8},divisor:1},error:{buffer:y,offset:function(S,P){return P.offset*16},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:v.length}),e(p,{update:L,draw:w,destroy:E,regl:o,gl:g,canvas:g.canvas,groups:_}),p;function p(S){S?L(S):S===null&&E(),w()}function w(S){if(typeof S=="number")return h(S);S&&!Array.isArray(S)&&(S=[S]),o._refresh(),_.forEach(function(P,F){if(!!P){if(S&&(S[F]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}h(F)}})}function h(S){typeof S=="number"&&(S=_[S]),S!=null&&(!(S&&S.count&&S.color&&S.opacity&&S.positions&&S.positions.length>1)||(S.scaleRatio=[S.scale[0]*S.viewport.width,S.scale[1]*S.viewport.height],d(S),S.after&&S.after(S)))}function L(S){if(!!S){S.length!=null?typeof S[0]=="number"&&(S=[{positions:S}]):Array.isArray(S)||(S=[S]);var P=0,F=0;if(p.groups=_=S.map(function(Y,ee){var j=_[ee];if(Y)typeof Y=="function"?Y={after:Y}:typeof Y[0]=="number"&&(Y={positions:Y});else return j;return Y=T(Y,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(_[ee]=j={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Y=e({},A,Y)),M(j,Y,[{lineWidth:function(X){return+X*.5},capSize:function(X){return+X*.5},opacity:parseFloat,errors:function(X){return X=a(X),F+=X.length,X},positions:function(X,ae){return X=a(X,"float64"),ae.count=Math.floor(X.length/2),ae.bounds=x(X,2),ae.offset=P,P+=ae.count,X}},{color:function(X,ae){var fe=ae.count;if(X||(X="transparent"),!Array.isArray(X)||typeof X[0]=="number"){var K=X;X=Array(fe);for(var J=0;J<fe;J++)X[J]=K}if(X.length<fe)throw Error("Not enough colors");for(var U=new Uint8Array(fe*4),V=0;V<fe;V++){var q=f(X[V],"uint8");U.set(q,V*4)}return U},range:function(X,ae,fe){var K=ae.bounds;return X||(X=K),ae.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],ae.translate=[-X[0],-X[1]],ae.scaleFract=r(ae.scale),ae.translateFract=r(ae.translate),X},viewport:function(X){var ae;return Array.isArray(X)?ae={x:X[0],y:X[1],width:X[2]-X[0],height:X[3]-X[1]}:X?(ae={x:X.x||X.left||0,y:X.y||X.top||0},X.right?ae.width=X.right-ae.x:ae.width=X.w||X.width||0,X.bottom?ae.height=X.bottom-ae.y:ae.height=X.h||X.height||0):ae={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},ae}}]),j}),P||F){var I=_.reduce(function(Y,ee,j){return Y+(ee?ee.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),O=new Float32Array(I*4);_.forEach(function(Y,ee){if(!!Y){var j=Y.positions,X=Y.count,ae=Y.offset,fe=Y.color,K=Y.errors;!X||(R.set(fe,ae*4),O.set(K,ae*4),D.set(j,ae*2))}});var z=n(D);c(z);var H=r(D,z);m(H),l(R),y(O)}}}function E(){c.destroy(),m.destroy(),l.destroy(),y.destroy(),u.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(t,B,G){var x=t("color-normalize"),f=t("array-bounds"),M=t("object-assign"),T=t("glslify"),e=t("pick-by-alias"),a=t("flatten-vertex-data"),i=t("earcut"),n=t("array-normalize"),r=t("to-float32"),v=r.float32,s=r.fract32,o=t("es6-weak-map"),b=t("parse-rect"),g=t("array-find-index");B.exports=d;function d(c,m){if(!(this instanceof d))return new d(c,m);if(typeof c=="function"?(m||(m={}),m.regl=c):m=c,m.length&&(m.positions=m),c=m.regl,!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=d.shaders.has(c)?d.shaders.get(c):d.shaders.set(c,d.createShaders(c)).get(c),this.update(m)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new o,d.createShaders=function(c){var m=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,p){return p.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(_,p){return[p.viewport.x,p.viewport.y,_.viewportWidth,_.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,p){return!p.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},y=c(M({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),u;try{u=c(M({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{u=y}var A=c({primitive:"triangle",elements:function(_,p){return p.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(_,p){return[p.viewport.x,p.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:A,rect:y,miter:u}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var c,m=[],l=arguments.length;l--;)m[l]=arguments[l];m.length&&(c=this).update.apply(c,m),this.draw()},d.prototype.draw=function(){for(var c=this,m=[],l=arguments.length;l--;)m[l]=arguments[l];return(m.length?m:this.passes).forEach(function(y,u){var A;if(y&&Array.isArray(y))return(A=c).draw.apply(A,y);typeof y=="number"&&(y=c.passes[y]),y&&y.count>1&&y.opacity&&(c.regl._refresh(),y.fill&&y.triangles&&y.triangles.length>2&&c.shaders.fill(y),y.thickness&&(y.scale[0]*y.viewport.width>d.precisionThreshold||y.scale[1]*y.viewport.height>d.precisionThreshold||y.join==="rect"||!y.join&&(y.thickness<=2||y.count>=d.maxPoints)?c.shaders.rect(y):c.shaders.miter(y)))}),this},d.prototype.update=function(c){var m=this;if(!!c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var l=this,y=l.regl,u=l.gl;if(c.forEach(function(h,L){var E=m.passes[L];if(h!==void 0){if(h===null){m.passes[L]=null;return}if(typeof h[0]=="number"&&(h={positions:h}),h=e(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),E||(m.passes[L]=E={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:y.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:y.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=M({},d.defaults,h)),h.thickness!=null&&(E.thickness=parseFloat(h.thickness)),h.opacity!=null&&(E.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(E.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(E.overlay=!!h.overlay,L<d.maxLines&&(E.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),h.join!=null&&(E.join=h.join),h.hole!=null&&(E.hole=h.hole),h.fill!=null&&(E.fill=h.fill?x(h.fill,"uint8"):null),h.viewport!=null&&(E.viewport=b(h.viewport)),E.viewport||(E.viewport=b([u.drawingBufferWidth,u.drawingBufferHeight])),h.close!=null&&(E.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var S,P;if(h.positions.x&&h.positions.y){var F=h.positions.x,I=h.positions.y;P=E.count=Math.max(F.length,I.length),S=new Float64Array(P*2);for(var D=0;D<P;D++)S[D*2]=F[D],S[D*2+1]=I[D]}else S=a(h.positions,"float64"),P=E.count=Math.floor(S.length/2);var R=E.bounds=f(S,2);if(E.fill){for(var O=[],z={},H=0,Y=0,ee=0,j=E.count;Y<j;Y++){var X=S[Y*2],ae=S[Y*2+1];isNaN(X)||isNaN(ae)||X==null||ae==null?(X=S[H*2],ae=S[H*2+1],z[Y]=H):H=Y,O[ee++]=X,O[ee++]=ae}if(h.splitNull){E.count-1 in z||(z[E.count]=E.count-1);var fe=Object.keys(z).map(Number).sort(function(Xe,at){return Xe-at}),K=[],J=0,U=E.hole!=null?E.hole[0]:null;if(U!=null){var V=g(fe,function(Xe){return Xe>=U});fe=fe.slice(0,V),fe.push(U)}for(var q=function(Xe){var at=O.slice(J*2,fe[Xe]*2).concat(U?O.slice(U*2):[]),We=(E.hole||[]).map(function(He){return He-U+(fe[Xe]-J)}),Ee=i(at,We);Ee=Ee.map(function(He){return He+J+(He+J<fe[Xe]?0:U-fe[Xe])}),K.push.apply(K,Ee),J=fe[Xe]+1},re=0;re<fe.length;re++)q(re);for(var Z=0,Q=K.length;Z<Q;Z++)z[K[Z]]!=null&&(K[Z]=z[K[Z]]);E.triangles=K}else{for(var ie=i(O,E.hole||[]),oe=0,ne=ie.length;oe<ne;oe++)z[ie[oe]]!=null&&(ie[oe]=z[ie[oe]]);E.triangles=ie}}var se=new Float64Array(S);n(se,2,R);var _e=new Float64Array(P*2+6);E.close?S[0]===S[P*2-2]&&S[1]===S[P*2-1]?(_e[0]=se[P*2-4],_e[1]=se[P*2-3]):(_e[0]=se[P*2-2],_e[1]=se[P*2-1]):(_e[0]=se[0],_e[1]=se[1]),_e.set(se,2),E.close?S[0]===S[P*2-2]&&S[1]===S[P*2-1]?(_e[P*2+2]=se[2],_e[P*2+3]=se[3],E.count-=1):(_e[P*2+2]=se[0],_e[P*2+3]=se[1],_e[P*2+4]=se[2],_e[P*2+5]=se[3]):(_e[P*2+2]=se[P*2-2],_e[P*2+3]=se[P*2-1],_e[P*2+4]=se[P*2-2],_e[P*2+5]=se[P*2-1]);var ue=v(_e);E.positionBuffer(ue);var ge=s(_e,ue);E.positionFractBuffer(ge)}if(h.range?E.range=h.range:E.range||(E.range=E.bounds),(h.range||h.positions)&&E.count){var xe=E.bounds,ye=xe[2]-xe[0],be=xe[3]-xe[1],Se=E.range[2]-E.range[0],Re=E.range[3]-E.range[1];E.scale=[ye/Se,be/Re],E.translate=[-E.range[0]/Se+xe[0]/Se||0,-E.range[1]/Re+xe[1]/Re||0],E.scaleFract=s(E.scale),E.translateFract=s(E.translate)}if(h.dashes){var Ve=0,Ae;if(!h.dashes||h.dashes.length<2)Ve=1,Ae=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ve=0;for(var Ce=0;Ce<h.dashes.length;++Ce)Ve+=h.dashes[Ce];Ae=new Uint8Array(Ve*d.dashMult);for(var Ze=0,Ye=255,ze=0;ze<2;ze++)for(var Ie=0;Ie<h.dashes.length;++Ie){for(var Ge=0,dt=h.dashes[Ie]*d.dashMult*.5;Ge<dt;++Ge)Ae[Ze++]=Ye;Ye^=255}}E.dashLength=Ve,E.dashTexture({channels:1,data:Ae,width:Ae.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Rt=E.count,Qt=h.color;Qt||(Qt="transparent");var Bt=new Uint8Array(Rt*4+4);if(!Array.isArray(Qt)||typeof Qt[0]=="number")for(var Ct=x(Qt,"uint8"),Kt=0;Kt<Rt+1;Kt++)Bt.set(Ct,Kt*4);else{for(var Ot=0;Ot<Rt;Ot++){var St=x(Qt[Ot],"uint8");Bt.set(St,Ot*4)}Bt.set(x(Qt[0],"uint8"),Rt*4)}E.colorBuffer({usage:"dynamic",type:"uint8",data:Bt})}}}),c.length<this.passes.length){for(var A=c.length;A<this.passes.length;A++){var _=this.passes[A];!_||(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=c.length}for(var p=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&p.push(this.passes[w]);return this.passes=p,this}},d.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(t,B,G){function x(E,S){return T(E)||a(E,S)||i(E,S)||v()}function f(E){return M(E)||e(E)||i(E)||r()}function M(E){if(Array.isArray(E))return n(E)}function T(E){if(Array.isArray(E))return E}function e(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function a(E,S){var P=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(P!=null){var F=[],I=!0,D=!1,R,O;try{for(P=P.call(E);!(I=(R=P.next()).done)&&(F.push(R.value),!(S&&F.length===S));I=!0);}catch(z){D=!0,O=z}finally{try{!I&&P.return!=null&&P.return()}finally{if(D)throw O}}return F}}function i(E,S){if(!!E){if(typeof E=="string")return n(E,S);var P=Object.prototype.toString.call(E).slice(8,-1);if(P==="Object"&&E.constructor&&(P=E.constructor.name),P==="Map"||P==="Set")return Array.from(E);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return n(E,S)}}function n(E,S){(S==null||S>E.length)&&(S=E.length);for(var P=0,F=new Array(S);P<S;P++)F[P]=E[P];return F}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=t("color-normalize"),o=t("array-bounds"),b=t("color-id"),g=t("@plotly/point-cluster"),d=t("object-assign"),c=t("glslify"),m=t("pick-by-alias"),l=t("update-diff"),y=t("flatten-vertex-data"),u=t("is-iexplorer"),A=t("to-float32"),_=t("parse-rect"),p=w;function w(E,S){var P=this;if(!(this instanceof w))return new w(E,S);typeof E=="function"?(S||(S={}),S.regl=E):(S=E,E=null),S&&S.length&&(S.positions=S),E=S.regl;var F=E._gl,I,D=[],R={},O=[],z=[null],H=[null],Y=255,ee=100;this.tooManyColors=u,I=E.texture({data:new Uint8Array(Y*4),width:Y,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),d(this,{regl:E,gl:F,groups:O,markerCache:H,markerTextures:z,palette:D,paletteIds:R,paletteTexture:I,maxColors:Y,maxSize:ee,canvas:F.canvas}),this.update(S);var j={uniforms:{constPointSize:!!S.constPointSize,opacity:E.prop("opacity"),paletteSize:function(K,J){return[P.tooManyColors?0:Y,I.height]},pixelRatio:E.context("pixelRatio"),scale:E.prop("scale"),scaleFract:E.prop("scaleFract"),translate:E.prop("translate"),translateFract:E.prop("translateFract"),markerTexture:E.prop("markerTexture"),paletteTexture:I},attributes:{x:function(K,J){return J.xAttr||{buffer:J.positionBuffer,stride:8,offset:0}},y:function(K,J){return J.yAttr||{buffer:J.positionBuffer,stride:8,offset:4}},xFract:function(K,J){return J.xAttr?{constant:[0,0]}:{buffer:J.positionFractBuffer,stride:8,offset:0}},yFract:function(K,J){return J.yAttr?{constant:[0,0]}:{buffer:J.positionFractBuffer,stride:8,offset:4}},size:function(K,J){return J.size.length?{buffer:J.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(J.size*255/P.maxSize)]}},borderSize:function(K,J){return J.borderSize.length?{buffer:J.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(J.borderSize*255/P.maxSize)]}},colorId:function(K,J){return J.color.length?{buffer:J.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice(J.color*4,J.color*4+4):[J.color]}},borderColorId:function(K,J){return J.borderColor.length?{buffer:J.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice(J.borderColor*4,J.borderColor*4+4):[J.borderColor]}},isActive:function(K,J){return J.activation===!0?{constant:[1]}:J.activation?J.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:E.prop("viewport")},viewport:E.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:E.prop("elements"),count:E.prop("count"),offset:E.prop("offset"),primitive:"points"},X=d({},j);X.frag=c([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),X.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=E(X);var ae=d({},j);ae.frag=c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),ae.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(ae.frag=ae.frag.replace("smoothstep","smoothStep"),X.frag=X.frag.replace("smoothstep","smoothStep")),this.drawCircle=E(ae)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var E=this,S=arguments.length,P=new Array(S),F=0;F<S;F++)P[F]=arguments[F];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else I.forEach(function(R,O){E.drawItem(O)});return this},w.prototype.drawItem=function(E,S){var P=this.groups,F=P[E];if(typeof S=="number"&&(E=S,F=P[S],S=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,S));for(var I=[],D=1;D<F.activation.length;D++)!F.activation[D]||F.activation[D]!==!0&&!F.activation[D].data.length||I.push.apply(I,f(this.getMarkerDrawOptions(D,F,S)));I.length&&this.drawMarker(I)}},w.prototype.getMarkerDrawOptions=function(E,S,P){var F=S.range,I=S.tree,D=S.viewport,R=S.activation,O=S.selectionBuffer,z=S.count;if(this.regl,!I)return P?[d({},S,{markerTexture:this.markerTextures[E],activation:R[E],count:P.length,elements:P,offset:0})]:[d({},S,{markerTexture:this.markerTextures[E],activation:R[E],offset:0})];var H=[],Y=I.range(F,{lod:!0,px:[(F[2]-F[0])/D.width,(F[3]-F[1])/D.height]});if(P){for(var ee=R[E],j=ee.data,X=new Uint8Array(z),ae=0;ae<P.length;ae++){var fe=P[ae];X[fe]=j?j[fe]:1}O.subdata(X)}for(var K=Y.length;K--;){var J=x(Y[K],2),U=J[0],V=J[1];H.push(d({},S,{markerTexture:this.markerTextures[E],activation:P?O:R[E],offset:U,count:V-U}))}return H},w.prototype.update=function(){for(var E=this,S=arguments.length,P=new Array(S),F=0;F<S;F++)P[F]=arguments[F];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,D=this.gl,R=this.regl,O=this.maxSize,z=this.maxColors,H=this.palette;this.groups=I=P.map(function(Y,ee){var j=I[ee];if(Y===void 0)return j;Y===null?Y={positions:null}:typeof Y=="function"?Y={ondraw:Y}:typeof Y[0]=="number"&&(Y={positions:Y}),Y=m(Y,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Y.positions===null&&(Y.positions=[]),Y.tooManyColors!=null&&(E.tooManyColors=Y.tooManyColors),j||(I[ee]=j={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Y=d({},w.defaults,Y)),Y.positions&&!("marker"in Y)&&(Y.marker=j.marker,delete j.marker),Y.marker&&!("positions"in Y)&&(Y.positions=j.positions,delete j.positions);var X=0,ae=0;if(l(j,Y,[{snap:!0,size:function(be,Se){return be==null&&(be=w.defaults.size),X+=be&&be.length?1:0,be},borderSize:function(be,Se){return be==null&&(be=w.defaults.borderSize),X+=be&&be.length?1:0,be},opacity:parseFloat,color:function(be,Se){return be==null&&(be=w.defaults.color),be=E.updateColor(be),ae++,be},borderColor:function(be,Se){return be==null&&(be=w.defaults.borderColor),be=E.updateColor(be),ae++,be},bounds:function(be,Se,Re){return"range"in Re||(Re.range=null),be},positions:function(be,Se,Re){var Ve=Se.snap,Ae=Se.positionBuffer,Ce=Se.positionFractBuffer,Ze=Se.selectionBuffer;if(be.x||be.y)return be.x.length?Se.xAttr={buffer:R.buffer(be.x),offset:0,stride:4,count:be.x.length}:Se.xAttr={buffer:be.x.buffer,offset:be.x.offset*4||0,stride:(be.x.stride||1)*4,count:be.x.count},be.y.length?Se.yAttr={buffer:R.buffer(be.y),offset:0,stride:4,count:be.y.length}:Se.yAttr={buffer:be.y.buffer,offset:be.y.offset*4||0,stride:(be.y.stride||1)*4,count:be.y.count},Se.count=Math.max(Se.xAttr.count,Se.yAttr.count),be;be=y(be,"float64");var Ye=Se.count=Math.floor(be.length/2),ze=Se.bounds=Ye?o(be,2):null;if(!Re.range&&!Se.range&&(delete Se.range,Re.range=ze),!Re.marker&&!Se.marker&&(delete Se.marker,Re.marker=null),Ve&&(Ve===!0||Ye>Ve)?Se.tree=g(be,{bounds:ze}):Ve&&Ve.length&&(Se.tree=Ve),Se.tree){var Ie={primitive:"points",usage:"static",data:Se.tree,type:"uint32"};Se.elements?Se.elements(Ie):Se.elements=R.elements(Ie)}var Ge=A.float32(be);Ae({data:Ge,usage:"dynamic"});var dt=A.fract32(be,Ge);return Ce({data:dt,usage:"dynamic"}),Ze({data:new Uint8Array(Ye),type:"uint8",usage:"stream"}),be}},{marker:function(be,Se,Re){var Ve=Se.activation;if(Ve.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ve.length=0,!be||typeof be[0]=="number"){var Ae=E.addMarker(be);Ve[Ae]=!0}else{for(var Ce=[],Ze=0,Ye=Math.min(be.length,Se.count);Ze<Ye;Ze++){var ze=E.addMarker(be[Ze]);Ce[ze]||(Ce[ze]=new Uint8Array(Se.count)),Ce[ze][Ze]=1}for(var Ie=0;Ie<Ce.length;Ie++)if(!!Ce[Ie]){var Ge={data:Ce[Ie],type:"uint8",usage:"static"};Ve[Ie]?Ve[Ie](Ge):Ve[Ie]=R.buffer(Ge),Ve[Ie].data=Ce[Ie]}}return be},range:function(be,Se,Re){var Ve=Se.bounds;if(!!Ve)return be||(be=Ve),Se.scale=[1/(be[2]-be[0]),1/(be[3]-be[1])],Se.translate=[-be[0],-be[1]],Se.scaleFract=A.fract(Se.scale),Se.translateFract=A.fract(Se.translate),be},viewport:function(be){var Se=_(be||[D.drawingBufferWidth,D.drawingBufferHeight]);return Se}}]),X){var fe=j,K=fe.count,J=fe.size,U=fe.borderSize,V=fe.sizeBuffer,q=new Uint8Array(K*2);if(J.length||U.length)for(var re=0;re<K;re++)q[re*2]=Math.round((J[re]==null?J:J[re])*255/O),q[re*2+1]=Math.round((U[re]==null?U:U[re])*255/O);V({data:q,usage:"dynamic"})}if(ae){var Z=j,Q=Z.count,ie=Z.color,oe=Z.borderColor,ne=Z.colorBuffer,se;if(E.tooManyColors){if(ie.length||oe.length){se=new Uint8Array(Q*8);for(var _e=0;_e<Q;_e++){var ue=ie[_e];se[_e*8]=H[ue*4],se[_e*8+1]=H[ue*4+1],se[_e*8+2]=H[ue*4+2],se[_e*8+3]=H[ue*4+3];var ge=oe[_e];se[_e*8+4]=H[ge*4],se[_e*8+5]=H[ge*4+1],se[_e*8+6]=H[ge*4+2],se[_e*8+7]=H[ge*4+3]}}}else if(ie.length||oe.length){se=new Uint8Array(Q*4+2);for(var xe=0;xe<Q;xe++)ie[xe]!=null&&(se[xe*4]=ie[xe]%z,se[xe*4+1]=Math.floor(ie[xe]/z)),oe[xe]!=null&&(se[xe*4+2]=oe[xe]%z,se[xe*4+3]=Math.floor(oe[xe]/z))}ne({data:se||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return j})}},w.prototype.addMarker=function(E){var S=this.markerTextures,P=this.regl,F=this.markerCache,I=E==null?0:F.indexOf(E);if(I>=0)return I;var D;if(E instanceof Uint8Array||E instanceof Uint8ClampedArray)D=E;else{D=new Uint8Array(E.length);for(var R=0,O=E.length;R<O;R++)D[R]=E[R]*255}var z=Math.floor(Math.sqrt(D.length));return I=S.length,F.push(E),S.push(P.texture({channels:1,data:D,radius:z,mag:"linear",min:"linear"})),I},w.prototype.updateColor=function(E){var S=this.paletteIds,P=this.palette,F=this.maxColors;Array.isArray(E)||(E=[E]);var I=[];if(typeof E[0]=="number"){var D=[];if(Array.isArray(E))for(var R=0;R<E.length;R+=4)D.push(E.slice(R,R+4));else for(var O=0;O<E.length;O+=4)D.push(E.subarray(O,O+4));E=D}for(var z=0;z<E.length;z++){var H=E[z];H=s(H,"uint8");var Y=b(H,!1);if(S[Y]==null){var ee=P.length;S[Y]=Math.floor(ee/4),P[ee]=H[0],P[ee+1]=H[1],P[ee+2]=H[2],P[ee+3]=H[3]}I[z]=S[Y]}return!this.tooManyColors&&P.length>F*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},w.prototype.updatePalette=function(E){if(!this.tooManyColors){var S=this.maxColors,P=this.paletteTexture,F=Math.ceil(E.length*.25/S);if(F>1){E=E.slice();for(var I=E.length*.25%S;I<F*S;I++)E.push(0,0,0,0)}P.height<F&&P.resize(S,F),P.subimage({width:Math.min(E.length*.25,S),height:F,data:E},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(E){E.sizeBuffer.destroy(),E.positionBuffer.destroy(),E.positionFractBuffer.destroy(),E.colorBuffer.destroy(),E.activation.forEach(function(S){return S&&S.destroy&&S.destroy()}),E.selectionBuffer.destroy(),E.elements&&E.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(E){return E&&E.destroy&&E.destroy()}),this};var h=t("object-assign"),L=function(S,P){var F=new p(S,P),I=F.render.bind(F);return h(I,{render:I,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),I};B.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(t,B,G){var x=t("regl-scatter2d"),f=t("pick-by-alias"),M=t("array-bounds"),T=t("raf"),e=t("array-range"),a=t("parse-rect"),i=t("flatten-vertex-data");B.exports=n;function n(o,b){if(!(this instanceof n))return new n(o);this.traces=[],this.passes={},this.regl=o,this.scatter=x(o),this.canvas=this.scatter.canvas}n.prototype.render=function(){for(var o=this,b,g=[],d=arguments.length;d--;)g[d]=arguments[d];return g.length&&(b=this).update.apply(b,g),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,T(function(){o.dirty=!1})),this)},n.prototype.update=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!!b.length){for(var d=0;d<b.length;d++)this.updateItem(d,b[d]);this.traces=this.traces.filter(Boolean);for(var c=[],m=0,l=0;l<this.traces.length;l++){for(var y=this.traces[l],u=this.traces[l].passes,A=0;A<u.length;A++)c.push(this.passes[u[A]]);y.passOffset=m,m+=y.passes.length}return(o=this.scatter).update.apply(o,c),this}},n.prototype.updateItem=function(o,b){var g=this,d=g.regl;if(b===null)return this.traces[o]=null,this;if(!b)return this;var c=f(b,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[o]||(this.traces[o]={id:o,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(m.color=c.color),c.size!=null&&(m.size=c.size),c.marker!=null&&(m.marker=c.marker),c.borderColor!=null&&(m.borderColor=c.borderColor),c.borderSize!=null&&(m.borderSize=c.borderSize),c.opacity!=null&&(m.opacity=c.opacity),c.viewport&&(m.viewport=a(c.viewport)),c.diagonal!=null&&(m.diagonal=c.diagonal),c.upper!=null&&(m.upper=c.upper),c.lower!=null&&(m.lower=c.lower),c.data){m.buffer(i(c.data)),m.columns=c.data.length,m.count=c.data[0].length,m.bounds=[];for(var l=0;l<m.columns;l++)m.bounds[l]=M(c.data[l],1)}var y;c.range&&(m.range=c.range,y=m.range&&typeof m.range[0]!="number"),c.domain&&(m.domain=c.domain);var u=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===m.columns&&typeof c.padding[c.padding.length-1]=="number"?(m.padding=c.padding.map(s),u=!0):m.padding=s(c.padding));var A=m.columns,_=m.count,p=m.viewport.width,w=m.viewport.height,h=m.viewport.x,L=m.viewport.y,E=p/A,S=w/A;m.passes=[];for(var P=0;P<A;P++)for(var F=0;F<A;F++)if(!(!m.diagonal&&F===P)&&!(!m.upper&&P>F)&&!(!m.lower&&P<F)){var I=r(m.id,P,F),D=this.passes[I]||(this.passes[I]={});if(c.data&&(c.transpose?D.positions={x:{buffer:m.buffer,offset:F,count:_,stride:A},y:{buffer:m.buffer,offset:P,count:_,stride:A}}:D.positions={x:{buffer:m.buffer,offset:F*_,count:_},y:{buffer:m.buffer,offset:P*_,count:_}},D.bounds=v(m.bounds,P,F)),c.domain||c.viewport||c.data){var R=u?v(m.padding,P,F):m.padding;if(m.domain){var O=v(m.domain,P,F),z=O[0],H=O[1],Y=O[2],ee=O[3];D.viewport=[h+z*p+R[0],L+H*w+R[1],h+Y*p-R[2],L+ee*w-R[3]]}else D.viewport=[h+F*E+E*R[0],L+P*S+S*R[1],h+(F+1)*E-E*R[2],L+(P+1)*S-S*R[3]]}c.color&&(D.color=m.color),c.size&&(D.size=m.size),c.marker&&(D.marker=m.marker),c.borderSize&&(D.borderSize=m.borderSize),c.borderColor&&(D.borderColor=m.borderColor),c.opacity&&(D.opacity=m.opacity),c.range&&(D.range=y?v(m.range,P,F):m.range||D.bounds),m.passes.push(I)}return this},n.prototype.draw=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!b.length)this.scatter.draw();else{for(var d=[],c=0;c<b.length;c++)if(typeof b[c]=="number"){var m=this.traces[b[c]],l=m.passes,y=m.passOffset;d.push.apply(d,e(y,y+l.length))}else if(b[c].length){var u=b[c],A=this.traces[c],_=A.passes,p=A.passOffset;_=_.map(function(w,h){d[p+h]=u})}(o=this.scatter).draw.apply(o,d)}return this},n.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(o,b,g){var d=o.id!=null?o.id:o,c=b,m=g,l=d<<16|(c&255)<<8|m&255;return l}function v(o,b,g){var d,c,m,l,y=o[b],u=o[g];return y.length>2?(y[0],y[2],d=y[1],c=y[3]):y.length?(d=y[0],c=y[1]):(y.x,d=y.y,y.x+y.width,c=y.y+y.height),u.length>2?(m=u[0],l=u[2],u[1],u[3]):u.length?(m=u[0],l=u[1]):(m=u.x,u.y,l=u.x+u.width,u.y+u.height),[m,d,l,c]}function s(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var b=a(o);return[b.x,b.y,b.x+b.width,b.y+b.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?B.exports=f():x.createREGL=f()})(this,function(){function x(st,rr){this.id=_e++,this.type=st,this.data=rr}function f(st){if(st.length===0)return[];var rr=st.charAt(0),er=st.charAt(st.length-1);if(1<st.length&&rr===er&&(rr==='"'||rr==="'"))return['"'+st.substr(1,st.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(rr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(st))return f(st.substr(0,rr.index)).concat(f(rr[1])).concat(f(st.substr(rr.index+rr[0].length)));if(rr=st.split("."),rr.length===1)return['"'+st.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(st=[],er=0;er<rr.length;++er)st=st.concat(f(rr[er]));return st}function M(st){return"["+f(st).join("][")+"]"}function T(st,rr){if(typeof st=="function")return new x(0,st);if(typeof st=="number"||typeof st=="boolean")return new x(5,st);if(Array.isArray(st))return new x(6,st.map(function(er,jt){return T(er)}));if(st instanceof x)return st}function e(){var st={"":0},rr=[""];return{id:function(er){var jt=st[er];return jt||(jt=st[er]=rr.length,rr.push(er),jt)},str:function(er){return rr[er]}}}function a(st,rr,er){function jt(){var Qe=window.innerWidth,ft=window.innerHeight;st!==document.body&&(ft=Mr.getBoundingClientRect(),Qe=ft.right-ft.left,ft=ft.bottom-ft.top),Mr.width=er*Qe,Mr.height=er*ft}var Mr=document.createElement("canvas");se(Mr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),st.appendChild(Mr),st===document.body&&(Mr.style.position="absolute",se(st.style,{margin:0,padding:0}));var it;return st!==document.body&&typeof ResizeObserver=="function"?(it=new ResizeObserver(function(){setTimeout(jt)}),it.observe(st)):window.addEventListener("resize",jt,!1),jt(),{canvas:Mr,onDestroy:function(){it?it.disconnect():window.removeEventListener("resize",jt),st.removeChild(Mr)}}}function i(st,rr){function er(jt){try{return st.getContext(jt,rr)}catch{return null}}return er("webgl")||er("experimental-webgl")||er("webgl-experimental")}function n(st){return typeof st=="string"?st.split():st}function r(st){return typeof st=="string"?document.querySelector(st):st}function v(st){var rr=st||{},er,jt,Mr,it;st={};var Qe=[],ft=[],ct=typeof window>"u"?1:window.devicePixelRatio,Et=!1,Nt={},Pe=function(ot){},Le=function(){};if(typeof rr=="string"?er=document.querySelector(rr):typeof rr=="object"&&(typeof rr.nodeName=="string"&&typeof rr.appendChild=="function"&&typeof rr.getBoundingClientRect=="function"?er=rr:typeof rr.drawArrays=="function"||typeof rr.drawElements=="function"?(it=rr,Mr=it.canvas):("gl"in rr?it=rr.gl:"canvas"in rr?Mr=r(rr.canvas):"container"in rr&&(jt=r(rr.container)),"attributes"in rr&&(st=rr.attributes),"extensions"in rr&&(Qe=n(rr.extensions)),"optionalExtensions"in rr&&(ft=n(rr.optionalExtensions)),"onDone"in rr&&(Pe=rr.onDone),"profile"in rr&&(Et=!!rr.profile),"pixelRatio"in rr&&(ct=+rr.pixelRatio),"cachedCode"in rr&&(Nt=rr.cachedCode))),er&&(er.nodeName.toLowerCase()==="canvas"?Mr=er:jt=er),!it){if(!Mr){if(er=a(jt||document.body,Pe,ct),!er)return null;Mr=er.canvas,Le=er.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),it=i(Mr,st)}return it?{gl:it,canvas:Mr,container:jt,extensions:Qe,optionalExtensions:ft,pixelRatio:ct,profile:Et,cachedCode:Nt,onDone:Pe,onDestroy:Le}:(Le(),Pe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(st,rr){function er(Qe){Qe=Qe.toLowerCase();var ft;try{ft=jt[Qe]=st.getExtension(Qe)}catch{}return!!ft}for(var jt={},Mr=0;Mr<rr.extensions.length;++Mr){var it=rr.extensions[Mr];if(!er(it))return rr.onDestroy(),rr.onDone('"'+it+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rr.optionalExtensions.forEach(er),{extensions:jt,restore:function(){Object.keys(jt).forEach(function(Qe){if(jt[Qe]&&!er(Qe))throw Error("(regl): error restoring extension "+Qe)})}}}function o(st,rr){for(var er=Array(st),jt=0;jt<st;++jt)er[jt]=rr(jt);return er}function b(st){var rr,er;return rr=(65535<st)<<4,st>>>=rr,er=(255<st)<<3,st>>>=er,rr|=er,er=(15<st)<<2,st>>>=er,rr|=er,er=(3<st)<<1,rr|er|st>>>er>>1}function g(){function st(jt){e:{for(var Mr=16;268435456>=Mr;Mr*=16)if(jt<=Mr){jt=Mr;break e}jt=0}return Mr=er[b(jt)>>2],0<Mr.length?Mr.pop():new ArrayBuffer(jt)}function rr(jt){er[b(jt.byteLength)>>2].push(jt)}var er=o(8,function(){return[]});return{alloc:st,free:rr,allocType:function(jt,Mr){var it=null;switch(jt){case 5120:it=new Int8Array(st(Mr),0,Mr);break;case 5121:it=new Uint8Array(st(Mr),0,Mr);break;case 5122:it=new Int16Array(st(2*Mr),0,Mr);break;case 5123:it=new Uint16Array(st(2*Mr),0,Mr);break;case 5124:it=new Int32Array(st(4*Mr),0,Mr);break;case 5125:it=new Uint32Array(st(4*Mr),0,Mr);break;case 5126:it=new Float32Array(st(4*Mr),0,Mr);break;default:return null}return it.length!==Mr?it.subarray(0,Mr):it},freeType:function(jt){rr(jt.buffer)}}}function d(st){return!!st&&typeof st=="object"&&Array.isArray(st.shape)&&Array.isArray(st.stride)&&typeof st.offset=="number"&&st.shape.length===st.stride.length&&(Array.isArray(st.data)||Se(st.data))}function c(st,rr,er,jt,Mr,it){for(var Qe=0;Qe<rr;++Qe)for(var ft=st[Qe],ct=0;ct<er;++ct)for(var Et=ft[ct],Nt=0;Nt<jt;++Nt)Mr[it++]=Et[Nt]}function m(st,rr,er,jt,Mr){for(var it=1,Qe=er+1;Qe<rr.length;++Qe)it*=rr[Qe];var ft=rr[er];if(rr.length-er===4){var ct=rr[er+1],Et=rr[er+2];for(rr=rr[er+3],Qe=0;Qe<ft;++Qe)c(st[Qe],ct,Et,rr,jt,Mr),Mr+=it}else for(Qe=0;Qe<ft;++Qe)m(st[Qe],rr,er+1,jt,Mr),Mr+=it}function l(st){return Ae[Object.prototype.toString.call(st)]|0}function y(st,rr){for(var er=0;er<rr.length;++er)st[er]=rr[er]}function u(st,rr,er,jt,Mr,it,Qe){for(var ft=0,ct=0;ct<er;++ct)for(var Et=0;Et<jt;++Et)st[ft++]=rr[Mr*ct+it*Et+Qe]}function A(st,rr,er,jt){function Mr(Pe){this.id=ct++,this.buffer=st.createBuffer(),this.type=Pe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,er.profile&&(this.stats={size:0})}function it(Pe,Le,ot){Pe.byteLength=Le.byteLength,st.bufferData(Pe.type,Le,ot)}function Qe(Pe,Le,ot,ut,pt,Pt){if(Pe.usage=ot,Array.isArray(Le)){if(Pe.dtype=ut||5126,0<Le.length)if(Array.isArray(Le[0])){pt=ze(Le);for(var xt=ut=1;xt<pt.length;++xt)ut*=pt[xt];Pe.dimension=ut,Le=Ye(Le,pt,Pe.dtype),it(Pe,Le,ot),Pt?Pe.persistentData=Le:ye.freeType(Le)}else typeof Le[0]=="number"?(Pe.dimension=pt,pt=ye.allocType(Pe.dtype,Le.length),y(pt,Le),it(Pe,pt,ot),Pt?Pe.persistentData=pt:ye.freeType(pt)):Se(Le[0])&&(Pe.dimension=Le[0].length,Pe.dtype=ut||l(Le[0])||5126,Le=Ye(Le,[Le.length,Le[0].length],Pe.dtype),it(Pe,Le,ot),Pt?Pe.persistentData=Le:ye.freeType(Le))}else if(Se(Le))Pe.dtype=ut||l(Le),Pe.dimension=pt,it(Pe,Le,ot),Pt&&(Pe.persistentData=new Uint8Array(new Uint8Array(Le.buffer)));else if(d(Le)){pt=Le.shape;var Lt=Le.stride,xt=Le.offset,Zt=0,ur=0,Pr=0,Ar=0;pt.length===1?(Zt=pt[0],ur=1,Pr=Lt[0],Ar=0):pt.length===2&&(Zt=pt[0],ur=pt[1],Pr=Lt[0],Ar=Lt[1]),Pe.dtype=ut||l(Le.data)||5126,Pe.dimension=ur,pt=ye.allocType(Pe.dtype,Zt*ur),u(pt,Le.data,Zt,ur,Pr,Ar,xt),it(Pe,pt,ot),Pt?Pe.persistentData=pt:ye.freeType(pt)}else Le instanceof ArrayBuffer&&(Pe.dtype=5121,Pe.dimension=pt,it(Pe,Le,ot),Pt&&(Pe.persistentData=new Uint8Array(new Uint8Array(Le))))}function ft(Pe){rr.bufferCount--,jt(Pe),st.deleteBuffer(Pe.buffer),Pe.buffer=null,delete Et[Pe.id]}var ct=0,Et={};Mr.prototype.bind=function(){st.bindBuffer(this.type,this.buffer)},Mr.prototype.destroy=function(){ft(this)};var Nt=[];return er.profile&&(rr.getTotalBufferSize=function(){var Pe=0;return Object.keys(Et).forEach(function(Le){Pe+=Et[Le].stats.size}),Pe}),{create:function(Pe,Le,ot,ut){function pt(xt){var Lt=35044,Zt=null,ur=0,Pr=0,Ar=1;return Array.isArray(xt)||Se(xt)||d(xt)||xt instanceof ArrayBuffer?Zt=xt:typeof xt=="number"?ur=xt|0:xt&&("data"in xt&&(Zt=xt.data),"usage"in xt&&(Lt=Ze[xt.usage]),"type"in xt&&(Pr=Ce[xt.type]),"dimension"in xt&&(Ar=xt.dimension|0),"length"in xt&&(ur=xt.length|0)),Pt.bind(),Zt?Qe(Pt,Zt,Lt,Pr,Ar,ut):(ur&&st.bufferData(Pt.type,ur,Lt),Pt.dtype=Pr||5121,Pt.usage=Lt,Pt.dimension=Ar,Pt.byteLength=ur),er.profile&&(Pt.stats.size=Pt.byteLength*Ie[Pt.dtype]),pt}rr.bufferCount++;var Pt=new Mr(Le);return Et[Pt.id]=Pt,ot||pt(Pe),pt._reglType="buffer",pt._buffer=Pt,pt.subdata=function(xt,Lt){var Zt=(Lt||0)|0,ur;if(Pt.bind(),Se(xt)||xt instanceof ArrayBuffer)st.bufferSubData(Pt.type,Zt,xt);else if(Array.isArray(xt)){if(0<xt.length)if(typeof xt[0]=="number"){var Pr=ye.allocType(Pt.dtype,xt.length);y(Pr,xt),st.bufferSubData(Pt.type,Zt,Pr),ye.freeType(Pr)}else(Array.isArray(xt[0])||Se(xt[0]))&&(ur=ze(xt),Pr=Ye(xt,ur,Pt.dtype),st.bufferSubData(Pt.type,Zt,Pr),ye.freeType(Pr))}else if(d(xt)){ur=xt.shape;var Ar=xt.stride,kr=Pr=0,Zr=0,lr=0;ur.length===1?(Pr=ur[0],kr=1,Zr=Ar[0],lr=0):ur.length===2&&(Pr=ur[0],kr=ur[1],Zr=Ar[0],lr=Ar[1]),ur=Array.isArray(xt.data)?Pt.dtype:l(xt.data),ur=ye.allocType(ur,Pr*kr),u(ur,xt.data,Pr,kr,Zr,lr,xt.offset),st.bufferSubData(Pt.type,Zt,ur),ye.freeType(ur)}return pt},er.profile&&(pt.stats=Pt.stats),pt.destroy=function(){ft(Pt)},pt},createStream:function(Pe,Le){var ot=Nt.pop();return ot||(ot=new Mr(Pe)),ot.bind(),Qe(ot,Le,35040,0,1,!1),ot},destroyStream:function(Pe){Nt.push(Pe)},clear:function(){Re(Et).forEach(ft),Nt.forEach(ft)},getBuffer:function(Pe){return Pe&&Pe._buffer instanceof Mr?Pe._buffer:null},restore:function(){Re(Et).forEach(function(Pe){Pe.buffer=st.createBuffer(),st.bindBuffer(Pe.type,Pe.buffer),st.bufferData(Pe.type,Pe.persistentData||Pe.byteLength,Pe.usage)})},_initBuffer:Qe}}function _(st,rr,er,jt){function Mr(Pe){this.id=ct++,ft[this.id]=this,this.buffer=Pe,this.primType=4,this.type=this.vertCount=0}function it(Pe,Le,ot,ut,pt,Pt,xt){Pe.buffer.bind();var Lt;if(Le?((Lt=xt)||Se(Le)&&(!d(Le)||Se(Le.data))||(Lt=rr.oes_element_index_uint?5125:5123),er._initBuffer(Pe.buffer,Le,ot,Lt,3)):(st.bufferData(34963,Pt,ot),Pe.buffer.dtype=Lt||5121,Pe.buffer.usage=ot,Pe.buffer.dimension=3,Pe.buffer.byteLength=Pt),Lt=xt,!xt){switch(Pe.buffer.dtype){case 5121:case 5120:Lt=5121;break;case 5123:case 5122:Lt=5123;break;case 5125:case 5124:Lt=5125}Pe.buffer.dtype=Lt}Pe.type=Lt,Le=pt,0>Le&&(Le=Pe.buffer.byteLength,Lt===5123?Le>>=1:Lt===5125&&(Le>>=2)),Pe.vertCount=Le,Le=ut,0>ut&&(Le=4,ut=Pe.buffer.dimension,ut===1&&(Le=0),ut===2&&(Le=1),ut===3&&(Le=4)),Pe.primType=Le}function Qe(Pe){jt.elementsCount--,delete ft[Pe.id],Pe.buffer.destroy(),Pe.buffer=null}var ft={},ct=0,Et={uint8:5121,uint16:5123};rr.oes_element_index_uint&&(Et.uint32=5125),Mr.prototype.bind=function(){this.buffer.bind()};var Nt=[];return{create:function(Pe,Le){function ot(Pt){if(Pt)if(typeof Pt=="number")ut(Pt),pt.primType=4,pt.vertCount=Pt|0,pt.type=5121;else{var xt=null,Lt=35044,Zt=-1,ur=-1,Pr=0,Ar=0;Array.isArray(Pt)||Se(Pt)||d(Pt)?xt=Pt:("data"in Pt&&(xt=Pt.data),"usage"in Pt&&(Lt=Ze[Pt.usage]),"primitive"in Pt&&(Zt=Ge[Pt.primitive]),"count"in Pt&&(ur=Pt.count|0),"type"in Pt&&(Ar=Et[Pt.type]),"length"in Pt?Pr=Pt.length|0:(Pr=ur,Ar===5123||Ar===5122?Pr*=2:(Ar===5125||Ar===5124)&&(Pr*=4))),it(pt,xt,Lt,Zt,ur,Pr,Ar)}else ut(),pt.primType=4,pt.vertCount=0,pt.type=5121;return ot}var ut=er.create(null,34963,!0),pt=new Mr(ut._buffer);return jt.elementsCount++,ot(Pe),ot._reglType="elements",ot._elements=pt,ot.subdata=function(Pt,xt){return ut.subdata(Pt,xt),ot},ot.destroy=function(){Qe(pt)},ot},createStream:function(Pe){var Le=Nt.pop();return Le||(Le=new Mr(er.create(null,34963,!0,!1)._buffer)),it(Le,Pe,35040,-1,-1,0,0),Le},destroyStream:function(Pe){Nt.push(Pe)},getElements:function(Pe){return typeof Pe=="function"&&Pe._elements instanceof Mr?Pe._elements:null},clear:function(){Re(ft).forEach(Qe)}}}function p(st){for(var rr=ye.allocType(5123,st.length),er=0;er<st.length;++er)if(isNaN(st[er]))rr[er]=65535;else if(st[er]===1/0)rr[er]=31744;else if(st[er]===-1/0)rr[er]=64512;else{dt[0]=st[er];var it=Rt[0],jt=it>>>31<<15,Mr=(it<<1>>>24)-127,it=it>>13&1023;rr[er]=-24>Mr?jt:-14>Mr?jt+(it+1024>>-14-Mr):15<Mr?jt+31744:jt+(Mr+15<<10)+it}return rr}function w(st){return Array.isArray(st)||Se(st)}function h(st){return"[object "+st+"]"}function L(st){return Array.isArray(st)&&(st.length===0||typeof st[0]=="number")}function E(st){return!!(Array.isArray(st)&&st.length!==0&&w(st[0]))}function S(st){return Object.prototype.toString.call(st)}function P(st){if(!st)return!1;var rr=S(st);return 0<=Ee.indexOf(rr)?!0:L(st)||E(st)||d(st)}function F(st,rr){st.type===36193?(st.data=p(rr),ye.freeType(rr)):st.data=rr}function I(st,rr,er,jt,Mr,it){if(st=typeof Ke[st]<"u"?Ke[st]:Ct[st]*He[rr],it&&(st*=6),Mr){for(jt=0;1<=er;)jt+=st*er*er,er/=2;return jt}return st*er*jt}function D(st,rr,er,jt,Mr,it,Qe){function ft(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ct(Sr,bn){Sr.internalformat=bn.internalformat,Sr.format=bn.format,Sr.type=bn.type,Sr.compressed=bn.compressed,Sr.premultiplyAlpha=bn.premultiplyAlpha,Sr.flipY=bn.flipY,Sr.unpackAlignment=bn.unpackAlignment,Sr.colorSpace=bn.colorSpace,Sr.width=bn.width,Sr.height=bn.height,Sr.channels=bn.channels}function Et(Sr,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(Sr.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(Sr.flipY=bn.flipY),"alignment"in bn&&(Sr.unpackAlignment=bn.alignment),"colorSpace"in bn&&(Sr.colorSpace=fr[bn.colorSpace]),"type"in bn&&(Sr.type=Nr[bn.type]);var dn=Sr.width,Ln=Sr.height,ra=Sr.channels,ya=!1;"shape"in bn?(dn=bn.shape[0],Ln=bn.shape[1],bn.shape.length===3&&(ra=bn.shape[2],ya=!0)):("radius"in bn&&(dn=Ln=bn.radius),"width"in bn&&(dn=bn.width),"height"in bn&&(Ln=bn.height),"channels"in bn&&(ra=bn.channels,ya=!0)),Sr.width=dn|0,Sr.height=Ln|0,Sr.channels=ra|0,dn=!1,"format"in bn&&(dn=bn.format,Ln=Sr.internalformat=Vr[dn],Sr.format=Kn[Ln],dn in Nr&&!("type"in bn)&&(Sr.type=Nr[dn]),dn in Dr&&(Sr.compressed=!0),dn=!0),!ya&&dn?Sr.channels=Ct[Sr.format]:ya&&!dn&&Sr.channels!==Bt[Sr.format]&&(Sr.format=Sr.internalformat=Bt[Sr.channels])}}function Nt(Sr){st.pixelStorei(37440,Sr.flipY),st.pixelStorei(37441,Sr.premultiplyAlpha),st.pixelStorei(37443,Sr.colorSpace),st.pixelStorei(3317,Sr.unpackAlignment)}function Pe(){ft.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Le(Sr,bn){var dn=null;if(P(bn)?dn=bn:bn&&(Et(Sr,bn),"x"in bn&&(Sr.xOffset=bn.x|0),"y"in bn&&(Sr.yOffset=bn.y|0),P(bn.data)&&(dn=bn.data)),bn.copy){var Ln=Mr.viewportWidth,ra=Mr.viewportHeight;Sr.width=Sr.width||Ln-Sr.xOffset,Sr.height=Sr.height||ra-Sr.yOffset,Sr.needsCopy=!0}else if(!dn)Sr.width=Sr.width||1,Sr.height=Sr.height||1,Sr.channels=Sr.channels||4;else if(Se(dn))Sr.channels=Sr.channels||4,Sr.data=dn,"type"in bn||Sr.type!==5121||(Sr.type=Ae[Object.prototype.toString.call(dn)]|0);else if(L(dn)){switch(Sr.channels=Sr.channels||4,Ln=dn,ra=Ln.length,Sr.type){case 5121:case 5123:case 5125:case 5126:ra=ye.allocType(Sr.type,ra),ra.set(Ln),Sr.data=ra;break;case 36193:Sr.data=p(Ln)}Sr.alignment=1,Sr.needsFree=!0}else if(d(dn)){Ln=dn.data,Array.isArray(Ln)||Sr.type!==5121||(Sr.type=Ae[Object.prototype.toString.call(Ln)]|0);var ra=dn.shape,ya=dn.stride,sa,Bn,Qn,Xa;ra.length===3?(Qn=ra[2],Xa=ya[2]):Xa=Qn=1,sa=ra[0],Bn=ra[1],ra=ya[0],ya=ya[1],Sr.alignment=1,Sr.width=sa,Sr.height=Bn,Sr.channels=Qn,Sr.format=Sr.internalformat=Bt[Qn],Sr.needsFree=!0,sa=Xa,dn=dn.offset,Qn=Sr.width,Xa=Sr.height,Bn=Sr.channels;for(var mi=ye.allocType(Sr.type===36193?5126:Sr.type,Qn*Xa*Bn),Yt=0,gr=0;gr<Xa;++gr)for(var un=0;un<Qn;++un)for(var yn=0;yn<Bn;++yn)mi[Yt++]=Ln[ra*un+ya*gr+sa*yn+dn];F(Sr,mi)}else if(S(dn)===Kt||S(dn)===Ot||S(dn)===St)S(dn)===Kt||S(dn)===Ot?Sr.element=dn:Sr.element=dn.canvas,Sr.width=Sr.element.width,Sr.height=Sr.element.height,Sr.channels=4;else if(S(dn)===Xe)Sr.element=dn,Sr.width=dn.width,Sr.height=dn.height,Sr.channels=4;else if(S(dn)===at)Sr.element=dn,Sr.width=dn.naturalWidth,Sr.height=dn.naturalHeight,Sr.channels=4;else if(S(dn)===We)Sr.element=dn,Sr.width=dn.videoWidth,Sr.height=dn.videoHeight,Sr.channels=4;else if(E(dn)){for(Ln=Sr.width||dn[0].length,ra=Sr.height||dn.length,ya=Sr.channels,ya=w(dn[0][0])?ya||dn[0][0].length:ya||1,sa=Ve.shape(dn),Qn=1,Xa=0;Xa<sa.length;++Xa)Qn*=sa[Xa];Qn=ye.allocType(Sr.type===36193?5126:Sr.type,Qn),Ve.flatten(dn,sa,"",Qn),F(Sr,Qn),Sr.alignment=1,Sr.width=Ln,Sr.height=ra,Sr.channels=ya,Sr.format=Sr.internalformat=Bt[ya],Sr.needsFree=!0}}function ot(Sr,bn,dn,Ln,ra){var ya=Sr.element,sa=Sr.data,Bn=Sr.internalformat,Qn=Sr.format,Xa=Sr.type,mi=Sr.width,Yt=Sr.height;Nt(Sr),ya?st.texSubImage2D(bn,ra,dn,Ln,Qn,Xa,ya):Sr.compressed?st.compressedTexSubImage2D(bn,ra,dn,Ln,Bn,mi,Yt,sa):Sr.needsCopy?(jt(),st.copyTexSubImage2D(bn,ra,dn,Ln,Sr.xOffset,Sr.yOffset,mi,Yt)):st.texSubImage2D(bn,ra,dn,Ln,mi,Yt,Qn,Xa,sa)}function ut(){return ma.pop()||new Pe}function pt(Sr){Sr.needsFree&&ye.freeType(Sr.data),Pe.call(Sr),ma.push(Sr)}function Pt(){ft.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function xt(Sr,bn,dn){var Ln=Sr.images[0]=ut();Sr.mipmask=1,Ln.width=Sr.width=bn,Ln.height=Sr.height=dn,Ln.channels=Sr.channels=4}function Lt(Sr,bn){var dn=null;if(P(bn))dn=Sr.images[0]=ut(),ct(dn,Sr),Le(dn,bn),Sr.mipmask=1;else if(Et(Sr,bn),Array.isArray(bn.mipmap))for(var Ln=bn.mipmap,ra=0;ra<Ln.length;++ra)dn=Sr.images[ra]=ut(),ct(dn,Sr),dn.width>>=ra,dn.height>>=ra,Le(dn,Ln[ra]),Sr.mipmask|=1<<ra;else dn=Sr.images[0]=ut(),ct(dn,Sr),Le(dn,bn),Sr.mipmask=1;ct(Sr,Sr.images[0])}function Zt(Sr,bn){for(var dn=Sr.images,Ln=0;Ln<dn.length&&dn[Ln];++Ln){var ra=dn[Ln],ya=bn,sa=Ln,Bn=ra.element,Qn=ra.data,Xa=ra.internalformat,mi=ra.format,Yt=ra.type,gr=ra.width,un=ra.height;Nt(ra),Bn?st.texImage2D(ya,sa,mi,mi,Yt,Bn):ra.compressed?st.compressedTexImage2D(ya,sa,Xa,gr,un,0,Qn):ra.needsCopy?(jt(),st.copyTexImage2D(ya,sa,mi,ra.xOffset,ra.yOffset,gr,un,0)):st.texImage2D(ya,sa,mi,gr,un,0,mi,Yt,Qn||null)}}function ur(){var Sr=Ra.pop()||new Pt;ft.call(Sr);for(var bn=Sr.mipmask=0;16>bn;++bn)Sr.images[bn]=null;return Sr}function Pr(Sr){for(var bn=Sr.images,dn=0;dn<bn.length;++dn)bn[dn]&&pt(bn[dn]),bn[dn]=null;Ra.push(Sr)}function Ar(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function kr(Sr,bn){"min"in bn&&(Sr.minFilter=Jt[bn.min],0<=Qt.indexOf(Sr.minFilter)&&!("faces"in bn)&&(Sr.genMipmaps=!0)),"mag"in bn&&(Sr.magFilter=It[bn.mag]);var dn=Sr.wrapS,Ln=Sr.wrapT;if("wrap"in bn){var ra=bn.wrap;typeof ra=="string"?dn=Ln=nt[ra]:Array.isArray(ra)&&(dn=nt[ra[0]],Ln=nt[ra[1]])}else"wrapS"in bn&&(dn=nt[bn.wrapS]),"wrapT"in bn&&(Ln=nt[bn.wrapT]);if(Sr.wrapS=dn,Sr.wrapT=Ln,"anisotropic"in bn&&(Sr.anisotropic=bn.anisotropic),"mipmap"in bn){switch(dn=!1,typeof bn.mipmap){case"string":Sr.mipmapHint=Lr[bn.mipmap],dn=Sr.genMipmaps=!0;break;case"boolean":dn=Sr.genMipmaps=bn.mipmap;break;case"object":Sr.genMipmaps=!1,dn=!0}!dn||"min"in bn||(Sr.minFilter=9984)}}function Zr(Sr,bn){st.texParameteri(bn,10241,Sr.minFilter),st.texParameteri(bn,10240,Sr.magFilter),st.texParameteri(bn,10242,Sr.wrapS),st.texParameteri(bn,10243,Sr.wrapT),rr.ext_texture_filter_anisotropic&&st.texParameteri(bn,34046,Sr.anisotropic),Sr.genMipmaps&&(st.hint(33170,Sr.mipmapHint),st.generateMipmap(bn))}function lr(Sr){ft.call(this),this.mipmask=0,this.internalformat=6408,this.id=_i++,this.refCount=1,this.target=Sr,this.texture=st.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ar,Qe.profile&&(this.stats={size:0})}function br(Sr){st.activeTexture(33984),st.bindTexture(Sr.target,Sr.texture)}function Or(){var Sr=ei[0];Sr?st.bindTexture(Sr.target,Sr.texture):st.bindTexture(3553,null)}function Hr(Sr){var bn=Sr.texture,dn=Sr.unit,Ln=Sr.target;0<=dn&&(st.activeTexture(33984+dn),st.bindTexture(Ln,null),ei[dn]=null),st.deleteTexture(bn),Sr.texture=null,Sr.params=null,Sr.pixels=null,Sr.refCount=0,delete Ka[Sr.id],it.textureCount--}var Lr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},nt={repeat:10497,clamp:33071,mirror:33648},It={nearest:9728,linear:9729},Jt=se({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},It),fr={none:0,browser:37444},Nr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Vr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Dr={};rr.ext_srgb&&(Vr.srgb=35904,Vr.srgba=35906),rr.oes_texture_float&&(Nr.float32=Nr.float=5126),rr.oes_texture_half_float&&(Nr.float16=Nr["half float"]=36193),rr.webgl_depth_texture&&(se(Vr,{depth:6402,"depth stencil":34041}),se(Nr,{uint16:5123,uint32:5125,"depth stencil":34042})),rr.webgl_compressed_texture_s3tc&&se(Dr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rr.webgl_compressed_texture_atc&&se(Dr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rr.webgl_compressed_texture_pvrtc&&se(Dr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rr.webgl_compressed_texture_etc1&&(Dr["rgb etc1"]=36196);var Er=Array.prototype.slice.call(st.getParameter(34467));Object.keys(Dr).forEach(function(Sr){var bn=Dr[Sr];0<=Er.indexOf(bn)&&(Vr[Sr]=bn)});var jr=Object.keys(Vr);er.textureFormats=jr;var kn=[];Object.keys(Vr).forEach(function(Sr){kn[Vr[Sr]]=Sr});var mn=[];Object.keys(Nr).forEach(function(Sr){mn[Nr[Sr]]=Sr});var Wn=[];Object.keys(It).forEach(function(Sr){Wn[It[Sr]]=Sr});var In=[];Object.keys(Jt).forEach(function(Sr){In[Jt[Sr]]=Sr});var $n=[];Object.keys(nt).forEach(function(Sr){$n[nt[Sr]]=Sr});var Kn=jr.reduce(function(Sr,bn){var dn=Vr[bn];return dn===6409||dn===6406||dn===6409||dn===6410||dn===6402||dn===34041||rr.ext_srgb&&(dn===35904||dn===35906)?Sr[dn]=dn:dn===32855||0<=bn.indexOf("rgba")?Sr[dn]=6408:Sr[dn]=6407,Sr},{}),ma=[],Ra=[],_i=0,Ka={},ri=er.maxTextureUnits,ei=Array(ri).map(function(){return null});return se(lr.prototype,{bind:function(){this.bindCount+=1;var Sr=this.unit;if(0>Sr){for(var bn=0;bn<ri;++bn){var dn=ei[bn];if(dn){if(0<dn.bindCount)continue;dn.unit=-1}ei[bn]=this,Sr=bn;break}Qe.profile&&it.maxTextureUnits<Sr+1&&(it.maxTextureUnits=Sr+1),this.unit=Sr,st.activeTexture(33984+Sr),st.bindTexture(this.target,this.texture)}return Sr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Hr(this)}}),Qe.profile&&(it.getTotalTextureSize=function(){var Sr=0;return Object.keys(Ka).forEach(function(bn){Sr+=Ka[bn].stats.size}),Sr}),{create2D:function(Sr,bn){function dn(ra,ya){var sa=Ln.texInfo;Ar.call(sa);var Bn=ur();return typeof ra=="number"?typeof ya=="number"?xt(Bn,ra|0,ya|0):xt(Bn,ra|0,ra|0):ra?(kr(sa,ra),Lt(Bn,ra)):xt(Bn,1,1),sa.genMipmaps&&(Bn.mipmask=(Bn.width<<1)-1),Ln.mipmask=Bn.mipmask,ct(Ln,Bn),Ln.internalformat=Bn.internalformat,dn.width=Bn.width,dn.height=Bn.height,br(Ln),Zt(Bn,3553),Zr(sa,3553),Or(),Pr(Bn),Qe.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,Bn.width,Bn.height,sa.genMipmaps,!1)),dn.format=kn[Ln.internalformat],dn.type=mn[Ln.type],dn.mag=Wn[sa.magFilter],dn.min=In[sa.minFilter],dn.wrapS=$n[sa.wrapS],dn.wrapT=$n[sa.wrapT],dn}var Ln=new lr(3553);return Ka[Ln.id]=Ln,it.textureCount++,dn(Sr,bn),dn.subimage=function(ra,ya,sa,Bn){ya|=0,sa|=0,Bn|=0;var Qn=ut();return ct(Qn,Ln),Qn.width=0,Qn.height=0,Le(Qn,ra),Qn.width=Qn.width||(Ln.width>>Bn)-ya,Qn.height=Qn.height||(Ln.height>>Bn)-sa,br(Ln),ot(Qn,3553,ya,sa,Bn),Or(),pt(Qn),dn},dn.resize=function(ra,ya){var sa=ra|0,Bn=ya|0||sa;if(sa===Ln.width&&Bn===Ln.height)return dn;dn.width=Ln.width=sa,dn.height=Ln.height=Bn,br(Ln);for(var Qn=0;Ln.mipmask>>Qn;++Qn){var Xa=sa>>Qn,mi=Bn>>Qn;if(!Xa||!mi)break;st.texImage2D(3553,Qn,Ln.format,Xa,mi,0,Ln.format,Ln.type,null)}return Or(),Qe.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,sa,Bn,!1,!1)),dn},dn._reglType="texture2d",dn._texture=Ln,Qe.profile&&(dn.stats=Ln.stats),dn.destroy=function(){Ln.decRef()},dn},createCube:function(Sr,bn,dn,Ln,ra,ya){function sa(Xa,mi,Yt,gr,un,yn){var sn,Cn=Bn.texInfo;for(Ar.call(Cn),sn=0;6>sn;++sn)Qn[sn]=ur();if(typeof Xa=="number"||!Xa)for(Xa=Xa|0||1,sn=0;6>sn;++sn)xt(Qn[sn],Xa,Xa);else if(typeof Xa=="object")if(mi)Lt(Qn[0],Xa),Lt(Qn[1],mi),Lt(Qn[2],Yt),Lt(Qn[3],gr),Lt(Qn[4],un),Lt(Qn[5],yn);else if(kr(Cn,Xa),Et(Bn,Xa),"faces"in Xa)for(Xa=Xa.faces,sn=0;6>sn;++sn)ct(Qn[sn],Bn),Lt(Qn[sn],Xa[sn]);else for(sn=0;6>sn;++sn)Lt(Qn[sn],Xa);for(ct(Bn,Qn[0]),Bn.mipmask=Cn.genMipmaps?(Qn[0].width<<1)-1:Qn[0].mipmask,Bn.internalformat=Qn[0].internalformat,sa.width=Qn[0].width,sa.height=Qn[0].height,br(Bn),sn=0;6>sn;++sn)Zt(Qn[sn],34069+sn);for(Zr(Cn,34067),Or(),Qe.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,sa.width,sa.height,Cn.genMipmaps,!0)),sa.format=kn[Bn.internalformat],sa.type=mn[Bn.type],sa.mag=Wn[Cn.magFilter],sa.min=In[Cn.minFilter],sa.wrapS=$n[Cn.wrapS],sa.wrapT=$n[Cn.wrapT],sn=0;6>sn;++sn)Pr(Qn[sn]);return sa}var Bn=new lr(34067);Ka[Bn.id]=Bn,it.cubeCount++;var Qn=Array(6);return sa(Sr,bn,dn,Ln,ra,ya),sa.subimage=function(Xa,mi,Yt,gr,un){Yt|=0,gr|=0,un|=0;var yn=ut();return ct(yn,Bn),yn.width=0,yn.height=0,Le(yn,mi),yn.width=yn.width||(Bn.width>>un)-Yt,yn.height=yn.height||(Bn.height>>un)-gr,br(Bn),ot(yn,34069+Xa,Yt,gr,un),Or(),pt(yn),sa},sa.resize=function(Xa){if(Xa|=0,Xa!==Bn.width){sa.width=Bn.width=Xa,sa.height=Bn.height=Xa,br(Bn);for(var mi=0;6>mi;++mi)for(var Yt=0;Bn.mipmask>>Yt;++Yt)st.texImage2D(34069+mi,Yt,Bn.format,Xa>>Yt,Xa>>Yt,0,Bn.format,Bn.type,null);return Or(),Qe.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,sa.width,sa.height,!1,!0)),sa}},sa._reglType="textureCube",sa._texture=Bn,Qe.profile&&(sa.stats=Bn.stats),sa.destroy=function(){Bn.decRef()},sa},clear:function(){for(var Sr=0;Sr<ri;++Sr)st.activeTexture(33984+Sr),st.bindTexture(3553,null),ei[Sr]=null;Re(Ka).forEach(Hr),it.cubeCount=0,it.textureCount=0},getTexture:function(Sr){return null},restore:function(){for(var Sr=0;Sr<ri;++Sr){var bn=ei[Sr];bn&&(bn.bindCount=0,bn.unit=-1,ei[Sr]=null)}Re(Ka).forEach(function(dn){dn.texture=st.createTexture(),st.bindTexture(dn.target,dn.texture);for(var Ln=0;32>Ln;++Ln)if((dn.mipmask&1<<Ln)!==0)if(dn.target===3553)st.texImage2D(3553,Ln,dn.internalformat,dn.width>>Ln,dn.height>>Ln,0,dn.internalformat,dn.type,null);else for(var ra=0;6>ra;++ra)st.texImage2D(34069+ra,Ln,dn.internalformat,dn.width>>Ln,dn.height>>Ln,0,dn.internalformat,dn.type,null);Zr(dn.texInfo,dn.target)})},refresh:function(){for(var Sr=0;Sr<ri;++Sr){var bn=ei[Sr];bn&&(bn.bindCount=0,bn.unit=-1,ei[Sr]=null),st.activeTexture(33984+Sr),st.bindTexture(3553,null),st.bindTexture(34067,null)}}}}function R(st,rr,er,jt,Mr,it){function Qe(lr,br,Or){this.target=lr,this.texture=br,this.renderbuffer=Or;var Hr=lr=0;br?(lr=br.width,Hr=br.height):Or&&(lr=Or.width,Hr=Or.height),this.width=lr,this.height=Hr}function ft(lr){lr&&(lr.texture&&lr.texture._texture.decRef(),lr.renderbuffer&&lr.renderbuffer._renderbuffer.decRef())}function ct(lr,br,Or){lr&&(lr.texture?lr.texture._texture.refCount+=1:lr.renderbuffer._renderbuffer.refCount+=1)}function Et(lr,br){br&&(br.texture?st.framebufferTexture2D(36160,lr,br.target,br.texture._texture.texture,0):st.framebufferRenderbuffer(36160,lr,36161,br.renderbuffer._renderbuffer.renderbuffer))}function Nt(lr){var br=3553,Or=null,Hr=null,Lr=lr;return typeof lr=="object"&&(Lr=lr.data,"target"in lr&&(br=lr.target|0)),lr=Lr._reglType,lr==="texture2d"||lr==="textureCube"?Or=Lr:lr==="renderbuffer"&&(Hr=Lr,br=36161),new Qe(br,Or,Hr)}function Pe(lr,br,Or,Hr,Lr){return Or?(lr=jt.create2D({width:lr,height:br,format:Hr,type:Lr}),lr._texture.refCount=0,new Qe(3553,lr,null)):(lr=Mr.create({width:lr,height:br,format:Hr}),lr._renderbuffer.refCount=0,new Qe(36161,null,lr))}function Le(lr){return lr&&(lr.texture||lr.renderbuffer)}function ot(lr,br,Or){lr&&(lr.texture?lr.texture.resize(br,Or):lr.renderbuffer&&lr.renderbuffer.resize(br,Or),lr.width=br,lr.height=Or)}function ut(){this.id=kr++,Zr[this.id]=this,this.framebuffer=st.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function pt(lr){lr.colorAttachments.forEach(ft),ft(lr.depthAttachment),ft(lr.stencilAttachment),ft(lr.depthStencilAttachment)}function Pt(lr){st.deleteFramebuffer(lr.framebuffer),lr.framebuffer=null,it.framebufferCount--,delete Zr[lr.id]}function xt(lr){var br;st.bindFramebuffer(36160,lr.framebuffer);var Or=lr.colorAttachments;for(br=0;br<Or.length;++br)Et(36064+br,Or[br]);for(br=Or.length;br<er.maxColorAttachments;++br)st.framebufferTexture2D(36160,36064+br,3553,null,0);st.framebufferTexture2D(36160,33306,3553,null,0),st.framebufferTexture2D(36160,36096,3553,null,0),st.framebufferTexture2D(36160,36128,3553,null,0),Et(36096,lr.depthAttachment),Et(36128,lr.stencilAttachment),Et(33306,lr.depthStencilAttachment),st.checkFramebufferStatus(36160),st.isContextLost(),st.bindFramebuffer(36160,Zt.next?Zt.next.framebuffer:null),Zt.cur=Zt.next,st.getError()}function Lt(lr,br){function Or(Lr,nt){var It,Jt=0,fr=0,Nr=!0,Vr=!0;It=null;var Dr=!0,Er="rgba",jr="uint8",kn=1,mn=null,Wn=null,In=null,$n=!1;typeof Lr=="number"?(Jt=Lr|0,fr=nt|0||Jt):Lr?("shape"in Lr?(fr=Lr.shape,Jt=fr[0],fr=fr[1]):("radius"in Lr&&(Jt=fr=Lr.radius),"width"in Lr&&(Jt=Lr.width),"height"in Lr&&(fr=Lr.height)),("color"in Lr||"colors"in Lr)&&(It=Lr.color||Lr.colors),It||("colorCount"in Lr&&(kn=Lr.colorCount|0),"colorTexture"in Lr&&(Dr=!!Lr.colorTexture,Er="rgba4"),"colorType"in Lr&&(jr=Lr.colorType,!Dr)&&(jr==="half float"||jr==="float16"?Er="rgba16f":(jr==="float"||jr==="float32")&&(Er="rgba32f")),"colorFormat"in Lr&&(Er=Lr.colorFormat,0<=ur.indexOf(Er)?Dr=!0:0<=Pr.indexOf(Er)&&(Dr=!1))),("depthTexture"in Lr||"depthStencilTexture"in Lr)&&($n=!(!Lr.depthTexture&&!Lr.depthStencilTexture)),"depth"in Lr&&(typeof Lr.depth=="boolean"?Nr=Lr.depth:(mn=Lr.depth,Vr=!1)),"stencil"in Lr&&(typeof Lr.stencil=="boolean"?Vr=Lr.stencil:(Wn=Lr.stencil,Nr=!1)),"depthStencil"in Lr&&(typeof Lr.depthStencil=="boolean"?Nr=Vr=Lr.depthStencil:(In=Lr.depthStencil,Vr=Nr=!1))):Jt=fr=1;var Kn=null,ma=null,Ra=null,_i=null;if(Array.isArray(It))Kn=It.map(Nt);else if(It)Kn=[Nt(It)];else for(Kn=Array(kn),It=0;It<kn;++It)Kn[It]=Pe(Jt,fr,Dr,Er,jr);for(Jt=Jt||Kn[0].width,fr=fr||Kn[0].height,mn?ma=Nt(mn):Nr&&!Vr&&(ma=Pe(Jt,fr,$n,"depth","uint32")),Wn?Ra=Nt(Wn):Vr&&!Nr&&(Ra=Pe(Jt,fr,!1,"stencil","uint8")),In?_i=Nt(In):!mn&&!Wn&&Vr&&Nr&&(_i=Pe(Jt,fr,$n,"depth stencil","depth stencil")),Nr=null,It=0;It<Kn.length;++It)ct(Kn[It]),Kn[It]&&Kn[It].texture&&(Vr=mt[Kn[It].texture._texture.format]*Mt[Kn[It].texture._texture.type],Nr===null&&(Nr=Vr));return ct(ma),ct(Ra),ct(_i),pt(Hr),Hr.width=Jt,Hr.height=fr,Hr.colorAttachments=Kn,Hr.depthAttachment=ma,Hr.stencilAttachment=Ra,Hr.depthStencilAttachment=_i,Or.color=Kn.map(Le),Or.depth=Le(ma),Or.stencil=Le(Ra),Or.depthStencil=Le(_i),Or.width=Hr.width,Or.height=Hr.height,xt(Hr),Or}var Hr=new ut;return it.framebufferCount++,Or(lr,br),se(Or,{resize:function(Lr,nt){var It=Math.max(Lr|0,1),Jt=Math.max(nt|0||It,1);if(It===Hr.width&&Jt===Hr.height)return Or;for(var fr=Hr.colorAttachments,Nr=0;Nr<fr.length;++Nr)ot(fr[Nr],It,Jt);return ot(Hr.depthAttachment,It,Jt),ot(Hr.stencilAttachment,It,Jt),ot(Hr.depthStencilAttachment,It,Jt),Hr.width=Or.width=It,Hr.height=Or.height=Jt,xt(Hr),Or},_reglType:"framebuffer",_framebuffer:Hr,destroy:function(){Pt(Hr),pt(Hr)},use:function(Lr){Zt.setFBO({framebuffer:Or},Lr)}})}var Zt={cur:null,next:null,dirty:!1,setFBO:null},ur=["rgba"],Pr=["rgba4","rgb565","rgb5 a1"];rr.ext_srgb&&Pr.push("srgba"),rr.ext_color_buffer_half_float&&Pr.push("rgba16f","rgb16f"),rr.webgl_color_buffer_float&&Pr.push("rgba32f");var Ar=["uint8"];rr.oes_texture_half_float&&Ar.push("half float","float16"),rr.oes_texture_float&&Ar.push("float","float32");var kr=0,Zr={};return se(Zt,{getFramebuffer:function(lr){return typeof lr=="function"&&lr._reglType==="framebuffer"&&(lr=lr._framebuffer,lr instanceof ut)?lr:null},create:Lt,createCube:function(lr){function br(Hr){var Lr,nt={color:null},It=0,Jt=null;Lr="rgba";var fr="uint8",Nr=1;if(typeof Hr=="number"?It=Hr|0:Hr?("shape"in Hr?It=Hr.shape[0]:("radius"in Hr&&(It=Hr.radius|0),"width"in Hr?It=Hr.width|0:"height"in Hr&&(It=Hr.height|0)),("color"in Hr||"colors"in Hr)&&(Jt=Hr.color||Hr.colors),Jt||("colorCount"in Hr&&(Nr=Hr.colorCount|0),"colorType"in Hr&&(fr=Hr.colorType),"colorFormat"in Hr&&(Lr=Hr.colorFormat)),"depth"in Hr&&(nt.depth=Hr.depth),"stencil"in Hr&&(nt.stencil=Hr.stencil),"depthStencil"in Hr&&(nt.depthStencil=Hr.depthStencil)):It=1,Jt)if(Array.isArray(Jt))for(Hr=[],Lr=0;Lr<Jt.length;++Lr)Hr[Lr]=Jt[Lr];else Hr=[Jt];else for(Hr=Array(Nr),Jt={radius:It,format:Lr,type:fr},Lr=0;Lr<Nr;++Lr)Hr[Lr]=jt.createCube(Jt);for(nt.color=Array(Hr.length),Lr=0;Lr<Hr.length;++Lr)Nr=Hr[Lr],It=It||Nr.width,nt.color[Lr]={target:34069,data:Hr[Lr]};for(Lr=0;6>Lr;++Lr){for(Nr=0;Nr<Hr.length;++Nr)nt.color[Nr].target=34069+Lr;0<Lr&&(nt.depth=Or[0].depth,nt.stencil=Or[0].stencil,nt.depthStencil=Or[0].depthStencil),Or[Lr]?Or[Lr](nt):Or[Lr]=Lt(nt)}return se(br,{width:It,height:It,color:Hr})}var Or=Array(6);return br(lr),se(br,{faces:Or,resize:function(Hr){var Lr=Hr|0;if(Lr===br.width)return br;var nt=br.color;for(Hr=0;Hr<nt.length;++Hr)nt[Hr].resize(Lr);for(Hr=0;6>Hr;++Hr)Or[Hr].resize(Lr);return br.width=br.height=Lr,br},_reglType:"framebufferCube",destroy:function(){Or.forEach(function(Hr){Hr.destroy()})}})},clear:function(){Re(Zr).forEach(Pt)},restore:function(){Zt.cur=null,Zt.next=null,Zt.dirty=!0,Re(Zr).forEach(function(lr){lr.framebuffer=st.createFramebuffer(),xt(lr)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(st,rr,er,jt,Mr,it,Qe){function ft(xt){if(xt!==Pt.currentVAO){var Lt=rr.oes_vertex_array_object;xt?Lt.bindVertexArrayOES(xt.vao):Lt.bindVertexArrayOES(null),Pt.currentVAO=xt}}function ct(xt){if(xt!==Pt.currentVAO){if(xt)xt.bindAttrs();else{for(var Lt=rr.angle_instanced_arrays,Zt=0;Zt<ot.length;++Zt){var ur=ot[Zt];ur.buffer?(st.enableVertexAttribArray(Zt),ur.buffer.bind(),st.vertexAttribPointer(Zt,ur.size,ur.type,ur.normalized,ur.stride,ur.offfset),Lt&&ur.divisor&&Lt.vertexAttribDivisorANGLE(Zt,ur.divisor)):(st.disableVertexAttribArray(Zt),st.vertexAttrib4f(Zt,ur.x,ur.y,ur.z,ur.w))}Qe.elements?st.bindBuffer(34963,Qe.elements.buffer.buffer):st.bindBuffer(34963,null)}Pt.currentVAO=xt}}function Et(){Re(pt).forEach(function(xt){xt.destroy()})}function Nt(){this.id=++ut,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var xt=rr.oes_vertex_array_object;this.vao=xt?xt.createVertexArrayOES():null,pt[this.id]=this,this.buffers=[]}function Pe(){rr.oes_vertex_array_object&&Re(pt).forEach(function(xt){xt.refresh()})}var Le=er.maxAttributes,ot=Array(Le);for(er=0;er<Le;++er)ot[er]=new O;var ut=0,pt={},Pt={Record:O,scope:{},state:ot,currentVAO:null,targetVAO:null,restore:rr.oes_vertex_array_object?Pe:function(){},createVAO:function(xt){function Lt(ur){var Pr;Array.isArray(ur)?(Pr=ur,Zt.elements&&Zt.ownsElements&&Zt.elements.destroy(),Zt.elements=null,Zt.ownsElements=!1,Zt.offset=0,Zt.count=0,Zt.instances=-1,Zt.primitive=4):(ur.elements?(Pr=ur.elements,Zt.ownsElements?(typeof Pr=="function"&&Pr._reglType==="elements"?Zt.elements.destroy():Zt.elements(Pr),Zt.ownsElements=!1):it.getElements(ur.elements)?(Zt.elements=ur.elements,Zt.ownsElements=!1):(Zt.elements=it.create(ur.elements),Zt.ownsElements=!0)):(Zt.elements=null,Zt.ownsElements=!1),Pr=ur.attributes,Zt.offset=0,Zt.count=-1,Zt.instances=-1,Zt.primitive=4,Zt.elements&&(Zt.count=Zt.elements._elements.vertCount,Zt.primitive=Zt.elements._elements.primType),"offset"in ur&&(Zt.offset=ur.offset|0),"count"in ur&&(Zt.count=ur.count|0),"instances"in ur&&(Zt.instances=ur.instances|0),"primitive"in ur&&(Zt.primitive=Ge[ur.primitive])),ur={};var Ar=Zt.attributes;Ar.length=Pr.length;for(var kr=0;kr<Pr.length;++kr){var Zr=Pr[kr],lr=Ar[kr]=new O,br=Zr.data||Zr;if(Array.isArray(br)||Se(br)||d(br)){var Or;Zt.buffers[kr]&&(Or=Zt.buffers[kr],Se(br)&&Or._buffer.byteLength>=br.byteLength?Or.subdata(br):(Or.destroy(),Zt.buffers[kr]=null)),Zt.buffers[kr]||(Or=Zt.buffers[kr]=Mr.create(Zr,34962,!1,!0)),lr.buffer=Mr.getBuffer(Or),lr.size=lr.buffer.dimension|0,lr.normalized=!1,lr.type=lr.buffer.dtype,lr.offset=0,lr.stride=0,lr.divisor=0,lr.state=1,ur[kr]=1}else Mr.getBuffer(Zr)?(lr.buffer=Mr.getBuffer(Zr),lr.size=lr.buffer.dimension|0,lr.normalized=!1,lr.type=lr.buffer.dtype,lr.offset=0,lr.stride=0,lr.divisor=0,lr.state=1):Mr.getBuffer(Zr.buffer)?(lr.buffer=Mr.getBuffer(Zr.buffer),lr.size=(+Zr.size||lr.buffer.dimension)|0,lr.normalized=!!Zr.normalized||!1,lr.type="type"in Zr?Ce[Zr.type]:lr.buffer.dtype,lr.offset=(Zr.offset||0)|0,lr.stride=(Zr.stride||0)|0,lr.divisor=(Zr.divisor||0)|0,lr.state=1):"x"in Zr&&(lr.x=+Zr.x||0,lr.y=+Zr.y||0,lr.z=+Zr.z||0,lr.w=+Zr.w||0,lr.state=2)}for(Or=0;Or<Zt.buffers.length;++Or)!ur[Or]&&Zt.buffers[Or]&&(Zt.buffers[Or].destroy(),Zt.buffers[Or]=null);return Zt.refresh(),Lt}var Zt=new Nt;return jt.vaoCount+=1,Lt.destroy=function(){for(var ur=0;ur<Zt.buffers.length;++ur)Zt.buffers[ur]&&Zt.buffers[ur].destroy();Zt.buffers.length=0,Zt.ownsElements&&(Zt.elements.destroy(),Zt.elements=null,Zt.ownsElements=!1),Zt.destroy()},Lt._vao=Zt,Lt._reglType="vao",Lt(xt)},getVAO:function(xt){return typeof xt=="function"&&xt._vao?xt._vao:null},destroyBuffer:function(xt){for(var Lt=0;Lt<ot.length;++Lt){var Zt=ot[Lt];Zt.buffer===xt&&(st.disableVertexAttribArray(Lt),Zt.buffer=null)}},setVAO:rr.oes_vertex_array_object?ft:ct,clear:rr.oes_vertex_array_object?Et:function(){}};return Nt.prototype.bindAttrs=function(){for(var xt=rr.angle_instanced_arrays,Lt=this.attributes,Zt=0;Zt<Lt.length;++Zt){var ur=Lt[Zt];ur.buffer?(st.enableVertexAttribArray(Zt),st.bindBuffer(34962,ur.buffer.buffer),st.vertexAttribPointer(Zt,ur.size,ur.type,ur.normalized,ur.stride,ur.offset),xt&&ur.divisor&&xt.vertexAttribDivisorANGLE(Zt,ur.divisor)):(st.disableVertexAttribArray(Zt),st.vertexAttrib4f(Zt,ur.x,ur.y,ur.z,ur.w))}for(xt=Lt.length;xt<Le;++xt)st.disableVertexAttribArray(xt);(xt=it.getElements(this.elements))?st.bindBuffer(34963,xt.buffer.buffer):st.bindBuffer(34963,null)},Nt.prototype.refresh=function(){var xt=rr.oes_vertex_array_object;xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),Pt.currentVAO=null,xt.bindVertexArrayOES(null))},Nt.prototype.destroy=function(){if(this.vao){var xt=rr.oes_vertex_array_object;this===Pt.currentVAO&&(Pt.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),pt[this.id]&&(delete pt[this.id],--jt.vaoCount)},Pt}function H(st,rr,er,jt){function Mr(ut,pt,Pt,xt){this.name=ut,this.id=pt,this.location=Pt,this.info=xt}function it(ut,pt){for(var Pt=0;Pt<ut.length;++Pt)if(ut[Pt].id===pt.id){ut[Pt].location=pt.location;return}ut.push(pt)}function Qe(ut,pt,Pt){Pt=ut===35632?Et:Nt;var xt=Pt[pt];if(!xt){var Lt=rr.str(pt),xt=st.createShader(ut);st.shaderSource(xt,Lt),st.compileShader(xt),Pt[pt]=xt}return xt}function ft(ut,pt){this.id=ot++,this.fragId=ut,this.vertId=pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,jt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ct(ut,pt,Pt){var xt;xt=Qe(35632,ut.fragId);var Lt=Qe(35633,ut.vertId);if(pt=ut.program=st.createProgram(),st.attachShader(pt,xt),st.attachShader(pt,Lt),Pt)for(xt=0;xt<Pt.length;++xt)Lt=Pt[xt],st.bindAttribLocation(pt,Lt[0],Lt[1]);st.linkProgram(pt),Lt=st.getProgramParameter(pt,35718),jt.profile&&(ut.stats.uniformsCount=Lt);var Zt=ut.uniforms;for(xt=0;xt<Lt;++xt)if(Pt=st.getActiveUniform(pt,xt))if(1<Pt.size)for(var ur=0;ur<Pt.size;++ur){var Pr=Pt.name.replace("[0]","["+ur+"]");it(Zt,new Mr(Pr,rr.id(Pr),st.getUniformLocation(pt,Pr),Pt))}else it(Zt,new Mr(Pt.name,rr.id(Pt.name),st.getUniformLocation(pt,Pt.name),Pt));for(Lt=st.getProgramParameter(pt,35721),jt.profile&&(ut.stats.attributesCount=Lt),ut=ut.attributes,xt=0;xt<Lt;++xt)(Pt=st.getActiveAttrib(pt,xt))&&it(ut,new Mr(Pt.name,rr.id(Pt.name),st.getAttribLocation(pt,Pt.name),Pt))}var Et={},Nt={},Pe={},Le=[],ot=0;return jt.profile&&(er.getMaxUniformsCount=function(){var ut=0;return Le.forEach(function(pt){pt.stats.uniformsCount>ut&&(ut=pt.stats.uniformsCount)}),ut},er.getMaxAttributesCount=function(){var ut=0;return Le.forEach(function(pt){pt.stats.attributesCount>ut&&(ut=pt.stats.attributesCount)}),ut}),{clear:function(){var ut=st.deleteShader.bind(st);Re(Et).forEach(ut),Et={},Re(Nt).forEach(ut),Nt={},Le.forEach(function(pt){st.deleteProgram(pt.program)}),Le.length=0,Pe={},er.shaderCount=0},program:function(ut,pt,Pt,xt){var Lt=Pe[pt];Lt||(Lt=Pe[pt]={});var Zt=Lt[ut];if(Zt&&(Zt.refCount++,!xt))return Zt;var ur=new ft(pt,ut);return er.shaderCount++,ct(ur,Pt,xt),Zt||(Lt[ut]=ur),Le.push(ur),se(ur,{destroy:function(){if(ur.refCount--,0>=ur.refCount){st.deleteProgram(ur.program);var Pr=Le.indexOf(ur);Le.splice(Pr,1),er.shaderCount--}0>=Lt[ur.vertId].refCount&&(st.deleteShader(Nt[ur.vertId]),delete Nt[ur.vertId],delete Pe[ur.fragId][ur.vertId]),Object.keys(Pe[ur.fragId]).length||(st.deleteShader(Et[ur.fragId]),delete Et[ur.fragId],delete Pe[ur.fragId])}})},restore:function(){Et={},Nt={};for(var ut=0;ut<Le.length;++ut)ct(Le[ut],null,Le[ut].attributes.map(function(pt){return[pt.location,pt.name]}))},shader:Qe,frag:-1,vert:-1}}function Y(st,rr,er,jt,Mr,it,Qe){function ft(Et){var Nt;Nt=rr.next===null?5121:rr.next.colorAttachments[0].texture._texture.type;var Pe=0,Le=0,ot=jt.framebufferWidth,ut=jt.framebufferHeight,pt=null;return Se(Et)?pt=Et:Et&&(Pe=Et.x|0,Le=Et.y|0,ot=(Et.width||jt.framebufferWidth-Pe)|0,ut=(Et.height||jt.framebufferHeight-Le)|0,pt=Et.data||null),er(),Et=ot*ut*4,pt||(Nt===5121?pt=new Uint8Array(Et):Nt===5126&&(pt=pt||new Float32Array(Et))),st.pixelStorei(3333,4),st.readPixels(Pe,Le,ot,ut,6408,Nt,pt),pt}function ct(Et){var Nt;return rr.setFBO({framebuffer:Et.framebuffer},function(){Nt=ft(Et)}),Nt}return function(Et){return Et&&"framebuffer"in Et?ct(Et):ft(Et)}}function ee(st){for(var rr=Array(st.length>>2),jt=0;jt<rr.length;jt++)rr[jt]=0;for(jt=0;jt<8*st.length;jt+=8)rr[jt>>5]|=(st.charCodeAt(jt/8)&255)<<24-jt%32;var er=8*st.length;st=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var jt=Array(64),Mr,it,Qe,ft,ct,Et,Nt,Pe,Le,ot,ut;for(rr[er>>5]|=128<<24-er%32,rr[(er+64>>9<<4)+15]=er,Pe=0;Pe<rr.length;Pe+=16){for(er=st[0],Mr=st[1],it=st[2],Qe=st[3],ft=st[4],ct=st[5],Et=st[6],Nt=st[7],Le=0;64>Le;Le++){if(16>Le)jt[Le]=rr[Le+Pe];else{ot=Le,ut=jt[Le-2],ut=ae(ut,17)^ae(ut,19)^ut>>>10,ut=fe(ut,jt[Le-7]);var pt;pt=jt[Le-15],pt=ae(pt,7)^ae(pt,18)^pt>>>3,jt[ot]=fe(fe(ut,pt),jt[Le-16])}ot=ft,ot=ae(ot,6)^ae(ot,11)^ae(ot,25),ot=fe(fe(fe(fe(Nt,ot),ft&ct^~ft&Et),Gt[Le]),jt[Le]),Nt=er,Nt=ae(Nt,2)^ae(Nt,13)^ae(Nt,22),ut=fe(Nt,er&Mr^er&it^Mr&it),Nt=Et,Et=ct,ct=ft,ft=fe(Qe,ot),Qe=it,it=Mr,Mr=er,er=fe(ot,ut)}st[0]=fe(er,st[0]),st[1]=fe(Mr,st[1]),st[2]=fe(it,st[2]),st[3]=fe(Qe,st[3]),st[4]=fe(ft,st[4]),st[5]=fe(ct,st[5]),st[6]=fe(Et,st[6]),st[7]=fe(Nt,st[7])}for(rr="",jt=0;jt<32*st.length;jt+=8)rr+=String.fromCharCode(st[jt>>5]>>>24-jt%32&255);return rr}function j(st){for(var rr="",er,jt=0;jt<st.length;jt++)er=st.charCodeAt(jt),rr+="0123456789abcdef".charAt(er>>>4&15)+"0123456789abcdef".charAt(er&15);return rr}function X(st){for(var rr="",er=-1,jt,Mr;++er<st.length;)jt=st.charCodeAt(er),Mr=er+1<st.length?st.charCodeAt(er+1):0,55296<=jt&&56319>=jt&&56320<=Mr&&57343>=Mr&&(jt=65536+((jt&1023)<<10)+(Mr&1023),er++),127>=jt?rr+=String.fromCharCode(jt):2047>=jt?rr+=String.fromCharCode(192|jt>>>6&31,128|jt&63):65535>=jt?rr+=String.fromCharCode(224|jt>>>12&15,128|jt>>>6&63,128|jt&63):2097151>=jt&&(rr+=String.fromCharCode(240|jt>>>18&7,128|jt>>>12&63,128|jt>>>6&63,128|jt&63));return rr}function ae(st,rr){return st>>>rr|st<<32-rr}function fe(st,rr){var er=(st&65535)+(rr&65535);return(st>>16)+(rr>>16)+(er>>16)<<16|er&65535}function K(st){return Array.prototype.slice.call(st)}function J(st){return K(st).join("")}function U(st){function rr(){var Nt=[],Pe=[];return se(function(){Nt.push.apply(Nt,K(arguments))},{def:function(){var Le="v"+Mr++;return Pe.push(Le),0<arguments.length&&(Nt.push(Le,"="),Nt.push.apply(Nt,K(arguments)),Nt.push(";")),Le},toString:function(){return J([0<Pe.length?"var "+Pe.join(",")+";":"",J(Nt)])}})}function er(){function Nt(pt,Pt){Le(pt,Pt,"=",Pe.def(pt,Pt),";")}var Pe=rr(),Le=rr(),ot=Pe.toString,ut=Le.toString;return se(function(){Pe.apply(Pe,K(arguments))},{def:Pe.def,entry:Pe,exit:Le,save:Nt,set:function(pt,Pt,xt){Nt(pt,Pt),Pe(pt,Pt,"=",xt,";")},toString:function(){return ot()+ut()}})}var jt=st&&st.cache,Mr=0,it=[],Qe=[],ft=[],ct=rr(),Et={};return{global:ct,link:function(Nt,Pe){var Le=Pe&&Pe.stable;if(!Le){for(var ot=0;ot<Qe.length;++ot)if(Qe[ot]===Nt&&!ft[ot])return it[ot]}return ot="g"+Mr++,it.push(ot),Qe.push(Nt),ft.push(Le),ot},block:rr,proc:function(Nt,Pe){function Le(){var Pt="a"+ot.length;return ot.push(Pt),Pt}var ot=[];Pe=Pe||0;for(var ut=0;ut<Pe;++ut)Le();var ut=er(),pt=ut.toString;return Et[Nt]=se(ut,{arg:Le,toString:function(){return J(["function(",ot.join(),"){",pt(),"}"])}})},scope:er,cond:function(){var Nt=J(arguments),Pe=er(),Le=er(),ot=Pe.toString,ut=Le.toString;return se(Pe,{then:function(){return Pe.apply(Pe,K(arguments)),this},else:function(){return Le.apply(Le,K(arguments)),this},toString:function(){var pt=ut();return pt&&(pt="else{"+pt+"}"),J(["if(",Nt,"){",ot(),"}",pt])}})},compile:function(){var Nt=['"use strict";',ct,"return {"];Object.keys(Et).forEach(function(ot){Nt.push('"',ot,'":',Et[ot].toString(),",")}),Nt.push("}");var Pe=J(Nt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Le;return jt&&(Le=j(ee(X(Pe))),jt[Le])?jt[Le].apply(null,Qe):(Pe=Function.apply(null,it.concat(Pe)),jt&&(jt[Le]=Pe),Pe.apply(null,Qe))}}}function V(st){return Array.isArray(st)||Se(st)||d(st)}function q(st){return st.sort(function(rr,er){return rr==="viewport"?-1:er==="viewport"?1:rr<er?-1:1})}function re(st,rr,er,jt){this.thisDep=st,this.contextDep=rr,this.propDep=er,this.append=jt}function Z(st){return st&&!(st.thisDep||st.contextDep||st.propDep)}function Q(st){return new re(!1,!1,!1,st)}function ie(st,rr){var er=st.type;if(er===0)return er=st.data.length,new re(!0,1<=er,2<=er,rr);if(er===4)return er=st.data,new re(er.thisDep,er.contextDep,er.propDep,rr);if(er===5)return new re(!1,!1,!1,rr);if(er===6){for(var jt=er=!1,Mr=!1,it=0;it<st.data.length;++it){var Qe=st.data[it];Qe.type===1?Mr=!0:Qe.type===2?jt=!0:Qe.type===3?er=!0:Qe.type===0?(er=!0,Qe=Qe.data,1<=Qe&&(jt=!0),2<=Qe&&(Mr=!0)):Qe.type===4&&(er=er||Qe.data.thisDep,jt=jt||Qe.data.contextDep,Mr=Mr||Qe.data.propDep)}return new re(er,jt,Mr,rr)}return new re(er===3,er===2,er===1,rr)}function oe(st,rr,er,jt,Mr,it,Qe,ft,ct,Et,Nt,Pe,Le,ot,ut,pt){function Pt(Yt){return Yt.replace(".","_")}function xt(Yt,gr,un){var yn=Pt(Yt);ya.push(Yt),ra[yn]=Ln[yn]=!!un,sa[yn]=gr}function Lt(Yt,gr,un){var yn=Pt(Yt);ya.push(Yt),Array.isArray(un)?(Ln[yn]=un.slice(),ra[yn]=un.slice()):Ln[yn]=ra[yn]=un,Bn[yn]=gr}function Zt(){var Yt=U({cache:ut}),gr=Yt.link,un=Yt.global;Yt.id=mi++,Yt.batchId="0";var yn=gr(Qn),sn=Yt.shared={props:"a0"};Object.keys(Qn).forEach(function(wr){sn[wr]=un.def(yn,".",wr)});var Cn=Yt.next={},Tn=Yt.current={};Object.keys(Bn).forEach(function(wr){Array.isArray(Ln[wr])&&(Cn[wr]=un.def(sn.next,".",wr),Tn[wr]=un.def(sn.current,".",wr))});var gn=Yt.constants={};Object.keys(Xa).forEach(function(wr){gn[wr]=un.def(JSON.stringify(Xa[wr]))}),Yt.invoke=function(wr,Br){switch(Br.type){case 0:var An=["this",sn.context,sn.props,Yt.batchId];return wr.def(gr(Br.data),".call(",An.slice(0,Math.max(Br.data.length+1,4)),")");case 1:return wr.def(sn.props,Br.data);case 2:return wr.def(sn.context,Br.data);case 3:return wr.def("this",Br.data);case 4:return Br.data.append(Yt,wr),Br.data.ref;case 5:return Br.data.toString();case 6:return Br.data.map(function(Yn){return Yt.invoke(wr,Yn)})}},Yt.attribCache={};var _r={};return Yt.scopeAttrib=function(wr){if(wr=rr.id(wr),wr in _r)return _r[wr];var Br=Et.scope[wr];return Br||(Br=Et.scope[wr]=new ri),_r[wr]=gr(Br)},Yt}function ur(Yt){var gr=Yt.static;Yt=Yt.dynamic;var un;if("profile"in gr){var yn=!!gr.profile;un=Q(function(Cn,Tn){return yn}),un.enable=yn}else if("profile"in Yt){var sn=Yt.profile;un=ie(sn,function(Cn,Tn){return Cn.invoke(Tn,sn)})}return un}function Pr(Yt,gr){var un=Yt.static,yn=Yt.dynamic;if("framebuffer"in un){var sn=un.framebuffer;return sn?(sn=ft.getFramebuffer(sn),Q(function(Tn,gn){var _r=Tn.link(sn),wr=Tn.shared;return gn.set(wr.framebuffer,".next",_r),wr=wr.context,gn.set(wr,".framebufferWidth",_r+".width"),gn.set(wr,".framebufferHeight",_r+".height"),_r})):Q(function(Tn,gn){var _r=Tn.shared;return gn.set(_r.framebuffer,".next","null"),_r=_r.context,gn.set(_r,".framebufferWidth",_r+".drawingBufferWidth"),gn.set(_r,".framebufferHeight",_r+".drawingBufferHeight"),"null"})}if("framebuffer"in yn){var Cn=yn.framebuffer;return ie(Cn,function(Tn,gn){var Br=Tn.invoke(gn,Cn),_r=Tn.shared,wr=_r.framebuffer,Br=gn.def(wr,".getFramebuffer(",Br,")");return gn.set(wr,".next",Br),_r=_r.context,gn.set(_r,".framebufferWidth",Br+"?"+Br+".width:"+_r+".drawingBufferWidth"),gn.set(_r,".framebufferHeight",Br+"?"+Br+".height:"+_r+".drawingBufferHeight"),Br})}return null}function Ar(Yt,gr,un){function yn(gn){if(gn in sn){var _r=sn[gn];gn=!0;var wr=_r.x|0,Br=_r.y|0,An,Yn;return"width"in _r?An=_r.width|0:gn=!1,"height"in _r?Yn=_r.height|0:gn=!1,new re(!gn&&gr&&gr.thisDep,!gn&&gr&&gr.contextDep,!gn&&gr&&gr.propDep,function(Sn,na){var ca=Sn.shared.context,Ma=An;"width"in _r||(Ma=na.def(ca,".","framebufferWidth","-",wr));var ka=Yn;return"height"in _r||(ka=na.def(ca,".","framebufferHeight","-",Br)),[wr,Br,Ma,ka]})}if(gn in Cn){var ua=Cn[gn];return gn=ie(ua,function(Sn,na){var Ia=Sn.invoke(na,ua),ca=Sn.shared.context,Ma=na.def(Ia,".x|0"),ka=na.def(Ia,".y|0"),ga=na.def('"width" in ',Ia,"?",Ia,".width|0:","(",ca,".","framebufferWidth","-",Ma,")"),Ia=na.def('"height" in ',Ia,"?",Ia,".height|0:","(",ca,".","framebufferHeight","-",ka,")");return[Ma,ka,ga,Ia]}),gr&&(gn.thisDep=gn.thisDep||gr.thisDep,gn.contextDep=gn.contextDep||gr.contextDep,gn.propDep=gn.propDep||gr.propDep),gn}return gr?new re(gr.thisDep,gr.contextDep,gr.propDep,function(Sn,na){var ca=Sn.shared.context;return[0,0,na.def(ca,".","framebufferWidth"),na.def(ca,".","framebufferHeight")]}):null}var sn=Yt.static,Cn=Yt.dynamic;if(Yt=yn("viewport")){var Tn=Yt;Yt=new re(Yt.thisDep,Yt.contextDep,Yt.propDep,function(gn,_r){var wr=Tn.append(gn,_r),Br=gn.shared.context;return _r.set(Br,".viewportWidth",wr[2]),_r.set(Br,".viewportHeight",wr[3]),wr})}return{viewport:Yt,scissor_box:yn("scissor.box")}}function kr(Yt,gr){var un=Yt.static;if(typeof un.frag=="string"&&typeof un.vert=="string"){if(0<Object.keys(gr.dynamic).length)return null;var un=gr.static,yn=Object.keys(un);if(0<yn.length&&typeof un[yn[0]]=="number"){for(var sn=[],Cn=0;Cn<yn.length;++Cn)sn.push([un[yn[Cn]]|0,yn[Cn]]);return sn}}return null}function Zr(Yt,gr,un){function yn(wr){if(wr in sn){var Br=rr.id(sn[wr]);return wr=Q(function(){return Br}),wr.id=Br,wr}if(wr in Cn){var An=Cn[wr];return ie(An,function(Yn,ua){var Sn=Yn.invoke(ua,An);return ua.def(Yn.shared.strings,".id(",Sn,")")})}return null}var sn=Yt.static,Cn=Yt.dynamic,Tn=yn("frag"),gn=yn("vert"),_r=null;return Z(Tn)&&Z(gn)?(_r=Nt.program(gn.id,Tn.id,null,un),Yt=Q(function(wr,Br){return wr.link(_r)})):Yt=new re(Tn&&Tn.thisDep||gn&&gn.thisDep,Tn&&Tn.contextDep||gn&&gn.contextDep,Tn&&Tn.propDep||gn&&gn.propDep,function(wr,Br){var An=wr.shared.shader,Yn;Yn=Tn?Tn.append(wr,Br):Br.def(An,".","frag");var ua;return ua=gn?gn.append(wr,Br):Br.def(An,".","vert"),Br.def(An+".program("+ua+","+Yn+")")}),{frag:Tn,vert:gn,progVar:Yt,program:_r}}function lr(Yt,gr){function un(Sn,na){if(Sn in yn){var ca=yn[Sn]|0;return na?Cn.offset=ca:Cn.instances=ca,Q(function(ka,ga){return na&&(ka.OFFSET=ca),ca})}if(Sn in sn){var Ma=sn[Sn];return ie(Ma,function(ka,ga){var Ia=ka.invoke(ga,Ma);return na&&(ka.OFFSET=Ia),Ia})}if(na){if(_r)return Q(function(ka,ga){return ka.OFFSET=0});if(Tn)return new re(gn.thisDep,gn.contextDep,gn.propDep,function(ka,ga){return ga.def(ka.shared.vao+".currentVAO?"+ka.shared.vao+".currentVAO.offset:0")})}else if(Tn)return new re(gn.thisDep,gn.contextDep,gn.propDep,function(ka,ga){return ga.def(ka.shared.vao+".currentVAO?"+ka.shared.vao+".currentVAO.instances:-1")});return null}var yn=Yt.static,sn=Yt.dynamic,Cn={},Tn=!1,gn=function(){if("vao"in yn){var Sn=yn.vao;return Sn!==null&&Et.getVAO(Sn)===null&&(Sn=Et.createVAO(Sn)),Tn=!0,Cn.vao=Sn,Q(function(ca){var Ma=Et.getVAO(Sn);return Ma?ca.link(Ma):"null"})}if("vao"in sn){Tn=!0;var na=sn.vao;return ie(na,function(ca,Ma){var ka=ca.invoke(Ma,na);return Ma.def(ca.shared.vao+".getVAO("+ka+")")})}return null}(),_r=!1,wr=function(){if("elements"in yn){var Sn=yn.elements;if(Cn.elements=Sn,V(Sn)){var na=Cn.elements=it.create(Sn,!0),Sn=it.getElements(na);_r=!0}else Sn&&(Sn=it.getElements(Sn),_r=!0);return na=Q(function(Ma,ka){if(Sn){var ga=Ma.link(Sn);return Ma.ELEMENTS=ga}return Ma.ELEMENTS=null}),na.value=Sn,na}if("elements"in sn){_r=!0;var ca=sn.elements;return ie(ca,function(Ma,ka){var ga=Ma.shared,Mo=ga.isBufferArgs,ga=ga.elements,ro=Ma.invoke(ka,ca),Ia=ka.def("null"),Mo=ka.def(Mo,"(",ro,")"),ro=Ma.cond(Mo).then(Ia,"=",ga,".createStream(",ro,");").else(Ia,"=",ga,".getElements(",ro,");");return ka.entry(ro),ka.exit(Ma.cond(Mo).then(ga,".destroyStream(",Ia,");")),Ma.ELEMENTS=Ia})}return Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(Ma,ka){return ka.def(Ma.shared.vao+".currentVAO?"+Ma.shared.elements+".getElements("+Ma.shared.vao+".currentVAO.elements):null")}):null}(),Br=un("offset",!0),An=function(){if("primitive"in yn){var Sn=yn.primitive;return Cn.primitive=Sn,Q(function(ca,Ma){return Ge[Sn]})}if("primitive"in sn){var na=sn.primitive;return ie(na,function(ca,Ma){var ka=ca.constants.primTypes,ga=ca.invoke(Ma,na);return Ma.def(ka,"[",ga,"]")})}return _r?Z(wr)?wr.value?Q(function(ca,Ma){return Ma.def(ca.ELEMENTS,".primType")}):Q(function(){return 4}):new re(wr.thisDep,wr.contextDep,wr.propDep,function(ca,Ma){var ka=ca.ELEMENTS;return Ma.def(ka,"?",ka,".primType:",4)}):Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(ca,Ma){return Ma.def(ca.shared.vao+".currentVAO?"+ca.shared.vao+".currentVAO.primitive:4")}):null}(),Yn=function(){if("count"in yn){var Sn=yn.count|0;return Cn.count=Sn,Q(function(){return Sn})}if("count"in sn){var na=sn.count;return ie(na,function(ca,Ma){return ca.invoke(Ma,na)})}return _r?Z(wr)?wr?Br?new re(Br.thisDep,Br.contextDep,Br.propDep,function(ca,Ma){return Ma.def(ca.ELEMENTS,".vertCount-",ca.OFFSET)}):Q(function(ca,Ma){return Ma.def(ca.ELEMENTS,".vertCount")}):Q(function(){return-1}):new re(wr.thisDep||Br.thisDep,wr.contextDep||Br.contextDep,wr.propDep||Br.propDep,function(ca,Ma){var ka=ca.ELEMENTS;return ca.OFFSET?Ma.def(ka,"?",ka,".vertCount-",ca.OFFSET,":-1"):Ma.def(ka,"?",ka,".vertCount:-1")}):Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(ca,Ma){return Ma.def(ca.shared.vao,".currentVAO?",ca.shared.vao,".currentVAO.count:-1")}):null}(),ua=un("instances",!1);return{elements:wr,primitive:An,count:Yn,instances:ua,offset:Br,vao:gn,vaoActive:Tn,elementsActive:_r,static:Cn}}function br(Yt,gr){var un=Yt.static,yn=Yt.dynamic,sn={};return ya.forEach(function(Cn){function Tn(_r,wr){if(Cn in un){var Br=_r(un[Cn]);sn[gn]=Q(function(){return Br})}else if(Cn in yn){var An=yn[Cn];sn[gn]=ie(An,function(Yn,ua){return wr(Yn,ua,Yn.invoke(ua,An))})}}var gn=Pt(Cn);switch(Cn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Tn(function(_r){return _r},function(_r,wr,Br){return Br});case"depth.func":return Tn(function(_r){return Wt[_r]},function(_r,wr,Br){return wr.def(_r.constants.compareFuncs,"[",Br,"]")});case"depth.range":return Tn(function(_r){return _r},function(_r,wr,Br){return _r=wr.def("+",Br,"[0]"),wr=wr.def("+",Br,"[1]"),[_r,wr]});case"blend.func":return Tn(function(_r){return[Xt["srcRGB"in _r?_r.srcRGB:_r.src],Xt["dstRGB"in _r?_r.dstRGB:_r.dst],Xt["srcAlpha"in _r?_r.srcAlpha:_r.src],Xt["dstAlpha"in _r?_r.dstAlpha:_r.dst]]},function(_r,wr,Br){function An(na,ca){return wr.def('"',na,ca,'" in ',Br,"?",Br,".",na,ca,":",Br,".",na)}_r=_r.constants.blendFuncs;var Yn=An("src","RGB"),Sn=An("dst","RGB"),Yn=wr.def(_r,"[",Yn,"]"),ua=wr.def(_r,"[",An("src","Alpha"),"]"),Sn=wr.def(_r,"[",Sn,"]");return _r=wr.def(_r,"[",An("dst","Alpha"),"]"),[Yn,Sn,ua,_r]});case"blend.equation":return Tn(function(_r){if(typeof _r=="string")return[ei[_r],ei[_r]];if(typeof _r=="object")return[ei[_r.rgb],ei[_r.alpha]]},function(_r,wr,Br){var An=_r.constants.blendEquations,Yn=wr.def(),ua=wr.def();return _r=_r.cond("typeof ",Br,'==="string"'),_r.then(Yn,"=",ua,"=",An,"[",Br,"];"),_r.else(Yn,"=",An,"[",Br,".rgb];",ua,"=",An,"[",Br,".alpha];"),wr(_r),[Yn,ua]});case"blend.color":return Tn(function(_r){return o(4,function(wr){return+_r[wr]})},function(_r,wr,Br){return o(4,function(An){return wr.def("+",Br,"[",An,"]")})});case"stencil.mask":return Tn(function(_r){return _r|0},function(_r,wr,Br){return wr.def(Br,"|0")});case"stencil.func":return Tn(function(_r){return[Wt[_r.cmp||"keep"],_r.ref||0,"mask"in _r?_r.mask:-1]},function(_r,wr,Br){_r=wr.def('"cmp" in ',Br,"?",_r.constants.compareFuncs,"[",Br,".cmp]",":",7680);var An=wr.def(Br,".ref|0");return wr=wr.def('"mask" in ',Br,"?",Br,".mask|0:-1"),[_r,An,wr]});case"stencil.opFront":case"stencil.opBack":return Tn(function(_r){return[Cn==="stencil.opBack"?1029:1028,sr[_r.fail||"keep"],sr[_r.zfail||"keep"],sr[_r.zpass||"keep"]]},function(_r,wr,Br){function An(ua){return wr.def('"',ua,'" in ',Br,"?",Yn,"[",Br,".",ua,"]:",7680)}var Yn=_r.constants.stencilOps;return[Cn==="stencil.opBack"?1029:1028,An("fail"),An("zfail"),An("zpass")]});case"polygonOffset.offset":return Tn(function(_r){return[_r.factor|0,_r.units|0]},function(_r,wr,Br){return _r=wr.def(Br,".factor|0"),wr=wr.def(Br,".units|0"),[_r,wr]});case"cull.face":return Tn(function(_r){var wr=0;return _r==="front"?wr=1028:_r==="back"&&(wr=1029),wr},function(_r,wr,Br){return wr.def(Br,'==="front"?',1028,":",1029)});case"lineWidth":return Tn(function(_r){return _r},function(_r,wr,Br){return Br});case"frontFace":return Tn(function(_r){return Gr[_r]},function(_r,wr,Br){return wr.def(Br+'==="cw"?2304:2305')});case"colorMask":return Tn(function(_r){return _r.map(function(wr){return!!wr})},function(_r,wr,Br){return o(4,function(An){return"!!"+Br+"["+An+"]"})});case"sample.coverage":return Tn(function(_r){return["value"in _r?_r.value:1,!!_r.invert]},function(_r,wr,Br){return _r=wr.def('"value" in ',Br,"?+",Br,".value:1"),wr=wr.def("!!",Br,".invert"),[_r,wr]})}}),sn}function Or(Yt,gr){var un=Yt.static,yn=Yt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Tn=un[Cn],gn;if(typeof Tn=="number"||typeof Tn=="boolean")gn=Q(function(){return Tn});else if(typeof Tn=="function"){var _r=Tn._reglType;_r==="texture2d"||_r==="textureCube"?gn=Q(function(wr){return wr.link(Tn)}):(_r==="framebuffer"||_r==="framebufferCube")&&(gn=Q(function(wr){return wr.link(Tn.color[0])}))}else w(Tn)&&(gn=Q(function(wr){return wr.global.def("[",o(Tn.length,function(Br){return Tn[Br]}),"]")}));gn.value=Tn,sn[Cn]=gn}),Object.keys(yn).forEach(function(Cn){var Tn=yn[Cn];sn[Cn]=ie(Tn,function(gn,_r){return gn.invoke(_r,Tn)})}),sn}function Hr(Yt,gr){var un=Yt.static,yn=Yt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Tn=un[Cn],gn=rr.id(Cn),_r=new ri;if(V(Tn))_r.state=1,_r.buffer=Mr.getBuffer(Mr.create(Tn,34962,!1,!0)),_r.type=0;else{var wr=Mr.getBuffer(Tn);if(wr)_r.state=1,_r.buffer=wr,_r.type=0;else if("constant"in Tn){var Br=Tn.constant;_r.buffer="null",_r.state=2,typeof Br=="number"?_r.x=Br:zt.forEach(function(ca,Ma){Ma<Br.length&&(_r[ca]=Br[Ma])})}else{var wr=V(Tn.buffer)?Mr.getBuffer(Mr.create(Tn.buffer,34962,!1,!0)):Mr.getBuffer(Tn.buffer),An=Tn.offset|0,Yn=Tn.stride|0,ua=Tn.size|0,Sn=!!Tn.normalized,na=0;"type"in Tn&&(na=Ce[Tn.type]),Tn=Tn.divisor|0,_r.buffer=wr,_r.state=1,_r.size=ua,_r.normalized=Sn,_r.type=na||wr.dtype,_r.offset=An,_r.stride=Yn,_r.divisor=Tn}}sn[Cn]=Q(function(ca,Ma){var ka=ca.attribCache;if(gn in ka)return ka[gn];var ga={isStream:!1};return Object.keys(_r).forEach(function(Ia){ga[Ia]=_r[Ia]}),_r.buffer&&(ga.buffer=ca.link(_r.buffer),ga.type=ga.type||ga.buffer+".dtype"),ka[gn]=ga})}),Object.keys(yn).forEach(function(Cn){var Tn=yn[Cn];sn[Cn]=ie(Tn,function(gn,_r){function wr(ka){_r(Sn[ka],"=",Br,".",ka,"|0;")}var Br=gn.invoke(_r,Tn),ua=gn.shared,An=gn.constants,Yn=ua.isBufferArgs,ua=ua.buffer,Sn={isStream:_r.def(!1)},na=new ri;na.state=1,Object.keys(na).forEach(function(ka){Sn[ka]=_r.def(""+na[ka])});var ca=Sn.buffer,Ma=Sn.type;return _r("if(",Yn,"(",Br,")){",Sn.isStream,"=true;",ca,"=",ua,".createStream(",34962,",",Br,");",Ma,"=",ca,".dtype;","}else{",ca,"=",ua,".getBuffer(",Br,");","if(",ca,"){",Ma,"=",ca,".dtype;",'}else if("constant" in ',Br,"){",Sn.state,"=",2,";","if(typeof "+Br+'.constant === "number"){',Sn[zt[0]],"=",Br,".constant;",zt.slice(1).map(function(ka){return Sn[ka]}).join("="),"=0;","}else{",zt.map(function(ka,ga){return Sn[ka]+"="+Br+".constant.length>"+ga+"?"+Br+".constant["+ga+"]:0;"}).join(""),"}}else{","if(",Yn,"(",Br,".buffer)){",ca,"=",ua,".createStream(",34962,",",Br,".buffer);","}else{",ca,"=",ua,".getBuffer(",Br,".buffer);","}",Ma,'="type" in ',Br,"?",An.glTypes,"[",Br,".type]:",ca,".dtype;",Sn.normalized,"=!!",Br,".normalized;"),wr("size"),wr("offset"),wr("stride"),wr("divisor"),_r("}}"),_r.exit("if(",Sn.isStream,"){",ua,".destroyStream(",ca,");","}"),Sn})}),sn}function Lr(Yt){var gr=Yt.static,un=Yt.dynamic,yn={};return Object.keys(gr).forEach(function(sn){var Cn=gr[sn];yn[sn]=Q(function(Tn,gn){return typeof Cn=="number"||typeof Cn=="boolean"?""+Cn:Tn.link(Cn)})}),Object.keys(un).forEach(function(sn){var Cn=un[sn];yn[sn]=ie(Cn,function(Tn,gn){return Tn.invoke(gn,Cn)})}),yn}function nt(Yt,gr,un,yn,sn){function Cn(na){var ca=gn[na];ca&&(wr[na]=ca)}var Tn=kr(Yt,gr),Yn=Pr(Yt),gn=Ar(Yt,Yn),_r=lr(Yt),wr=br(Yt),Br=Zr(Yt,sn,Tn);Cn("viewport"),Cn(Pt("scissor.box"));var An=0<Object.keys(wr).length,Yn={framebuffer:Yn,draw:_r,shader:Br,state:wr,dirty:An,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Yn.profile=ur(Yt),Yn.uniforms=Or(un),Yn.drawVAO=Yn.scopeVAO=_r.vao,!Yn.drawVAO&&Br.program&&!Tn&&er.angle_instanced_arrays&&_r.static.elements){var ua=!0;if(Yt=Br.program.attributes.map(function(na){return na=gr.static[na],ua=ua&&!!na,na}),ua&&0<Yt.length){var Sn=Et.getVAO(Et.createVAO({attributes:Yt,elements:_r.static.elements}));Yn.drawVAO=new re(null,null,null,function(na,ca){return na.link(Sn)}),Yn.useVAO=!0}}return Tn?Yn.useVAO=!0:Yn.attributes=Hr(gr),Yn.context=Lr(yn),Yn}function It(Yt,gr,un){var yn=Yt.shared.context,sn=Yt.scope();Object.keys(un).forEach(function(Cn){gr.save(yn,"."+Cn);var Tn=un[Cn].append(Yt,gr);Array.isArray(Tn)?sn(yn,".",Cn,"=[",Tn.join(),"];"):sn(yn,".",Cn,"=",Tn,";")}),gr(sn)}function Jt(Yt,gr,un,yn){var gn=Yt.shared,sn=gn.gl,Cn=gn.framebuffer,Tn;bn&&(Tn=gr.def(gn.extensions,".webgl_draw_buffers"));var _r=Yt.constants,gn=_r.drawBuffer,_r=_r.backBuffer;Yt=un?un.append(Yt,gr):gr.def(Cn,".next"),yn||gr("if(",Yt,"!==",Cn,".cur){"),gr("if(",Yt,"){",sn,".bindFramebuffer(",36160,",",Yt,".framebuffer);"),bn&&gr(Tn,".drawBuffersWEBGL(",gn,"[",Yt,".colorAttachments.length]);"),gr("}else{",sn,".bindFramebuffer(",36160,",null);"),bn&&gr(Tn,".drawBuffersWEBGL(",_r,");"),gr("}",Cn,".cur=",Yt,";"),yn||gr("}")}function fr(Yt,gr,un){var yn=Yt.shared,sn=yn.gl,Cn=Yt.current,Tn=Yt.next,gn=yn.current,_r=yn.next,wr=Yt.cond(gn,".dirty");ya.forEach(function(Br){if(Br=Pt(Br),!(Br in un.state)){var An,Yn;if(Br in Tn){An=Tn[Br],Yn=Cn[Br];var ua=o(Ln[Br].length,function(Sn){return wr.def(An,"[",Sn,"]")});wr(Yt.cond(ua.map(function(Sn,na){return Sn+"!=="+Yn+"["+na+"]"}).join("||")).then(sn,".",Bn[Br],"(",ua,");",ua.map(function(Sn,na){return Yn+"["+na+"]="+Sn}).join(";"),";"))}else An=wr.def(_r,".",Br),ua=Yt.cond(An,"!==",gn,".",Br),wr(ua),Br in sa?ua(Yt.cond(An).then(sn,".enable(",sa[Br],");").else(sn,".disable(",sa[Br],");"),gn,".",Br,"=",An,";"):ua(sn,".",Bn[Br],"(",An,");",gn,".",Br,"=",An,";")}}),Object.keys(un.state).length===0&&wr(gn,".dirty=false;"),gr(wr)}function Nr(Yt,gr,un,yn){var sn=Yt.shared,Cn=Yt.current,Tn=sn.current,gn=sn.gl,_r;q(Object.keys(un)).forEach(function(wr){var Br=un[wr];if(!yn||yn(Br)){var An=Br.append(Yt,gr);if(sa[wr]){var Yn=sa[wr];Z(Br)?(_r=Yt.link(An,{stable:!0}),gr(Yt.cond(_r).then(gn,".enable(",Yn,");").else(gn,".disable(",Yn,");")),gr(Tn,".",wr,"=",_r,";")):(gr(Yt.cond(An).then(gn,".enable(",Yn,");").else(gn,".disable(",Yn,");")),gr(Tn,".",wr,"=",An,";"))}else if(w(An)){var ua=Cn[wr];gr(gn,".",Bn[wr],"(",An,");",An.map(function(Sn,na){return ua+"["+na+"]="+Sn}).join(";"),";")}else Z(Br)?(_r=Yt.link(An,{stable:!0}),gr(gn,".",Bn[wr],"(",_r,");",Tn,".",wr,"=",_r,";")):gr(gn,".",Bn[wr],"(",An,");",Tn,".",wr,"=",An,";")}})}function Vr(Yt,gr){Sr&&(Yt.instancing=gr.def(Yt.shared.extensions,".angle_instanced_arrays"))}function Dr(Yt,gr,un,yn,sn){function Cn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Tn(na){ua=gr.def(),na(ua,"=",Cn(),";"),typeof sn=="string"?na(Br,".count+=",sn,";"):na(Br,".count++;"),ot&&(yn?(Sn=gr.def(),na(Sn,"=",Yn,".getNumPendingQueries();")):na(Yn,".beginQuery(",Br,");"))}function gn(na){na(Br,".cpuTime+=",Cn(),"-",ua,";"),ot&&(yn?na(Yn,".pushScopeStats(",Sn,",",Yn,".getNumPendingQueries(),",Br,");"):na(Yn,".endQuery();"))}function _r(na){var ca=gr.def(An,".profile");gr(An,".profile=",na,";"),gr.exit(An,".profile=",ca,";")}var wr=Yt.shared,Br=Yt.stats,An=wr.current,Yn=wr.timer;un=un.profile;var ua,Sn;if(un){if(Z(un)){un.enable?(Tn(gr),gn(gr.exit),_r("true")):_r("false");return}un=un.append(Yt,gr),_r(un)}else un=gr.def(An,".profile");wr=Yt.block(),Tn(wr),gr("if(",un,"){",wr,"}"),Yt=Yt.block(),gn(Yt),gr.exit("if(",un,"){",Yt,"}")}function Er(Yt,gr,un,yn,sn){function Cn(_r){switch(_r){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Tn(_r,wr,Br){function An(){gr("if(!",na,".buffer){",ua,".enableVertexAttribArray(",Sn,");}");var ga=Br.type,Ia;Ia=Br.size?gr.def(Br.size,"||",wr):wr,gr("if(",na,".type!==",ga,"||",na,".size!==",Ia,"||",ka.map(function(Mo){return na+"."+Mo+"!=="+Br[Mo]}).join("||"),"){",ua,".bindBuffer(",34962,",",ca,".buffer);",ua,".vertexAttribPointer(",[Sn,Ia,ga,Br.normalized,Br.stride,Br.offset],");",na,".type=",ga,";",na,".size=",Ia,";",ka.map(function(Mo){return na+"."+Mo+"="+Br[Mo]+";"}).join(""),"}"),Sr&&(ga=Br.divisor,gr("if(",na,".divisor!==",ga,"){",Yt.instancing,".vertexAttribDivisorANGLE(",[Sn,ga],");",na,".divisor=",ga,";}"))}function Yn(){gr("if(",na,".buffer){",ua,".disableVertexAttribArray(",Sn,");",na,".buffer=null;","}if(",zt.map(function(ga,Ia){return na+"."+ga+"!=="+Ma[Ia]}).join("||"),"){",ua,".vertexAttrib4f(",Sn,",",Ma,");",zt.map(function(ga,Ia){return na+"."+ga+"="+Ma[Ia]+";"}).join(""),"}")}var ua=gn.gl,Sn=gr.def(_r,".location"),na=gr.def(gn.attributes,"[",Sn,"]");_r=Br.state;var ca=Br.buffer,Ma=[Br.x,Br.y,Br.z,Br.w],ka=["buffer","normalized","offset","stride"];_r===1?An():_r===2?Yn():(gr("if(",_r,"===",1,"){"),An(),gr("}else{"),Yn(),gr("}"))}var gn=Yt.shared;yn.forEach(function(_r){var wr=_r.name,Br=un.attributes[wr],An;if(Br){if(!sn(Br))return;An=Br.append(Yt,gr)}else{if(!sn(cn))return;var Yn=Yt.scopeAttrib(wr);An={},Object.keys(new ri).forEach(function(ua){An[ua]=gr.def(Yn,".",ua)})}Tn(Yt.link(_r),Cn(_r.info.type),An)})}function jr(Yt,gr,un,yn,sn,Cn){for(var Tn=Yt.shared,gn=Tn.gl,_r,wr=0;wr<yn.length;++wr){var ua=yn[wr],Br=ua.name,An=ua.info.type,Yn=un.uniforms[Br],ua=Yt.link(ua)+".location",Sn;if(Yn){if(!sn(Yn))continue;if(Z(Yn)){if(Br=Yn.value,An===35678||An===35680)An=Yt.link(Br._texture||Br.color[0]._texture),gr(gn,".uniform1i(",ua,",",An+".bind());"),gr.exit(An,".unbind();");else if(An===35674||An===35675||An===35676)Br=Yt.global.def("new Float32Array(["+Array.prototype.slice.call(Br)+"])"),Yn=2,An===35675?Yn=3:An===35676&&(Yn=4),gr(gn,".uniformMatrix",Yn,"fv(",ua,",false,",Br,");");else{switch(An){case 5126:_r="1f";break;case 35664:_r="2f";break;case 35665:_r="3f";break;case 35666:_r="4f";break;case 35670:_r="1i";break;case 5124:_r="1i";break;case 35671:_r="2i";break;case 35667:_r="2i";break;case 35672:_r="3i";break;case 35668:_r="3i";break;case 35673:_r="4i";break;case 35669:_r="4i"}gr(gn,".uniform",_r,"(",ua,",",w(Br)?Array.prototype.slice.call(Br):Br,");")}continue}else Sn=Yn.append(Yt,gr)}else{if(!sn(cn))continue;Sn=gr.def(Tn.uniforms,"[",rr.id(Br),"]")}switch(An===35678?gr("if(",Sn,"&&",Sn,'._reglType==="framebuffer"){',Sn,"=",Sn,".color[0];","}"):An===35680&&gr("if(",Sn,"&&",Sn,'._reglType==="framebufferCube"){',Sn,"=",Sn,".color[0];","}"),Br=1,An){case 35678:case 35680:An=gr.def(Sn,"._texture"),gr(gn,".uniform1i(",ua,",",An,".bind());"),gr.exit(An,".unbind();");continue;case 5124:case 35670:_r="1i";break;case 35667:case 35671:_r="2i",Br=2;break;case 35668:case 35672:_r="3i",Br=3;break;case 35669:case 35673:_r="4i",Br=4;break;case 5126:_r="1f";break;case 35664:_r="2f",Br=2;break;case 35665:_r="3f",Br=3;break;case 35666:_r="4f",Br=4;break;case 35674:_r="Matrix2fv";break;case 35675:_r="Matrix3fv";break;case 35676:_r="Matrix4fv"}if(_r.charAt(0)==="M"){gr(gn,".uniform",_r,"(",ua,",");var ua=Math.pow(An-35674+2,2),na=Yt.global.def("new Float32Array(",ua,")");Array.isArray(Sn)?gr("false,(",o(ua,function(ka){return na+"["+ka+"]="+Sn[ka]}),",",na,")"):gr("false,(Array.isArray(",Sn,")||",Sn," instanceof Float32Array)?",Sn,":(",o(ua,function(ka){return na+"["+ka+"]="+Sn+"["+ka+"]"}),",",na,")"),gr(");")}else{if(1<Br){for(var An=[],ca=[],Yn=0;Yn<Br;++Yn)Array.isArray(Sn)?ca.push(Sn[Yn]):ca.push(gr.def(Sn+"["+Yn+"]")),Cn&&An.push(gr.def());Cn&&gr("if(!",Yt.batchId,"||",An.map(function(Ma,ka){return Ma+"!=="+ca[ka]}).join("||"),"){",An.map(function(Ma,ka){return Ma+"="+ca[ka]+";"}).join("")),gr(gn,".uniform",_r,"(",ua,",",ca.join(","),");")}else Cn&&(An=gr.def(),gr("if(!",Yt.batchId,"||",An,"!==",Sn,"){",An,"=",Sn,";")),gr(gn,".uniform",_r,"(",ua,",",Sn,");");Cn&&gr("}")}}}function kn(Yt,gr,un,yn){function sn(ga){var Ia=Br[ga];return Ia?Ia.contextDep&&yn.contextDynamic||Ia.propDep?Ia.append(Yt,un):Ia.append(Yt,gr):gr.def(wr,".",ga)}function Cn(){function ga(){un(ca,".drawElementsInstancedANGLE(",[Yn,Sn,Ma,ua+"<<(("+Ma+"-5121)>>1)",na],");")}function Ia(){un(ca,".drawArraysInstancedANGLE(",[Yn,ua,Sn,na],");")}An&&An!=="null"?ka?ga():(un("if(",An,"){"),ga(),un("}else{"),Ia(),un("}")):Ia()}function Tn(){function ga(){un(_r+".drawElements("+[Yn,Sn,Ma,ua+"<<(("+Ma+"-5121)>>1)"]+");")}function Ia(){un(_r+".drawArrays("+[Yn,ua,Sn]+");")}An&&An!=="null"?ka?ga():(un("if(",An,"){"),ga(),un("}else{"),Ia(),un("}")):Ia()}var gn=Yt.shared,_r=gn.gl,wr=gn.draw,Br=yn.draw,An=function(){var ga=Br.elements,Ia=gr;return ga?((ga.contextDep&&yn.contextDynamic||ga.propDep)&&(Ia=un),ga=ga.append(Yt,Ia),Br.elementsActive&&Ia("if("+ga+")"+_r+".bindBuffer(34963,"+ga+".buffer.buffer);")):(ga=Ia.def(),Ia(ga,"=",wr,".","elements",";","if(",ga,"){",_r,".bindBuffer(",34963,",",ga,".buffer.buffer);}","else if(",gn.vao,".currentVAO){",ga,"=",Yt.shared.elements+".getElements("+gn.vao,".currentVAO.elements);",dn?"":"if("+ga+")"+_r+".bindBuffer(34963,"+ga+".buffer.buffer);","}")),ga}(),Yn=sn("primitive"),ua=sn("offset"),Sn=function(){var ga=Br.count,Ia=gr;return ga?((ga.contextDep&&yn.contextDynamic||ga.propDep)&&(Ia=un),ga=ga.append(Yt,Ia)):ga=Ia.def(wr,".","count"),ga}();if(typeof Sn=="number"){if(Sn===0)return}else un("if(",Sn,"){"),un.exit("}");var na,ca;Sr&&(na=sn("instances"),ca=Yt.instancing);var Ma=An+".type",ka=Br.elements&&Z(Br.elements)&&!Br.vaoActive;Sr&&(typeof na!="number"||0<=na)?typeof na=="string"?(un("if(",na,">0){"),Cn(),un("}else if(",na,"<0){"),Tn(),un("}")):Cn():Tn()}function mn(Yt,gr,un,yn,sn){return gr=Zt(),sn=gr.proc("body",sn),Sr&&(gr.instancing=sn.def(gr.shared.extensions,".angle_instanced_arrays")),Yt(gr,sn,un,yn),gr.compile().body}function Wn(Yt,gr,un,yn){Vr(Yt,gr),un.useVAO?un.drawVAO?gr(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,gr),");"):gr(Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"):(gr(Yt.shared.vao,".setVAO(null);"),Er(Yt,gr,un,yn.attributes,function(){return!0})),jr(Yt,gr,un,yn.uniforms,function(){return!0},!1),kn(Yt,gr,gr,un)}function In(Yt,gr){var un=Yt.proc("draw",1);Vr(Yt,un),It(Yt,un,gr.context),Jt(Yt,un,gr.framebuffer),fr(Yt,un,gr),Nr(Yt,un,gr.state),Dr(Yt,un,gr,!1,!0);var yn=gr.shader.progVar.append(Yt,un);if(un(Yt.shared.gl,".useProgram(",yn,".program);"),gr.shader.program)Wn(Yt,un,gr,gr.shader.program);else{un(Yt.shared.vao,".setVAO(null);");var sn=Yt.global.def("{}"),Cn=un.def(yn,".id"),Tn=un.def(sn,"[",Cn,"]");un(Yt.cond(Tn).then(Tn,".call(this,a0);").else(Tn,"=",sn,"[",Cn,"]=",Yt.link(function(gn){return mn(Wn,Yt,gr,gn,1)}),"(",yn,");",Tn,".call(this,a0);"))}0<Object.keys(gr.state).length&&un(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&un(Yt.shared.vao,".setVAO(null);")}function $n(Yt,gr,un,yn){function sn(){return!0}Yt.batchId="a1",Vr(Yt,gr),Er(Yt,gr,un,yn.attributes,sn),jr(Yt,gr,un,yn.uniforms,sn,!1),kn(Yt,gr,gr,un)}function Kn(Yt,gr,un,yn){function sn(An){return An.contextDep&&Tn||An.propDep}function Cn(An){return!sn(An)}Vr(Yt,gr);var Tn=un.contextDep,gn=gr.def(),_r=gr.def();Yt.shared.props=_r,Yt.batchId=gn;var wr=Yt.scope(),Br=Yt.scope();gr(wr.entry,"for(",gn,"=0;",gn,"<","a1",";++",gn,"){",_r,"=","a0","[",gn,"];",Br,"}",wr.exit),un.needsContext&&It(Yt,Br,un.context),un.needsFramebuffer&&Jt(Yt,Br,un.framebuffer),Nr(Yt,Br,un.state,sn),un.profile&&sn(un.profile)&&Dr(Yt,Br,un,!1,!0),yn?(un.useVAO?un.drawVAO?sn(un.drawVAO)?Br(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,Br),");"):wr(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,wr),");"):wr(Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"):(wr(Yt.shared.vao,".setVAO(null);"),Er(Yt,wr,un,yn.attributes,Cn),Er(Yt,Br,un,yn.attributes,sn)),jr(Yt,wr,un,yn.uniforms,Cn,!1),jr(Yt,Br,un,yn.uniforms,sn,!0),kn(Yt,wr,Br,un)):(gr=Yt.global.def("{}"),yn=un.shader.progVar.append(Yt,Br),_r=Br.def(yn,".id"),wr=Br.def(gr,"[",_r,"]"),Br(Yt.shared.gl,".useProgram(",yn,".program);","if(!",wr,"){",wr,"=",gr,"[",_r,"]=",Yt.link(function(An){return mn($n,Yt,un,An,2)}),"(",yn,");}",wr,".call(this,a0[",gn,"],",gn,");"))}function ma(Yt,gr){function un(wr){return wr.contextDep&&sn||wr.propDep}var yn=Yt.proc("batch",2);Yt.batchId="0",Vr(Yt,yn);var sn=!1,Cn=!0;Object.keys(gr.context).forEach(function(wr){sn=sn||gr.context[wr].propDep}),sn||(It(Yt,yn,gr.context),Cn=!1);var Tn=gr.framebuffer,gn=!1;if(Tn?(Tn.propDep?sn=gn=!0:Tn.contextDep&&sn&&(gn=!0),gn||Jt(Yt,yn,Tn)):Jt(Yt,yn,null),gr.state.viewport&&gr.state.viewport.propDep&&(sn=!0),fr(Yt,yn,gr),Nr(Yt,yn,gr.state,function(wr){return!un(wr)}),gr.profile&&un(gr.profile)||Dr(Yt,yn,gr,!1,"a1"),gr.contextDep=sn,gr.needsContext=Cn,gr.needsFramebuffer=gn,Cn=gr.shader.progVar,Cn.contextDep&&sn||Cn.propDep)Kn(Yt,yn,gr,null);else if(Cn=Cn.append(Yt,yn),yn(Yt.shared.gl,".useProgram(",Cn,".program);"),gr.shader.program)Kn(Yt,yn,gr,gr.shader.program);else{yn(Yt.shared.vao,".setVAO(null);");var Tn=Yt.global.def("{}"),gn=yn.def(Cn,".id"),_r=yn.def(Tn,"[",gn,"]");yn(Yt.cond(_r).then(_r,".call(this,a0,a1);").else(_r,"=",Tn,"[",gn,"]=",Yt.link(function(An){return mn(Kn,Yt,gr,An,2)}),"(",Cn,");",_r,".call(this,a0,a1);"))}0<Object.keys(gr.state).length&&yn(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&yn(Yt.shared.vao,".setVAO(null);")}function Ra(Yt,gr){function un(gn){var _r=gr.shader[gn];_r&&(_r=_r.append(Yt,yn),isNaN(_r)?yn.set(sn.shader,"."+gn,_r):yn.set(sn.shader,"."+gn,Yt.link(_r,{stable:!0})))}var yn=Yt.proc("scope",3);Yt.batchId="a2";var sn=Yt.shared,Cn=sn.current;if(It(Yt,yn,gr.context),gr.framebuffer&&gr.framebuffer.append(Yt,yn),q(Object.keys(gr.state)).forEach(function(gn){var _r=gr.state[gn],wr=_r.append(Yt,yn);w(wr)?wr.forEach(function(Br,An){isNaN(Br)?yn.set(Yt.next[gn],"["+An+"]",Br):yn.set(Yt.next[gn],"["+An+"]",Yt.link(Br,{stable:!0}))}):Z(_r)?yn.set(sn.next,"."+gn,Yt.link(wr,{stable:!0})):yn.set(sn.next,"."+gn,wr)}),Dr(Yt,yn,gr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(gn){var _r=gr.draw[gn];_r&&(_r=_r.append(Yt,yn),isNaN(_r)?yn.set(sn.draw,"."+gn,_r):yn.set(sn.draw,"."+gn,Yt.link(_r),{stable:!0}))}),Object.keys(gr.uniforms).forEach(function(gn){var _r=gr.uniforms[gn].append(Yt,yn);Array.isArray(_r)&&(_r="["+_r.map(function(wr){return isNaN(wr)?wr:Yt.link(wr,{stable:!0})})+"]"),yn.set(sn.uniforms,"["+Yt.link(rr.id(gn),{stable:!0})+"]",_r)}),Object.keys(gr.attributes).forEach(function(gn){var _r=gr.attributes[gn].append(Yt,yn),wr=Yt.scopeAttrib(gn);Object.keys(new ri).forEach(function(Br){yn.set(wr,"."+Br,_r[Br])})}),gr.scopeVAO){var Tn=gr.scopeVAO.append(Yt,yn);isNaN(Tn)?yn.set(sn.vao,".targetVAO",Tn):yn.set(sn.vao,".targetVAO",Yt.link(Tn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(gr.state).length&&(yn(Cn,".dirty=true;"),yn.exit(Cn,".dirty=true;")),yn("a1(",Yt.shared.context,",a0,",Yt.batchId,");")}function _i(Yt){if(typeof Yt=="object"&&!w(Yt)){for(var gr=Object.keys(Yt),un=0;un<gr.length;++un)if(ue.isDynamic(Yt[gr[un]]))return!0;return!1}}function Ka(Yt,gr,un){function yn(An,Yn){Tn.forEach(function(ua){var Sn=sn[ua];ue.isDynamic(Sn)&&(Sn=An.invoke(Yn,Sn),Yn(Br,".",ua,"=",Sn,";"))})}var sn=gr.static[un];if(sn&&_i(sn)){var Cn=Yt.global,Tn=Object.keys(sn),gn=!1,_r=!1,wr=!1,Br=Yt.global.def("{}");Tn.forEach(function(An){var Yn=sn[An];if(ue.isDynamic(Yn))typeof Yn=="function"&&(Yn=sn[An]=ue.unbox(Yn)),An=ie(Yn,null),gn=gn||An.thisDep,wr=wr||An.propDep,_r=_r||An.contextDep;else{switch(Cn(Br,".",An,"="),typeof Yn){case"number":Cn(Yn);break;case"string":Cn('"',Yn,'"');break;case"object":Array.isArray(Yn)&&Cn("[",Yn.join(),"]");break;default:Cn(Yt.link(Yn))}Cn(";")}}),gr.dynamic[un]=new ue.DynamicVariable(4,{thisDep:gn,contextDep:_r,propDep:wr,ref:Br,append:yn}),delete gr.static[un]}}var ri=Et.Record,ei={add:32774,subtract:32778,"reverse subtract":32779};er.ext_blend_minmax&&(ei.min=32775,ei.max=32776);var Sr=er.angle_instanced_arrays,bn=er.webgl_draw_buffers,dn=er.oes_vertex_array_object,Ln={dirty:!0,profile:pt.profile},ra={},ya=[],sa={},Bn={};xt("dither",3024),xt("blend.enable",3042),Lt("blend.color","blendColor",[0,0,0,0]),Lt("blend.equation","blendEquationSeparate",[32774,32774]),Lt("blend.func","blendFuncSeparate",[1,0,1,0]),xt("depth.enable",2929,!0),Lt("depth.func","depthFunc",513),Lt("depth.range","depthRange",[0,1]),Lt("depth.mask","depthMask",!0),Lt("colorMask","colorMask",[!0,!0,!0,!0]),xt("cull.enable",2884),Lt("cull.face","cullFace",1029),Lt("frontFace","frontFace",2305),Lt("lineWidth","lineWidth",1),xt("polygonOffset.enable",32823),Lt("polygonOffset.offset","polygonOffset",[0,0]),xt("sample.alpha",32926),xt("sample.enable",32928),Lt("sample.coverage","sampleCoverage",[1,!1]),xt("stencil.enable",2960),Lt("stencil.mask","stencilMask",-1),Lt("stencil.func","stencilFunc",[519,0,-1]),Lt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Lt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),xt("scissor.enable",3089),Lt("scissor.box","scissor",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]),Lt("viewport","viewport",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]);var Qn={gl:st,context:Le,strings:rr,next:ra,current:Ln,draw:Pe,elements:it,buffer:Mr,shader:Nt,attributes:Et.state,vao:Et,uniforms:ct,framebuffer:ft,extensions:er,timer:ot,isBufferArgs:V},Xa={primTypes:Ge,compareFuncs:Wt,blendFuncs:Xt,blendEquations:ei,stencilOps:sr,glTypes:Ce,orientationType:Gr};bn&&(Xa.backBuffer=[1029],Xa.drawBuffer=o(jt.maxDrawbuffers,function(Yt){return Yt===0?[0]:o(Yt,function(gr){return 36064+gr})}));var mi=0;return{next:ra,current:Ln,procs:function(){var Yt=Zt(),gr=Yt.proc("poll"),un=Yt.proc("refresh"),yn=Yt.block();gr(yn),un(yn);var _r=Yt.shared,sn=_r.gl,Cn=_r.next,Tn=_r.current;yn(Tn,".dirty=false;"),Jt(Yt,gr),Jt(Yt,un,null,!0);var gn;Sr&&(gn=Yt.link(Sr)),er.oes_vertex_array_object&&un(Yt.link(er.oes_vertex_array_object),".bindVertexArrayOES(null);");var _r=un.def(_r.attributes),wr=un.def(0),Br=Yt.cond(wr,".buffer");Br.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",wr,".buffer.buffer);",sn,".vertexAttribPointer(i,",wr,".size,",wr,".type,",wr,".normalized,",wr,".stride,",wr,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",wr,".x,",wr,".y,",wr,".z,",wr,".w);",wr,".buffer=null;");var An=Yt.link(jt.maxAttributes,{stable:!0});return un("for(var i=0;i<",An,";++i){",wr,"=",_r,"[i];",Br,"}"),Sr&&un("for(var i=0;i<",An,";++i){",gn,".vertexAttribDivisorANGLE(i,",_r,"[i].divisor);","}"),un(Yt.shared.vao,".currentVAO=null;",Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"),Object.keys(sa).forEach(function(Yn){var ua=sa[Yn],Sn=yn.def(Cn,".",Yn),na=Yt.block();na("if(",Sn,"){",sn,".enable(",ua,")}else{",sn,".disable(",ua,")}",Tn,".",Yn,"=",Sn,";"),un(na),gr("if(",Sn,"!==",Tn,".",Yn,"){",na,"}")}),Object.keys(Bn).forEach(function(Yn){var ua=Bn[Yn],Sn=Ln[Yn],na,ca,Ma=Yt.block();Ma(sn,".",ua,"("),w(Sn)?(ua=Sn.length,na=Yt.global.def(Cn,".",Yn),ca=Yt.global.def(Tn,".",Yn),Ma(o(ua,function(ka){return na+"["+ka+"]"}),");",o(ua,function(ka){return ca+"["+ka+"]="+na+"["+ka+"];"}).join("")),gr("if(",o(ua,function(ka){return na+"["+ka+"]!=="+ca+"["+ka+"]"}).join("||"),"){",Ma,"}")):(na=yn.def(Cn,".",Yn),ca=yn.def(Tn,".",Yn),Ma(na,");",Tn,".",Yn,"=",na,";"),gr("if(",na,"!==",ca,"){",Ma,"}")),un(Ma)}),Yt.compile()}(),compile:function(Yt,gr,un,yn,sn){var Cn=Zt();Cn.stats=Cn.link(sn),Object.keys(gr.static).forEach(function(gn){Ka(Cn,gr,gn)}),Ht.forEach(function(gn){Ka(Cn,Yt,gn)});var Tn=nt(Yt,gr,un,yn,Cn);return Tn.shader.program&&(Tn.shader.program.attributes.sort(function(gn,_r){return gn.name<_r.name?-1:1}),Tn.shader.program.uniforms.sort(function(gn,_r){return gn.name<_r.name?-1:1})),In(Cn,Tn),Ra(Cn,Tn),ma(Cn,Tn),se(Cn.compile(),{destroy:function(){Tn.shader.program.destroy()}})}}}function ne(st,rr){for(var er=0;er<st.length;++er)if(st[er]===rr)return er;return-1}var se=function(st,rr){for(var er=Object.keys(rr),jt=0;jt<er.length;++jt)st[er[jt]]=rr[er[jt]];return st},_e=0,ue={DynamicVariable:x,define:function(st,rr){return new x(st,M(rr+""))},isDynamic:function(st){return typeof st=="function"&&!st._reglType||st instanceof x},unbox:T,accessor:M},ge={next:typeof requestAnimationFrame=="function"?function(st){return requestAnimationFrame(st)}:function(st){return setTimeout(st,16)},cancel:typeof cancelAnimationFrame=="function"?function(st){return cancelAnimationFrame(st)}:clearTimeout},xe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ye=g();ye.zero=g();var be=function(st,rr){var er=1;rr.ext_texture_filter_anisotropic&&(er=st.getParameter(34047));var jt=1,Mr=1;rr.webgl_draw_buffers&&(jt=st.getParameter(34852),Mr=st.getParameter(36063));var it=!!rr.oes_texture_float;if(it){it=st.createTexture(),st.bindTexture(3553,it),st.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Qe=st.createFramebuffer();if(st.bindFramebuffer(36160,Qe),st.framebufferTexture2D(36160,36064,3553,it,0),st.bindTexture(3553,null),st.checkFramebufferStatus(36160)!==36053)it=!1;else{st.viewport(0,0,1,1),st.clearColor(1,0,0,1),st.clear(16384);var ft=ye.allocType(5126,4);st.readPixels(0,0,1,1,6408,5126,ft),st.getError()?it=!1:(st.deleteFramebuffer(Qe),st.deleteTexture(it),it=ft[0]===1),ye.freeType(ft)}}return ft=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ft=st.createTexture(),Qe=ye.allocType(5121,36),st.activeTexture(33984),st.bindTexture(34067,ft),st.texImage2D(34069,0,6408,3,3,0,6408,5121,Qe),ye.freeType(Qe),st.bindTexture(34067,null),st.deleteTexture(ft),ft=!st.getError()),{colorBits:[st.getParameter(3410),st.getParameter(3411),st.getParameter(3412),st.getParameter(3413)],depthBits:st.getParameter(3414),stencilBits:st.getParameter(3415),subpixelBits:st.getParameter(3408),extensions:Object.keys(rr).filter(function(ct){return!!rr[ct]}),maxAnisotropic:er,maxDrawbuffers:jt,maxColorAttachments:Mr,pointSizeDims:st.getParameter(33901),lineWidthDims:st.getParameter(33902),maxViewportDims:st.getParameter(3386),maxCombinedTextureUnits:st.getParameter(35661),maxCubeMapSize:st.getParameter(34076),maxRenderbufferSize:st.getParameter(34024),maxTextureUnits:st.getParameter(34930),maxTextureSize:st.getParameter(3379),maxAttributes:st.getParameter(34921),maxVertexUniforms:st.getParameter(36347),maxVertexTextureUnits:st.getParameter(35660),maxVaryingVectors:st.getParameter(36348),maxFragmentUniforms:st.getParameter(36349),glsl:st.getParameter(35724),renderer:st.getParameter(7937),vendor:st.getParameter(7936),version:st.getParameter(7938),readFloat:it,npotTextureCube:ft}},Se=function(st){return st instanceof Uint8Array||st instanceof Uint16Array||st instanceof Uint32Array||st instanceof Int8Array||st instanceof Int16Array||st instanceof Int32Array||st instanceof Float32Array||st instanceof Float64Array||st instanceof Uint8ClampedArray},Re=function(st){return Object.keys(st).map(function(rr){return st[rr]})},Ve={shape:function(st){for(var rr=[];st.length;st=st[0])rr.push(st.length);return rr},flatten:function(st,rr,er,jt){var Mr=1;if(rr.length)for(var it=0;it<rr.length;++it)Mr*=rr[it];else Mr=0;switch(er=jt||ye.allocType(er,Mr),rr.length){case 0:break;case 1:for(jt=rr[0],rr=0;rr<jt;++rr)er[rr]=st[rr];break;case 2:for(jt=rr[0],rr=rr[1],it=Mr=0;it<jt;++it)for(var Qe=st[it],ft=0;ft<rr;++ft)er[Mr++]=Qe[ft];break;case 3:c(st,rr[0],rr[1],rr[2],er,0);break;default:m(st,rr,0,er,0)}return er}},Ae={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ze={dynamic:35048,stream:35040,static:35044},Ye=Ve.flatten,ze=Ve.shape,Ie=[];Ie[5120]=1,Ie[5122]=2,Ie[5124]=4,Ie[5121]=1,Ie[5123]=2,Ie[5125]=4,Ie[5126]=4;var Ge={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},dt=new Float32Array(1),Rt=new Uint32Array(dt.buffer),Qt=[9984,9986,9985,9987],Bt=[0,6409,6410,6407,6408],Ct={};Ct[6409]=Ct[6406]=Ct[6402]=1,Ct[34041]=Ct[6410]=2,Ct[6407]=Ct[35904]=3,Ct[6408]=Ct[35906]=4;var Kt=h("HTMLCanvasElement"),Ot=h("OffscreenCanvas"),St=h("CanvasRenderingContext2D"),Xe=h("ImageBitmap"),at=h("HTMLImageElement"),We=h("HTMLVideoElement"),Ee=Object.keys(Ae).concat([Kt,Ot,St,Xe,at,We]),He=[];He[5121]=1,He[5126]=4,He[36193]=2,He[5123]=2,He[5125]=4;var Ke=[];Ke[32854]=2,Ke[32855]=2,Ke[36194]=2,Ke[34041]=4,Ke[33776]=.5,Ke[33777]=.5,Ke[33778]=1,Ke[33779]=1,Ke[35986]=.5,Ke[35987]=1,Ke[34798]=1,Ke[35840]=.5,Ke[35841]=.25,Ke[35842]=.5,Ke[35843]=.25,Ke[36196]=.5;var et=[];et[32854]=2,et[32855]=2,et[36194]=2,et[33189]=2,et[36168]=1,et[34041]=4,et[35907]=4,et[34836]=16,et[34842]=8,et[34843]=6;var At=function(st,rr,er,jt,Mr){function it(Pe){this.id=Et++,this.refCount=1,this.renderbuffer=Pe,this.format=32854,this.height=this.width=0,Mr.profile&&(this.stats={size:0})}function Qe(Pe){var Le=Pe.renderbuffer;st.bindRenderbuffer(36161,null),st.deleteRenderbuffer(Le),Pe.renderbuffer=null,Pe.refCount=0,delete Nt[Pe.id],jt.renderbufferCount--}var ft={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};rr.ext_srgb&&(ft.srgba=35907),rr.ext_color_buffer_half_float&&(ft.rgba16f=34842,ft.rgb16f=34843),rr.webgl_color_buffer_float&&(ft.rgba32f=34836);var ct=[];Object.keys(ft).forEach(function(Pe){ct[ft[Pe]]=Pe});var Et=0,Nt={};return it.prototype.decRef=function(){0>=--this.refCount&&Qe(this)},Mr.profile&&(jt.getTotalRenderbufferSize=function(){var Pe=0;return Object.keys(Nt).forEach(function(Le){Pe+=Nt[Le].stats.size}),Pe}),{create:function(Pe,Le){function ot(pt,Pt){var xt=0,Lt=0,Zt=32854;if(typeof pt=="object"&&pt?("shape"in pt?(Lt=pt.shape,xt=Lt[0]|0,Lt=Lt[1]|0):("radius"in pt&&(xt=Lt=pt.radius|0),"width"in pt&&(xt=pt.width|0),"height"in pt&&(Lt=pt.height|0)),"format"in pt&&(Zt=ft[pt.format])):typeof pt=="number"?(xt=pt|0,Lt=typeof Pt=="number"?Pt|0:xt):pt||(xt=Lt=1),xt!==ut.width||Lt!==ut.height||Zt!==ut.format)return ot.width=ut.width=xt,ot.height=ut.height=Lt,ut.format=Zt,st.bindRenderbuffer(36161,ut.renderbuffer),st.renderbufferStorage(36161,Zt,xt,Lt),Mr.profile&&(ut.stats.size=et[ut.format]*ut.width*ut.height),ot.format=ct[ut.format],ot}var ut=new it(st.createRenderbuffer());return Nt[ut.id]=ut,jt.renderbufferCount++,ot(Pe,Le),ot.resize=function(pt,Pt){var xt=pt|0,Lt=Pt|0||xt;return xt===ut.width&&Lt===ut.height||(ot.width=ut.width=xt,ot.height=ut.height=Lt,st.bindRenderbuffer(36161,ut.renderbuffer),st.renderbufferStorage(36161,ut.format,xt,Lt),Mr.profile&&(ut.stats.size=et[ut.format]*ut.width*ut.height)),ot},ot._reglType="renderbuffer",ot._renderbuffer=ut,Mr.profile&&(ot.stats=ut.stats),ot.destroy=function(){ut.decRef()},ot},clear:function(){Re(Nt).forEach(Qe)},restore:function(){Re(Nt).forEach(function(Pe){Pe.renderbuffer=st.createRenderbuffer(),st.bindRenderbuffer(36161,Pe.renderbuffer),st.renderbufferStorage(36161,Pe.format,Pe.width,Pe.height)}),st.bindRenderbuffer(36161,null)}}},mt=[];mt[6408]=4,mt[6407]=3;var Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2;var Gt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],zt=["x","y","z","w"],Ht="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Xt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},sr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Gr={cw:2304,ccw:2305},cn=new re(!1,!1,!1,function(){}),en=function(st,rr){function er(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function jt(Nt,Pe,Le){var ot=Qe.pop()||new er;ot.startQueryIndex=Nt,ot.endQueryIndex=Pe,ot.sum=0,ot.stats=Le,ft.push(ot)}if(!rr.ext_disjoint_timer_query)return null;var Mr=[],it=[],Qe=[],ft=[],ct=[],Et=[];return{beginQuery:function(Nt){var Pe=Mr.pop()||rr.ext_disjoint_timer_query.createQueryEXT();rr.ext_disjoint_timer_query.beginQueryEXT(35007,Pe),it.push(Pe),jt(it.length-1,it.length,Nt)},endQuery:function(){rr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:jt,update:function(){var Nt,Pe;if(Nt=it.length,Nt!==0){Et.length=Math.max(Et.length,Nt+1),ct.length=Math.max(ct.length,Nt+1),ct[0]=0;var Le=Et[0]=0;for(Pe=Nt=0;Pe<it.length;++Pe){var ot=it[Pe];rr.ext_disjoint_timer_query.getQueryObjectEXT(ot,34919)?(Le+=rr.ext_disjoint_timer_query.getQueryObjectEXT(ot,34918),Mr.push(ot)):it[Nt++]=ot,ct[Pe+1]=Le,Et[Pe+1]=Nt}for(it.length=Nt,Pe=Nt=0;Pe<ft.length;++Pe){var Le=ft[Pe],ut=Le.startQueryIndex,ot=Le.endQueryIndex;Le.sum+=ct[ot]-ct[ut],ut=Et[ut],ot=Et[ot],ot===ut?(Le.stats.gpuTime+=Le.sum/1e6,Qe.push(Le)):(Le.startQueryIndex=ut,Le.endQueryIndex=ot,ft[Nt++]=Le)}ft.length=Nt}},getNumPendingQueries:function(){return it.length},clear:function(){Mr.push.apply(Mr,it);for(var Nt=0;Nt<Mr.length;Nt++)rr.ext_disjoint_timer_query.deleteQueryEXT(Mr[Nt]);it.length=0,Mr.length=0},restore:function(){it.length=0,Mr.length=0}}};return function(st){function rr(){if(Dr.length===0)Zt&&Zt.update(),mn=null;else{mn=ge.next(rr),Nt();for(var In=Dr.length-1;0<=In;--In){var $n=Dr[In];$n&&$n(Ar,null,0)}ot.flush(),Zt&&Zt.update()}}function er(){!mn&&0<Dr.length&&(mn=ge.next(rr))}function jt(){mn&&(ge.cancel(rr),mn=null)}function Mr(In){In.preventDefault(),jt(),Er.forEach(function($n){$n()})}function it(In){ot.getError(),pt.restore(),Hr.restore(),lr.restore(),Lr.restore(),nt.restore(),It.restore(),Or.restore(),Zt&&Zt.restore(),Jt.procs.refresh(),er(),jr.forEach(function($n){$n()})}function Qe(In){function $n(Ln,ra){var ya={},sa={};return Object.keys(Ln).forEach(function(Bn){var Qn=Ln[Bn];if(ue.isDynamic(Qn))sa[Bn]=ue.unbox(Qn,Bn);else{if(ra&&Array.isArray(Qn)){for(var Xa=0;Xa<Qn.length;++Xa)if(ue.isDynamic(Qn[Xa])){sa[Bn]=ue.unbox(Qn,Bn);return}}ya[Bn]=Qn}}),{dynamic:sa,static:ya}}function Kn(Ln){for(;dn.length<Ln;)dn.push(null);return dn}var ma=$n(In.context||{},!0),Ra=$n(In.uniforms||{},!0),_i=$n(In.attributes||{},!1);In=$n(function(Ln){function ra(sa){if(sa in ya){var Bn=ya[sa];delete ya[sa],Object.keys(Bn).forEach(function(Qn){ya[sa+"."+Qn]=Bn[Qn]})}}var ya=se({},Ln);return delete ya.uniforms,delete ya.attributes,delete ya.context,delete ya.vao,"stencil"in ya&&ya.stencil.op&&(ya.stencil.opBack=ya.stencil.opFront=ya.stencil.op,delete ya.stencil.op),ra("blend"),ra("depth"),ra("cull"),ra("stencil"),ra("polygonOffset"),ra("scissor"),ra("sample"),"vao"in Ln&&(ya.vao=Ln.vao),ya}(In),!1);var Ka={gpuTime:0,cpuTime:0,count:0},ri=Jt.compile(In,_i,Ra,ma,Ka),ei=ri.draw,Sr=ri.batch,bn=ri.scope,dn=[];return se(function(Ln,ra){var ya;if(typeof Ln=="function")return bn.call(this,null,Ln,0);if(typeof ra=="function")if(typeof Ln=="number")for(ya=0;ya<Ln;++ya)bn.call(this,null,ra,ya);else if(Array.isArray(Ln))for(ya=0;ya<Ln.length;++ya)bn.call(this,Ln[ya],ra,ya);else return bn.call(this,Ln,ra,0);else if(typeof Ln=="number"){if(0<Ln)return Sr.call(this,Kn(Ln|0),Ln|0)}else if(Array.isArray(Ln)){if(Ln.length)return Sr.call(this,Ln,Ln.length)}else return ei.call(this,Ln)},{stats:Ka,destroy:function(){ri.destroy()}})}function ft(In,$n){var Kn=0;Jt.procs.poll();var ma=$n.color;ma&&(ot.clearColor(+ma[0]||0,+ma[1]||0,+ma[2]||0,+ma[3]||0),Kn|=16384),"depth"in $n&&(ot.clearDepth(+$n.depth),Kn|=256),"stencil"in $n&&(ot.clearStencil($n.stencil|0),Kn|=1024),ot.clear(Kn)}function ct(In){return Dr.push(In),er(),{cancel:function(){function $n(){var ma=ne(Dr,$n);Dr[ma]=Dr[Dr.length-1],--Dr.length,0>=Dr.length&&jt()}var Kn=ne(Dr,In);Dr[Kn]=$n}}}function Et(){var In=Nr.viewport,$n=Nr.scissor_box;In[0]=In[1]=$n[0]=$n[1]=0,Ar.viewportWidth=Ar.framebufferWidth=Ar.drawingBufferWidth=In[2]=$n[2]=ot.drawingBufferWidth,Ar.viewportHeight=Ar.framebufferHeight=Ar.drawingBufferHeight=In[3]=$n[3]=ot.drawingBufferHeight}function Nt(){Ar.tick+=1,Ar.time=Le(),Et(),Jt.procs.poll()}function Pe(){Lr.refresh(),Et(),Jt.procs.refresh(),Zt&&Zt.update()}function Le(){return(xe()-ur)/1e3}if(st=v(st),!st)return null;var ot=st.gl,ut=ot.getContextAttributes();ot.isContextLost();var pt=s(ot,st);if(!pt)return null;var fr=e(),Pt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xt=st.cachedCode||{},Lt=pt.extensions,Zt=en(ot,Lt),ur=xe(),kr=ot.drawingBufferWidth,Pr=ot.drawingBufferHeight,Ar={tick:0,time:0,viewportWidth:kr,viewportHeight:Pr,framebufferWidth:kr,framebufferHeight:Pr,drawingBufferWidth:kr,drawingBufferHeight:Pr,pixelRatio:st.pixelRatio},kr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Zr=be(ot,Lt),lr=A(ot,Pt,st,function(In){return Or.destroyBuffer(In)}),br=_(ot,Lt,lr,Pt),Or=z(ot,Lt,Zr,Pt,lr,br,kr),Hr=H(ot,fr,Pt,st),Lr=D(ot,Lt,Zr,function(){Jt.procs.poll()},Ar,Pt,st),nt=At(ot,Lt,Zr,Pt,st),It=R(ot,Lt,Zr,Lr,nt,Pt),Jt=oe(ot,fr,Lt,Zr,lr,br,Lr,It,{},Or,Hr,kr,Ar,Zt,xt,st),fr=Y(ot,It,Jt.procs.poll,Ar),Nr=Jt.next,Vr=ot.canvas,Dr=[],Er=[],jr=[],kn=[st.onDestroy],mn=null;Vr&&(Vr.addEventListener("webglcontextlost",Mr,!1),Vr.addEventListener("webglcontextrestored",it,!1));var Wn=It.setFBO=Qe({framebuffer:ue.define.call(null,1,"framebuffer")});return Pe(),ut=se(Qe,{clear:function(In){if("framebuffer"in In)if(In.framebuffer&&In.framebuffer_reglType==="framebufferCube")for(var $n=0;6>$n;++$n)Wn(se({framebuffer:In.framebuffer.faces[$n]},In),ft);else Wn(In,ft);else ft(null,In)},prop:ue.define.bind(null,1),context:ue.define.bind(null,2),this:ue.define.bind(null,3),draw:Qe({}),buffer:function(In){return lr.create(In,34962,!1,!1)},elements:function(In){return br.create(In,!1)},texture:Lr.create2D,cube:Lr.createCube,renderbuffer:nt.create,framebuffer:It.create,framebufferCube:It.createCube,vao:Or.createVAO,attributes:ut,frame:ct,on:function(In,$n){var Kn;switch(In){case"frame":return ct($n);case"lost":Kn=Er;break;case"restore":Kn=jr;break;case"destroy":Kn=kn}return Kn.push($n),{cancel:function(){for(var ma=0;ma<Kn.length;++ma)if(Kn[ma]===$n){Kn[ma]=Kn[Kn.length-1],Kn.pop();break}}}},limits:Zr,hasExtension:function(In){return 0<=Zr.extensions.indexOf(In.toLowerCase())},read:fr,destroy:function(){Dr.length=0,jt(),Vr&&(Vr.removeEventListener("webglcontextlost",Mr),Vr.removeEventListener("webglcontextrestored",it)),Hr.clear(),It.clear(),nt.clear(),Or.clear(),Lr.clear(),br.clear(),lr.clear(),Zt&&Zt.clear(),kn.forEach(function(In){In()})},_gl:ot,_refresh:Pe,poll:function(){Nt(),Zt&&Zt.update()},now:Le,stats:Pt,getCachedCode:function(){return xt},preloadCachedCode:function(In){Object.entries(In).forEach(function($n){xt[$n[0]]=$n[1]})}}),st.onDone(null,ut),ut}})},{}],285:[function(t,B,G){var x=t("buffer"),f=x.Buffer;function M(e,a){for(var i in e)a[i]=e[i]}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?B.exports=x:(M(x,G),G.Buffer=T);function T(e,a,i){return f(e,a,i)}T.prototype=Object.create(f.prototype),M(f,T),T.from=function(e,a,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return f(e,a,i)},T.alloc=function(e,a,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=f(e);return a!==void 0?typeof i=="string"?n.fill(a,i):n.fill(a):n.fill(0),n},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return f(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return x.SlowBuffer(e)}},{buffer:85}],286:[function(t,B,G){B.exports=M;var x=t("events").EventEmitter,f=t("inherits");f(M,x),M.Readable=t("readable-stream/lib/_stream_readable.js"),M.Writable=t("readable-stream/lib/_stream_writable.js"),M.Duplex=t("readable-stream/lib/_stream_duplex.js"),M.Transform=t("readable-stream/lib/_stream_transform.js"),M.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),M.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),M.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),M.Stream=M;function M(){x.call(this)}M.prototype.pipe=function(T,e){var a=this;function i(g){T.writable&&T.write(g)===!1&&a.pause&&a.pause()}a.on("data",i);function n(){a.readable&&a.resume&&a.resume()}T.on("drain",n),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",v),a.on("close",s));var r=!1;function v(){r||(r=!0,T.end())}function s(){r||(r=!0,typeof T.destroy=="function"&&T.destroy())}function o(g){if(b(),x.listenerCount(this,"error")===0)throw g}a.on("error",o),T.on("error",o);function b(){a.removeListener("data",i),T.removeListener("drain",n),a.removeListener("end",v),a.removeListener("close",s),a.removeListener("error",o),T.removeListener("error",o),a.removeListener("end",b),a.removeListener("close",b),T.removeListener("close",b)}return a.on("end",b),a.on("close",b),T.on("close",b),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(t,B,G){function x(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var f={};function M(n,r,v){v||(v=Error);function s(b,g,d){return typeof r=="string"?r:r(b,g,d)}var o=function(b){x(g,b);function g(d,c,m){return b.call(this,s(d,c,m))||this}return g}(v);o.prototype.name=v.name,o.prototype.code=n,f[n]=o}function T(n,r){if(Array.isArray(n)){var v=n.length;return n=n.map(function(s){return String(s)}),v>2?"one of ".concat(r," ").concat(n.slice(0,v-1).join(", "),", or ")+n[v-1]:v===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function e(n,r,v){return n.substr(!v||v<0?0:+v,r.length)===r}function a(n,r,v){return(v===void 0||v>n.length)&&(v=n.length),n.substring(v-r.length,v)===r}function i(n,r,v){return typeof v!="number"&&(v=0),v+r.length>n.length?!1:n.indexOf(r,v)!==-1}M("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(n,r,v){var s;typeof r=="string"&&e(r,"not ")?(s="must not be",r=r.replace(/^not /,"")):s="must be";var o;if(a(n," argument"))o="The ".concat(n," ").concat(s," ").concat(T(r,"type"));else{var b=i(n,".")?"property":"argument";o='The "'.concat(n,'" ').concat(b," ").concat(s," ").concat(T(r,"type"))}return o+=". Received type ".concat(typeof v),o},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),B.exports.codes=f},{}],288:[function(t,B,G){(function(x){(function(){var f=Object.keys||function(s){var o=[];for(var b in s)o.push(b);return o};B.exports=n;var M=t("./_stream_readable"),T=t("./_stream_writable");t("inherits")(n,M);for(var e=f(T.prototype),a=0;a<e.length;a++){var i=e[a];n.prototype[i]||(n.prototype[i]=T.prototype[i])}function n(s){if(!(this instanceof n))return new n(s);M.call(this,s),T.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||x.nextTick(v,this)}function v(s){s.end()}Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(t,B,G){B.exports=f;var x=t("./_stream_transform");t("inherits")(f,x);function f(M){if(!(this instanceof f))return new f(M);x.call(this,M)}f.prototype._transform=function(M,T,e){e(null,M)}},{"./_stream_transform":291,inherits:231}],290:[function(t,B,G){(function(x,f){(function(){B.exports=S;var M;S.ReadableState=E,t("events").EventEmitter;var T=function(ie,oe){return ie.listeners(oe).length},e=t("./internal/streams/stream"),a=t("buffer").Buffer,i=f.Uint8Array||function(){};function n(Q){return a.from(Q)}function r(Q){return a.isBuffer(Q)||Q instanceof i}var v=t("util"),s;v&&v.debuglog?s=v.debuglog("stream"):s=function(){};var o=t("./internal/streams/buffer_list"),b=t("./internal/streams/destroy"),g=t("./internal/streams/state"),d=g.getHighWaterMark,c=t("../errors").codes,m=c.ERR_INVALID_ARG_TYPE,l=c.ERR_STREAM_PUSH_AFTER_EOF,y=c.ERR_METHOD_NOT_IMPLEMENTED,u=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,_,p;t("inherits")(S,e);var w=b.errorOrDestroy,h=["error","close","destroy","pause","resume"];function L(Q,ie,oe){if(typeof Q.prependListener=="function")return Q.prependListener(ie,oe);!Q._events||!Q._events[ie]?Q.on(ie,oe):Array.isArray(Q._events[ie])?Q._events[ie].unshift(oe):Q._events[ie]=[oe,Q._events[ie]]}function E(Q,ie,oe){M=M||t("./_stream_duplex"),Q=Q||{},typeof oe!="boolean"&&(oe=ie instanceof M),this.objectMode=!!Q.objectMode,oe&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=d(this,Q,"readableHighWaterMark",oe),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(A||(A=t("string_decoder/").StringDecoder),this.decoder=new A(Q.encoding),this.encoding=Q.encoding)}function S(Q){if(M=M||t("./_stream_duplex"),!(this instanceof S))return new S(Q);var ie=this instanceof M;this._readableState=new E(Q,this,ie),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),e.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ie){!this._readableState||(this._readableState.destroyed=ie)}}),S.prototype.destroy=b.destroy,S.prototype._undestroy=b.undestroy,S.prototype._destroy=function(Q,ie){ie(Q)},S.prototype.push=function(Q,ie){var oe=this._readableState,ne;return oe.objectMode?ne=!0:typeof Q=="string"&&(ie=ie||oe.defaultEncoding,ie!==oe.encoding&&(Q=a.from(Q,ie),ie=""),ne=!0),P(this,Q,ie,!1,ne)},S.prototype.unshift=function(Q){return P(this,Q,null,!0,!1)};function P(Q,ie,oe,ne,se){s("readableAddChunk",ie);var _e=Q._readableState;if(ie===null)_e.reading=!1,z(Q,_e);else{var ue;if(se||(ue=I(_e,ie)),ue)w(Q,ue);else if(_e.objectMode||ie&&ie.length>0)if(typeof ie!="string"&&!_e.objectMode&&Object.getPrototypeOf(ie)!==a.prototype&&(ie=n(ie)),ne)_e.endEmitted?w(Q,new u):F(Q,_e,ie,!0);else if(_e.ended)w(Q,new l);else{if(_e.destroyed)return!1;_e.reading=!1,_e.decoder&&!oe?(ie=_e.decoder.write(ie),_e.objectMode||ie.length!==0?F(Q,_e,ie,!1):ee(Q,_e)):F(Q,_e,ie,!1)}else ne||(_e.reading=!1,ee(Q,_e))}return!_e.ended&&(_e.length<_e.highWaterMark||_e.length===0)}function F(Q,ie,oe,ne){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,Q.emit("data",oe)):(ie.length+=ie.objectMode?1:oe.length,ne?ie.buffer.unshift(oe):ie.buffer.push(oe),ie.needReadable&&H(Q)),ee(Q,ie)}function I(Q,ie){var oe;return!r(ie)&&typeof ie!="string"&&ie!==void 0&&!Q.objectMode&&(oe=new m("chunk",["string","Buffer","Uint8Array"],ie)),oe}S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(Q){A||(A=t("string_decoder/").StringDecoder);var ie=new A(Q);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var oe=this._readableState.buffer.head,ne="";oe!==null;)ne+=ie.write(oe.data),oe=oe.next;return this._readableState.buffer.clear(),ne!==""&&this._readableState.buffer.push(ne),this._readableState.length=ne.length,this};var D=1073741824;function R(Q){return Q>=D?Q=D:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function O(Q,ie){return Q<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:Q!==Q?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:(Q>ie.highWaterMark&&(ie.highWaterMark=R(Q)),Q<=ie.length?Q:ie.ended?ie.length:(ie.needReadable=!0,0))}S.prototype.read=function(Q){s("read",Q),Q=parseInt(Q,10);var ie=this._readableState,oe=Q;if(Q!==0&&(ie.emittedReadable=!1),Q===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return s("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?q(this):H(this),null;if(Q=O(Q,ie),Q===0&&ie.ended)return ie.length===0&&q(this),null;var ne=ie.needReadable;s("need readable",ne),(ie.length===0||ie.length-Q<ie.highWaterMark)&&(ne=!0,s("length less than watermark",ne)),ie.ended||ie.reading?(ne=!1,s("reading or ended",ne)):ne&&(s("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||(Q=O(oe,ie)));var se;return Q>0?se=V(Q,ie):se=null,se===null?(ie.needReadable=ie.length<=ie.highWaterMark,Q=0):(ie.length-=Q,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),oe!==Q&&ie.ended&&q(this)),se!==null&&this.emit("data",se),se};function z(Q,ie){if(s("onEofChunk"),!ie.ended){if(ie.decoder){var oe=ie.decoder.end();oe&&oe.length&&(ie.buffer.push(oe),ie.length+=ie.objectMode?1:oe.length)}ie.ended=!0,ie.sync?H(Q):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,Y(Q)))}}function H(Q){var ie=Q._readableState;s("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(s("emitReadable",ie.flowing),ie.emittedReadable=!0,x.nextTick(Y,Q))}function Y(Q){var ie=Q._readableState;s("emitReadable_",ie.destroyed,ie.length,ie.ended),!ie.destroyed&&(ie.length||ie.ended)&&(Q.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,U(Q)}function ee(Q,ie){ie.readingMore||(ie.readingMore=!0,x.nextTick(j,Q,ie))}function j(Q,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var oe=ie.length;if(s("maybeReadMore read 0"),Q.read(0),oe===ie.length)break}ie.readingMore=!1}S.prototype._read=function(Q){w(this,new y("_read()"))},S.prototype.pipe=function(Q,ie){var oe=this,ne=this._readableState;switch(ne.pipesCount){case 0:ne.pipes=Q;break;case 1:ne.pipes=[ne.pipes,Q];break;default:ne.pipes.push(Q);break}ne.pipesCount+=1,s("pipe count=%d opts=%j",ne.pipesCount,ie);var se=(!ie||ie.end!==!1)&&Q!==x.stdout&&Q!==x.stderr,_e=se?ge:Ce;ne.endEmitted?x.nextTick(_e):oe.once("end",_e),Q.on("unpipe",ue);function ue(Ze,Ye){s("onunpipe"),Ze===oe&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,be())}function ge(){s("onend"),Q.end()}var xe=X(oe);Q.on("drain",xe);var ye=!1;function be(){s("cleanup"),Q.removeListener("close",Ve),Q.removeListener("finish",Ae),Q.removeListener("drain",xe),Q.removeListener("error",Re),Q.removeListener("unpipe",ue),oe.removeListener("end",ge),oe.removeListener("end",Ce),oe.removeListener("data",Se),ye=!0,ne.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&xe()}oe.on("data",Se);function Se(Ze){s("ondata");var Ye=Q.write(Ze);s("dest.write",Ye),Ye===!1&&((ne.pipesCount===1&&ne.pipes===Q||ne.pipesCount>1&&Z(ne.pipes,Q)!==-1)&&!ye&&(s("false write response, pause",ne.awaitDrain),ne.awaitDrain++),oe.pause())}function Re(Ze){s("onerror",Ze),Ce(),Q.removeListener("error",Re),T(Q,"error")===0&&w(Q,Ze)}L(Q,"error",Re);function Ve(){Q.removeListener("finish",Ae),Ce()}Q.once("close",Ve);function Ae(){s("onfinish"),Q.removeListener("close",Ve),Ce()}Q.once("finish",Ae);function Ce(){s("unpipe"),oe.unpipe(Q)}return Q.emit("pipe",oe),ne.flowing||(s("pipe resume"),oe.resume()),Q};function X(Q){return function(){var oe=Q._readableState;s("pipeOnDrain",oe.awaitDrain),oe.awaitDrain&&oe.awaitDrain--,oe.awaitDrain===0&&T(Q,"data")&&(oe.flowing=!0,U(Q))}}S.prototype.unpipe=function(Q){var ie=this._readableState,oe={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return Q&&Q!==ie.pipes?this:(Q||(Q=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,Q&&Q.emit("unpipe",this,oe),this);if(!Q){var ne=ie.pipes,se=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var _e=0;_e<se;_e++)ne[_e].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=Z(ie.pipes,Q);return ue===-1?this:(ie.pipes.splice(ue,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),Q.emit("unpipe",this,oe),this)},S.prototype.on=function(Q,ie){var oe=e.prototype.on.call(this,Q,ie),ne=this._readableState;return Q==="data"?(ne.readableListening=this.listenerCount("readable")>0,ne.flowing!==!1&&this.resume()):Q==="readable"&&!ne.endEmitted&&!ne.readableListening&&(ne.readableListening=ne.needReadable=!0,ne.flowing=!1,ne.emittedReadable=!1,s("on readable",ne.length,ne.reading),ne.length?H(this):ne.reading||x.nextTick(fe,this)),oe},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(Q,ie){var oe=e.prototype.removeListener.call(this,Q,ie);return Q==="readable"&&x.nextTick(ae,this),oe},S.prototype.removeAllListeners=function(Q){var ie=e.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&x.nextTick(ae,this),ie};function ae(Q){var ie=Q._readableState;ie.readableListening=Q.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function fe(Q){s("readable nexttick read 0"),Q.read(0)}S.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(s("resume"),Q.flowing=!Q.readableListening,K(this,Q)),Q.paused=!1,this};function K(Q,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,x.nextTick(J,Q,ie))}function J(Q,ie){s("resume",ie.reading),ie.reading||Q.read(0),ie.resumeScheduled=!1,Q.emit("resume"),U(Q),ie.flowing&&!ie.reading&&Q.read(0)}S.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(Q){var ie=Q._readableState;for(s("flow",ie.flowing);ie.flowing&&Q.read()!==null;);}S.prototype.wrap=function(Q){var ie=this,oe=this._readableState,ne=!1;Q.on("end",function(){if(s("wrapped end"),oe.decoder&&!oe.ended){var ue=oe.decoder.end();ue&&ue.length&&ie.push(ue)}ie.push(null)}),Q.on("data",function(ue){if(s("wrapped data"),oe.decoder&&(ue=oe.decoder.write(ue)),!(oe.objectMode&&ue==null)&&!(!oe.objectMode&&(!ue||!ue.length))){var ge=ie.push(ue);ge||(ne=!0,Q.pause())}});for(var se in Q)this[se]===void 0&&typeof Q[se]=="function"&&(this[se]=function(ge){return function(){return Q[ge].apply(Q,arguments)}}(se));for(var _e=0;_e<h.length;_e++)Q.on(h[_e],this.emit.bind(this,h[_e]));return this._read=function(ue){s("wrapped _read",ue),ne&&(ne=!1,Q.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=t("./internal/streams/async_iterator")),_(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}}),S._fromList=V,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function V(Q,ie){if(ie.length===0)return null;var oe;return ie.objectMode?oe=ie.buffer.shift():!Q||Q>=ie.length?(ie.decoder?oe=ie.buffer.join(""):ie.buffer.length===1?oe=ie.buffer.first():oe=ie.buffer.concat(ie.length),ie.buffer.clear()):oe=ie.buffer.consume(Q,ie.decoder),oe}function q(Q){var ie=Q._readableState;s("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,x.nextTick(re,ie,Q))}function re(Q,ie){if(s("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,ie.readable=!1,ie.emit("end"),Q.autoDestroy)){var oe=ie._writableState;(!oe||oe.autoDestroy&&oe.finished)&&ie.destroy()}}typeof Symbol=="function"&&(S.from=function(Q,ie){return p===void 0&&(p=t("./internal/streams/from")),p(S,Q,ie)});function Z(Q,ie){for(var oe=0,ne=Q.length;oe<ne;oe++)if(Q[oe]===ie)return oe;return-1}}).call(this)}).call(this,t("_process"),typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(t,B,G){B.exports=n;var x=t("../errors").codes,f=x.ERR_METHOD_NOT_IMPLEMENTED,M=x.ERR_MULTIPLE_CALLBACK,T=x.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=x.ERR_TRANSFORM_WITH_LENGTH_0,a=t("./_stream_duplex");t("inherits")(n,a);function i(s,o){var b=this._transformState;b.transforming=!1;var g=b.writecb;if(g===null)return this.emit("error",new M);b.writechunk=null,b.writecb=null,o!=null&&this.push(o),g(s);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function n(s){if(!(this instanceof n))return new n(s);a.call(this,s),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,b){v(s,o,b)}):v(this,null,null)}n.prototype.push=function(s,o){return this._transformState.needTransform=!1,a.prototype.push.call(this,s,o)},n.prototype._transform=function(s,o,b){b(new f("_transform()"))},n.prototype._write=function(s,o,b){var g=this._transformState;if(g.writecb=b,g.writechunk=s,g.writeencoding=o,!g.transforming){var d=this._readableState;(g.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},n.prototype._read=function(s){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},n.prototype._destroy=function(s,o){a.prototype._destroy.call(this,s,function(b){o(b)})};function v(s,o,b){if(o)return s.emit("error",o);if(b!=null&&s.push(b),s._writableState.length)throw new e;if(s._transformState.transforming)throw new T;return s.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(t,B,G){(function(x,f){(function(){B.exports=E;function M(U){var V=this;this.next=null,this.entry=null,this.finish=function(){J(V,U)}}var T;E.WritableState=h;var e={deprecate:t("util-deprecate")},a=t("./internal/streams/stream"),i=t("buffer").Buffer,n=f.Uint8Array||function(){};function r(U){return i.from(U)}function v(U){return i.isBuffer(U)||U instanceof n}var s=t("./internal/streams/destroy"),o=t("./internal/streams/state"),b=o.getHighWaterMark,g=t("../errors").codes,d=g.ERR_INVALID_ARG_TYPE,c=g.ERR_METHOD_NOT_IMPLEMENTED,m=g.ERR_MULTIPLE_CALLBACK,l=g.ERR_STREAM_CANNOT_PIPE,y=g.ERR_STREAM_DESTROYED,u=g.ERR_STREAM_NULL_VALUES,A=g.ERR_STREAM_WRITE_AFTER_END,_=g.ERR_UNKNOWN_ENCODING,p=s.errorOrDestroy;t("inherits")(E,a);function w(){}function h(U,V,q){T=T||t("./_stream_duplex"),U=U||{},typeof q!="boolean"&&(q=V instanceof T),this.objectMode=!!U.objectMode,q&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=b(this,U,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=U.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){z(V,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}h.prototype.getBuffer=function(){for(var V=this.bufferedRequest,q=[];V;)q.push(V),V=V.next;return q},function(){try{Object.defineProperty(h.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(V){return L.call(this,V)?!0:this!==E?!1:V&&V._writableState instanceof h}})):L=function(V){return V instanceof this};function E(U){T=T||t("./_stream_duplex");var V=this instanceof T;if(!V&&!L.call(E,this))return new E(U);this._writableState=new h(U,this,V),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),a.call(this)}E.prototype.pipe=function(){p(this,new l)};function S(U,V){var q=new A;p(U,q),x.nextTick(V,q)}function P(U,V,q,re){var Z;return q===null?Z=new u:typeof q!="string"&&!V.objectMode&&(Z=new d("chunk",["string","Buffer"],q)),Z?(p(U,Z),x.nextTick(re,Z),!1):!0}E.prototype.write=function(U,V,q){var re=this._writableState,Z=!1,Q=!re.objectMode&&v(U);return Q&&!i.isBuffer(U)&&(U=r(U)),typeof V=="function"&&(q=V,V=null),Q?V="buffer":V||(V=re.defaultEncoding),typeof q!="function"&&(q=w),re.ending?S(this,q):(Q||P(this,re,U,q))&&(re.pendingcb++,Z=I(this,re,Q,U,V,q)),Z},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&ee(this,U))},E.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=V.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((V+"").toLowerCase())>-1))throw new _(V);return this._writableState.defaultEncoding=V,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(U,V,q){return!U.objectMode&&U.decodeStrings!==!1&&typeof V=="string"&&(V=i.from(V,q)),V}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(U,V,q,re,Z,Q){if(!q){var ie=F(V,re,Z);re!==ie&&(q=!0,Z="buffer",re=ie)}var oe=V.objectMode?1:re.length;V.length+=oe;var ne=V.length<V.highWaterMark;if(ne||(V.needDrain=!0),V.writing||V.corked){var se=V.lastBufferedRequest;V.lastBufferedRequest={chunk:re,encoding:Z,isBuf:q,callback:Q,next:null},se?se.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else D(U,V,!1,oe,re,Z,Q);return ne}function D(U,V,q,re,Z,Q,ie){V.writelen=re,V.writecb=ie,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new y("write")):q?U._writev(Z,V.onwrite):U._write(Z,Q,V.onwrite),V.sync=!1}function R(U,V,q,re,Z){--V.pendingcb,q?(x.nextTick(Z,re),x.nextTick(fe,U,V),U._writableState.errorEmitted=!0,p(U,re)):(Z(re),U._writableState.errorEmitted=!0,p(U,re),fe(U,V))}function O(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function z(U,V){var q=U._writableState,re=q.sync,Z=q.writecb;if(typeof Z!="function")throw new m;if(O(q),V)R(U,q,re,V,Z);else{var Q=j(q)||U.destroyed;!Q&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&ee(U,q),re?x.nextTick(H,U,q,Q,Z):H(U,q,Q,Z)}}function H(U,V,q,re){q||Y(U,V),V.pendingcb--,re(),fe(U,V)}function Y(U,V){V.length===0&&V.needDrain&&(V.needDrain=!1,U.emit("drain"))}function ee(U,V){V.bufferProcessing=!0;var q=V.bufferedRequest;if(U._writev&&q&&q.next){var re=V.bufferedRequestCount,Z=new Array(re),Q=V.corkedRequestsFree;Q.entry=q;for(var ie=0,oe=!0;q;)Z[ie]=q,q.isBuf||(oe=!1),q=q.next,ie+=1;Z.allBuffers=oe,D(U,V,!0,V.length,Z,"",Q.finish),V.pendingcb++,V.lastBufferedRequest=null,Q.next?(V.corkedRequestsFree=Q.next,Q.next=null):V.corkedRequestsFree=new M(V),V.bufferedRequestCount=0}else{for(;q;){var ne=q.chunk,se=q.encoding,_e=q.callback,ue=V.objectMode?1:ne.length;if(D(U,V,!1,ue,ne,se,_e),q=q.next,V.bufferedRequestCount--,V.writing)break}q===null&&(V.lastBufferedRequest=null)}V.bufferedRequest=q,V.bufferProcessing=!1}E.prototype._write=function(U,V,q){q(new c("_write()"))},E.prototype._writev=null,E.prototype.end=function(U,V,q){var re=this._writableState;return typeof U=="function"?(q=U,U=null,V=null):typeof V=="function"&&(q=V,V=null),U!=null&&this.write(U,V),re.corked&&(re.corked=1,this.uncork()),re.ending||K(this,re,q),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function j(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function X(U,V){U._final(function(q){V.pendingcb--,q&&p(U,q),V.prefinished=!0,U.emit("prefinish"),fe(U,V)})}function ae(U,V){!V.prefinished&&!V.finalCalled&&(typeof U._final=="function"&&!V.destroyed?(V.pendingcb++,V.finalCalled=!0,x.nextTick(X,U,V)):(V.prefinished=!0,U.emit("prefinish")))}function fe(U,V){var q=j(V);if(q&&(ae(U,V),V.pendingcb===0&&(V.finished=!0,U.emit("finish"),V.autoDestroy))){var re=U._readableState;(!re||re.autoDestroy&&re.endEmitted)&&U.destroy()}return q}function K(U,V,q){V.ending=!0,fe(U,V),q&&(V.finished?x.nextTick(q):U.once("finish",q)),V.ended=!0,U.writable=!1}function J(U,V,q){var re=U.entry;for(U.entry=null;re;){var Z=re.callback;V.pendingcb--,Z(q),re=re.next}V.corkedRequestsFree.next=U}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(V){!this._writableState||(this._writableState.destroyed=V)}}),E.prototype.destroy=s.destroy,E.prototype._undestroy=s.undestroy,E.prototype._destroy=function(U,V){V(U)}}).call(this)}).call(this,t("_process"),typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(t,B,G){(function(x){(function(){var f;function M(y,u,A){return u in y?Object.defineProperty(y,u,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[u]=A,y}var T=t("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),n=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),s=Symbol("stream");function o(y,u){return{value:y,done:u}}function b(y){var u=y[e];if(u!==null){var A=y[s].read();A!==null&&(y[r]=null,y[e]=null,y[a]=null,u(o(A,!1)))}}function g(y){x.nextTick(b,y)}function d(y,u){return function(A,_){y.then(function(){if(u[n]){A(o(void 0,!0));return}u[v](A,_)},_)}}var c=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((f={get stream(){return this[s]},next:function(){var u=this,A=this[i];if(A!==null)return Promise.reject(A);if(this[n])return Promise.resolve(o(void 0,!0));if(this[s].destroyed)return new Promise(function(h,L){x.nextTick(function(){u[i]?L(u[i]):h(o(void 0,!0))})});var _=this[r],p;if(_)p=new Promise(d(_,this));else{var w=this[s].read();if(w!==null)return Promise.resolve(o(w,!1));p=new Promise(this[v])}return this[r]=p,p}},M(f,Symbol.asyncIterator,function(){return this}),M(f,"return",function(){var u=this;return new Promise(function(A,_){u[s].destroy(null,function(p){if(p){_(p);return}A(o(void 0,!0))})})}),f),c),l=function(u){var A,_=Object.create(m,(A={},M(A,s,{value:u,writable:!0}),M(A,e,{value:null,writable:!0}),M(A,a,{value:null,writable:!0}),M(A,i,{value:null,writable:!0}),M(A,n,{value:u._readableState.endEmitted,writable:!0}),M(A,v,{value:function(w,h){var L=_[s].read();L?(_[r]=null,_[e]=null,_[a]=null,w(o(L,!1))):(_[e]=w,_[a]=h)},writable:!0}),A));return _[r]=null,T(u,function(p){if(p&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=_[a];w!==null&&(_[r]=null,_[e]=null,_[a]=null,w(p)),_[i]=p;return}var h=_[e];h!==null&&(_[r]=null,_[e]=null,_[a]=null,h(o(void 0,!0))),_[n]=!0}),u.on("readable",g.bind(null,_)),_};B.exports=l}).call(this)}).call(this,t("_process"))},{"./end-of-stream":296,_process:278}],294:[function(t,B,G){function x(b,g){var d=Object.keys(b);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(b);g&&(c=c.filter(function(m){return Object.getOwnPropertyDescriptor(b,m).enumerable})),d.push.apply(d,c)}return d}function f(b){for(var g=1;g<arguments.length;g++){var d=arguments[g]!=null?arguments[g]:{};g%2?x(Object(d),!0).forEach(function(c){M(b,c,d[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(d)):x(Object(d)).forEach(function(c){Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(d,c))})}return b}function M(b,g,d){return g in b?Object.defineProperty(b,g,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[g]=d,b}function T(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function e(b,g){for(var d=0;d<g.length;d++){var c=g[d];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(b,c.key,c)}}function a(b,g,d){return g&&e(b.prototype,g),d&&e(b,d),b}var i=t("buffer"),n=i.Buffer,r=t("util"),v=r.inspect,s=v&&v.custom||"inspect";function o(b,g,d){n.prototype.copy.call(b,g,d)}B.exports=function(){function b(){T(this,b),this.head=null,this.tail=null,this.length=0}return a(b,[{key:"push",value:function(d){var c={data:d,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(d){var c={data:d,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var c=this.head,m=""+c.data;c=c.next;)m+=d+c.data;return m}},{key:"concat",value:function(d){if(this.length===0)return n.alloc(0);for(var c=n.allocUnsafe(d>>>0),m=this.head,l=0;m;)o(m.data,c,l),l+=m.data.length,m=m.next;return c}},{key:"consume",value:function(d,c){var m;return d<this.head.data.length?(m=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?m=this.shift():m=c?this._getString(d):this._getBuffer(d),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var c=this.head,m=1,l=c.data;for(d-=l.length;c=c.next;){var y=c.data,u=d>y.length?y.length:d;if(u===y.length?l+=y:l+=y.slice(0,d),d-=u,d===0){u===y.length?(++m,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=y.slice(u));break}++m}return this.length-=m,l}},{key:"_getBuffer",value:function(d){var c=n.allocUnsafe(d),m=this.head,l=1;for(m.data.copy(c),d-=m.data.length;m=m.next;){var y=m.data,u=d>y.length?y.length:d;if(y.copy(c,c.length-d,0,u),d-=u,d===0){u===y.length?(++l,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=y.slice(u));break}++l}return this.length-=l,c}},{key:s,value:function(d,c){return v(this,f({},c,{depth:0,customInspect:!1}))}}]),b}()},{buffer:85,util:83}],295:[function(t,B,G){(function(x){(function(){function f(n,r){var v=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,x.nextTick(a,this,n)):x.nextTick(a,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!r&&b?v._writableState?v._writableState.errorEmitted?x.nextTick(T,v):(v._writableState.errorEmitted=!0,x.nextTick(M,v,b)):x.nextTick(M,v,b):r?(x.nextTick(T,v),r(b)):x.nextTick(T,v)}),this)}function M(n,r){a(n,r),T(n)}function T(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(n,r){n.emit("error",r)}function i(n,r){var v=n._readableState,s=n._writableState;v&&v.autoDestroy||s&&s.autoDestroy?n.destroy(r):n.emit("error",r)}B.exports={destroy:f,undestroy:e,errorOrDestroy:i}}).call(this)}).call(this,t("_process"))},{_process:278}],296:[function(t,B,G){var x=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function f(a){var i=!1;return function(){if(!i){i=!0;for(var n=arguments.length,r=new Array(n),v=0;v<n;v++)r[v]=arguments[v];a.apply(this,r)}}}function M(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,i,n){if(typeof i=="function")return e(a,null,i);i||(i={}),n=f(n||M);var r=i.readable||i.readable!==!1&&a.readable,v=i.writable||i.writable!==!1&&a.writable,s=function(){a.writable||b()},o=a._writableState&&a._writableState.finished,b=function(){v=!1,o=!0,r||n.call(a)},g=a._readableState&&a._readableState.endEmitted,d=function(){r=!1,g=!0,v||n.call(a)},c=function(u){n.call(a,u)},m=function(){var u;if(r&&!g)return(!a._readableState||!a._readableState.ended)&&(u=new x),n.call(a,u);if(v&&!o)return(!a._writableState||!a._writableState.ended)&&(u=new x),n.call(a,u)},l=function(){a.req.on("finish",b)};return T(a)?(a.on("complete",b),a.on("abort",m),a.req?l():a.on("request",l)):v&&!a._writableState&&(a.on("end",s),a.on("close",s)),a.on("end",d),a.on("finish",b),i.error!==!1&&a.on("error",c),a.on("close",m),function(){a.removeListener("complete",b),a.removeListener("abort",m),a.removeListener("request",l),a.req&&a.req.removeListener("finish",b),a.removeListener("end",s),a.removeListener("close",s),a.removeListener("finish",b),a.removeListener("end",d),a.removeListener("error",c),a.removeListener("close",m)}}B.exports=e},{"../../../errors":287}],297:[function(t,B,G){B.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(t,B,G){var x;function f(b){var g=!1;return function(){g||(g=!0,b.apply(void 0,arguments))}}var M=t("../../../errors").codes,T=M.ERR_MISSING_ARGS,e=M.ERR_STREAM_DESTROYED;function a(b){if(b)throw b}function i(b){return b.setHeader&&typeof b.abort=="function"}function n(b,g,d,c){c=f(c);var m=!1;b.on("close",function(){m=!0}),x===void 0&&(x=t("./end-of-stream")),x(b,{readable:g,writable:d},function(y){if(y)return c(y);m=!0,c()});var l=!1;return function(y){if(!m&&!l){if(l=!0,i(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();c(y||new e("pipe"))}}}function r(b){b()}function v(b,g){return b.pipe(g)}function s(b){return!b.length||typeof b[b.length-1]!="function"?a:b.pop()}function o(){for(var b=arguments.length,g=new Array(b),d=0;d<b;d++)g[d]=arguments[d];var c=s(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new T("streams");var m,l=g.map(function(y,u){var A=u<g.length-1,_=u>0;return n(y,A,_,function(p){m||(m=p),p&&l.forEach(r),!A&&(l.forEach(r),c(m))})});return g.reduce(v)}B.exports=o},{"../../../errors":287,"./end-of-stream":296}],299:[function(t,B,G){var x=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function f(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function M(T,e,a,i){var n=f(e,i,a);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var r=i?a:"highWaterMark";throw new x(r,n)}return Math.floor(n)}return T.objectMode?16:16*1024}B.exports={getHighWaterMark:M}},{"../../../errors":287}],300:[function(t,B,G){B.exports=t("events").EventEmitter},{events:84}],301:[function(t,B,G){var x=t("safe-buffer").Buffer,f=x.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function M(l){if(!l)return"utf8";for(var y;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(y)return;l=(""+l).toLowerCase(),y=!0}}function T(l){var y=M(l);if(typeof y!="string"&&(x.isEncoding===f||!f(l)))throw new Error("Unknown encoding: "+l);return y||l}G.StringDecoder=e;function e(l){this.encoding=T(l);var y;switch(this.encoding){case"utf16le":this.text=o,this.end=b,y=4;break;case"utf8":this.fillLast=r,y=4;break;case"base64":this.text=g,this.end=d,y=3;break;default:this.write=c,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=x.allocUnsafe(y)}e.prototype.write=function(l){if(l.length===0)return"";var y,u;if(this.lastNeed){if(y=this.fillLast(l),y===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<l.length?y?y+this.text(l,u):this.text(l,u):y||""},e.prototype.end=s,e.prototype.text=v,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function i(l,y,u){var A=y.length-1;if(A<u)return 0;var _=a(y[A]);return _>=0?(_>0&&(l.lastNeed=_-1),_):--A<u||_===-2?0:(_=a(y[A]),_>=0?(_>0&&(l.lastNeed=_-2),_):--A<u||_===-2?0:(_=a(y[A]),_>=0?(_>0&&(_===2?_=0:l.lastNeed=_-3),_):0))}function n(l,y,u){if((y[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function r(l){var y=this.lastTotal-this.lastNeed,u=n(this,l);if(u!==void 0)return u;if(this.lastNeed<=l.length)return l.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,y,0,l.length),this.lastNeed-=l.length}function v(l,y){var u=i(this,l,y);if(!this.lastNeed)return l.toString("utf8",y);this.lastTotal=u;var A=l.length-(u-this.lastNeed);return l.copy(this.lastChar,0,A),l.toString("utf8",y,A)}function s(l){var y=l&&l.length?this.write(l):"";return this.lastNeed?y+"\uFFFD":y}function o(l,y){if((l.length-y)%2===0){var u=l.toString("utf16le",y);if(u){var A=u.charCodeAt(u.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",y,l.length-1)}function b(l){var y=l&&l.length?this.write(l):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,u)}return y}function g(l,y){var u=(l.length-y)%3;return u===0?l.toString("base64",y):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",y,l.length-u))}function d(l){var y=l&&l.length?this.write(l):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function c(l){return l.toString(this.encoding)}function m(l){return l&&l.length?this.write(l):""}},{"safe-buffer":285}],302:[function(t,B,G){(function(x,f){(function(){var M=t("assert"),T=t("debug")("stream-parser");B.exports=r;var e=-1,a=0,i=1,n=2;function r(u){var A=u&&typeof u._transform=="function",_=u&&typeof u._write=="function";if(!A&&!_)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),u._bytes=s,u._skipBytes=o,A&&(u._passthrough=b),A?u._transform=d:u._write=g}function v(u){T("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=e,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function s(u,A){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||v(this),T("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=a}function o(u,A){M(!this._parserCallback,'there is already a "callback" set!'),M(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||v(this),T("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=i}function b(u,A){M(!this._parserCallback,'There is already a "callback" set!'),M(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||v(this),T("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=n}function g(u,A,_){this._parserInit||v(this),T("write(%o bytes)",u.length),typeof A=="function"&&(_=A),l(this,u,null,_)}function d(u,A,_){this._parserInit||v(this),T("transform(%o bytes)",u.length),typeof A!="function"&&(A=this._parserOutput),l(this,u,A,_)}function c(u,A,_,p){return u._parserBytesLeft<=0?p(new Error("got data but not currently parsing anything")):A.length<=u._parserBytesLeft?function(){return m(u,A,_,p)}:function(){var w=A.slice(0,u._parserBytesLeft);return m(u,w,_,function(h){if(h)return p(h);if(A.length>w.length)return function(){return c(u,A.slice(w.length),_,p)}})}}function m(u,A,_,p){if(u._parserBytesLeft-=A.length,T("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===a?(u._parserBuffers.push(A),u._parserBuffered+=A.length):u._parserState===n&&_(A),u._parserBytesLeft===0){var w=u._parserCallback;if(w&&u._parserState===a&&u._parserBuffers.length>1&&(A=f.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==a&&(A=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=e,u._parserBuffers.splice(0),w){var h=[];A&&h.push(A),_&&h.push(_);var L=w.length>h.length;L&&h.push(y(p));var E=w.apply(u,h);if(!L||p===E)return p}}else return p}var l=y(c);function y(u){return function(){for(var A=u.apply(this,arguments);typeof A=="function";)A=A();return A}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(t,B,G){(function(x){(function(){G=B.exports=t("./debug"),G.log=T,G.formatArgs=M,G.save=e,G.load=a,G.useColors=f,G.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:i(),G.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function f(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}G.formatters.j=function(n){try{return JSON.stringify(n)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function M(n){var r=this.useColors;if(n[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+n[0]+(r?"%c ":" ")+"+"+G.humanize(this.diff),!!r){var v="color: "+this.color;n.splice(1,0,v,"color: inherit");var s=0,o=0;n[0].replace(/%[a-zA-Z%]/g,function(b){b!=="%%"&&(s++,b==="%c"&&(o=s))}),n.splice(o,0,v)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(n){try{n==null?G.storage.removeItem("debug"):G.storage.debug=n}catch{}}function a(){var n;try{n=G.storage.debug}catch{}return!n&&typeof x<"u"&&"env"in x&&(n=x.env.DEBUG),n}G.enable(a());function i(){try{return window.localStorage}catch{}}}).call(this)}).call(this,t("_process"))},{"./debug":304,_process:278}],304:[function(t,B,G){G=B.exports=M.debug=M.default=M,G.coerce=i,G.disable=e,G.enable=T,G.enabled=a,G.humanize=t("ms"),G.names=[],G.skips=[],G.formatters={};var x;function f(n){var r=0,v;for(v in n)r=(r<<5)-r+n.charCodeAt(v),r|=0;return G.colors[Math.abs(r)%G.colors.length]}function M(n){function r(){if(!!r.enabled){var v=r,s=+new Date,o=s-(x||s);v.diff=o,v.prev=x,v.curr=s,x=s;for(var b=new Array(arguments.length),g=0;g<b.length;g++)b[g]=arguments[g];b[0]=G.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");var d=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,function(m,l){if(m==="%%")return m;d++;var y=G.formatters[l];if(typeof y=="function"){var u=b[d];m=y.call(v,u),b.splice(d,1),d--}return m}),G.formatArgs.call(v,b);var c=r.log||G.log||console.log.bind(console);c.apply(v,b)}}return r.namespace=n,r.enabled=G.enabled(n),r.useColors=G.useColors(),r.color=f(n),typeof G.init=="function"&&G.init(r),r}function T(n){G.save(n),G.names=[],G.skips=[];for(var r=(typeof n=="string"?n:"").split(/[\s,]+/),v=r.length,s=0;s<v;s++)!r[s]||(n=r[s].replace(/\*/g,".*?"),n[0]==="-"?G.skips.push(new RegExp("^"+n.substr(1)+"$")):G.names.push(new RegExp("^"+n+"$")))}function e(){G.enable("")}function a(n){var r,v;for(r=0,v=G.skips.length;r<v;r++)if(G.skips[r].test(n))return!1;for(r=0,v=G.names.length;r<v;r++)if(G.names[r].test(n))return!0;return!1}function i(n){return n instanceof Error?n.stack||n.message:n}},{ms:305}],305:[function(t,B,G){var x=1e3,f=x*60,M=f*60,T=M*24,e=T*365.25;B.exports=function(v,s){s=s||{};var o=typeof v;if(o==="string"&&v.length>0)return a(v);if(o==="number"&&isNaN(v)===!1)return s.long?n(v):i(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function a(v){if(v=String(v),!(v.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(!!s){var o=parseFloat(s[1]),b=(s[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return o*e;case"days":case"day":case"d":return o*T;case"hours":case"hour":case"hrs":case"hr":case"h":return o*M;case"minutes":case"minute":case"mins":case"min":case"m":return o*f;case"seconds":case"second":case"secs":case"sec":case"s":return o*x;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function i(v){return v>=T?Math.round(v/T)+"d":v>=M?Math.round(v/M)+"h":v>=f?Math.round(v/f)+"m":v>=x?Math.round(v/x)+"s":v+"ms"}function n(v){return r(v,T,"day")||r(v,M,"hour")||r(v,f,"minute")||r(v,x,"second")||v+" ms"}function r(v,s,o){if(!(v<s))return v<s*1.5?Math.floor(v/s)+" "+o:Math.ceil(v/s)+" "+o+"s"}},{}],306:[function(t,B,G){var x=t("parenthesis");B.exports=function(M,T,e){if(M==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(b){return b.length===1&&(b=b+b),b}));var a=x.parse(M,{flat:!0,brackets:e.ignore}),i=a[0],n=i.split(T);if(e.escape){for(var r=[],v=0;v<n.length;v++){var s=n[v],o=n[v+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(r.push(s+T+o),v++):r.push(s)}n=r}for(var v=0;v<n.length;v++)a[0]=n[v],n[v]=x.stringify(a,{flat:!0});return n}},{parenthesis:248}],307:[function(t,B,G){B.exports=x;function x(f){for(var M=f.length,T=new Array(M),e=new Array(M),a=new Array(M),i=new Array(M),n=new Array(M),r=new Array(M),v=0;v<M;++v)T[v]=-1,e[v]=0,a[v]=!1,i[v]=0,n[v]=-1,r[v]=[];var s=0,o=[],b=[];function g(l){var y=[l],u=[l];for(T[l]=e[l]=s,a[l]=!0,s+=1;u.length>0;){l=u[u.length-1];var A=f[l];if(i[l]<A.length){for(var _=i[l];_<A.length;++_){var p=A[_];if(T[p]<0){T[p]=e[p]=s,a[p]=!0,s+=1,y.push(p),u.push(p);break}else a[p]&&(e[l]=Math.min(e[l],e[p])|0);n[p]>=0&&r[l].push(n[p])}i[l]=_}else{if(e[l]===T[l]){for(var w=[],h=[],L=0,_=y.length-1;_>=0;--_){var E=y[_];if(a[E]=!1,w.push(E),h.push(r[E]),L+=r[E].length,n[E]=o.length,E===l){y.length=_;break}}o.push(w);for(var S=new Array(L),_=0;_<h.length;_++)for(var P=0;P<h[_].length;P++)S[--L]=h[_][P];b.push(S)}u.pop()}}}for(var v=0;v<M;++v)T[v]<0&&g(v);for(var d,v=0;v<b.length;v++){var c=b[v];if(c.length!==0){c.sort(function(y,u){return y-u}),d=[c[0]];for(var m=1;m<c.length;m++)c[m]!==c[m-1]&&d.push(c[m]);b[v]=d}}return{components:o,adjacencyList:b}}},{}],308:[function(t,B,G){Object.defineProperty(G,"__esModule",{value:!0});var x=function(){function n(r,v){var s=[],o=!0,b=!1,g=void 0;try{for(var d=r[Symbol.iterator](),c;!(o=(c=d.next()).done)&&(s.push(c.value),!(v&&s.length===v));o=!0);}catch(m){b=!0,g=m}finally{try{!o&&d.return&&d.return()}finally{if(b)throw g}}return s}return function(r,v){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Math.PI*2,M=function(r,v,s,o,b,g,d){var c=r.x,m=r.y;c*=v,m*=s;var l=o*c-b*m,y=b*c+o*m;return{x:l+g,y:y+d}},T=function(r,v){var s=v===1.5707963267948966?.551915024494:v===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(v/4),o=Math.cos(r),b=Math.sin(r),g=Math.cos(r+v),d=Math.sin(r+v);return[{x:o-b*s,y:b+o*s},{x:g+d*s,y:d-g*s},{x:g,y:d}]},e=function(r,v,s,o){var b=r*o-v*s<0?-1:1,g=r*s+v*o;return g>1&&(g=1),g<-1&&(g=-1),b*Math.acos(g)},a=function(r,v,s,o,b,g,d,c,m,l,y,u){var A=Math.pow(b,2),_=Math.pow(g,2),p=Math.pow(y,2),w=Math.pow(u,2),h=A*_-A*w-_*p;h<0&&(h=0),h/=A*w+_*p,h=Math.sqrt(h)*(d===c?-1:1);var L=h*b/g*u,E=h*-g/b*y,S=l*L-m*E+(r+s)/2,P=m*L+l*E+(v+o)/2,F=(y-L)/b,I=(u-E)/g,D=(-y-L)/b,R=(-u-E)/g,O=e(1,0,F,I),z=e(F,I,D,R);return c===0&&z>0&&(z-=f),c===1&&z<0&&(z+=f),[S,P,O,z]},i=function(r){var v=r.px,s=r.py,o=r.cx,b=r.cy,g=r.rx,d=r.ry,c=r.xAxisRotation,m=c===void 0?0:c,l=r.largeArcFlag,y=l===void 0?0:l,u=r.sweepFlag,A=u===void 0?0:u,_=[];if(g===0||d===0)return[];var p=Math.sin(m*f/360),w=Math.cos(m*f/360),h=w*(v-o)/2+p*(s-b)/2,L=-p*(v-o)/2+w*(s-b)/2;if(h===0&&L===0)return[];g=Math.abs(g),d=Math.abs(d);var E=Math.pow(h,2)/Math.pow(g,2)+Math.pow(L,2)/Math.pow(d,2);E>1&&(g*=Math.sqrt(E),d*=Math.sqrt(E));var S=a(v,s,o,b,g,d,y,A,p,w,h,L),P=x(S,4),F=P[0],I=P[1],D=P[2],R=P[3],O=Math.abs(R)/(f/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);R/=z;for(var H=0;H<z;H++)_.push(T(D,R)),D+=R;return _.map(function(Y){var ee=M(Y[0],g,d,w,p,F,I),j=ee.x,X=ee.y,ae=M(Y[1],g,d,w,p,F,I),fe=ae.x,K=ae.y,J=M(Y[2],g,d,w,p,F,I),U=J.x,V=J.y;return{x1:j,y1:X,x2:fe,y2:K,x:U,y:V}})};G.default=i,B.exports=G.default},{}],309:[function(t,B,G){var x=t("parse-svg-path"),f=t("abs-svg-path"),M=t("normalize-svg-path"),T=t("is-svg-path"),e=t("assert");B.exports=a;function a(i){if(Array.isArray(i)&&i.length===1&&typeof i[0]=="string"&&(i=i[0]),typeof i=="string"&&(e(T(i),"String is not an SVG path."),i=x(i)),e(Array.isArray(i),"Argument should be a string or an array of path segments."),i=f(i),i=M(i),!i.length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],r=0,v=i.length;r<v;r++)for(var s=i[r].slice(1),o=0;o<s.length;o+=2)s[o+0]<n[0]&&(n[0]=s[o+0]),s[o+1]<n[1]&&(n[1]=s[o+1]),s[o+0]>n[2]&&(n[2]=s[o+0]),s[o+1]>n[3]&&(n[3]=s[o+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(t,B,G){B.exports=f;var x=t("svg-arc-to-cubic-bezier");function f(e){for(var a,i=[],n=0,r=0,v=0,s=0,o=null,b=null,g=0,d=0,c=0,m=e.length;c<m;c++){var l=e[c],y=l[0];switch(y){case"M":v=l[1],s=l[2];break;case"A":var u=x({px:g,py:d,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!u.length)continue;for(var A=0,_;A<u.length;A++)_=u[A],l=["C",_.x1,_.y1,_.x2,_.y2,_.x,_.y],A<u.length-1&&i.push(l);break;case"S":var p=g,w=d;(a=="C"||a=="S")&&(p+=p-n,w+=w-r),l=["C",p,w,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(o=g*2-o,b=d*2-b):(o=g,b=d),l=T(g,d,o,b,l[1],l[2]);break;case"Q":o=l[1],b=l[2],l=T(g,d,l[1],l[2],l[3],l[4]);break;case"L":l=M(g,d,l[1],l[2]);break;case"H":l=M(g,d,l[1],d);break;case"V":l=M(g,d,g,l[1]);break;case"Z":l=M(g,d,v,s);break}a=y,g=l[l.length-2],d=l[l.length-1],l.length>4?(n=l[l.length-4],r=l[l.length-3]):(n=g,r=d),i.push(l)}return i}function M(e,a,i,n){return["C",e,a,i,n,i,n]}function T(e,a,i,n,r,v){return["C",e/3+2/3*i,a/3+2/3*n,r/3+2/3*i,v/3+2/3*n,r,v]}},{"svg-arc-to-cubic-bezier":308}],311:[function(t,B,G){var x=t("svg-path-bounds"),f=t("parse-svg-path"),M=t("draw-svg-path"),T=t("is-svg-path"),e=t("bitmap-sdf"),a=document.createElement("canvas"),i=a.getContext("2d");B.exports=n;function n(s,o){if(!T(s))throw Error("Argument should be valid svg path string");o||(o={});var b,g;o.shape?(b=o.shape[0],g=o.shape[1]):(b=a.width=o.w||o.width||200,g=a.height=o.h||o.height||200);var d=Math.min(b,g),c=o.stroke||0,m=o.viewbox||o.viewBox||x(s),l=[b/(m[2]-m[0]),g/(m[3]-m[1])],y=Math.min(l[0]||0,l[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,b,g),i.fillStyle="white",c&&(typeof c!="number"&&(c=1),c>0?i.strokeStyle="white":i.strokeStyle="black",i.lineWidth=Math.abs(c)),i.translate(b*.5,g*.5),i.scale(y,y),v()){var u=new Path2D(s);i.fill(u),c&&i.stroke(u)}else{var A=f(s);M(i,A),i.fill(),c&&i.stroke()}i.setTransform(1,0,0,1,0,0);var _=e(i,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:d*.5});return _}var r;function v(){if(r!=null)return r;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return r=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(o);var b=s.getImageData(0,0,1,1);return r=b&&b.data&&b.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(t,B,G){(function(x,f){(function(){var M=t("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},i=0;G.setTimeout=function(){return new n(T.call(setTimeout,window,arguments),clearTimeout)},G.setInterval=function(){return new n(T.call(setInterval,window,arguments),clearInterval)},G.clearTimeout=G.clearInterval=function(r){r.close()};function n(r,v){this._id=r,this._clearFn=v}n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},G.enroll=function(r,v){clearTimeout(r._idleTimeoutId),r._idleTimeout=v},G.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},G._unrefActive=G.active=function(r){clearTimeout(r._idleTimeoutId);var v=r._idleTimeout;v>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},v))},G.setImmediate=typeof x=="function"?x:function(r){var v=i++,s=arguments.length<2?!1:e.call(arguments,1);return a[v]=!0,M(function(){a[v]&&(s?r.apply(null,s):r.call(null),G.clearImmediate(v))}),v},G.clearImmediate=typeof f=="function"?f:function(r){delete a[r]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(t,B,G){(function(x){var f=/^\s+/,M=/\s+$/,T=0,e=x.round,a=x.min,i=x.max,n=x.random;function r(Z,Q){if(Z=Z||"",Q=Q||{},Z instanceof r)return Z;if(!(this instanceof r))return new r(Z,Q);var ie=v(Z);this._originalInput=Z,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=e(100*this._a)/100,this._format=Q.format||ie.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ie.ok,this._tc_id=T++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),Q,ie,oe,ne,se,_e;return Q=Z.r/255,ie=Z.g/255,oe=Z.b/255,Q<=.03928?ne=Q/12.92:ne=x.pow((Q+.055)/1.055,2.4),ie<=.03928?se=ie/12.92:se=x.pow((ie+.055)/1.055,2.4),oe<=.03928?_e=oe/12.92:_e=x.pow((oe+.055)/1.055,2.4),.2126*ne+.7152*se+.0722*_e},setAlpha:function(Z){return this._a=z(Z),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Z=g(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=g(this._r,this._g,this._b),Q=e(Z.h*360),ie=e(Z.s*100),oe=e(Z.v*100);return this._a==1?"hsv("+Q+", "+ie+"%, "+oe+"%)":"hsva("+Q+", "+ie+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var Z=o(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=o(this._r,this._g,this._b),Q=e(Z.h*360),ie=e(Z.s*100),oe=e(Z.l*100);return this._a==1?"hsl("+Q+", "+ie+"%, "+oe+"%)":"hsla("+Q+", "+ie+"%, "+oe+"%, "+this._roundA+")"},toHex:function(Z){return c(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return m(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(H(this._r,255)*100)+"%",g:e(H(this._g,255)*100)+"%",b:e(H(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(H(this._r,255)*100)+"%, "+e(H(this._g,255)*100)+"%, "+e(H(this._b,255)*100)+"%)":"rgba("+e(H(this._r,255)*100)+"%, "+e(H(this._g,255)*100)+"%, "+e(H(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[c(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var Q="#"+l(this._r,this._g,this._b,this._a),ie=Q,oe=this._gradientType?"GradientType = 1, ":"";if(Z){var ne=r(Z);ie="#"+l(ne._r,ne._g,ne._b,ne._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+Q+",endColorstr="+ie+")"},toString:function(Z){var Q=!!Z;Z=Z||this._format;var ie=!1,oe=this._a<1&&this._a>=0,ne=!Q&&oe&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return ne?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(ie=this.toRgbString()),Z==="prgb"&&(ie=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(ie=this.toHexString()),Z==="hex3"&&(ie=this.toHexString(!0)),Z==="hex4"&&(ie=this.toHex8String(!0)),Z==="hex8"&&(ie=this.toHex8String()),Z==="name"&&(ie=this.toName()),Z==="hsl"&&(ie=this.toHslString()),Z==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(Z,Q){var ie=Z.apply(null,[this].concat([].slice.call(Q)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(Z,Q){return Z.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},r.fromRatio=function(Z,Q){if(typeof Z=="object"){var ie={};for(var oe in Z)Z.hasOwnProperty(oe)&&(oe==="a"?ie[oe]=Z[oe]:ie[oe]=fe(Z[oe]));Z=ie}return r(Z,Q)};function v(Z){var Q={r:0,g:0,b:0},ie=1,oe=null,ne=null,se=null,_e=!1,ue=!1;return typeof Z=="string"&&(Z=q(Z)),typeof Z=="object"&&(V(Z.r)&&V(Z.g)&&V(Z.b)?(Q=s(Z.r,Z.g,Z.b),_e=!0,ue=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):V(Z.h)&&V(Z.s)&&V(Z.v)?(oe=fe(Z.s),ne=fe(Z.v),Q=d(Z.h,oe,ne),_e=!0,ue="hsv"):V(Z.h)&&V(Z.s)&&V(Z.l)&&(oe=fe(Z.s),se=fe(Z.l),Q=b(Z.h,oe,se),_e=!0,ue="hsl"),Z.hasOwnProperty("a")&&(ie=Z.a)),ie=z(ie),{ok:_e,format:Z.format||ue,r:a(255,i(Q.r,0)),g:a(255,i(Q.g,0)),b:a(255,i(Q.b,0)),a:ie}}function s(Z,Q,ie){return{r:H(Z,255)*255,g:H(Q,255)*255,b:H(ie,255)*255}}function o(Z,Q,ie){Z=H(Z,255),Q=H(Q,255),ie=H(ie,255);var oe=i(Z,Q,ie),ne=a(Z,Q,ie),se,_e,ue=(oe+ne)/2;if(oe==ne)se=_e=0;else{var ge=oe-ne;switch(_e=ue>.5?ge/(2-oe-ne):ge/(oe+ne),oe){case Z:se=(Q-ie)/ge+(Q<ie?6:0);break;case Q:se=(ie-Z)/ge+2;break;case ie:se=(Z-Q)/ge+4;break}se/=6}return{h:se,s:_e,l:ue}}function b(Z,Q,ie){var oe,ne,se;Z=H(Z,360),Q=H(Q,100),ie=H(ie,100);function _e(xe,ye,be){return be<0&&(be+=1),be>1&&(be-=1),be<1/6?xe+(ye-xe)*6*be:be<1/2?ye:be<2/3?xe+(ye-xe)*(2/3-be)*6:xe}if(Q===0)oe=ne=se=ie;else{var ue=ie<.5?ie*(1+Q):ie+Q-ie*Q,ge=2*ie-ue;oe=_e(ge,ue,Z+1/3),ne=_e(ge,ue,Z),se=_e(ge,ue,Z-1/3)}return{r:oe*255,g:ne*255,b:se*255}}function g(Z,Q,ie){Z=H(Z,255),Q=H(Q,255),ie=H(ie,255);var oe=i(Z,Q,ie),ne=a(Z,Q,ie),se,_e,ue=oe,ge=oe-ne;if(_e=oe===0?0:ge/oe,oe==ne)se=0;else{switch(oe){case Z:se=(Q-ie)/ge+(Q<ie?6:0);break;case Q:se=(ie-Z)/ge+2;break;case ie:se=(Z-Q)/ge+4;break}se/=6}return{h:se,s:_e,v:ue}}function d(Z,Q,ie){Z=H(Z,360)*6,Q=H(Q,100),ie=H(ie,100);var oe=x.floor(Z),ne=Z-oe,se=ie*(1-Q),_e=ie*(1-ne*Q),ue=ie*(1-(1-ne)*Q),ge=oe%6,xe=[ie,_e,se,se,ue,ie][ge],ye=[ue,ie,ie,_e,se,se][ge],be=[se,se,ue,ie,ie,_e][ge];return{r:xe*255,g:ye*255,b:be*255}}function c(Z,Q,ie,oe){var ne=[ae(e(Z).toString(16)),ae(e(Q).toString(16)),ae(e(ie).toString(16))];return oe&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0):ne.join("")}function m(Z,Q,ie,oe,ne){var se=[ae(e(Z).toString(16)),ae(e(Q).toString(16)),ae(e(ie).toString(16)),ae(K(oe))];return ne&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)&&se[3].charAt(0)==se[3].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0)+se[3].charAt(0):se.join("")}function l(Z,Q,ie,oe){var ne=[ae(K(oe)),ae(e(Z).toString(16)),ae(e(Q).toString(16)),ae(e(ie).toString(16))];return ne.join("")}r.equals=function(Z,Q){return!Z||!Q?!1:r(Z).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:n(),g:n(),b:n()})};function y(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.s-=Q/100,ie.s=Y(ie.s),r(ie)}function u(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.s+=Q/100,ie.s=Y(ie.s),r(ie)}function A(Z){return r(Z).desaturate(100)}function _(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.l+=Q/100,ie.l=Y(ie.l),r(ie)}function p(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toRgb();return ie.r=i(0,a(255,ie.r-e(255*-(Q/100)))),ie.g=i(0,a(255,ie.g-e(255*-(Q/100)))),ie.b=i(0,a(255,ie.b-e(255*-(Q/100)))),r(ie)}function w(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.l-=Q/100,ie.l=Y(ie.l),r(ie)}function h(Z,Q){var ie=r(Z).toHsl(),oe=(ie.h+Q)%360;return ie.h=oe<0?360+oe:oe,r(ie)}function L(Z){var Q=r(Z).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function E(Z){var Q=r(Z).toHsl(),ie=Q.h;return[r(Z),r({h:(ie+120)%360,s:Q.s,l:Q.l}),r({h:(ie+240)%360,s:Q.s,l:Q.l})]}function S(Z){var Q=r(Z).toHsl(),ie=Q.h;return[r(Z),r({h:(ie+90)%360,s:Q.s,l:Q.l}),r({h:(ie+180)%360,s:Q.s,l:Q.l}),r({h:(ie+270)%360,s:Q.s,l:Q.l})]}function P(Z){var Q=r(Z).toHsl(),ie=Q.h;return[r(Z),r({h:(ie+72)%360,s:Q.s,l:Q.l}),r({h:(ie+216)%360,s:Q.s,l:Q.l})]}function F(Z,Q,ie){Q=Q||6,ie=ie||30;var oe=r(Z).toHsl(),ne=360/ie,se=[r(Z)];for(oe.h=(oe.h-(ne*Q>>1)+720)%360;--Q;)oe.h=(oe.h+ne)%360,se.push(r(oe));return se}function I(Z,Q){Q=Q||6;for(var ie=r(Z).toHsv(),oe=ie.h,ne=ie.s,se=ie.v,_e=[],ue=1/Q;Q--;)_e.push(r({h:oe,s:ne,v:se})),se=(se+ue)%1;return _e}r.mix=function(Z,Q,ie){ie=ie===0?0:ie||50;var oe=r(Z).toRgb(),ne=r(Q).toRgb(),se=ie/100,_e={r:(ne.r-oe.r)*se+oe.r,g:(ne.g-oe.g)*se+oe.g,b:(ne.b-oe.b)*se+oe.b,a:(ne.a-oe.a)*se+oe.a};return r(_e)},r.readability=function(Z,Q){var ie=r(Z),oe=r(Q);return(x.max(ie.getLuminance(),oe.getLuminance())+.05)/(x.min(ie.getLuminance(),oe.getLuminance())+.05)},r.isReadable=function(Z,Q,ie){var oe=r.readability(Z,Q),ne,se;switch(se=!1,ne=re(ie),ne.level+ne.size){case"AAsmall":case"AAAlarge":se=oe>=4.5;break;case"AAlarge":se=oe>=3;break;case"AAAsmall":se=oe>=7;break}return se},r.mostReadable=function(Z,Q,ie){var oe=null,ne=0,se,_e,ue,ge;ie=ie||{},_e=ie.includeFallbackColors,ue=ie.level,ge=ie.size;for(var xe=0;xe<Q.length;xe++)se=r.readability(Z,Q[xe]),se>ne&&(ne=se,oe=r(Q[xe]));return r.isReadable(Z,oe,{level:ue,size:ge})||!_e?oe:(ie.includeFallbackColors=!1,r.mostReadable(Z,["#fff","#000"],ie))};var D=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=r.hexNames=O(D);function O(Z){var Q={};for(var ie in Z)Z.hasOwnProperty(ie)&&(Q[Z[ie]]=ie);return Q}function z(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function H(Z,Q){j(Z)&&(Z="100%");var ie=X(Z);return Z=a(Q,i(0,parseFloat(Z))),ie&&(Z=parseInt(Z*Q,10)/100),x.abs(Z-Q)<1e-6?1:Z%Q/parseFloat(Q)}function Y(Z){return a(1,i(0,Z))}function ee(Z){return parseInt(Z,16)}function j(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function X(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function ae(Z){return Z.length==1?"0"+Z:""+Z}function fe(Z){return Z<=1&&(Z=Z*100+"%"),Z}function K(Z){return x.round(parseFloat(Z)*255).toString(16)}function J(Z){return ee(Z)/255}var U=function(){var Z="[-\\+]?\\d+%?",Q="[-\\+]?\\d*\\.\\d+%?",ie="(?:"+Q+")|(?:"+Z+")",oe="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",ne="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?";return{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+oe),rgba:new RegExp("rgba"+ne),hsl:new RegExp("hsl"+oe),hsla:new RegExp("hsla"+ne),hsv:new RegExp("hsv"+oe),hsva:new RegExp("hsva"+ne),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(Z){return!!U.CSS_UNIT.exec(Z)}function q(Z){Z=Z.replace(f,"").replace(M,"").toLowerCase();var Q=!1;if(D[Z])Z=D[Z],Q=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie;return(ie=U.rgb.exec(Z))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=U.rgba.exec(Z))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=U.hsl.exec(Z))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=U.hsla.exec(Z))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=U.hsv.exec(Z))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=U.hsva.exec(Z))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=U.hex8.exec(Z))?{r:ee(ie[1]),g:ee(ie[2]),b:ee(ie[3]),a:J(ie[4]),format:Q?"name":"hex8"}:(ie=U.hex6.exec(Z))?{r:ee(ie[1]),g:ee(ie[2]),b:ee(ie[3]),format:Q?"name":"hex"}:(ie=U.hex4.exec(Z))?{r:ee(ie[1]+""+ie[1]),g:ee(ie[2]+""+ie[2]),b:ee(ie[3]+""+ie[3]),a:J(ie[4]+""+ie[4]),format:Q?"name":"hex8"}:(ie=U.hex3.exec(Z))?{r:ee(ie[1]+""+ie[1]),g:ee(ie[2]+""+ie[2]),b:ee(ie[3]+""+ie[3]),format:Q?"name":"hex"}:!1}function re(Z){var Q,ie;return Z=Z||{level:"AA",size:"small"},Q=(Z.level||"AA").toUpperCase(),ie=(Z.size||"small").toLowerCase(),Q!=="AA"&&Q!=="AAA"&&(Q="AA"),ie!=="small"&&ie!=="large"&&(ie="small"),{level:Q,size:ie}}typeof B<"u"&&B.exports?B.exports=r:window.tinycolor=r})(Math)},{}],314:[function(t,B,G){B.exports=M,B.exports.float32=B.exports.float=M,B.exports.fract32=B.exports.fract=f;var x=new Float32Array(1);function f(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=M(T));for(var a=0,i=e.length;a<i;a++)e[a]=T[a]-e[a];return e}return M(T-M(T))}function M(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(x[0]=T,x[0])}},{}],315:[function(t,B,G){var x=t("parse-unit");B.exports=e;var f=96;function M(a,i){var n=x(getComputedStyle(a).getPropertyValue(i));return n[0]*e(n[1],a)}function T(a,i){var n=document.createElement("div");n.style["font-size"]="128"+a,i.appendChild(n);var r=M(n,"font-size")/128;return i.removeChild(n),r}function e(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return T(a,i);case"em":return M(i,"font-size");case"rem":return M(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return f;case"cm":return f/2.54;case"mm":return f/25.4;case"pt":return f/72;case"pc":return f/6}return 1}},{"parse-unit":251}],316:[function(t,B,G){(function(x,f){typeof G=="object"&&typeof B<"u"?f(G):(x=x||self,f(x.topojson=x.topojson||{}))})(this,function(x){function f(u){return u}function M(u){if(u==null)return f;var A,_,p=u.scale[0],w=u.scale[1],h=u.translate[0],L=u.translate[1];return function(E,S){S||(A=_=0);var P=2,F=E.length,I=new Array(F);for(I[0]=(A+=E[0])*p+h,I[1]=(_+=E[1])*w+L;P<F;)I[P]=E[P],++P;return I}}function T(u){var A=M(u.transform),_,p=1/0,w=p,h=-p,L=-p;function E(P){P=A(P),P[0]<p&&(p=P[0]),P[0]>h&&(h=P[0]),P[1]<w&&(w=P[1]),P[1]>L&&(L=P[1])}function S(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(S);break;case"Point":E(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(E);break}}u.arcs.forEach(function(P){for(var F=-1,I=P.length,D;++F<I;)D=A(P[F],F),D[0]<p&&(p=D[0]),D[0]>h&&(h=D[0]),D[1]<w&&(w=D[1]),D[1]>L&&(L=D[1])});for(_ in u.objects)S(u.objects[_]);return[p,w,h,L]}function e(u,A){for(var _,p=u.length,w=p-A;w<--p;)_=u[w],u[w++]=u[p],u[p]=_}function a(u,A){return typeof A=="string"&&(A=u.objects[A]),A.type==="GeometryCollection"?{type:"FeatureCollection",features:A.geometries.map(function(_){return i(u,_)})}:i(u,A)}function i(u,A){var _=A.id,p=A.bbox,w=A.properties==null?{}:A.properties,h=n(u,A);return _==null&&p==null?{type:"Feature",properties:w,geometry:h}:p==null?{type:"Feature",id:_,properties:w,geometry:h}:{type:"Feature",id:_,bbox:p,properties:w,geometry:h}}function n(u,A){var _=M(u.transform),p=u.arcs;function w(F,I){I.length&&I.pop();for(var D=p[F<0?~F:F],R=0,O=D.length;R<O;++R)I.push(_(D[R],R));F<0&&e(I,O)}function h(F){return _(F)}function L(F){for(var I=[],D=0,R=F.length;D<R;++D)w(F[D],I);return I.length<2&&I.push(I[0]),I}function E(F){for(var I=L(F);I.length<4;)I.push(I[0]);return I}function S(F){return F.map(E)}function P(F){var I=F.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:F.geometries.map(P)};case"Point":D=h(F.coordinates);break;case"MultiPoint":D=F.coordinates.map(h);break;case"LineString":D=L(F.arcs);break;case"MultiLineString":D=F.arcs.map(L);break;case"Polygon":D=S(F.arcs);break;case"MultiPolygon":D=F.arcs.map(S);break;default:return null}return{type:I,coordinates:D}}return P(A)}function r(u,A){var _={},p={},w={},h=[],L=-1;A.forEach(function(P,F){var I=u.arcs[P<0?~P:P],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=A[++L],A[L]=P,A[F]=D)}),A.forEach(function(P){var F=E(P),I=F[0],D=F[1],R,O;if(R=w[I])if(delete w[R.end],R.push(P),R.end=D,O=p[D]){delete p[O.start];var z=O===R?R:R.concat(O);p[z.start=R.start]=w[z.end=O.end]=z}else p[R.start]=w[R.end]=R;else if(R=p[D])if(delete p[R.start],R.unshift(P),R.start=I,O=w[I]){delete w[O.end];var H=O===R?R:O.concat(R);p[H.start=O.start]=w[H.end=R.end]=H}else p[R.start]=w[R.end]=R;else R=[P],p[R.start=I]=w[R.end=D]=R});function E(P){var F=u.arcs[P<0?~P:P],I=F[0],D;return u.transform?(D=[0,0],F.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=F[F.length-1],P<0?[D,I]:[I,D]}function S(P,F){for(var I in P){var D=P[I];delete F[D.start],delete D.start,delete D.end,D.forEach(function(R){_[R<0?~R:R]=1}),h.push(D)}}return S(w,p),S(p,w),A.forEach(function(P){_[P<0?~P:P]||h.push([P])}),h}function v(u){return n(u,s.apply(this,arguments))}function s(u,A,_){var p,w,h;if(arguments.length>1)p=o(u,A,_);else for(w=0,p=new Array(h=u.arcs.length);w<h;++w)p[w]=w;return{type:"MultiLineString",arcs:r(u,p)}}function o(u,A,_){var p=[],w=[],h;function L(I){var D=I<0?~I:I;(w[D]||(w[D]=[])).push({i:I,g:h})}function E(I){I.forEach(L)}function S(I){I.forEach(E)}function P(I){I.forEach(S)}function F(I){switch(h=I,I.type){case"GeometryCollection":I.geometries.forEach(F);break;case"LineString":E(I.arcs);break;case"MultiLineString":case"Polygon":S(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return F(A),w.forEach(_==null?function(I){p.push(I[0].i)}:function(I){_(I[0].g,I[I.length-1].g)&&p.push(I[0].i)}),p}function b(u){for(var A=-1,_=u.length,p,w=u[_-1],h=0;++A<_;)p=w,w=u[A],h+=p[0]*w[1]-p[1]*w[0];return Math.abs(h)}function g(u){return n(u,d.apply(this,arguments))}function d(u,A){var _={},p=[],w=[];A.forEach(h);function h(S){switch(S.type){case"GeometryCollection":S.geometries.forEach(h);break;case"Polygon":L(S.arcs);break;case"MultiPolygon":S.arcs.forEach(L);break}}function L(S){S.forEach(function(P){P.forEach(function(F){(_[F=F<0?~F:F]||(_[F]=[])).push(S)})}),p.push(S)}function E(S){return b(n(u,{type:"Polygon",arcs:[S]}).coordinates[0])}return p.forEach(function(S){if(!S._){var P=[],F=[S];for(S._=1,w.push(P);S=F.pop();)P.push(S),S.forEach(function(I){I.forEach(function(D){_[D<0?~D:D].forEach(function(R){R._||(R._=1,F.push(R))})})})}}),p.forEach(function(S){delete S._}),{type:"MultiPolygon",arcs:w.map(function(S){var P=[],F;if(S.forEach(function(z){z.forEach(function(H){H.forEach(function(Y){_[Y<0?~Y:Y].length<2&&P.push(Y)})})}),P=r(u,P),(F=P.length)>1)for(var I=1,D=E(P[0]),R,O;I<F;++I)(R=E(P[I]))>D&&(O=P[0],P[0]=P[I],P[I]=O,D=R);return P}).filter(function(S){return S.length>0})}}function c(u,A){for(var _=0,p=u.length;_<p;){var w=_+p>>>1;u[w]<A?_=w+1:p=w}return _}function m(u){var A={},_=u.map(function(){return[]});function p(z,H){z.forEach(function(Y){Y<0&&(Y=~Y);var ee=A[Y];ee?ee.push(H):A[Y]=[H]})}function w(z,H){z.forEach(function(Y){p(Y,H)})}function h(z,H){z.type==="GeometryCollection"?z.geometries.forEach(function(Y){h(Y,H)}):z.type in L&&L[z.type](z.arcs,H)}var L={LineString:p,MultiLineString:w,Polygon:w,MultiPolygon:function(z,H){z.forEach(function(Y){w(Y,H)})}};u.forEach(h);for(var E in A)for(var S=A[E],P=S.length,F=0;F<P;++F)for(var I=F+1;I<P;++I){var D=S[F],R=S[I],O;(O=_[D])[E=c(O,R)]!==R&&O.splice(E,0,R),(O=_[R])[E=c(O,D)]!==D&&O.splice(E,0,D)}return _}function l(u){if(u==null)return f;var A,_,p=u.scale[0],w=u.scale[1],h=u.translate[0],L=u.translate[1];return function(E,S){S||(A=_=0);var P=2,F=E.length,I=new Array(F),D=Math.round((E[0]-h)/p),R=Math.round((E[1]-L)/w);for(I[0]=D-A,A=D,I[1]=R-_,_=R;P<F;)I[P]=E[P],++P;return I}}function y(u,A){if(u.transform)throw new Error("already quantized");if(!A||!A.scale){if(!((L=Math.floor(A))>=2))throw new Error("n must be \u22652");S=u.bbox||T(u);var _=S[0],p=S[1],w=S[2],h=S[3],L;A={scale:[w-_?(w-_)/(L-1):1,h-p?(h-p)/(L-1):1],translate:[_,p]}}else S=u.bbox;var E=l(A),S,P,F=u.objects,I={};function D(z){return E(z)}function R(z){var H;switch(z.type){case"GeometryCollection":H={type:"GeometryCollection",geometries:z.geometries.map(R)};break;case"Point":H={type:"Point",coordinates:D(z.coordinates)};break;case"MultiPoint":H={type:"MultiPoint",coordinates:z.coordinates.map(D)};break;default:return z}return z.id!=null&&(H.id=z.id),z.bbox!=null&&(H.bbox=z.bbox),z.properties!=null&&(H.properties=z.properties),H}function O(z){var H=0,Y=1,ee=z.length,j,X=new Array(ee);for(X[0]=E(z[0],0);++H<ee;)((j=E(z[H],H))[0]||j[1])&&(X[Y++]=j);return Y===1&&(X[Y++]=[0,0]),X.length=Y,X}for(P in F)I[P]=R(F[P]);return{type:"Topology",bbox:S,transform:A,objects:I,arcs:u.arcs.map(O)}}x.bbox=T,x.feature=a,x.merge=g,x.mergeArcs=d,x.mesh=v,x.meshArcs=s,x.neighbors=m,x.quantize=y,x.transform=M,x.untransform=l,Object.defineProperty(x,"__esModule",{value:!0})})},{}],317:[function(t,B,G){var x=t("../prototype/is");B.exports=function(f){if(typeof f!="function"||!hasOwnProperty.call(f,"length"))return!1;try{if(typeof f.length!="number"||typeof f.call!="function"||typeof f.apply!="function")return!1}catch{return!1}return!x(f)}},{"../prototype/is":324}],318:[function(t,B,G){var x=t("../value/is"),f=t("../object/is"),M=t("../string/coerce"),T=t("./to-short-string"),e=function(a,i){return a.replace("%v",T(i))};B.exports=function(a,i,n){if(!f(n))throw new TypeError(e(i,a));if(!x(a)){if("default"in n)return n.default;if(n.isOptional)return null}var r=M(n.errorMessage);throw x(r)||(r=i),new TypeError(e(r,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(t,B,G){B.exports=function(x){try{return x.toString()}catch{try{return String(x)}catch{return null}}}},{}],320:[function(t,B,G){var x=t("./safe-to-string"),f=/[\n\r\u2028\u2029]/g;B.exports=function(M){var T=x(M);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(f,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":319}],321:[function(t,B,G){var x=t("../value/is"),f={object:!0,function:!0,undefined:!0};B.exports=function(M){return x(M)?hasOwnProperty.call(f,typeof M):!1}},{"../value/is":327}],322:[function(t,B,G){var x=t("../lib/resolve-exception"),f=t("./is");B.exports=function(M){return f(M)?M:x(M,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(t,B,G){var x=t("../function/is"),f=/^\s*class[\s{/}]/,M=Function.prototype.toString;B.exports=function(T){return!(!x(T)||f.test(M.call(T)))}},{"../function/is":317}],324:[function(t,B,G){var x=t("../object/is");B.exports=function(f){if(!x(f))return!1;try{return f.constructor?f.constructor.prototype===f:!1}catch{return!1}}},{"../object/is":321}],325:[function(t,B,G){var x=t("../value/is"),f=t("../object/is"),M=Object.prototype.toString;B.exports=function(T){if(!x(T))return null;if(f(T)){var e=T.toString;if(typeof e!="function"||e===M)return null}try{return""+T}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(t,B,G){var x=t("../lib/resolve-exception"),f=t("./is");B.exports=function(M){return f(M)?M:x(M,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(t,B,G){var x=void 0;B.exports=function(f){return f!==x&&f!==null}},{}],328:[function(t,B,G){(function(x){(function(){var f=t("bit-twiddle"),M=t("dup"),T=t("buffer").Buffer;x.__TYPEDARRAY_POOL||(x.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",n=x.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=M([32,0])),n.BIGUINT64||(n.BIGUINT64=M([32,0])),n.BIGINT64||(n.BIGINT64=M([32,0])),n.BUFFER||(n.BUFFER=M([32,0]));var r=n.DATA,v=n.BUFFER;G.free=function(S){if(T.isBuffer(S))v[f.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var P=S.length||S.byteLength,F=f.log2(P)|0;r[F].push(S)}};function s(E){if(!!E){var S=E.length||E.byteLength,P=f.log2(S);r[P].push(E)}}function o(E){s(E.buffer)}G.freeUint8=G.freeUint16=G.freeUint32=G.freeBigUint64=G.freeInt8=G.freeInt16=G.freeInt32=G.freeBigInt64=G.freeFloat32=G.freeFloat=G.freeFloat64=G.freeDouble=G.freeUint8Clamped=G.freeDataView=o,G.freeArrayBuffer=s,G.freeBuffer=function(S){v[f.log2(S.length)].push(S)},G.malloc=function(S,P){if(P===void 0||P==="arraybuffer")return b(S);switch(P){case"uint8":return g(S);case"uint16":return d(S);case"uint32":return c(S);case"int8":return m(S);case"int16":return l(S);case"int32":return y(S);case"float":case"float32":return u(S);case"double":case"float64":return A(S);case"uint8_clamped":return _(S);case"bigint64":return w(S);case"biguint64":return p(S);case"buffer":return L(S);case"data":case"dataview":return h(S);default:return null}return null};function b(S){var S=f.nextPow2(S),P=f.log2(S),F=r[P];return F.length>0?F.pop():new ArrayBuffer(S)}G.mallocArrayBuffer=b;function g(E){return new Uint8Array(b(E),0,E)}G.mallocUint8=g;function d(E){return new Uint16Array(b(2*E),0,E)}G.mallocUint16=d;function c(E){return new Uint32Array(b(4*E),0,E)}G.mallocUint32=c;function m(E){return new Int8Array(b(E),0,E)}G.mallocInt8=m;function l(E){return new Int16Array(b(2*E),0,E)}G.mallocInt16=l;function y(E){return new Int32Array(b(4*E),0,E)}G.mallocInt32=y;function u(E){return new Float32Array(b(4*E),0,E)}G.mallocFloat32=G.mallocFloat=u;function A(E){return new Float64Array(b(8*E),0,E)}G.mallocFloat64=G.mallocDouble=A;function _(E){return e?new Uint8ClampedArray(b(E),0,E):g(E)}G.mallocUint8Clamped=_;function p(E){return a?new BigUint64Array(b(8*E),0,E):null}G.mallocBigUint64=p;function w(E){return i?new BigInt64Array(b(8*E),0,E):null}G.mallocBigInt64=w;function h(E){return new DataView(b(E),0,E)}G.mallocDataView=h;function L(E){E=f.nextPow2(E);var S=f.log2(E),P=v[S];return P.length>0?P.pop():new T(E)}G.mallocBuffer=L,G.clearCache=function(){for(var S=0;S<32;++S)n.UINT8[S].length=0,n.UINT16[S].length=0,n.UINT32[S].length=0,n.INT8[S].length=0,n.INT16[S].length=0,n.INT32[S].length=0,n.FLOAT[S].length=0,n.DOUBLE[S].length=0,n.BIGUINT64[S].length=0,n.BIGINT64[S].length=0,n.UINT8C[S].length=0,r[S].length=0,v[S].length=0}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(t,B,G){var x=/[\'\"]/;B.exports=function(M){return M?(x.test(M.charAt(0))&&(M=M.substr(1)),x.test(M.charAt(M.length-1))&&(M=M.substr(0,M.length-1)),M):""}},{}],330:[function(t,B,G){B.exports=function(f,M,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var i=T[e];for(var n in i)if(!(M[n]!==void 0&&!Array.isArray(M[n])&&f[n]===M[n])&&n in M){var r;if(i[n]===!0)r=M[n];else{if(i[n]===!1)continue;if(typeof i[n]=="function"&&(r=i[n](M[n],f,M),r===void 0))continue}f[n]=r}}return f}},{}],331:[function(t,B,G){(function(x){(function(){B.exports=f;function f(T,e){if(M("noDeprecation"))return T;var a=!1;function i(){if(!a){if(M("throwDeprecation"))throw new Error(e);M("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return i}function M(T){try{if(!x.localStorage)return!1}catch{return!1}var e=x.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(t,B,G){var x=t("get-canvas-context");B.exports=function(M){return x("webgl",M)}},{"get-canvas-context":194}],333:[function(t,B,G){var x=t("../main"),f=t("object-assign"),M=x.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new x.baseCalendar,f(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,g){if(typeof b=="string"){var d=b.match(a);return d?d[0]:""}var c=this._validateYear(b),m=b.month(),l=""+this.toChineseMonth(c,m);return g&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(c,m)&&(l+="i"),l},monthNames:function(b){if(typeof b=="string"){var g=b.match(i);return g?g[0]:""}var d=this._validateYear(b),c=b.month(),m=this.toChineseMonth(d,c),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][m-1];return this.isIntercalaryMonth(d,c)&&(l="\u95F0"+l),l},monthNamesShort:function(b){if(typeof b=="string"){var g=b.match(n);return g?g[0]:""}var d=this._validateYear(b),c=b.month(),m=this.toChineseMonth(d,c),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][m-1];return this.isIntercalaryMonth(d,c)&&(l="\u95F0"+l),l},parseMonth:function(b,g){b=this._validateYear(b);var d=parseInt(g),c;if(isNaN(d))g[0]==="\u95F0"&&(c=!0,g=g.substring(1)),g[g.length-1]==="\u6708"&&(g=g.substring(0,g.length-1)),d=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(g);else{var m=g[g.length-1];c=m==="i"||m==="I"}var l=this.toMonthIndex(b,d,c);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,g){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw g.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,g,d){var c=this.intercalaryMonth(b),m=d&&g!==c;if(m||g<1||g>12)throw x.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return c?!d&&g<=c?l=g-1:l=g:l=g-1,l},toChineseMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b),c=d?12:11;if(g<0||g>c)throw x.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return d?g<d?m=g+1:m=g:m=g+1,m},intercalaryMonth:function(b){b=this._validateYear(b);var g=r[b-r[0]],d=g>>13;return d},isIntercalaryMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b);return!!d&&d===g},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,g,d){var c=this._validateYear(b,x.local.invalidyear),m=v[c-v[0]],l=m>>9&4095,y=m>>5&15,u=m&31,A;A=M.newDate(l,y,u),A.add(4-(A.dayOfWeek()||7),"d");var _=this.toJD(b,g,d)-A.toJD();return 1+Math.floor(_/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,g){b.year&&(g=b.month(),b=b.year()),b=this._validateYear(b);var d=r[b-r[0]],c=d>>13,m=c?12:11;if(g>m)throw x.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=d&1<<12-g?30:29;return l},weekDay:function(b,g,d){return(this.dayOfWeek(b,g,d)||7)<6},toJD:function(b,g,d){var c=this._validate(b,l,d,x.local.invalidDate);b=this._validateYear(c.year()),g=c.month(),d=c.day();var m=this.isIntercalaryMonth(b,g),l=this.toChineseMonth(b,g),y=o(b,l,d,m);return M.toJD(y.year,y.month,y.day)},fromJD:function(b){var g=M.fromJD(b),d=s(g.year(),g.month(),g.day()),c=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,c,d.day)},fromString:function(b){var g=b.match(e),d=this._validateYear(+g[1]),c=+g[2],m=!!g[3],l=this.toMonthIndex(d,c,m),y=+g[4];return this.newDate(d,l,y)},add:function(b,g,d){var c=b.year(),m=b.month(),l=this.isIntercalaryMonth(c,m),y=this.toChineseMonth(c,m),u=Object.getPrototypeOf(T.prototype).add.call(this,b,g,d);if(d==="y"){var A=u.year(),_=u.month(),p=this.isIntercalaryMonth(A,y),w=l&&p?this.toMonthIndex(A,y,!0):this.toMonthIndex(A,y,!1);w!==_&&u.month(w)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,i=/^??[]?/m,n=/^??[]?/m;x.calendars.chinese=T;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(b,g,d,c){var m,l;if(typeof b=="object")m=b,l=g||{};else{var y=typeof b=="number"&&b>=1888&&b<=2111;if(!y)throw new Error("Solar year outside range 1888-2111");var u=typeof g=="number"&&g>=1&&g<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var A=typeof d=="number"&&d>=1&&d<=31;if(!A)throw new Error("Solar day outside range 1 - 31");m={year:b,month:g,day:d},l=c||{}}var _=v[m.year-v[0]],p=m.year<<9|m.month<<5|m.day;l.year=p>=_?m.year:m.year-1,_=v[l.year-v[0]];var w=_>>9&4095,h=_>>5&15,L=_&31,E,S=new Date(w,h-1,L),P=new Date(m.year,m.month-1,m.day);E=Math.round((P-S)/(24*3600*1e3));var F=r[l.year-r[0]],I;for(I=0;I<13;I++){var D=F&1<<12-I?30:29;if(E<D)break;E-=D}var R=F>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+E,l}function o(b,g,d,c,m){var l,y;if(typeof b=="object")y=b,l=g||{};else{var u=typeof b=="number"&&b>=1888&&b<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var A=typeof g=="number"&&g>=1&&g<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var _=typeof d=="number"&&d>=1&&d<=30;if(!_)throw new Error("Lunar day outside range 1 - 30");var p;typeof c=="object"?(p=!1,l=c):(p=!!c,l=m||{}),y={year:b,month:g,day:d,isIntercalary:p}}var w;w=y.day-1;var h=r[y.year-r[0]],L=h>>13,E;L&&(y.month>L||y.isIntercalary)?E=y.month:E=y.month-1;for(var S=0;S<E;S++){var P=h&1<<12-S?30:29;w+=P}var F=v[y.year-v[0]],I=F>>9&4095,D=F>>5&15,R=F&31,O=new Date(I,D-1,R+w);return l.year=O.getFullYear(),l.month=1+O.getMonth(),l.day=O.getDate(),l}},{"../main":347,"object-assign":247}],334:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,x.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,x.local.invalidYear||x.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,x.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,x.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),x.calendars.coptic=M},{"../main":347,"object-assign":247}],335:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,x.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,x.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,x.local.invalidYear),400},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,x.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,a,i){var n=this.dayOfWeek(e,a,i);return n>=2&&n<=6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate);return{century:T[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate);return e=n.year()+(n.year()<0?1:0),a=n.month(),i=n.day(),i+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var i=Math.floor(e/32)+1,n=e-(i-1)*32+1;return this.newDate(a<=0?a-1:a,i,n)}});var T={20:"Fruitbat",21:"Anchovy"};x.calendars.discworld=M},{"../main":347,"object-assign":247}],336:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,x.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,x.local.invalidYear||x.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,x.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,x.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),x.calendars.ethiopian=M},{"../main":347,"object-assign":247}],337:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,x.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,x.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,x.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,x.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e<=0?e+1:e,v=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(a<7){for(var s=7;s<=this.monthsInYear(e);s++)v+=this.daysInMonth(e,s);for(var s=1;s<a;s++)v+=this.daysInMonth(e,s)}else for(var s=7;s<a;s++)v+=this.daysInMonth(e,s);return v},_delay1:function(e){var a=Math.floor((235*e-234)/19),i=12084+13753*a,n=a*29+Math.floor(i/25920);return T(3*(n+1),7)<3&&n++,n},_delay2:function(e){var a=this._delay1(e-1),i=this._delay1(e),n=this._delay1(e+1);return n-i===356?2:i-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var i=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,i,this.daysInMonth(a,i));)i++;var n=e-this.toJD(a,i,1)+1;return this.newDate(a,i,n)}});function T(e,a){return e-a*Math.floor(e/a)}x.calendars.hebrew=M},{"../main":347,"object-assign":247}],338:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,x.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,x.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var i=this._validate(T,e,a,x.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),i=T-this.toJD(e,a,1)+1;return this.newDate(e,a,i)}}),x.calendars.islamic=M},{"../main":347,"object-assign":247}],339:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,x.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,x.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,x.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,i=Math.floor((a-122.1)/365.25),n=Math.floor(365.25*i),r=Math.floor((a-n)/30.6001),v=r-Math.floor(r<14?1:13),s=i-Math.floor(v>2?4716:4715),o=a-n-Math.floor(30.6001*r);return s<=0&&s--,this.newDate(s,v,o)}}),x.calendars.julian=M},{"../main":347,"object-assign":247}],340:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,x.local.invalidYear),!1},formatYear:function(a){var i=this._validate(a,this.minMonth,this.minDay,x.local.invalidYear);a=i.year();var n=Math.floor(a/400);a=a%400,a+=a<0?400:0;var r=Math.floor(a/20);return n+"."+r+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var i=0,n=0;n<a.length;n++){var r=parseInt(a[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";i=i*20+r}return i},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,x.local.invalidYear),18},weekOfYear:function(a,i,n){return this._validate(a,i,n,x.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,x.local.invalidYear),360},daysInMonth:function(a,i){return this._validate(a,i,this.minDay,x.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,i,n){var r=this._validate(a,i,n,x.local.invalidDate);return r.day()},weekDay:function(a,i,n){return this._validate(a,i,n,x.local.invalidDate),!0},extraInfo:function(a,i,n){var r=this._validate(a,i,n,x.local.invalidDate),v=r.toJD(),s=this._toHaab(v),o=this._toTzolkin(v);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(a){a-=this.jdEpoch;var i=T(a+8+(18-1)*20,365);return[Math.floor(i/20)+1,T(i,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,i,n){var r=this._validate(a,i,n,x.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var i=Math.floor(a/360);a=a%360,a+=a<0?360:0;var n=Math.floor(a/20),r=a%20;return this.newDate(i,n,r)}});function T(a,i){return a-i*Math.floor(a/i)}function e(a,i){return T(a-1,i)+1}x.calendars.mayan=M},{"../main":347,"object-assign":247}],341:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar;var T=x.instance("gregorian");f(M.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,x.local.invalidYear||x.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,x.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,x.local.invalidMonth),r=n.year();r<0&&r++;for(var v=n.day(),s=1;s<n.month();s++)v+=this.daysPerMonth[s-1];return v+T.toJD(r+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var i=e-Math.floor(this.toJD(a,1,1)+.5)+1,n=1;i>this.daysInMonth(a,n);)i-=this.daysInMonth(a,n),n++;return this.newDate(a,n,i)}}),x.calendars.nanakshahi=M},{"../main":347,"object-assign":247}],342:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,x.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,i=this.minMonth;i<=12;i++)a+=this.NEPALI_CALENDAR_DATA[T][i];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,x.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var i=this._validate(T,e,a,x.local.invalidDate);T=i.year(),e=i.month(),a=i.day();var n=x.instance(),r=0,v=e,s=T;this._createMissingCalendarData(T);var o=T-(v>9||v===9&&a>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(r=a,v--);v!==9;)v<=0&&(v=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][v],v--;return e===9?(r+=a-this.NEPALI_CALENDAR_DATA[s][0],r<0&&(r+=n.daysInYear(o))):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(o,1,1).add(r,"d").toJD()},fromJD:function(T){var e=x.instance(),a=e.fromJD(T),i=a.year(),n=a.dayOfYear(),r=i+56;this._createMissingCalendarData(r);for(var v=9,s=this.NEPALI_CALENDAR_DATA[r][0],o=this.NEPALI_CALENDAR_DATA[r][v]-s+1;n>o;)v++,v>12&&(v=1,r++),o+=this.NEPALI_CALENDAR_DATA[r][v];var b=this.NEPALI_CALENDAR_DATA[r][v]-(o-n);return this.newDate(r,v,b)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),x.calendars.nepali=M},{"../main":347,"object-assign":247}],343:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,x.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-((n.dayOfWeek()+1)%7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,x.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e-(e>=0?474:473),v=474+T(r,2820);return i+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((v*682-110)/2816)+(v-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),i=Math.floor(a/1029983),n=T(a,1029983),r=2820;if(n!==1029982){var v=Math.floor(n/366),s=T(n,366);r=Math.floor((2134*v+2816*s+2815)/1028522)+v+1}var o=r+2820*i+474;o=o<=0?o-1:o;var b=e-this.toJD(o,1,1)+1,g=b<=186?Math.ceil(b/31):Math.ceil((b-6)/30),d=e-this.toJD(o,g,1)+1;return this.newDate(o,g,d)}});function T(e,a){return e-a*Math.floor(e/a)}x.calendars.persian=M,x.calendars.jalali=M},{"../main":347,"object-assign":247}],344:[function(t,B,G){var x=t("../main"),f=t("object-assign"),M=x.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new x.baseCalendar,f(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=this._t2gYear(a.year());return M.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,x.local.invalidYear),r=this._t2gYear(n.year());return M.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,x.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,x.local.invalidDate),r=this._t2gYear(n.year());return M.toJD(r,n.month(),n.day())},fromJD:function(e){var a=M.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),x.calendars.taiwan=T},{"../main":347,"object-assign":247}],345:[function(t,B,G){var x=t("../main"),f=t("object-assign"),M=x.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new x.baseCalendar,f(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=this._t2gYear(a.year());return M.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,x.local.invalidYear),r=this._t2gYear(n.year());return M.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,x.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,x.local.invalidDate),r=this._t2gYear(n.year());return M.toJD(r,n.month(),n.day())},fromJD:function(e){var a=M.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),x.calendars.thai=T},{"../main":347,"object-assign":247}],346:[function(t,B,G){var x=t("../main"),f=t("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new x.baseCalendar,f(M.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,x.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,i=1;i<=12;i++)a+=this.daysInMonth(e,i);return a},daysInMonth:function(e,a){for(var i=this._validate(e,a,this.minDay,x.local.invalidMonth),n=i.toJD()-24e5+.5,r=0,v=0;v<T.length;v++){if(T[v]>n)return T[r]-T[r-1];r++}return 30},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,x.local.invalidDate),r=12*(n.year()-1)+n.month()-15292,v=n.day()+T[r-1]-1;return v+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,i=0,n=0;n<T.length&&!(T[n]>a);n++)i++;var r=i+15292,v=Math.floor((r-1)/12),s=v+1,o=r-12*v,b=a-T[i-1]+1;return this.newDate(s,o,b)},isValid:function(e,a,i){var n=x.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(e=e.year!=null?e.year:e,n=e>=1276&&e<=1500),n},_validate:function(e,a,i,n){var r=x.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw n.replace(/\{0\}/,this.local.name);return r}}),x.calendars.ummalqura=M;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(t,B,G){var x=t("object-assign");function f(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}x(f.prototype,{instance:function(n,r){n=(n||"gregorian").toLowerCase(),r=r||"";var v=this._localCals[n+"-"+r];if(!v&&this.calendars[n]&&(v=new this.calendars[n](r),this._localCals[n+"-"+r]=v),!v)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return v},newDate:function(n,r,v,s,o){return s=(n!=null&&n.year?n.calendar():typeof s=="string"?this.instance(s,o):s)||this.instance(),s.newDate(n,r,v)},substituteDigits:function(n){return function(r){return(r+"").replace(/[0-9]/g,function(v){return n[v]})}},substituteChineseDigits:function(n,r){return function(v){for(var s="",o=0;v>0;){var b=v%10;s=(b===0?"":n[b]+r[o])+s,o++,v=Math.floor(v/10)}return s.indexOf(n[1]+r[1])===0&&(s=s.substr(1)),s||n[0]}}});function M(n,r,v,s){if(this._calendar=n,this._year=r,this._month=v,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(n,r){return n=""+n,"000000".substring(0,r-n.length)+n}x(M.prototype,{newDate:function(n,r,v){return this._calendar.newDate(n==null?this:n,r,v)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,r,v){if(!this._calendar.isValid(n,r,v))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=r,this._day=v,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,r){return this._calendar.add(this,n,r)},set:function(n,r){return this._calendar.set(this,n,r)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var r=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}x(e.prototype,{_validateLevel:0,newDate:function(n,r,v){return n==null?this.today():(n.year&&(this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),v=n.day(),r=n.month(),n=n.year()),new M(this,n,r,v))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+T(Math.abs(r.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(v.month()+this.monthsInYear(v)-this.firstMonth)%this.monthsInYear(v)+this.minMonth},fromMonthOfYear:function(n,r){var v=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,v,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),v},daysInYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(n,r,v){return this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(n,r,v){return this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,r,v),r,v)},_add:function(n,r,v){if(this._validateLevel++,v==="d"||v==="w"){var s=n.toJD()+r*(v==="w"?this.daysInWeek():1),o=n.calendar().fromJD(s);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var b=n.year()+(v==="y"?r:0),g=n.monthOfYear()+(v==="m"?r:0),o=n.day(),d=function(l){for(;g<l.minMonth;)b--,g+=l.monthsInYear(b);for(var y=l.monthsInYear(b);g>y-1+l.minMonth;)b++,g-=y,y=l.monthsInYear(b)};v==="y"?(n.month()!==this.fromMonthOfYear(b,g)&&(g=this.newDate(b,n.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(b)),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g)))):v==="m"&&(d(this),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g))));var c=[b,this.fromMonthOfYear(b,g),o];return this._validateLevel--,c}catch(m){throw this._validateLevel--,m}},_correctAdd:function(n,r,v,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(r[0]===0||n.year()>0!=r[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],b=v<0?-1:1;r=this._add(n,v*o[0]+b*o[1],o[2])}return n.date(r[0],r[1],r[2])},set:function(n,r,v){this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var s=v==="y"?r:n.year(),o=v==="m"?r:n.month(),b=v==="d"?r:n.day();return(v==="y"||v==="m")&&(b=Math.min(b,this.daysInMonth(s,o))),n.date(s,o,b)},isValid:function(n,r,v){this._validateLevel++;var s=this.hasYearZero||n!==0;if(s){var o=this.newDate(n,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(o)&&v>=this.minDay&&v-this.minDay<this.daysInMonth(o)}return this._validateLevel--,s},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(n){return this.fromJD(i.instance().fromJSDate(n).toJD())},_validate:function(n,r,v,s){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,r,v))throw s.replace(/\{0\}/,this.local.name);var o=this.newDate(n,r,v);return this._validateLevel--,o}catch(b){throw this._validateLevel--,b}}});function a(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}a.prototype=new e,x(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var r=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),v=r.year()+(r.year()<0?1:0);return v%4===0&&(v%100!==0||v%400===0)},weekOfYear:function(n,r,v){var s=this.newDate(n,r,v);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(n,r,v){return(this.dayOfWeek(n,r,v)||7)<6},toJD:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);n=s.year(),r=s.month(),v=s.day(),n<0&&n++,r<3&&(r+=12,n--);var o=Math.floor(n/100),b=2-o+Math.floor(o/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(r+1))+v+b-1524.5},fromJD:function(n){var r=Math.floor(n+.5),v=Math.floor((r-186721625e-2)/36524.25);v=r+1+v-Math.floor(v/4);var s=v+1524,o=Math.floor((s-122.1)/365.25),b=Math.floor(365.25*o),g=Math.floor((s-b)/30.6001),d=s-b-Math.floor(g*30.6001),c=g-(g>13.5?13:1),m=o-(c>2.5?4716:4715);return m<=0&&m--,this.newDate(m,c,d)},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),o=new Date(s.year(),s.month()-1,s.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var i=B.exports=new f;i.cdate=M,i.baseCalendar=e,i.calendars.gregorian=a},{"object-assign":247}],348:[function(t,B,G){var x=t("object-assign"),f=t("./main");x(f.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),f.local=f.regionalOptions[""],x(f.cdate.prototype,{formatDate:function(M,T){return typeof M!="string"&&(T=M,M=""),this._calendar.formatDate(M||"",this,T)}}),x(f.baseCalendar.prototype,{UNIX_EPOCH:f.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:f.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,T,e){if(typeof M!="string"&&(e=T,T=M,M=""),!T)return"";if(T.calendar()!==this)throw f.local.invalidFormat||f.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,i=e.dayNames||this.local.dayNames,n=e.monthNumbers||this.local.monthNumbers,r=e.monthNamesShort||this.local.monthNamesShort,v=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(_,p){for(var w=1;A+w<M.length&&M.charAt(A+w)===_;)w++;return A+=w-1,Math.floor(w/(p||1))>1},o=function(_,p,w,h){var L=""+p;if(s(_,h))for(;L.length<w;)L="0"+L;return L},b=function(_,p,w,h){return s(_)?h[p]:w[p]},g=this,d=function(_){return typeof n=="function"?n.call(g,_,s("m")):l(o("m",_.month(),2))},c=function(_,p){return p?typeof v=="function"?v.call(g,_):v[_.month()-g.minMonth]:typeof r=="function"?r.call(g,_):r[_.month()-g.minMonth]},m=this.local.digits,l=function(_){return e.localNumbers&&m?m(_):_},y="",u=!1,A=0;A<M.length;A++)if(u)M.charAt(A)==="'"&&!s("'")?u=!1:y+=M.charAt(A);else switch(M.charAt(A)){case"d":y+=l(o("d",T.day(),2));break;case"D":y+=b("D",T.dayOfWeek(),a,i);break;case"o":y+=o("o",T.dayOfYear(),3);break;case"w":y+=o("w",T.weekOfYear(),2);break;case"m":y+=d(T);break;case"M":y+=c(T,s("M"));break;case"y":y+=s("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":s("Y",2),y+=T.formatYear();break;case"J":y+=T.toJD();break;case"@":y+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?y+="'":u=!0;break;default:y+=M.charAt(A)}return y},parseDate:function(M,T,e){if(T==null)throw f.local.invalidArguments||f.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;M=M||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var i=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,v=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,o=e.monthNames||this.local.monthNames,b=-1,g=-1,d=-1,c=-1,m=-1,l=!1,y=!1,u=function(I,D){for(var R=1;S+R<M.length&&M.charAt(S+R)===I;)R++;return S+=R-1,Math.floor(R/(D||1))>1},A=function(I,D){var R=u(I,D),O=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],z=new RegExp("^-?\\d{1,"+O+"}"),H=T.substring(E).match(z);if(!H)throw(f.local.missingNumberAt||f.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=H[0].length,parseInt(H[0],10)},_=this,p=function(){if(typeof v=="function"){u("m");var I=v.call(_,T.substring(E));return E+=I.length,I}return A("m")},w=function(I,D,R,O){for(var z=u(I,O)?R:D,H=0;H<z.length;H++)if(T.substr(E,z[H].length).toLowerCase()===z[H].toLowerCase())return E+=z[H].length,H+_.minMonth;throw(f.local.unknownNameAt||f.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},h=function(){if(typeof o=="function"){var I=u("M")?o.call(_,T.substring(E)):s.call(_,T.substring(E));return E+=I.length,I}return w("M",s,o)},L=function(){if(T.charAt(E)!==M.charAt(S))throw(f.local.unexpectedLiteralAt||f.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,S=0;S<M.length;S++)if(y)M.charAt(S)==="'"&&!u("'")?y=!1:L();else switch(M.charAt(S)){case"d":c=A("d");break;case"D":w("D",i,n);break;case"o":m=A("o");break;case"w":A("w");break;case"m":d=p();break;case"M":d=h();break;case"y":var P=S;l=!u("y",2),S=P,g=A("y",2);break;case"Y":g=A("Y",2);break;case"J":b=A("J")+.5,T.charAt(E)==="."&&(E++,A("J"));break;case"@":b=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":u("'")?L():y=!0;break;default:L()}if(E<T.length)throw f.local.unexpectedText||f.regionalOptions[""].unexpectedText;if(g===-1?g=this.today().year():g<100&&l&&(g+=a===-1?1900:this.today().year()-this.today().year()%100-(g<=a?0:100)),typeof d=="string"&&(d=r.call(this,g,d)),m>-1){d=1,c=m;for(var F=this.daysInMonth(g,d);c>F;F=this.daysInMonth(g,d))d++,c-=F}return b>-1?this.fromJD(b):this.newDate(g,d,c)},determineDate:function(M,T,e,a,i){e&&typeof e!="object"&&(i=a,a=e,e=null),typeof a!="string"&&(i=a,a="");var n=this,r=function(v){try{return n.parseDate(a,v,i)}catch{}v=v.toLowerCase();for(var s=(v.match(/^c/)&&e?e.newDate():null)||n.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=o.exec(v);b;)s.add(parseInt(b[1],10),b[2]||"d"),b=o.exec(v);return s};return T=T?T.newDate():null,M=M==null?T:typeof M=="string"?r(M):typeof M=="number"?isNaN(M)||M===1/0||M===-1/0?T:n.today().add(M,"d"):n.newDate(M),M}})},{"./main":347,"object-assign":247}],349:[function(t,B,G){B.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(t,B,G){var x=t("./arrow_paths"),f=t("../../plots/font_attributes"),M=t("../../plots/cartesian/constants"),T=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:f({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:x.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:x.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:f({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("./draw").draw;B.exports=function(i){var n=i._fullLayout,r=x.filterVisible(n.annotations);if(r.length&&i._fullData.length)return x.syncOrAsync([M,T],i)};function T(a){var i=a._fullLayout;x.filterVisible(i.annotations).forEach(function(n){var r=f.getFromId(a,n.xref),v=f.getFromId(a,n.yref),s=f.getRefType(n.xref),o=f.getRefType(n.yref);n._extremes={},s==="range"&&e(n,r),o==="range"&&e(n,v)})}function e(a,i){var n=i._id,r=n.charAt(0),v=a[r],s=a["a"+r],o=a[r+"ref"],b=a["a"+r+"ref"],g=a["_"+r+"padplus"],d=a["_"+r+"padminus"],c={x:1,y:-1}[r]*a[r+"shift"],m=3*a.arrowsize*a.arrowwidth||0,l=m+c,y=m-c,u=3*a.startarrowsize*a.arrowwidth||0,A=u+c,_=u-c,p;if(b===o){var w=f.findExtremes(i,[i.r2c(v)],{ppadplus:l,ppadminus:y}),h=f.findExtremes(i,[i.r2c(s)],{ppadplus:Math.max(g,A),ppadminus:Math.max(d,_)});p={min:[w.min[0],h.min[0]],max:[w.max[0],h.max[0]]}}else A=s?A+s:A,_=s?_-s:_,p=f.findExtremes(i,[i.r2c(v)],{ppadplus:Math.max(g,l,A),ppadminus:Math.max(d,y,_)});a._extremes[n]=p}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(t,B,G){var x=t("../../lib"),f=t("../../registry"),M=t("../../plot_api/plot_template").arrayEditor;B.exports={hasClickToShow:T,onClick:e};function T(n,r){var v=a(n,r);return v.on.length>0||v.explicitOff.length>0}function e(n,r){var v=a(n,r),s=v.on,o=v.off.concat(v.explicitOff),b={},g=n._fullLayout.annotations,d,c;if(!!(s.length||o.length)){for(d=0;d<s.length;d++)c=M(n.layout,"annotations",g[s[d]]),c.modifyItem("visible",!0),x.extendFlat(b,c.getUpdateObj());for(d=0;d<o.length;d++)c=M(n.layout,"annotations",g[o[d]]),c.modifyItem("visible",!1),x.extendFlat(b,c.getUpdateObj());return f.call("update",n,{},b)}}function a(n,r){var v=n._fullLayout.annotations,s=[],o=[],b=[],g=(r||[]).length,d,c,m,l,y,u,A,_;for(d=0;d<v.length;d++)if(m=v[d],l=m.clicktoshow,l){for(c=0;c<g;c++)if(y=r[c],u=y.xaxis,A=y.yaxis,u._id===m.xref&&A._id===m.yref&&u.d2r(y.x)===i(m._xclick,u)&&A.d2r(y.y)===i(m._yclick,A)){m.visible?l==="onout"?_=o:_=b:_=s,_.push(d);break}c===g&&m.visible&&l==="onout"&&o.push(d)}return{on:s,off:o,explicitOff:b}}function i(n,r){return r.type==="log"?r.l2r(n):r.d2r(n)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(t,B,G){var x=t("../../lib"),f=t("../color");B.exports=function(T,e,a,i){i("opacity");var n=i("bgcolor"),r=i("bordercolor"),v=f.opacity(r);i("borderpad");var s=i("borderwidth"),o=i("showarrow");i("text",o?" ":a._dfltTitle.annotation),i("textangle"),x.coerceFont(i,"font",a.font),i("width"),i("align");var b=i("height");if(b&&i("valign"),o){var g=i("arrowside"),d,c;g.indexOf("end")!==-1&&(d=i("arrowhead"),c=i("arrowsize")),g.indexOf("start")!==-1&&(i("startarrowhead",d),i("startarrowsize",c)),i("arrowcolor",v?e.bordercolor:f.defaultLine),i("arrowwidth",(v&&s||1)*2),i("standoff"),i("startstandoff")}var m=i("hovertext"),l=a.hoverlabel||{};if(m){var y=i("hoverlabel.bgcolor",l.bgcolor||(f.opacity(n)?f.rgb(n):f.defaultLine)),u=i("hoverlabel.bordercolor",l.bordercolor||f.contrast(y));x.coerceFont(i,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||u})}i("captureevents",!!m)}},{"../../lib":515,"../color":367}],354:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib/to_log_range");B.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!(n||r))return;var v=T._fullLayout.annotations,s=e._id.charAt(0),o,b;function g(c){var m=o[c],l=null;n?l=f(m,e.range):l=Math.pow(10,m),x(l)||(l=null),i(b+c,l)}for(var d=0;d<v.length;d++)o=v[d],b="annotations["+d+"].",o[s+"ref"]===e._id&&g(s),o["a"+s+"ref"]===e._id&&g("a"+s)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../../plots/array_container_defaults"),T=t("./common_defaults"),e=t("./attributes");B.exports=function(n,r){M(n,r,{name:"annotations",handleItemDefaults:a})};function a(i,n,r){function v(L,E){return x.coerce(i,n,e,L,E)}var s=v("visible"),o=v("clicktoshow");if(!!(s||o)){T(i,n,r,v);for(var b=n.showarrow,g=["x","y"],d=[-10,-30],c={_fullLayout:r},m=0;m<2;m++){var l=g[m],y=f.coerceRef(i,n,c,l,"","paper");if(y!=="paper"){var u=f.getFromId(c,y);u._annIndices.push(n._index)}if(f.coercePosition(n,c,v,y,l,.5),b){var A="a"+l,_=f.coerceRef(i,n,c,A,"pixel",["pixel","paper"]);_!=="pixel"&&_!==y&&(_=n[A]="pixel");var p=_==="pixel"?d[m]:.4;f.coercePosition(n,c,v,_,A,p)}v(l+"anchor"),v(l+"shift")}if(x.noneOrAll(i,n,["x","y"]),b&&x.noneOrAll(i,n,["ax","ay"]),o){var w=v("xclick"),h=v("yclick");n._xclick=w===void 0?n.x:f.cleanPosition(w,c,n.xref),n._yclick=h===void 0?n.y:f.cleanPosition(h,c,n.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../../plots/cartesian/axes"),i=t("../color"),n=t("../drawing"),r=t("../fx"),v=t("../../lib/svg_text_utils"),s=t("../../lib/setcursor"),o=t("../dragelement"),b=t("../../plot_api/plot_template").arrayEditor,g=t("./draw_arrow_head");B.exports={draw:d,drawOne:c,drawRaw:l};function d(y){var u=y._fullLayout;u._infolayer.selectAll(".annotation").remove();for(var A=0;A<u.annotations.length;A++)u.annotations[A].visible&&c(y,A);return M.previousPromises(y)}function c(y,u){var A=y._fullLayout,_=A.annotations[u]||{},p=a.getFromId(y,_.xref),w=a.getFromId(y,_.yref);p&&p.setScale(),w&&w.setScale(),l(y,_,u,!1,p,w)}function m(y,u,A,_,p){var w=p[A],h=p[A+"ref"],L=A.indexOf("y")!==-1,E=a.getRefType(h)==="domain",S=L?_.h:_.w;return y?E?w+(L?-u:u)/y._length:y.p2r(y.r2p(w)+u):w+(L?-u:u)/S}function l(y,u,A,_,p,w){var h=y._fullLayout,L=y._fullLayout._size,E=y._context.edits,S,P;_?(S="annotation-"+_,P=_+".annotations"):(S="annotation",P="annotations");var F=b(y.layout,P,u),I=F.modifyBase,D=F.modifyItem,R=F.getUpdateObj;h._infolayer.selectAll("."+S+'[data-index="'+A+'"]').remove();var O="clip"+h._uid+"_ann"+A;if(!u._input||u.visible===!1){x.selectAll("#"+O).remove();return}var z={x:{},y:{}},H=+u.textangle||0,Y=h._infolayer.append("g").classed(S,!0).attr("data-index",String(A)).style("opacity",u.opacity),ee=Y.append("g").classed("annotation-text-g",!0),j=E[u.showarrow?"annotationTail":"annotationPosition"],X=u.captureevents||E.annotationText||j;function ae(se){var _e={index:A,annotation:u._input,fullAnnotation:u,event:se};return _&&(_e.subplotId=_),_e}var fe=ee.append("g").style("pointer-events",X?"all":null).call(s,"pointer").on("click",function(){y._dragging=!1,y.emit("plotly_clickannotation",ae(x.event))});u.hovertext&&fe.on("mouseover",function(){var se=u.hoverlabel,_e=se.font,ue=this.getBoundingClientRect(),ge=y.getBoundingClientRect();r.loneHover({x0:ue.left-ge.left,x1:ue.right-ge.left,y:(ue.top+ue.bottom)/2-ge.top,text:u.hovertext,color:se.bgcolor,borderColor:se.bordercolor,fontFamily:_e.family,fontSize:_e.size,fontColor:_e.color},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:y})}).on("mouseout",function(){r.loneUnhover(h._hoverlayer.node())});var K=u.borderwidth,J=u.borderpad,U=K+J,V=fe.append("rect").attr("class","bg").style("stroke-width",K+"px").call(i.stroke,u.bordercolor).call(i.fill,u.bgcolor),q=u.width||u.height,re=h._topclips.selectAll("#"+O).data(q?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),re.exit().remove();var Z=u.font,Q=h._meta?T.templateString(u.text,h._meta):u.text,ie=fe.append("text").classed("annotation-text",!0).text(Q);function oe(se){return se.call(n.font,Z).attr({"text-anchor":{left:"start",right:"end"}[u.align]||"middle"}),v.convertToTspans(se,y,ne),se}function ne(){var se=ie.selectAll("a");if(se.size()===1&&se.text()===ie.text()){var _e=fe.insert("a",":first-child").attr({"xlink:xlink:href":se.attr("xlink:href"),"xlink:xlink:show":se.attr("xlink:show")}).style({cursor:"pointer"});_e.node().appendChild(V.node())}var ue=fe.select(".annotation-text-math-group"),ge=!ue.empty(),xe=n.bBox((ge?ue:ie).node()),ye=xe.width,be=xe.height,Se=u.width||ye,Re=u.height||be,Ve=Math.round(Se+2*U),Ae=Math.round(Re+2*U);function Ce(rr,er){return er==="auto"&&(rr<1/3?er="left":rr>2/3?er="right":er="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[er]}for(var Ze=!1,Ye=["x","y"],ze=0;ze<Ye.length;ze++){var Ie=Ye[ze],Ge=u[Ie+"ref"]||Ie,dt=u["a"+Ie+"ref"],Rt={x:p,y:w}[Ie],Qt=(H+(Ie==="x"?0:-90))*Math.PI/180,Bt=Ve*Math.cos(Qt),Ct=Ae*Math.sin(Qt),Kt=Math.abs(Bt)+Math.abs(Ct),Ot=u[Ie+"anchor"],St=u[Ie+"shift"]*(Ie==="x"?1:-1),Xe=z[Ie],at,We,Ee,He,Ke,et=a.getRefType(Ge);if(Rt&&et!=="domain"){var At=Rt.r2fraction(u[Ie]);(At<0||At>1)&&(dt===Ge?(At=Rt.r2fraction(u["a"+Ie]),(At<0||At>1)&&(Ze=!0)):Ze=!0),at=Rt._offset+Rt.r2p(u[Ie]),He=.5}else{var mt=et==="domain";Ie==="x"?(Ee=u[Ie],at=mt?Rt._offset+Rt._length*Ee:at=L.l+L.w*Ee):(Ee=1-u[Ie],at=mt?Rt._offset+Rt._length*Ee:at=L.t+L.h*Ee),He=u.showarrow?.5:Ee}if(u.showarrow){Xe.head=at;var Mt=u["a"+Ie];if(Ke=Bt*Ce(.5,u.xanchor)-Ct*Ce(.5,u.yanchor),dt===Ge){var Gt=a.getRefType(dt);Gt==="domain"?(Ie==="y"&&(Mt=1-Mt),Xe.tail=Rt._offset+Rt._length*Mt):Gt==="paper"?Ie==="y"?(Mt=1-Mt,Xe.tail=L.t+L.h*Mt):Xe.tail=L.l+L.w*Mt:Xe.tail=Rt._offset+Rt.r2p(Mt),We=Ke}else Xe.tail=at+Mt,We=Ke+Mt;Xe.text=Xe.tail+Ke;var zt=h[Ie==="x"?"width":"height"];if(Ge==="paper"&&(Xe.head=T.constrain(Xe.head,1,zt-1)),dt==="pixel"){var Ht=-Math.max(Xe.tail-3,Xe.text),Xt=Math.min(Xe.tail+3,Xe.text)-zt;Ht>0?(Xe.tail+=Ht,Xe.text+=Ht):Xt>0&&(Xe.tail-=Xt,Xe.text-=Xt)}Xe.tail+=St,Xe.head+=St}else Ke=Kt*Ce(He,Ot),We=Ke,Xe.text=at+Ke;Xe.text+=St,Ke+=St,We+=St,u["_"+Ie+"padplus"]=Kt/2+We,u["_"+Ie+"padminus"]=Kt/2-We,u["_"+Ie+"size"]=Kt,u["_"+Ie+"shift"]=Ke}if(Ze){fe.remove();return}var Wt=0,sr=0;if(u.align!=="left"&&(Wt=(Se-ye)*(u.align==="center"?.5:1)),u.valign!=="top"&&(sr=(Re-be)*(u.valign==="middle"?.5:1)),ge)ue.select("svg").attr({x:U+Wt-1,y:U+sr}).call(n.setClipUrl,q?O:null,y);else{var Gr=U+sr-xe.top,cn=U+Wt-xe.left;ie.call(v.positionText,cn,Gr).call(n.setClipUrl,q?O:null,y)}re.select("rect").call(n.setRect,U,U,Se,Re),V.call(n.setRect,K/2,K/2,Ve-K,Ae-K),fe.call(n.setTranslate,Math.round(z.x.text-Ve/2),Math.round(z.y.text-Ae/2)),ee.attr({transform:"rotate("+H+","+z.x.text+","+z.y.text+")"});var en=function(rr,er){Y.selectAll(".annotation-arrow-g").remove();var jt=z.x.head,Mr=z.y.head,it=z.x.tail+rr,Qe=z.y.tail+er,ft=z.x.text+rr,ct=z.y.text+er,Et=T.rotationXYMatrix(H,ft,ct),Nt=T.apply2DTransform(Et),Pe=T.apply2DTransform2(Et),Le=+V.attr("width"),ot=+V.attr("height"),ut=ft-.5*Le,pt=ut+Le,Pt=ct-.5*ot,xt=Pt+ot,Lt=[[ut,Pt,ut,xt],[ut,xt,pt,xt],[pt,xt,pt,Pt],[pt,Pt,ut,Pt]].map(Pe);if(!Lt.reduce(function(nt,It){return nt^!!T.segmentsIntersect(jt,Mr,jt+1e6,Mr+1e6,It[0],It[1],It[2],It[3])},!1)){Lt.forEach(function(nt){var It=T.segmentsIntersect(it,Qe,jt,Mr,nt[0],nt[1],nt[2],nt[3]);It&&(it=It.x,Qe=It.y)});var Zt=u.arrowwidth,ur=u.arrowcolor,Pr=u.arrowside,Ar=Y.append("g").style({opacity:i.opacity(ur)}).classed("annotation-arrow-g",!0),kr=Ar.append("path").attr("d","M"+it+","+Qe+"L"+jt+","+Mr).style("stroke-width",Zt+"px").call(i.stroke,i.rgb(ur));if(g(kr,Pr,u),E.annotationPosition&&kr.node().parentNode&&!_){var Zr=jt,lr=Mr;if(u.standoff){var br=Math.sqrt(Math.pow(jt-it,2)+Math.pow(Mr-Qe,2));Zr+=u.standoff*(it-jt)/br,lr+=u.standoff*(Qe-Mr)/br}var Or=Ar.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(it-Zr)+","+(Qe-lr),transform:e(Zr,lr)}).style("stroke-width",Zt+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)"),Hr,Lr;o.init({element:Or.node(),gd:y,prepFn:function(){var nt=n.getTranslate(fe);Hr=nt.x,Lr=nt.y,p&&p.autorange&&I(p._name+".autorange",!0),w&&w.autorange&&I(w._name+".autorange",!0)},moveFn:function(nt,It){var Jt=Nt(Hr,Lr),fr=Jt[0]+nt,Nr=Jt[1]+It;fe.call(n.setTranslate,fr,Nr),D("x",m(p,nt,"x",L,u)),D("y",m(w,It,"y",L,u)),u.axref===u.xref&&D("ax",m(p,nt,"ax",L,u)),u.ayref===u.yref&&D("ay",m(w,It,"ay",L,u)),Ar.attr("transform",e(nt,It)),ee.attr({transform:"rotate("+H+","+fr+","+Nr+")"})},doneFn:function(){f.call("_guiRelayout",y,R());var nt=document.querySelector(".js-notes-box-panel");nt&&nt.redraw(nt.selectedObj)}})}}};if(u.showarrow&&en(0,0),j){var st;o.init({element:fe.node(),gd:y,prepFn:function(){st=ee.attr("transform")},moveFn:function(rr,er){var jt="pointer";if(u.showarrow)u.axref===u.xref?D("ax",m(p,rr,"ax",L,u)):D("ax",u.ax+rr),u.ayref===u.yref?D("ay",m(w,er,"ay",L.w,u)):D("ay",u.ay+er),en(rr,er);else{if(_)return;var Mr,it;if(p)Mr=m(p,rr,"x",L,u);else{var Qe=u._xsize/L.w,ft=u.x+(u._xshift-u.xshift)/L.w-Qe/2;Mr=o.align(ft+rr/L.w,Qe,0,1,u.xanchor)}if(w)it=m(w,er,"y",L,u);else{var ct=u._ysize/L.h,Et=u.y-(u._yshift+u.yshift)/L.h-ct/2;it=o.align(Et-er/L.h,ct,0,1,u.yanchor)}D("x",Mr),D("y",it),(!p||!w)&&(jt=o.getCursor(p?.5:Mr,w?.5:it,u.xanchor,u.yanchor))}ee.attr({transform:e(rr,er)+st}),s(fe,jt)},clickFn:function(rr,er){u.captureevents&&y.emit("plotly_clickannotation",ae(er))},doneFn:function(){s(fe),f.call("_guiRelayout",y,R());var rr=document.querySelector(".js-notes-box-panel");rr&&rr.redraw(rr.selectedObj)}})}}E.annotationText?ie.call(v.makeEditable,{delegate:fe,gd:y}).call(oe).on("edit",function(se){u.text=se,this.call(oe),D("text",se),p&&p.autorange&&I(p._name+".autorange",!0),w&&w.autorange&&I(w._name+".autorange",!0),f.call("_guiRelayout",y,R())}):ie.call(oe)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(t,B,G){var x=t("@plotly/d3"),f=t("../color"),M=t("./arrow_paths"),T=t("../../lib"),e=T.strScale,a=T.strRotate,i=T.strTranslate;B.exports=function(r,v,s){var o=r.node(),b=M[s.arrowhead||0],g=M[s.startarrowhead||0],d=(s.arrowwidth||1)*(s.arrowsize||1),c=(s.arrowwidth||1)*(s.startarrowsize||1),m=v.indexOf("start")>=0,l=v.indexOf("end")>=0,y=b.backoff*d+s.standoff,u=g.backoff*c+s.startstandoff,A,_,p,w;if(o.nodeName==="line"){A={x:+r.attr("x1"),y:+r.attr("y1")},_={x:+r.attr("x2"),y:+r.attr("y2")};var h=A.x-_.x,L=A.y-_.y;if(p=Math.atan2(L,h),w=p+Math.PI,y&&u&&y+u>Math.sqrt(h*h+L*L)){ee();return}if(y){if(y*y>h*h+L*L){ee();return}var E=y*Math.cos(p),S=y*Math.sin(p);_.x+=E,_.y+=S,r.attr({x2:_.x,y2:_.y})}if(u){if(u*u>h*h+L*L){ee();return}var P=u*Math.cos(p),F=u*Math.sin(p);A.x-=P,A.y-=F,r.attr({x1:A.x,y1:A.y})}}else if(o.nodeName==="path"){var I=o.getTotalLength(),D="";if(I<y+u){ee();return}var R=o.getPointAtLength(0),O=o.getPointAtLength(.1);p=Math.atan2(R.y-O.y,R.x-O.x),A=o.getPointAtLength(Math.min(u,I)),D="0px,"+u+"px,";var z=o.getPointAtLength(I),H=o.getPointAtLength(I-.1);w=Math.atan2(z.y-H.y,z.x-H.x),_=o.getPointAtLength(Math.max(0,I-y));var Y=D?u+y:y;D+=I-Y+"px,"+I+"px",r.style("stroke-dasharray",D)}function ee(){r.style("stroke-dasharray","0px,100px")}function j(X,ae,fe,K){!X.path||(X.noRotate&&(fe=0),x.select(o.parentNode).append("path").attr({class:r.attr("class"),d:X.path,transform:i(ae.x,ae.y)+a(fe*180/Math.PI)+e(K)}).style({fill:f.rgb(s.arrowcolor),"stroke-width":0}))}m&&j(g,A,p,c),l&&j(b,_,w,d)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(t,B,G){var x=t("./draw"),f=t("./click");B.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:x.draw,drawOne:x.drawOne,drawRaw:x.drawRaw,hasClickToShow:f.hasClickToShow,onClick:f.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(t,B,G){var x=t("../annotations/attributes"),f=t("../../plot_api/edit_types").overrideAll,M=t("../../plot_api/plot_template").templatedArray;B.exports=f(M("annotation",{visible:x.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:x.xanchor,xshift:x.xshift,yanchor:x.yanchor,yshift:x.yshift,text:x.text,textangle:x.textangle,font:x.font,width:x.width,height:x.height,opacity:x.opacity,align:x.align,valign:x.valign,bgcolor:x.bgcolor,bordercolor:x.bordercolor,borderpad:x.borderpad,borderwidth:x.borderwidth,showarrow:x.showarrow,arrowcolor:x.arrowcolor,arrowhead:x.arrowhead,startarrowhead:x.startarrowhead,arrowside:x.arrowside,arrowsize:x.arrowsize,startarrowsize:x.startarrowsize,arrowwidth:x.arrowwidth,standoff:x.standoff,startstandoff:x.startstandoff,hovertext:x.hovertext,hoverlabel:x.hoverlabel,captureevents:x.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes");B.exports=function(e){for(var a=e.fullSceneLayout,i=a.annotations,n=0;n<i.length;n++)M(i[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function M(T,e){var a=e.fullSceneLayout,i=a.domain,n=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},x.extendFlat(T._xa,r),f.setConvert(T._xa),T._xa._offset=n.l+i.x[0]*n.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*n.w*(i.x[1]-i.x[0])},T._ya={},x.extendFlat(T._ya,r),f.setConvert(T._ya),T._ya._offset=n.t+(1-i.y[1])*n.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*n.h*(i.y[1]-i.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../../plots/array_container_defaults"),T=t("../annotations/common_defaults"),e=t("./attributes");B.exports=function(n,r,v){M(n,r,{name:"annotations",handleItemDefaults:a,fullLayout:v.fullLayout})};function a(i,n,r,v){function s(g,d){return x.coerce(i,n,e,g,d)}function o(g){var d=g+"axis",c={_fullLayout:{}};return c._fullLayout[d]=r[d],f.coercePosition(n,c,s,g,g,.5)}var b=s("visible");!b||(T(i,n,v.fullLayout,s),o("x"),o("y"),o("z"),x.noneOrAll(i,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",s("ax",-10),s("ay",-30),x.noneOrAll(i,n,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(t,B,G){var x=t("../annotations/draw").drawRaw,f=t("../../plots/gl3d/project"),M=["x","y","z"];B.exports=function(e){for(var a=e.fullSceneLayout,i=e.dataScale,n=a.annotations,r=0;r<n.length;r++){for(var v=n[r],s=!1,o=0;o<3;o++){var b=M[o],g=v[b],d=a[b+"axis"],c=d.r2fraction(g);if(c<0||c>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(v._pdata=f(e.glplot.cameraParams,[a.xaxis.r2l(v.x)*i[0],a.yaxis.r2l(v.y)*i[1],a.zaxis.r2l(v.z)*i[2]]),x(e.graphDiv,v,r,e.id,v._xa,v._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(t,B,G){var x=t("../../registry"),f=t("../../lib");B.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:M,convert:t("./convert"),draw:t("./draw")};function M(T,e){var a=x.subplotsRegistry.gl3d;if(!!a)for(var i=a.attrRegex,n=Object.keys(T),r=0;r<n.length;r++){var v=n[r];i.test(v)&&(T[v].annotations||[]).length&&(f.pushUnique(e._basePlotModules,a),f.pushUnique(e._subplots.gl3d,v))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(t,B,G){B.exports=t("world-calendars/dist/main"),t("world-calendars/dist/plus"),t("world-calendars/dist/calendars/chinese"),t("world-calendars/dist/calendars/coptic"),t("world-calendars/dist/calendars/discworld"),t("world-calendars/dist/calendars/ethiopian"),t("world-calendars/dist/calendars/hebrew"),t("world-calendars/dist/calendars/islamic"),t("world-calendars/dist/calendars/julian"),t("world-calendars/dist/calendars/mayan"),t("world-calendars/dist/calendars/nanakshahi"),t("world-calendars/dist/calendars/nepali"),t("world-calendars/dist/calendars/persian"),t("world-calendars/dist/calendars/taiwan"),t("world-calendars/dist/calendars/thai"),t("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(t,B,G){var x=t("./calendars"),f=t("../../lib"),M=t("../../constants/numerical"),T=M.EPOCHJD,e=M.ONEDAY,a={valType:"enumerated",values:f.sortObjectKeys(x.calendars),editType:"calc",dflt:"gregorian"},i=function(p,w,h,L){var E={};return E[h]=a,f.coerce(p,w,E,h,L)},n=function(p,w,h,L){for(var E=0;E<h.length;E++)i(p,w,h[E]+"calendar",L.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},v={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",b={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:o,w:o,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(p,w,h){for(var L=Math.floor((w+.05)/e)+T,E=c(h).fromJD(L),S=0,P,F,I,D,R;(S=p.indexOf("%",S))!==-1;)P=p.charAt(S+1),P==="0"||P==="-"||P==="_"?(I=3,F=p.charAt(S+2),P==="_"&&(P="-")):(F=P,P="0",I=2),D=b[F],D?(D===o?R=o:R=E.formatDate(D[P]),p=p.substr(0,S)+R+p.substr(S+I),S+=R.length):S+=I;return p}var d={};function c(p){var w=d[p];return w||(w=d[p]=x.instance(p),w)}function m(p){return f.extendFlat({},a,{description:p})}function l(p){return"Sets the calendar system to use with `"+p+"` date data."}var y={xcalendar:m(l("x"))},u=f.extendFlat({},y,{ycalendar:m(l("y"))}),A=f.extendFlat({},u,{zcalendar:m(l("z"))}),_=m(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));B.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:A,surface:A,mesh3d:A,scattergl:u,ohlc:y,candlestick:y},layout:{calendar:m(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:i,handleTraceDefaults:n,CANONICAL_SUNDAY:v,CANONICAL_TICK:r,DFLTRANGE:s,getCal:c,worldCalFmt:g}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(t,B,G){G.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],G.defaultLine="#444",G.lightLine="#eee",G.background="#fff",G.borderLine="#BEC8D9",G.lightFraction=100*(14-4)/(15-4)},{}],367:[function(t,B,G){var x=t("tinycolor2"),f=t("fast-isnumeric"),M=t("../../lib/array").isTypedArray,T=B.exports={},e=t("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var i=T.background=e.background;T.tinyRGB=function(r){var v=r.toRgb();return"rgb("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+")"},T.rgb=function(r){return T.tinyRGB(x(r))},T.opacity=function(r){return r?x(r).getAlpha():0},T.addOpacity=function(r,v){var s=x(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+v+")"},T.combine=function(r,v){var s=x(r).toRgb();if(s.a===1)return x(r).toRgbString();var o=x(v||i).toRgb(),b=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},g={r:b.r*(1-s.a)+s.r*s.a,g:b.g*(1-s.a)+s.g*s.a,b:b.b*(1-s.a)+s.b*s.a};return x(g).toRgbString()},T.contrast=function(r,v,s){var o=x(r);o.getAlpha()!==1&&(o=x(T.combine(r,i)));var b=o.isDark()?v?o.lighten(v):i:s?o.darken(s):a;return b.toString()},T.stroke=function(r,v){var s=x(v);r.style({stroke:T.tinyRGB(s),"stroke-opacity":s.getAlpha()})},T.fill=function(r,v){var s=x(v);r.style({fill:T.tinyRGB(s),"fill-opacity":s.getAlpha()})},T.clean=function(r){if(!(!r||typeof r!="object")){var v=Object.keys(r),s,o,b,g;for(s=0;s<v.length;s++)if(b=v[s],g=r[b],b.substr(b.length-5)==="color")if(Array.isArray(g))for(o=0;o<g.length;o++)g[o]=n(g[o]);else r[b]=n(g);else if(b.substr(b.length-10)==="colorscale"&&Array.isArray(g))for(o=0;o<g.length;o++)Array.isArray(g[o])&&(g[o][1]=n(g[o][1]));else if(Array.isArray(g)){var d=g[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(o=0;o<g.length;o++)T.clean(g[o])}else g&&typeof g=="object"&&!M(g)&&T.clean(g)}};function n(r){if(f(r)||typeof r!="string")return r;var v=r.trim();if(v.substr(0,3)!=="rgb")return r;var s=v.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var o=s[1].trim().split(/\s*[\s,]\s*/),b=v.charAt(3)==="a"&&o.length===4;if(!b&&o.length!==3)return r;for(var g=0;g<o.length;g++){if(!o[g].length||(o[g]=Number(o[g]),!(o[g]>=0)))return r;if(g===3)o[g]>1&&(o[g]=1);else if(o[g]>=1)return r}var d=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return b?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(t,B,G){var x=t("../../plots/cartesian/layout_attributes"),f=t("../../plots/font_attributes"),M=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll;B.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:x.linecolor,outlinewidth:x.linewidth,bordercolor:x.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:M({},x.ticks,{dflt:""}),ticklabeloverflow:M({},x.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,ticklabelstep:x.ticklabelstep,showticklabels:x.showticklabels,tickfont:f({}),tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,tickprefix:x.tickprefix,showtickprefix:x.showtickprefix,ticksuffix:x.ticksuffix,showticksuffix:x.showticksuffix,separatethousands:x.separatethousands,exponentformat:x.exponentformat,minexponent:x.minexponent,showexponent:x.showexponent,title:{text:{valType:"string"},font:f({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:f({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(t,B,G){B.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(t,B,G){var x=t("../../lib"),f=t("../../plot_api/plot_template"),M=t("../../plots/cartesian/tick_value_defaults"),T=t("../../plots/cartesian/tick_mark_defaults"),e=t("../../plots/cartesian/tick_label_defaults"),a=t("../../plots/cartesian/prefix_suffix_defaults"),i=t("./attributes");B.exports=function(r,v,s){var o=f.newContainer(v,"colorbar"),b=r.colorbar||{};function g(E,S){return x.coerce(b,o,i,E,S)}var d=s.margin||{t:0,b:0,l:0,r:0},c=s.width-d.l-d.r,m=s.height-d.t-d.b,l=g("orientation"),y=l==="v",u=g("thicknessmode");g("thickness",u==="fraction"?30/(y?c:m):30);var A=g("lenmode");g("len",A==="fraction"?1:y?m:c),g("x",y?1.02:.5),g("xanchor",y?"left":"center"),g("xpad"),g("y",y?.5:1.02),g("yanchor",y?"middle":"bottom"),g("ypad"),x.noneOrAll(b,o,["x","y"]),g("outlinecolor"),g("outlinewidth"),g("bordercolor"),g("borderwidth"),g("bgcolor");var _=x.coerce(b,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:y?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");g("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),M(b,o,g,"linear");var p=s.font,w={outerTicks:!1,font:p};_.indexOf("inside")!==-1&&(w.bgColor="black"),a(b,o,g,"linear",w),e(b,o,g,"linear",w),T(b,o,g,"linear",w),g("title.text",s._dfltTitle.colorbar);var h=o.tickfont,L=x.extendFlat({},h,{color:p.color,size:x.bigFont(h.size)});x.coerceFont(g,"title.font",L),g("title.side",y?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(t,B,G){var x=t("@plotly/d3"),f=t("tinycolor2"),M=t("../../plots/plots"),T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../dragelement"),i=t("../../lib"),n=i.strTranslate,r=t("../../lib/extend").extendFlat,v=t("../../lib/setcursor"),s=t("../drawing"),o=t("../color"),b=t("../titles"),g=t("../../lib/svg_text_utils"),d=t("../colorscale/helpers").flipScale,c=t("../../plots/cartesian/axis_defaults"),m=t("../../plots/cartesian/position_defaults"),l=t("../../plots/cartesian/layout_attributes"),y=t("../../constants/alignment"),u=y.LINE_SPACING,A=y.FROM_TL,_=y.FROM_BR,p=t("./constants").cn;function w(F){var I=F._fullLayout,D=I._infolayer.selectAll("g."+p.colorbar).data(h(F),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(p.colorbar,!0),D.each(function(R){var O=x.select(this);i.ensureSingle(O,"rect",p.cbbg),i.ensureSingle(O,"g",p.cbfills),i.ensureSingle(O,"g",p.cblines),i.ensureSingle(O,"g",p.cbaxis,function(H){H.classed(p.crisp,!0)}),i.ensureSingle(O,"g",p.cbtitleunshift,function(H){H.append("g").classed(p.cbtitle,!0)}),i.ensureSingle(O,"rect",p.cboutline);var z=L(O,R,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&E(O,R,F)}),D.exit().each(function(R){M.autoMargin(F,R._id)}).remove(),D.order()}function h(F){var I=F._fullLayout,D=F.calcdata,R=[],O,z,H,Y;function ee(Z){return r(Z,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function j(){typeof Y.calc=="function"?Y.calc(F,H,O):(O._fillgradient=z.reversescale?d(z.colorscale):z.colorscale,O._zrange=[z[Y.min],z[Y.max]])}for(var X=0;X<D.length;X++){var ae=D[X];H=ae[0].trace;var fe=H._module.colorbar;if(H.visible===!0&&fe)for(var K=Array.isArray(fe),J=K?fe:[fe],U=0;U<J.length;U++){Y=J[U];var V=Y.container;z=V?H[V]:H,z&&z.showscale&&(O=ee(z.colorbar),O._id="cb"+H.uid+(K&&V?"-"+V:""),O._traceIndex=H.index,O._propPrefix=(V?V+".":"")+"colorbar.",O._meta=H._meta,j(),R.push(O))}}for(var q in I._colorAxes)if(z=I[q],z.showscale){var re=I._colorAxes[q];O=ee(z.colorbar),O._id="cb"+q,O._propPrefix=q+".colorbar.",O._meta=I._meta,Y={min:"cmin",max:"cmax"},re[0]!=="heatmap"&&(H=re[1],Y.calc=H._module.colorbar.calc),j(),R.push(O)}return R}function L(F,I,D){var R=I.orientation==="v",O=I.len,z=I.lenmode,H=I.thickness,Y=I.thicknessmode,ee=I.outlinewidth,j=I.borderwidth,X=I.bgcolor,ae=I.xanchor,fe=I.yanchor,K=I.xpad,J=I.ypad,U=I.x,V=R?I.y:1-I.y,q=D._fullLayout,re=q._size,Z=I._fillcolor,Q=I._line,ie=I.title,oe=ie.side,ne=I._zrange||x.extent((typeof Z=="function"?Z:Q.color).domain()),se=typeof Q.color=="function"?Q.color:function(){return Q.color},_e=typeof Z=="function"?Z:function(){return Z},ue=I._levels,ge=S(D,I,ne),xe=ge.fill,ye=ge.line,be=Math.round(H*(Y==="fraction"?R?re.w:re.h:1)),Se=be/(R?re.w:re.h),Re=Math.round(O*(z==="fraction"?R?re.h:re.w:1)),Ve=Re/(R?re.h:re.w),Ae=Math.round(R?U*re.w+K:V*re.h+J),Ce={center:.5,right:1}[ae]||0,Ze={top:1,middle:.5}[fe]||0,Ye=R?U-Ce*Se:V-Ze*Se,ze=R?V-Ze*Ve:U-Ce*Ve,Ie=Math.round(R?re.h*(1-ze):re.w*ze);I._lenFrac=Ve,I._thickFrac=Se,I._uFrac=Ye,I._vFrac=ze;var Ge=I._axis=P(D,I,ne);Ge.position=Se+(R?U+K/re.w:V+J/re.h);var dt=["top","bottom"].indexOf(oe)!==-1;if(R&&dt&&(Ge.title.side=oe,Ge.titlex=U+K/re.w,Ge.titley=ze+(ie.side==="top"?Ve-J/re.h:J/re.h)),!R&&!dt&&(Ge.title.side=oe,Ge.titley=V+J/re.h,Ge.titlex=ze+K/re.w),Q.color&&I.tickmode==="auto"){Ge.tickmode="linear",Ge.tick0=ue.start;var Rt=ue.size,Qt=i.constrain(Re/50,4,15)+1,Bt=(ne[1]-ne[0])/((I.nticks||Qt)*Rt);if(Bt>1){var Ct=Math.pow(10,Math.floor(Math.log(Bt)/Math.LN10));Rt*=Ct*i.roundUp(Bt/Ct,[2,5,10]),(Math.abs(ue.start)/ue.size+1e-6)%1<2e-6&&(Ge.tick0=0)}Ge.dtick=Rt}Ge.domain=R?[ze+J/re.h,ze+Ve-J/re.h]:[ze+K/re.w,ze+Ve-K/re.w],Ge.setScale(),F.attr("transform",n(Math.round(re.l),Math.round(re.t)));var Kt=F.select("."+p.cbtitleunshift).attr("transform",n(-Math.round(re.l),-Math.round(re.t))),Ot=Ge.ticklabelposition,St=Ge.title.font.size,Xe=F.select("."+p.cbaxis),at,We=0,Ee=0;function He(Mt,Gt){var zt={propContainer:Ge,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:q._dfltTitle.colorbar,containerGroup:F.select("."+p.cbtitle)},Ht=Mt.charAt(0)==="h"?Mt.substr(1):"h"+Mt;F.selectAll("."+Ht+",."+Ht+"-math-group").remove(),b.draw(D,Mt,r(zt,Gt||{}))}function Ke(){if(R&&dt||!R&&!dt){var Mt,Gt;oe==="top"&&(Mt=K+re.l+re.w*U,Gt=J+re.t+re.h*(1-ze-Ve)+3+St*.75),oe==="bottom"&&(Mt=K+re.l+re.w*U,Gt=J+re.t+re.h*(1-ze)-3-St*.25),oe==="right"&&(Gt=J+re.t+re.h*V+3+St*.75,Mt=K+re.l+re.w*ze),He(Ge._id+"title",{attributes:{x:Mt,y:Gt,"text-anchor":R?"start":"middle"}})}}function et(){if(R&&!dt||!R&&dt){var Mt=Ge.position||0,Gt=Ge._offset+Ge._length/2,zt,Ht;if(oe==="right")Ht=Gt,zt=re.l+re.w*Mt+10+St*(Ge.showticklabels?1:.5);else if(zt=Gt,oe==="bottom"&&(Ht=re.t+re.h*Mt+10+(Ot.indexOf("inside")===-1?Ge.tickfont.size:0)+(Ge.ticks!=="intside"&&I.ticklen||0)),oe==="top"){var Xt=ie.text.split("<br>").length;Ht=re.t+re.h*Mt+10-be-u*St*Xt}He((R?"h":"v")+Ge._id+"title",{avoid:{selection:x.select(D).selectAll("g."+Ge._id+"tick"),side:oe,offsetTop:R?0:re.t,offsetLeft:R?re.l:0,maxShift:R?q.width:q.height},attributes:{x:zt,y:Ht,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function At(){if(!R&&!dt||R&&dt){var Mt=F.select("."+p.cbtitle),Gt=Mt.select("text"),zt=[-ee/2,ee/2],Ht=Mt.select(".h"+Ge._id+"title-math-group").node(),Xt=15.6;Gt.node()&&(Xt=parseInt(Gt.node().style.fontSize,10)*u);var Wt;if(Ht?(Wt=s.bBox(Ht),Ee=Wt.width,We=Wt.height,We>Xt&&(zt[1]-=(We-Xt)/2)):Gt.node()&&!Gt.classed(p.jsPlaceholder)&&(Wt=s.bBox(Gt.node()),Ee=Wt.width,We=Wt.height),R){if(We){if(We+=5,oe==="top")Ge.domain[1]-=We/re.h,zt[1]*=-1;else{Ge.domain[0]+=We/re.h;var sr=g.lineCount(Gt);zt[1]+=(1-sr)*Xt}Mt.attr("transform",n(zt[0],zt[1])),Ge.setScale()}}else Ee&&(oe==="right"&&(Ge.domain[0]+=(Ee+St/2)/re.w),Mt.attr("transform",n(zt[0],zt[1])),Ge.setScale())}F.selectAll("."+p.cbfills+",."+p.cblines).attr("transform",R?n(0,Math.round(re.h*(1-Ge.domain[1]))):n(Math.round(re.w*Ge.domain[0]),0)),Xe.attr("transform",R?n(0,Math.round(-re.t)):n(Math.round(-re.l),0));var Gr=F.select("."+p.cbfills).selectAll("rect."+p.cbfill).attr("style","").data(xe);Gr.enter().append("rect").classed(p.cbfill,!0).style("stroke","none"),Gr.exit().remove();var cn=ne.map(Ge.c2p).map(Math.round).sort(function(jt,Mr){return jt-Mr});Gr.each(function(jt,Mr){var it=[Mr===0?ne[0]:(xe[Mr]+xe[Mr-1])/2,Mr===xe.length-1?ne[1]:(xe[Mr]+xe[Mr+1])/2].map(Ge.c2p).map(Math.round);R&&(it[1]=i.constrain(it[1]+(it[1]>it[0])?1:-1,cn[0],cn[1]));var Qe=x.select(this).attr(R?"x":"y",Ae).attr(R?"y":"x",x.min(it)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(x.max(it)-x.min(it),2));if(I._fillgradient)s.gradient(Qe,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var ft=_e(jt).replace("e-","");Qe.attr("fill",f(ft).toHexString())}});var en=F.select("."+p.cblines).selectAll("path."+p.cbline).data(Q.color&&Q.width?ye:[]);en.enter().append("path").classed(p.cbline,!0),en.exit().remove(),en.each(function(jt){var Mr=Ae,it=Math.round(Ge.c2p(jt))+Q.width/2%1;x.select(this).attr("d","M"+(R?Mr+","+it:it+","+Mr)+(R?"h":"v")+be).call(s.lineGroupStyle,Q.width,se(jt),Q.dash)}),Xe.selectAll("g."+Ge._id+"tick,path").remove();var st=Ae+be+(ee||0)/2-(I.ticks==="outside"?1:0),rr=e.calcTicks(Ge),er=e.getTickSigns(Ge)[2];return e.drawTicks(D,Ge,{vals:Ge.ticks==="inside"?e.clipEnds(Ge,rr):rr,layer:Xe,path:e.makeTickPath(Ge,st,er),transFn:e.makeTransTickFn(Ge)}),e.drawLabels(D,Ge,{vals:rr,layer:Xe,transFn:e.makeTransTickLabelFn(Ge),labelFns:e.makeLabelFns(Ge,st)})}function mt(){var Mt,Gt=be+ee/2;Ot.indexOf("inside")===-1&&(Mt=s.bBox(Xe.node()),Gt+=R?Mt.width:Mt.height),at=Kt.select("text");var zt=0,Ht=R&&oe==="top",Xt=!R&&oe==="right",Wt=0;if(at.node()&&!at.classed(p.jsPlaceholder)){var sr,Gr=Kt.select(".h"+Ge._id+"title-math-group").node();Gr&&(R&&dt||!R&&!dt)?(Mt=s.bBox(Gr),zt=Mt.width,sr=Mt.height):(Mt=s.bBox(Kt.node()),zt=Mt.right-re.l-(R?Ae:Ie),sr=Mt.bottom-re.t-(R?Ie:Ae),!R&&oe==="top"&&(Gt+=Mt.height,Wt=Mt.height)),Xt&&(at.attr("transform",n(zt/2+St/2,0)),zt*=2),Gt=Math.max(Gt,R?zt:sr)}var cn=(R?K:J)*2+Gt+j+ee/2,en=0;!R&&ie.text&&fe==="bottom"&&V<=0&&(en=cn/2,cn+=en,Wt+=en),q._hColorbarMoveTitle=en,q._hColorbarMoveCBTitle=Wt;var st=j+ee;F.select("."+p.cbbg).attr("x",(R?Ae:Ie)-st/2-(R?K:0)).attr("y",(R?Ie:Ae)-(R?Re:J+Wt-en)).attr(R?"width":"height",Math.max(cn-en,2)).attr(R?"height":"width",Math.max(Re+st,2)).call(o.fill,X).call(o.stroke,I.bordercolor).style("stroke-width",j);var rr=Xt?Math.max(zt-10,0):0;if(F.selectAll("."+p.cboutline).attr("x",(R?Ae:Ie+K)+rr).attr("y",(R?Ie+J-Re:Ae)+(Ht?We:0)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(Re-(R?2*J+We:2*K+rr),2)).call(o.stroke,I.outlinecolor).style({fill:"none","stroke-width":ee}),F.attr("transform",n(re.l-(R?Ce*cn:0),re.t-(R?0:(1-Ze)*cn-Wt))),!R&&(j||f(X).getAlpha()&&!f.equals(q.paper_bgcolor,X))){var er=Xe.selectAll("text"),jt=er[0].length,Mr=F.select("."+p.cbbg).node(),it=s.bBox(Mr),Qe=s.getTranslate(F),ft=2;er.each(function(ut,pt){var Pt=0,xt=jt-1;if(pt===Pt||pt===xt){var Lt=s.bBox(this),Zt=s.getTranslate(this),ur;if(pt===xt){var Pr=Lt.right+Zt.x,Ar=it.right+Qe.x+Ie-j-ft+U;ur=Ar-Pr,ur>0&&(ur=0)}else if(pt===Pt){var kr=Lt.left+Zt.x,Zr=it.left+Qe.x+Ie+j+ft;ur=Zr-kr,ur<0&&(ur=0)}ur&&(jt<3?this.setAttribute("transform","translate("+ur+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ct={},Et=A[ae],Nt=_[ae],Pe=A[fe],Le=_[fe],ot=cn-be;R?(z==="pixels"?(ct.y=V,ct.t=Re*Pe,ct.b=Re*Le):(ct.t=ct.b=0,ct.yt=V+O*Pe,ct.yb=V-O*Le),Y==="pixels"?(ct.x=U,ct.l=cn*Et,ct.r=cn*Nt):(ct.l=ot*Et,ct.r=ot*Nt,ct.xl=U-H*Et,ct.xr=U+H*Nt)):(z==="pixels"?(ct.x=U,ct.l=Re*Et,ct.r=Re*Nt):(ct.l=ct.r=0,ct.xl=U+O*Et,ct.xr=U-O*Nt),Y==="pixels"?(ct.y=1-V,ct.t=cn*Pe,ct.b=cn*Le):(ct.t=ot*Pe,ct.b=ot*Le,ct.yt=V-H*Pe,ct.yb=V+H*Le)),M.autoMargin(D,I._id,ct)}return i.syncOrAsync([M.previousPromises,Ke,At,et,M.previousPromises,mt],D)}function E(F,I,D){var R=I.orientation==="v",O=D._fullLayout,z=O._size,H,Y,ee;a.init({element:F.node(),gd:D,prepFn:function(){H=F.attr("transform"),v(F)},moveFn:function(j,X){F.attr("transform",H+n(j,X)),Y=a.align((R?I._uFrac:I._vFrac)+j/z.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),ee=a.align((R?I._vFrac:1-I._uFrac)-X/z.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var ae=a.getCursor(Y,ee,I.xanchor,I.yanchor);v(F,ae)},doneFn:function(){if(v(F),Y!==void 0&&ee!==void 0){var j={};j[I._propPrefix+"x"]=Y,j[I._propPrefix+"y"]=ee,I._traceIndex!==void 0?T.call("_guiRestyle",D,j,I._traceIndex):T.call("_guiRelayout",D,j)}}})}function S(F,I,D){var R=I._levels,O=[],z=[],H,Y,ee=R.end+R.size/100,j=R.size,X=1.001*D[0]-.001*D[1],ae=1.001*D[1]-.001*D[0];for(Y=0;Y<1e5&&(H=R.start+Y*j,!(j>0?H>=ee:H<=ee));Y++)H>X&&H<ae&&O.push(H);if(I._fillgradient)z=[0];else if(typeof I._fillcolor=="function"){var fe=I._filllevels;if(fe)for(ee=fe.end+fe.size/100,j=fe.size,Y=0;Y<1e5&&(H=fe.start+Y*j,!(j>0?H>=ee:H<=ee));Y++)H>D[0]&&H<D[1]&&z.push(H);else z=O.map(function(K){return K-R.size/2}),z.push(z[z.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(z=[0]);return R.size<0&&(O.reverse(),z.reverse()),{line:O,fill:z}}function P(F,I,D){var R=F._fullLayout,O=I.orientation==="v",z={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},H=O?"y":"x",Y={type:"linear",_id:H+I._id},ee={letter:H,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function j(X,ae){return i.coerce(z,Y,l,X,ae)}return c(z,Y,j,ee,R),m(z,Y,j,ee),Y}B.exports={draw:w}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(t,B,G){var x=t("../../lib");B.exports=function(M){return x.isPlainObject(M.colorbar)}},{"../../lib":515}],373:[function(t,B,G){B.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(t,B,G){var x=t("../colorbar/attributes"),f=t("../../lib/regex").counter,M=t("../../lib/sort_object_keys"),T=t("./scales.js").scales;M(T),B.exports=function(a,i){a=a||"",i=i||{};var n=i.cLetter||"c";"onlyIfNumerical"in i?i.onlyIfNumerical:Boolean(a);var r="noScale"in i?i.noScale:a==="marker.line",v="showScaleDflt"in i?i.showScaleDflt:n==="z",s=typeof i.colorscaleDflt=="string"?T[i.colorscaleDflt]:null,o=i.editTypeOverride||"",b;"colorAttr"in i?(b=i.colorAttr,i.colorAttr):b={z:"z",c:"color"}[n];var g=n+"auto",d=n+"min",c=n+"max",m=n+"mid",l={};l[d]=l[c]=void 0;var y={};y[g]=!1;var u={};return b==="color"&&(u.color={valType:"color",arrayOk:!0,editType:o||"style"},i.anim&&(u.color.anim=!0)),u[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},u[d]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:y},u[c]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:y},u[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},u.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:i.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(u.showscale={valType:"boolean",dflt:v,editType:"calc"},u.colorbar=x),i.noColorAxis||(u.coloraxis={valType:"subplotid",regex:f("coloraxis"),dflt:null,editType:"calc"}),u}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("./helpers").extractOpts;B.exports=function(e,a,i){var n=e._fullLayout,r=i.vals,v=i.containerStr,s=v?f.nestedProperty(a,v).get():a,o=M(s),b=o.auto!==!1,g=o.min,d=o.max,c=o.mid,m=function(){return f.aggNums(Math.min,null,r)},l=function(){return f.aggNums(Math.max,null,r)};if(g===void 0?g=m():b&&(s._colorAx&&x(g)?g=Math.min(g,m()):g=m()),d===void 0?d=l():b&&(s._colorAx&&x(d)?d=Math.max(d,l()):d=l()),b&&c!==void 0&&(d-c>c-g?g=c-(d-c):d-c<c-g&&(d=c+(c-g))),g===d&&(g-=.5,d+=.5),o._sync("min",g),o._sync("max",d),o.autocolorscale){var y;g*d<0?y=n.colorscale.diverging:g>=0?y=n.colorscale.sequential:y=n.colorscale.sequentialminus,o._sync("colorscale",y)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(t,B,G){var x=t("../../lib"),f=t("./helpers").hasColorscale,M=t("./helpers").extractOpts;B.exports=function(e,a){function i(g,d){var c=g["_"+d];c!==void 0&&(g[d]=c)}function n(g,d){var c=d.container?x.nestedProperty(g,d.container).get():g;if(c)if(c.coloraxis)c._colorAx=a[c.coloraxis];else{var m=M(c),l=m.auto;(l||m.min===void 0)&&i(c,d.min),(l||m.max===void 0)&&i(c,d.max),m.autocolorscale&&i(c,"colorscale")}}for(var r=0;r<e.length;r++){var v=e[r],s=v._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)n(v,s[o]);else n(v,s);f(v,"marker.line")&&n(v,{container:"marker.line",min:"cmin",max:"cmax"})}for(var b in a._colorAxes)n(a[b],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../colorbar/has_colorbar"),T=t("../colorbar/defaults"),e=t("./scales").isValid,a=t("../../registry").traceIs;function i(n,r){var v=r.slice(0,r.length-1);return r?f.nestedProperty(n,v).get()||{}:n}B.exports=function n(r,v,s,o,b){var g=b.prefix,d=b.cLetter,c="_module"in v,m=i(r,g),l=i(v,g),y=i(v._template||{},g)||{},u=function(){return delete r.coloraxis,delete v.coloraxis,n(r,v,s,o,b)};if(c){var A=s._colorAxes||{},_=o(g+"coloraxis");if(_){var p=a(v,"contour")&&f.nestedProperty(v,"contours.coloring").get()||"heatmap",w=A[_];w?(w[2].push(u),w[0]!==p&&(w[0]=!1,f.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[_]=[p,v,[u]];return}}var h=m[d+"min"],L=m[d+"max"],E=x(h)&&x(L)&&h<L,S=o(g+d+"auto",!E);S?o(g+d+"mid"):(o(g+d+"min"),o(g+d+"max"));var P=m.colorscale,F=y.colorscale,I;if(P!==void 0&&(I=!e(P)),F!==void 0&&(I=!e(F)),o(g+"autocolorscale",I),o(g+"colorscale"),o(g+"reversescale"),g!=="marker.line."){var D;g&&c&&(D=M(m));var R=o(g+"showscale",D);R&&(g&&y&&(l._template=y),T(m,l,s))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(t,B,G){var x=t("@plotly/d3"),f=t("tinycolor2"),M=t("fast-isnumeric"),T=t("../../lib"),e=t("../color"),a=t("./scales").isValid;function i(c,m,l){var y=m?T.nestedProperty(c,m).get()||{}:c,u=y[l||"color"],A=!1;if(T.isArrayOrTypedArray(u)){for(var _=0;_<u.length;_++)if(M(u[_])){A=!0;break}}return T.isPlainObject(y)&&(A||y.showscale===!0||M(y.cmin)&&M(y.cmax)||a(y.colorscale)||T.isPlainObject(y.colorbar))}var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function v(c){var m=c._colorAx,l=m||c,y={},u,A,_;for(A=0;A<n.length;A++)_=n[A],y[_]=l[_];if(m)for(u="c",A=0;A<r.length;A++)_=r[A],y[_]=l["c"+_];else{var p;for(A=0;A<r.length;A++){if(_=r[A],p="c"+_,p in l){y[_]=l[p];continue}p="z"+_,p in l&&(y[_]=l[p])}u=p.charAt(0)}return y._sync=function(w,h){var L=r.indexOf(w)!==-1?u+w:w;l[L]=l["_"+L]=h},y}function s(c){for(var m=v(c),l=m.min,y=m.max,u=m.reversescale?o(m.colorscale):m.colorscale,A=u.length,_=new Array(A),p=new Array(A),w=0;w<A;w++){var h=u[w];_[w]=l+h[0]*(y-l),p[w]=h[1]}return{domain:_,range:p}}function o(c){for(var m=c.length,l=new Array(m),y=m-1,u=0;y>=0;y--,u++){var A=c[y];l[u]=[1-A[0],A[1]]}return l}function b(c,m){m=m||{};for(var l=c.domain,y=c.range,u=y.length,A=new Array(u),_=0;_<u;_++){var p=f(y[_]).toRgb();A[_]=[p.r,p.g,p.b,p.a]}var w=x.scale.linear().domain(l).range(A).clamp(!0),h=m.noNumericCheck,L=m.returnArray,E;return h&&L?E=w:h?E=function(S){return d(w(S))}:L?E=function(S){return M(S)?w(S):f(S).isValid()?S:e.defaultLine}:E=function(S){return M(S)?d(w(S)):f(S).isValid()?S:e.defaultLine},E.domain=w.domain,E.range=function(){return y},E}function g(c,m){return b(s(c),m)}function d(c){var m={r:c[0],g:c[1],b:c[2],a:c[3]};return f(m).toRgbString()}B.exports={hasColorscale:i,extractOpts:v,extractScale:s,flipScale:o,makeColorScaleFunc:b,makeColorScaleFuncFromTrace:g}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(t,B,G){var x=t("./scales"),f=t("./helpers");B.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:x.scales,defaultScale:x.defaultScale,getScale:x.get,isValidScale:x.isValid,hasColorscale:f.hasColorscale,extractOpts:f.extractOpts,extractScale:f.extractScale,flipScale:f.flipScale,makeColorScaleFunc:f.makeColorScaleFunc,makeColorScaleFuncFromTrace:f.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(t,B,G){var x=t("../../lib/extend").extendFlat,f=t("./attributes"),M=t("./scales").scales;B.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:M.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:M.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:M.RdBu,editType:"calc"}},coloraxis:x({_isSubplotObj:!0,editType:"calc"},f("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(t,B,G){var x=t("../../lib"),f=t("../../plot_api/plot_template"),M=t("./layout_attributes"),T=t("./defaults");B.exports=function(a,i){function n(c,m){return x.coerce(a,i,M,c,m)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r=i._colorAxes,v,s;function o(c,m){return x.coerce(v,s,M.coloraxis,c,m)}for(var b in r){var g=r[b];if(g[0])v=a[b]||{},s=f.newContainer(i,b,"coloraxis"),s._name=b,T(v,s,i,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<g[2].length;d++)g[2][d]();delete i._colorAxes[b]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(t,B,G){var x=t("tinycolor2"),f={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},M=f.RdBu;function T(i,n){if(n||(n=M),!i)return n;function r(){try{i=f[i]||JSON.parse(i)}catch{i=n}}return typeof i=="string"&&(r(),typeof i=="string"&&r()),e(i)?i:n}function e(i){var n=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var r=0;r<i.length;r++){var v=i[r];if(v.length!==2||+v[0]<n||!x(v[1]).isValid())return!1;n=+v[0]}return!0}function a(i){return f[i]!==void 0?!0:e(i)}B.exports={scales:f,defaultScale:M,get:T,isValid:a}},{tinycolor2:313}],383:[function(t,B,G){B.exports=function(f,M,T,e,a){var i=(f-T)/(e-T),n=i+M/(e-T),r=(i+n)/2;return a==="left"||a==="bottom"?i:a==="center"||a==="middle"?r:a==="right"||a==="top"?n:i<2/3-r?i:n>4/3-r?n:r}},{}],384:[function(t,B,G){var x=t("../../lib"),f=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.exports=function(T,e,a,i){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=x.constrain(Math.floor(T*3),0,2),i==="bottom"?e=0:i==="middle"?e=1:i==="top"?e=2:e=x.constrain(Math.floor(e*3),0,2),f[e][T]}},{"../../lib":515}],385:[function(t,B,G){G.selectMode=function(x){return x==="lasso"||x==="select"},G.drawMode=function(x){return x==="drawclosedpath"||x==="drawopenpath"||x==="drawline"||x==="drawrect"||x==="drawcircle"},G.openMode=function(x){return x==="drawline"||x==="drawopenpath"},G.rectMode=function(x){return x==="select"||x==="drawline"||x==="drawrect"||x==="drawcircle"},G.freeMode=function(x){return x==="lasso"||x==="drawclosedpath"||x==="drawopenpath"},G.selectingOrDrawing=function(x){return G.freeMode(x)||G.rectMode(x)}},{}],386:[function(t,B,G){var x=t("mouse-event-offset"),f=t("has-hover"),M=t("has-passive-events"),T=t("../../lib").removeElement,e=t("../../plots/cartesian/constants"),a=B.exports={};a.align=t("./align"),a.getCursor=t("./cursor");var i=t("./unhover");a.unhover=i.wrapped,a.unhoverRaw=i.raw,a.init=function(s){var o=s.gd,b=1,g=o._context.doubleClickDelay,d=s.element,c,m,l,y,u,A,_,p;o._mouseDownTime||(o._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=L,M?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=L,d.addEventListener("touchstart",L,{passive:!1})):d.ontouchstart=L;function w(P,F,I){return Math.abs(P)<I&&(P=0),Math.abs(F)<I&&(F=0),[P,F]}var h=s.clampFn||w;function L(P){o._dragged=!1,o._dragging=!0;var F=r(P);c=F[0],m=F[1],_=P.target,A=P,p=P.buttons===2||P.ctrlKey,typeof P.clientX>"u"&&typeof P.clientY>"u"&&(P.clientX=c,P.clientY=m),l=new Date().getTime(),l-o._mouseDownTime<g?b+=1:(b=1,o._mouseDownTime=l),s.prepFn&&s.prepFn(P,c,m),f&&!p?(u=n(),u.style.cursor=window.getComputedStyle(d).cursor):f||(u=document,y=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),s.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(P){P.preventDefault();var F=r(P),I=s.minDrag||e.MINDRAG,D=h(F[0]-c,F[1]-m,I),R=D[0],O=D[1];(R||O)&&(o._dragged=!0,a.unhover(o,P)),o._dragged&&s.moveFn&&!p&&(o._dragdata={element:d,dx:R,dy:O},s.moveFn(R,O))}function S(P){if(delete o._dragdata,s.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),f?T(u):y&&(u.documentElement.style.cursor=y,y=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>g&&(b=Math.max(b-1,1)),o._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(b,A),!p){var F;try{F=new MouseEvent("click",P)}catch{var I=r(P);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}_.dispatchEvent(F)}o._dragging=!1,o._dragged=!1}};function n(){var v=document.createElement("div");v.className="dragcover";var s=v.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(v),v}a.coverSlip=n;function r(v){return x(v.changedTouches?v.changedTouches[0]:v,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(t,B,G){var x=t("../../lib/events"),f=t("../../lib/throttle"),M=t("../../lib/dom").getGraphDiv,T=t("../fx/constants"),e=B.exports={};e.wrapped=function(a,i,n){a=M(a),a._fullLayout&&f.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,i,n)},e.raw=function(i,n){var r=i._fullLayout,v=i._hoverdata;n||(n={}),!(n.target&&!i._dragged&&x.triggerHandler(i,"plotly_beforehover",n)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,n.target&&v&&i.emit("plotly_unhover",{event:n,points:v}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(t,B,G){G.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},G.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=f.numberFormat,T=t("fast-isnumeric"),e=t("tinycolor2"),a=t("../../registry"),i=t("../color"),n=t("../colorscale"),r=f.strTranslate,v=t("../../lib/svg_text_utils"),s=t("../../constants/xmlns_namespaces"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=t("../../constants/interactions").DESELECTDIM,d=t("../../traces/scatter/subtypes"),c=t("../../traces/scatter/make_bubble_size_func"),m=t("../../components/fx/helpers").appendArrayPointValue,l=B.exports={};l.font=function(ye,be,Se,Re){f.isPlainObject(be)&&(Re=be.color,Se=be.size,be=be.family),be&&ye.style("font-family",be),Se+1&&ye.style("font-size",Se+"px"),Re&&ye.call(i.fill,Re)},l.setPosition=function(ye,be,Se){ye.attr("x",be).attr("y",Se)},l.setSize=function(ye,be,Se){ye.attr("width",be).attr("height",Se)},l.setRect=function(ye,be,Se,Re,Ve){ye.call(l.setPosition,be,Se).call(l.setSize,Re,Ve)},l.translatePoint=function(ye,be,Se,Re){var Ve=Se.c2p(ye.x),Ae=Re.c2p(ye.y);if(T(Ve)&&T(Ae)&&be.node())be.node().nodeName==="text"?be.attr("x",Ve).attr("y",Ae):be.attr("transform",r(Ve,Ae));else return!1;return!0},l.translatePoints=function(ye,be,Se){ye.each(function(Re){var Ve=x.select(this);l.translatePoint(Re,Ve,be,Se)})},l.hideOutsideRangePoint=function(ye,be,Se,Re,Ve,Ae){be.attr("display",Se.isPtWithinRange(ye,Ve)&&Re.isPtWithinRange(ye,Ae)?null:"none")},l.hideOutsideRangePoints=function(ye,be){if(!!be._hasClipOnAxisFalse){var Se=be.xaxis,Re=be.yaxis;ye.each(function(Ve){var Ae=Ve[0].trace,Ce=Ae.xcalendar,Ze=Ae.ycalendar,Ye=a.traceIs(Ae,"bar-like")?".bartext":".point,.textpoint";ye.selectAll(Ye).each(function(ze){l.hideOutsideRangePoint(ze,x.select(this),Se,Re,Ce,Ze)})})}},l.crispRound=function(ye,be,Se){return!be||!T(be)?Se||0:ye._context.staticPlot?be:be<1?1:Math.round(be)},l.singleLineStyle=function(ye,be,Se,Re,Ve){be.style("fill","none");var Ae=(((ye||[])[0]||{}).trace||{}).line||{},Ce=Se||Ae.width||0,Ze=Ve||Ae.dash||"";i.stroke(be,Re||Ae.color),l.dashLine(be,Ze,Ce)},l.lineGroupStyle=function(ye,be,Se,Re){ye.style("fill","none").each(function(Ve){var Ae=(((Ve||[])[0]||{}).trace||{}).line||{},Ce=be||Ae.width||0,Ze=Re||Ae.dash||"";x.select(this).call(i.stroke,Se||Ae.color).call(l.dashLine,Ze,Ce)})},l.dashLine=function(ye,be,Se){Se=+Se||0,be=l.dashStyle(be,Se),ye.style({"stroke-dasharray":be,"stroke-width":Se+"px"})},l.dashStyle=function(ye,be){be=+be||1;var Se=Math.max(be,3);return ye==="solid"?ye="":ye==="dot"?ye=Se+"px,"+Se+"px":ye==="dash"?ye=3*Se+"px,"+3*Se+"px":ye==="longdash"?ye=5*Se+"px,"+5*Se+"px":ye==="dashdot"?ye=3*Se+"px,"+Se+"px,"+Se+"px,"+Se+"px":ye==="longdashdot"&&(ye=5*Se+"px,"+2*Se+"px,"+Se+"px,"+2*Se+"px"),ye};function y(ye,be,Se){var Re=be.fillpattern,Ve=Re&&l.getPatternAttr(Re.shape,0,"");if(Ve){var Ae=l.getPatternAttr(Re.bgcolor,0,null),Ce=l.getPatternAttr(Re.fgcolor,0,null),Ze=Re.fgopacity,Ye=l.getPatternAttr(Re.size,0,8),ze=l.getPatternAttr(Re.solidity,0,.3),Ie=be.uid;l.pattern(ye,"point",Se,Ie,Ve,Ye,ze,void 0,Re.fillmode,Ae,Ce,Ze)}else be.fillcolor&&ye.call(i.fill,be.fillcolor)}l.singleFillStyle=function(ye,be){var Se=x.select(ye.node()),Re=Se.data(),Ve=((Re[0]||[])[0]||{}).trace||{};y(ye,Ve,be)},l.fillGroupStyle=function(ye,be){ye.style("stroke-width",0).each(function(Se){var Re=x.select(this);Se[0].trace&&y(Re,Se[0].trace,be)})};var u=t("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolBackOffs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(u).forEach(function(ye){var be=u[ye],Se=be.n;l.symbolList.push(Se,String(Se),ye,Se+100,String(Se+100),ye+"-open"),l.symbolNames[Se]=ye,l.symbolFuncs[Se]=be.f,l.symbolBackOffs[Se]=be.backoff||0,be.needLine&&(l.symbolNeedLines[Se]=!0),be.noDot?l.symbolNoDot[Se]=!0:l.symbolList.push(Se+200,String(Se+200),ye+"-dot",Se+300,String(Se+300),ye+"-open-dot"),be.noFill&&(l.symbolNoFill[Se]=!0)});var A=l.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(ye){if(T(ye))ye=+ye;else if(typeof ye=="string"){var be=0;ye.indexOf("-open")>0&&(be=100,ye=ye.replace("-open","")),ye.indexOf("-dot")>0&&(be+=200,ye=ye.replace("-dot","")),ye=l.symbolNames.indexOf(ye),ye>=0&&(ye+=be)}return ye%100>=A||ye>=400?0:Math.floor(Math.max(ye,0))};function p(ye,be,Se,Re){var Ve=ye%100;return l.symbolFuncs[Ve](be,Se,Re)+(ye>=200?_:"")}var w={x1:1,x2:0,y1:0,y2:0},h={x1:0,x2:0,y1:1,y2:0},L=M("~f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:h},verticalreversed:{node:"linearGradient",attrs:h,reversed:!0}};l.gradient=function(ye,be,Se,Re,Ve,Ae){for(var Ce=Ve.length,Ze=E[Re],Ye=new Array(Ce),ze=0;ze<Ce;ze++)Ze.reversed?Ye[Ce-1-ze]=[L((1-Ve[ze][0])*100),Ve[ze][1]]:Ye[ze]=[L(Ve[ze][0]*100),Ve[ze][1]];var Ie=be._fullLayout,Ge="g"+Ie._uid+"-"+Se,dt=Ie._defs.select(".gradients").selectAll("#"+Ge).data([Re+Ye.join(";")],f.identity);dt.exit().remove(),dt.enter().append(Ze.node).each(function(){var Rt=x.select(this);Ze.attrs&&Rt.attr(Ze.attrs),Rt.attr("id",Ge);var Qt=Rt.selectAll("stop").data(Ye);Qt.exit().remove(),Qt.enter().append("stop"),Qt.each(function(Bt){var Ct=e(Bt[1]);x.select(this).attr({offset:Bt[0]+"%","stop-color":i.tinyRGB(Ct),"stop-opacity":Ct.getAlpha()})})}),ye.style(Ae,J(Ge,be)).style(Ae+"-opacity",null),ye.classed("gradient_filled",!0)},l.pattern=function(ye,be,Se,Re,Ve,Ae,Ce,Ze,Ye,ze,Ie,Ge){var dt=be==="legend";Ze&&(Ye==="overlay"?(ze=Ze,Ie=i.contrast(ze)):(ze=void 0,Ie=Ze));var Rt=Se._fullLayout,Qt="p"+Rt._uid+"-"+Re,Bt,Ct,Kt=function(Mt,Gt,zt,Ht,Xt){return Ht+(Xt-Ht)*(Mt-Gt)/(zt-Gt)},Ot,St,Xe,at,We={},Ee=e(Ie),He=i.tinyRGB(Ee),Ke=Ee.getAlpha(),et=Ge*Ke;switch(Ve){case"/":Bt=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Ot="M-"+Bt/4+","+Ct/4+"l"+Bt/2+",-"+Ct/2+"M0,"+Ct+"L"+Bt+",0M"+Bt/4*3+","+Ct/4*5+"l"+Bt/2+",-"+Ct/2,St=Ce*Ae,at="path",We={d:Ot,opacity:et,stroke:He,"stroke-width":St+"px"};break;case"\\":Bt=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Ot="M"+Bt/4*3+",-"+Ct/4+"l"+Bt/2+","+Ct/2+"M0,0L"+Bt+","+Ct+"M-"+Bt/4+","+Ct/4*3+"l"+Bt/2+","+Ct/2,St=Ce*Ae,at="path",We={d:Ot,opacity:et,stroke:He,"stroke-width":St+"px"};break;case"x":Bt=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Ot="M-"+Bt/4+","+Ct/4+"l"+Bt/2+",-"+Ct/2+"M0,"+Ct+"L"+Bt+",0M"+Bt/4*3+","+Ct/4*5+"l"+Bt/2+",-"+Ct/2+"M"+Bt/4*3+",-"+Ct/4+"l"+Bt/2+","+Ct/2+"M0,0L"+Bt+","+Ct+"M-"+Bt/4+","+Ct/4*3+"l"+Bt/2+","+Ct/2,St=Ae-Ae*Math.sqrt(1-Ce),at="path",We={d:Ot,opacity:et,stroke:He,"stroke-width":St+"px"};break;case"|":Bt=Ae,Ct=Ae,at="path",Ot="M"+Bt/2+",0L"+Bt/2+","+Ct,St=Ce*Ae,at="path",We={d:Ot,opacity:et,stroke:He,"stroke-width":St+"px"};break;case"-":Bt=Ae,Ct=Ae,at="path",Ot="M0,"+Ct/2+"L"+Bt+","+Ct/2,St=Ce*Ae,at="path",We={d:Ot,opacity:et,stroke:He,"stroke-width":St+"px"};break;case"+":Bt=Ae,Ct=Ae,at="path",Ot="M"+Bt/2+",0L"+Bt/2+","+Ct+"M0,"+Ct/2+"L"+Bt+","+Ct/2,St=Ae-Ae*Math.sqrt(1-Ce),at="path",We={d:Ot,opacity:et,stroke:He,"stroke-width":St+"px"};break;case".":Bt=Ae,Ct=Ae,Ce<Math.PI/4?Xe=Math.sqrt(Ce*Ae*Ae/Math.PI):Xe=Kt(Ce,Math.PI/4,1,Ae/2,Ae/Math.sqrt(2)),at="circle",We={cx:Bt/2,cy:Ct/2,r:Xe,opacity:et,fill:He};break}var At=[Ve||"noSh",ze||"noBg",Ie||"noFg",Ae,Ce].join(";"),mt=Rt._defs.select(".patterns").selectAll("#"+Qt).data([At],f.identity);mt.exit().remove(),mt.enter().append("pattern").each(function(){var Mt=x.select(this);if(Mt.attr({id:Qt,width:Bt+"px",height:Ct+"px",patternUnits:"userSpaceOnUse",patternTransform:dt?"scale(0.8)":""}),ze){var Gt=e(ze),zt=i.tinyRGB(Gt),Ht=Gt.getAlpha(),Xt=Mt.selectAll("rect").data([0]);Xt.exit().remove(),Xt.enter().append("rect").attr({width:Bt+"px",height:Ct+"px",fill:zt,"fill-opacity":Ht})}var Wt=Mt.selectAll(at).data([0]);Wt.exit().remove(),Wt.enter().append(at).attr(We)}),ye.style("fill",J(Qt,Se)).style("fill-opacity",null),ye.classed("pattern_filled",!0)},l.initGradients=function(ye){var be=ye._fullLayout,Se=f.ensureSingle(be._defs,"g","gradients");Se.selectAll("linearGradient,radialGradient").remove(),x.select(ye).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(ye){var be=ye._fullLayout,Se=f.ensureSingle(be._defs,"g","patterns");Se.selectAll("pattern").remove(),x.select(ye).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(ye,be,Se){return ye&&f.isArrayOrTypedArray(ye)?be<ye.length?ye[be]:Se:ye},l.pointStyle=function(ye,be,Se){if(!!ye.size()){var Re=l.makePointStyleFns(be);ye.each(function(Ve){l.singlePointStyle(Ve,x.select(this),be,Re,Se)})}},l.singlePointStyle=function(ye,be,Se,Re,Ve){var Ae=Se.marker,Ce=Ae.line;if(be.style("opacity",Re.selectedOpacityFn?Re.selectedOpacityFn(ye):ye.mo===void 0?Ae.opacity:ye.mo),Re.ms2mrc){var Ze;ye.ms==="various"||Ae.size==="various"?Ze=3:Ze=Re.ms2mrc(ye.ms),ye.mrc=Ze,Re.selectedSizeFn&&(Ze=ye.mrc=Re.selectedSizeFn(ye));var Ye=l.symbolNumber(ye.mx||Ae.symbol)||0;ye.om=Ye%200>=100;var ze=xe(ye,Se),Ie=q(ye,Se);be.attr("d",p(Ye,Ze,ze,Ie))}var Ge=!1,dt,Rt,Qt;if(ye.so)Qt=Ce.outlierwidth,Rt=Ce.outliercolor,dt=Ae.outliercolor;else{var Bt=(Ce||{}).width;Qt=(ye.mlw+1||Bt+1||(ye.trace?(ye.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in ye?Rt=ye.mlcc=Re.lineScale(ye.mlc):f.isArrayOrTypedArray(Ce.color)?Rt=i.defaultLine:Rt=Ce.color,f.isArrayOrTypedArray(Ae.color)&&(dt=i.defaultLine,Ge=!0),"mc"in ye?dt=ye.mcc=Re.markerScale(ye.mc):dt=Ae.color||"rgba(0,0,0,0)",Re.selectedColorFn&&(dt=Re.selectedColorFn(ye))}if(ye.om)be.call(i.stroke,dt).style({"stroke-width":(Qt||1)+"px",fill:"none"});else{be.style("stroke-width",(ye.isBlank?0:Qt)+"px");var Ct=Ae.gradient,Kt=ye.mgt;Kt?Ge=!0:Kt=Ct&&Ct.type,f.isArrayOrTypedArray(Kt)&&(Kt=Kt[0],E[Kt]||(Kt=0));var Ot=Ae.pattern,St=Ot&&l.getPatternAttr(Ot.shape,ye.i,"");if(Kt&&Kt!=="none"){var Xe=ye.mgc;Xe?Ge=!0:Xe=Ct.color;var at=Se.uid;Ge&&(at+="-"+ye.i),l.gradient(be,Ve,at,Kt,[[0,Xe],[1,dt]],"fill")}else if(St){var We=l.getPatternAttr(Ot.bgcolor,ye.i,null),Ee=l.getPatternAttr(Ot.fgcolor,ye.i,null),He=Ot.fgopacity,Ke=l.getPatternAttr(Ot.size,ye.i,8),et=l.getPatternAttr(Ot.solidity,ye.i,.3),At=ye.mcc||f.isArrayOrTypedArray(Ot.shape)||f.isArrayOrTypedArray(Ot.bgcolor)||f.isArrayOrTypedArray(Ot.size)||f.isArrayOrTypedArray(Ot.solidity),mt=Se.uid;At&&(mt+="-"+ye.i),l.pattern(be,"point",Ve,mt,St,Ke,et,ye.mcc,Ot.fillmode,We,Ee,He)}else i.fill(be,dt);Qt&&i.stroke(be,Rt)}},l.makePointStyleFns=function(ye){var be={},Se=ye.marker;return be.markerScale=l.tryColorscale(Se,""),be.lineScale=l.tryColorscale(Se,"line"),a.traceIs(ye,"symbols")&&(be.ms2mrc=d.isBubble(ye)?c(ye):function(){return(Se.size||6)/2}),ye.selectedpoints&&f.extendFlat(be,l.makeSelectedPointStyleFns(ye)),be},l.makeSelectedPointStyleFns=function(ye){var be={},Se=ye.selected||{},Re=ye.unselected||{},Ve=ye.marker||{},Ae=Se.marker||{},Ce=Re.marker||{},Ze=Ve.opacity,Ye=Ae.opacity,ze=Ce.opacity,Ie=Ye!==void 0,Ge=ze!==void 0;(f.isArrayOrTypedArray(Ze)||Ie||Ge)&&(be.selectedOpacityFn=function(Xe){var at=Xe.mo===void 0?Ve.opacity:Xe.mo;return Xe.selected?Ie?Ye:at:Ge?ze:g*at});var dt=Ve.color,Rt=Ae.color,Qt=Ce.color;(Rt||Qt)&&(be.selectedColorFn=function(Xe){var at=Xe.mcc||dt;return Xe.selected?Rt||at:Qt||at});var Bt=Ve.size,Ct=Ae.size,Kt=Ce.size,Ot=Ct!==void 0,St=Kt!==void 0;return a.traceIs(ye,"symbols")&&(Ot||St)&&(be.selectedSizeFn=function(Xe){var at=Xe.mrc||Bt/2;return Xe.selected?Ot?Ct/2:at:St?Kt/2:at}),be},l.makeSelectedTextStyleFns=function(ye){var be={},Se=ye.selected||{},Re=ye.unselected||{},Ve=ye.textfont||{},Ae=Se.textfont||{},Ce=Re.textfont||{},Ze=Ve.color,Ye=Ae.color,ze=Ce.color;return be.selectedTextColorFn=function(Ie){var Ge=Ie.tc||Ze;return Ie.selected?Ye||Ge:ze||(Ye?Ge:i.addOpacity(Ge,g))},be},l.selectedPointStyle=function(ye,be){if(!(!ye.size()||!be.selectedpoints)){var Se=l.makeSelectedPointStyleFns(be),Re=be.marker||{},Ve=[];Se.selectedOpacityFn&&Ve.push(function(Ae,Ce){Ae.style("opacity",Se.selectedOpacityFn(Ce))}),Se.selectedColorFn&&Ve.push(function(Ae,Ce){i.fill(Ae,Se.selectedColorFn(Ce))}),Se.selectedSizeFn&&Ve.push(function(Ae,Ce){var Ze=Ce.mx||Re.symbol||0,Ye=Se.selectedSizeFn(Ce);Ae.attr("d",p(l.symbolNumber(Ze),Ye,xe(Ce,be),q(Ce,be))),Ce.mrc2=Ye}),Ve.length&&ye.each(function(Ae){for(var Ce=x.select(this),Ze=0;Ze<Ve.length;Ze++)Ve[Ze](Ce,Ae)})}},l.tryColorscale=function(ye,be){var Se=be?f.nestedProperty(ye,be).get():ye;if(Se){var Re=Se.color;if((Se.colorscale||Se._colorAx)&&f.isArrayOrTypedArray(Re))return n.makeColorScaleFuncFromTrace(Se)}return f.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function P(ye,be,Se,Re,Ve){var Ae=x.select(ye.node().parentNode),Ce=be.indexOf("top")!==-1?"top":be.indexOf("bottom")!==-1?"bottom":"middle",Ze=be.indexOf("left")!==-1?"end":be.indexOf("right")!==-1?"start":"middle",Ye=Re?Re/.8+1:0,ze=(v.lineCount(ye)-1)*b+1,Ie=S[Ze]*Ye,Ge=Se*.75+S[Ce]*Ye+(S[Ce]-1)*ze*Se/2;ye.attr("text-anchor",Ze),Ve||Ae.attr("transform",r(Ie,Ge))}function F(ye,be){var Se=ye.ts||be.textfont.size;return T(Se)&&Se>0?Se:0}l.textPointStyle=function(ye,be,Se){if(!!ye.size()){var Re;if(be.selectedpoints){var Ve=l.makeSelectedTextStyleFns(be);Re=Ve.selectedTextColorFn}var Ae=be.texttemplate,Ce=Se._fullLayout;ye.each(function(Ze){var Ye=x.select(this),ze=Ae?f.extractOption(Ze,be,"txt","texttemplate"):f.extractOption(Ze,be,"tx","text");if(!ze&&ze!==0){Ye.remove();return}if(Ae){var Ie=be._module.formatLabels,Ge=Ie?Ie(Ze,be,Ce):{},dt={};m(dt,be,Ze.i);var Rt=be._meta||{};ze=f.texttemplateString(ze,Ge,Ce._d3locale,dt,Ze,Rt)}var Qt=Ze.tp||be.textposition,Bt=F(Ze,be),Ct=Re?Re(Ze):Ze.tc||be.textfont.color;Ye.call(l.font,Ze.tf||be.textfont.family,Bt,Ct).text(ze).call(v.convertToTspans,Se).call(P,Qt,Bt,Ze.mrc)})}},l.selectedTextStyle=function(ye,be){if(!(!ye.size()||!be.selectedpoints)){var Se=l.makeSelectedTextStyleFns(be);ye.each(function(Re){var Ve=x.select(this),Ae=Se.selectedTextColorFn(Re),Ce=Re.tp||be.textposition,Ze=F(Re,be);i.fill(Ve,Ae);var Ye=a.traceIs(be,"bar-like");P(Ve,Ce,Ze,Re.mrc2||Re.mrc,Ye)})}};var I=.5;l.smoothopen=function(ye,be){if(ye.length<3)return"M"+ye.join("L");var Se="M"+ye[0],Re=[],Ve;for(Ve=1;Ve<ye.length-1;Ve++)Re.push(Y(ye[Ve-1],ye[Ve],ye[Ve+1],be));for(Se+="Q"+Re[0][0]+" "+ye[1],Ve=2;Ve<ye.length-1;Ve++)Se+="C"+Re[Ve-2][1]+" "+Re[Ve-1][0]+" "+ye[Ve];return Se+="Q"+Re[ye.length-3][1]+" "+ye[ye.length-1],Se},l.smoothclosed=function(ye,be){if(ye.length<3)return"M"+ye.join("L")+"Z";var Se="M"+ye[0],Re=ye.length-1,Ve=[Y(ye[Re],ye[0],ye[1],be)],Ae;for(Ae=1;Ae<Re;Ae++)Ve.push(Y(ye[Ae-1],ye[Ae],ye[Ae+1],be));for(Ve.push(Y(ye[Re-1],ye[Re],ye[0],be)),Ae=1;Ae<=Re;Ae++)Se+="C"+Ve[Ae-1][1]+" "+Ve[Ae][0]+" "+ye[Ae];return Se+="C"+Ve[Re][1]+" "+Ve[0][0]+" "+ye[0]+"Z",Se};var D,R;function O(ye,be,Se){return Se&&(ye=X(ye)),be?H(ye[1]):z(ye[0])}function z(ye){var be=x.round(ye,2);return D=be,be}function H(ye){var be=x.round(ye,2);return R=be,be}function Y(ye,be,Se,Re){var Ve=ye[0]-be[0],Ae=ye[1]-be[1],Ce=Se[0]-be[0],Ze=Se[1]-be[1],Ye=Math.pow(Ve*Ve+Ae*Ae,I/2),ze=Math.pow(Ce*Ce+Ze*Ze,I/2),Ie=(ze*ze*Ve-Ye*Ye*Ce)*Re,Ge=(ze*ze*Ae-Ye*Ye*Ze)*Re,dt=3*ze*(Ye+ze),Rt=3*Ye*(Ye+ze);return[[z(be[0]+(dt&&Ie/dt)),H(be[1]+(dt&&Ge/dt))],[z(be[0]-(Rt&&Ie/Rt)),H(be[1]-(Rt&&Ge/Rt))]]}var ee={hv:function(ye,be,Se){return"H"+z(be[0])+"V"+O(be,1,Se)},vh:function(ye,be,Se){return"V"+H(be[1])+"H"+O(be,0,Se)},hvh:function(ye,be,Se){return"H"+z((ye[0]+be[0])/2)+"V"+H(be[1])+"H"+O(be,0,Se)},vhv:function(ye,be,Se){return"V"+H((ye[1]+be[1])/2)+"H"+z(be[0])+"V"+O(be,1,Se)}},j=function(ye,be,Se){return"L"+O(be,0,Se)+","+O(be,1,Se)};l.steps=function(ye){var be=ee[ye]||j;return function(Se){for(var Re="M"+z(Se[0][0])+","+H(Se[0][1]),Ve=Se.length,Ae=1;Ae<Ve;Ae++)Re+=be(Se[Ae-1],Se[Ae],Ae===Ve-1);return Re}};function X(ye,be){var Se=ye.backoff,Re=ye.trace,Ve=ye.d,Ae=ye.i;if(Se&&Re&&Re.marker&&Re.marker.angle%360===0&&Re.line&&Re.line.shape!=="spline"){var Ce=f.isArrayOrTypedArray(Se),Ze=ye,Ye=be?be[0]:D||0,ze=be?be[1]:R||0,Ie=Ze[0],Ge=Ze[1],dt=Ie-Ye,Rt=Ge-ze,Qt=Math.atan2(Rt,dt),Bt=Ce?Se[Ae]:Se;if(Bt==="auto"){var Ct=Ze.i;Re.type==="scatter"&&Ct--;var Kt=Ze.marker;Bt=Kt?l.symbolBackOffs[l.symbolNumber(Kt.symbol)]*Kt.size:0,Bt+=l.getMarkerStandoff(Ve[Ct],Re)||0}var Ot=Ie-Bt*Math.cos(Qt),St=Ge-Bt*Math.sin(Qt);(Ot<=Ie&&Ot>=Ye||Ot>=Ie&&Ot<=Ye)&&(St<=Ge&&St>=ze||St>=Ge&&St<=ze)&&(ye=[Ot,St])}return ye}l.applyBackoff=X,l.makeTester=function(){var ye=f.ensureSingleById(x.select("body"),"svg","js-plotly-tester",function(Se){Se.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),be=f.ensureSingle(ye,"path","js-reference-point",function(Se){Se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=ye,l.testref=be},l.savedBBoxes={};var ae=0,fe=1e4;l.bBox=function(ye,be,Se){Se||(Se=K(ye));var Re;if(Se){if(Re=l.savedBBoxes[Se],Re)return f.extendFlat({},Re)}else if(ye.childNodes.length===1){var Ve=ye.childNodes[0];if(Se=K(Ve),Se){var Ae=+Ve.getAttribute("x")||0,Ce=+Ve.getAttribute("y")||0,Ze=Ve.getAttribute("transform");if(!Ze){var Ye=l.bBox(Ve,!1,Se);return Ae&&(Ye.left+=Ae,Ye.right+=Ae),Ce&&(Ye.top+=Ce,Ye.bottom+=Ce),Ye}if(Se+="~"+Ae+"~"+Ce+"~"+Ze,Re=l.savedBBoxes[Se],Re)return f.extendFlat({},Re)}}var ze,Ie;be?ze=ye:(Ie=l.tester.node(),ze=ye.cloneNode(!0),Ie.appendChild(ze)),x.select(ze).attr("transform",null).call(v.positionText,0,0);var Ge=ze.getBoundingClientRect(),dt=l.testref.node().getBoundingClientRect();be||Ie.removeChild(ze);var Rt={height:Ge.height,width:Ge.width,left:Ge.left-dt.left,top:Ge.top-dt.top,right:Ge.right-dt.left,bottom:Ge.bottom-dt.top};return ae>=fe&&(l.savedBBoxes={},ae=0),Se&&(l.savedBBoxes[Se]=Rt),ae++,f.extendFlat({},Rt)};function K(ye){var be=ye.getAttribute("data-unformatted");if(be!==null)return be+ye.getAttribute("data-math")+ye.getAttribute("text-anchor")+ye.getAttribute("style")}l.setClipUrl=function(ye,be,Se){ye.attr("clip-path",J(be,Se))};function J(ye,be){if(!ye)return null;var Se=be._context,Re=Se._exportedPlot?"":Se._baseUrl||"";return Re?"url('"+Re+"#"+ye+"')":"url(#"+ye+")"}l.getTranslate=function(ye){var be=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Se=ye.attr?"attr":"getAttribute",Re=ye[Se]("transform")||"",Ve=Re.replace(be,function(Ae,Ce,Ze){return[Ce,Ze].join(" ")}).split(" ");return{x:+Ve[0]||0,y:+Ve[1]||0}},l.setTranslate=function(ye,be,Se){var Re=/(\btranslate\(.*?\);?)/,Ve=ye.attr?"attr":"getAttribute",Ae=ye.attr?"attr":"setAttribute",Ce=ye[Ve]("transform")||"";return be=be||0,Se=Se||0,Ce=Ce.replace(Re,"").trim(),Ce+=r(be,Se),Ce=Ce.trim(),ye[Ae]("transform",Ce),Ce},l.getScale=function(ye){var be=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Se=ye.attr?"attr":"getAttribute",Re=ye[Se]("transform")||"",Ve=Re.replace(be,function(Ae,Ce,Ze){return[Ce,Ze].join(" ")}).split(" ");return{x:+Ve[0]||1,y:+Ve[1]||1}},l.setScale=function(ye,be,Se){var Re=/(\bscale\(.*?\);?)/,Ve=ye.attr?"attr":"getAttribute",Ae=ye.attr?"attr":"setAttribute",Ce=ye[Ve]("transform")||"";return be=be||1,Se=Se||1,Ce=Ce.replace(Re,"").trim(),Ce+="scale("+be+","+Se+")",Ce=Ce.trim(),ye[Ae]("transform",Ce),Ce};var U=/\s*sc.*/;l.setPointGroupScale=function(ye,be,Se){if(be=be||1,Se=Se||1,!!ye){var Re=be===1&&Se===1?"":"scale("+be+","+Se+")";ye.each(function(){var Ve=(this.getAttribute("transform")||"").replace(U,"");Ve+=Re,Ve=Ve.trim(),this.setAttribute("transform",Ve)})}};var V=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(ye,be,Se){!ye||ye.each(function(){var Re,Ve=x.select(this),Ae=Ve.select("text");if(!!Ae.node()){var Ce=parseFloat(Ae.attr("x")||0),Ze=parseFloat(Ae.attr("y")||0),Ye=(Ve.attr("transform")||"").match(V);be===1&&Se===1?Re=[]:Re=[r(Ce,Ze),"scale("+be+","+Se+")",r(-Ce,-Ze)],Ye&&Re.push(Ye),Ve.attr("transform",Re.join(""))}})};function q(ye,be){var Se;return ye&&(Se=ye.mf),Se===void 0&&(Se=be.marker&&be.marker.standoff||0),!be._geo&&!be._xA?-Se:Se}l.getMarkerStandoff=q;var re=Math.atan2,Z=Math.cos,Q=Math.sin;function ie(ye,be){var Se=be[0],Re=be[1];return[Se*Z(ye)-Re*Q(ye),Se*Q(ye)+Re*Z(ye)]}var oe,ne,se,_e,ue,ge;function xe(ye,be){var Se=ye.ma;Se===void 0&&(Se=be.marker.angle||0);var Re,Ve,Ae=be.marker.angleref;if(Ae==="previous"||Ae==="north"){if(be._geo){var Ce=be._geo.project(ye.lonlat);Re=Ce[0],Ve=Ce[1]}else{var Ze=be._xA,Ye=be._yA;if(Ze&&Ye)Re=Ze.c2p(ye.x),Ve=Ye.c2p(ye.y);else return 90}if(be._geo){var ze=ye.lonlat[0],Ie=ye.lonlat[1],Ge=be._geo.project([ze,Ie+1e-5]),dt=be._geo.project([ze+1e-5,Ie]),Rt=re(dt[1]-Ve,dt[0]-Re),Qt=re(Ge[1]-Ve,Ge[0]-Re),Bt;if(Ae==="north")Bt=Se/180*Math.PI;else if(Ae==="previous"){var Ct=ze/180*Math.PI,Kt=Ie/180*Math.PI,Ot=oe/180*Math.PI,St=ne/180*Math.PI,Xe=Ot-Ct,at=Z(St)*Q(Xe),We=Q(St)*Z(Kt)-Z(St)*Q(Kt)*Z(Xe);Bt=-re(at,We)-Math.PI,oe=ze,ne=Ie}var Ee=ie(Rt,[Z(Bt),0]),He=ie(Qt,[Q(Bt),0]);Se=re(Ee[1]+He[1],Ee[0]+He[0])/Math.PI*180,Ae==="previous"&&!(ge===be.uid&&ye.i===ue+1)&&(Se=null)}if(Ae==="previous"&&!be._geo)if(ge===be.uid&&ye.i===ue+1&&T(Re)&&T(Ve)){var Ke=Re-se,et=Ve-_e,At=be.line&&be.line.shape||"",mt=At.slice(At.length-1);mt==="h"&&(et=0),mt==="v"&&(Ke=0),Se+=re(et,Ke)/Math.PI*180+90}else Se=null}return se=Re,_e=Ve,ue=ye.i,ge=be.uid,Se}l.getMarkerAngle=xe},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(t,B,G){var x=t("parse-svg-path"),f=t("@plotly/d3").round,M="M0,0Z",T=Math.sqrt(2),e=Math.sqrt(3),a=Math.PI,i=Math.cos,n=Math.sin;B.exports={circle:{n:0,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y="M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z";return m?g(c,m,y):y}},square:{n:1,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")}},diamond:{n:2,f:function(d,c,m){if(r(c))return M;var l=f(d*1.3,2);return g(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z")}},cross:{n:3,f:function(d,c,m){if(r(c))return M;var l=f(d*.4,2),y=f(d*1.2,2);return g(c,m,"M"+y+","+l+"H"+l+"V"+y+"H-"+l+"V"+l+"H-"+y+"V-"+l+"H-"+l+"V-"+y+"H"+l+"V-"+l+"H"+y+"Z")}},x:{n:4,f:function(d,c,m){if(r(c))return M;var l=f(d*.8/T,2),y="l"+l+","+l,u="l"+l+",-"+l,A="l-"+l+",-"+l,_="l-"+l+","+l;return g(c,m,"M0,"+l+y+u+A+u+A+_+A+_+y+_+y+"Z")}},"triangle-up":{n:5,f:function(d,c,m){if(r(c))return M;var l=f(d*2/e,2),y=f(d/2,2),u=f(d,2);return g(c,m,"M-"+l+","+y+"H"+l+"L0,-"+u+"Z")}},"triangle-down":{n:6,f:function(d,c,m){if(r(c))return M;var l=f(d*2/e,2),y=f(d/2,2),u=f(d,2);return g(c,m,"M-"+l+",-"+y+"H"+l+"L0,"+u+"Z")}},"triangle-left":{n:7,f:function(d,c,m){if(r(c))return M;var l=f(d*2/e,2),y=f(d/2,2),u=f(d,2);return g(c,m,"M"+y+",-"+l+"V"+l+"L-"+u+",0Z")}},"triangle-right":{n:8,f:function(d,c,m){if(r(c))return M;var l=f(d*2/e,2),y=f(d/2,2),u=f(d,2);return g(c,m,"M-"+y+",-"+l+"V"+l+"L"+u+",0Z")}},"triangle-ne":{n:9,f:function(d,c,m){if(r(c))return M;var l=f(d*.6,2),y=f(d*1.2,2);return g(c,m,"M-"+y+",-"+l+"H"+l+"V"+y+"Z")}},"triangle-se":{n:10,f:function(d,c,m){if(r(c))return M;var l=f(d*.6,2),y=f(d*1.2,2);return g(c,m,"M"+l+",-"+y+"V"+l+"H-"+y+"Z")}},"triangle-sw":{n:11,f:function(d,c,m){if(r(c))return M;var l=f(d*.6,2),y=f(d*1.2,2);return g(c,m,"M"+y+","+l+"H-"+l+"V-"+y+"Z")}},"triangle-nw":{n:12,f:function(d,c,m){if(r(c))return M;var l=f(d*.6,2),y=f(d*1.2,2);return g(c,m,"M-"+l+","+y+"V-"+l+"H"+y+"Z")}},pentagon:{n:13,f:function(d,c,m){if(r(c))return M;var l=f(d*.951,2),y=f(d*.588,2),u=f(-d,2),A=f(d*-.309,2),_=f(d*.809,2);return g(c,m,"M"+l+","+A+"L"+y+","+_+"H-"+y+"L-"+l+","+A+"L0,"+u+"Z")}},hexagon:{n:14,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d/2,2),u=f(d*e/2,2);return g(c,m,"M"+u+",-"+y+"V"+y+"L0,"+l+"L-"+u+","+y+"V-"+y+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d/2,2),u=f(d*e/2,2);return g(c,m,"M-"+y+","+u+"H"+y+"L"+l+",0L"+y+",-"+u+"H-"+y+"L-"+l+",0Z")}},octagon:{n:16,f:function(d,c,m){if(r(c))return M;var l=f(d*.924,2),y=f(d*.383,2);return g(c,m,"M-"+y+",-"+l+"H"+y+"L"+l+",-"+y+"V"+y+"L"+y+","+l+"H-"+y+"L-"+l+","+y+"V-"+y+"Z")}},star:{n:17,f:function(d,c,m){if(r(c))return M;var l=d*1.4,y=f(l*.225,2),u=f(l*.951,2),A=f(l*.363,2),_=f(l*.588,2),p=f(-l,2),w=f(l*-.309,2),h=f(l*.118,2),L=f(l*.809,2),E=f(l*.382,2);return g(c,m,"M"+y+","+w+"H"+u+"L"+A+","+h+"L"+_+","+L+"L0,"+E+"L-"+_+","+L+"L-"+A+","+h+"L-"+u+","+w+"H-"+y+"L0,"+p+"Z")}},hexagram:{n:18,f:function(d,c,m){if(r(c))return M;var l=f(d*.66,2),y=f(d*.38,2),u=f(d*.76,2);return g(c,m,"M-"+u+",0l-"+y+",-"+l+"h"+u+"l"+y+",-"+l+"l"+y+","+l+"h"+u+"l-"+y+","+l+"l"+y+","+l+"h-"+u+"l-"+y+","+l+"l-"+y+",-"+l+"h-"+u+"Z")}},"star-triangle-up":{n:19,f:function(d,c,m){if(r(c))return M;var l=f(d*e*.8,2),y=f(d*.8,2),u=f(d*1.6,2),A=f(d*4,2),_="A "+A+","+A+" 0 0 1 ";return g(c,m,"M-"+l+","+y+_+l+","+y+_+"0,-"+u+_+"-"+l+","+y+"Z")}},"star-triangle-down":{n:20,f:function(d,c,m){if(r(c))return M;var l=f(d*e*.8,2),y=f(d*.8,2),u=f(d*1.6,2),A=f(d*4,2),_="A "+A+","+A+" 0 0 1 ";return g(c,m,"M"+l+",-"+y+_+"-"+l+",-"+y+_+"0,"+u+_+l+",-"+y+"Z")}},"star-square":{n:21,f:function(d,c,m){if(r(c))return M;var l=f(d*1.1,2),y=f(d*2,2),u="A "+y+","+y+" 0 0 1 ";return g(c,m,"M-"+l+",-"+l+u+"-"+l+","+l+u+l+","+l+u+l+",-"+l+u+"-"+l+",-"+l+"Z")}},"star-diamond":{n:22,f:function(d,c,m){if(r(c))return M;var l=f(d*1.4,2),y=f(d*1.9,2),u="A "+y+","+y+" 0 0 1 ";return g(c,m,"M-"+l+",0"+u+"0,"+l+u+l+",0"+u+"0,-"+l+u+"-"+l+",0Z")}},"diamond-tall":{n:23,f:function(d,c,m){if(r(c))return M;var l=f(d*.7,2),y=f(d*1.4,2);return g(c,m,"M0,"+y+"L"+l+",0L0,-"+y+"L-"+l+",0Z")}},"diamond-wide":{n:24,f:function(d,c,m){if(r(c))return M;var l=f(d*1.4,2),y=f(d*.7,2);return g(c,m,"M0,"+y+"L"+l+",0L0,-"+y+"L-"+l+",0Z")}},hourglass:{n:25,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z")},noDot:!0},bowtie:{n:26,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d/T,2);return g(c,m,"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,c,m){if(r(c))return M;var l=f(d*1.3,2);return g(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,c,m){if(r(c))return M;var l=f(d*1.3,2),y=f(d*.65,2);return g(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,c,m){if(r(c))return M;var l=f(d*1.4,2);return g(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,c,m){if(r(c))return M;var l=f(d*1.2,2),y=f(d*.85,2);return g(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,c,m){if(r(c))return M;var l=f(d/2,2),y=f(d,2);return g(c,m,"M"+l+","+y+"V-"+y+"M"+(l-y)+",-"+y+"V"+y+"M"+y+","+l+"H-"+y+"M-"+y+","+(l-y)+"H"+y)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,c,m){if(r(c))return M;var l=f(d*1.2,2),y=f(d*1.6,2),u=f(d*.8,2);return g(c,m,"M-"+l+","+u+"L0,0M"+l+","+u+"L0,0M0,-"+y+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,c,m){if(r(c))return M;var l=f(d*1.2,2),y=f(d*1.6,2),u=f(d*.8,2);return g(c,m,"M-"+l+",-"+u+"L0,0M"+l+",-"+u+"L0,0M0,"+y+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,c,m){if(r(c))return M;var l=f(d*1.2,2),y=f(d*1.6,2),u=f(d*.8,2);return g(c,m,"M"+u+","+l+"L0,0M"+u+",-"+l+"L0,0M-"+y+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,c,m){if(r(c))return M;var l=f(d*1.2,2),y=f(d*1.6,2),u=f(d*.8,2);return g(c,m,"M-"+u+","+l+"L0,0M-"+u+",-"+l+"L0,0M"+y+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,c,m){if(r(c))return M;var l=f(d*1.4,2);return g(c,m,"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,c,m){if(r(c))return M;var l=f(d*1.4,2);return g(c,m,"M0,"+l+"V-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,c,m){if(r(c))return M;var l=f(d,2);return g(c,m,"M"+l+","+l+"L-"+l+",-"+l)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d*2,2);return g(c,m,"M0,0L-"+l+","+y+"H"+l+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d*2,2);return g(c,m,"M0,0L-"+l+",-"+y+"H"+l+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,c,m){if(r(c))return M;var l=f(d*2,2),y=f(d,2);return g(c,m,"M0,0L"+l+",-"+y+"V"+y+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,c,m){if(r(c))return M;var l=f(d*2,2),y=f(d,2);return g(c,m,"M0,0L-"+l+",-"+y+"V"+y+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d*2,2);return g(c,m,"M-"+l+",0H"+l+"M0,0L-"+l+","+y+"H"+l+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,c,m){if(r(c))return M;var l=f(d,2),y=f(d*2,2);return g(c,m,"M-"+l+",0H"+l+"M0,0L-"+l+",-"+y+"H"+l+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,c,m){if(r(c))return M;var l=f(d*2,2),y=f(d,2);return g(c,m,"M0,-"+y+"V"+y+"M0,0L"+l+",-"+y+"V"+y+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,c,m){if(r(c))return M;var l=f(d*2,2),y=f(d,2);return g(c,m,"M0,-"+y+"V"+y+"M0,0L-"+l+",-"+y+"V"+y+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,c,m){if(r(c))return M;var l=a/2.5,y=2*d*i(l),u=2*d*n(l);return g(c,m,"M0,0L"+-y+","+u+"L"+y+","+u+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,c,m){if(r(c))return M;var l=a/4,y=2*d*i(l),u=2*d*n(l);return g(c,m,"M0,0L"+-y+","+u+"A "+2*d+","+2*d+" 0 0 1 "+y+","+u+"Z")},backoff:.4,noDot:!0}};function r(d){return d===null}var v,s,o,b;function g(d,c,m){if((!d||d%360===0)&&!c)return m;if(o===d&&b===c&&v===m)return s;o=d,b=c,v=m;function l(I,D){var R=i(I),O=n(I),z=D[0],H=D[1]+(c||0);return[z*R-H*O,z*O+H*R]}for(var y=d/180*a,u=0,A=0,_=x(m),p="",w=0;w<_.length;w++){var h=_[w],L=h[0],E=u,S=A;if(L==="M"||L==="L")u=+h[1],A=+h[2];else if(L==="m"||L==="l")u+=+h[1],A+=+h[2];else if(L==="H")u=+h[1];else if(L==="h")u+=+h[1];else if(L==="V")A=+h[1];else if(L==="v")A+=+h[1];else if(L==="A"){u=+h[1],A=+h[2];var P=l(y,[+h[6],+h[7]]);h[6]=P[0],h[7]=P[1],h[3]=+h[3]+d}(L==="H"||L==="V")&&(L="L"),(L==="h"||L==="v")&&(L="l"),(L==="m"||L==="l")&&(u-=E,A-=S);var F=l(y,[u,A]);(L==="H"||L==="V")&&(L="L"),(L==="M"||L==="L"||L==="m"||L==="l")&&(h[1]=F[0],h[2]=F[1]),h[0]=L,p+=h[0]+h.slice(1).join(",")}return s=p,p}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(t,B,G){B.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../registry"),M=t("../../plots/cartesian/axes"),T=t("../../lib"),e=t("./compute_error");B.exports=function(n){for(var r=n.calcdata,v=0;v<r.length;v++){var s=r[v],o=s[0].trace;if(o.visible===!0&&f.traceIs(o,"errorBarsOK")){var b=M.getFromId(n,o.xaxis),g=M.getFromId(n,o.yaxis);a(s,o,b,"x"),a(s,o,g,"y")}}};function a(i,n,r,v){var s=n["error_"+v]||{},o=s.visible&&["linear","log"].indexOf(r.type)!==-1,b=[];if(!!o){for(var g=e(s),d=0;d<i.length;d++){var c=i[d],m=c.i;if(m===void 0)m=d;else if(m===null)continue;var l=c[v];if(!!x(r.c2l(l))){var y=g(l,m);if(x(y[0])&&x(y[1])){var u=c[v+"s"]=l-y[0],A=c[v+"h"]=l+y[1];b.push(u,A)}}}var _=r._id,p=n._extremes[_],w=M.findExtremes(r,b,T.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(w.min),p.max=p.max.concat(w.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(t,B,G){B.exports=function(M){var T=M.type,e=M.symmetric;if(T==="data"){var a=M.array||[];if(e)return function(s,o){var b=+a[o];return[b,b]};var i=M.arrayminus||[];return function(s,o){var b=+a[o],g=+i[o];return!isNaN(b)||!isNaN(g)?[g||0,b||0]:[NaN,NaN]}}else{var n=x(T,M.value),r=x(T,M.valueminus);return e||M.valueminus===void 0?function(s){var o=n(s);return[o,o]}:function(s){return[r(s),n(s)]}}};function x(f,M){if(f==="percent")return function(T){return Math.abs(T*M/100)};if(f==="constant")return function(){return Math.abs(M)};if(f==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],394:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../registry"),M=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("./attributes");B.exports=function(a,i,n,r){var v="error_"+r.axis,s=T.newContainer(i,v),o=a[v]||{};function b(u,A){return M.coerce(o,s,e,u,A)}var g=o.array!==void 0||o.value!==void 0||o.type==="sqrt",d=b("visible",g);if(d!==!1){var c=b("type","array"in o?"data":"percent"),m=!0;c!=="sqrt"&&(m=b("symmetric",!((c==="data"?"arrayminus":"valueminus")in o))),c==="data"?(b("array"),b("traceref"),m||(b("arrayminus"),b("tracerefminus"))):(c==="percent"||c==="constant")&&(b("value"),m||b("valueminus"));var l="copy_"+r.inherit+"style";if(r.inherit){var y=i["error_"+r.inherit];(y||{}).visible&&b(l,!(o.color||x(o.thickness)||x(o.width)))}(!r.inherit||!s[l])&&(b("color",n),b("thickness"),b("width",f.traceIs(i,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(t,B,G){var x=t("../../lib"),f=t("../../plot_api/edit_types").overrideAll,M=t("./attributes"),T={error_x:x.extendFlat({},M),error_y:x.extendFlat({},M)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:x.extendFlat({},M),error_y:x.extendFlat({},M),error_z:x.extendFlat({},M)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,B.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:f(e,"calc","nested"),scattergl:f(T,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:a};function a(i,n,r){(n.error_y||{}).visible&&(r.yerr=i.yh-i.y,n.error_y.symmetric||(r.yerrneg=i.y-i.ys)),(n.error_x||{}).visible&&(r.xerr=i.xh-i.x,n.error_x.symmetric||(r.xerrneg=i.x-i.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../drawing"),T=t("../../traces/scatter/subtypes");B.exports=function(i,n,r,v){var s,o=r.xaxis,b=r.yaxis,g=v&&v.duration>0;n.each(function(d){var c=d[0].trace,m=c.error_x||{},l=c.error_y||{},y;c.ids&&(y=function(p){return p.id});var u=T.hasMarkers(c)&&c.marker.maxdisplayed>0;!l.visible&&!m.visible&&(d=[]);var A=x.select(this).selectAll("g.errorbar").data(d,y);if(A.exit().remove(),!!d.length){m.visible||A.selectAll("path.xerror").remove(),l.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var _=A.enter().append("g").classed("errorbar",!0);g&&_.style("opacity",0).transition().duration(v.duration).style("opacity",1),M.setClipUrl(A,r.layerClipId,i),A.each(function(p){var w=x.select(this),h=e(p,o,b);if(!(u&&!p.vis)){var L,E=w.select("path.yerror");if(l.visible&&f(h.x)&&f(h.yh)&&f(h.ys)){var S=l.width;L="M"+(h.x-S)+","+h.yh+"h"+2*S+"m-"+S+",0V"+h.ys,h.noYS||(L+="m-"+S+",0h"+2*S),s=!E.size(),s?E=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(E=E.transition().duration(v.duration).ease(v.easing)),E.attr("d",L)}else E.remove();var P=w.select("path.xerror");if(m.visible&&f(h.y)&&f(h.xh)&&f(h.xs)){var F=(m.copy_ystyle?l:m).width;L="M"+h.xh+","+(h.y-F)+"v"+2*F+"m0,-"+F+"H"+h.xs,h.noXS||(L+="m0,-"+F+"v"+2*F),s=!P.size(),s?P=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):g&&(P=P.transition().duration(v.duration).ease(v.easing)),P.attr("d",L)}else P.remove()}})}})};function e(a,i,n){var r={x:i.c2p(a.x),y:n.c2p(a.y)};return a.yh!==void 0&&(r.yh=n.c2p(a.yh),r.ys=n.c2p(a.ys),f(r.ys)||(r.noYS=!0,r.ys=n.c2p(a.ys,!0))),a.xh!==void 0&&(r.xh=i.c2p(a.xh),r.xs=i.c2p(a.xs),f(r.xs)||(r.noXS=!0,r.xs=i.c2p(a.xs,!0))),r}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(t,B,G){var x=t("@plotly/d3"),f=t("../color");B.exports=function(T){T.each(function(e){var a=e[0].trace,i=a.error_y||{},n=a.error_x||{},r=x.select(this);r.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(f.stroke,i.color),n.copy_ystyle&&(n=i),r.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(f.stroke,n.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("./layout_attributes").hoverlabel,M=t("../../lib/extend").extendFlat;B.exports={hoverlabel:{bgcolor:M({},f.bgcolor,{arrayOk:!0}),bordercolor:M({},f.bordercolor,{arrayOk:!0}),font:x({arrayOk:!0,editType:"none"}),align:M({},f.align,{arrayOk:!0}),namelength:M({},f.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(t,B,G){var x=t("../../lib"),f=t("../../registry");B.exports=function(e){var a=e.calcdata,i=e._fullLayout;function n(b){return function(g){return x.coerceHoverinfo({hoverinfo:g},{_module:b._module},i)}}for(var r=0;r<a.length;r++){var v=a[r],s=v[0].trace;if(!f.traceIs(s,"pie-like")){var o=f.traceIs(s,"2dMap")?M:x.fillArray;o(s.hoverinfo,v,"hi",n(s)),s.hovertemplate&&o(s.hovertemplate,v,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,v,"hbg"),o(s.hoverlabel.bordercolor,v,"hbc"),o(s.hoverlabel.font.size,v,"hts"),o(s.hoverlabel.font.color,v,"htc"),o(s.hoverlabel.font.family,v,"htf"),o(s.hoverlabel.namelength,v,"hnl"),o(s.hoverlabel.align,v,"hta"))}}};function M(T,e,a,i){i=i||x.identity,Array.isArray(T)&&(e[0][a]=i(T))}},{"../../lib":515,"../../registry":647}],400:[function(t,B,G){var x=t("../../registry"),f=t("./hover").hover;B.exports=function(T,e,a){var i=x.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&f(T,e,a,!0);function n(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(i&&i.then?i.then(n):n(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(t,B,G){B.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("./hoverlabel_defaults");B.exports=function(e,a,i,n){function r(s,o){return x.coerce(e,a,f,s,o)}var v=x.extendFlat({},n.hoverlabel);a.hovertemplate&&(v.namelength=-1),M(e,a,r,v)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(t,B,G){var x=t("../../lib");G.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},G.isTraceInSubplots=function(i,n){if(i.type==="splom"){for(var r=i.xaxes||[],v=i.yaxes||[],s=0;s<r.length;s++)for(var o=0;o<v.length;o++)if(n.indexOf(r[s]+v[o])!==-1)return!0;return!1}return n.indexOf(G.getSubplot(i))!==-1},G.flat=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=n;return r},G.p2c=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=i[v].p2c(n);return r},G.getDistanceFunction=function(i,n,r,v){return i==="closest"?v||G.quadrature(n,r):i.charAt(0)==="x"?n:r},G.getClosest=function(i,n,r){if(r.index!==!1)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var v=0;v<i.length;v++){var s=n(i[v]);s<=r.distance&&(r.index=v,r.distance=s)}return r},G.inbox=function(i,n,r){return i*n<0||i===0?r:1/0},G.quadrature=function(i,n){return function(r){var v=i(r),s=n(r);return Math.sqrt(v*v+s*s)}},G.makeEventData=function(i,n,r){var v="index"in i?i.index:i.pointNumber,s={data:n._input,fullData:n,curveNumber:n.index,pointNumber:v};if(n._indexToPoints){var o=n._indexToPoints[v];o.length===1?s.pointIndex=o[0]:s.pointIndices=o}else s.pointIndex=v;return n._module.eventData?s=n._module.eventData(s,i,n,r,v):("xVal"in i?s.x=i.xVal:"x"in i&&(s.x=i.x),"yVal"in i?s.y=i.yVal:"y"in i&&(s.y=i.y),i.xa&&(s.xaxis=i.xa),i.ya&&(s.yaxis=i.ya),i.zLabelVal!==void 0&&(s.z=i.zLabelVal)),G.appendArrayPointValue(s,n,v),s},G.appendArrayPointValue=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=M(o);if(i[b]===void 0){var g=x.nestedProperty(n,o).get(),d=T(g,r);d!==void 0&&(i[b]=d)}}},G.appendArrayMultiPointValues=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=M(o);if(i[b]===void 0){for(var g=x.nestedProperty(n,o).get(),d=new Array(r.length),c=0;c<r.length;c++)d[c]=T(g,r[c]);i[b]=d}}};var f={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function M(i){return f[i]||i}function T(i,n){if(Array.isArray(n)){if(Array.isArray(i)&&Array.isArray(i[n[0]]))return i[n[0]][n[1]]}else return i[n]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};G.isUnifiedHover=function(i){return typeof i!="string"?!1:!!a[i]},G.isXYhover=function(i){return typeof i!="string"?!1:!!e[i]}},{"../../lib":515}],404:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("tinycolor2"),T=t("../../lib"),e=T.strTranslate,a=T.strRotate,i=t("../../lib/events"),n=t("../../lib/svg_text_utils"),r=t("../../lib/override_cursor"),v=t("../drawing"),s=t("../color"),o=t("../dragelement"),b=t("../../plots/cartesian/axes"),g=t("../../registry"),d=t("./helpers"),c=t("./constants"),m=t("../legend/defaults"),l=t("../legend/draw"),y=c.YANGLE,u=Math.PI*y/180,A=1/Math.sin(u),_=Math.cos(u),p=Math.sin(u),w=c.HOVERARROWSIZE,h=c.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};G.hover=function(V,q,re,Z){V=T.getGraphDiv(V);var Q=q.target;T.throttle(V._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){S(V,q,re,Z,Q)})},G.loneHover=function(V,q){var re=!0;Array.isArray(V)||(re=!1,V=[V]);var Z=q.gd,Q=fe(Z),ie=K(Z),oe=V.map(function(be){var Se=be._x0||be.x0||be.x||0,Re=be._x1||be.x1||be.x||0,Ve=be._y0||be.y0||be.y||0,Ae=be._y1||be.y1||be.y||0,Ce=be.eventData;if(Ce){var Ze=Math.min(Se,Re),Ye=Math.max(Se,Re),ze=Math.min(Ve,Ae),Ie=Math.max(Ve,Ae),Ge=be.trace;if(g.traceIs(Ge,"gl3d")){var dt=Z._fullLayout[Ge.scene]._scene.container,Rt=dt.offsetLeft,Qt=dt.offsetTop;Ze+=Rt,Ye+=Rt,ze+=Qt,Ie+=Qt}Ce.bbox={x0:Ze+ie,x1:Ye+ie,y0:ze+Q,y1:Ie+Q},q.inOut_bbox&&q.inOut_bbox.push(Ce.bbox)}else Ce=!1;return{color:be.color||s.defaultLine,x0:be.x0||be.x||0,x1:be.x1||be.x||0,y0:be.y0||be.y||0,y1:be.y1||be.y||0,xLabel:be.xLabel,yLabel:be.yLabel,zLabel:be.zLabel,text:be.text,name:be.name,idealAlign:be.idealAlign,borderColor:be.borderColor,fontFamily:be.fontFamily,fontSize:be.fontSize,fontColor:be.fontColor,nameLength:be.nameLength,textAlign:be.textAlign,trace:be.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:be.hovertemplate||!1,hovertemplateLabels:be.hovertemplateLabels||!1,eventData:Ce}}),ne=!1,se=I(oe,{gd:Z,hovermode:"closest",rotateLabels:ne,bgColor:q.bgColor||s.background,container:x.select(q.container),outerContainer:q.outerContainer||q.container}),_e=5,ue=0,ge=0;se.sort(function(be,Se){return be.y0-Se.y0}).each(function(be,Se){var Re=be.y0-be.by/2;Re-_e<ue?be.offset=ue-Re+_e:be.offset=0,ue=Re+be.by+be.offset,Se===q.anchorIndex&&(ge=be.offset)}).each(function(be){be.offset-=ge});var xe=Z._fullLayout._invScaleX,ye=Z._fullLayout._invScaleY;return O(se,ne,xe,ye),re?se:se.node()};function S(U,V,q,re,Z){q||(q="xy");var Q=Array.isArray(q)?q:[q],ie=U._fullLayout,oe=ie._plots||[],ne=oe[q],se=ie._has("cartesian");if(ne){var _e=ne.overlays.map(function(fr){return fr.id});Q=Q.concat(_e)}for(var ue=Q.length,ge=new Array(ue),xe=new Array(ue),ye=!1,be=0;be<ue;be++){var Se=Q[be];if(oe[Se])ye=!0,ge[be]=oe[Se].xaxis,xe[be]=oe[Se].yaxis;else if(ie[Se]&&ie[Se]._subplot){var Re=ie[Se]._subplot;ge[be]=Re.xaxis,xe[be]=Re.yaxis}else{T.warn("Unrecognized subplot: "+Se);return}}var Ve=V.hovermode||ie.hovermode;if(Ve&&!ye&&(Ve="closest"),["x","y","closest","x unified","y unified"].indexOf(Ve)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return o.unhoverRaw(U,V);var Ae=ie.hoverdistance;Ae===-1&&(Ae=1/0);var Ce=ie.spikedistance;Ce===-1&&(Ce=1/0);var Ze=[],Ye=[],ze,Ie,Ge,dt,Rt,Qt,Bt,Ct,Kt,Ot,St,Xe,at,We={hLinePoint:null,vLinePoint:null},Ee=!1;if(Array.isArray(V))for(Ve="array",Ge=0;Ge<V.length;Ge++)Rt=U.calcdata[V[Ge].curveNumber||0],Rt&&(Qt=Rt[0].trace,Rt[0].trace.hoverinfo!=="skip"&&(Ye.push(Rt),Qt.orientation==="h"&&(Ee=!0)));else{for(dt=0;dt<U.calcdata.length;dt++)Rt=U.calcdata[dt],Qt=Rt[0].trace,Qt.hoverinfo!=="skip"&&d.isTraceInSubplots(Qt,Q)&&(Ye.push(Rt),Qt.orientation==="h"&&(Ee=!0));var He=!Z,Ke,et;if(He)"xpx"in V?Ke=V.xpx:Ke=ge[0]._length/2,"ypx"in V?et=V.ypx:et=xe[0]._length/2;else{if(i.triggerHandler(U,"plotly_beforehover",V)===!1)return;var At=Z.getBoundingClientRect();Ke=V.clientX-At.left,et=V.clientY-At.top,ie._calcInverseTransform(U);var mt=T.apply3DTransform(ie._invTransform)(Ke,et);if(Ke=mt[0],et=mt[1],Ke<0||Ke>ge[0]._length||et<0||et>xe[0]._length)return o.unhoverRaw(U,V)}if(V.pointerX=Ke+ge[0]._offset,V.pointerY=et+xe[0]._offset,"xval"in V?ze=d.flat(Q,V.xval):ze=d.p2c(ge,Ke),"yval"in V?Ie=d.flat(Q,V.yval):Ie=d.p2c(xe,et),!f(ze[0])||!f(Ie[0]))return T.warn("Fx.hover failed",V,U),o.unhoverRaw(U,V)}var Mt=1/0;function Gt(fr,Nr){for(dt=0;dt<Ye.length;dt++)if(Rt=Ye[dt],!(!Rt||!Rt[0]||!Rt[0].trace)&&(Qt=Rt[0].trace,!(Qt.visible!==!0||Qt._length===0)&&["carpet","contourcarpet"].indexOf(Qt._module.name)===-1)){if(Qt.type==="splom"?(Ct=0,Bt=Q[Ct]):(Bt=d.getSubplot(Qt),Ct=Q.indexOf(Bt)),Kt=Ve,d.isUnifiedHover(Kt)&&(Kt=Kt.charAt(0)),Xe={cd:Rt,trace:Qt,xa:ge[Ct],ya:xe[Ct],maxHoverDistance:Ae,maxSpikeDistance:Ce,index:!1,distance:Math.min(Mt,Ae),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Qt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[Bt]&&(Xe.subplot=ie[Bt]._subplot),ie._splomScenes&&ie._splomScenes[Qt.uid]&&(Xe.scene=ie._splomScenes[Qt.uid]),at=Ze.length,Kt==="array"){var Vr=V[dt];"pointNumber"in Vr?(Xe.index=Vr.pointNumber,Kt="closest"):(Kt="","xval"in Vr&&(Ot=Vr.xval,Kt="x"),"yval"in Vr&&(St=Vr.yval,Kt=Kt?"closest":"y"))}else fr!==void 0&&Nr!==void 0?(Ot=fr,St=Nr):(Ot=ze[Ct],St=Ie[Ct]);if(Ae!==0)if(Qt._module&&Qt._module.hoverPoints){var Dr=Qt._module.hoverPoints(Xe,Ot,St,Kt,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Dr)for(var Er,jr=0;jr<Dr.length;jr++)Er=Dr[jr],f(Er.x0)&&f(Er.y0)&&Ze.push(z(Er,Ve))}else T.log("Unrecognized trace type in hover:",Qt);if(Ve==="closest"&&Ze.length>at&&(Ze.splice(0,at),Mt=Ze[0].distance),se&&Ce!==0&&Ze.length===0){Xe.distance=Ce,Xe.index=!1;var kn=Qt._module.hoverPoints(Xe,Ot,St,"closest",{hoverLayer:ie._hoverlayer});if(kn&&(kn=kn.filter(function(ma){return ma.spikeDistance<=Ce})),kn&&kn.length){var mn,Wn=kn.filter(function(ma){return ma.xa.showspikes&&ma.xa.spikesnap!=="hovered data"});if(Wn.length){var In=Wn[0];f(In.x0)&&f(In.y0)&&(mn=Ht(In),(!We.vLinePoint||We.vLinePoint.spikeDistance>mn.spikeDistance)&&(We.vLinePoint=mn))}var $n=kn.filter(function(ma){return ma.ya.showspikes&&ma.ya.spikesnap!=="hovered data"});if($n.length){var Kn=$n[0];f(Kn.x0)&&f(Kn.y0)&&(mn=Ht(Kn),(!We.hLinePoint||We.hLinePoint.spikeDistance>mn.spikeDistance)&&(We.hLinePoint=mn))}}}}}Gt();function zt(fr,Nr,Vr){for(var Dr=null,Er=1/0,jr,kn=0;kn<fr.length;kn++)jr=fr[kn].spikeDistance,Vr&&kn===0&&(jr=-1/0),jr<=Er&&jr<=Nr&&(Dr=fr[kn],Er=jr);return Dr}function Ht(fr){return fr?{xa:fr.xa,ya:fr.ya,x:fr.xSpike!==void 0?fr.xSpike:(fr.x0+fr.x1)/2,y:fr.ySpike!==void 0?fr.ySpike:(fr.y0+fr.y1)/2,distance:fr.distance,spikeDistance:fr.spikeDistance,curveNumber:fr.trace.index,color:fr.color,pointNumber:fr.index}:null}var Xt={fullLayout:ie,container:ie._hoverlayer,event:V},Wt=U._spikepoints,sr={vLinePoint:We.vLinePoint,hLinePoint:We.hLinePoint};U._spikepoints=sr;var Gr=function(){Ze.sort(function(fr,Nr){return fr.distance-Nr.distance}),Ze=X(Ze,Ve)};Gr();var cn=Ve.charAt(0),en=(cn==="x"||cn==="y")&&Ze[0]&&E[Ze[0].trace.type];if(se&&Ce!==0&&Ze.length!==0){var st=Ze.filter(function(fr){return fr.ya.showspikes}),rr=zt(st,Ce,en);We.hLinePoint=Ht(rr);var er=Ze.filter(function(fr){return fr.xa.showspikes}),jt=zt(er,Ce,en);We.vLinePoint=Ht(jt)}if(Ze.length===0){var Mr=o.unhoverRaw(U,V);return se&&(We.hLinePoint!==null||We.vLinePoint!==null)&&ee(Wt)&&H(U,We,Xt),Mr}if(se&&ee(Wt)&&H(U,We,Xt),d.isXYhover(Kt)&&Ze[0].length!==0&&Ze[0].trace.type!=="splom"){var it=Ze[0];L[it.trace.type]?Ze=Ze.filter(function(fr){return fr.trace.index===it.trace.index}):Ze=[it];var Qe=Ze.length,ft=ae("x",it,ie),ct=ae("y",it,ie);Gt(ft,ct);var Et=[],Nt={},Pe=0,Le=function(fr){var Nr=L[fr.trace.type]?P(fr):fr.trace.index;if(!Nt[Nr])Pe++,Nt[Nr]=Pe,Et.push(fr);else{var Vr=Nt[Nr]-1,Dr=Et[Vr];Vr>0&&Math.abs(fr.distance)<Math.abs(Dr.distance)&&(Et[Vr]=fr)}},ot;for(ot=0;ot<Qe;ot++)Le(Ze[ot]);for(ot=Ze.length-1;ot>Qe-1;ot--)Le(Ze[ot]);Ze=Et,Gr()}var ut=U._hoverdata,pt=[],Pt=fe(U),xt=K(U);for(Ge=0;Ge<Ze.length;Ge++){var Lt=Ze[Ge],Zt=d.makeEventData(Lt,Lt.trace,Lt.cd);if(Lt.hovertemplate!==!1){var ur=!1;Lt.cd[Lt.index]&&Lt.cd[Lt.index].ht&&(ur=Lt.cd[Lt.index].ht),Lt.hovertemplate=ur||Lt.trace.hovertemplate||!1}if(Lt.xa&&Lt.ya){var Pr=Lt.x0+Lt.xa._offset,Ar=Lt.x1+Lt.xa._offset,kr=Lt.y0+Lt.ya._offset,Zr=Lt.y1+Lt.ya._offset,lr=Math.min(Pr,Ar),br=Math.max(Pr,Ar),Or=Math.min(kr,Zr),Hr=Math.max(kr,Zr);Zt.bbox={x0:lr+xt,x1:br+xt,y0:Or+Pt,y1:Hr+Pt}}Lt.eventData=[Zt],pt.push(Zt)}U._hoverdata=pt;var Lr=Ve==="y"&&(Ye.length>1||Ze.length>1)||Ve==="closest"&&Ee&&Ze.length>1,nt=s.combine(ie.plot_bgcolor||s.background,ie.paper_bgcolor),It=I(Ze,{gd:U,hovermode:Ve,rotateLabels:Lr,bgColor:nt,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(d.isUnifiedHover(Ve)||(R(It,Lr?"xa":"ya",ie),O(It,Lr,ie._invScaleX,ie._invScaleY)),Z&&Z.tagName){var Jt=g.getComponentMethod("annotations","hasClickToShow")(U,pt);r(x.select(Z),Jt?"pointer":"")}!Z||re||!Y(U,V,ut)||(ut&&U.emit("plotly_unhover",{event:V,points:ut}),U.emit("plotly_hover",{event:V,points:U._hoverdata,xaxes:ge,yaxes:xe,xvals:ze,yvals:Ie}))}function P(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var F=/<extra>([\s\S]*)<\/extra>/;function I(U,V){var q=V.gd,re=q._fullLayout,Z=V.hovermode,Q=V.rotateLabels,ie=V.bgColor,oe=V.container,ne=V.outerContainer,se=V.commonLabelOpts||{};if(U.length===0)return[[]];var _e=V.fontFamily||c.HOVERFONT,ue=V.fontSize||c.HOVERFONTSIZE,ge=U[0],xe=ge.xa,ye=ge.ya,be=Z.charAt(0),Se=ge[be+"Label"],Re=J(q,ne),Ve=Re.top,Ae=Re.width,Ce=Re.height,Ze=Se!==void 0&&ge.distance<=V.hoverdistance&&(Z==="x"||Z==="y");if(Ze){var Ye=!0,ze,Ie;for(ze=0;ze<U.length;ze++)if(Ye&&U[ze].zLabel===void 0&&(Ye=!1),Ie=U[ze].hoverinfo||U[ze].trace.hoverinfo,Ie){var Ge=Array.isArray(Ie)?Ie:Ie.split("+");if(Ge.indexOf("all")===-1&&Ge.indexOf(Z)===-1){Ze=!1;break}}Ye&&(Ze=!1)}var dt=oe.selectAll("g.axistext").data(Ze?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var jt=x.select(this),Mr=T.ensureSingle(jt,"path","",function(Zr){Zr.style({"stroke-width":"1px"})}),it=T.ensureSingle(jt,"text","",function(Zr){Zr.attr("data-notex",1)}),Qe=se.bgcolor||s.defaultLine,ft=se.bordercolor||s.contrast(Qe),ct=s.contrast(Qe),Et={family:se.font.family||_e,size:se.font.size||ue,color:se.font.color||ct};Mr.style({fill:Qe,stroke:ft}),it.text(Se).call(v.font,Et).call(n.positionText,0,0).call(n.convertToTspans,q),jt.attr("transform","");var Nt=J(q,it.node()),Pe,Le;if(Z==="x"){var ot=xe.side==="top"?"-":"";it.attr("text-anchor","middle").call(n.positionText,0,xe.side==="top"?Ve-Nt.bottom-w-h:Ve-Nt.top+w+h),Pe=xe._offset+(ge.x0+ge.x1)/2,Le=ye._offset+(xe.side==="top"?0:ye._length);var ut=Nt.width/2+h;Pe<ut?(Pe=ut,Mr.attr("d","M-"+(ut-w)+",0L-"+(ut-w*2)+","+ot+w+"H"+(h+Nt.width/2)+"v"+ot+(h*2+Nt.height)+"H-"+ut+"V"+ot+w+"Z")):Pe>re.width-ut?(Pe=re.width-ut,Mr.attr("d","M"+(ut-w)+",0L"+ut+","+ot+w+"v"+ot+(h*2+Nt.height)+"H-"+ut+"V"+ot+w+"H"+(ut-w*2)+"Z")):Mr.attr("d","M0,0L"+w+","+ot+w+"H"+(h+Nt.width/2)+"v"+ot+(h*2+Nt.height)+"H-"+(h+Nt.width/2)+"V"+ot+w+"H-"+w+"Z")}else{var pt,Pt,xt;ye.side==="right"?(pt="start",Pt=1,xt="",Pe=xe._offset+xe._length):(pt="end",Pt=-1,xt="-",Pe=xe._offset),Le=ye._offset+(ge.y0+ge.y1)/2,it.attr("text-anchor",pt),Mr.attr("d","M0,0L"+xt+w+","+w+"V"+(h+Nt.height/2)+"h"+xt+(h*2+Nt.width)+"V-"+(h+Nt.height/2)+"H"+xt+w+"V-"+w+"Z");var Lt=Nt.height/2,Zt=Ve-Nt.top-Lt,ur="clip"+re._uid+"commonlabel"+ye._id,Pr;if(Pe<Nt.width+2*h+w){Pr="M-"+(w+h)+"-"+Lt+"h-"+(Nt.width-h)+"V"+Lt+"h"+(Nt.width-h)+"Z";var Ar=Nt.width-Pe+h;n.positionText(it,Ar,Zt),pt==="end"&&it.selectAll("tspan").each(function(){var Zr=x.select(this),lr=v.tester.append("text").text(Zr.text()).call(v.font,Et),br=J(q,lr.node());Math.round(br.width)<Math.round(Nt.width)&&Zr.attr("x",Ar-br.width),lr.remove()})}else n.positionText(it,Pt*(h+w),Zt),Pr=null;var kr=re._topclips.selectAll("#"+ur).data(Pr?[0]:[]);kr.enter().append("clipPath").attr("id",ur).append("path"),kr.exit().remove(),kr.select("path").attr("d",Pr),v.setClipUrl(it,Pr?ur:null,q)}jt.attr("transform",e(Pe,Le))}),d.isUnifiedHover(Z)){oe.selectAll("g.hovertext").remove();var Rt=U.filter(function(jt){return jt.hoverinfo!=="none"});if(Rt.length===0)return;var Qt=re.hoverlabel,Bt=Qt.font,Ct={showlegend:!0,legend:{title:{text:Se,font:Bt},font:Bt,bgcolor:Qt.bgcolor,bordercolor:Qt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},Kt={font:Bt};m(Ct,Kt,q._fullData);var Ot=Kt.legend;Ot.entries=[];for(var St=0;St<Rt.length;St++){var Xe=Rt[St];if(Xe.hoverinfo!=="none"){var at=D(Xe,!0,Z,re,Se),We=at[0],Ee=at[1];Xe.name=Ee,Ee!==""?Xe.text=Ee+" : "+We:Xe.text=We;var He=Xe.cd[Xe.index];He&&(He.mc&&(Xe.mc=He.mc),He.mcc&&(Xe.mc=He.mcc),He.mlc&&(Xe.mlc=He.mlc),He.mlcc&&(Xe.mlc=He.mlcc),He.mlw&&(Xe.mlw=He.mlw),He.mrc&&(Xe.mrc=He.mrc),He.dir&&(Xe.dir=He.dir)),Xe._distinct=!0,Ot.entries.push([Xe])}}Ot.entries.sort(function(jt,Mr){return jt[0].trace.index-Mr[0].trace.index}),Ot.layer=oe,Ot._inHover=!0,Ot._groupTitleFont=Qt.grouptitlefont,l(q,Ot);var Ke=oe.select("g.legend"),et=J(q,Ke.node()),At=et.width+2*h,mt=et.height+2*h,Mt=Rt[0],Gt=(Mt.x0+Mt.x1)/2,zt=(Mt.y0+Mt.y1)/2,Ht=!(g.traceIs(Mt.trace,"bar-like")||g.traceIs(Mt.trace,"box-violin")),Xt,Wt;be==="y"?Ht?(Wt=zt-h,Xt=zt+h):(Wt=Math.min.apply(null,Rt.map(function(jt){return Math.min(jt.y0,jt.y1)})),Xt=Math.max.apply(null,Rt.map(function(jt){return Math.max(jt.y0,jt.y1)}))):Wt=Xt=T.mean(Rt.map(function(jt){return(jt.y0+jt.y1)/2}))-mt/2;var sr,Gr;be==="x"?Ht?(sr=Gt+h,Gr=Gt-h):(sr=Math.max.apply(null,Rt.map(function(jt){return Math.max(jt.x0,jt.x1)})),Gr=Math.min.apply(null,Rt.map(function(jt){return Math.min(jt.x0,jt.x1)}))):sr=Gr=T.mean(Rt.map(function(jt){return(jt.x0+jt.x1)/2}))-At/2;var cn=xe._offset,en=ye._offset;Xt+=en,sr+=cn,Gr+=cn-At,Wt+=en-mt;var st,rr;return sr+At<Ae&&sr>=0?st=sr:Gr+At<Ae&&Gr>=0?st=Gr:cn+At<Ae?st=cn:sr-Gt<Gt-Gr+At?st=Ae-At:st=0,st+=h,Xt+mt<Ce&&Xt>=0?rr=Xt:Wt+mt<Ce&&Wt>=0?rr=Wt:en+mt<Ce?rr=en:Xt-zt<zt-Wt+mt?rr=Ce-mt:rr=0,rr+=h,Ke.attr("transform",e(st-1,rr-1)),Ke}var er=oe.selectAll("g.hovertext").data(U,function(jt){return P(jt)});return er.enter().append("g").classed("hovertext",!0).each(function(){var jt=x.select(this);jt.append("rect").call(s.fill,s.addOpacity(ie,.8)),jt.append("text").classed("name",!0),jt.append("path").style("stroke-width","1px"),jt.append("text").classed("nums",!0).call(v.font,_e,ue)}),er.exit().remove(),er.each(function(jt){var Mr=x.select(this).attr("transform",""),it=jt.color;Array.isArray(it)&&(it=it[jt.eventData[0].pointNumber]);var Qe=jt.bgcolor||it,ft=s.combine(s.opacity(Qe)?Qe:s.defaultLine,ie),ct=s.combine(s.opacity(it)?it:s.defaultLine,ie),Et=jt.borderColor||s.contrast(ft),Nt=D(jt,Ze,Z,re,Se,Mr),Pe=Nt[0],Le=Nt[1],ot=Mr.select("text.nums").call(v.font,jt.fontFamily||_e,jt.fontSize||ue,jt.fontColor||Et).text(Pe).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q),ut=Mr.select("text.name"),pt=0,Pt=0;if(Le&&Le!==Pe){ut.call(v.font,jt.fontFamily||_e,jt.fontSize||ue,ct).text(Le).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q);var xt=J(q,ut.node());pt=xt.width+2*h,Pt=xt.height+2*h}else ut.remove(),Mr.select("rect").remove();Mr.select("path").style({fill:ft,stroke:Et});var Lt=jt.xa._offset+(jt.x0+jt.x1)/2,Zt=jt.ya._offset+(jt.y0+jt.y1)/2,ur=Math.abs(jt.x1-jt.x0),Pr=Math.abs(jt.y1-jt.y0),Ar=J(q,ot.node()),kr=Ar.width/re._invScaleX,Zr=Ar.height/re._invScaleY;jt.ty0=(Ve-Ar.top)/re._invScaleY,jt.bx=kr+2*h,jt.by=Math.max(Zr+2*h,Pt),jt.anchor="start",jt.txwidth=kr,jt.tx2width=pt,jt.offset=0;var lr=(kr+w+h+pt)*re._invScaleX,br,Or;if(Q)jt.pos=Lt,br=Zt+Pr/2+lr<=Ce,Or=Zt-Pr/2-lr>=0,(jt.idealAlign==="top"||!br)&&Or?(Zt-=Pr/2,jt.anchor="end"):br?(Zt+=Pr/2,jt.anchor="start"):jt.anchor="middle";else if(jt.pos=Zt,br=Lt+ur/2+lr<=Ae,Or=Lt-ur/2-lr>=0,(jt.idealAlign==="left"||!br)&&Or)Lt-=ur/2,jt.anchor="end";else if(br)Lt+=ur/2,jt.anchor="start";else{jt.anchor="middle";var Hr=lr/2,Lr=Lt+Hr-Ae,nt=Lt-Hr;Lr>0&&(Lt-=Lr),nt<0&&(Lt+=-nt)}ot.attr("text-anchor",jt.anchor),pt&&ut.attr("text-anchor",jt.anchor),Mr.attr("transform",e(Lt,Zt)+(Q?a(y):""))}),er}function D(U,V,q,re,Z,Q){var ie="",oe="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=T.templateString(U.name,U.trace._meta)),ie=j(U.name,U.nameLength));var ne=q.charAt(0),se=ne==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(oe+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(oe+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&(oe+=(oe?"z: ":"")+U.zLabel)):V&&U[ne+"Label"]===Z?oe=U[se+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(oe=U.yLabel):U.yLabel===void 0?oe=U.xLabel:oe="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(oe+=(oe?"<br>":"")+U.text),U.extraText!==void 0&&(oe+=(oe?"<br>":"")+U.extraText),Q&&oe===""&&!U.hovertemplate&&(ie===""&&Q.remove(),oe=ie);var _e=U.hovertemplate||!1;if(_e){var ue=U.hovertemplateLabels||U;U[ne+"Label"]!==Z&&(ue[ne+"other"]=ue[ne+"Val"],ue[ne+"otherLabel"]=ue[ne+"Label"]),oe=T.hovertemplateString(_e,ue,re._d3locale,U.eventData[0]||{},U.trace._meta),oe=oe.replace(F,function(ge,xe){return ie=j(xe,U.nameLength),""})}return[oe,ie]}function R(U,V,q){var re=0,Z=1,Q=U.size(),ie=new Array(Q),oe=0;U.each(function(ze){var Ie=ze[V],Ge=Ie._id.charAt(0)==="x",dt=Ie.range;oe===0&&dt&&dt[0]>dt[1]!==Ge&&(Z=-1),ie[oe++]=[{datum:ze,traceIndex:ze.trace.index,dp:0,pos:ze.pos,posref:ze.posref,size:ze.by*(Ge?A:1)/2,pmin:0,pmax:Ge?q.width:q.height}]}),ie.sort(function(ze,Ie){return ze[0].posref-Ie[0].posref||Z*(Ie[0].traceIndex-ze[0].traceIndex)});var ne,se,_e,ue,ge,xe,ye;function be(ze){var Ie=ze[0],Ge=ze[ze.length-1];if(se=Ie.pmin-Ie.pos-Ie.dp+Ie.size,_e=Ge.pos+Ge.dp+Ge.size-Ie.pmax,se>.01){for(ge=ze.length-1;ge>=0;ge--)ze[ge].dp+=se;ne=!1}if(!(_e<.01)){if(se<-.01){for(ge=ze.length-1;ge>=0;ge--)ze[ge].dp-=_e;ne=!1}if(!!ne){var dt=0;for(ue=0;ue<ze.length;ue++)xe=ze[ue],xe.pos+xe.dp+xe.size>Ie.pmax&&dt++;for(ue=ze.length-1;ue>=0&&!(dt<=0);ue--)xe=ze[ue],xe.pos>Ie.pmax-1&&(xe.del=!0,dt--);for(ue=0;ue<ze.length&&!(dt<=0);ue++)if(xe=ze[ue],xe.pos<Ie.pmin+1)for(xe.del=!0,dt--,_e=xe.size*2,ge=ze.length-1;ge>=0;ge--)ze[ge].dp-=_e;for(ue=ze.length-1;ue>=0&&!(dt<=0);ue--)xe=ze[ue],xe.pos+xe.dp+xe.size>Ie.pmax&&(xe.del=!0,dt--)}}}for(;!ne&&re<=Q;){for(re++,ne=!0,ue=0;ue<ie.length-1;){var Se=ie[ue],Re=ie[ue+1],Ve=Se[Se.length-1],Ae=Re[0];if(se=Ve.pos+Ve.dp+Ve.size-Ae.pos-Ae.dp+Ae.size,se>.01&&Ve.pmin===Ae.pmin&&Ve.pmax===Ae.pmax){for(ge=Re.length-1;ge>=0;ge--)Re[ge].dp+=se;for(Se.push.apply(Se,Re),ie.splice(ue+1,1),ye=0,ge=Se.length-1;ge>=0;ge--)ye+=Se[ge].dp;for(_e=ye/Se.length,ge=Se.length-1;ge>=0;ge--)Se[ge].dp-=_e;ne=!1}else ue++}ie.forEach(be)}for(ue=ie.length-1;ue>=0;ue--){var Ce=ie[ue];for(ge=Ce.length-1;ge>=0;ge--){var Ze=Ce[ge],Ye=Ze.datum;Ye.offset=Ze.dp,Ye.del=Ze.del}}}function O(U,V,q,re){var Z=function(ie){return ie*q},Q=function(ie){return ie*re};U.each(function(ie){var oe=x.select(this);if(ie.del)return oe.remove();var ne=oe.select("text.nums"),se=ie.anchor,_e=se==="end"?-1:1,ue={start:1,end:-1,middle:0}[se],ge=ue*(w+h),xe=ge+ue*(ie.txwidth+h),ye=0,be=ie.offset,Se=se==="middle";Se&&(ge-=ie.tx2width/2,xe+=ie.txwidth/2+h),V&&(be*=-p,ye=ie.offset*_),oe.select("path").attr("d",Se?"M-"+Z(ie.bx/2+ie.tx2width/2)+","+Q(be-ie.by/2)+"h"+Z(ie.bx)+"v"+Q(ie.by)+"h-"+Z(ie.bx)+"Z":"M0,0L"+Z(_e*w+ye)+","+Q(w+be)+"v"+Q(ie.by/2-w)+"h"+Z(_e*ie.bx)+"v-"+Q(ie.by)+"H"+Z(_e*w+ye)+"V"+Q(be-w)+"Z");var Re=ye+ge,Ve=be+ie.ty0-ie.by/2+h,Ae=ie.textAlign||"auto";Ae!=="auto"&&(Ae==="left"&&se!=="start"?(ne.attr("text-anchor","start"),Re=Se?-ie.bx/2-ie.tx2width/2+h:-ie.bx-h):Ae==="right"&&se!=="end"&&(ne.attr("text-anchor","end"),Re=Se?ie.bx/2-ie.tx2width/2-h:ie.bx+h)),ne.call(n.positionText,Z(Re),Q(Ve)),ie.tx2width&&(oe.select("text.name").call(n.positionText,Z(xe+ue*h+ye),Q(be+ie.ty0-ie.by/2+h)),oe.select("rect").call(v.setRect,Z(xe+(ue-1)*ie.tx2width/2+ye),Q(be-ie.by/2-1),Z(ie.tx2width),Q(ie.by+2)))})}function z(U,V){var q=U.index,re=U.trace||{},Z=U.cd[0],Q=U.cd[q]||{};function ie(ge){return ge||f(ge)&&ge===0}var oe=Array.isArray(q)?function(ge,xe){var ye=T.castOption(Z,q,ge);return ie(ye)?ye:T.extractOption({},re,"",xe)}:function(ge,xe){return T.extractOption(Q,re,ge,xe)};function ne(ge,xe,ye){var be=oe(xe,ye);ie(be)&&(U[ge]=be)}if(ne("hoverinfo","hi","hoverinfo"),ne("bgcolor","hbg","hoverlabel.bgcolor"),ne("borderColor","hbc","hoverlabel.bordercolor"),ne("fontFamily","htf","hoverlabel.font.family"),ne("fontSize","hts","hoverlabel.font.size"),ne("fontColor","htc","hoverlabel.font.color"),ne("nameLength","hnl","hoverlabel.namelength"),ne("textAlign","hta","hoverlabel.align"),U.posref=V==="y"||V==="closest"&&re.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=T.constrain(U.x0,0,U.xa._length),U.x1=T.constrain(U.x1,0,U.xa._length),U.y0=T.constrain(U.y0,0,U.ya._length),U.y1=T.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:b.hoverLabelText(U.xa,U.xLabelVal,re.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:b.hoverLabelText(U.ya,U.yLabelVal,re.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var se=b.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+se+" / -"+b.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+=" \xB1 "+se,V==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var _e=b.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+_e+" / -"+b.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+=" \xB1 "+_e,V==="y"&&(U.distance+=1)}var ue=U.hoverinfo||U.trace.hoverinfo;return ue&&ue!=="all"&&(ue=Array.isArray(ue)?ue:ue.split("+"),ue.indexOf("x")===-1&&(U.xLabel=void 0),ue.indexOf("y")===-1&&(U.yLabel=void 0),ue.indexOf("z")===-1&&(U.zLabel=void 0),ue.indexOf("text")===-1&&(U.text=void 0),ue.indexOf("name")===-1&&(U.name=void 0)),U}function H(U,V,q){var re=q.container,Z=q.fullLayout,Q=Z._size,ie=q.event,oe=!!V.hLinePoint,ne=!!V.vLinePoint,se,_e;if(re.selectAll(".spikeline").remove(),!!(ne||oe)){var ue=s.combine(Z.plot_bgcolor,Z.paper_bgcolor);if(oe){var ge=V.hLinePoint,xe,ye;se=ge&&ge.xa,_e=ge&&ge.ya;var be=_e.spikesnap;be==="cursor"?(xe=ie.pointerX,ye=ie.pointerY):(xe=se._offset+ge.x,ye=_e._offset+ge.y);var Se=M.readability(ge.color,ue)<1.5?s.contrast(ue):ge.color,Re=_e.spikemode,Ve=_e.spikethickness,Ae=_e.spikecolor||Se,Ce=b.getPxPosition(U,_e),Ze,Ye;if(Re.indexOf("toaxis")!==-1||Re.indexOf("across")!==-1){if(Re.indexOf("toaxis")!==-1&&(Ze=Ce,Ye=xe),Re.indexOf("across")!==-1){var ze=_e._counterDomainMin,Ie=_e._counterDomainMax;_e.anchor==="free"&&(ze=Math.min(ze,_e.position),Ie=Math.max(Ie,_e.position)),Ze=Q.l+ze*Q.w,Ye=Q.l+Ie*Q.w}re.insert("line",":first-child").attr({x1:Ze,x2:Ye,y1:ye,y2:ye,"stroke-width":Ve,stroke:Ae,"stroke-dasharray":v.dashStyle(_e.spikedash,Ve)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Ze,x2:Ye,y1:ye,y2:ye,"stroke-width":Ve+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}Re.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:Ce+(_e.side!=="right"?Ve:-Ve),cy:ye,r:Ve,fill:Ae}).classed("spikeline",!0)}if(ne){var Ge=V.vLinePoint,dt,Rt;se=Ge&&Ge.xa,_e=Ge&&Ge.ya;var Qt=se.spikesnap;Qt==="cursor"?(dt=ie.pointerX,Rt=ie.pointerY):(dt=se._offset+Ge.x,Rt=_e._offset+Ge.y);var Bt=M.readability(Ge.color,ue)<1.5?s.contrast(ue):Ge.color,Ct=se.spikemode,Kt=se.spikethickness,Ot=se.spikecolor||Bt,St=b.getPxPosition(U,se),Xe,at;if(Ct.indexOf("toaxis")!==-1||Ct.indexOf("across")!==-1){if(Ct.indexOf("toaxis")!==-1&&(Xe=St,at=Rt),Ct.indexOf("across")!==-1){var We=se._counterDomainMin,Ee=se._counterDomainMax;se.anchor==="free"&&(We=Math.min(We,se.position),Ee=Math.max(Ee,se.position)),Xe=Q.t+(1-Ee)*Q.h,at=Q.t+(1-We)*Q.h}re.insert("line",":first-child").attr({x1:dt,x2:dt,y1:Xe,y2:at,"stroke-width":Kt,stroke:Ot,"stroke-dasharray":v.dashStyle(se.spikedash,Kt)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:dt,x2:dt,y1:Xe,y2:at,"stroke-width":Kt+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}Ct.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:dt,cy:St-(se.side!=="top"?Kt:-Kt),r:Kt,fill:Ot}).classed("spikeline",!0)}}}function Y(U,V,q){if(!q||q.length!==U._hoverdata.length)return!0;for(var re=q.length-1;re>=0;re--){var Z=q[re],Q=U._hoverdata[re];if(Z.curveNumber!==Q.curveNumber||String(Z.pointNumber)!==String(Q.pointNumber)||String(Z.pointNumbers)!==String(Q.pointNumbers))return!0}return!1}function ee(U,V){return!V||V.vLinePoint!==U._spikepoints.vLinePoint||V.hLinePoint!==U._spikepoints.hLinePoint}function j(U,V){return n.plainText(U||"",{len:V,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,V){for(var q=V.charAt(0),re=[],Z=[],Q=[],ie=0;ie<U.length;ie++){var oe=U[ie];g.traceIs(oe.trace,"bar-like")||g.traceIs(oe.trace,"box-violin")?Q.push(oe):oe.trace[q+"period"]?Z.push(oe):re.push(oe)}return re.concat(Z).concat(Q)}function ae(U,V,q){var re=V[U+"a"],Z=V[U+"Val"],Q=V.cd[0];if(re.type==="category")Z=re._categoriesMap[Z];else if(re.type==="date"){var ie=V.trace[U+"periodalignment"];if(ie){var oe=V.cd[V.index],ne=oe[U+"Start"];ne===void 0&&(ne=oe[U]);var se=oe[U+"End"];se===void 0&&(se=oe[U]);var _e=se-ne;ie==="end"?Z+=_e:ie==="middle"&&(Z+=_e/2)}Z=re.d2c(Z)}return Q&&Q.t&&Q.t.posLetter===re._id&&(q.boxmode==="group"||q.violinmode==="group")&&(Z+=Q.t.dPos),Z}function fe(U){return U.offsetTop+U.clientTop}function K(U){return U.offsetLeft+U.clientLeft}function J(U,V){var q=U._fullLayout,re=V.getBoundingClientRect(),Z=re.x,Q=re.y,ie=Z+re.width,oe=Q+re.height,ne=T.apply3DTransform(q._invTransform)(Z,Q),se=T.apply3DTransform(q._invTransform)(ie,oe),_e=ne[0],ue=ne[1],ge=se[0],xe=se[1];return{x:_e,y:ue,width:ge-_e,height:xe-ue,top:Math.min(ue,xe),left:Math.min(_e,ge),right:Math.max(_e,ge),bottom:Math.max(ue,xe)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(t,B,G){var x=t("../../lib"),f=t("../color"),M=t("./helpers").isUnifiedHover;B.exports=function(e,a,i,n){n=n||{};var r=a.legend;function v(s){n.font[s]||(n.font[s]=r?a.legend.font[s]:a.font[s])}a&&M(a.hovermode)&&(n.font||(n.font={}),v("size"),v("family"),v("color"),r?(n.bgcolor||(n.bgcolor=f.combine(a.legend.bgcolor,a.paper_bgcolor)),n.bordercolor||(n.bordercolor=a.legend.bordercolor)):n.bgcolor||(n.bgcolor=a.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),x.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return e[i]!==void 0?e[i]:x.coerce(T,e,f,i,n)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../dragelement"),T=t("./helpers"),e=t("./layout_attributes"),a=t("./hover");B.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:e},attributes:t("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:n,castHoverinfo:r,hover:a.hover,unhover:M.unhover,loneHover:a.loneHover,loneUnhover:i,click:t("./click")};function i(v){var s=f.isD3Selection(v)?v:x.select(v);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function n(v,s,o){return f.castOption(v,s,"hoverlabel."+o)}function r(v,s,o){function b(g){return f.coerceHoverinfo({hoverinfo:g},{_module:v._module},s)}return f.castOption(v,o,"hoverinfo",b)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(t,B,G){var x=t("./constants"),f=t("../../plots/font_attributes"),M=f({editType:"none"});M.family.dflt=x.HOVERFONT,M.size.dflt=x.HOVERFONTSIZE,B.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:M,grouptitlefont:f({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes"),M=t("./hovermode_defaults"),T=t("./hoverlabel_defaults");B.exports=function(a,i){function n(g,d){return x.coerce(a,i,f,g,d)}var r=M(a,i);r&&(n("hoverdistance"),n("spikedistance"));var v=n("dragmode");v==="select"&&n("selectdirection");var s=i._has("mapbox"),o=i._has("geo"),b=i._basePlotModules.length;i.dragmode==="zoom"&&((s||o)&&b===1||s&&o&&b===2)&&(i.dragmode="pan"),T(a,i,n),x.coerceFont(n,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(t,B,G){var x=t("../../lib"),f=t("./hoverlabel_defaults"),M=t("./layout_attributes");B.exports=function(e,a){function i(n,r){return x.coerce(e,a,M,n,r)}f(e,a,i)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(t,B,G){var x=t("../../lib"),f=t("../../lib/regex").counter,M=t("../../plots/domain").attributes,T=t("../../plots/cartesian/constants").idRegex,e=t("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[f("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:M({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(o,b,g){var d=b[g+"axes"],c=Object.keys((o._splomAxes||{})[g]||{});if(Array.isArray(d))return d;if(c.length)return c}function n(o,b){var g=o.grid||{},d=i(b,g,"x"),c=i(b,g,"y");if(!o.grid&&!d&&!c)return;var m=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]),l=Array.isArray(d),y=Array.isArray(c),u=l&&d!==g.xaxes&&y&&c!==g.yaxes,A,_;m?(A=g.subplots.length,_=g.subplots[0].length):(y&&(A=c.length),l&&(_=d.length));var p=e.newContainer(b,"grid");function w(O,z){return x.coerce(g,p,a,O,z)}var h=w("rows",A),L=w("columns",_);if(!(h*L>1)){delete b.grid;return}if(!m&&!l&&!y){var E=w("pattern")==="independent";E&&(m=!0)}p._hasSubplotGrid=m;var S=w("roworder"),P=S==="top to bottom",F=m?.2:.1,I=m?.3:.1,D,R;u&&b._splomGridDflt&&(D=b._splomGridDflt.xside,R=b._splomGridDflt.yside),p._domains={x:r("x",w,F,D,L),y:r("y",w,I,R,h,P)}}function r(o,b,g,d,c,m){var l=b(o+"gap",g),y=b("domain."+o);b(o+"side",d);for(var u=new Array(c),A=y[0],_=(y[1]-A)/(c-l),p=_*(1-l),w=0;w<c;w++){var h=A+_*w;u[m?c-1-w:w]=[h,h+p]}return u}function v(o,b){var g=b.grid;if(!(!g||!g._domains)){var d=o.grid||{},c=b._subplots,m=g._hasSubplotGrid,l=g.rows,y=g.columns,u=g.pattern==="independent",A,_,p,w,h,L,E,S=g._axisMap={};if(m){var P=d.subplots||[];L=g.subplots=new Array(l);var F=1;for(A=0;A<l;A++){var I=L[A]=new Array(y),D=P[A]||[];for(_=0;_<y;_++)if(u?(h=F===1?"xy":"x"+F+"y"+F,F++):h=D[_],I[_]="",c.cartesian.indexOf(h)!==-1){if(E=h.indexOf("y"),p=h.slice(0,E),w=h.slice(E),S[p]!==void 0&&S[p]!==_||S[w]!==void 0&&S[w]!==A)continue;I[_]=h,S[p]=_,S[w]=A}}}else{var R=i(b,d,"x"),O=i(b,d,"y");g.xaxes=s(R,c.xaxis,y,S,"x"),g.yaxes=s(O,c.yaxis,l,S,"y")}var z=g._anchors={},H=g.roworder==="top to bottom";for(var Y in S){var ee=Y.charAt(0),j=g[ee+"side"],X,ae,fe;if(j.length<8)z[Y]="free";else if(ee==="x"){if(j.charAt(0)==="t"===H?(X=0,ae=1,fe=l):(X=l-1,ae=-1,fe=-1),m){var K=S[Y];for(A=X;A!==fe;A+=ae)if(h=L[A][K],!!h&&(E=h.indexOf("y"),h.slice(0,E)===Y)){z[Y]=h.slice(E);break}}else for(A=X;A!==fe;A+=ae)if(w=g.yaxes[A],c.cartesian.indexOf(Y+w)!==-1){z[Y]=w;break}}else if(j.charAt(0)==="l"?(X=0,ae=1,fe=y):(X=y-1,ae=-1,fe=-1),m){var J=S[Y];for(A=X;A!==fe;A+=ae)if(h=L[J][A],!!h&&(E=h.indexOf("y"),h.slice(E)===Y)){z[Y]=h.slice(0,E);break}}else for(A=X;A!==fe;A+=ae)if(p=g.xaxes[A],c.cartesian.indexOf(p+Y)!==-1){z[Y]=p;break}}}}function s(o,b,g,d,c){var m=new Array(g),l;function y(u,A){b.indexOf(A)!==-1&&d[A]===void 0?(m[u]=A,d[A]=u):m[u]=""}if(Array.isArray(o))for(l=0;l<g;l++)y(l,o[l]);else for(y(0,c),l=1;l<g;l++)y(l,c+(l+1));return m}B.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:n,contentDefaults:v}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(t,B,G){var x=t("../../plots/cartesian/constants"),f=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=f("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",x.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",x.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib/to_log_range");B.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!!(n||r)){for(var v=T._fullLayout.images,s=e._id.charAt(0),o,b,g=0;g<v.length;g++)if(o=v[g],b="images["+g+"].",o[s+"ref"]===e._id){var d=o[s],c=o["size"+s],m=null,l=null;if(n){m=f(d,e.range);var y=c/Math.pow(10,m)/2;l=2*Math.log(y+Math.sqrt(1+y*y))/Math.LN10}else m=Math.pow(10,d),l=m*(Math.pow(10,c/2)-Math.pow(10,-c/2));x(m)?x(l)||(l=null):(m=null,l=null),i(b+s,m),i(b+"size"+s,l)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../../plots/array_container_defaults"),T=t("./attributes"),e="images";B.exports=function(n,r){var v={name:e,handleItemDefaults:a};M(n,r,v)};function a(i,n,r){function v(y,u){return x.coerce(i,n,T,y,u)}var s=v("source"),o=v("visible",!!s);if(!o)return n;v("layer"),v("xanchor"),v("yanchor"),v("sizex"),v("sizey"),v("sizing"),v("opacity");for(var b={_fullLayout:r},g=["x","y"],d=0;d<2;d++){var c=g[d],m=f.coerceRef(i,n,b,c,"paper",void 0);if(m!=="paper"){var l=f.getFromId(b,m);l._imgIndices.push(n._index)}f.coercePosition(n,b,v,m,c,0)}return n}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(t,B,G){var x=t("@plotly/d3"),f=t("../drawing"),M=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/axis_ids"),e=t("../../constants/xmlns_namespaces");B.exports=function(i){var n=i._fullLayout,r=[],v={},s=[],o,b;for(b=0;b<n.images.length;b++){var g=n.images[b];if(g.visible)if(g.layer==="below"&&g.xref!=="paper"&&g.yref!=="paper"){o=T.ref2id(g.xref)+T.ref2id(g.yref);var d=n._plots[o];if(!d){s.push(g);continue}d.mainplot&&(o=d.mainplot.id),v[o]||(v[o]=[]),v[o].push(g)}else g.layer==="above"?r.push(g):s.push(g)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function m(w){var h=x.select(this);if(this._imgSrc!==w.source)if(h.attr("xmlns",e.svg),w.source&&w.source.slice(0,5)==="data:")h.attr("xlink:href",w.source),this._imgSrc=w.source;else{var L=new Promise(function(E){var S=new Image;this.img=S,S.setAttribute("crossOrigin","anonymous"),S.onerror=P,S.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var I=F.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=F.toDataURL("image/png");h.attr("xlink:href",D),E()},h.on("error",P),S.src=w.source,this._imgSrc=w.source;function P(){h.remove(),E()}}.bind(this));i._promises.push(L)}}function l(w){var h=x.select(this),L=M.getFromId(i,w.xref),E=M.getFromId(i,w.yref),S=M.getRefType(w.xref)==="domain",P=M.getRefType(w.yref)==="domain",F=n._size,I,D;L!==void 0?I=typeof w.xref=="string"&&S?L._length*w.sizex:Math.abs(L.l2p(w.sizex)-L.l2p(0)):I=w.sizex*F.w,E!==void 0?D=typeof w.yref=="string"&&P?E._length*w.sizey:Math.abs(E.l2p(w.sizey)-E.l2p(0)):D=w.sizey*F.h;var R=I*c.x[w.xanchor].offset,O=D*c.y[w.yanchor].offset,z=c.x[w.xanchor].sizing+c.y[w.yanchor].sizing,H,Y;switch(L!==void 0?H=typeof w.xref=="string"&&S?L._length*w.x+L._offset:L.r2p(w.x)+L._offset:H=w.x*F.w+F.l,H+=R,E!==void 0?Y=typeof w.yref=="string"&&P?E._length*(1-w.y)+E._offset:E.r2p(w.y)+E._offset:Y=F.h-w.y*F.h+F.t,Y+=O,w.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}h.attr({x:H,y:Y,width:I,height:D,preserveAspectRatio:z,opacity:w.opacity});var ee=L&&M.getRefType(w.xref)!=="domain"?L._id:"",j=E&&M.getRefType(w.yref)!=="domain"?E._id:"",X=ee+j;f.setClipUrl(h,X?"clip"+n._uid+X:null,i)}var y=n._imageLowerLayer.selectAll("image").data(s),u=n._imageUpperLayer.selectAll("image").data(r);y.enter().append("image"),u.enter().append("image"),y.exit().remove(),u.exit().remove(),y.each(function(w){m.bind(this)(w),l.bind(this)(w)}),u.each(function(w){m.bind(this)(w),l.bind(this)(w)});var A=Object.keys(n._plots);for(b=0;b<A.length;b++){o=A[b];var _=n._plots[o];if(!!_.imagelayer){var p=_.imagelayer.selectAll("image").data(v[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(w){m.bind(this)(w),l.bind(this)(w)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(t,B,G){B.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("../color/attributes");B.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:x({editType:"legend"}),grouptitlefont:x({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:x({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(t,B,G){B.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../../plot_api/plot_template"),T=t("../../plots/attributes"),e=t("./attributes"),a=t("../../plots/layout_attributes"),i=t("./helpers");B.exports=function(r,v,s){var o=r.legend||{},b=M.newContainer(v,"legend");function g(D,R){return f.coerce(o,b,e,D,R)}for(var d,c=function(D,R){var O=d._input,z=d;return f.coerce(O,z,T,D,R)},m=v.font||{},l=f.coerceFont(g,"grouptitlefont",f.extendFlat({},m,{size:Math.round(m.size*1.1)})),y=0,u=!1,A="normal",_=0;_<s.length;_++)d=s[_],d.visible&&((d.showlegend||d._dfltShowLegend&&!(d._module&&d._module.attributes&&d._module.attributes.showlegend&&d._module.attributes.showlegend.dflt===!1))&&(y++,d.showlegend&&(u=!0,(x.traceIs(d,"pie-like")||d._input.showlegend===!0)&&y++),f.coerceFont(c,"legendgrouptitle.font",l)),(x.traceIs(d,"bar")&&v.barmode==="stack"||["tonextx","tonexty"].indexOf(d.fill)!==-1)&&(A=i.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),d.legendgroup!==void 0&&d.legendgroup!==""&&(A=i.isReversed({traceorder:A})?"reversed+grouped":"grouped"));var p=f.coerce(r,v,a,"showlegend",u&&y>1);if(p===!1&&(v.legend=void 0),!(p===!1&&!o.uirevision)&&(g("uirevision",v.uirevision),p!==!1)){g("bgcolor",v.paper_bgcolor),g("bordercolor"),g("borderwidth");var w=f.coerceFont(g,"font",v.font),h=g("orientation"),L=h==="h",E,S,P;L?(E=0,x.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(S=1.1,P="bottom"):(S=-.1,P="top")):(E=1.02,S=1,P="auto"),g("traceorder",A),i.isGrouped(v.legend)&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("x",E),g("xanchor"),g("y",S),g("yanchor",P),g("valign"),f.noneOrAll(o,b,["x","y"]);var F=g("title.text");if(F){g("title.side",L?"left":"top");var I=f.extendFlat({},w,{size:f.bigFont(w.size)});f.coerceFont(g,"title.font",I)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib/events"),a=t("../dragelement"),i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("./handle_click"),s=t("./constants"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=o.FROM_TL,d=o.FROM_BR,c=t("./get_legend_data"),m=t("./style"),l=t("./helpers"),y=1;B.exports=function(O,z){return z||(z=O._fullLayout.legend||{}),u(O,z)};function u(R,O){var z=R._fullLayout,H="legend"+z._uid,Y,ee=O._inHover;if(ee?(Y=O.layer,H+="-hover"):Y=z._infolayer,!!Y){R._legendMouseDownTime||(R._legendMouseDownTime=0);var j;if(ee){if(!O.entries)return;j=c(O.entries,O)}else{if(!R.calcdata)return;j=z.showlegend&&c(R.calcdata,O)}var X=z.hiddenlabels||[];if(!ee&&(!z.showlegend||!j.length))return Y.selectAll(".legend").remove(),z._topdefs.select("#"+H).remove(),M.autoMargin(R,"legend");var ae=f.ensureSingle(Y,"g","legend",function(Q){ee||Q.attr("pointer-events","all")}),fe=f.ensureSingleById(z._topdefs,"clipPath",H,function(Q){Q.append("rect")}),K=f.ensureSingle(ae,"rect","bg",function(Q){Q.attr("shape-rendering","crispEdges")});K.call(n.stroke,O.bordercolor).call(n.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");var J=f.ensureSingle(ae,"g","scrollbox"),U=O.title;if(O._titleWidth=0,O._titleHeight=0,U.text){var V=f.ensureSingle(J,"text","legendtitletext");V.attr("text-anchor","start").call(i.font,U.font).text(U.text),L(V,J,R,O,y)}else J.selectAll(".legendtitletext").remove();var q=f.ensureSingle(ae,"rect","scrollbar",function(Q){Q.attr(s.scrollBarEnterAttrs).call(n.fill,s.scrollBarColor)}),re=J.selectAll("g.groups").data(j);re.enter().append("g").attr("class","groups"),re.exit().remove();var Z=re.selectAll("g.traces").data(f.identity);Z.enter().append("g").attr("class","traces"),Z.exit().remove(),Z.style("opacity",function(Q){var ie=Q[0].trace;return T.traceIs(ie,"pie-like")?X.indexOf(Q[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){x.select(this).call(p,R,O)}).call(m,R,O).each(function(){ee||x.select(this).call(h,R)}),f.syncOrAsync([M.previousPromises,function(){return P(R,re,Z,O)},function(){var Q=z._size,ie=O.borderwidth;if(!ee){var oe=F(R);if(oe)return;var ne=Q.l+Q.w*O.x-g[I(O)]*O._width,se=Q.t+Q.h*(1-O.y)-g[D(O)]*O._effHeight;if(z.margin.autoexpand){var _e=ne,ue=se;ne=f.constrain(ne,0,z.width-O._width),se=f.constrain(se,0,z.height-O._effHeight),ne!==_e&&f.log("Constrain legend.x to make legend fit inside graph"),se!==ue&&f.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(ae,ne,se)}if(q.on(".drag",null),ae.on("wheel",null),ee||O._height<=O._maxHeight||R._context.staticPlot){var ge=O._effHeight;ee&&(ge=O._height),K.attr({width:O._width-ie,height:ge-ie,x:ie/2,y:ie/2}),i.setTranslate(J,0,0),fe.select("rect").attr({width:O._width-2*ie,height:ge-2*ie,x:ie,y:ie}),i.setClipUrl(J,H,R),i.setRect(q,0,0,0,0),delete O._scrollY}else{var xe=Math.max(s.scrollBarMinHeight,O._effHeight*O._effHeight/O._height),ye=O._effHeight-xe-2*s.scrollBarMargin,be=O._height-O._effHeight,Se=ye/be,Re=Math.min(O._scrollY||0,be);K.attr({width:O._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-ie,x:ie/2,y:ie/2}),fe.select("rect").attr({width:O._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-2*ie,x:ie,y:ie+Re}),i.setClipUrl(J,H,R),Ge(Re,xe,Se),ae.on("wheel",function(){Re=f.constrain(O._scrollY+x.event.deltaY/ye*be,0,be),Ge(Re,xe,Se),Re!==0&&Re!==be&&x.event.preventDefault()});var Ve,Ae,Ce,Ze=function(Ct,Kt,Ot){var St=(Ot-Kt)/Se+Ct;return f.constrain(St,0,be)},Ye=function(Ct,Kt,Ot){var St=(Kt-Ot)/Se+Ct;return f.constrain(St,0,be)},ze=x.behavior.drag().on("dragstart",function(){var Ct=x.event.sourceEvent;Ct.type==="touchstart"?Ve=Ct.changedTouches[0].clientY:Ve=Ct.clientY,Ce=Re}).on("drag",function(){var Ct=x.event.sourceEvent;Ct.buttons===2||Ct.ctrlKey||(Ct.type==="touchmove"?Ae=Ct.changedTouches[0].clientY:Ae=Ct.clientY,Re=Ze(Ce,Ve,Ae),Ge(Re,xe,Se))});q.call(ze);var Ie=x.behavior.drag().on("dragstart",function(){var Ct=x.event.sourceEvent;Ct.type==="touchstart"&&(Ve=Ct.changedTouches[0].clientY,Ce=Re)}).on("drag",function(){var Ct=x.event.sourceEvent;Ct.type==="touchmove"&&(Ae=Ct.changedTouches[0].clientY,Re=Ye(Ce,Ve,Ae),Ge(Re,xe,Se))});J.call(Ie)}function Ge(Ct,Kt,Ot){O._scrollY=R._fullLayout.legend._scrollY=Ct,i.setTranslate(J,0,-Ct),i.setRect(q,O._width,s.scrollBarMargin+Ct*Ot,s.scrollBarWidth,Kt),fe.select("rect").attr("y",ie+Ct)}if(R._context.edits.legendPosition){var dt,Rt,Qt,Bt;ae.classed("cursor-move",!0),a.init({element:ae.node(),gd:R,prepFn:function(){var Ct=i.getTranslate(ae);Qt=Ct.x,Bt=Ct.y},moveFn:function(Ct,Kt){var Ot=Qt+Ct,St=Bt+Kt;i.setTranslate(ae,Ot,St),dt=a.align(Ot,0,Q.l,Q.l+Q.w,O.xanchor),Rt=a.align(St,0,Q.t+Q.h,Q.t,O.yanchor)},doneFn:function(){dt!==void 0&&Rt!==void 0&&T.call("_guiRelayout",R,{"legend.x":dt,"legend.y":Rt})},clickFn:function(Ct,Kt){var Ot=Y.selectAll("g.traces").filter(function(){var St=this.getBoundingClientRect();return Kt.clientX>=St.left&&Kt.clientX<=St.right&&Kt.clientY>=St.top&&Kt.clientY<=St.bottom});Ot.size()>0&&_(R,ae,Ot,Ct,Kt)}})}}],R)}}function A(R,O,z){var H=R[0],Y=H.width,ee=O.entrywidthmode,j=H.trace.legendwidth||O.entrywidth;return ee==="fraction"?O._maxWidth*j:z+(j||Y)}function _(R,O,z,H,Y){var ee=z.data()[0][0].trace,j={event:Y,node:z.node(),curveNumber:ee.index,expandedIndex:ee._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};ee._group&&(j.group=ee._group),T.traceIs(ee,"pie-like")&&(j.label=z.datum()[0].label);var X=e.triggerHandler(R,"plotly_legendclick",j);if(X!==!1){if(H===1)O._clickTimeout=setTimeout(function(){!R._fullLayout||v(z,R,H)},R._context.doubleClickDelay);else if(H===2){O._clickTimeout&&clearTimeout(O._clickTimeout),R._legendMouseDownTime=0;var ae=e.triggerHandler(R,"plotly_legenddoubleclick",j);ae!==!1&&v(z,R,H)}}}function p(R,O,z){var H=R.data()[0][0],Y=H.trace,ee=T.traceIs(Y,"pie-like"),j=!z._inHover&&O._context.edits.legendText&&!ee,X=z._maxNameLength,ae,fe;H.groupTitle?(ae=H.groupTitle.text,fe=H.groupTitle.font):(fe=z.font,z.entries?ae=H.text:(ae=ee?H.label:Y.name,Y._meta&&(ae=f.templateString(ae,Y._meta))));var K=f.ensureSingle(R,"text","legendtext");K.attr("text-anchor","start").call(i.font,fe).text(j?w(ae,X):ae);var J=z.itemwidth+s.itemGap*2;r.positionText(K,J,0),j?K.call(r.makeEditable,{gd:O,text:ae}).call(L,R,O,z).on("edit",function(U){this.text(w(U,X)).call(L,R,O,z);var V=H.trace._fullInput||{},q={};if(T.hasTransform(V,"groupby")){var re=T.getTransformIndices(V,"groupby"),Z=re[re.length-1],Q=f.keyedContainer(V,"transforms["+Z+"].styles","target","value.name");Q.set(H.trace._group,U),q=Q.constructUpdate()}else q.name=U;return T.call("_guiRestyle",O,q,Y.index)}):L(K,R,O,z)}function w(R,O){var z=Math.max(4,O);if(R&&R.trim().length>=z/2)return R;R=R||"";for(var H=z-R.length;H>0;H--)R+=" ";return R}function h(R,O){var z=O._context.doubleClickDelay,H,Y=1,ee=f.ensureSingle(R,"rect","legendtoggle",function(j){O._context.staticPlot||j.style("cursor","pointer").attr("pointer-events","all"),j.call(n.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(ee.on("mousedown",function(){H=new Date().getTime(),H-O._legendMouseDownTime<z?Y+=1:(Y=1,O._legendMouseDownTime=H)}),ee.on("mouseup",function(){if(!(O._dragged||O._editing)){var j=O._fullLayout.legend;new Date().getTime()-O._legendMouseDownTime>z&&(Y=Math.max(Y-1,1)),_(O,j,R,Y,x.event)}}))}function L(R,O,z,H,Y){H._inHover&&R.attr("data-notex",!0),r.convertToTspans(R,z,function(){E(O,z,H,Y)})}function E(R,O,z,H){var Y=R.data()[0][0];if(!z._inHover&&Y&&!Y.trace.showlegend){R.remove();return}var ee=R.select("g[class*=math-group]"),j=ee.node();z||(z=O._fullLayout.legend);var X=z.borderwidth,ae;H===y?ae=z.title.font:Y.groupTitle?ae=Y.groupTitle.font:ae=z.font;var fe=ae.size*b,K,J;if(j){var U=i.bBox(j);K=U.height,J=U.width,H===y?i.setTranslate(ee,X,X+K*.75):i.setTranslate(ee,0,K*.25)}else{var V=R.select(H===y?".legendtitletext":".legendtext"),q=r.lineCount(V),re=V.node();if(K=fe*q,J=re?i.bBox(re).width:0,H===y)z.title.side==="left"&&(J+=s.itemGap*2),r.positionText(V,X+s.titlePad,X+fe);else{var Z=s.itemGap*2+z.itemwidth;Y.groupTitle&&(Z=s.itemGap,J-=z.itemwidth),r.positionText(V,Z,-fe*((q-1)/2-.3))}}H===y?(z._titleWidth=J,z._titleHeight=K):(Y.lineHeight=fe,Y.height=Math.max(K,16)+3,Y.width=J)}function S(R){var O=0,z=0,H=R.title.side;return H&&(H.indexOf("left")!==-1&&(O=R._titleWidth),H.indexOf("top")!==-1&&(z=R._titleHeight)),[O,z]}function P(R,O,z,H){var Y=R._fullLayout;H||(H=Y.legend);var ee=Y._size,j=l.isVertical(H),X=l.isGrouped(H),ae=H.entrywidthmode==="fraction",fe=H.borderwidth,K=2*fe,J=s.itemGap,U=H.itemwidth+J*2,V=2*(fe+J),q=D(H),re=H.y<0||H.y===0&&q==="top",Z=H.y>1||H.y===1&&q==="bottom",Q=H.tracegroupgap,ie={};H._maxHeight=Math.max(re||Z?Y.height/2:ee.h,30);var oe=0;H._width=0,H._height=0;var ne=S(H);if(j)z.each(function(Qt){var Bt=Qt[0].height;i.setTranslate(this,fe+ne[0],fe+ne[1]+H._height+Bt/2+J),H._height+=Bt,H._width=Math.max(H._width,Qt[0].width)}),oe=U+H._width,H._width+=J+U+K,H._height+=V,X&&(O.each(function(Qt,Bt){i.setTranslate(this,0,Bt*H.tracegroupgap)}),H._height+=(H._lgroupsLength-1)*H.tracegroupgap);else{var se=I(H),_e=H.x<0||H.x===0&&se==="right",ue=H.x>1||H.x===1&&se==="left",ge=Z||re,xe=Y.width/2;H._maxWidth=Math.max(_e?ge&&se==="left"?ee.l+ee.w:xe:ue?ge&&se==="right"?ee.r+ee.w:xe:ee.w,2*U);var ye=0,be=0;z.each(function(Qt){var Bt=A(Qt,H,U);ye=Math.max(ye,Bt),be+=Bt}),oe=null;var Se=0;if(X){var Re=0,Ve=0,Ae=0;O.each(function(){var Qt=0,Bt=0;x.select(this).selectAll("g.traces").each(function(Kt){var Ot=A(Kt,H,U),St=Kt[0].height;i.setTranslate(this,ne[0],ne[1]+fe+J+St/2+Bt),Bt+=St,Qt=Math.max(Qt,Ot),ie[Kt[0].trace.legendgroup]=Qt});var Ct=Qt+J;Ve>0&&Ct+fe+Ve>H._maxWidth?(Se=Math.max(Se,Ve),Ve=0,Ae+=Re+Q,Re=Bt):Re=Math.max(Re,Bt),i.setTranslate(this,Ve,Ae),Ve+=Ct}),H._width=Math.max(Se,Ve)+fe,H._height=Ae+Re+V}else{var Ce=z.size(),Ze=be+K+(Ce-1)*J<H._maxWidth,Ye=0,ze=0,Ie=0,Ge=0;z.each(function(Qt){var Bt=Qt[0].height,Ct=A(Qt,H,U),Kt=Ze?Ct:ye;ae||(Kt+=J),Kt+fe+ze-J>=H._maxWidth&&(Se=Math.max(Se,Ge),ze=0,Ie+=Ye,H._height+=Ye,Ye=0),i.setTranslate(this,ne[0]+fe+ze,ne[1]+fe+Ie+Bt/2+J),Ge=ze+Ct+J,ze+=Kt,Ye=Math.max(Ye,Bt)}),Ze?(H._width=ze+K,H._height=Ye+V):(H._width=Math.max(Se,Ge)+K,H._height+=Ye+V)}}H._width=Math.ceil(Math.max(H._width+ne[0],H._titleWidth+2*(fe+s.titlePad))),H._height=Math.ceil(Math.max(H._height+ne[1],H._titleHeight+2*(fe+s.itemGap))),H._effHeight=Math.min(H._height,H._maxHeight);var dt=R._context.edits,Rt=dt.legendText||dt.legendPosition;z.each(function(Qt){var Bt=x.select(this).select(".legendtoggle"),Ct=Qt[0].height,Kt=Qt[0].trace.legendgroup,Ot=A(Qt,H,U);X&&Kt!==""&&(Ot=ie[Kt]);var St=Rt?U:oe||Ot;!j&&!ae&&(St+=J/2),i.setRect(Bt,0,-Ct/2,St,Ct)})}function F(R){var O=R._fullLayout,z=O.legend,H=I(z),Y=D(z);return M.autoMargin(R,"legend",{x:z.x,y:z.y,l:z._width*g[H],r:z._width*d[H],b:z._effHeight*d[Y],t:z._effHeight*g[Y]})}function I(R){return f.isRightAnchor(R)?"right":f.isCenterAnchor(R)?"center":"left"}function D(R){return f.isBottomAnchor(R)?"bottom":f.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(t,B,G){var x=t("../../registry"),f=t("./helpers");B.exports=function(T,e){var a=e._inHover,i=f.isGrouped(e),n=f.isReversed(e),r={},v=[],s=!1,o={},b=0,g=0,d,c;function m(O,z){if(O===""||!f.isGrouped(e)){var H="~~i"+b;v.push(H),r[H]=[z],b++}else v.indexOf(O)===-1?(v.push(O),s=!0,r[O]=[z]):r[O].push(z)}for(d=0;d<T.length;d++){var l=T[d],y=l[0],u=y.trace,A=u.legendgroup;if(!(!a&&(!u.visible||!u.showlegend)))if(x.traceIs(u,"pie-like"))for(o[A]||(o[A]={}),c=0;c<l.length;c++){var _=l[c].label;o[A][_]||(m(A,{label:_,color:l[c].color,i:l[c].i,trace:u,pts:l[c].pts}),o[A][_]=!0,g=Math.max(g,(_||"").length))}else m(A,y),g=Math.max(g,(u.name||"").length)}if(!v.length)return[];var p=!s||!i,w=[];for(d=0;d<v.length;d++){var h=r[v[d]];p?w.push(h[0]):w.push(h)}for(p&&(w=[w]),d=0;d<w.length;d++){var L=1/0;for(c=0;c<w[d].length;c++){var E=w[d][c].trace.legendrank;L>E&&(L=E)}w[d][0]._groupMinRank=L,w[d][0]._preGroupSort=d}var S=function(O,z){return O[0]._groupMinRank-z[0]._groupMinRank||O[0]._preGroupSort-z[0]._preGroupSort},P=function(O,z){return O.trace.legendrank-z.trace.legendrank||O._preSort-z._preSort};for(w.forEach(function(O,z){O[0]._preGroupSort=z}),w.sort(S),d=0;d<w.length;d++){w[d].forEach(function(O,z){O._preSort=z}),w[d].sort(P);var F=w[d][0].trace,I=null;for(c=0;c<w[d].length;c++){var D=w[d][c].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(n&&w[d].reverse(),I){var R=!1;for(c=0;c<w[d].length;c++)if(x.traceIs(w[d][c].trace,"pie-like")){R=!0;break}w[d].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:e.groupclick==="toggleitem"?!0:F.visible}})}for(c=0;c<w[d].length;c++)w[d][c]=[w[d][c]]}return e._lgroupsLength=w.length,e._maxNameLength=g,w}},{"../../registry":647,"./helpers":423}],422:[function(t,B,G){var x=t("../../lib"),f=t("../../registry"),M=!0;B.exports=function(e,a,i){var n=a._fullLayout;if(a._dragged||a._editing)return;var r=n.legend.itemclick,v=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&r==="toggle"&&v==="toggleothers"&&M&&a.data&&a._context.showTips&&x.notifier(x._(a,"Double-click on legend to isolate one trace"),"long"),M=!1;var o;if(i===1?o=r:i===2&&(o=v),!o)return;var b=s==="togglegroup",g=n.hiddenlabels?n.hiddenlabels.slice():[],d=e.data()[0][0];if(d.groupTitle&&d.noClick)return;var c=a._fullData,m=d.trace,l=m.legendgroup,y,u,A,_,p,w,h={},L=[],E=[],S=[];function P(J,U,V){var q=L.indexOf(J),re=h[U];return re||(re=h[U]=[]),L.indexOf(J)===-1&&(L.push(J),q=L.length-1),re[q]=V,q}function F(J,U){if(!(d.groupTitle&&!b)){var V=J._fullInput;if(f.hasTransform(V,"groupby")){var q=E[V.index];if(!q){var re=f.getTransformIndices(V,"groupby"),Z=re[re.length-1];q=x.keyedContainer(V,"transforms["+Z+"].styles","target","value.visible"),E[V.index]=q}var Q=q.get(J._group);Q===void 0&&(Q=!0),Q!==!1&&q.set(J._group,U),S[V.index]=P(V.index,"visible",V.visible!==!1)}else{var ie=V.visible===!1?!1:U;P(V.index,"visible",ie)}}}if(f.traceIs(m,"pie-like")){var I=d.label,D=g.indexOf(I);o==="toggle"?D===-1?g.push(I):g.splice(D,1):o==="toggleothers"&&(g=[],a.calcdata[0].forEach(function(J){I!==J.label&&g.push(J.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===g.length&&D===-1&&(g=[])),f.call("_guiRelayout",a,"hiddenlabels",g)}else{var R=l&&l.length,O=[],z;if(R)for(y=0;y<c.length;y++)z=c[y],!!z.visible&&z.legendgroup===l&&O.push(y);if(o==="toggle"){var H;switch(m.visible){case!0:H="legendonly";break;case!1:H=!1;break;case"legendonly":H=!0;break}if(R)if(b)for(y=0;y<c.length;y++)c[y].visible!==!1&&c[y].legendgroup===l&&F(c[y],H);else F(m,H);else F(m,H)}else if(o==="toggleothers"){var Y,ee,j,X,ae=!0;for(y=0;y<c.length;y++)if(Y=c[y]===m,j=c[y].showlegend!==!0,!(Y||j)&&(ee=R&&c[y].legendgroup===l,!ee&&c[y].visible===!0&&!f.traceIs(c[y],"notLegendIsolatable"))){ae=!1;break}for(y=0;y<c.length;y++)if(c[y].visible!==!1&&!f.traceIs(c[y],"notLegendIsolatable"))switch(m.visible){case"legendonly":F(c[y],!0);break;case!0:X=ae?!0:"legendonly",Y=c[y]===m,j=c[y].showlegend!==!0&&!c[y].legendgroup,ee=Y||R&&c[y].legendgroup===l,F(c[y],ee||j?!0:X);break}}for(y=0;y<E.length;y++)if(A=E[y],!!A){var fe=A.constructUpdate(),K=Object.keys(fe);for(u=0;u<K.length;u++)_=K[u],w=h[_]=h[_]||[],w[S[y]]=fe[_]}for(p=Object.keys(h),y=0;y<p.length;y++)for(_=p[y],u=0;u<L.length;u++)h[_].hasOwnProperty(u)||(h[_][u]=void 0);f.call("_guiRestyle",a,h,L)}}},{"../../lib":515,"../../registry":647}],423:[function(t,B,G){G.isGrouped=function(f){return(f.traceorder||"").indexOf("grouped")!==-1},G.isVertical=function(f){return f.orientation!=="h"},G.isReversed=function(f){return(f.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(t,B,G){B.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../lib"),T=M.strTranslate,e=t("../drawing"),a=t("../color"),i=t("../colorscale/helpers").extractOpts,n=t("../../traces/scatter/subtypes"),r=t("../../traces/pie/style_one"),v=t("../../traces/pie/helpers").castOption,s=t("./constants"),o=12,b=5,g=2,d=10,c=5;B.exports=function(A,_,p){var w=_._fullLayout;p||(p=w.legend);var h=p.itemsizing==="constant",L=p.itemwidth,E=(L+s.itemGap*2)/2,S=T(E,0),P=function(K,J,U,V){var q;if(K+1)q=K;else if(J&&J.width>0)q=J.width;else return 0;return h?V:Math.min(q,U)};A.each(function(K){var J=x.select(this),U=M.ensureSingle(J,"g","layers");U.style("opacity",K[0].trace.opacity);var V=p.valign,q=K[0].lineHeight,re=K[0].height;if(V==="middle"||!q||!re)U.attr("transform",null);else{var Z={top:1,bottom:-1}[V],Q=Z*(.5*(q-re+3));U.attr("transform",T(0,Q))}var ie=U.selectAll("g.legendfill").data([K]);ie.enter().append("g").classed("legendfill",!0);var oe=U.selectAll("g.legendlines").data([K]);oe.enter().append("g").classed("legendlines",!0);var ne=U.selectAll("g.legendsymbols").data([K]);ne.enter().append("g").classed("legendsymbols",!0),ne.selectAll("g.legendpoints").data([K]).enter().append("g").classed("legendpoints",!0)}).each(fe).each(D).each(O).each(R).each(H).each(X).each(j).each(F).each(I).each(Y).each(ee);function F(K){var J=l(K),U=J.showFill,V=J.showLine,q=J.showGradientLine,re=J.showGradientFill,Z=J.anyFill,Q=J.anyLine,ie=K[0],oe=ie.trace,ne,se,_e=i(oe),ue=_e.colorscale,ge=_e.reversescale,xe=function(Ce){if(Ce.size())if(U)e.fillGroupStyle(Ce,_);else{var Ze="legendfill-"+oe.uid;e.gradient(Ce,_,Ze,m(ge),ue,"fill")}},ye=function(Ce){if(Ce.size()){var Ze="legendline-"+oe.uid;e.lineGroupStyle(Ce),e.gradient(Ce,_,Ze,m(ge),ue,"stroke")}},be=n.hasMarkers(oe)||!Z?"M5,0":Q?"M5,-2":"M5,-3",Se=x.select(this),Re=Se.select(".legendfill").selectAll("path").data(U||re?[K]:[]);if(Re.enter().append("path").classed("js-fill",!0),Re.exit().remove(),Re.attr("d",be+"h"+L+"v6h-"+L+"z").call(xe),V||q){var Ve=P(void 0,oe.line,d,b);se=M.minExtend(oe,{line:{width:Ve}}),ne=[M.minExtend(ie,{trace:se})]}var Ae=Se.select(".legendlines").selectAll("path").data(V||q?[ne]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",be+(q?"l"+L+",0.0001":"h"+L)).call(V?e.lineGroupStyle:ye)}function I(K){var J=l(K),U=J.anyFill,V=J.anyLine,q=J.showLine,re=J.showMarker,Z=K[0],Q=Z.trace,ie=!re&&!V&&!U&&n.hasText(Q),oe,ne;function se(Re,Ve,Ae,Ce){var Ze=M.nestedProperty(Q,Re).get(),Ye=M.isArrayOrTypedArray(Ze)&&Ve?Ve(Ze):Ze;if(h&&Ye&&Ce!==void 0&&(Ye=Ce),Ae){if(Ye<Ae[0])return Ae[0];if(Ye>Ae[1])return Ae[1]}return Ye}function _e(Re){return Z._distinct&&Z.index&&Re[Z.index]?Re[Z.index]:Re[0]}if(re||ie||q){var ue={},ge={};if(re){ue.mc=se("marker.color",_e),ue.mx=se("marker.symbol",_e),ue.mo=se("marker.opacity",M.mean,[.2,1]),ue.mlc=se("marker.line.color",_e),ue.mlw=se("marker.line.width",M.mean,[0,5],g),ge.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=se("marker.size",M.mean,[2,16],o);ue.ms=xe,ge.marker.size=xe}q&&(ge.line={width:se("line.width",_e,[0,10],b)}),ie&&(ue.tx="Aa",ue.tp=se("textposition",_e),ue.ts=10,ue.tc=se("textfont.color",_e),ue.tf=se("textfont.family",_e)),oe=[M.minExtend(Z,ue)],ne=M.minExtend(Q,ge),ne.selectedpoints=null,ne.texttemplate=null}var ye=x.select(this).select("g.legendpoints"),be=ye.selectAll("path.scatterpts").data(re?oe:[]);be.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",S),be.exit().remove(),be.call(e.pointStyle,ne,_),re&&(oe[0].mrc=3);var Se=ye.selectAll("g.pointtext").data(ie?oe:[]);Se.enter().append("g").classed("pointtext",!0).append("text").attr("transform",S),Se.exit().remove(),Se.selectAll("text").call(e.textPointStyle,ne,_)}function D(K){var J=K[0].trace,U=J.type==="waterfall";if(K[0]._distinct&&U){var V=K[0].trace[K[0].dir].marker;return K[0].mc=V.color,K[0].mlw=V.line.width,K[0].mlc=V.line.color,z(K,this,"waterfall")}var q=[];J.visible&&U&&(q=K[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var re=x.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);re.enter().append("path").classed("legendwaterfall",!0).attr("transform",S).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(Z){var Q=x.select(this),ie=J[Z[0]].marker,oe=P(void 0,ie.line,c,g);Q.attr("d",Z[1]).style("stroke-width",oe+"px").call(a.fill,ie.color),oe&&Q.call(a.stroke,ie.line.color)})}function R(K){z(K,this)}function O(K){z(K,this,"funnel")}function z(K,J,U){var V=K[0].trace,q=V.marker||{},re=q.line||{},Z=U?V.visible&&V.type===U:f.traceIs(V,"bar"),Q=x.select(J).select("g.legendpoints").selectAll("path.legend"+U).data(Z?[K]:[]);Q.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),Q.exit().remove(),Q.each(function(ie){var oe=x.select(this),ne=ie[0],se=P(ne.mlw,q.line,c,g);oe.style("stroke-width",se+"px");var _e=ne.mcc;if(!p._inHover&&"mc"in ne){var ue=i(q),ge=ue.mid;ge===void 0&&(ge=(ue.max+ue.min)/2),_e=e.tryColorscale(q,"")(ge)}var xe=_e||ne.mc||q.color,ye=q.pattern,be=ye&&e.getPatternAttr(ye.shape,0,"");if(be){var Se=e.getPatternAttr(ye.bgcolor,0,null),Re=e.getPatternAttr(ye.fgcolor,0,null),Ve=ye.fgopacity,Ae=y(ye.size,8,10),Ce=y(ye.solidity,.5,1),Ze="legend-"+V.uid;oe.call(e.pattern,"legend",_,Ze,be,Ae,Ce,_e,ye.fillmode,Se,Re,Ve)}else oe.call(a.fill,xe);se&&a.stroke(oe,ne.mlc||re.color)})}function H(K){var J=K[0].trace,U=x.select(this).select("g.legendpoints").selectAll("path.legendbox").data(J.visible&&f.traceIs(J,"box-violin")?[K]:[]);U.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),U.exit().remove(),U.each(function(){var V=x.select(this);if((J.boxpoints==="all"||J.points==="all")&&a.opacity(J.fillcolor)===0&&a.opacity((J.line||{}).color)===0){var q=M.minExtend(J,{marker:{size:h?o:M.constrain(J.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});U.call(e.pointStyle,q,_)}else{var re=P(void 0,J.line,c,g);V.style("stroke-width",re+"px").call(a.fill,J.fillcolor),re&&a.stroke(V,J.line.color)}})}function Y(K){var J=K[0].trace,U=x.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(J.visible&&J.type==="candlestick"?[K,K]:[]);U.enter().append("path").classed("legendcandle",!0).attr("d",function(V,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",S).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(V,q){var re=x.select(this),Z=J[q?"increasing":"decreasing"],Q=P(void 0,Z.line,c,g);re.style("stroke-width",Q+"px").call(a.fill,Z.fillcolor),Q&&a.stroke(re,Z.line.color)})}function ee(K){var J=K[0].trace,U=x.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(J.visible&&J.type==="ohlc"?[K,K]:[]);U.enter().append("path").classed("legendohlc",!0).attr("d",function(V,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",S).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(V,q){var re=x.select(this),Z=J[q?"increasing":"decreasing"],Q=P(void 0,Z.line,c,g);re.style("fill","none").call(e.dashLine,Z.line.dash,Q),Q&&a.stroke(re,Z.line.color)})}function j(K){ae(K,this,"pie")}function X(K){ae(K,this,"funnelarea")}function ae(K,J,U){var V=K[0],q=V.trace,re=U?q.visible&&q.type===U:f.traceIs(q,U),Z=x.select(J).select("g.legendpoints").selectAll("path.legend"+U).data(re?[K]:[]);if(Z.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),Z.exit().remove(),Z.size()){var Q=(q.marker||{}).line,ie=P(v(Q.width,V.pts),Q,c,g),oe=M.minExtend(q,{marker:{line:{width:ie}}});oe.marker.line.color=Q.color;var ne=M.minExtend(V,{trace:oe});r(Z,ne,oe)}}function fe(K){var J=K[0].trace,U,V=[];if(J.visible)switch(J.type){case"histogram2d":case"heatmap":V=[["M-15,-2V4H15V-2Z"]],U=!0;break;case"choropleth":case"choroplethmapbox":V=[["M-6,-6V6H6V-6Z"]],U=!0;break;case"densitymapbox":V=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],U="radial";break;case"cone":V=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],U=!1;break;case"streamtube":V=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],U=!1;break;case"surface":V=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],U=!0;break;case"mesh3d":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!1;break;case"volume":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!0;break;case"isosurface":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],U=!1;break}var q=x.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(V);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",S).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(re,Z){var Q=x.select(this),ie=i(J),oe=ie.colorscale,ne=ie.reversescale,se=function(xe){if(xe.size()){var ye="legendfill-"+J.uid;e.gradient(xe,_,ye,m(ne,U==="radial"),oe,"fill")}},_e;if(oe){if(!U){var ge=oe.length;_e=Z===0?oe[ne?ge-1:0][1]:Z===1?oe[ne?0:ge-1][1]:oe[Math.floor((ge-1)/2)][1]}}else{var ue=J.vertexcolor||J.facecolor||J.color;_e=M.isArrayOrTypedArray(ue)?ue[Z]||ue[0]:ue}Q.attr("d",re[0]),_e?Q.call(a.fill,_e):Q.call(se)})}};function m(u,A){var _=A?"radial":"horizontal";return _+(u?"":"reversed")}function l(u){var A=u[0].trace,_=A.contours,p=n.hasLines(A),w=n.hasMarkers(A),h=A.visible&&A.fill&&A.fill!=="none",L=!1,E=!1;if(_){var S=_.coloring;S==="lines"?L=!0:p=S==="none"||S==="heatmap"||_.showlines,_.type==="constraint"?h=_._operation!=="=":(S==="fill"||S==="heatmap")&&(E=!0)}return{showMarker:w,showLine:p,showFill:h,showGradientLine:L,showGradientFill:E,anyLine:p||L,anyFill:h||E}}function y(u,A,_){return u&&M.isArrayOrTypedArray(u)?A:u>_?_:u}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(t,B,G){t("./constants"),B.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(t,B,G){var x=t("../../registry"),f=t("../../plots/plots"),M=t("../../plots/cartesian/axis_ids"),T=t("../../fonts/ploticon"),e=t("../shapes/draw").eraseActiveShape,a=t("../../lib"),i=a._,n=B.exports={};n.toImage={name:"toImage",title:function(u){var A=u._context.toImageButtonOptions||{},_=A.format||"png";return _==="png"?i(u,"Download plot as a png"):i(u,"Download plot")},icon:T.camera,click:function(u){var A=u._context.toImageButtonOptions,_={format:A.format||"png"};a.notifier(i(u,"Taking snapshot - this may take a few seconds"),"long"),_.format!=="svg"&&a.isIE()&&(a.notifier(i(u,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(p){p in A&&(_[p]=A[p])}),x.call("downloadImage",u,_).then(function(p){a.notifier(i(u,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){a.notifier(i(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(u){return i(u,"Edit in Chart Studio")},icon:T.disk,click:function(u){f.sendDataToCloud(u)}},n.editInChartStudio={name:"editInChartStudio",title:function(u){return i(u,"Edit in Chart Studio")},icon:T.pencil,click:function(u){f.sendDataToCloud(u)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:r},n.pan2d={name:"pan2d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:r},n.select2d={name:"select2d",_cat:"select",title:function(u){return i(u,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:r},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return i(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:r},n.drawclosedpath={name:"drawclosedpath",title:function(u){return i(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:r},n.drawopenpath={name:"drawopenpath",title:function(u){return i(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:r},n.drawline={name:"drawline",title:function(u){return i(u,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:r},n.drawrect={name:"drawrect",title:function(u){return i(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:r},n.drawcircle={name:"drawcircle",title:function(u){return i(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:r},n.eraseshape={name:"eraseshape",title:function(u){return i(u,"Erase active shape")},icon:T.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:r},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:r},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return i(u,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:r},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return i(u,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:r},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return i(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:r},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return i(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:r};function r(u,A){var _=A.currentTarget,p=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,h=u._fullLayout,L={},E=M.list(u,null,!0),S=h._cartesianSpikesEnabled,P,F;if(p==="zoom"){var I=w==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,O;for(F=0;F<E.length;F++)if(P=E[F],!P.fixedrange)if(O=P._name,w==="auto")L[O+".autorange"]=!0;else if(w==="reset"){if(P._rangeInitial===void 0)L[O+".autorange"]=!0;else{var z=P._rangeInitial.slice();L[O+".range[0]"]=z[0],L[O+".range[1]"]=z[1]}P._showSpikeInitial!==void 0&&(L[O+".showspikes"]=P._showSpikeInitial,S==="on"&&!P._showSpikeInitial&&(S="off"))}else{var H=[P.r2l(P.range[0]),P.r2l(P.range[1])],Y=[D*H[0]+R*H[1],D*H[1]+R*H[0]];L[O+".range[0]"]=P.l2r(Y[0]),L[O+".range[1]"]=P.l2r(Y[1])}}else p==="hovermode"&&(w==="x"||w==="y")&&(w=h._isHoriz?"y":"x",_.setAttribute("data-val",w)),L[p]=w;h._cartesianSpikesEnabled=S,x.call("_guiRelayout",u,L)}n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:v},n.pan3d={name:"pan3d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:v},n.orbitRotation={name:"orbitRotation",title:function(u){return i(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:v},n.tableRotation={name:"tableRotation",title:function(u){return i(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:v};function v(u,A){for(var _=A.currentTarget,p=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,h=u._fullLayout._subplots.gl3d||[],L={},E=p.split("."),S=0;S<h.length;S++)L[h[S]+"."+E[1]]=w;var P=w==="pan"?w:"zoom";L.dragmode=P,x.call("_guiRelayout",u,L)}n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return i(u,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:s},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return i(u,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:s};function s(u,A){for(var _=A.currentTarget,p=_.getAttribute("data-attr"),w=p==="resetLastSave",h=p==="resetDefault",L=u._fullLayout,E=L._subplots.gl3d||[],S={},P=0;P<E.length;P++){var F=E[P],I=F+".camera",D=F+".aspectratio",R=F+".aspectmode",O=L[F]._scene,z;w?(S[I+".up"]=O.viewInitial.up,S[I+".eye"]=O.viewInitial.eye,S[I+".center"]=O.viewInitial.center,z=!0):h&&(S[I+".up"]=null,S[I+".eye"]=null,S[I+".center"]=null,z=!0),z&&(S[D+".x"]=O.viewInitial.aspectratio.x,S[D+".y"]=O.viewInitial.aspectratio.y,S[D+".z"]=O.viewInitial.aspectratio.z,S[R]=O.viewInitial.aspectmode)}x.call("_guiRelayout",u,S)}n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:b};function o(u,A){var _=A.currentTarget,p=_._previousVal,w=u._fullLayout,h=w._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],E={},S={};if(p)S=p,_._previousVal=null;else{for(var P=0;P<h.length;P++){var F=h[P],I=w[F],D=F+".hovermode";E[D]=I.hovermode,S[D]=!1;for(var R=0;R<3;R++){var O=L[R],z=F+"."+O+".showspikes";S[z]=!1,E[z]=I[O].showspikes}}_._previousVal=E}return S}function b(u,A){var _=o(u,A);x.call("_guiRelayout",u,_)}n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:g},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:g},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return i(u,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:g},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c};function g(u,A){for(var _=A.currentTarget,p=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,h=u._fullLayout,L=h._subplots.geo||[],E=0;E<L.length;E++){var S=L[E],P=h[S];if(p==="zoom"){var F=P.projection.scale,I=w==="in"?2*F:.5*F;x.call("_guiRelayout",u,S+".projection.scale",I)}}p==="reset"&&y(u,"geo")}n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:c};function d(u){var A=u._fullLayout;return A.hovermode?!1:A._has("cartesian")?A._isHoriz?"y":"x":"closest"}function c(u){var A=d(u);x.call("_guiRelayout",u,"hovermode",A)}n.resetViewSankey={name:"resetSankeyGroup",title:function(u){return i(u,"Reset view")},icon:T.home,click:function(u){for(var A={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<u._fullData.length;_++){var p=u._fullData[_]._viewInitial;A["node.groups"].push(p.node.groups.slice()),A["node.x"].push(p.node.x.slice()),A["node.y"].push(p.node.y.slice())}x.call("restyle",u,A)}},n.toggleHover={name:"toggleHover",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(u,A){var _=o(u,A);_.hovermode=d(u),x.call("_guiRelayout",u,_)}},n.resetViews={name:"resetViews",title:function(u){return i(u,"Reset views")},icon:T.home,click:function(u,A){var _=A.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),r(u,A),_.setAttribute("data-attr","resetLastSave"),s(u,A),y(u,"geo"),y(u,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(u){return i(u,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var A=u._fullLayout,_=A._cartesianSpikesEnabled;A._cartesianSpikesEnabled=_==="on"?"off":"on",x.call("_guiRelayout",u,m(u))}};function m(u){for(var A=u._fullLayout,_=A._cartesianSpikesEnabled==="on",p=M.list(u,null,!0),w={},h=0;h<p.length;h++){var L=p[h];w[L._name+".showspikes"]=_?!0:L._showSpikeInitial}return w}n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return i(u,"Reset view")},attr:"reset",icon:T.home,click:function(u){y(u,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(u,A){for(var _=A.currentTarget,p=_.getAttribute("data-val"),w=u._fullLayout,h=w._subplots.mapbox||[],L=1.05,E={},S=0;S<h.length;S++){var P=h[S],F=w[P].zoom,I=p==="in"?L*F:F/L;E[P+".zoom"]=I}x.call("_guiRelayout",u,E)}function y(u,A){for(var _=u._fullLayout,p=_._subplots[A]||[],w={},h=0;h<p.length;h++)for(var L=p[h],E=_[L]._subplot,S=E.viewInitial,P=Object.keys(S),F=0;F<P.length;F++){var I=P[F];w[L+"."+I]=S[I]}x.call("_guiRelayout",u,w)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(t,B,G){var x=t("./buttons"),f=Object.keys(x),M=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(M),e=[],a=function(i){if(T.indexOf(i._cat||i.name)===-1){var n=i.name,r=(i._cat||i.name).toLowerCase();e.indexOf(n)===-1&&e.push(n),e.indexOf(r)===-1&&e.push(r)}};f.forEach(function(i){a(x[i])}),e.sort(),B.exports={DRAW_MODES:M,backButtons:T,foreButtons:e}},{"./buttons":427}],429:[function(t,B,G){var x=t("../../lib"),f=t("../color"),M=t("../../plot_api/plot_template"),T=t("./attributes");B.exports=function(a,i){var n=a.modebar||{},r=M.newContainer(i,"modebar");function v(o,b){return x.coerce(n,r,T,o,b)}v("orientation"),v("bgcolor",f.addOpacity(i.paper_bgcolor,.5));var s=f.contrast(f.rgb(i.modebar.bgcolor));v("color",f.addOpacity(s,.3)),v("activecolor",f.addOpacity(s,.7)),v("uirevision",i.uirevision),v("add"),v("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(t,B,G){B.exports={moduleType:"component",name:"modebar",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),manage:t("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(t,B,G){var x=t("../../plots/cartesian/axis_ids"),f=t("../../traces/scatter/subtypes"),M=t("../../registry"),T=t("../fx/helpers").isUnifiedHover,e=t("./modebar"),a=t("./buttons"),i=t("./constants").DRAW_MODES,n=t("../../lib").extendDeep;B.exports=function(c){var m=c._fullLayout,l=c._context,y=m._modeBar;if(!l.displayModeBar&&!l.watermark){y&&(y.destroy(),delete m._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u=l.modeBarButtons,A;Array.isArray(u)&&u.length?A=g(u):!l.displayModeBar&&l.watermark?A=[]:A=r(c),y?y.update(c,A):m._modeBar=e(c,A)};function r(d){var c=d._fullLayout,m=d._fullData,l=d._context;function y(Z,Q){if(typeof Q=="string"){if(Q.toLowerCase()===Z.toLowerCase())return!0}else{var ie=Q.name,oe=Q._cat||Q.name;if(ie===Z||oe===Z.toLowerCase())return!0}return!1}var u=c.modebar.add;typeof u=="string"&&(u=[u]);var A=c.modebar.remove;typeof A=="string"&&(A=[A]);var _=l.modeBarButtonsToAdd.concat(u.filter(function(Z){for(var Q=0;Q<l.modeBarButtonsToRemove.length;Q++)if(y(Z,l.modeBarButtonsToRemove[Q]))return!1;return!0})),p=l.modeBarButtonsToRemove.concat(A.filter(function(Z){for(var Q=0;Q<l.modeBarButtonsToAdd.length;Q++)if(y(Z,l.modeBarButtonsToAdd[Q]))return!1;return!0})),w=c._has("cartesian"),h=c._has("gl3d"),L=c._has("geo"),E=c._has("pie"),S=c._has("funnelarea"),P=c._has("gl2d"),F=c._has("ternary"),I=c._has("mapbox"),D=c._has("polar"),R=c._has("smith"),O=c._has("sankey"),z=v(c),H=T(c.hovermode),Y=[];function ee(Z){if(!!Z.length){for(var Q=[],ie=0;ie<Z.length;ie++){for(var oe=Z[ie],ne=a[oe],se=ne.name.toLowerCase(),_e=(ne._cat||ne.name).toLowerCase(),ue=!1,ge=0;ge<p.length;ge++){var xe=p[ge].toLowerCase();if(xe===se||xe===_e){ue=!0;break}}ue||Q.push(a[oe])}Y.push(Q)}}var j=["toImage"];l.showEditInChartStudio?j.push("editInChartStudio"):l.showSendToCloud&&j.push("sendDataToCloud"),ee(j);var X=[],ae=[],fe=[],K=[];(w||P||E||S||F)+L+h+I+D+R>1?(ae=["toggleHover"],fe=["resetViews"]):L?(X=["zoomInGeo","zoomOutGeo"],ae=["hoverClosestGeo"],fe=["resetGeo"]):h?(ae=["hoverClosest3d"],fe=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(X=["zoomInMapbox","zoomOutMapbox"],ae=["toggleHover"],fe=["resetViewMapbox"]):P?ae=["hoverClosestGl2d"]:E?ae=["hoverClosestPie"]:O?(ae=["hoverClosestCartesian","hoverCompareCartesian"],fe=["resetViewSankey"]):ae=["toggleHover"],w&&(ae=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(o(m)||H)&&(ae=[]),(w||P)&&!z&&(X=["zoomIn2d","zoomOut2d","autoScale2d"],fe[0]!=="resetViews"&&(fe=["resetScale2d"])),h?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(w||P)&&!z||F?K=["zoom2d","pan2d"]:I||L?K=["pan2d"]:D&&(K=["zoom2d"]),s(m)&&K.push("select2d","lasso2d");var J=[],U=function(Z){J.indexOf(Z)===-1&&ae.indexOf(Z)!==-1&&J.push(Z)};if(Array.isArray(_)){for(var V=[],q=0;q<_.length;q++){var re=_[q];typeof re=="string"?(re=re.toLowerCase(),i.indexOf(re)!==-1?(c._has("mapbox")||c._has("cartesian"))&&K.push(re):re==="togglespikelines"?U("toggleSpikelines"):re==="togglehover"?U("toggleHover"):re==="hovercompare"?U("hoverCompareCartesian"):re==="hoverclosest"?(U("hoverClosestCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie")):re==="v1hovermode"&&(U("toggleHover"),U("hoverClosestCartesian"),U("hoverCompareCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie"))):V.push(re)}_=V}return ee(K),ee(X.concat(fe)),ee(J),b(Y,_)}function v(d){for(var c=x.list({_fullLayout:d},null,!0),m=0;m<c.length;m++)if(!c[m].fixedrange)return!1;return!0}function s(d){for(var c=!1,m=0;m<d.length&&!c;m++){var l=d[m];!l._module||!l._module.selectPoints||(M.traceIs(l,"scatter-like")?(f.hasMarkers(l)||f.hasText(l))&&(c=!0):M.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(c=!0):c=!0)}return c}function o(d){for(var c=0;c<d.length;c++)if(!M.traceIs(d[c],"noHover"))return!1;return!0}function b(d,c){if(c.length)if(Array.isArray(c[0]))for(var m=0;m<c.length;m++)d.push(c[m]);else d.push(c);return d}function g(d){for(var c=n([],d),m=0;m<c.length;m++)for(var l=c[m],y=0;y<l.length;y++){var u=l[y];if(typeof u=="string")if(a[u]!==void 0)c[m][y]=a[u];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return c}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../../lib"),T=t("../../fonts/ploticon"),e=t("../../version").version,a=new DOMParser;function i(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var n=i.prototype;n.update=function(s,o){this.graphInfo=s;var b=this.graphInfo._context,g=this.graphInfo._fullLayout,d="modebar-"+g._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar",b.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),g.modebar.orientation==="v"&&(this.element.className+=" vertical",o=o.reverse());var c=g.modebar,m=b.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";M.deleteRelatedStyleRule(d),M.addRelatedStyleRule(d,m+"#"+d+" .modebar-group","background-color: "+c.bgcolor),M.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+c.color),M.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+c.activecolor),M.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+c.activecolor);var l=!this.hasButtons(o),y=this.hasLogo!==b.displaylogo,u=this.locale!==b.locale;if(this.locale=b.locale,(l||y||u)&&(this.removeAllButtons(),this.updateButtons(o),b.watermark||b.displaylogo)){var A=this.getLogo();b.watermark&&(A.className=A.className+" watermark"),g.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(s){var o=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(b){var g=o.createGroup();b.forEach(function(d){var c=d.name;if(!c)throw new Error("must provide button 'name' in button config");if(o.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");o.buttonsNames.push(c);var m=o.createButton(d);o.buttonElements.push(m),g.appendChild(m)}),o.element.appendChild(g)})},n.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},n.createButton=function(s){var o=this,b=document.createElement("a");b.setAttribute("rel","tooltip"),b.className="modebar-btn";var g=s.title;g===void 0?g=s.name:typeof g=="function"&&(g=g(this.graphInfo)),(g||g===0)&&b.setAttribute("data-title",g),s.attr!==void 0&&b.setAttribute("data-attr",s.attr);var d=s.val;d!==void 0&&(typeof d=="function"&&(d=d(this.graphInfo)),b.setAttribute("data-val",d));var c=s.click;if(typeof c!="function")throw new Error("must provide button 'click' function in button config");b.addEventListener("click",function(l){s.click(o.graphInfo,l),o.updateActiveButton(l.currentTarget)}),b.setAttribute("data-toggle",s.toggle||!1),s.toggle&&x.select(b).classed("active",!0);var m=s.icon;return typeof m=="function"?b.appendChild(m()):b.appendChild(this.createIcon(m||T.question)),b.setAttribute("data-gravity",s.gravity||"n"),b},n.createIcon=function(s){var o=f(s.height)?Number(s.height):s.ascent-s.descent,b="http://www.w3.org/2000/svg",g;if(s.path){g=document.createElementNS(b,"svg"),g.setAttribute("viewBox",[0,0,s.width,o].join(" ")),g.setAttribute("class","icon");var d=document.createElementNS(b,"path");d.setAttribute("d",s.path),s.transform?d.setAttribute("transform",s.transform):s.ascent!==void 0&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),g.appendChild(d)}if(s.svg){var c=a.parseFromString(s.svg,"application/xml");g=c.childNodes[0]}return g.setAttribute("height","1em"),g.setAttribute("width","1em"),g},n.updateActiveButton=function(s){var o=this.graphInfo._fullLayout,b=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(g){var d=g.getAttribute("data-val")||!0,c=g.getAttribute("data-attr"),m=g.getAttribute("data-toggle")==="true",l=x.select(g);if(m)c===b&&l.classed("active",!l.classed("active"));else{var y=c===null?c:M.nestedProperty(o,c).get();l.classed("active",y===d)}})},n.hasButtons=function(s){var o=this.buttons;if(!o||s.length!==o.length)return!1;for(var b=0;b<s.length;++b){if(s[b].length!==o[b].length)return!1;for(var g=0;g<s[b].length;g++)if(s[b][g].name!==o[b][g].name)return!1}return!0};function r(s){return s+" (v"+e+")"}n.getLogo=function(){var s=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",r(M._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(T.newplotlylogo)),s.appendChild(o),s},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){M.removeElement(this.container.querySelector(".modebar")),M.deleteRelatedStyleRule(this._uid)};function v(s,o){var b=s._fullLayout,g=new i({graphInfo:s,container:b._modebardiv.node(),buttons:o});return b._privateplot&&x.select(g.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),g}B.exports=v},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("../color/attributes"),M=t("../../plot_api/plot_template").templatedArray,T=M("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});B.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:x({editType:"plot"}),bgcolor:{valType:"color",dflt:f.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(t,B,G){B.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(t,B,G){var x=t("../../lib"),f=t("../color"),M=t("../../plot_api/plot_template"),T=t("../../plots/array_container_defaults"),e=t("./attributes"),a=t("./constants");B.exports=function(v,s,o,b,g){var d=v.rangeselector||{},c=M.newContainer(s,"rangeselector");function m(_,p){return x.coerce(d,c,e,_,p)}var l=T(d,c,{name:"buttons",handleItemDefaults:i,calendar:g}),y=m("visible",l.length>0);if(y){var u=n(s,o,b);m("x",u[0]),m("y",u[1]),x.noneOrAll(v,s,["x","y"]),m("xanchor"),m("yanchor"),x.coerceFont(m,"font",o.font);var A=m("bgcolor");m("activecolor",f.contrast(A,a.lightAmount,a.darkAmount)),m("bordercolor"),m("borderwidth")}};function i(r,v,s,o){var b=o.calendar;function g(m,l){return x.coerce(r,v,e.buttons,m,l)}var d=g("visible");if(d){var c=g("step");c!=="all"&&(b&&b!=="gregorian"&&(c==="month"||c==="year")?v.stepmode="backward":g("stepmode"),g("count")),g("label")}}function n(r,v,s){for(var o=s.filter(function(c){return v[c].anchor===r._id}),b=0,g=0;g<o.length;g++){var d=v[o[g]].domain;d&&(b=Math.max(d[1],b))}return[r.domain[0],b+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../plots/plots"),T=t("../color"),e=t("../drawing"),a=t("../../lib"),i=a.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../plots/cartesian/axis_ids"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR,g=t("./constants"),d=t("./get_update_object");B.exports=function(h){var L=h._fullLayout,E=L._infolayer.selectAll(".rangeselector").data(c(h),m);E.enter().append("g").classed("rangeselector",!0),E.exit().remove(),E.style({cursor:"pointer","pointer-events":"all"}),E.each(function(S){var P=x.select(this),F=S,I=F.rangeselector,D=P.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var O=x.select(this),z=d(F,R);R._isActive=l(F,R,z),O.call(y,I,R),O.call(A,I,R,h),O.on("click",function(){h._dragged||f.call("_guiRelayout",h,z)}),O.on("mouseover",function(){R._isHovered=!0,O.call(y,I,R)}),O.on("mouseout",function(){R._isHovered=!1,O.call(y,I,R)})}),p(h,D,I,F._name,P)})};function c(w){for(var h=r.list(w,"x",!0),L=[],E=0;E<h.length;E++){var S=h[E];S.rangeselector&&S.rangeselector.visible&&L.push(S)}return L}function m(w){return w._id}function l(w,h,L){if(h.step==="all")return w.autorange===!0;var E=Object.keys(L);return w.range[0]===L[E[0]]&&w.range[1]===L[E[1]]}function y(w,h,L){var E=a.ensureSingle(w,"rect","selector-rect",function(S){S.attr("shape-rendering","crispEdges")});E.attr({rx:g.rx,ry:g.ry}),E.call(T.stroke,h.bordercolor).call(T.fill,u(h,L)).style("stroke-width",h.borderwidth+"px")}function u(w,h){return h._isActive||h._isHovered?w.activecolor:w.bgcolor}function A(w,h,L,E){function S(F){n.convertToTspans(F,E)}var P=a.ensureSingle(w,"text","selector-text",function(F){F.attr("text-anchor","middle")});P.call(e.font,h.font).text(_(L,E._fullLayout._meta)).call(S)}function _(w,h){return w.label?h?a.templateString(w.label,h):w.label:w.step==="all"?"all":w.count+w.step.charAt(0)}function p(w,h,L,E,S){var P=0,F=0,I=L.borderwidth;h.each(function(){var Y=x.select(this),ee=Y.select(".selector-text"),j=L.font.size*s,X=Math.max(j*n.lineCount(ee),16)+3;F=Math.max(F,X)}),h.each(function(){var Y=x.select(this),ee=Y.select(".selector-rect"),j=Y.select(".selector-text"),X=j.node()&&e.bBox(j.node()).width,ae=L.font.size*s,fe=n.lineCount(j),K=Math.max(X+10,g.minButtonWidth);Y.attr("transform",i(I+P,I)),ee.attr({x:0,y:0,width:K,height:F}),n.positionText(j,K/2,F/2-(fe-1)*ae/2+3),P+=K+5});var D=w._fullLayout._size,R=D.l+D.w*L.x,O=D.t+D.h*(1-L.y),z="left";a.isRightAnchor(L)&&(R-=P,z="right"),a.isCenterAnchor(L)&&(R-=P/2,z="center");var H="top";a.isBottomAnchor(L)&&(O-=F,H="bottom"),a.isMiddleAnchor(L)&&(O-=F/2,H="middle"),P=Math.ceil(P),F=Math.ceil(F),R=Math.round(R),O=Math.round(O),M.autoMargin(w,E+"-range-selector",{x:L.x,y:L.y,l:P*o[z],r:P*b[z],b:F*b[H],t:F*o[H]}),S.attr("transform",i(R,O))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(t,B,G){var x=t("d3-time"),f=t("../../lib").titleCase;B.exports=function(e,a){var i=e._name,n={};if(a.step==="all")n[i+".autorange"]=!0;else{var r=M(e,a);n[i+".range[0]"]=r[0],n[i+".range[1]"]=r[1]}return n};function M(T,e){var a=T.range,i=new Date(T.r2l(a[1])),n=e.step,r=x["utc"+f(n)],v=e.count,s;switch(e.stepmode){case"backward":s=T.l2r(+r.offset(i,-v));break;case"todate":var o=r.offset(i,-v);s=T.l2r(+r.ceil(o));break}var b=a[1];return[s,b]}},{"../../lib":515,"d3-time":122}],438:[function(t,B,G){B.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(t,B,G){var x=t("../color/attributes");B.exports={bgcolor:{valType:"color",dflt:x.background,editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(t,B,G){var x=t("../../plots/cartesian/axis_ids").list,f=t("../../plots/cartesian/autorange").getAutoRange,M=t("./constants");B.exports=function(e){for(var a=x(e,"x",!0),i=0;i<a.length;i++){var n=a[i],r=n[M.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=f(e,n))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(t,B,G){B.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(t,B,G){var x=t("../../lib"),f=t("../../plot_api/plot_template"),M=t("../../plots/cartesian/axis_ids"),T=t("./attributes"),e=t("./oppaxis_attributes");B.exports=function(i,n,r){var v=i[r],s=n[r];if(!(v.rangeslider||n._requestRangeslider[s._id]))return;x.isPlainObject(v.rangeslider)||(v.rangeslider={});var o=v.rangeslider,b=f.newContainer(s,"rangeslider");function g(E,S){return x.coerce(o,b,T,E,S)}var d,c;function m(E,S){return x.coerce(d,c,e,E,S)}var l=g("visible");if(!!l){g("bgcolor",n.plot_bgcolor),g("bordercolor"),g("borderwidth"),g("thickness"),g("autorange",!s.isValidRange(o.range)),g("range");var y=n._subplots;if(y)for(var u=y.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===M.name2id(r)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),A=x.simpleMap(u,M.id2name),_=0;_<A.length;_++){var p=A[_];d=o[p]||{},c=f.newContainer(b,p,"yaxis");var w=n[p],h;d.range&&w.isValidRange(d.range)&&(h="fixed");var L=m("rangemode",h);L!=="match"&&m("range",w.range.slice())}b._input=o}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../drawing"),i=t("../color"),n=t("../titles"),r=t("../../plots/cartesian"),v=t("../../plots/cartesian/axis_ids"),s=t("../dragelement"),o=t("../../lib/setcursor"),b=t("./constants");B.exports=function(w){for(var h=w._fullLayout,L=h._rangeSliderData,E=0;E<L.length;E++){var S=L[E][b.name];S._clipId=S._id+"-"+h._uid}function P(I){return I._name}var F=h._infolayer.selectAll("g."+b.containerClassName).data(L,P);F.exit().each(function(I){var D=I[b.name];h._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(F.enter().append("g").classed(b.containerClassName,!0).attr("pointer-events","all"),F.each(function(I){var D=x.select(this),R=I[b.name],O=h[v.id2name(I.anchor)],z=R[v.id2name(I.anchor)];if(R.range){var H=T.simpleMap(R.range,I.r2l),Y=T.simpleMap(I.range,I.r2l),ee;Y[0]<Y[1]?ee=[Math.min(H[0],Y[0]),Math.max(H[1],Y[1])]:ee=[Math.max(H[0],Y[0]),Math.min(H[1],Y[1])],R.range=R._input.range=T.simpleMap(ee,I.l2r)}I.cleanRange("rangeslider.range");var j=h._size,X=I.domain;R._width=j.w*(X[1]-X[0]);var ae=Math.round(j.l+j.w*X[0]),fe=Math.round(j.t+j.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+b.extraPad);D.attr("transform",e(ae,fe)),R._rl=T.simpleMap(R.range,I.r2l);var K=R._rl[0],J=R._rl[1],U=J-K;if(R.p2d=function(_e){return _e/R._width*U+K},R.d2p=function(_e){return(_e-K)/U*R._width},I.rangebreaks){var V=I.locateBreaks(K,J);if(V.length){var q,re,Z=0;for(q=0;q<V.length;q++)re=V[q],Z+=re.max-re.min;var Q=R._width/(J-K-Z),ie=[-Q*K];for(q=0;q<V.length;q++)re=V[q],ie.push(ie[ie.length-1]-Q*(re.max-re.min));for(R.d2p=function(_e){for(var ue=ie[0],ge=0;ge<V.length;ge++){var xe=V[ge];if(_e>=xe.max)ue=ie[ge+1];else if(_e<xe.min)break}return ue+Q*_e},q=0;q<V.length;q++)re=V[q],re.pmin=R.d2p(re.min),re.pmax=R.d2p(re.max);R.p2d=function(_e){for(var ue=ie[0],ge=0;ge<V.length;ge++){var xe=V[ge];if(_e>=xe.pmax)ue=ie[ge+1];else if(_e<xe.pmin)break}return(_e-ue)/Q}}}if(z.rangemode!=="match"){var oe=O.r2l(z.range[0]),ne=O.r2l(z.range[1]),se=ne-oe;R.d2pOppAxis=function(_e){return(_e-oe)/se*R._height}}D.call(m,w,I,R).call(l,w,I,R).call(y,w,I,R).call(A,w,I,R,z).call(_,w,I,R).call(p,w,I,R),g(D,w,I,R),c(D,w,I,R,O,z),I.side==="bottom"&&n.draw(w,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:h._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:fe+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function g(w,h,L,E){if(h._context.staticPlot)return;var S=w.select("rect."+b.slideBoxClassName).node(),P=w.select("rect."+b.grabAreaMinClassName).node(),F=w.select("rect."+b.grabAreaMaxClassName).node();function I(){var D=x.event,R=D.target,O=D.clientX||D.touches[0].clientX,z=O-w.node().getBoundingClientRect().left,H=E.d2p(L._rl[0]),Y=E.d2p(L._rl[1]),ee=s.coverSlip();this.addEventListener("touchmove",j),this.addEventListener("touchend",X),ee.addEventListener("mousemove",j),ee.addEventListener("mouseup",X);function j(ae){var fe=ae.clientX||ae.touches[0].clientX,K=+fe-O,J,U,V;switch(R){case S:V="ew-resize",J=H+K,U=Y+K;break;case P:V="col-resize",J=H+K,U=Y;break;case F:V="col-resize",J=H,U=Y+K;break;default:V="ew-resize",J=z,U=z+K;break}if(U<J){var q=U;U=J,J=q}E._pixelMin=J,E._pixelMax=U,o(x.select(ee),V),d(w,h,L,E)}function X(){ee.removeEventListener("mousemove",j),ee.removeEventListener("mouseup",X),this.removeEventListener("touchmove",j),this.removeEventListener("touchend",X),T.removeElement(ee)}}w.on("mousedown",I),w.on("touchstart",I)}function d(w,h,L,E){function S(I){return L.l2r(T.constrain(I,E._rl[0],E._rl[1]))}var P=S(E.p2d(E._pixelMin)),F=S(E.p2d(E._pixelMax));window.requestAnimationFrame(function(){f.call("_guiRelayout",h,L._name+".range",[P,F])})}function c(w,h,L,E,S,P){var F=b.handleWidth/2;function I(ae){return T.constrain(ae,0,E._width)}function D(ae){return T.constrain(ae,0,E._height)}function R(ae){return T.constrain(ae,-F,E._width+F)}var O=I(E.d2p(L._rl[0])),z=I(E.d2p(L._rl[1]));if(w.select("rect."+b.slideBoxClassName).attr("x",O).attr("width",z-O),w.select("rect."+b.maskMinClassName).attr("width",O),w.select("rect."+b.maskMaxClassName).attr("x",z).attr("width",E._width-z),P.rangemode!=="match"){var H=E._height-D(E.d2pOppAxis(S._rl[1])),Y=E._height-D(E.d2pOppAxis(S._rl[0]));w.select("rect."+b.maskMinOppAxisClassName).attr("x",O).attr("height",H).attr("width",z-O),w.select("rect."+b.maskMaxOppAxisClassName).attr("x",O).attr("y",Y).attr("height",E._height-Y).attr("width",z-O),w.select("rect."+b.slideBoxClassName).attr("y",H).attr("height",Y-H)}var ee=.5,j=Math.round(R(O-F))-ee,X=Math.round(R(z-F))+ee;w.select("g."+b.grabberMinClassName).attr("transform",e(j,ee)),w.select("g."+b.grabberMaxClassName).attr("transform",e(X,ee))}function m(w,h,L,E){var S=T.ensureSingle(w,"rect",b.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=E.borderwidth%2===0?E.borderwidth:E.borderwidth-1,F=-E._offsetShift,I=a.crispRound(h,E.borderwidth);S.attr({width:E._width+P,height:E._height+P,transform:e(F,F),"stroke-width":I}).call(i.stroke,E.bordercolor).call(i.fill,E.bgcolor)}function l(w,h,L,E){var S=h._fullLayout,P=T.ensureSingleById(S._topdefs,"clipPath",E._clipId,function(F){F.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:E._width,height:E._height})}function y(w,h,L,E){var S=h.calcdata,P=w.selectAll("g."+b.rangePlotClassName).data(L._subplotsWith,T.identity);P.enter().append("g").attr("class",function(I){return b.rangePlotClassName+" "+I}).call(a.setClipUrl,E._clipId,h),P.order(),P.exit().remove();var F;P.each(function(I,D){var R=x.select(this),O=D===0,z=v.getFromId(h,I,"y"),H=z._name,Y=E[H],ee={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:E.range.slice(),calendar:L.calendar},width:E._width,height:E._height,margin:{t:0,b:0,l:0,r:0}},_context:h._context};L.rangebreaks&&(ee.layout.xaxis.rangebreaks=L.rangebreaks),ee.layout[H]={type:z.type,domain:[0,1],range:Y.rangemode!=="match"?Y.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(ee.layout[H].rangebreaks=z.rangebreaks),M.supplyDefaults(ee);var j=ee._fullLayout.xaxis,X=ee._fullLayout[H];j.clearCalc(),j.setScale(),X.clearCalc(),X.setScale();var ae={id:I,plotgroup:R,xaxis:j,yaxis:X,isRangePlot:!0};O?F=ae:(ae.mainplot="xy",ae.mainplotinfo=F),r.rangePlot(h,ae,u(S,I))})}function u(w,h){for(var L=[],E=0;E<w.length;E++){var S=w[E],P=S[0].trace;P.xaxis+P.yaxis===h&&L.push(S)}return L}function A(w,h,L,E,S){var P=T.ensureSingle(w,"rect",b.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",E._height).call(i.fill,b.maskColor);var F=T.ensureSingle(w,"rect",b.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",E._height).call(i.fill,b.maskColor),S.rangemode!=="match"){var I=T.ensureSingle(w,"rect",b.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",E._width).call(i.fill,b.maskOppAxisColor);var D=T.ensureSingle(w,"rect",b.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",E._width).style("border-top",b.maskOppBorder).call(i.fill,b.maskOppAxisColor)}}function _(w,h,L,E){if(!h._context.staticPlot){var S=T.ensureSingle(w,"rect",b.slideBoxClassName,function(P){P.attr({y:0,cursor:b.slideBoxCursor,"shape-rendering":"crispEdges"})});S.attr({height:E._height,fill:b.slideBoxFill})}}function p(w,h,L,E){var S=T.ensureSingle(w,"g",b.grabberMinClassName),P=T.ensureSingle(w,"g",b.grabberMaxClassName),F={x:0,width:b.handleWidth,rx:b.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":b.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(E._height/4),height:Math.round(E._height/2)},D=T.ensureSingle(S,"rect",b.handleMinClassName,function(Y){Y.attr(F)});D.attr(I);var R=T.ensureSingle(P,"rect",b.handleMaxClassName,function(Y){Y.attr(F)});R.attr(I);var O={width:b.grabAreaWidth,x:0,y:0,fill:b.grabAreaFill,cursor:h._context.staticPlot?void 0:b.grabAreaCursor},z=T.ensureSingle(S,"rect",b.grabAreaMinClassName,function(Y){Y.attr(O)});z.attr("height",E._height);var H=T.ensureSingle(P,"rect",b.grabAreaMaxClassName,function(Y){Y.attr(O)});H.attr("height",E._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(t,B,G){var x=t("../../plots/cartesian/axis_ids"),f=t("../../lib/svg_text_utils"),M=t("./constants"),T=t("../../constants/alignment").LINE_SPACING,e=M.name;function a(i){var n=i&&i[e];return n&&n.visible}G.isVisible=a,G.makeData=function(i){var n=x.list({_fullLayout:i},"x",!0),r=i.margin,v=[];if(!i._has("gl2d"))for(var s=0;s<n.length;s++){var o=n[s];if(a(o)){v.push(o);var b=o[e];b._id=e+o._id,b._height=(i.height-r.b-r.t)*b.thickness,b._offsetShift=Math.floor(b.borderwidth/2)}}i._rangeSliderData=v},G.autoMarginOpts=function(i,n){var r=i._fullLayout,v=n[e],s=n._id.charAt(0),o=0,b=0;if(n.side==="bottom"&&(o=n._depth,n.title.text!==r._dfltTitle[s])){b=1.5*n.title.font.size+10+v._offsetShift;var g=(n.title.text.match(f.BR_TAG_ALL)||[]).length;b+=g*n.title.font.size*T}return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:v._height+o+Math.max(r.margin.b,b),pad:M.extraPad+v._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("./oppaxis_attributes"),T=t("./helpers");B.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:x.extendFlat({},f,{yaxis:M})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(t,B,G){B.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(t,B,G){var x=t("../annotations/attributes"),f=t("../../traces/scatter/attributes").line,M=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=e(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},x.xref,{}),yref:T({},x.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:f.color,width:T({},f.width,{min:1,dflt:1}),dash:T({},M,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(t,B,G){B.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("../shapes/helpers");B.exports=function(n,r){M(n,r,{name:"selections",handleItemDefaults:a});for(var v=r.selections,s=0;s<v.length;s++){var o=v[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(r.selections[s]=null)}};function a(i,n,r){function v(P,F){return x.coerce(i,n,T,P,F)}var s=v("path"),o=s?"path":"rect",b=v("type",o),g=b!=="path";g&&delete n.path,v("opacity"),v("line.color"),v("line.width"),v("line.dash");for(var d=["x","y"],c=0;c<2;c++){var m=d[c],l={_fullLayout:r},y,u,A,_=f.coerceRef(i,n,l,m);if(y=f.getFromId(l,_),y._selectionIndices.push(n._index),A=e.rangeToShapePosition(y),u=e.shapePositionToRange(y),g){var p=m+"0",w=m+"1",h=i[p],L=i[w];i[p]=u(i[p],!0),i[w]=u(i[w],!0),f.coercePosition(n,l,v,_,p),f.coercePosition(n,l,v,_,w);var E=n[p],S=n[w];E!==void 0&&S!==void 0&&(n[p]=A(E),n[w]=A(S),i[p]=h,i[w]=L)}}g&&x.noneOrAll(i,n,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(t,B,G){var x=t("../shapes/draw_newshape/helpers").readPaths,f=t("../shapes/display_outlines"),M=t("../shapes/handle_outline").clearOutlineControllers,T=t("../color"),e=t("../drawing"),a=t("../../plot_api/plot_template").arrayEditor,i=t("../shapes/helpers"),n=i.getPathString;B.exports={draw:r,drawOne:s,activateLastSelection:g};function r(c){var m=c._fullLayout;M(c),m._selectionLayer.selectAll("path").remove();for(var l in m._plots){var y=m._plots[l].selectionLayer;y&&y.selectAll("path").remove()}for(var u=0;u<m.selections.length;u++)s(c,u)}function v(c){return c._context.editSelection}function s(c,m){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+m+'"]').remove();var l=i.makeSelectionsOptionsAndPlotinfo(c,m),y=l.options,u=l.plotinfo;if(!y._input)return;A(c._fullLayout._selectionLayer);function A(_){var p=n(c,y),w={"data-index":m,"fill-rule":"evenodd",d:p},h=y.opacity,L="rgba(0,0,0,0)",E=y.line.color||T.contrast(c._fullLayout.plot_bgcolor),S=y.line.width,P=y.line.dash;S||(S=5,P="solid");var F=v(c)&&c._fullLayout._activeSelectionIndex===m;F&&(L=c._fullLayout.activeselection.fillcolor,h=c._fullLayout.activeselection.opacity);for(var I=[],D=1;D>=0;D--){var R=_.append("path").attr(w).style("opacity",D?.1:h).call(T.stroke,E).call(T.fill,L).call(e.dashLine,D?"solid":P,D?4+S:S);if(o(R,c,y),F){var O=a(c.layout,"selections",y);R.style({cursor:"move"});var z={element:R.node(),plotinfo:u,gd:c,editHelpers:O,isActiveSelection:!0},H=x(p,c);f(H,R,z)}else R.style("pointer-events",D?"all":"none");I[D]=R}var Y=I[0],ee=I[1];ee.node().addEventListener("click",function(){return b(c,Y)})}}function o(c,m,l){var y=l.xref+l.yref;e.setClipUrl(c,"clip"+m._fullLayout._uid+y,m)}function b(c,m){if(!!v(c)){var l=m.node(),y=+l.getAttribute("data-index");if(y>=0){if(y===c._fullLayout._activeSelectionIndex){d(c);return}c._fullLayout._activeSelectionIndex=y,c._fullLayout._deactivateSelection=d,r(c)}}}function g(c){if(!!v(c)){var m=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=m,c._fullLayout._deactivateSelection=d,r(c)}}function d(c){if(!!v(c)){var m=c._fullLayout._activeSelectionIndex;m>=0&&(M(c),delete c._fullLayout._activeSelectionIndex,r(c))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(t,B,G){var x=t("../../drawing/attributes").dash,f=t("../../../lib/extend").extendFlat;B.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:f({},x,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(t,B,G){B.exports=function(f,M,T){T("newselection.mode");var e=T("newselection.line.width");e&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},{}],453:[function(t,B,G){var x=t("../../dragelement/helpers"),f=x.selectMode,M=t("../../shapes/handle_outline"),T=M.clearOutline,e=t("../../shapes/draw_newshape/helpers"),a=e.readPaths,i=e.writePaths,n=e.fixDatesForPaths;B.exports=function(v,s){if(!!v.length){var o=v[0][0];if(!!o){var b=o.getAttribute("d"),g=s.gd,d=g._fullLayout.newselection,c=s.plotinfo,m=c.xaxis,l=c.yaxis,y=s.isActiveSelection,u=s.dragmode,A=(g.layout||{}).selections||[];if(!f(u)&&y!==void 0){var _=g._fullLayout._activeSelectionIndex;if(_<A.length)switch(g._fullLayout.selections[_].type){case"rect":u="select";break;case"path":u="lasso";break}}var p=a(b,g,c,y),w={xref:m._id,yref:l._id,opacity:d.opacity,line:{color:d.line.color,width:d.line.width,dash:d.line.dash}},h;p.length===1&&(h=p[0]),h&&h.length===5&&u==="select"?(w.type="rect",w.x0=h[0][1],w.y0=h[0][2],w.x1=h[2][1],w.y1=h[2][2]):(w.type="path",m&&l&&n(p,m,l),w.path=i(p),h=null),T(g);for(var L=s.editHelpers,E=(L||{}).modifyItem,S=[],P=0;P<A.length;P++){var F=g._fullLayout.selections[P];if(!F){S[P]=F;continue}if(S[P]=F._input,y!==void 0&&P===g._fullLayout._activeSelectionIndex){var I=w;switch(F.type){case"rect":E("x0",I.x0),E("x1",I.x1),E("y0",I.y0),E("y1",I.y1);break;case"path":E("path",I.path);break}}}return y===void 0?(S.push(w),S):L?L.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(t,B,G){var x=t("../../lib").strTranslate;function f(a,i){switch(a.type){case"log":return a.p2d(i);case"date":return a.p2r(i,0,a.calendar);default:return a.p2r(i)}}function M(a,i){switch(a.type){case"log":return a.d2p(i);case"date":return a.r2p(i,0,a.calendar);default:return a.r2p(i)}}function T(a){var i=a._id.charAt(0)==="y"?1:0;return function(n){return f(a,n[i])}}function e(a){return x(a.xaxis._offset,a.yaxis._offset)}B.exports={p2r:f,r2p:M,axValue:T,getTransform:e}},{"../../lib":515}],455:[function(t,B,G){var x=t("./draw"),f=t("./select");B.exports={moduleType:"component",name:"selections",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewSelectionDefaults:t("./draw_newselection/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("selections"),draw:x.draw,drawOne:x.drawOne,reselect:f.reselect,prepSelect:f.prepSelect,clearOutline:f.clearOutline,clearSelectionsCache:f.clearSelectionsCache,selectOnClick:f.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(t,B,G){var x=t("polybooljs"),f=t("point-in-polygon/nested"),M=t("../../registry"),T=t("../drawing").dashStyle,e=t("../color"),a=t("../fx"),i=t("../fx/helpers").makeEventData,n=t("../dragelement/helpers"),r=n.freeMode,v=n.rectMode,s=n.drawMode,o=n.openMode,b=n.selectMode,g=t("../shapes/helpers"),d=t("../shapes/constants"),c=t("../shapes/display_outlines"),m=t("../shapes/handle_outline").clearOutline,l=t("../shapes/draw_newshape/helpers"),y=l.handleEllipse,u=l.readPaths,A=t("../shapes/draw_newshape/newshapes"),_=t("./draw_newselection/newselections"),p=t("./draw").activateLastSelection,w=t("../../lib"),h=w.sorterAsc,L=t("../../lib/polygon"),E=t("../../lib/throttle"),S=t("../../plots/cartesian/axis_ids").getFromId,P=t("../../lib/clear_gl_canvases"),F=t("../../plot_api/subroutines").redrawReglTraces,I=t("./constants"),D=I.MINSELECT,R=L.filter,O=L.tester,z=t("./helpers"),H=z.p2r,Y=z.axValue,ee=z.getTransform;function j(Xe){return Xe.subplot!==void 0}function X(Xe,at,We,Ee,He){var Ke=!j(Ee),et=r(He),At=v(He),mt=o(He),Mt=s(He),Gt=b(He),zt=He==="drawline",Ht=He==="drawcircle",Xt=zt||Ht,Wt=Ee.gd,sr=Wt._fullLayout,Gr=Gt&&sr.newselection.mode==="immediate"&&Ke,cn=sr._zoomlayer,en=Ee.element.getBoundingClientRect(),st=Ee.plotinfo,rr=ee(st),er=at-en.left,jt=We-en.top;sr._calcInverseTransform(Wt);var Mr=w.apply3DTransform(sr._invTransform)(er,jt);er=Mr[0],jt=Mr[1];var it=sr._invScaleX,Qe=sr._invScaleY,ft=er,ct=jt,Et="M"+er+","+jt,Nt=Ee.xaxes[0],Pe=Ee.yaxes[0],Le=Nt._length,ot=Pe._length,ut=Xe.altKey&&!(s(He)&&mt),pt,Pt,xt,Lt,Zt,ur,Pr;V(Xe,Wt,Ee),et&&(pt=R([[er,jt]],I.BENDPX));var Ar=cn.selectAll("path.select-outline-"+st.id).data([1]),kr=Mt?sr.newshape:sr.newselection,Zr=Mt&&!mt?kr.fillcolor:"rgba(0,0,0,0)",lr=kr.line.color||(Ke?e.contrast(Wt._fullLayout.plot_bgcolor):"#7f7f7f");Ar.enter().append("path").attr("class","select-outline select-outline-"+st.id).style({opacity:Mt?kr.opacity/2:1,"stroke-dasharray":T(kr.line.dash,kr.line.width),"stroke-width":kr.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,lr).call(e.fill,Zr).attr("fill-rule","evenodd").classed("cursor-move",!!Mt).attr("transform",rr).attr("d",Et+"Z");var br=cn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",rr).attr("d","M0,0Z"),Or=sr._uid+I.SELECTID,Hr=[],Lr=ie(Wt,Ee.xaxes,Ee.yaxes,Ee.subplot);Gr&&!Xe.shiftKey&&(Ee._clearSubplotSelections=function(){if(!!Ke){var It=Nt._id,Jt=Pe._id;Ye(Wt,It,Jt,Lr);for(var fr=(Wt.layout||{}).selections||[],Nr=[],Vr=!1,Dr=0;Dr<fr.length;Dr++){var Er=sr.selections[Dr];Er.xref!==It||Er.yref!==Jt?Nr.push(fr[Dr]):Vr=!0}Vr&&(Wt._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Wt,{selections:Nr}))}});var nt=Ct(Ee);Ee.moveFn=function(It,Jt){Ee._clearSubplotSelections&&(Ee._clearSubplotSelections(),Ee._clearSubplotSelections=void 0),ft=Math.max(0,Math.min(Le,it*It+er)),ct=Math.max(0,Math.min(ot,Qe*Jt+jt));var fr=Math.abs(ft-er),Nr=Math.abs(ct-jt);if(At){var Vr,Dr,Er;if(Gt){var jr=sr.selectdirection;switch(jr==="any"?Nr<Math.min(fr*.6,D)?Vr="h":fr<Math.min(Nr*.6,D)?Vr="v":Vr="d":Vr=jr,Vr){case"h":Dr=Ht?ot/2:0,Er=ot;break;case"v":Dr=Ht?Le/2:0,Er=Le;break}}if(Mt)switch(sr.newshape.drawdirection){case"vertical":Vr="h",Dr=Ht?ot/2:0,Er=ot;break;case"horizontal":Vr="v",Dr=Ht?Le/2:0,Er=Le;break;case"ortho":fr<Nr?(Vr="h",Dr=jt,Er=ct):(Vr="v",Dr=er,Er=ft);break;default:Vr="d"}Vr==="h"?(Lt=Xt?y(Ht,[ft,Dr],[ft,Er]):[[er,Dr],[er,Er],[ft,Er],[ft,Dr]],Lt.xmin=Xt?ft:Math.min(er,ft),Lt.xmax=Xt?ft:Math.max(er,ft),Lt.ymin=Math.min(Dr,Er),Lt.ymax=Math.max(Dr,Er),br.attr("d","M"+Lt.xmin+","+(jt-D)+"h-4v"+2*D+"h4ZM"+(Lt.xmax-1)+","+(jt-D)+"h4v"+2*D+"h-4Z")):Vr==="v"?(Lt=Xt?y(Ht,[Dr,ct],[Er,ct]):[[Dr,jt],[Dr,ct],[Er,ct],[Er,jt]],Lt.xmin=Math.min(Dr,Er),Lt.xmax=Math.max(Dr,Er),Lt.ymin=Xt?ct:Math.min(jt,ct),Lt.ymax=Xt?ct:Math.max(jt,ct),br.attr("d","M"+(er-D)+","+Lt.ymin+"v-4h"+2*D+"v4ZM"+(er-D)+","+(Lt.ymax-1)+"v4h"+2*D+"v-4Z")):Vr==="d"&&(Lt=Xt?y(Ht,[er,jt],[ft,ct]):[[er,jt],[er,ct],[ft,ct],[ft,jt]],Lt.xmin=Math.min(er,ft),Lt.xmax=Math.max(er,ft),Lt.ymin=Math.min(jt,ct),Lt.ymax=Math.max(jt,ct),br.attr("d","M0,0Z"))}else et&&(pt.addPt([ft,ct]),Lt=pt.filtered);if(Ee.selectionDefs&&Ee.selectionDefs.length?(xt=be(Ee.mergedPolygons,Lt,ut),Lt.subtract=ut,Pt=U(Ee.selectionDefs.concat([Lt]))):(xt=[Lt],Pt=O(Lt)),c(Re(xt,mt),Ar,Ee),Gt){var kn=Ae(Wt,!1),mn=kn.eventData?kn.eventData.points.slice():[];kn=Ae(Wt,!1,Pt,Lr,Ee),Pt=kn.selectionTesters,Pr=kn.eventData;var Wn;pt?Wn=pt.filtered:Wn=Rt(xt),E.throttle(Or,I.SELECTDELAY,function(){Hr=Ve(Pt,Lr);for(var In=Hr.slice(),$n=0;$n<mn.length;$n++){for(var Kn=mn[$n],ma=!1,Ra=0;Ra<In.length;Ra++)if(In[Ra].curveNumber===Kn.curveNumber&&In[Ra].pointNumber===Kn.pointNumber){ma=!0;break}ma||In.push(Kn)}In.length&&(Pr||(Pr={}),Pr.points=In),nt(Pr,Wn),Kt(Wt,Pr)})}},Ee.clickFn=function(It,Jt){if(br.remove(),Wt._fullLayout._activeShapeIndex>=0){Wt._fullLayout._deactivateShape(Wt);return}if(!Mt){var fr=sr.clickmode;E.done(Or).then(function(){if(E.clear(Or),It===2){for(Ar.remove(),Zt=0;Zt<Lr.length;Zt++)ur=Lr[Zt],ur._module.selectPoints(ur,!1);if(xe(Wt,Lr),Z(Ee),St(Wt),Lr.length){var Nr=Lr[0].xaxis,Vr=Lr[0].yaxis;if(Nr&&Vr){for(var Dr=[],Er=Wt._fullLayout.selections,jr=0;jr<Er.length;jr++){var kn=Er[jr];!kn||(kn.xref!==Nr._id||kn.yref!==Vr._id)&&Dr.push(kn)}Dr.length<Er.length&&(Wt._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Wt,{selections:Dr}))}}}else fr.indexOf("select")>-1&&ae(Jt,Wt,Ee.xaxes,Ee.yaxes,Ee.subplot,Ee,Ar),fr==="event"&&Ot(Wt,void 0);a.click(Wt,Jt)}).catch(w.error)}},Ee.doneFn=function(){br.remove(),E.done(Or).then(function(){E.clear(Or),!Gr&&Lt&&Ee.selectionDefs&&(Lt.subtract=ut,Ee.selectionDefs.push(Lt),Ee.mergedPolygons.length=0,[].push.apply(Ee.mergedPolygons,xt)),(Gr||Mt)&&Z(Ee,Gr),Ee.doneFnCompleted&&Ee.doneFnCompleted(Hr),Gt&&Ot(Wt,Pr)}).catch(w.error)}}function ae(Xe,at,We,Ee,He,Ke,et){var At=at._hoverdata,mt=at._fullLayout,Mt=mt.clickmode,Gt=Mt.indexOf("event")>-1,zt=[],Ht,Xt,Wt,sr,Gr,cn,en,st,rr,er;if(ne(At)){V(Xe,at,Ke),Ht=ie(at,We,Ee,He);var jt=se(At,Ht),Mr=jt.pointNumbers.length>0;if(Mr?ue(Ht,jt):ge(Ht)&&(en=_e(jt))){for(et&&et.remove(),er=0;er<Ht.length;er++)Xt=Ht[er],Xt._module.selectPoints(Xt,!1);xe(at,Ht),Z(Ke),Gt&&St(at)}else{st=Xe.shiftKey&&(en!==void 0?en:_e(jt)),Wt=fe(jt.pointNumber,jt.searchInfo,st);var it=Ke.selectionDefs.concat([Wt]);for(sr=U(it),er=0;er<Ht.length;er++)if(Gr=Ht[er]._module.selectPoints(Ht[er],sr),cn=Se(Gr,Ht[er]),zt.length)for(var Qe=0;Qe<cn.length;Qe++)zt.push(cn[Qe]);else zt=cn;if(rr={points:zt},xe(at,Ht,rr),Wt&&Ke&&Ke.selectionDefs.push(Wt),et){var ft=Ke.mergedPolygons,ct=o(Ke.dragmode);c(Re(ft,ct),et,Ke)}Gt&&Ot(at,rr)}}}function fe(Xe,at,We){return{pointNumber:Xe,searchInfo:at,subtract:!!We}}function K(Xe){return"pointNumber"in Xe&&"searchInfo"in Xe}function J(Xe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(at,We,Ee,He){var Ke=Xe.searchInfo.cd[0].trace._expandedIndex,et=He.cd[0].trace._expandedIndex;return et===Ke&&Ee===Xe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Xe.subtract}}function U(Xe){if(!Xe.length)return;for(var at=[],We=K(Xe[0])?0:Xe[0][0][0],Ee=We,He=K(Xe[0])?0:Xe[0][0][1],Ke=He,et=0;et<Xe.length;et++)if(K(Xe[et]))at.push(J(Xe[et]));else{var At=O(Xe[et]);At.subtract=!!Xe[et].subtract,at.push(At),We=Math.min(We,At.xmin),Ee=Math.max(Ee,At.xmax),He=Math.min(He,At.ymin),Ke=Math.max(Ke,At.ymax)}function mt(Mt,Gt,zt,Ht){for(var Xt=!1,Wt=0;Wt<at.length;Wt++)at[Wt].contains(Mt,Gt,zt,Ht)&&(Xt=!at[Wt].subtract);return Xt}return{xmin:We,xmax:Ee,ymin:He,ymax:Ke,pts:[],contains:mt,isRect:!1,degenerate:!1}}function V(Xe,at,We){var Ee=at._fullLayout,He=We.plotinfo,Ke=We.dragmode,et=Ee._lastSelectedSubplot&&Ee._lastSelectedSubplot===He.id,At=(Xe.shiftKey||Xe.altKey)&&!(s(Ke)&&o(Ke));et&&At&&He.selection&&He.selection.selectionDefs&&!We.selectionDefs?(We.selectionDefs=He.selection.selectionDefs,We.mergedPolygons=He.selection.mergedPolygons):(!At||!He.selection)&&Z(We),et||(m(at),Ee._lastSelectedSubplot=He.id)}function q(Xe){return Xe._fullLayout._activeShapeIndex>=0}function re(Xe){return Xe._fullLayout._activeSelectionIndex>=0}function Z(Xe,at){var We=Xe.dragmode,Ee=Xe.plotinfo,He=Xe.gd;q(He)&&He._fullLayout._deactivateShape(He),re(He)&&He._fullLayout._deactivateSelection(He);var Ke=He._fullLayout,et=Ke._zoomlayer,At=s(We),mt=b(We);if(At||mt){var Mt=et.selectAll(".select-outline-"+Ee.id);if(Mt&&He._fullLayout._outlining){var Gt;At&&(Gt=A(Mt,Xe)),Gt&&M.call("_guiRelayout",He,{shapes:Gt});var zt;mt&&!j(Xe)&&(zt=_(Mt,Xe)),zt&&(He._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",He,{selections:zt}).then(function(){at&&p(He)})),He._fullLayout._outlining=!1}}Ee.selection={},Ee.selection.selectionDefs=Xe.selectionDefs=[],Ee.selection.mergedPolygons=Xe.mergedPolygons=[]}function Q(Xe){return Xe._id}function ie(Xe,at,We,Ee){if(!Xe.calcdata)return[];var He=[],Ke=at.map(Q),et=We.map(Q),At,mt,Mt;for(Mt=0;Mt<Xe.calcdata.length;Mt++)if(At=Xe.calcdata[Mt],mt=At[0].trace,!(mt.visible!==!0||!mt._module||!mt._module.selectPoints))if(j({subplot:Ee})&&(mt.subplot===Ee||mt.geo===Ee))He.push(oe(mt._module,At,at[0],We[0]));else if(mt.type==="splom"){if(mt._xaxes[Ke[0]]&&mt._yaxes[et[0]]){var Gt=oe(mt._module,At,at[0],We[0]);Gt.scene=Xe._fullLayout._splomScenes[mt.uid],He.push(Gt)}}else if(mt.type==="sankey"){var zt=oe(mt._module,At,at[0],We[0]);He.push(zt)}else{if(Ke.indexOf(mt.xaxis)===-1||et.indexOf(mt.yaxis)===-1)continue;He.push(oe(mt._module,At,S(Xe,mt.xaxis),S(Xe,mt.yaxis)))}return He}function oe(Xe,at,We,Ee){return{_module:Xe,cd:at,xaxis:We,yaxis:Ee}}function ne(Xe){return Xe&&Array.isArray(Xe)&&Xe[0].hoverOnBox!==!0}function se(Xe,at){var We=Xe[0],Ee=-1,He=[],Ke,et;for(et=0;et<at.length;et++)if(Ke=at[et],We.fullData._expandedIndex===Ke.cd[0].trace._expandedIndex){if(We.hoverOnBox===!0)break;We.pointNumber!==void 0?Ee=We.pointNumber:We.binNumber!==void 0&&(Ee=We.binNumber,He=We.pointNumbers);break}return{pointNumber:Ee,pointNumbers:He,searchInfo:Ke}}function _e(Xe){var at=Xe.searchInfo.cd[0].trace,We=Xe.pointNumber,Ee=Xe.pointNumbers,He=Ee.length>0,Ke=He?Ee[0]:We;return at.selectedpoints?at.selectedpoints.indexOf(Ke)>-1:!1}function ue(Xe,at){var We=[],Ee,He,Ke,et;for(et=0;et<Xe.length;et++)Ee=Xe[et],Ee.cd[0].trace.selectedpoints&&Ee.cd[0].trace.selectedpoints.length>0&&We.push(Ee);if(We.length===1&&(Ke=We[0]===at.searchInfo,Ke&&(He=at.searchInfo.cd[0].trace,He.selectedpoints.length===at.pointNumbers.length))){for(et=0;et<at.pointNumbers.length;et++)if(He.selectedpoints.indexOf(at.pointNumbers[et])<0)return!1;return!0}return!1}function ge(Xe){var at=0,We,Ee,He;for(He=0;He<Xe.length;He++)if(We=Xe[He],Ee=We.cd[0].trace,Ee.selectedpoints&&(Ee.selectedpoints.length>1||(at+=Ee.selectedpoints.length,at>1)))return!1;return at===1}function xe(Xe,at,We){var Ee;for(Ee=0;Ee<at.length;Ee++){var He=at[Ee].cd[0].trace._fullInput,Ke=Xe._fullLayout._tracePreGUI[He.uid]||{};Ke.selectedpoints===void 0&&(Ke.selectedpoints=He._input.selectedpoints||null)}var et;if(We){var At=We.points||[];for(Ee=0;Ee<at.length;Ee++)et=at[Ee].cd[0].trace,et._input.selectedpoints=et._fullInput.selectedpoints=[],et._fullInput!==et&&(et.selectedpoints=[]);for(var mt=0;mt<At.length;mt++){var Mt=At[mt],Gt=Mt.data,zt=Mt.fullData,Ht=Mt.pointIndex,Xt=Mt.pointIndices;Xt?([].push.apply(Gt.selectedpoints,Xt),et._fullInput!==et&&[].push.apply(zt.selectedpoints,Xt)):(Gt.selectedpoints.push(Ht),et._fullInput!==et&&zt.selectedpoints.push(Ht))}}else for(Ee=0;Ee<at.length;Ee++)et=at[Ee].cd[0].trace,delete et.selectedpoints,delete et._input.selectedpoints,et._fullInput!==et&&delete et._fullInput.selectedpoints;ye(Xe,at)}function ye(Xe,at){for(var We=!1,Ee=0;Ee<at.length;Ee++){var He=at[Ee],Ke=He.cd;M.traceIs(Ke[0].trace,"regl")&&(We=!0);var et=He._module,At=et.styleOnSelect||et.style;At&&(At(Xe,Ke,Ke[0].node3),Ke[0].nodeRangePlot3&&At(Xe,Ke,Ke[0].nodeRangePlot3))}We&&(P(Xe),F(Xe))}function be(Xe,at,We){for(var Ee=We?x.difference:x.union,He=Ee({regions:Xe},{regions:[at]}),Ke=He.regions.reverse(),et=0;et<Ke.length;et++){var At=Ke[et];At.subtract=Ge(At,Ke.slice(0,et))}return Ke}function Se(Xe,at){if(Array.isArray(Xe))for(var We=at.cd,Ee=at.cd[0].trace,He=0;He<Xe.length;He++)Xe[He]=i(Xe[He],Ee,We);return Xe}function Re(Xe,at){for(var We=[],Ee=0;Ee<Xe.length;Ee++){We[Ee]=[];for(var He=0;He<Xe[Ee].length;He++){We[Ee][He]=[],We[Ee][He][0]=He?"L":"M";for(var Ke=0;Ke<Xe[Ee][He].length;Ke++)We[Ee][He].push(Xe[Ee][He][Ke])}at||We[Ee].push(["Z",We[Ee][0][1],We[Ee][0][2]])}return We}function Ve(Xe,at){for(var We=[],Ee,He,Ke=0;Ke<at.length;Ke++){var et=at[Ke];He=et._module.selectPoints(et,Xe),Ee=Se(He,et),We=We.concat(Ee)}return We}function Ae(Xe,at,We,Ee,He){var Ke=!!Ee,et,At,mt;He&&(et=He.plotinfo,At=He.xaxes[0]._id,mt=He.yaxes[0]._id);var Mt=[],Gt=[],zt=Ie(Xe),Ht=Xe._fullLayout;if(et){var Xt=Ht._zoomlayer,Wt=Ht.dragmode,sr=s(Wt),Gr=b(Wt);if(sr||Gr){var cn=S(Xe,At,"x"),en=S(Xe,mt,"y");if(cn&&en){var st=Xt.selectAll(".select-outline-"+et.id);if(st&&Xe._fullLayout._outlining&&st.length){for(var rr=st[0][0],er=rr.getAttribute("d"),jt=u(er,Xe,et),Mr=[],it=0;it<jt.length;it++){for(var Qe=jt[it],ft=[],ct=0;ct<Qe.length;ct++)ft.push([dt(cn,Qe[ct][1]),dt(en,Qe[ct][2])]);ft.xref=At,ft.yref=mt,ft.subtract=Ge(ft,Mr),Mr.push(ft)}zt=zt.concat(Mr)}}}}var Et=At&&mt?[At+mt]:Ht._subplots.cartesian;Ce(Xe);for(var Nt={},Pe=0;Pe<Et.length;Pe++){var Le=Et[Pe],ot=Le.indexOf("y"),ut=Le.slice(0,ot),pt=Le.slice(ot),Pt=At&&mt?We:void 0;if(Pt=ze(zt,ut,pt,Pt),Pt){var xt=Ee;if(!Ke){var Lt=S(Xe,ut,"x"),Zt=S(Xe,pt,"y");xt=ie(Xe,[Lt],[Zt],Le);for(var ur=0;ur<xt.length;ur++){var Pr=xt[ur],Ar=Pr.cd[0],kr=Ar.trace;if(Pr._module.name==="scattergl"&&!Ar.t.xpx){var Zr=kr.x,lr=kr.y,br=kr._length;Ar.t.xpx=[],Ar.t.ypx=[];for(var Or=0;Or<br;Or++)Ar.t.xpx[Or]=Lt.c2p(Zr[Or]),Ar.t.ypx[Or]=Zt.c2p(lr[Or])}Pr._module.name==="splom"&&(Nt[kr.uid]||(Nt[kr.uid]=!0))}}var Hr=Ve(Pt,xt);Mt=Mt.concat(Hr),Gt=Gt.concat(xt)}}var Lr={points:Mt};xe(Xe,Gt,Lr);var nt=Ht.clickmode,It=nt.indexOf("event")>-1&&at;if(!et&&at){var Jt=Ie(Xe,!0);if(Jt.length){var fr=Jt[0].xref,Nr=Jt[0].yref;if(fr&&Nr){var Vr=Rt(Jt),Dr=Bt([S(Xe,fr,"x"),S(Xe,Nr,"y")]);Dr(Lr,Vr)}}Xe._fullLayout._noEmitSelectedAtStart?Xe._fullLayout._noEmitSelectedAtStart=!1:It&&Ot(Xe,Lr),Ht._reselect=!1}if(!et&&Ht._deselect){var Er=Ht._deselect;At=Er.xref,mt=Er.yref,Ze(At,mt,Gt)||Ye(Xe,At,mt,Ee),It&&(Lr.points.length?Ot(Xe,Lr):St(Xe)),Ht._deselect=!1}return{eventData:Lr,selectionTesters:We}}function Ce(Xe){var at=Xe.calcdata;if(!!at)for(var We=0;We<at.length;We++){var Ee=at[We][0],He=Ee.trace,Ke=Xe._fullLayout._splomScenes;if(Ke){var et=Ke[He.uid];et&&(et.selectBatch=[])}}}function Ze(Xe,at,We){for(var Ee=0;Ee<We.length;Ee++){var He=We[Ee];if(He.xaxis&&He.xaxis._id===Xe&&He.yaxis&&He.yaxis._id===at)return!0}return!1}function Ye(Xe,at,We,Ee){Ee=ie(Xe,[S(Xe,at,"x")],[S(Xe,We,"y")],at+We);for(var He=0;He<Ee.length;He++){var Ke=Ee[He];Ke._module.selectPoints(Ke,!1)}xe(Xe,Ee)}function ze(Xe,at,We,Ee){for(var He,Ke=0;Ke<Xe.length;Ke++){var et=Xe[Ke];if(!(at!==et.xref||We!==et.yref))if(He){var At=!!et.subtract;He=be(He,et,At),Ee=U(He)}else He=[et],Ee=O(et)}return Ee}function Ie(Xe,at){for(var We=[],Ee=Xe._fullLayout,He=Ee.selections,Ke=He.length,et=0;et<Ke;et++)if(!(at&&et!==Ee._activeSelectionIndex)){var At=He[et];if(!!At){var mt=At.xref,Mt=At.yref,Gt=S(Xe,mt,"x"),zt=S(Xe,Mt,"y"),Ht,Xt,Wt,sr,Gr;if(At.type==="rect"){Gr=[];var cn=dt(Gt,At.x0),en=dt(Gt,At.x1),st=dt(zt,At.y0),rr=dt(zt,At.y1);Gr=[[cn,st],[cn,rr],[en,rr],[en,st]],Ht=Math.min(cn,en),Xt=Math.max(cn,en),Wt=Math.min(st,rr),sr=Math.max(st,rr),Gr.xmin=Ht,Gr.xmax=Xt,Gr.ymin=Wt,Gr.ymax=sr,Gr.xref=mt,Gr.yref=Mt,Gr.subtract=!1,Gr.isRect=!0,We.push(Gr)}else if(At.type==="path")for(var er=At.path.split("Z"),jt=[],Mr=0;Mr<er.length;Mr++){var it=er[Mr];if(!!it){it+="Z";var Qe=g.extractPathCoords(it,d.paramIsX,"raw"),ft=g.extractPathCoords(it,d.paramIsY,"raw");Ht=1/0,Xt=-1/0,Wt=1/0,sr=-1/0,Gr=[];for(var ct=0;ct<Qe.length;ct++){var Et=dt(Gt,Qe[ct]),Nt=dt(zt,ft[ct]);Gr.push([Et,Nt]),Ht=Math.min(Et,Ht),Xt=Math.max(Et,Xt),Wt=Math.min(Nt,Wt),sr=Math.max(Nt,sr)}Gr.xmin=Ht,Gr.xmax=Xt,Gr.ymin=Wt,Gr.ymax=sr,Gr.xref=mt,Gr.yref=Mt,Gr.subtract=Ge(Gr,jt),jt.push(Gr),We.push(Gr)}}}}return We}function Ge(Xe,at){for(var We=!1,Ee=0;Ee<at.length;Ee++)for(var He=at[Ee],Ke=0;Ke<Xe.length;Ke++)if(f(Xe[Ke],He)){We=!We;break}return We}function dt(Xe,at){return Xe.type==="date"&&(at=at.replace("_"," ")),Xe.type==="log"?Xe.c2p(at):Xe.r2p(at,null,Xe.calendar)}function Rt(Xe){for(var at=Xe.length,We=[],Ee=0;Ee<at;Ee++){var He=Xe[Ee];We=We.concat(He),We=We.concat([He[0]])}return Qt(We)}function Qt(Xe){return Xe.isRect=Xe.length===5&&Xe[0][0]===Xe[4][0]&&Xe[0][1]===Xe[4][1]&&Xe[0][0]===Xe[1][0]&&Xe[2][0]===Xe[3][0]&&Xe[0][1]===Xe[3][1]&&Xe[1][1]===Xe[2][1]||Xe[0][1]===Xe[1][1]&&Xe[2][1]===Xe[3][1]&&Xe[0][0]===Xe[3][0]&&Xe[1][0]===Xe[2][0],Xe.isRect&&(Xe.xmin=Math.min(Xe[0][0],Xe[2][0]),Xe.xmax=Math.max(Xe[0][0],Xe[2][0]),Xe.ymin=Math.min(Xe[0][1],Xe[2][1]),Xe.ymax=Math.max(Xe[0][1],Xe[2][1])),Xe}function Bt(Xe){return function(at,We){for(var Ee,He,Ke=0;Ke<Xe.length;Ke++){var et=Xe[Ke],At=et._id,mt=At.charAt(0);if(We.isRect){Ee||(Ee={});var Mt=We[mt+"min"],Gt=We[mt+"max"];Mt!==void 0&&Gt!==void 0&&(Ee[At]=[H(et,Mt),H(et,Gt)].sort(h))}else He||(He={}),He[At]=We.map(Y(et))}Ee&&(at.range=Ee),He&&(at.lassoPoints=He)}}function Ct(Xe){var at=Xe.plotinfo;return at.fillRangeItems||Bt(Xe.xaxes.concat(Xe.yaxes))}function Kt(Xe,at){Xe.emit("plotly_selecting",at)}function Ot(Xe,at){at&&(at.selections=(Xe.layout||{}).selections||[]),Xe.emit("plotly_selected",at)}function St(Xe){Xe.emit("plotly_deselect",null)}B.exports={reselect:Ae,prepSelect:X,clearOutline:m,clearSelectionsCache:Z,selectOnClick:ae}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(t,B,G){var x=t("../annotations/attributes"),f=t("../../traces/scatter/attributes").line,M=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},x.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},x.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},f.color,{editType:"arraydraw"}),width:T({},f.width,{editType:"calc+arraydraw"}),dash:T({},M,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("./constants"),T=t("./helpers");B.exports=function(v){var s=v._fullLayout,o=x.filterVisible(s.shapes);if(!(!o.length||!v._fullData.length))for(var b=0;b<o.length;b++){var g=o[b];g._extremes={};var d,c,m=f.getRefType(g.xref),l=f.getRefType(g.yref);if(g.xref!=="paper"&&m!=="domain"){var y=g.xsizemode==="pixel"?g.xanchor:g.x0,u=g.xsizemode==="pixel"?g.xanchor:g.x1;d=f.getFromId(v,g.xref),c=n(d,y,u,g.path,M.paramIsX),c&&(g._extremes[d._id]=f.findExtremes(d,c,e(g)))}if(g.yref!=="paper"&&l!=="domain"){var A=g.ysizemode==="pixel"?g.yanchor:g.y0,_=g.ysizemode==="pixel"?g.yanchor:g.y1;d=f.getFromId(v,g.yref),c=n(d,A,_,g.path,M.paramIsY),c&&(g._extremes[d._id]=f.findExtremes(d,c,a(g)))}}};function e(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function a(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,v,s,o,b,g){var d=r/2,c=g;if(v==="pixel"){var m=b?T.extractPathCoords(b,g?M.paramIsY:M.paramIsX):[s,o],l=x.aggNums(Math.max,null,m),y=x.aggNums(Math.min,null,m),u=y<0?Math.abs(y)+d:d,A=l>0?l+d:d;return{ppad:d,ppadplus:c?u:A,ppadminus:c?A:u}}else return{ppad:d}}function n(r,v,s,o,b){var g=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(v!==void 0)return[g(v),g(s)];if(!!o){var d=1/0,c=-1/0,m=o.match(M.segmentRE),l,y,u,A,_;for(r.type==="date"&&(g=T.decodeDate(g)),l=0;l<m.length;l++)y=m[l],u=b[y.charAt(0)].drawn,u!==void 0&&(A=m[l].substr(1).match(M.paramRE),!(!A||A.length<u)&&(_=g(A[u]),_<d&&(d=_),_>c&&(c=_)));if(c>=d)return[d,c]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(t,B,G){B.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("./helpers");B.exports=function(n,r){M(n,r,{name:"shapes",handleItemDefaults:a})};function a(i,n,r){function v(Y,ee){return x.coerce(i,n,T,Y,ee)}var s=v("visible");if(!!s){var o=v("path"),b=o?"path":"rect",g=v("type",b),d=g!=="path";d&&delete n.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule");var c=v("line.width");c&&(v("line.color"),v("line.dash"));for(var m=v("xsizemode"),l=v("ysizemode"),y=["x","y"],u=0;u<2;u++){var A=y[u],_=A+"anchor",p=A==="x"?m:l,w={_fullLayout:r},h,L,E,S=f.coerceRef(i,n,w,A,void 0,"paper"),P=f.getRefType(S);if(P==="range"?(h=f.getFromId(w,S),h._shapeIndices.push(n._index),E=e.rangeToShapePosition(h),L=e.shapePositionToRange(h)):L=E=x.identity,d){var F=.25,I=.75,D=A+"0",R=A+"1",O=i[D],z=i[R];i[D]=L(i[D],!0),i[R]=L(i[R],!0),p==="pixel"?(v(D,0),v(R,10)):(f.coercePosition(n,w,v,S,D,F),f.coercePosition(n,w,v,S,R,I)),n[D]=E(n[D]),n[R]=E(n[R]),i[D]=O,i[R]=z}if(p==="pixel"){var H=i[_];i[_]=L(i[_],!0),f.coercePosition(n,w,v,S,_,.25),n[_]=E(n[_]),i[_]=H}}d&&x.noneOrAll(i,n,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(t,B,G){var x=t("../../lib"),f=x.strTranslate,M=t("../dragelement"),T=t("../dragelement/helpers"),e=T.drawMode,a=T.selectMode,i=t("../../registry"),n=t("../color"),r=t("./draw_newshape/constants"),v=r.i000,s=r.i090,o=r.i180,b=r.i270,g=t("./handle_outline"),d=g.clearOutlineControllers,c=t("./draw_newshape/helpers"),m=c.pointsOnRectangle,l=c.pointsOnEllipse,y=c.writePaths,u=t("./draw_newshape/newshapes"),A=t("../selections/draw_newselection/newselections");B.exports=function h(L,E,S,P){P||(P=0);var F=S.gd;function I(){h(L,E,S,P++),l(L[0])&&D({redrawing:!0})}function D(ue){var ge={};S.isActiveShape!==void 0&&(S.isActiveShape=!1,ge=u(E,S)),S.isActiveSelection!==void 0&&(S.isActiveSelection=!1,ge=A(E,S),F._fullLayout._reselect=!0),Object.keys(ge).length&&i.call((ue||{}).redrawing?"relayout":"_guiRelayout",F,ge)}var R=F._fullLayout,O=R._zoomlayer,z=S.dragmode,H=e(z),Y=a(z);(H||Y)&&(F._fullLayout._outlining=!0),d(F),E.attr("d",y(L));var ee,j,X,ae,fe;if(!P&&(S.isActiveShape||S.isActiveSelection)){fe=_([],L);var K=O.append("g").attr("class","outline-controllers");Z(K),_e()}function J(ue){X=+ue.srcElement.getAttribute("data-i"),ae=+ue.srcElement.getAttribute("data-j"),ee[X][ae].moveFn=U}function U(ue,ge){if(!!L.length){var xe=fe[X][ae][1],ye=fe[X][ae][2],be=L[X],Se=be.length;if(m(be)){var Re=ue,Ve=ge;if(S.isActiveSelection){var Ae=p(be,ae);Ae[1]===be[ae][1]?Ve=0:Re=0}for(var Ce=0;Ce<Se;Ce++)if(Ce!==ae){var Ze=be[Ce];Ze[1]===be[ae][1]&&(Ze[1]=xe+Re),Ze[2]===be[ae][2]&&(Ze[2]=ye+Ve)}if(be[ae][1]=xe+Re,be[ae][2]=ye+Ve,!m(be))for(var Ye=0;Ye<Se;Ye++)for(var ze=0;ze<be[Ye].length;ze++)be[Ye][ze]=fe[X][Ye][ze]}else be[ae][1]=xe+ue,be[ae][2]=ye+ge;I()}}function V(){D()}function q(){if(!!L.length&&!!L[X]&&!!L[X].length){for(var ue=[],ge=0;ge<L[X].length;ge++)ge!==ae&&ue.push(L[X][ge]);ue.length>1&&!(ue.length===2&&ue[1][0]==="Z")&&(ae===0&&(ue[0][0]="M"),L[X]=ue,I(),D())}}function re(ue,ge){if(ue===2){X=+ge.srcElement.getAttribute("data-i"),ae=+ge.srcElement.getAttribute("data-j");var xe=L[X];!m(xe)&&!l(xe)&&q()}}function Z(ue){ee=[];for(var ge=0;ge<L.length;ge++){var xe=L[ge],ye=m(xe),be=!ye&&l(xe);ee[ge]=[];for(var Se=xe.length,Re=0;Re<Se;Re++)if(xe[Re][0]!=="Z"&&!(be&&Re!==v&&Re!==s&&Re!==o&&Re!==b)){var Ve=ye&&S.isActiveSelection,Ae;Ve&&(Ae=p(xe,Re));var Ce=xe[Re][1],Ze=xe[Re][2],Ye=ue.append(Ve?"rect":"circle").attr("data-i",ge).attr("data-j",Re).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ve){var ze=Ae[1]-Ce,Ie=Ae[2]-Ze,Ge=Ie?5:Math.max(Math.min(25,Math.abs(ze)-5),5),dt=ze?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);Ye.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ge).attr("height",dt).attr("x",Ce-Ge/2).attr("y",Ze-dt/2).attr("transform",f(ze/2,Ie/2))}else Ye.classed("cursor-grab",!0).attr("r",5).attr("cx",Ce).attr("cy",Ze);ee[ge][Re]={element:Ye.node(),gd:F,prepFn:J,doneFn:V,clickFn:re},M.init(ee[ge][Re])}}}function Q(ue,ge){if(!!L.length)for(var xe=0;xe<L.length;xe++)for(var ye=0;ye<L[xe].length;ye++)for(var be=0;be+2<L[xe][ye].length;be+=2)L[xe][ye][be+1]=fe[xe][ye][be+1]+ue,L[xe][ye][be+2]=fe[xe][ye][be+2]+ge}function ie(ue,ge){Q(ue,ge),I()}function oe(ue){X=+ue.srcElement.getAttribute("data-i"),X||(X=0),j[X].moveFn=ie}function ne(){D()}function se(ue){ue===2&&w(F)}function _e(){if(j=[],!!L.length){var ue=0;j[ue]={element:E[0][0],gd:F,prepFn:oe,doneFn:ne,clickFn:se},M.init(j[ue])}}};function _(h,L){for(var E=0;E<L.length;E++){var S=L[E];h[E]=[];for(var P=0;P<S.length;P++){h[E][P]=[];for(var F=0;F<S[P].length;F++)h[E][P][F]=S[P][F]}}return h}function p(h,L){var E=h[L][1],S=h[L][2],P=h.length,F,I,D;return F=(L+1)%P,I=h[F][1],D=h[F][2],I===E&&D===S&&(F=(L+2)%P,I=h[F][1],D=h[F][2]),[F,I,D]}function w(h){if(!!a(h._fullLayout.dragmode)){d(h);var L=h._fullLayout._activeSelectionIndex,E=(h.layout||{}).selections||[];if(L<E.length){for(var S=[],P=0;P<E.length;P++)P!==L&&S.push(E[P]);delete h._fullLayout._activeSelectionIndex;var F=h._fullLayout.selections[L];h._fullLayout._deselect={xref:F.xref,yref:F.yref},i.call("_guiRelayout",h,{selections:S})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../../plots/cartesian/axes"),T=t("./draw_newshape/helpers").readPaths,e=t("./display_outlines"),a=t("./handle_outline").clearOutlineControllers,i=t("../color"),n=t("../drawing"),r=t("../../plot_api/plot_template").arrayEditor,v=t("../dragelement"),s=t("../../lib/setcursor"),o=t("./constants"),b=t("./helpers"),g=b.getPathString;B.exports={draw:d,drawOne:l,eraseActiveShape:w};function d(h){var L=h._fullLayout;L._shapeUpperLayer.selectAll("path").remove(),L._shapeLowerLayer.selectAll("path").remove();for(var E in L._plots){var S=L._plots[E].shapelayer;S&&S.selectAll("path").remove()}for(var P=0;P<L.shapes.length;P++)L.shapes[P].visible&&l(h,P)}function c(h){return!!h._fullLayout._outlining}function m(h){return!h._context.edits.shapePosition}function l(h,L){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+L+'"]').remove();var E=b.makeShapesOptionsAndPlotinfo(h,L),S=E.options,P=E.plotinfo;if(!S._input||S.visible===!1)return;if(S.layer!=="below")I(h._fullLayout._shapeUpperLayer);else if(S.xref==="paper"||S.yref==="paper")I(h._fullLayout._shapeLowerLayer);else if(P._hadPlotinfo){var F=P.mainplotinfo||P;I(F.shapelayer)}else I(h._fullLayout._shapeLowerLayer);function I(D){var R=g(h,S),O={"data-index":L,"fill-rule":S.fillrule,d:R},z=S.opacity,H=S.fillcolor,Y=S.line.width?S.line.color:"rgba(0,0,0,0)",ee=S.line.width,j=S.line.dash;!ee&&S.editable===!0&&(ee=5,j="solid");var X=R[R.length-1]!=="Z",ae=m(h)&&S.editable&&h._fullLayout._activeShapeIndex===L;ae&&(H=X?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,z=h._fullLayout.activeshape.opacity);var fe=D.append("path").attr(O).style("opacity",z).call(i.stroke,Y).call(i.fill,H).call(n.dashLine,j,ee);y(fe,h,S);var K;if((ae||h._context.edits.shapePosition)&&(K=r(h.layout,"shapes",S)),ae){fe.style({cursor:"move"});var J={element:fe.node(),plotinfo:P,gd:h,editHelpers:K,isActiveShape:!0},U=T(R,h);e(U,fe,J)}else h._context.edits.shapePosition?u(h,fe,S,L,D,K):S.editable===!0&&fe.style("pointer-events",X||i.opacity(H)*z<=.5?"stroke":"all");fe.node().addEventListener("click",function(){return _(h,fe)})}}function y(h,L,E){var S=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(h,S?"clip"+L._fullLayout._uid+S:null,L)}function u(h,L,E,S,P,F){var I=10,D=10,R=E.xsizemode==="pixel",O=E.ysizemode==="pixel",z=E.type==="line",H=E.type==="path",Y=F.modifyItem,ee,j,X,ae,fe,K,J,U,V,q,re,Z,Q,ie,oe,ne=M.getFromId(h,E.xref),se=M.getRefType(E.xref),_e=M.getFromId(h,E.yref),ue=M.getRefType(E.yref),ge=b.getDataToPixel(h,ne,!1,se),xe=b.getDataToPixel(h,_e,!0,ue),ye=b.getPixelToData(h,ne,!1,se),be=b.getPixelToData(h,_e,!0,ue),Se=Ae(),Re={element:Se.node(),gd:h,prepFn:Ye,doneFn:ze,clickFn:Ie},Ve;v.init(Re),Se.node().onmousemove=Ze;function Ae(){return z?Ce():L}function Ce(){var Ct=10,Kt=Math.max(E.line.width,Ct),Ot=P.append("g").attr("data-index",S);Ot.append("path").attr("d",L.attr("d")).style({cursor:"move","stroke-width":Kt,"stroke-opacity":"0"});var St={"fill-opacity":"0"},Xe=Math.max(Kt/2,Ct);return Ot.append("circle").attr({"data-line-point":"start-point",cx:R?ge(E.xanchor)+E.x0:ge(E.x0),cy:O?xe(E.yanchor)-E.y0:xe(E.y0),r:Xe}).style(St).classed("cursor-grab",!0),Ot.append("circle").attr({"data-line-point":"end-point",cx:R?ge(E.xanchor)+E.x1:ge(E.x1),cy:O?xe(E.yanchor)-E.y1:xe(E.y1),r:Xe}).style(St).classed("cursor-grab",!0),Ot}function Ze(Ct){if(c(h)){Ve=null;return}if(z)Ct.target.tagName==="path"?Ve="move":Ve=Ct.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Kt=Re.element.getBoundingClientRect(),Ot=Kt.right-Kt.left,St=Kt.bottom-Kt.top,Xe=Ct.clientX-Kt.left,at=Ct.clientY-Kt.top,We=!H&&Ot>I&&St>D&&!Ct.shiftKey?v.getCursor(Xe/Ot,1-at/St):"move";s(L,We),Ve=We.split("-")[0]}}function Ye(Ct){c(h)||(R&&(fe=ge(E.xanchor)),O&&(K=xe(E.yanchor)),E.type==="path"?oe=E.path:(ee=R?E.x0:ge(E.x0),j=O?E.y0:xe(E.y0),X=R?E.x1:ge(E.x1),ae=O?E.y1:xe(E.y1)),ee<X?(V=ee,Q="x0",q=X,ie="x1"):(V=X,Q="x1",q=ee,ie="x0"),!O&&j<ae||O&&j>ae?(J=j,re="y0",U=ae,Z="y1"):(J=ae,re="y1",U=j,Z="y0"),Ze(Ct),Rt(P,E),Bt(L,E,h),Re.moveFn=Ve==="move"?Ge:dt,Re.altKey=Ct.altKey)}function ze(){c(h)||(s(L),Qt(P),y(L,h,E),x.call("_guiRelayout",h,F.getUpdateObj()))}function Ie(){c(h)||Qt(P)}function Ge(Ct,Kt){if(E.type==="path"){var Ot=function(at){return at},St=Ot,Xe=Ot;R?Y("xanchor",E.xanchor=ye(fe+Ct)):(St=function(We){return ye(ge(We)+Ct)},ne&&ne.type==="date"&&(St=b.encodeDate(St))),O?Y("yanchor",E.yanchor=be(K+Kt)):(Xe=function(We){return be(xe(We)+Kt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",E.path=A(oe,St,Xe))}else R?Y("xanchor",E.xanchor=ye(fe+Ct)):(Y("x0",E.x0=ye(ee+Ct)),Y("x1",E.x1=ye(X+Ct))),O?Y("yanchor",E.yanchor=be(K+Kt)):(Y("y0",E.y0=be(j+Kt)),Y("y1",E.y1=be(ae+Kt)));L.attr("d",g(h,E)),Rt(P,E)}function dt(Ct,Kt){if(H){var Ot=function(Wt){return Wt},St=Ot,Xe=Ot;R?Y("xanchor",E.xanchor=ye(fe+Ct)):(St=function(sr){return ye(ge(sr)+Ct)},ne&&ne.type==="date"&&(St=b.encodeDate(St))),O?Y("yanchor",E.yanchor=be(K+Kt)):(Xe=function(sr){return be(xe(sr)+Kt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",E.path=A(oe,St,Xe))}else if(z){if(Ve==="resize-over-start-point"){var at=ee+Ct,We=O?j-Kt:j+Kt;Y("x0",E.x0=R?at:ye(at)),Y("y0",E.y0=O?We:be(We))}else if(Ve==="resize-over-end-point"){var Ee=X+Ct,He=O?ae-Kt:ae+Kt;Y("x1",E.x1=R?Ee:ye(Ee)),Y("y1",E.y1=O?He:be(He))}}else{var Ke=function(Wt){return Ve.indexOf(Wt)!==-1},et=Ke("n"),At=Ke("s"),mt=Ke("w"),Mt=Ke("e"),Gt=et?J+Kt:J,zt=At?U+Kt:U,Ht=mt?V+Ct:V,Xt=Mt?q+Ct:q;O&&(et&&(Gt=J-Kt),At&&(zt=U-Kt)),(!O&&zt-Gt>D||O&&Gt-zt>D)&&(Y(re,E[re]=O?Gt:be(Gt)),Y(Z,E[Z]=O?zt:be(zt))),Xt-Ht>I&&(Y(Q,E[Q]=R?Ht:ye(Ht)),Y(ie,E[ie]=R?Xt:ye(Xt)))}L.attr("d",g(h,E)),Rt(P,E)}function Rt(Ct,Kt){(R||O)&&Ot();function Ot(){var St=Kt.type!=="path",Xe=Ct.selectAll(".visual-cue").data([0]),at=1;Xe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":at}).classed("visual-cue",!0);var We=ge(R?Kt.xanchor:f.midRange(St?[Kt.x0,Kt.x1]:b.extractPathCoords(Kt.path,o.paramIsX))),Ee=xe(O?Kt.yanchor:f.midRange(St?[Kt.y0,Kt.y1]:b.extractPathCoords(Kt.path,o.paramIsY)));if(We=b.roundPositionForSharpStrokeRendering(We,at),Ee=b.roundPositionForSharpStrokeRendering(Ee,at),R&&O){var He="M"+(We-1-at)+","+(Ee-1-at)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Xe.attr("d",He)}else if(R){var Ke="M"+(We-1-at)+","+(Ee-9-at)+"v18 h2 v-18 Z";Xe.attr("d",Ke)}else{var et="M"+(We-9-at)+","+(Ee-1-at)+"h18 v2 h-18 Z";Xe.attr("d",et)}}}function Qt(Ct){Ct.selectAll(".visual-cue").remove()}function Bt(Ct,Kt,Ot){var St=Kt.xref,Xe=Kt.yref,at=M.getFromId(Ot,St),We=M.getFromId(Ot,Xe),Ee="";St!=="paper"&&!at.autorange&&(Ee+=St),Xe!=="paper"&&!We.autorange&&(Ee+=Xe),n.setClipUrl(Ct,Ee?"clip"+Ot._fullLayout._uid+Ee:null,Ot)}}function A(h,L,E){return h.replace(o.segmentRE,function(S){var P=0,F=S.charAt(0),I=o.paramIsX[F],D=o.paramIsY[F],R=o.numParams[F],O=S.substr(1).replace(o.paramRE,function(z){return P>=R||(I[P]?z=L(z):D[P]&&(z=E(z)),P++),z});return F+O})}function _(h,L){if(!!m(h)){var E=L.node(),S=+E.getAttribute("data-index");if(S>=0){if(S===h._fullLayout._activeShapeIndex){p(h);return}h._fullLayout._activeShapeIndex=S,h._fullLayout._deactivateShape=p,d(h)}}}function p(h){if(!!m(h)){var L=h._fullLayout._activeShapeIndex;L>=0&&(a(h),delete h._fullLayout._activeShapeIndex,d(h))}}function w(h){if(!!m(h)){a(h);var L=h._fullLayout._activeShapeIndex,E=(h.layout||{}).shapes||[];if(L<E.length){for(var S=[],P=0;P<E.length;P++)P!==L&&S.push(E[P]);delete h._fullLayout._activeShapeIndex,x.call("_guiRelayout",h,{shapes:S})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(t,B,G){var x=t("../../drawing/attributes").dash,f=t("../../../lib/extend").extendFlat;B.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:f({},x,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(t,B,G){var x=32;B.exports={CIRCLE_SIDES:x,i000:0,i090:x/4,i180:x/2,i270:x/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(t,B,G){var x=t("../../color");B.exports=function(M,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var i=(M||{}).plot_bgcolor||"#FFF";e("newshape.line.color",x.contrast(i)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":367}],466:[function(t,B,G){var x=t("parse-svg-path"),f=t("./constants"),M=f.CIRCLE_SIDES,T=f.SQRT2,e=t("../../selections/helpers"),a=e.p2r,i=e.r2p,n=[0,3,4,5,6,1,2],r=[0,3,4,1,2];G.writePaths=function(o){var b=o.length;if(!b)return"M0,0Z";for(var g="",d=0;d<b;d++)for(var c=o[d].length,m=0;m<c;m++){var l=o[d][m][0];if(l==="Z")g+="Z";else for(var y=o[d][m].length,u=0;u<y;u++){var A=u;l==="Q"||l==="S"?A=r[u]:l==="C"&&(A=n[u]),g+=o[d][m][A],u>0&&u<y-1&&(g+=",")}}return g},G.readPaths=function(o,b,g,d){var c=x(o),m=[],l=-1,y=function(){l++,m[l]=[]},u,A=0,_=0,p,w,h=function(){p=A,w=_};h();for(var L=0;L<c.length;L++){var E=[],S,P,F,I,D=c[L][0],R=D;switch(D){case"M":y(),A=+c[L][1],_=+c[L][2],E.push([R,A,_]),h();break;case"Q":case"S":S=+c[L][1],F=+c[L][2],A=+c[L][3],_=+c[L][4],E.push([R,A,_,S,F]);break;case"C":S=+c[L][1],F=+c[L][2],P=+c[L][3],I=+c[L][4],A=+c[L][5],_=+c[L][6],E.push([R,A,_,S,F,P,I]);break;case"T":case"L":A=+c[L][1],_=+c[L][2],E.push([R,A,_]);break;case"H":R="L",A=+c[L][1],E.push([R,A,_]);break;case"V":R="L",_=+c[L][1],E.push([R,A,_]);break;case"A":R="L";var O=+c[L][1],z=+c[L][2];+c[L][4]||(O=-O,z=-z);var H=A-O,Y=_;for(u=1;u<=M/2;u++){var ee=2*Math.PI*u/M;E.push([R,H+O*Math.cos(ee),Y+z*Math.sin(ee)])}break;case"Z":(A!==p||_!==w)&&(A=p,_=w,E.push([R,A,_]));break}for(var j=(g||{}).domain,X=b._fullLayout._size,ae=g&&g.xsizemode==="pixel",fe=g&&g.ysizemode==="pixel",K=d===!1,J=0;J<E.length;J++){for(u=0;u+2<7;u+=2){var U=E[J][u+1],V=E[J][u+2];U===void 0||V===void 0||(A=U,_=V,g&&(g.xaxis&&g.xaxis.p2r?(K&&(U-=g.xaxis._offset),ae?U=i(g.xaxis,g.xanchor)+U:U=a(g.xaxis,U)):(K&&(U-=X.l),j?U=j.x[0]+U/X.w:U=U/X.w),g.yaxis&&g.yaxis.p2r?(K&&(V-=g.yaxis._offset),fe?V=i(g.yaxis,g.yanchor)-V:V=a(g.yaxis,V)):(K&&(V-=X.t),j?V=j.y[1]-V/X.h:V=1-V/X.h)),E[J][u+1]=U,E[J][u+2]=V)}m[l].push(E[J].slice())}}return m};function v(o,b){return Math.abs(o-b)<=1e-6}function s(o,b){var g=b[1]-o[1],d=b[2]-o[2];return Math.sqrt(g*g+d*d)}G.pointsOnRectangle=function(o){var b=o.length;if(b!==5)return!1;for(var g=1;g<3;g++){var d=o[0][g]-o[1][g],c=o[3][g]-o[2][g];if(!v(d,c))return!1;var m=o[0][g]-o[3][g],l=o[1][g]-o[2][g];if(!v(m,l))return!1}return!v(o[0][1],o[1][1])&&!v(o[0][1],o[3][1])?!1:!!(s(o[0],o[1])*s(o[0],o[3]))},G.pointsOnEllipse=function(o){var b=o.length;if(b!==M+1)return!1;b=M;for(var g=0;g<b;g++){var d=(b*2-g)%b,c=(b/2+d)%b,m=(b/2+g)%b;if(!v(s(o[g],o[m]),s(o[d],o[c])))return!1}return!0},G.handleEllipse=function(o,b,g){if(!o)return[b,g];var d=G.ellipseOver({x0:b[0],y0:b[1],x1:g[0],y1:g[1]}),c=(d.x1+d.x0)/2,m=(d.y1+d.y0)/2,l=(d.x1-d.x0)/2,y=(d.y1-d.y0)/2;l||(l=y=y/T),y||(y=l=l/T);for(var u=[],A=0;A<M;A++){var _=A*2*Math.PI/M;u.push([c+l*Math.cos(_),m+y*Math.sin(_)])}return u},G.ellipseOver=function(o){var b=o.x0,g=o.y0,d=o.x1,c=o.y1,m=d-b,l=c-g;b-=m,g-=l;var y=(b+d)/2,u=(g+c)/2,A=T;return m*=A,l*=A,{x0:y-m,y0:u-l,x1:y+m,y1:u+l}},G.fixDatesForPaths=function(o,b,g){var d=b.type==="date",c=g.type==="date";if(!d&&!c)return o;for(var m=0;m<o.length;m++)for(var l=0;l<o[m].length;l++)for(var y=0;y+2<o[m][l].length;y+=2)d&&(o[m][l][y+1]=o[m][l][y+1].replace(" ","_")),c&&(o[m][l][y+2]=o[m][l][y+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(t,B,G){var x=t("../../dragelement/helpers"),f=x.drawMode,M=x.openMode,T=t("./constants"),e=T.i000,a=T.i090,i=T.i180,n=T.i270,r=T.cos45,v=T.sin45,s=t("../../selections/helpers"),o=s.p2r,b=s.r2p,g=t(".././handle_outline"),d=g.clearOutline,c=t("./helpers"),m=c.readPaths,l=c.writePaths,y=c.ellipseOver,u=c.fixDatesForPaths;B.exports=function(_,p){if(!!_.length){var w=_[0][0];if(!!w){var h=w.getAttribute("d"),L=p.gd,E=L._fullLayout.newshape,S=p.plotinfo,P=S.xaxis,F=S.yaxis,I=!!S.domain||!S.xaxis,D=!!S.domain||!S.yaxis,R=p.isActiveShape,O=p.dragmode,z=(L.layout||{}).shapes||[];if(!f(O)&&R!==void 0){var H=L._fullLayout._activeShapeIndex;if(H<z.length)switch(L._fullLayout.shapes[H].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var Y=z[H].path||"";Y[Y.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var ee=M(O),j=m(h,L,S,R),X={editable:!0,xref:I?"paper":P._id,yref:D?"paper":F._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};ee||(X.fillcolor=E.fillcolor,X.fillrule=E.fillrule);var ae;if(j.length===1&&(ae=j[0]),ae&&ae.length===5&&O==="drawrect")X.type="rect",X.x0=ae[0][1],X.y0=ae[0][2],X.x1=ae[2][1],X.y1=ae[2][2];else if(ae&&O==="drawline")X.type="line",X.x0=ae[0][1],X.y0=ae[0][2],X.x1=ae[1][1],X.y1=ae[1][2];else if(ae&&O==="drawcircle"){X.type="circle";var fe=ae[e][1],K=ae[a][1],J=ae[i][1],U=ae[n][1],V=ae[e][2],q=ae[a][2],re=ae[i][2],Z=ae[n][2],Q=S.xaxis&&(S.xaxis.type==="date"||S.xaxis.type==="log"),ie=S.yaxis&&(S.yaxis.type==="date"||S.yaxis.type==="log");Q&&(fe=b(S.xaxis,fe),K=b(S.xaxis,K),J=b(S.xaxis,J),U=b(S.xaxis,U)),ie&&(V=b(S.yaxis,V),q=b(S.yaxis,q),re=b(S.yaxis,re),Z=b(S.yaxis,Z));var oe=(K+U)/2,ne=(V+re)/2,se=(U-K+J-fe)/2,_e=(Z-q+re-V)/2,ue=y({x0:oe,y0:ne,x1:oe+se*r,y1:ne+_e*v});Q&&(ue.x0=o(S.xaxis,ue.x0),ue.x1=o(S.xaxis,ue.x1)),ie&&(ue.y0=o(S.yaxis,ue.y0),ue.y1=o(S.yaxis,ue.y1)),X.x0=ue.x0,X.y0=ue.y0,X.x1=ue.x1,X.y1=ue.y1}else X.type="path",P&&F&&u(j,P,F),X.path=l(j),ae=null;d(L);for(var ge=p.editHelpers,xe=(ge||{}).modifyItem,ye=[],be=0;be<z.length;be++){var Se=L._fullLayout.shapes[be];if(ye[be]=Se._input,R!==void 0&&be===L._fullLayout._activeShapeIndex){var Re=X;switch(Se.type){case"line":case"rect":case"circle":xe("x0",Re.x0),xe("x1",Re.x1),xe("y0",Re.y0),xe("y1",Re.y1);break;case"path":xe("path",Re.path);break}}}return R===void 0?(ye.push(X),ye):ge?ge.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(t,B,G){function x(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function f(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),M._fullLayout._outlining=!1}B.exports={clearOutlineControllers:x,clearOutline:f}},{}],469:[function(t,B,G){var x=t("./constants"),f=t("../../lib"),M=t("../../plots/cartesian/axes");G.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(a){return a}},G.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(a){return a}},G.decodeDate=function(e){return function(a){return a.replace&&(a=a.replace("_"," ")),e(a)}},G.encodeDate=function(e){return function(a){return e(a).replace(" ","_")}},G.extractPathCoords=function(e,a,i){var n=[],r=e.match(x.segmentRE);return r.forEach(function(v){var s=a[v.charAt(0)].drawn;if(s!==void 0){var o=v.substr(1).match(x.paramRE);if(!(!o||o.length<s)){var b=o[s],g=i?b:f.cleanNumber(b);n.push(g)}}}),n},G.getDataToPixel=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){return a._length*(i?1-o:o)+a._offset};else{var s=G.shapePositionToRange(a);v=function(o){return a._offset+a.r2p(s(o,!0))},a.type==="date"&&(v=G.decodeDate(v))}else i?v=function(o){return r.t+r.h*(1-o)}:v=function(o){return r.l+r.w*o};return v},G.getPixelToData=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){var b=(o-a._offset)/a._length;return i?1-b:b};else{var s=G.rangeToShapePosition(a);v=function(o){return s(a.p2r(o-a._offset))}}else i?v=function(o){return 1-(o-r.t)/r.h}:v=function(o){return(o-r.l)/r.w};return v},G.roundPositionForSharpStrokeRendering=function(e,a){var i=Math.round(a%2)===1,n=Math.round(e);return i?n+.5:n},G.makeShapesOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.shapes[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&i.xref!=="paper"&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&i.yref!=="paper"&&(n.yaxis=e._fullLayout[i.yref+"axis"])),n.xsizemode=i.xsizemode,n.ysizemode=i.ysizemode,n.xanchor=i.xanchor,n.yanchor=i.yanchor,{options:i,plotinfo:n}},G.makeSelectionsOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.selections[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&(n.yaxis=e._fullLayout[i.yref+"axis"])),{options:i,plotinfo:n}},G.getPathString=function(e,a){var i=a.type,n=M.getRefType(a.xref),r=M.getRefType(a.yref),v=M.getFromId(e,a.xref),s=M.getFromId(e,a.yref),o=e._fullLayout._size,b,g,d,c,m,l,y,u;if(v?n==="domain"?g=function(F){return v._offset+v._length*F}:(b=G.shapePositionToRange(v),g=function(F){return v._offset+v.r2p(b(F,!0))}):g=function(F){return o.l+o.w*F},s?r==="domain"?c=function(F){return s._offset+s._length*(1-F)}:(d=G.shapePositionToRange(s),c=function(F){return s._offset+s.r2p(d(F,!0))}):c=function(F){return o.t+o.h*(1-F)},i==="path")return v&&v.type==="date"&&(g=G.decodeDate(g)),s&&s.type==="date"&&(c=G.decodeDate(c)),T(a,g,c);if(a.xsizemode==="pixel"){var A=g(a.xanchor);m=A+a.x0,l=A+a.x1}else m=g(a.x0),l=g(a.x1);if(a.ysizemode==="pixel"){var _=c(a.yanchor);y=_-a.y0,u=_-a.y1}else y=c(a.y0),u=c(a.y1);if(i==="line")return"M"+m+","+y+"L"+l+","+u;if(i==="rect")return"M"+m+","+y+"H"+l+"V"+u+"H"+m+"Z";var p=(m+l)/2,w=(y+u)/2,h=Math.abs(p-m),L=Math.abs(w-y),E="A"+h+","+L,S=p+h+","+w,P=p+","+(w-L);return"M"+S+E+" 0 1,1 "+P+E+" 0 0,1 "+S+"Z"};function T(e,a,i){var n=e.path,r=e.xsizemode,v=e.ysizemode,s=e.xanchor,o=e.yanchor;return n.replace(x.segmentRE,function(b){var g=0,d=b.charAt(0),c=x.paramIsX[d],m=x.paramIsY[d],l=x.numParams[d],y=b.substr(1).replace(x.paramRE,function(u){return c[g]?r==="pixel"?u=a(s)+Number(u):u=a(u):m[g]&&(v==="pixel"?u=i(o)-Number(u):u=i(u)),g++,g>l&&(u="X"),u});return g>l&&(y=y.replace(/[\s,]*X.*/,""),f.log("Ignoring extra params in segment "+b)),d+y})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(t,B,G){var x=t("./draw");B.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:x.draw,drawOne:x.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("../../plots/pad_attributes"),M=t("../../lib/extend").extendDeepAll,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/animation_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=t("./constants"),n=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});B.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:M(f({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:x({})},font:x({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(t,B,G){B.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/array_container_defaults"),M=t("./attributes"),T=t("./constants"),e=T.name,a=M.steps;B.exports=function(v,s){f(v,s,{name:e,handleItemDefaults:i})};function i(r,v,s){function o(u,A){return x.coerce(r,v,M,u,A)}for(var b=f(r,v,{name:"steps",handleItemDefaults:n}),g=0,d=0;d<b.length;d++)b[d].visible&&g++;var c;if(g<2?c=v.visible=!1:c=o("visible"),!!c){v._stepCount=g;var m=v._visibleSteps=x.filterVisible(b),l=o("active");(b[l]||{}).visible||(v.active=m[0]._index),o("x"),o("y"),x.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),x.coerceFont(o,"font",s.font);var y=o("currentvalue.visible");y&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),x.coerceFont(o,"currentvalue.font",v.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function n(r,v){function s(g,d){return x.coerce(r,v,a,g,d)}var o;if(r.method!=="skip"&&!Array.isArray(r.args)?o=v.visible=!1:o=s("visible"),o){s("method"),s("args");var b=s("label","step-"+v._index);s("value",b),s("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../plots/plots"),M=t("../color"),T=t("../drawing"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../plot_api/plot_template").arrayEditor,r=t("./constants"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR;B.exports=function(O){var z=O._fullLayout,H=d(z,O),Y=z._infolayer.selectAll("g."+r.containerClassName).data(H.length>0?[0]:[]);Y.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function ee(fe){fe._commandObserver&&(fe._commandObserver.remove(),delete fe._commandObserver),f.autoMargin(O,g(fe))}if(Y.exit().each(function(){x.select(this).selectAll("g."+r.groupClassName).each(ee)}).remove(),H.length!==0){var j=Y.selectAll("g."+r.groupClassName).data(H,c);j.enter().append("g").classed(r.groupClassName,!0),j.exit().each(ee).remove();for(var X=0;X<H.length;X++){var ae=H[X];m(O,ae)}j.each(function(fe){var K=x.select(this);E(fe),f.manageCommandObserver(O,fe,fe._visibleSteps,function(J){var U=K.data()[0];U.active!==J.index&&(U._dragging||w(O,K,U,J.index,!1,!0))}),l(O,x.select(this),fe)})}};function g(R){return r.autoMarginIdRoot+R._index}function d(R,O){for(var z=R[r.name],H=[],Y=0;Y<z.length;Y++){var ee=z[Y];!ee.visible||(ee._gd=O,H.push(ee))}return H}function c(R){return R._index}function m(R,O){var z=T.tester.selectAll("g."+r.labelGroupClass).data(O._visibleSteps);z.enter().append("g").classed(r.labelGroupClass,!0);var H=0,Y=0;z.each(function(q){var re=x.select(this),Z=A(re,{step:q},O),Q=Z.node();if(Q){var ie=T.bBox(Q);Y=Math.max(Y,ie.height),H=Math.max(H,ie.width)}}),z.remove();var ee=O._dims={};ee.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var j=R._fullLayout._size;ee.lx=j.l+j.w*O.x,ee.ly=j.t+j.h*(1-O.y),O.lenmode==="fraction"?ee.outerLength=Math.round(j.w*O.len):ee.outerLength=O.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-O.pad.l-O.pad.r);var X=ee.inputAreaLength-2*r.stepInset,ae=X/(O._stepCount-1),fe=H+r.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(fe/ae)),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,O.currentvalue.visible){var K=T.tester.append("g");z.each(function(q){var re=y(K,O,q.label),Z=re.node()&&T.bBox(re.node())||{width:0,height:0},Q=i.lineCount(re);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(Z.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(Z.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,Q)}),ee.currentValueTotalHeight=ee.currentValueHeight+O.currentvalue.offset,K.remove()}ee.height=ee.currentValueTotalHeight+r.tickOffset+O.ticklen+r.labelOffset+ee.labelHeight+O.pad.t+O.pad.b;var J="left";e.isRightAnchor(O)&&(ee.lx-=ee.outerLength,J="right"),e.isCenterAnchor(O)&&(ee.lx-=ee.outerLength/2,J="center");var U="top";e.isBottomAnchor(O)&&(ee.ly-=ee.height,U="bottom"),e.isMiddleAnchor(O)&&(ee.ly-=ee.height/2,U="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var V={y:O.y,b:ee.height*b[U],t:ee.height*o[U]};O.lenmode==="fraction"?(V.l=0,V.xl=O.x-O.len*o[J],V.r=0,V.xr=O.x+O.len*b[J]):(V.x=O.x,V.l=ee.outerLength*o[J],V.r=ee.outerLength*b[J]),f.autoMargin(R,g(O),V)}function l(R,O,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),O.call(y,z).call(D,z).call(_,z).call(L,z).call(I,R,z).call(u,R,z);var H=z._dims;T.setTranslate(O,H.lx+z.pad.l,H.ly+z.pad.t),O.call(S,z,!1),O.call(y,z)}function y(R,O,z){if(!!O.currentvalue.visible){var H=O._dims,Y,ee;switch(O.currentvalue.xanchor){case"right":Y=H.inputAreaLength-r.currentValueInset-H.currentValueMaxWidth,ee="left";break;case"center":Y=H.inputAreaLength*.5,ee="middle";break;default:Y=r.currentValueInset,ee="left"}var j=e.ensureSingle(R,"text",r.labelClass,function(U){U.attr({"text-anchor":ee,"data-notex":1})}),X=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof z=="string")X+=z;else{var ae=O.steps[O.active].label,fe=O._gd._fullLayout._meta;fe&&(ae=e.templateString(ae,fe)),X+=ae}O.currentvalue.suffix&&(X+=O.currentvalue.suffix),j.call(T.font,O.currentvalue.font).text(X).call(i.convertToTspans,O._gd);var K=i.lineCount(j),J=(H.currentValueMaxLines+1-K)*O.currentvalue.font.size*s;return i.positionText(j,Y,J),j}}function u(R,O,z){var H=e.ensureSingle(R,"rect",r.gripRectClass,function(Y){Y.call(h,O,R,z).style("pointer-events","all")});H.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(M.stroke,z.bordercolor).call(M.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function A(R,O,z){var H=e.ensureSingle(R,"text",r.labelClass,function(j){j.attr({"text-anchor":"middle","data-notex":1})}),Y=O.step.label,ee=z._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),H.call(T.font,z.font).text(Y).call(i.convertToTspans,z._gd),H}function _(R,O){var z=e.ensureSingle(R,"g",r.labelsClass),H=O._dims,Y=z.selectAll("g."+r.labelGroupClass).data(H.labelSteps);Y.enter().append("g").classed(r.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var j=x.select(this);j.call(A,ee,O),T.setTranslate(j,P(O,ee.fraction),r.tickOffset+O.ticklen+O.font.size*s+r.labelOffset+H.currentValueTotalHeight)})}function p(R,O,z,H,Y){var ee=Math.round(H*(z._stepCount-1)),j=z._visibleSteps[ee]._index;j!==z.active&&w(R,O,z,j,!0,Y)}function w(R,O,z,H,Y,ee){var j=z.active;z.active=H,n(R.layout,r.name,z).applyUpdate("active",H);var X=z.steps[z.active];O.call(S,z,ee),O.call(y,z),R.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:Y,previousActive:j}),X&&X.method&&Y&&(O._nextMethod?(O._nextMethod.step=X,O._nextMethod.doCallback=Y,O._nextMethod.doTransition=ee):(O._nextMethod={step:X,doCallback:Y,doTransition:ee},O._nextMethodRaf=window.requestAnimationFrame(function(){var ae=O._nextMethod.step;!ae.method||(ae.execute&&f.executeAPICommand(R,ae.method,ae.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function h(R,O,z){var H=z.node(),Y=x.select(O);function ee(){return z.data()[0]}function j(){var X=ee();O.emit("plotly_sliderstart",{slider:X});var ae=z.select("."+r.gripRectClass);x.event.stopPropagation(),x.event.preventDefault(),ae.call(M.fill,X.activebgcolor);var fe=F(X,x.mouse(H)[0]);p(O,z,X,fe,!0),X._dragging=!0;function K(){var U=ee(),V=F(U,x.mouse(H)[0]);p(O,z,U,V,!1)}Y.on("mousemove",K),Y.on("touchmove",K);function J(){var U=ee();U._dragging=!1,ae.call(M.fill,U.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),O.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}Y.on("mouseup",J),Y.on("touchend",J)}R.on("mousedown",j),R.on("touchstart",j)}function L(R,O){var z=R.selectAll("rect."+r.tickRectClass).data(O._visibleSteps),H=O._dims;z.enter().append("rect").classed(r.tickRectClass,!0),z.exit().remove(),z.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(Y,ee){var j=ee%H.labelStride===0,X=x.select(this);X.attr({height:j?O.ticklen:O.minorticklen}).call(M.fill,O.tickcolor),T.setTranslate(X,P(O,ee/(O._stepCount-1))-.5*O.tickwidth,(j?r.tickOffset:r.minorTickOffset)+H.currentValueTotalHeight)})}function E(R){var O=R._dims;O.labelSteps=[];for(var z=R._stepCount,H=0;H<z;H+=O.labelStride)O.labelSteps.push({fraction:H/(z-1),step:R._visibleSteps[H]})}function S(R,O,z){for(var H=R.select("rect."+r.gripRectClass),Y=0,ee=0;ee<O._stepCount;ee++)if(O._visibleSteps[ee]._index===O.active){Y=ee;break}var j=P(O,Y/(O._stepCount-1));if(!O._invokingCommand){var X=H;z&&O.transition.duration>0&&(X=X.transition().duration(O.transition.duration).ease(O.transition.easing)),X.attr("transform",a(j-r.gripWidth*.5,O._dims.currentValueTotalHeight))}}function P(R,O){var z=R._dims;return z.inputAreaStart+r.stepInset+(z.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,O))}function F(R,O){var z=R._dims;return Math.min(1,Math.max(0,(O-r.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*r.stepInset-2*z.inputAreaStart)))}function I(R,O,z){var H=z._dims,Y=e.ensureSingle(R,"rect",r.railTouchRectClass,function(ee){ee.call(h,O,R,z).style("pointer-events","all")});Y.attr({width:H.inputAreaLength,height:Math.max(H.inputAreaWidth,r.tickOffset+z.ticklen+H.labelHeight)}).call(M.fill,z.bgcolor).attr("opacity",0),T.setTranslate(Y,0,H.currentValueTotalHeight)}function D(R,O){var z=O._dims,H=z.inputAreaLength-r.railInset*2,Y=e.ensureSingle(R,"rect",r.railRectClass);Y.attr({width:H,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(M.stroke,O.bordercolor).call(M.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),T.setTranslate(Y,r.railInset,(z.inputAreaWidth-r.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(t,B,G){var x=t("./constants");B.exports={moduleType:"component",name:x.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("../../constants/interactions"),s=t("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function b(g,d,c){var m=c.propContainer,l=c.propName,y=c.placeholder,u=c.traceIndex,A=c.avoid||{},_=c.attributes,p=c.transform,w=c.containerGroup,h=g._fullLayout,L=1,E=!1,S=m.title,P=(S&&S.text?S.text:"").trim(),F=S&&S.font?S.font:{},I=F.family,D=F.size,R=F.color,O;l==="title.text"?O="titleText":l.indexOf("axis")!==-1?O="axisTitleText":l.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var z=g._context.edits[O];P===""?L=0:P.replace(o," % ")===y.replace(o," % ")&&(L=.2,E=!0,z||(P="")),c._meta?P=e.templateString(P,c._meta):h._meta&&(P=e.templateString(P,h._meta));var H=P||z,Y;w||(w=e.ensureSingle(h._infolayer,"g","g-"+d),Y=h._hColorbarMoveTitle);var ee=w.selectAll("text").data(H?[0]:[]);if(ee.enter().append("text"),ee.text(P).attr("class",d),ee.exit().remove(),!H)return w;function j(K){e.syncOrAsync([X,ae],K)}function X(K){var J;return!p&&Y&&(p={}),p?(J="",p.rotate&&(J+="rotate("+[p.rotate,_.x,_.y]+")"),(p.offset||Y)&&(J+=a(0,(p.offset||0)-(Y||0)))):J=null,K.attr("transform",J),K.style({"font-family":I,"font-size":x.round(D,2)+"px",fill:n.rgb(R),opacity:L*n.opacity(R),"font-weight":M.fontWeight}).attr(_).call(r.convertToTspans,g),M.previousPromises(g)}function ae(K){var J=x.select(K.node().parentNode);if(A&&A.selection&&A.side&&P){J.attr("transform",null);var U=s[A.side],V=A.side==="left"||A.side==="top"?-1:1,q=f(A.pad)?A.pad:2,re=i.bBox(J.node()),Z={left:0,top:0,right:h.width,bottom:h.height},Q=A.maxShift||V*(Z[A.side]-re[A.side]),ie=0;if(Q<0)ie=Q;else{var oe=A.offsetLeft||0,ne=A.offsetTop||0;re.left-=oe,re.right-=oe,re.top-=ne,re.bottom-=ne,A.selection.each(function(){var _e=i.bBox(this);e.bBoxIntersect(re,_e,q)&&(ie=Math.max(ie,V*(_e[A.side]-re[U])+q))}),ie=Math.min(Q,ie)}if(ie>0||Q<0){var se={left:[-ie,0],right:[ie,0],top:[0,-ie],bottom:[0,ie]}[A.side];J.attr("transform",a(se[0],se[1]))}}}ee.call(j);function fe(){L=0,E=!0,ee.text(y).on("mouseover.opacity",function(){x.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){x.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(P?ee.on(".opacity",null):fe(),ee.call(r.makeEditable,{gd:g}).on("edit",function(K){u!==void 0?T.call("_guiRestyle",g,l,K,u):T.call("_guiRelayout",g,l,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(j)}).on("input",function(K){this.text(K||" ").call(r.positionText,_.x,_.y)})),ee.classed("js-placeholder",E),w}B.exports={draw:b}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("../color/attributes"),M=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/pad_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});B.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:M(e({editType:"arraydraw"}),{}),font:x({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:f.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(t,B,G){B.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/array_container_defaults"),M=t("./attributes"),T=t("./constants"),e=T.name,a=M.buttons;B.exports=function(v,s){var o={name:e,handleItemDefaults:i};f(v,s,o)};function i(r,v,s){function o(d,c){return x.coerce(r,v,M,d,c)}var b=f(r,v,{name:"buttons",handleItemDefaults:n}),g=o("visible",b.length>0);!g||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),x.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),x.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function n(r,v){function s(b,g){return x.coerce(r,v,a,b,g)}var o=s("visible",r.method==="skip"||Array.isArray(r.args));o&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../plots/plots"),M=t("../color"),T=t("../drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../../plot_api/plot_template").arrayEditor,n=t("../../constants/alignment").LINE_SPACING,r=t("./constants"),v=t("./scrollbox");B.exports=function(F){var I=F._fullLayout,D=e.filterVisible(I[r.name]);function R(ae){f.autoMargin(F,L(ae))}var O=I._menulayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);if(O.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){x.select(this).selectAll("g."+r.headerGroupClassName).each(R)}).remove(),D.length!==0){var z=O.selectAll("g."+r.headerGroupClassName).data(D,s);z.enter().append("g").classed(r.headerGroupClassName,!0);for(var H=e.ensureSingle(O,"g",r.dropdownButtonGroupClassName,function(ae){ae.style("pointer-events","all")}),Y=0;Y<D.length;Y++){var ee=D[Y];h(F,ee)}var j="updatemenus"+I._uid,X=new v(F,H,j);z.enter().size()&&(H.node().parentNode.appendChild(H.node()),H.call(S)),z.exit().each(function(ae){H.call(S),R(ae)}).remove(),z.each(function(ae){var fe=x.select(this),K=ae.type==="dropdown"?H:null;f.manageCommandObserver(F,ae,ae.buttons,function(J){g(F,ae,ae.buttons[J.index],fe,K,X,J.index,!0)}),ae.type==="dropdown"?(d(F,fe,H,X,ae),b(H,ae)&&c(F,fe,H,X,ae)):c(F,fe,null,null,ae)})}};function s(P){return P._index}function o(P){return+P.attr(r.menuIndexAttrName)==-1}function b(P,F){return+P.attr(r.menuIndexAttrName)===F._index}function g(P,F,I,D,R,O,z,H){F.active=z,i(P.layout,r.name,F).applyUpdate("active",z),F.type==="buttons"?c(P,D,null,null,F):F.type==="dropdown"&&(R.attr(r.menuIndexAttrName,"-1"),d(P,D,R,O,F),H||c(P,D,R,O,F))}function d(P,F,I,D,R){var O=e.ensureSingle(F,"g",r.headerClassName,function(ae){ae.style("pointer-events","all")}),z=R._dims,H=R.active,Y=R.buttons[H]||r.blankHeaderOpts,ee={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},j={width:z.headerWidth,height:z.headerHeight};O.call(y,R,Y,P).call(E,R,ee,j);var X=e.ensureSingle(F,"text",r.headerArrowClassName,function(ae){ae.attr("text-anchor","end").call(T.font,R.font).text(r.arrowSymbol[R.direction])});X.attr({x:z.headerWidth-r.arrowOffsetX+R.pad.l,y:z.headerHeight/2+r.textOffsetY+R.pad.t}),O.on("click",function(){I.call(S,String(b(I,R)?-1:R._index)),c(P,F,I,D,R)}),O.on("mouseover",function(){O.call(p)}),O.on("mouseout",function(){O.call(w,R)}),T.setTranslate(F,z.lx,z.ly)}function c(P,F,I,D,R){I||(I=F,I.attr("pointer-events","all"));var O=!o(I)||R.type==="buttons"?R.buttons:[],z=R.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,H=I.selectAll("g."+z).data(e.filterVisible(O)),Y=H.enter().append("g").classed(z,!0),ee=H.exit();R.type==="dropdown"?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var j=0,X=0,ae=R._dims,fe=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(fe?X=ae.headerHeight+r.gapButtonHeader:j=ae.headerWidth+r.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(X=-r.gapButtonHeader+r.gapButton-ae.openHeight),R.type==="dropdown"&&R.direction==="left"&&(j=-r.gapButtonHeader+r.gapButton-ae.openWidth);var K={x:ae.lx+j+R.pad.l,y:ae.ly+X+R.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},J={l:K.x+R.borderwidth,t:K.y+R.borderwidth};H.each(function(U,V){var q=x.select(this);q.call(y,R,U,P).call(E,R,K),q.on("click",function(){x.event.defaultPrevented||(U.execute&&(U.args2&&R.active===V?(g(P,R,U,F,I,D,-1),f.executeAPICommand(P,U.method,U.args2)):(g(P,R,U,F,I,D,V),f.executeAPICommand(P,U.method,U.args))),P.emit("plotly_buttonclicked",{menu:R,button:U,active:R.active}))}),q.on("mouseover",function(){q.call(p)}),q.on("mouseout",function(){q.call(w,R),H.call(_,R)})}),H.call(_,R),fe?(J.w=Math.max(ae.openWidth,ae.headerWidth),J.h=K.y-J.t):(J.w=K.x-J.l,J.h=Math.max(ae.openHeight,ae.headerHeight)),J.direction=R.direction,D&&(H.size()?m(P,F,I,D,R,J):l(D))}function m(P,F,I,D,R,O){var z=R.direction,H=z==="up"||z==="down",Y=R._dims,ee=R.active,j,X,ae;if(H)for(X=0,ae=0;ae<ee;ae++)X+=Y.heights[ae]+r.gapButton;else for(j=0,ae=0;ae<ee;ae++)j+=Y.widths[ae]+r.gapButton;D.enable(O,j,X),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(P){var F=!!P.hbar,I=!!P.vbar;F&&P.hbar.transition().attr("opacity","0").each("end",function(){F=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,F||P.disable()})}function y(P,F,I,D){P.call(u,F).call(A,F,I,D)}function u(P,F){var I=e.ensureSingle(P,"rect",r.itemRectClassName,function(D){D.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});I.call(M.stroke,F.bordercolor).call(M.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function A(P,F,I,D){var R=e.ensureSingle(P,"text",r.itemTextClassName,function(H){H.attr({"text-anchor":"start","data-notex":1})}),O=I.label,z=D._fullLayout._meta;z&&(O=e.templateString(O,z)),R.call(T.font,F.font).text(O).call(a.convertToTspans,D)}function _(P,F){var I=F.active;P.each(function(D,R){var O=x.select(this);R===I&&F.showactive&&O.select("rect."+r.itemRectClassName).call(M.fill,r.activeColor)})}function p(P){P.select("rect."+r.itemRectClassName).call(M.fill,r.hoverColor)}function w(P,F){P.select("rect."+r.itemRectClassName).call(M.fill,F.bgcolor)}function h(P,F){var I=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(r.dropdownButtonClassName,!0);var R=["up","down"].indexOf(F.direction)!==-1;D.each(function(j,X){var ae=x.select(this);ae.call(y,F,j,P);var fe=ae.select("."+r.itemTextClassName),K=fe.node()&&T.bBox(fe.node()).width,J=Math.max(K+r.textPadX,r.minWidth),U=F.font.size*n,V=a.lineCount(fe),q=Math.max(U*V,r.minHeight)+r.textOffsetY;q=Math.ceil(q),J=Math.ceil(J),I.widths[X]=J,I.heights[X]=q,I.height1=Math.max(I.height1,q),I.width1=Math.max(I.width1,J),R?(I.totalWidth=Math.max(I.totalWidth,J),I.openWidth=I.totalWidth,I.totalHeight+=q+r.gapButton,I.openHeight+=q+r.gapButton):(I.totalWidth+=J+r.gapButton,I.openWidth+=J+r.gapButton,I.totalHeight=Math.max(I.totalHeight,q),I.openHeight=I.totalHeight)}),R?I.totalHeight-=r.gapButton:I.totalWidth-=r.gapButton,I.headerWidth=I.width1+r.arrowPadX,I.headerHeight=I.height1,F.type==="dropdown"&&(R?(I.width1+=r.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=r.arrowPadX),D.remove();var O=I.totalWidth+F.pad.l+F.pad.r,z=I.totalHeight+F.pad.t+F.pad.b,H=P._fullLayout._size;I.lx=H.l+H.w*F.x,I.ly=H.t+H.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(I.lx-=O,Y="right"),e.isCenterAnchor(F)&&(I.lx-=O/2,Y="center");var ee="top";e.isBottomAnchor(F)&&(I.ly-=z,ee="bottom"),e.isMiddleAnchor(F)&&(I.ly-=z/2,ee="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),f.autoMargin(P,L(F),{x:F.x,y:F.y,l:O*({right:1,center:.5}[Y]||0),r:O*({left:1,center:.5}[Y]||0),b:z*({top:1,middle:.5}[ee]||0),t:z*({bottom:1,middle:.5}[ee]||0)})}function L(P){return r.autoMarginIdRoot+P._index}function E(P,F,I,D){D=D||{};var R=P.select("."+r.itemRectClassName),O=P.select("."+r.itemTextClassName),z=F.borderwidth,H=I.index,Y=F._dims;T.setTranslate(P,z+I.x,z+I.y);var ee=["up","down"].indexOf(F.direction)!==-1,j=D.height||(ee?Y.heights[H]:Y.height1);R.attr({x:0,y:0,width:D.width||(ee?Y.width1:Y.widths[H]),height:j});var X=F.font.size*n,ae=a.lineCount(O),fe=(ae-1)*X/2;a.positionText(O,r.textOffsetX,j/2-fe+r.textOffsetY),ee?I.y+=Y.heights[H]+I.yPad:I.x+=Y.widths[H]+I.xPad,I.index++}function S(P,F){P.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(t,B,G){arguments[4][475][0].apply(G,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(t,B,G){B.exports=e;var x=t("@plotly/d3"),f=t("../color"),M=t("../drawing"),T=t("../../lib");function e(a,i,n){this.gd=a,this.container=i,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(i,n,r){var v=this.gd._fullLayout,s=v.width,o=v.height;this.position=i;var b=this.position.l,g=this.position.w,d=this.position.t,c=this.position.h,m=this.position.direction,l=m==="down",y=m==="left",u=m==="right",A=m==="up",_=g,p=c,w,h,L,E;!l&&!y&&!u&&!A&&(this.position.direction="down",l=!0);var S=l||A;S?(w=b,h=w+_,l?(L=d,E=Math.min(L+p,o),p=E-L):(E=d+p,L=Math.max(E-p,0),p=E-L)):(L=d,E=L+p,y?(h=b+_,w=Math.max(h-_,0),_=h-w):(w=b,h=Math.min(w+_,s),_=h-w)),this._box={l:w,t:L,w:_,h:p};var P=g>_,F=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=b,R=d+c;R+I>o&&(R=o-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(f.fill,e.barColor),P?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:F,height:I}),this._hbarXMin=D+F/2,this._hbarTranslateMax=_-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=c>p,H=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=b+g,j=d;ee+H>s&&(ee=s-H);var X=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(f.fill,e.barColor),z?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:j,width:H,height:Y}),this._vbarYMin=j+Y/2,this._vbarTranslateMax=p-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ae=this.id,fe=w-.5,K=z?h+H+.5:h+.5,J=L-.5,U=P?E+I+.5:E+.5,V=v._topdefs.selectAll("#"+ae).data(P||z?[0]:[]);if(V.exit().remove(),V.enter().append("clipPath").attr("id",ae).append("rect"),P||z?(this._clipRect=V.select("rect").attr({x:Math.floor(fe),y:Math.floor(J),width:Math.ceil(K)-Math.floor(fe),height:Math.ceil(U)-Math.floor(J)}),this.container.call(M.setClipUrl,ae,this.gd),this.bg.attr({x:b,y:d,width:g,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),P||z){var q=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var re=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault(),x.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(re),z&&this.vbar.on(".drag",null).call(re)}this.setTranslate(n,r)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i-=x.event.dx),this.vbar&&(n-=x.event.dy),this.setTranslate(i,n)},e.prototype._onBoxWheel=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i+=x.event.deltaY),this.vbar&&(n+=x.event.deltaY),this.setTranslate(i,n)},e.prototype._onBarDrag=function(){var i=this.translateX,n=this.translateY;if(this.hbar){var r=i+this._hbarXMin,v=r+this._hbarTranslateMax,s=T.constrain(x.event.x,r,v),o=(s-r)/(v-r),b=this.position.w-this._box.w;i=o*b}if(this.vbar){var g=n+this._vbarYMin,d=g+this._vbarTranslateMax,c=T.constrain(x.event.y,g,d),m=(c-g)/(d-g),l=this.position.h-this._box.h;n=m*l}this.setTranslate(i,n)},e.prototype.setTranslate=function(i,n){var r=this.position.w-this._box.w,v=this.position.h-this._box.h;if(i=T.constrain(i||0,0,r),n=T.constrain(n||0,0,v),this.translateX=i,this.translateY=n,this.container.call(M.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var s=i/r;this.hbar.call(M.setTranslate,i+s*this._hbarTranslateMax,n)}if(this.vbar){var o=n/v;this.vbar.call(M.setTranslate,i,n+o*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(t,B,G){B.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(t,B,G){B.exports={axisRefDescription:function(x,f,M){return["If set to a",x,"axis id (e.g. *"+x+"* or","*"+x+"2*), the `"+x+"` position refers to a",x,"coordinate. If set to *paper*, the `"+x+"`","position refers to the distance from the",f,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",f,"("+M+"). If set to a",x,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",f,"of the domain of that axis: e.g.,","*"+x+"2 domain* refers to the domain of the second",x," axis and a",x,"position of 0.5 refers to the","point between the",f,"and the",M,"of the domain of the","second",x,"axis."].join(" ")}}},{}],485:[function(t,B,G){B.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(t,B,G){B.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(t,B,G){B.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(t,B,G){B.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(t,B,G){B.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(t,B,G){B.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(t,B,G){B.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(t,B,G){G.xmlns="http://www.w3.org/2000/xmlns/",G.svg="http://www.w3.org/2000/svg",G.xlink="http://www.w3.org/1999/xlink",G.svgAttrs={xmlns:G.svg,"xmlns:xlink":G.xlink}},{}],493:[function(t,B,G){G.version=t("./version").version,t("native-promise-only"),t("../build/plotcss");for(var x=t("./registry"),f=G.register=x.register,M=t("./plot_api"),T=Object.keys(M),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(G[a]=M[a]),f({moduleType:"apiMethod",name:a,fn:M[a]})}f(t("./traces/scatter")),f([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/selections"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar"),t("./components/modebar")]),f([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(f(window.PlotlyLocales),delete window.PlotlyLocales),G.Icons=t("./fonts/ploticon");var i=t("./components/fx"),n=t("./plots/plots");G.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},G.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},G.Snapshot=t("./snapshot"),G.PlotSchema=t("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(t,B,G){B.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(t,B,G){G.isLeftAnchor=function(f){return f.xanchor==="left"||f.xanchor==="auto"&&f.x<=1/3},G.isCenterAnchor=function(f){return f.xanchor==="center"||f.xanchor==="auto"&&f.x>1/3&&f.x<2/3},G.isRightAnchor=function(f){return f.xanchor==="right"||f.xanchor==="auto"&&f.x>=2/3},G.isTopAnchor=function(f){return f.yanchor==="top"||f.yanchor==="auto"&&f.y>=2/3},G.isMiddleAnchor=function(f){return f.yanchor==="middle"||f.yanchor==="auto"&&f.y>1/3&&f.y<2/3},G.isBottomAnchor=function(f){return f.yanchor==="bottom"||f.yanchor==="auto"&&f.y<=1/3}},{}],496:[function(t,B,G){var x=t("./mod"),f=x.mod,M=x.modHalf,T=Math.PI,e=2*T;function a(m){return m/180*T}function i(m){return m/T*180}function n(m){return Math.abs(m[1]-m[0])>e-1e-14}function r(m,l){return M(l-m,e)}function v(m,l){return Math.abs(r(m,l))}function s(m,l){if(n(l))return!0;var y,u;l[0]<l[1]?(y=l[0],u=l[1]):(y=l[1],u=l[0]),y=f(y,e),u=f(u,e),y>u&&(u+=e);var A=f(m,e),_=A+e;return A>=y&&A<=u||_>=y&&_<=u}function o(m,l,y,u){if(!s(l,u))return!1;var A,_;return y[0]<y[1]?(A=y[0],_=y[1]):(A=y[1],_=y[0]),m>=A&&m<=_}function b(m,l,y,u,A,_,p){A=A||0,_=_||0;var w=n([y,u]),h,L,E,S,P;w?(h=0,L=T,E=e):y<u?(h=y,E=u):(h=u,E=y),m<l?(S=m,P=l):(S=l,P=m);function F(O,z){return[O*Math.cos(z)+A,_-O*Math.sin(z)]}var I=Math.abs(E-h)<=T?0:1;function D(O,z,H){return"A"+[O,O]+" "+[0,I,H]+" "+F(O,z)}var R;return w?S===null?R="M"+F(P,h)+D(P,L,0)+D(P,E,0)+"Z":R="M"+F(S,h)+D(S,L,0)+D(S,E,0)+"ZM"+F(P,h)+D(P,L,1)+D(P,E,1)+"Z":S===null?(R="M"+F(P,h)+D(P,E,0),p&&(R+="L0,0Z")):R="M"+F(S,h)+"L"+F(P,h)+D(P,E,0)+"L"+F(S,E)+D(S,h,1)+"Z",R}function g(m,l,y,u,A){return b(null,m,l,y,u,A,0)}function d(m,l,y,u,A){return b(null,m,l,y,u,A,1)}function c(m,l,y,u,A,_){return b(m,l,y,u,A,_,1)}B.exports={deg2rad:a,rad2deg:i,angleDelta:r,angleDist:v,isFullCircle:n,isAngleInsideSector:s,isPtInsideSector:o,pathArc:g,pathSector:d,pathAnnulus:c}},{"./mod":522}],497:[function(t,B,G){var x=Array.isArray,f=ArrayBuffer,M=DataView;function T(n){return f.isView(n)&&!(n instanceof M)}G.isTypedArray=T;function e(n){return x(n)||T(n)}G.isArrayOrTypedArray=e;function a(n){return!e(n[0])}G.isArray1D=a,G.ensureArray=function(n,r){return x(n)||(n=[]),n.length=r,n},G.concat=function(){var n=[],r=!0,v=0,s,o,b,g,d,c,m,l;for(b=0;b<arguments.length;b++)g=arguments[b],c=g.length,c&&(o?n.push(g):(o=g,d=c),x(g)?s=!1:(r=!1,v?s!==g.constructor&&(s=!1):s=g.constructor),v+=c);if(!v)return[];if(!n.length)return o;if(r)return o.concat.apply(o,n);if(s){for(m=new s(v),m.set(o),b=0;b<n.length;b++)g=n[b],m.set(g,d),d+=g.length;return m}for(m=new Array(v),l=0;l<o.length;l++)m[l]=o[l];for(b=0;b<n.length;b++){for(g=n[b],l=0;l<g.length;l++)m[d+l]=g[l];d+=l}return m},G.maxRowLength=function(n){return i(n,Math.max,0)},G.minRowLength=function(n){return i(n,Math.min,1/0)};function i(n,r,v){if(e(n))if(e(n[0])){for(var s=v,o=0;o<n.length;o++)s=r(s,n[o].length);return s}else return n.length;return 0}},{}],498:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../constants/numerical").BADNUM,M=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;B.exports=function(e){return typeof e=="string"&&(e=e.replace(M,"")),x(e)?Number(e):f}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(t,B,G){B.exports=function(f){var M=f._fullLayout;M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],500:[function(t,B,G){B.exports=function(f){f._responsiveChartHandler&&(window.removeEventListener("resize",f._responsiveChartHandler),delete f._responsiveChartHandler)}},{}],501:[function(t,B,G){var x=t("fast-isnumeric"),f=t("tinycolor2"),M=t("../plots/attributes"),T=t("../components/colorscale/scales"),e=t("../components/color"),a=t("../constants/interactions").DESELECTDIM,i=t("./nested_property"),n=t("./regex").counter,r=t("./mod").modHalf,v=t("./array").isArrayOrTypedArray;G.valObjectMeta={data_array:{coerceFunction:function(o,b,g){v(o)?b.set(o):g!==void 0&&b.set(g)}},enumerated:{coerceFunction:function(o,b,g,d){d.coerceNumber&&(o=+o),d.values.indexOf(o)===-1?b.set(g):b.set(o)},validateFunction:function(o,b){b.coerceNumber&&(o=+o);for(var g=b.values,d=0;d<g.length;d++){var c=String(g[d]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){var m=new RegExp(c.substr(1,c.length-2));if(m.test(o))return!0}else if(o===g[d])return!0}return!1}},boolean:{coerceFunction:function(o,b,g){o===!0||o===!1?b.set(o):b.set(g)}},number:{coerceFunction:function(o,b,g,d){!x(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},integer:{coerceFunction:function(o,b,g,d){o%1||!x(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},string:{coerceFunction:function(o,b,g,d){if(typeof o!="string"){var c=typeof o=="number";d.strict===!0||!c?b.set(g):b.set(String(o))}else d.noBlank&&!o?b.set(g):b.set(o)}},color:{coerceFunction:function(o,b,g){f(o).isValid()?b.set(o):b.set(g)}},colorlist:{coerceFunction:function(o,b,g){function d(c){return f(c).isValid()}!Array.isArray(o)||!o.length?b.set(g):o.every(d)?b.set(o):b.set(g)}},colorscale:{coerceFunction:function(o,b,g){b.set(T.get(o,g))}},angle:{coerceFunction:function(o,b,g){o==="auto"?b.set("auto"):x(o)?b.set(r(+o,360)):b.set(g)}},subplotid:{coerceFunction:function(o,b,g,d){var c=d.regex||n(g);if(typeof o=="string"&&c.test(o)){b.set(o);return}b.set(g)},validateFunction:function(o,b){var g=b.dflt;return o===g?!0:typeof o!="string"?!1:!!n(g).test(o)}},flaglist:{coerceFunction:function(o,b,g,d){if((d.extras||[]).indexOf(o)!==-1){b.set(o);return}if(typeof o!="string"){b.set(g);return}for(var c=o.split("+"),m=0;m<c.length;){var l=c[m];d.flags.indexOf(l)===-1||c.indexOf(l)<m?c.splice(m,1):m++}c.length?b.set(c.join("+")):b.set(g)}},any:{coerceFunction:function(o,b,g){o===void 0?b.set(g):b.set(o)}},info_array:{coerceFunction:function(o,b,g,d){function c(F,I,D){var R,O={set:function(z){R=z}};return D===void 0&&(D=I.dflt),G.valObjectMeta[I.valType].coerceFunction(F,O,D,I),R}var m=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){b.set(g);return}var l=d.items,y=[],u=Array.isArray(l),A=u&&m&&Array.isArray(l[0]),_=m&&u&&!A,p=u&&!_?l.length:o.length,w,h,L,E,S,P;if(g=Array.isArray(g)?g:[],m)for(w=0;w<p;w++)for(y[w]=[],L=Array.isArray(o[w])?o[w]:[],_?S=l.length:u?S=l[w].length:S=L.length,h=0;h<S;h++)_?E=l[h]:u?E=l[w][h]:E=l,P=c(L[h],E,(g[w]||[])[h]),P!==void 0&&(y[w][h]=P);else for(w=0;w<p;w++)P=c(o[w],u?l[w]:l,g[w]),P!==void 0&&(y[w]=P);b.set(y)},validateFunction:function(o,b){if(!Array.isArray(o))return!1;var g=b.items,d=Array.isArray(g),c=b.dimensions===2;if(!b.freeLength&&o.length!==g.length)return!1;for(var m=0;m<o.length;m++)if(c){if(!Array.isArray(o[m])||!b.freeLength&&o[m].length!==g[m].length)return!1;for(var l=0;l<o[m].length;l++)if(!s(o[m][l],d?g[m][l]:g))return!1}else if(!s(o[m],d?g[m]:g))return!1;return!0}}},G.coerce=function(o,b,g,d,c){var m=i(g,d).get(),l=i(o,d),y=i(b,d),u=l.get(),A=b._template;if(u===void 0&&A&&(u=i(A,d).get(),A=0),c===void 0&&(c=m.dflt),m.arrayOk&&v(u))return y.set(u),u;var _=G.valObjectMeta[m.valType].coerceFunction;_(u,y,c,m);var p=y.get();return A&&p===c&&!s(u,m)&&(u=i(A,d).get(),_(u,y,c,m),p=y.get()),p},G.coerce2=function(o,b,g,d,c){var m=i(o,d),l=G.coerce(o,b,g,d,c),y=m.get();return y!=null?l:!1},G.coerceFont=function(o,b,g){var d={};return g=g||{},d.family=o(b+".family",g.family),d.size=o(b+".size",g.size),d.color=o(b+".color",g.color),d},G.coercePattern=function(o,b,g,d){var c=o(b+".shape");if(c){o(b+".solidity"),o(b+".size");var m=o(b+".fillmode"),l=m==="overlay";if(!d){var y=o(b+".bgcolor",l?g:void 0);o(b+".fgcolor",l?e.contrast(y):g)}o(b+".fgopacity",l?.5:1)}},G.coerceHoverinfo=function(o,b,g){var d=b._module.attributes,c=d.hoverinfo?d:M,m=c.hoverinfo,l;if(g._dataLength===1){var y=m.dflt==="all"?m.flags.slice():m.dflt.split("+");y.splice(y.indexOf("name"),1),l=y.join("+")}return G.coerce(o,b,c,"hoverinfo",l)},G.coerceSelectionMarkerOpacity=function(o,b){if(!!o.marker){var g=o.marker.opacity;if(g!==void 0){var d,c;!v(g)&&!o.selected&&!o.unselected&&(d=g,c=a*g),b("selected.marker.opacity",d),b("unselected.marker.opacity",c)}}};function s(o,b){var g=G.valObjectMeta[b.valType];if(b.arrayOk&&v(o))return!0;if(g.validateFunction)return g.validateFunction(o,b);var d={},c=d,m={set:function(l){c=l}};return g.coerceFunction(o,m,d,b),c!==d}G.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(t,B,G){var x=t("d3-time-format").timeFormat,f=t("fast-isnumeric"),M=t("./loggers"),T=t("./mod").mod,e=t("../constants/numerical"),a=e.BADNUM,i=e.ONEDAY,n=e.ONEHOUR,r=e.ONEMIN,v=e.ONESEC,s=e.EPOCHJD,o=t("../registry"),b=t("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=new Date().getFullYear()-70;function m(R){return R&&o.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}G.dateTick0=function(R,O){var z=l(R,!!O);if(O<2)return z;var H=G.dateTime2ms(z,R);return H+=i*(O-1),G.ms2DateTime(H,0,R)};function l(R,O){return m(R)?O?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:o.getComponentMethod("calendars","CANONICAL_TICK")[R]:O?"2000-01-02":"2000-01-01"}G.dfltRange=function(R){return m(R)?o.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},G.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var y,u;G.dateTime2ms=function(R,O){if(G.isJSDate(R)){var z=R.getTimezoneOffset()*r,H=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*v+(R.getUTCMilliseconds()-R.getMilliseconds());if(H){var Y=3*r;z=z-Y/2+T(H-z+Y/2,Y)}return R=Number(R)-z,R>=y&&R<=u?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var ee=m(O),j=R.charAt(0);ee&&(j==="G"||j==="g")&&(R=R.substr(1),O="");var X=ee&&O.substr(0,7)==="chinese",ae=R.match(X?d:g);if(!ae)return a;var fe=ae[1],K=ae[3]||"1",J=Number(ae[5]||1),U=Number(ae[7]||0),V=Number(ae[9]||0),q=Number(ae[11]||0);if(ee){if(fe.length===2)return a;fe=Number(fe);var re;try{var Z=o.getComponentMethod("calendars","getCal")(O);if(X){var Q=K.charAt(K.length-1)==="i";K=parseInt(K,10),re=Z.newDate(fe,Z.toMonthIndex(fe,K,Q),J)}else re=Z.newDate(fe,Number(K),J)}catch{return a}return re?(re.toJD()-s)*i+U*n+V*r+q*v:a}fe.length===2?fe=(Number(fe)+2e3-c)%100+c:fe=Number(fe),K-=1;var ie=new Date(Date.UTC(2e3,K,J,U,V));return ie.setUTCFullYear(fe),ie.getUTCMonth()!==K||ie.getUTCDate()!==J?a:ie.getTime()+q*v},y=G.MIN_MS=G.dateTime2ms("-9999"),u=G.MAX_MS=G.dateTime2ms("9999-12-31 23:59:59.9999"),G.isDateTime=function(R,O){return G.dateTime2ms(R,O)!==a};function A(R,O){return String(R+Math.pow(10,O)).substr(1)}var _=90*i,p=3*n,w=5*r;G.ms2DateTime=function(R,O,z){if(typeof R!="number"||!(R>=y&&R<=u))return a;O||(O=0);var H=Math.floor(T(R+.05,1)*10),Y=Math.round(R-H/10),ee,j,X,ae,fe,K;if(m(z)){var J=Math.floor(Y/i)+s,U=Math.floor(T(R,i));try{ee=o.getComponentMethod("calendars","getCal")(z).fromJD(J).formatDate("yyyy-mm-dd")}catch{ee=b("G%Y-%m-%d")(new Date(Y))}if(ee.charAt(0)==="-")for(;ee.length<11;)ee="-0"+ee.substr(1);else for(;ee.length<10;)ee="0"+ee;j=O<_?Math.floor(U/n):0,X=O<_?Math.floor(U%n/r):0,ae=O<p?Math.floor(U%r/v):0,fe=O<w?U%v*10+H:0}else K=new Date(Y),ee=b("%Y-%m-%d")(K),j=O<_?K.getUTCHours():0,X=O<_?K.getUTCMinutes():0,ae=O<p?K.getUTCSeconds():0,fe=O<w?K.getUTCMilliseconds()*10+H:0;return h(ee,j,X,ae,fe)},G.ms2DateTimeLocal=function(R){if(!(R>=y+i&&R<=u-i))return a;var O=Math.floor(T(R+.05,1)*10),z=new Date(Math.round(R-O/10)),H=x("%Y-%m-%d")(z),Y=z.getHours(),ee=z.getMinutes(),j=z.getSeconds(),X=z.getUTCMilliseconds()*10+O;return h(H,Y,ee,j,X)};function h(R,O,z,H,Y){if((O||z||H||Y)&&(R+=" "+A(O,2)+":"+A(z,2),(H||Y)&&(R+=":"+A(H,2),Y))){for(var ee=4;Y%10===0;)ee-=1,Y/=10;R+="."+A(Y,ee)}return R}G.cleanDate=function(R,O,z){if(R===a)return O;if(G.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(m(z))return M.error("JS Dates and milliseconds are incompatible with world calendars",R),O;if(R=G.ms2DateTimeLocal(+R),!R&&O!==void 0)return O}else if(!G.isDateTime(R,z))return M.error("unrecognized date",R),O;return R};var L=/%\d?f/g,E=/%h/g,S={1:"1",2:"1",3:"2",4:"2"};function P(R,O,z,H){R=R.replace(L,function(ee){var j=Math.min(+ee.charAt(1)||6,6),X=(O/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0";return X});var Y=new Date(Math.floor(O+.05));if(R=R.replace(E,function(){return S[z("%q")(Y)]}),m(H))try{R=o.getComponentMethod("calendars","worldCalFmt")(R,O,H)}catch{return"Invalid"}return z(R)(Y)}var F=[59,59.9,59.99,59.999,59.9999];function I(R,O){var z=T(R+.05,i),H=A(Math.floor(z/n),2)+":"+A(T(Math.floor(z/r),60),2);if(O!=="M"){f(O)||(O=0);var Y=Math.min(T(R/v,60),F[O]),ee=(100+Y).toFixed(O).substr(1);O>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),H+=":"+ee}return H}G.formatDate=function(R,O,z,H,Y,ee){if(Y=m(Y)&&Y,!O)if(z==="y")O=ee.year;else if(z==="m")O=ee.month;else if(z==="d")O=ee.dayMonth+`
`+ee.year;else return I(R,z)+`
`+P(ee.dayMonthYear,R,H,Y);return P(O,R,H,Y)};var D=3*i;G.incrementMonth=function(R,O,z){z=m(z)&&z;var H=T(R,i);if(R=Math.round(R-H),z)try{var Y=Math.round(R/i)+s,ee=o.getComponentMethod("calendars","getCal")(z),j=ee.fromJD(Y);return O%12?ee.add(j,O,"m"):ee.add(j,O/12,"y"),(j.toJD()-s)*i+H}catch{M.error("invalid ms "+R+" in calendar "+z)}var X=new Date(R+D);return X.setUTCMonth(X.getUTCMonth()+O)+H-D},G.findExactDates=function(R,O){for(var z=0,H=0,Y=0,ee=0,j,X,ae=m(O)&&o.getComponentMethod("calendars","getCal")(O),fe=0;fe<R.length;fe++){if(X=R[fe],!f(X)){ee++;continue}if(!(X%i))if(ae)try{j=ae.fromJD(X/i+s),j.day()===1?j.month()===1?z++:H++:Y++}catch{}else j=new Date(X),j.getUTCDate()===1?j.getUTCMonth()===0?z++:H++:Y++}H+=z,Y+=H;var K=R.length-ee;return{exactYears:z/K,exactMonths:H/K,exactDays:Y/K}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(t,B,G){var x=t("@plotly/d3"),f=t("./loggers"),M=t("./matrix"),T=t("gl-mat4");function e(c){var m;if(typeof c=="string"){if(m=document.getElementById(c),m===null)throw new Error("No DOM element with id '"+c+"' exists on the page.");return m}else if(c==null)throw new Error("DOM element provided is null or undefined");return c}function a(c){var m=x.select(c);return m.node()instanceof HTMLElement&&m.size()&&m.classed("js-plotly-plot")}function i(c){var m=c&&c.parentNode;m&&m.removeChild(c)}function n(c,m){r("global",c,m)}function r(c,m,l){var y="plotly.js-style-"+c,u=document.getElementById(y);u||(u=document.createElement("style"),u.setAttribute("id",y),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var A=u.sheet;A.insertRule?A.insertRule(m+"{"+l+"}",0):A.addRule?A.addRule(m,l,0):f.warn("addStyleRule failed")}function v(c){var m="plotly.js-style-"+c,l=document.getElementById(m);l&&i(l)}function s(c){var m=b(c),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return m.forEach(function(y){var u=o(y);if(u){var A=M.convertCssMatrix(u);l=T.multiply(l,l,A)}}),l}function o(c){var m=window.getComputedStyle(c,null),l=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("-moz-transform")||m.getPropertyValue("-ms-transform")||m.getPropertyValue("-o-transform")||m.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(y){return+y})}function b(c){for(var m=[];g(c);)m.push(c),c=c.parentNode;return m}function g(c){return c&&(c instanceof Element||c instanceof HTMLElement)}function d(c,m){return c&&m&&c.x===m.x&&c.y===m.y&&c.top===m.top&&c.left===m.left&&c.right===m.right&&c.bottom===m.bottom}B.exports={getGraphDiv:e,isPlotDiv:a,removeElement:i,addStyleRule:n,addRelatedStyleRule:r,deleteRelatedStyleRule:v,getFullTransformMatrix:s,getElementTransformMatrix:o,getElementAndAncestors:b,equalDomRects:d}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(t,B,G){var x=t("events").EventEmitter,f={init:function(M){if(M._ev instanceof x)return M;var T=new x,e=new x;return M._ev=T,M._internalEv=e,M.on=T.on.bind(T),M.once=T.once.bind(T),M.removeListener=T.removeListener.bind(T),M.removeAllListeners=T.removeAllListeners.bind(T),M._internalOn=e.on.bind(e),M._internalOnce=e.once.bind(e),M._removeInternalListener=e.removeListener.bind(e),M._removeAllInternalListeners=e.removeAllListeners.bind(e),M.emit=function(a,i){typeof jQuery<"u"&&jQuery(M).trigger(a,i),T.emit(a,i),e.emit(a,i)},M},triggerHandler:function(M,T,e){var a,i;typeof jQuery<"u"&&(a=jQuery(M).triggerHandler(T,e));var n=M._ev;if(!n)return a;var r=n._events[T];if(!r)return a;function v(o){if(o.listener){if(n.removeListener(T,o.listener),!o.fired)return o.fired=!0,o.listener.apply(n,[e])}else return o.apply(n,[e])}r=Array.isArray(r)?r:[r];var s;for(s=0;s<r.length-1;s++)v(r[s]);return i=v(r[s]),a!==void 0?a:i},purge:function(M){return delete M._ev,delete M.on,delete M.once,delete M.removeListener,delete M.removeAllListeners,delete M.emit,delete M._ev,delete M._internalEv,delete M._internalOn,delete M._internalOnce,delete M._removeInternalListener,delete M._removeAllInternalListeners,M}};B.exports=f},{events:84}],505:[function(t,B,G){var x=t("./is_plain_object.js"),f=Array.isArray;function M(e,a){var i,n;for(i=0;i<e.length;i++){if(n=e[i],n!==null&&typeof n=="object")return!1;n!==void 0&&(a[i]=n)}return!0}G.extendFlat=function(){return T(arguments,!1,!1,!1)},G.extendDeep=function(){return T(arguments,!0,!1,!1)},G.extendDeepAll=function(){return T(arguments,!0,!0,!1)},G.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,i,n){var r=e[0],v=e.length,s,o,b,g,d,c,m;if(v===2&&f(r)&&f(e[1])&&r.length===0){if(m=M(e[1],r),m)return r;r.splice(0,r.length)}for(var l=1;l<v;l++){s=e[l];for(o in s)b=r[o],g=s[o],n&&f(g)?r[o]=g:a&&g&&(x(g)||(d=f(g)))?(d?(d=!1,c=b&&f(b)?b:[]):c=b&&x(b)?b:{},r[o]=T([c,g],a,i,n)):(typeof g<"u"||i)&&(r[o]=g)}return r}},{"./is_plain_object.js":516}],506:[function(t,B,G){B.exports=function(f){for(var M={},T=[],e=0,a=0;a<f.length;a++){var i=f[a];M[i]!==1&&(M[i]=1,T[e++]=i)}return T}},{}],507:[function(t,B,G){B.exports=function(e){for(var a=M(e)?f:x,i=[],n=0;n<e.length;n++){var r=e[n];a(r)&&i.push(r)}return i};function x(T){return T.visible===!0}function f(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function M(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],508:[function(t,B,G){var x=t("@plotly/d3"),f=t("country-regex"),M=t("@turf/area"),T=t("@turf/centroid"),e=t("@turf/bbox"),a=t("./identity"),i=t("./loggers"),n=t("./is_plain_object"),r=t("./nested_property"),v=t("./polygon"),s=Object.keys(f),o={"ISO-3":a,"USA-states":a,"country names":b};function b(A){for(var _=0;_<s.length;_++){var p=s[_],w=new RegExp(f[p]);if(w.test(A.trim().toLowerCase()))return p}return i.log("Unrecognized country name: "+A+"."),!1}function g(A,_,p){if(!_||typeof _!="string")return!1;var w=o[A](_),h,L,E;if(w){if(A==="USA-states")for(h=[],E=0;E<p.length;E++)L=p[E],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&h.push(L);else h=p;for(E=0;E<h.length;E++)if(L=h[E],L.id===w)return L;i.log(["Location with id",w,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function d(A){var _=A.geometry,p=_.coordinates,w=A.id,h=[],L,E,S,P;function F(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(w==="RUS"||w==="FJI"?L=function(I){var D;if(F(I)===null)D=I;else for(D=new Array(I.length),P=0;P<I.length;P++)D[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];h.push(v.tester(D))}:w==="ATA"?L=function(I){var D=F(I);if(D===null)return h.push(v.tester(I));var R=new Array(I.length+1),O=0;for(P=0;P<I.length;P++)P>D?R[O++]=[I[P][0]+360,I[P][1]]:P===D?(R[O++]=I[P],R[O++]=[I[P][0],-90]):R[O++]=I[P];var z=v.tester(R);z.pts.pop(),h.push(z)}:L=function(I){h.push(v.tester(I))},_.type){case"MultiPolygon":for(E=0;E<p.length;E++)for(S=0;S<p[E].length;S++)L(p[E][S]);break;case"Polygon":for(E=0;E<p.length;E++)L(p[E]);break}return h}function c(A){var _=A.geojson,p=window.PlotlyGeoAssets||{},w=typeof _=="string"?p[_]:_;return n(w)?w:(i.error("Oops ... something went wrong when fetching "+_),!1)}function m(A){var _=A[0].trace,p=c(_);if(!p)return!1;var w={},h=[],L;for(L=0;L<_._length;L++){var E=A[L];(E.loc||E.loc===0)&&(w[E.loc]=E)}function S(I){var D=r(I,_.featureidkey||"id").get(),R=w[D];if(R){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var z={type:"Feature",id:D,geometry:O,properties:{}};z.properties.ct=l(z),R.fIn=I,R.fOut=z,h.push(z)}else i.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[D]}switch(p.type){case"FeatureCollection":var P=p.features;for(L=0;L<P.length;L++)S(P[L]);break;case"Feature":S(p);break;default:return i.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in w)i.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+_.featureidkey+"*."].join(" "));return h}function l(A){var _=A.geometry,p;if(_.type==="MultiPolygon")for(var w=_.coordinates,h=0,L=0;L<w.length;L++){var E={type:"Polygon",coordinates:w[L]},S=M.default(E);S>h&&(h=S,p=E)}else p=_;return T.default(p).geometry.coordinates}function y(A){var _=window.PlotlyGeoAssets||{},p=[];function w(P){return new Promise(function(F,I){x.json(P,function(D,R){if(D){delete _[P];var O=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(O))}return _[P]=R,F(R)})})}function h(P){return new Promise(function(F,I){var D=0,R=setInterval(function(){if(_[P]&&_[P]!=="pending")return clearInterval(R),F(_[P]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<A.length;L++){var E=A[L][0].trace,S=E.geojson;typeof S=="string"&&(_[S]?_[S]==="pending"&&p.push(h(S)):(_[S]="pending",p.push(w(S))))}return p}function u(A){return e.default(A)}B.exports={locationToFeature:g,feature2polygons:d,getTraceGeojson:c,extractTraceFeature:m,fetchTraceGeoData:y,computeBbox:u}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(t,B,G){var x=t("../constants/numerical").BADNUM;G.calcTraceToLineCoords=function(f){for(var M=f[0].trace,T=M.connectgaps,e=[],a=[],i=0;i<f.length;i++){var n=f[i],r=n.lonlat;r[0]!==x?a.push(r):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},G.makeLine=function(f){return f.length===1?{type:"LineString",coordinates:f[0]}:{type:"MultiLineString",coordinates:f}},G.makePolygon=function(f){if(f.length===1)return{type:"Polygon",coordinates:f};for(var M=new Array(f.length),T=0;T<f.length;T++)M[T]=[f[T]];return{type:"MultiPolygon",coordinates:M}},G.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(t,B,G){var x=t("./mod").mod;G.segmentsIntersect=f;function f(i,n,r,v,s,o,b,g){var d=r-i,c=s-i,m=b-s,l=v-n,y=o-n,u=g-o,A=d*u-m*l;if(A===0)return null;var _=(c*u-m*y)/A,p=(c*l-d*y)/A;return p<0||p>1||_<0||_>1?null:{x:i+d*_,y:n+l*_}}G.segmentDistance=function(n,r,v,s,o,b,g,d){if(f(n,r,v,s,o,b,g,d))return 0;var c=v-n,m=s-r,l=g-o,y=d-b,u=c*c+m*m,A=l*l+y*y,_=Math.min(M(c,m,u,o-n,b-r),M(c,m,u,g-n,d-r),M(l,y,A,n-o,r-b),M(l,y,A,v-o,s-b));return Math.sqrt(_)};function M(i,n,r,v,s){var o=v*i+s*n;if(o<0)return v*v+s*s;if(o>r){var b=v-i,g=s-n;return b*b+g*g}else{var d=v*n-s*i;return d*d/r}}var T,e,a;G.getTextLocation=function(n,r,v,s){if((n!==e||s!==a)&&(T={},e=n,a=s),T[v])return T[v];var o=n.getPointAtLength(x(v-s/2,r)),b=n.getPointAtLength(x(v+s/2,r)),g=Math.atan((b.y-o.y)/(b.x-o.x)),d=n.getPointAtLength(x(v,r)),c=(d.x*4+o.x+b.x)/6,m=(d.y*4+o.y+b.y)/6,l={x:c,y:m,theta:g};return T[v]=l,l},G.clearLocationCache=function(){e=null},G.getVisibleSegment=function(n,r,v){var s=r.left,o=r.right,b=r.top,g=r.bottom,d=0,c=n.getTotalLength(),m=c,l,y;function u(_){var p=n.getPointAtLength(_);_===0?l=p:_===c&&(y=p);var w=p.x<s?s-p.x:p.x>o?p.x-o:0,h=p.y<b?b-p.y:p.y>g?p.y-g:0;return Math.sqrt(w*w+h*h)}for(var A=u(d);A;){if(d+=A+v,d>m)return;A=u(d)}for(A=u(m);A;){if(m-=A+v,d>m)return;A=u(m)}return{min:d,max:m,len:m-d,total:c,isClosed:d===0&&m===c&&Math.abs(l.x-y.x)<.1&&Math.abs(l.y-y.y)<.1}},G.findPointOnPath=function(n,r,v,s){s=s||{};for(var o=s.pathLength||n.getTotalLength(),b=s.tolerance||.001,g=s.iterationLimit||30,d=n.getPointAtLength(0)[v]>n.getPointAtLength(o)[v]?-1:1,c=0,m=0,l=o,y,u,A;c<g;){if(y=(m+l)/2,u=n.getPointAtLength(y),A=u[v]-r,Math.abs(A)<b)return u;d*A>0?l=y:m=y,c++}return u}},{"./mod":522}],511:[function(t,B,G){var x=t("fast-isnumeric"),f=t("tinycolor2"),M=t("color-normalize"),T=t("../components/colorscale"),e=t("../components/color/attributes").defaultLine,a=t("./array").isArrayOrTypedArray,i=M(e),n=1;function r(g,d){var c=g;return c[3]*=d,c}function v(g){if(x(g))return i;var d=M(g);return d.length?d:i}function s(g){return x(g)?g:n}function o(g,d,c){var m=g.color,l=a(m),y=a(d),u=T.extractOpts(g),A=[],_,p,w,h,L;if(u.colorscale!==void 0?_=T.makeColorScaleFuncFromTrace(g):_=v,l?p=function(S,P){return S[P]===void 0?i:M(_(S[P]))}:p=v,y?w=function(S,P){return S[P]===void 0?n:s(S[P])}:w=s,l||y)for(var E=0;E<c;E++)h=p(m,E),L=w(d,E),A[E]=r(h,L);else A=r(M(m),d);return A}function b(g){var d=T.extractOpts(g),c=d.colorscale;return d.reversescale&&(c=T.flipScale(d.colorscale)),c.map(function(m){var l=m[0],y=f(m[1]),u=y.toRgb();return{index:l,rgb:[u.r,u.g,u.b,u.a]}})}B.exports={formatColor:o,parseColorScale:b}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(t,B,G){var x=t("./identity");function f(M){return[M]}B.exports={keyFun:function(M){return M.key},repeat:f,descend:x,wrap:f,unwrap:function(M){return M[0]}}},{"./identity":513}],513:[function(t,B,G){B.exports=function(f){return f}},{}],514:[function(t,B,G){B.exports=function(f,M){if(!M)return f;var T=1/Math.abs(M),e=T>1?(T*f+T*M)/T:f+M,a=String(e).length;if(a>16){var i=String(M).length,n=String(f).length;if(a>=n+i){var r=parseFloat(e).toPrecision(12);r.indexOf("e+")===-1&&(e=+r)}}return e}},{}],515:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-time-format").utcFormat,M=t("d3-format").format,T=t("fast-isnumeric"),e=t("../constants/numerical"),a=e.FP_SAFE,i=-a,n=e.BADNUM,r=B.exports={};r.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var v={};r.warnBadFormat=function(fe){var K=String(fe);v[K]||(v[K]=1,r.warn('encountered bad format: "'+K+'"'))},r.noFormat=function(fe){return String(fe)},r.numberFormat=function(fe){var K;try{K=M(r.adjustFormat(fe))}catch{return r.warnBadFormat(fe),r.noFormat}return K},r.nestedProperty=t("./nested_property"),r.keyedContainer=t("./keyed_container"),r.relativeAttr=t("./relative_attr"),r.isPlainObject=t("./is_plain_object"),r.toLogRange=t("./to_log_range"),r.relinkPrivateKeys=t("./relink_private");var s=t("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var o=t("./mod");r.mod=o.mod,r.modHalf=o.modHalf;var b=t("./coerce");r.valObjectMeta=b.valObjectMeta,r.coerce=b.coerce,r.coerce2=b.coerce2,r.coerceFont=b.coerceFont,r.coercePattern=b.coercePattern,r.coerceHoverinfo=b.coerceHoverinfo,r.coerceSelectionMarkerOpacity=b.coerceSelectionMarkerOpacity,r.validate=b.validate;var g=t("./dates");r.dateTime2ms=g.dateTime2ms,r.isDateTime=g.isDateTime,r.ms2DateTime=g.ms2DateTime,r.ms2DateTimeLocal=g.ms2DateTimeLocal,r.cleanDate=g.cleanDate,r.isJSDate=g.isJSDate,r.formatDate=g.formatDate,r.incrementMonth=g.incrementMonth,r.dateTick0=g.dateTick0,r.dfltRange=g.dfltRange,r.findExactDates=g.findExactDates,r.MIN_MS=g.MIN_MS,r.MAX_MS=g.MAX_MS;var d=t("./search");r.findBin=d.findBin,r.sorterAsc=d.sorterAsc,r.sorterDes=d.sorterDes,r.distinctVals=d.distinctVals,r.roundUp=d.roundUp,r.sort=d.sort,r.findIndexOfMin=d.findIndexOfMin,r.sortObjectKeys=t("./sort_object_keys");var c=t("./stats");r.aggNums=c.aggNums,r.len=c.len,r.mean=c.mean,r.median=c.median,r.midRange=c.midRange,r.variance=c.variance,r.stdev=c.stdev,r.interp=c.interp;var m=t("./matrix");r.init2dArray=m.init2dArray,r.transposeRagged=m.transposeRagged,r.dot=m.dot,r.translationMatrix=m.translationMatrix,r.rotationMatrix=m.rotationMatrix,r.rotationXYMatrix=m.rotationXYMatrix,r.apply3DTransform=m.apply3DTransform,r.apply2DTransform=m.apply2DTransform,r.apply2DTransform2=m.apply2DTransform2,r.convertCssMatrix=m.convertCssMatrix,r.inverseTransformMatrix=m.inverseTransformMatrix;var l=t("./angles");r.deg2rad=l.deg2rad,r.rad2deg=l.rad2deg,r.angleDelta=l.angleDelta,r.angleDist=l.angleDist,r.isFullCircle=l.isFullCircle,r.isAngleInsideSector=l.isAngleInsideSector,r.isPtInsideSector=l.isPtInsideSector,r.pathArc=l.pathArc,r.pathSector=l.pathSector,r.pathAnnulus=l.pathAnnulus;var y=t("./anchor_utils");r.isLeftAnchor=y.isLeftAnchor,r.isCenterAnchor=y.isCenterAnchor,r.isRightAnchor=y.isRightAnchor,r.isTopAnchor=y.isTopAnchor,r.isMiddleAnchor=y.isMiddleAnchor,r.isBottomAnchor=y.isBottomAnchor;var u=t("./geometry2d");r.segmentsIntersect=u.segmentsIntersect,r.segmentDistance=u.segmentDistance,r.getTextLocation=u.getTextLocation,r.clearLocationCache=u.clearLocationCache,r.getVisibleSegment=u.getVisibleSegment,r.findPointOnPath=u.findPointOnPath;var A=t("./extend");r.extendFlat=A.extendFlat,r.extendDeep=A.extendDeep,r.extendDeepAll=A.extendDeepAll,r.extendDeepNoArrays=A.extendDeepNoArrays;var _=t("./loggers");r.log=_.log,r.warn=_.warn,r.error=_.error;var p=t("./regex");r.counterRegex=p.counter;var w=t("./throttle");r.throttle=w.throttle,r.throttleDone=w.done,r.clearThrottle=w.clear;var h=t("./dom");r.getGraphDiv=h.getGraphDiv,r.isPlotDiv=h.isPlotDiv,r.removeElement=h.removeElement,r.addStyleRule=h.addStyleRule,r.addRelatedStyleRule=h.addRelatedStyleRule,r.deleteRelatedStyleRule=h.deleteRelatedStyleRule,r.getFullTransformMatrix=h.getFullTransformMatrix,r.getElementTransformMatrix=h.getElementTransformMatrix,r.getElementAndAncestors=h.getElementAndAncestors,r.equalDomRects=h.equalDomRects,r.clearResponsive=t("./clear_responsive"),r.preserveDrawingBuffer=t("./preserve_drawing_buffer"),r.makeTraceGroups=t("./make_trace_groups"),r._=t("./localize"),r.notifier=t("./notifier"),r.filterUnique=t("./filter_unique"),r.filterVisible=t("./filter_visible"),r.pushUnique=t("./push_unique"),r.increment=t("./increment"),r.cleanNumber=t("./clean_number"),r.ensureNumber=function(K){return T(K)?(K=Number(K),K>a||K<i?n:K):n},r.isIndex=function(fe,K){return K!==void 0&&fe>=K?!1:T(fe)&&fe>=0&&fe%1===0},r.noop=t("./noop"),r.identity=t("./identity"),r.repeat=function(fe,K){for(var J=new Array(K),U=0;U<K;U++)J[U]=fe;return J},r.swapAttrs=function(fe,K,J,U){J||(J="x"),U||(U="y");for(var V=0;V<K.length;V++){var q=K[V],re=r.nestedProperty(fe,q.replace("?",J)),Z=r.nestedProperty(fe,q.replace("?",U)),Q=re.get();re.set(Z.get()),Z.set(Q)}},r.raiseToTop=function(K){K.parentNode.appendChild(K)},r.cancelTransition=function(fe){return fe.transition().duration(0)},r.constrain=function(fe,K,J){return K>J?Math.max(J,Math.min(K,fe)):Math.max(K,Math.min(J,fe))},r.bBoxIntersect=function(fe,K,J){return J=J||0,fe.left<=K.right+J&&K.left<=fe.right+J&&fe.top<=K.bottom+J&&K.top<=fe.bottom+J},r.simpleMap=function(fe,K,J,U,V){for(var q=fe.length,re=new Array(q),Z=0;Z<q;Z++)re[Z]=K(fe[Z],J,U,V);return re},r.randstr=function fe(K,J,U,V){if(U||(U=16),J===void 0&&(J=24),J<=0)return"0";var q=Math.log(Math.pow(2,J))/Math.log(U),re="",Z,Q,ie;for(Z=2;q===1/0;Z*=2)q=Math.log(Math.pow(2,J/Z))/Math.log(U)*Z;var oe=q-Math.floor(q);for(Z=0;Z<Math.floor(q);Z++)ie=Math.floor(Math.random()*U).toString(U),re=ie+re;oe&&(Q=Math.pow(U,oe),ie=Math.floor(Math.random()*Q).toString(U),re=ie+re);var ne=parseInt(re,U);return K&&K[re]||ne!==1/0&&ne>=Math.pow(2,J)?V>10?(r.warn("randstr failed uniqueness"),re):fe(K,J,U,(V||0)+1):re},r.OptionControl=function(fe,K){fe||(fe={}),K||(K="opt");var J={};return J.optionList=[],J._newoption=function(U){U[K]=fe,J[U.name]=U,J.optionList.push(U)},J["_"+K]=fe,J},r.smooth=function(fe,K){if(K=Math.round(K)||0,K<2)return fe;var J=fe.length,U=2*J,V=2*K-1,q=new Array(V),re=new Array(J),Z,Q,ie,oe;for(Z=0;Z<V;Z++)q[Z]=(1-Math.cos(Math.PI*(Z+1)/K))/(2*K);for(Z=0;Z<J;Z++){for(oe=0,Q=0;Q<V;Q++)ie=Z+Q+1-K,ie<-J?ie-=U*Math.round(ie/U):ie>=U&&(ie-=U*Math.floor(ie/U)),ie<0?ie=-1-ie:ie>=J&&(ie=U-1-ie),oe+=fe[ie]*q[Q];re[Z]=oe}return re},r.syncOrAsync=function(fe,K,J){var U,V;function q(){return r.syncOrAsync(fe,K,J)}for(;fe.length;)if(V=fe.splice(0,1)[0],U=V(K),U&&U.then)return U.then(q);return J&&J(K)},r.stripTrailingSlash=function(fe){return fe.substr(-1)==="/"?fe.substr(0,fe.length-1):fe},r.noneOrAll=function(fe,K,J){if(!!fe){var U=!1,V=!0,q,re;for(q=0;q<J.length;q++)re=fe[J[q]],re!=null?U=!0:V=!1;if(U&&!V)for(q=0;q<J.length;q++)fe[J[q]]=K[J[q]]}},r.mergeArray=function(fe,K,J,U){var V=typeof U=="function";if(r.isArrayOrTypedArray(fe))for(var q=Math.min(fe.length,K.length),re=0;re<q;re++){var Z=fe[re];K[re][J]=V?U(Z):Z}},r.mergeArrayCastPositive=function(fe,K,J){return r.mergeArray(fe,K,J,function(U){var V=+U;return isFinite(V)&&V>0?V:0})},r.fillArray=function(fe,K,J,U){if(U=U||r.identity,r.isArrayOrTypedArray(fe))for(var V=0;V<K.length;V++)K[V][J]=U(fe[V])},r.castOption=function(fe,K,J,U){U=U||r.identity;var V=r.nestedProperty(fe,J).get();return r.isArrayOrTypedArray(V)?Array.isArray(K)&&r.isArrayOrTypedArray(V[K[0]])?U(V[K[0]][K[1]]):U(V[K]):V},r.extractOption=function(fe,K,J,U){if(J in fe)return fe[J];var V=r.nestedProperty(K,U).get();if(!Array.isArray(V))return V};function L(fe){var K={};for(var J in fe)for(var U=fe[J],V=0;V<U.length;V++)K[U[V]]=+J;return K}r.tagSelected=function(fe,K,J){var U=K.selectedpoints,V=K._indexToPoints,q;V&&(q=L(V));function re(ne){return ne!==void 0&&ne<fe.length}for(var Z=0;Z<U.length;Z++){var Q=U[Z];if(r.isIndex(Q)||r.isArrayOrTypedArray(Q)&&r.isIndex(Q[0])&&r.isIndex(Q[1])){var ie=q?q[Q]:Q,oe=J?J[ie]:ie;re(oe)&&(fe[oe].selected=1)}}},r.selIndices2selPoints=function(fe){var K=fe.selectedpoints,J=fe._indexToPoints;if(J){for(var U=L(J),V=[],q=0;q<K.length;q++){var re=K[q];if(r.isIndex(re)){var Z=U[re];r.isIndex(Z)&&V.push(Z)}}return V}else return K},r.getTargetArray=function(fe,K){var J=K.target;if(typeof J=="string"&&J){var U=r.nestedProperty(fe,J).get();return Array.isArray(U)?U:!1}else if(Array.isArray(J))return J;return!1},r.minExtend=function(fe,K){var J={};typeof K!="object"&&(K={});var U=3,V=Object.keys(fe),q,re,Z;for(q=0;q<V.length;q++)re=V[q],Z=fe[re],!(re.charAt(0)==="_"||typeof Z=="function")&&(re==="module"?J[re]=Z:Array.isArray(Z)?re==="colorscale"?J[re]=Z.slice():J[re]=Z.slice(0,U):r.isTypedArray(Z)?J[re]=Z.subarray(0,U):Z&&typeof Z=="object"?J[re]=r.minExtend(fe[re],K[re]):J[re]=Z);for(V=Object.keys(K),q=0;q<V.length;q++)re=V[q],Z=K[re],(typeof Z!="object"||!(re in J)||typeof J[re]!="object")&&(J[re]=Z);return J},r.titleCase=function(fe){return fe.charAt(0).toUpperCase()+fe.substr(1)},r.containsAny=function(fe,K){for(var J=0;J<K.length;J++)if(fe.indexOf(K[J])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var E=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return E.test(window.navigator.userAgent)};var S=/iPad|iPhone|iPod/;r.isIOS=function(){return S.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var fe=P.exec(window.navigator.userAgent);if(fe&&fe.length===2){var K=parseInt(fe[1]);if(!isNaN(K))return K}return null},r.isD3Selection=function(fe){return fe instanceof x.selection},r.ensureSingle=function(fe,K,J,U){var V=fe.select(K+(J?"."+J:""));if(V.size())return V;var q=fe.append(K);return J&&q.classed(J,!0),U&&q.call(U),q},r.ensureSingleById=function(fe,K,J,U){var V=fe.select(K+"#"+J);if(V.size())return V;var q=fe.append(K).attr("id",J);return U&&q.call(U),q},r.objectFromPath=function(fe,K){for(var J=fe.split("."),U,V=U={},q=0;q<J.length;q++){var re=J[q],Z=null,Q=J[q].match(/(.*)\[([0-9]+)\]/);Q?(re=Q[1],Z=Q[2],U=U[re]=[],q===J.length-1?U[Z]=K:U[Z]={},U=U[Z]):(q===J.length-1?U[re]=K:U[re]={},U=U[re])}return V};var F=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(fe){var K,J,U,V,q,re,Z;if(typeof fe=="object"&&!Array.isArray(fe))for(J in fe)fe.hasOwnProperty(J)&&((K=J.match(F))?(V=fe[J],U=K[1],delete fe[J],fe[U]=r.extendDeepNoArrays(fe[U]||{},r.objectFromPath(J,r.expandObjectPaths(V))[U])):(K=J.match(I))?(V=fe[J],U=K[1],q=parseInt(K[2]),delete fe[J],fe[U]=fe[U]||[],K[3]==="."?(Z=K[4],re=fe[U][q]=fe[U][q]||{},r.extendDeepNoArrays(re,r.objectFromPath(Z,r.expandObjectPaths(V)))):fe[U][q]=r.expandObjectPaths(V)):fe[J]=r.expandObjectPaths(fe[J]));return fe},r.numSeparate=function(fe,K,J){if(J||(J=!1),typeof K!="string"||K.length===0)throw new Error("Separator string required for formatting!");typeof fe=="number"&&(fe=String(fe));var U=/(\d+)(\d{3})/,V=K.charAt(0),q=K.charAt(1),re=fe.split("."),Z=re[0],Q=re.length>1?V+re[1]:"";if(q&&(re.length>1||Z.length>4||J))for(;U.test(Z);)Z=Z.replace(U,"$1"+q+"$2");return Z+Q},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;r.templateString=function(fe,K){var J={};return fe.replace(r.TEMPLATE_STRING_REGEX,function(U,V){var q;return D.test(V)?q=K[V]:(J[V]=J[V]||r.nestedProperty(K,V).get,q=J[V]()),r.isValidTextValue(q)?q:""})};var R={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return H.apply(R,arguments)};var O={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return H.apply(O,arguments)};var z=/^[:|\|]/;function H(fe,K,J){var U=this,V=arguments;K||(K={});var q={};return fe.replace(r.TEMPLATE_STRING_REGEX,function(re,Z,Q){var ie=Z==="xother"||Z==="yother",oe=Z==="_xother"||Z==="_yother",ne=Z==="_xother_"||Z==="_yother_",se=Z==="xother_"||Z==="yother_",_e=ie||oe||se||ne,ue=Z;(oe||ne)&&(ue=ue.substring(1)),(se||ne)&&(ue=ue.substring(0,ue.length-1));var ge;if(_e){if(ge=K[ue],ge===void 0)return""}else{var xe,ye;for(ye=3;ye<V.length;ye++)if(xe=V[ye],!!xe){if(xe.hasOwnProperty(ue)){ge=xe[ue];break}if(D.test(ue)||(ge=r.nestedProperty(xe,ue).get(),ge=q[ue]||r.nestedProperty(xe,ue).get(),ge&&(q[ue]=ge)),ge!==void 0)break}}if(ge===void 0&&U)return U.count<U.max&&(r.warn("Variable '"+ue+"' in "+U.name+" could not be found!"),ge=re),U.count===U.max&&r.warn("Too many "+U.name+" warnings - additional warnings will be suppressed"),U.count++,re;if(Q){var be;if(Q[0]===":"&&(be=J?J.numberFormat:r.numberFormat,ge=be(Q.replace(z,""))(ge)),Q[0]==="|"){be=J?J.timeFormat:f;var Se=r.dateTime2ms(ge);ge=r.formatDate(Se,Q.replace(z,""),!1,be)}}else{var Re=ue+"Label";K.hasOwnProperty(Re)&&(ge=K[Re])}return _e&&(ge="("+ge+")",(oe||ne)&&(ge=" "+ge),(se||ne)&&(ge=ge+" ")),ge})}var Y=48,ee=57;r.subplotSort=function(fe,K){for(var J=Math.min(fe.length,K.length)+1,U=0,V=0,q=0;q<J;q++){var re=fe.charCodeAt(q)||0,Z=K.charCodeAt(q)||0,Q=re>=Y&&re<=ee,ie=Z>=Y&&Z<=ee;if(Q&&(U=10*U+re-Y),ie&&(V=10*V+Z-Y),!Q||!ie){if(U!==V)return U-V;if(re!==Z)return re-Z}}return V-U};var j=2e9;r.seedPseudoRandom=function(){j=2e9},r.pseudoRandom=function(){var fe=j;return j=(69069*j+1)%4294967296,Math.abs(j-fe)<429496729?r.pseudoRandom():j/4294967296},r.fillText=function(fe,K,J){var U=Array.isArray(J)?function(re){J.push(re)}:function(re){J.text=re},V=r.extractOption(fe,K,"htx","hovertext");if(r.isValidTextValue(V))return U(V);var q=r.extractOption(fe,K,"tx","text");if(r.isValidTextValue(q))return U(q)},r.isValidTextValue=function(fe){return fe||fe===0},r.formatPercent=function(fe,K){K=K||0;for(var J=(Math.round(100*fe*Math.pow(10,K))*Math.pow(.1,K)).toFixed(K)+"%",U=0;U<K;U++)J.indexOf(".")!==-1&&(J=J.replace("0%","%"),J=J.replace(".%","%"));return J},r.isHidden=function(fe){var K=window.getComputedStyle(fe).display;return!K||K==="none"},r.strTranslate=function(fe,K){return fe||K?"translate("+fe+","+K+")":""},r.strRotate=function(fe){return fe?"rotate("+fe+")":""},r.strScale=function(fe){return fe!==1?"scale("+fe+")":""},r.getTextTransform=function(fe){var K=fe.noCenter,J=fe.textX,U=fe.textY,V=fe.targetX,q=fe.targetY,re=fe.anchorX||0,Z=fe.anchorY||0,Q=fe.rotate,ie=fe.scale;return ie?ie>1&&(ie=1):ie=0,r.strTranslate(V-ie*(J+re),q-ie*(U+Z))+r.strScale(ie)+(Q?"rotate("+Q+(K?"":" "+J+" "+U)+")":"")},r.setTransormAndDisplay=function(fe,K){fe.attr("transform",r.getTextTransform(K)),fe.style("display",K.scale?null:"none")},r.ensureUniformFontSize=function(fe,K){var J=r.extendFlat({},K);return J.size=Math.max(K.size,fe._fullLayout.uniformtext.minsize||0),J},r.join2=function(fe,K,J){var U=fe.length;return U>1?fe.slice(0,-1).join(K)+J+fe[U-1]:fe.join(K)},r.bigFont=function(fe){return Math.round(1.2*fe)};var X=r.getFirefoxVersion(),ae=X!==null&&X<86;r.getPositionFromD3Event=function(){return ae?[x.event.layerX,x.event.layerY]:[x.event.offsetX,x.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(t,B,G){B.exports=function(f){return window&&window.process&&window.process.versions?Object.prototype.toString.call(f)==="[object Object]":Object.prototype.toString.call(f)==="[object Object]"&&Object.getPrototypeOf(f).hasOwnProperty("hasOwnProperty")}},{}],517:[function(t,B,G){var x=t("./nested_property"),f=/^\w*$/,M=0,T=1,e=2,a=3,i=4;B.exports=function(r,v,s,o){s=s||"name",o=o||"value";var b,g,d,c={};v&&v.length?(d=x(r,v),g=d.get()):g=r,v=v||"";var m={};if(g)for(b=0;b<g.length;b++)m[g[b][s]]=b;var l=f.test(o),y={set:function(u,A){var _=A===null?i:M;if(!g){if(!d||_===i)return;g=[],d.set(g)}var p=m[u];if(p===void 0){if(_===i)return;_=_|a,p=g.length,m[u]=p}else A!==(l?g[p][o]:x(g[p],o).get())&&(_=_|e);var w=g[p]=g[p]||{};return w[s]=u,l?w[o]=A:x(w,o).set(A),A!==null&&(_=_&~i),c[p]=c[p]|_,y},get:function(u){if(!!g){var A=m[u];if(A!==void 0)return l?g[A][o]:x(g[A],o).get()}},rename:function(u,A){var _=m[u];return _===void 0||(c[_]=c[_]|T,m[A]=_,delete m[u],g[_][s]=A),y},remove:function(u){var A=m[u];if(A===void 0)return y;var _=g[A];if(Object.keys(_).length>2)return c[A]=c[A]|e,y.set(u,null);if(l){for(b=A;b<g.length;b++)c[b]=c[b]|a;for(b=A;b<g.length;b++)m[g[b][s]]--;g.splice(A,1),delete m[u]}else x(_,o).set(null),c[A]=c[A]|e|i;return y},constructUpdate:function(){for(var u,A,_={},p=Object.keys(c),w=0;w<p.length;w++)A=p[w],u=v+"["+A+"]",g[A]?(c[A]&T&&(_[u+"."+s]=g[A][s]),c[A]&e&&(l?_[u+"."+o]=c[A]&i?null:g[A][o]:_[u+"."+o]=c[A]&i?null:x(g[A],o).get())):_[u]=null;return _}};return y}},{"./nested_property":523}],518:[function(t,B,G){var x=t("../registry");B.exports=function(M,T){for(var e=M._context.locale,a=0;a<2;a++){for(var i=M._context.locales,n=0;n<2;n++){var r=(i[e]||{}).dictionary;if(r){var v=r[T];if(v)return v}i=x.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return T}},{"../registry":647}],519:[function(t,B,G){var x=t("../plot_api/plot_config").dfltConfig,f=t("./notifier"),M=B.exports={};M.log=function(){var T;if(x.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(x.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"long")}},M.warn=function(){var T;if(x.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(x.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"stick")}},M.error=function(){var T;if(x.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(x.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(t,B,G){var x=t("@plotly/d3");B.exports=function(M,T,e){var a=M.selectAll("g."+e.replace(/\s/g,".")).data(T,function(n){return n[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var i=M.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(n){n[0][i]=x.select(this)}),a}},{"@plotly/d3":58}],521:[function(t,B,G){var x=t("gl-mat4");G.init2dArray=function(f,M){for(var T=new Array(f),e=0;e<f;e++)T[e]=new Array(M);return T},G.transposeRagged=function(f){var M=0,T=f.length,e,a;for(e=0;e<T;e++)M=Math.max(M,f[e].length);var i=new Array(M);for(e=0;e<M;e++)for(i[e]=new Array(T),a=0;a<T;a++)i[e][a]=f[a][e];return i},G.dot=function(f,M){if(!(f.length&&M.length)||f.length!==M.length)return null;var T=f.length,e,a;if(f[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=G.dot(f[a],M);else if(M[0].length){var i=G.transposeRagged(M);for(e=new Array(i.length),a=0;a<i.length;a++)e[a]=G.dot(f,i[a])}else for(e=0,a=0;a<T;a++)e+=f[a]*M[a];return e},G.translationMatrix=function(f,M){return[[1,0,f],[0,1,M],[0,0,1]]},G.rotationMatrix=function(f){var M=f*Math.PI/180;return[[Math.cos(M),-Math.sin(M),0],[Math.sin(M),Math.cos(M),0],[0,0,1]]},G.rotationXYMatrix=function(f,M,T){return G.dot(G.dot(G.translationMatrix(M,T),G.rotationMatrix(f)),G.translationMatrix(-M,-T))},G.apply3DTransform=function(f){return function(){var M=arguments,T=arguments.length===1?M[0]:[M[0],M[1],M[2]||0];return G.dot(f,[T[0],T[1],T[2],1]).slice(0,3)}},G.apply2DTransform=function(f){return function(){var M=arguments;M.length===3&&(M=M[0]);var T=arguments.length===1?M[0]:[M[0],M[1]];return G.dot(f,[T[0],T[1],1]).slice(0,2)}},G.apply2DTransform2=function(f){var M=G.apply2DTransform(f);return function(T){return M(T.slice(0,2)).concat(M(T.slice(2,4)))}},G.convertCssMatrix=function(f){if(f){var M=f.length;if(M===16)return f;if(M===6)return[f[0],f[1],0,0,f[2],f[3],0,0,0,0,1,0,f[4],f[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},G.inverseTransformMatrix=function(f){var M=[];return x.invert(M,f),[[M[0],M[1],M[2],M[3]],[M[4],M[5],M[6],M[7]],[M[8],M[9],M[10],M[11]],[M[12],M[13],M[14],M[15]]]}},{"gl-mat4":210}],522:[function(t,B,G){function x(M,T){var e=M%T;return e<0?e+T:e}function f(M,T){return Math.abs(M)>T/2?M-Math.round(M/T)*T:M}B.exports={mod:x,modHalf:f}},{}],523:[function(t,B,G){var x=t("fast-isnumeric"),f=t("./array").isArrayOrTypedArray;B.exports=function(o,b){if(x(b))b=String(b);else if(typeof b!="string"||b.substr(b.length-4)==="[-1]")throw"bad property string";for(var g=0,d=b.split("."),c,m,l;g<d.length;){if(c=String(d[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),c){if(c[1])d[g]=c[1];else if(g===0)d.splice(0,1);else throw"bad property string";for(m=c[2].substr(1,c[2].length-2).split("]["),l=0;l<m.length;l++)g++,d.splice(g,0,Number(m[l]))}g++}return typeof o!="object"?v(o,b,d):{set:a(o,d,b),get:M(o,d),astr:b,parts:d,obj:o}};function M(s,o){return function(){var b=s,g,d,c,m,l;for(m=0;m<o.length-1;m++){if(g=o[m],g===-1){for(d=!0,c=[],l=0;l<b.length;l++)c[l]=M(b[l],o.slice(m+1))(),c[l]!==c[0]&&(d=!1);return d?c[0]:c}if(typeof g=="number"&&!f(b)||(b=b[g],typeof b!="object"||b===null))return}if(!(typeof b!="object"||b===null)&&(c=b[o[m]],c!==null))return c}}var T=/(^|\.)args\[/;function e(s,o){return s===void 0||s===null&&!o.match(T)}function a(s,o,b){return function(g){var d=s,c="",m=e(g,b),l,y;for(y=0;y<o.length-1;y++){if(l=o[y],typeof l=="number"&&!f(d))throw"array index but container is not an array";if(l===-1){if(m=!n(d,o.slice(y+1),g,b),m)break;return}if(!r(d,l,o[y+1],m))break;if(d=d[l],typeof d!="object"||d===null)throw"container is not an object";c=i(c,l)}if(m){if(y===o.length-1&&(delete d[o[y]],Array.isArray(d)&&+o[y]===d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[o[y]]=g}}function i(s,o){var b=o;return x(o)?b="["+o+"]":s&&(b="."+o),s+b}function n(s,o,b,g){var d=f(b),c=!0,m=b,l=g.replace("-1",0),y=d?!1:e(b,l),u=o[0],A;for(A=0;A<s.length;A++)l=g.replace("-1",A),d&&(m=b[A%b.length],y=e(m,l)),y&&(c=!1),r(s,A,u,y)&&a(s[A],o,g.replace("-1",A))(m);return c}function r(s,o,b,g){if(s[o]===void 0){if(g)return!1;typeof b=="number"?s[o]=[]:s[o]={}}return!0}function v(s,o,b){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:b,obj:s}}},{"./array":497,"fast-isnumeric":190}],524:[function(t,B,G){B.exports=function(){}},{}],525:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=[];B.exports=function(T,e){if(M.indexOf(T)!==-1)return;M.push(T);var a=1e3;f(e)?a=e:e==="long"&&(a=3e3);var i=x.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(M);function r(v){v.duration(700).style("opacity",0).each("end",function(s){var o=M.indexOf(s);o!==-1&&M.splice(o,1),x.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(v){var s=x.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(r)});for(var o=s.append("p"),b=v.split(/<br\s*\/?>/g),g=0;g<b.length;g++)g&&o.append("br"),o.append("span").text(b[g]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(a).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(t,B,G){var x=t("./setcursor"),f="data-savedcursor",M="!!";B.exports=function(e,a){var i=e.attr(f);if(a){if(!i){for(var n=(e.attr("class")||"").split(" "),r=0;r<n.length;r++){var v=n[r];v.indexOf("cursor-")===0&&e.attr(f,v.substr(7)).classed(v,!1)}e.attr(f)||e.attr(f,M)}x(e,a)}else i&&(e.attr(f,null),i===M?x(e):x(e,i))}},{"./setcursor":536}],527:[function(t,B,G){var x=t("./matrix").dot,f=t("../constants/numerical").BADNUM,M=B.exports={};M.tester=function(e){var a=e.slice(),i=a[0][0],n=i,r=a[0][1],v=r,s;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),s=1;s<a.length;s++)i=Math.min(i,a[s][0]),n=Math.max(n,a[s][0]),r=Math.min(r,a[s][1]),v=Math.max(v,a[s][1]);var o=!1,b;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(o=!0,b=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(o=!0,b=function(l){return l[1]===a[0][1]}));function g(l,y){var u=l[0],A=l[1];return!(u===f||u<i||u>n||A===f||A<r||A>v||y&&b(l))}function d(l,y){var u=l[0],A=l[1];if(u===f||u<i||u>n||A===f||A<r||A>v)return!1;var _=a.length,p=a[0][0],w=a[0][1],h=0,L,E,S,P,F;for(L=1;L<_;L++)if(E=p,S=w,p=a[L][0],w=a[L][1],P=Math.min(E,p),!(u<P||u>Math.max(E,p)||A>Math.max(S,w)))if(A<Math.min(S,w))u!==P&&h++;else{if(p===E?F=A:F=S+(u-E)*(w-S)/(p-E),A===F)return!(L===1&&y);A<=F&&u!==P&&h++}return h%2===1}var c=!0,m=a[0];for(s=1;s<a.length;s++)if(m[0]!==a[s][0]||m[1]!==a[s][1]){c=!1;break}return{xmin:i,xmax:n,ymin:r,ymax:v,pts:a,contains:o?g:d,isRect:o,degenerate:c}},M.isSegmentBent=function(e,a,i,n){var r=e[a],v=[e[i][0]-r[0],e[i][1]-r[1]],s=x(v,v),o=Math.sqrt(s),b=[-v[1]/o,v[0]/o],g,d,c;for(g=a+1;g<i;g++)if(d=[e[g][0]-r[0],e[g][1]-r[1]],c=x(d,v),c<0||c>s||Math.abs(x(d,b))>n)return!0;return!1},M.filter=function(e,a){var i=[e[0]],n=0,r=0;function v(o){e.push(o);var b=i.length,g=n;i.splice(r+1);for(var d=g+1;d<e.length;d++)(d===e.length-1||M.isSegmentBent(e,g,d+1,a))&&(i.push(e[d]),i.length<b-2&&(n=d,r=i.length-1),g=d)}if(e.length>1){var s=e.pop();v(s)}return{addPt:v,raw:e,filtered:i}}},{"../constants/numerical":491,"./matrix":521}],528:[function(t,B,G){(function(x){(function(){var f=t("./show_no_webgl_msg"),M=t("regl");B.exports=function(e,a,i){var n=e._fullLayout,r=!0;return n._glcanvas.each(function(v){if(v.regl){v.regl.preloadCachedCode(i);return}if(!(v.pick&&!n._has("parcoords"))){try{v.regl=M({canvas:this,attributes:{antialias:!v.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||x.devicePixelRatio,extensions:a||[],cachedCode:i||{}})}catch{r=!1}v.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(s){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:s,layer:v.key})},!1)}}),r||f({container:n._glcontainer.node()}),r}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(t,B,G){var x=t("fast-isnumeric"),f=t("is-mobile");B.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=M(),typeof a!="string")return!0;var i=f({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!i)for(var n=a.split(" "),r=1;r<n.length;r++){var v=n[r];if(v.indexOf("Safari")!==-1)for(var s=r-1;s>-1;s--){var o=n[s];if(o.substr(0,8)==="Version/"){var b=o.substr(8).split(".")[0];if(x(b)&&(b=+b),b>=13)return!0}}}return i};function M(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(t,B,G){B.exports=function(f,M){if(M instanceof RegExp){for(var T=M.toString(),e=0;e<f.length;e++)if(f[e]instanceof RegExp&&f[e].toString()===T)return f;f.push(M)}else(M||M===0)&&f.indexOf(M)===-1&&f.push(M);return f}},{}],531:[function(t,B,G){var x=t("../lib"),f=t("../plot_api/plot_config").dfltConfig;function M(e,a){for(var i=[],n,r=0;r<a.length;r++)n=a[r],n===e?i[r]=n:typeof n=="object"?i[r]=Array.isArray(n)?x.extendDeep([],n):x.extendDeepAll({},n):i[r]=n;return i}var T={};T.add=function(e,a,i,n,r){var v,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(v={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,v),e.undoQueue.index+=1):v=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,v&&(v.undo.calls.unshift(a),v.undo.args.unshift(i),v.redo.calls.push(n),v.redo.args.push(r)),e.undoQueue.queue.length>f.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.undo.calls.length;n++)T.plotDo(a,i.undo.calls[n],i.undo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.redo.calls.length;n++)T.plotDo(a,i.redo.calls[n],i.redo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,i){e.autoplay=!0,i=M(e,i),a.apply(null,i)},B.exports=T},{"../lib":515,"../plot_api/plot_config":553}],532:[function(t,B,G){G.counter=function(x,f,M,T){var e=(f||"")+(M?"":"$"),a=T===!1?"":"^";return x==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+x+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(t,B,G){var x=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,f=/^[^\.\[\]]+$/;B.exports=function(M,T){for(;T;){var e=M.match(x);if(e)M=e[1];else if(M.match(f))M="";else throw new Error("bad relativeAttr call:"+[M,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return M&&T.charAt(0)!=="["?M+"."+T:M+T}},{}],534:[function(t,B,G){var x=t("./array").isArrayOrTypedArray,f=t("./is_plain_object");B.exports=function M(T,e){for(var a in e){var i=e[a],n=T[a];if(n!==i)if(a.charAt(0)==="_"||typeof i=="function"){if(a in T)continue;T[a]=i}else if(x(i)&&x(n)&&f(i[0])){if(a==="customdata"||a==="ids")continue;for(var r=Math.min(i.length,n.length),v=0;v<r;v++)n[v]!==i[v]&&f(i[v])&&f(n[v])&&M(n[v],i[v])}else f(i)&&f(n)&&(M(n,i),Object.keys(n).length||delete T[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(t,B,G){var x=t("fast-isnumeric"),f=t("./loggers"),M=t("./identity"),T=t("../constants/numerical").BADNUM,e=1e-9;G.findBin=function(v,s,o){if(x(s.start))return o?Math.ceil((v-s.start)/s.size-e)-1:Math.floor((v-s.start)/s.size+e);var b=0,g=s.length,d=0,c=g>1?(s[g-1]-s[0])/(g-1):1,m,l;for(c>=0?l=o?a:i:l=o?r:n,v+=c*e*(o?-1:1)*(c>=0?1:-1);b<g&&d++<100;)m=Math.floor((b+g)/2),l(s[m],v)?b=m+1:g=m;return d>90&&f.log("Long binary search..."),b-1};function a(v,s){return v<s}function i(v,s){return v<=s}function n(v,s){return v>s}function r(v,s){return v>=s}G.sorterAsc=function(v,s){return v-s},G.sorterDes=function(v,s){return s-v},G.distinctVals=function(v){var s=v.slice();s.sort(G.sorterAsc);var o;for(o=s.length-1;o>-1&&s[o]===T;o--);for(var b=s[o]-s[0]||1,g=b/(o||1)/1e4,d=[],c,m=0;m<=o;m++){var l=s[m],y=l-c;c===void 0?(d.push(l),c=l):y>g&&(b=Math.min(b,y),d.push(l),c=l)}return{vals:d,minDiff:b}},G.roundUp=function(v,s,o){for(var b=0,g=s.length-1,d,c=0,m=o?0:1,l=o?1:0,y=o?Math.ceil:Math.floor;b<g&&c++<100;)d=y((b+g)/2),s[d]<=v?b=d+m:g=d-l;return s[b]},G.sort=function(v,s){for(var o=0,b=0,g=1;g<v.length;g++){var d=s(v[g],v[g-1]);if(d<0?o=1:d>0&&(b=1),o&&b)return v.sort(s)}return b?v:v.reverse()},G.findIndexOfMin=function(v,s){s=s||M;for(var o=1/0,b,g=0;g<v.length;g++){var d=s(v[g]);d<o&&(o=d,b=g)}return b}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(t,B,G){B.exports=function(f,M){(f.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&f.classed(T,!1)}),M&&f.classed("cursor-"+M,!0)}},{}],537:[function(t,B,G){var x=t("../components/color"),f=function(){};B.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=f);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=x.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=x.lightLine,a.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",a.appendChild(i),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(t,B,G){B.exports=function(f){return Object.keys(f).sort()}},{}],539:[function(t,B,G){var x=t("fast-isnumeric"),f=t("./array").isArrayOrTypedArray;G.aggNums=function(M,T,e,a){var i,n;if((!a||a>e.length)&&(a=e.length),x(T)||(T=!1),f(e[0])){for(n=new Array(a),i=0;i<a;i++)n[i]=G.aggNums(M,T,e[i]);e=n}for(i=0;i<a;i++)x(T)?x(e[i])&&(T=M(+T,+e[i])):T=e[i];return T},G.len=function(M){return G.aggNums(function(T){return T+1},0,M)},G.mean=function(M,T){return T||(T=G.len(M)),G.aggNums(function(e,a){return e+a},0,M)/T},G.midRange=function(M){if(!(M===void 0||M.length===0))return(G.aggNums(Math.max,null,M)+G.aggNums(Math.min,null,M))/2},G.variance=function(M,T,e){return T||(T=G.len(M)),x(e)||(e=G.mean(M,T)),G.aggNums(function(a,i){return a+Math.pow(i-e,2)},0,M)/T},G.stdev=function(M,T,e){return Math.sqrt(G.variance(M,T,e))},G.median=function(M){var T=M.slice().sort();return G.interp(T,.5)},G.interp=function(M,T){if(!x(T))throw"n should be a finite number";if(T=T*M.length-.5,T<0)return M[0];if(T>M.length-1)return M[M.length-1];var e=T%1;return e*M[Math.ceil(T)]+(1-e)*M[Math.floor(T)]}},{"./array":497,"fast-isnumeric":190}],540:[function(t,B,G){var x=t("color-normalize");function f(M){return M?x(M):[0,0,0,1]}B.exports=f},{"color-normalize":89}],541:[function(t,B,G){var x=t("@plotly/d3"),f=t("../lib"),M=f.strTranslate,T=t("../constants/xmlns_namespaces"),e=t("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;G.convertToTspans=function(z,H,Y){var ee=z.text(),j=!z.attr("data-notex")&&H&&H._context.typesetMath&&typeof MathJax<"u"&&ee.match(a),X=x.select(z.node().parentNode);if(X.empty())return;var ae=z.attr("class")?z.attr("class").split(" ")[0]:"text";ae+="-math",X.selectAll("svg."+ae).remove(),X.selectAll("g."+ae+"-group").remove(),z.style("display",null).attr({"data-unformatted":ee,"data-math":"N"});function fe(){X.empty()||(ae=z.attr("class")+"-math",X.select("svg."+ae).remove()),z.text("").style("white-space","pre");var K=I(z.node(),ee);K&&z.style("pointer-events","all"),G.positionText(z),Y&&Y.call(z)}return j?(H&&H._promises||[]).push(new Promise(function(K){z.style("display","none");var J=parseInt(z.node().style.fontSize,10),U={fontSize:J};s(j[2],U,function(V,q,re){X.selectAll("svg."+ae).remove(),X.selectAll("g."+ae+"-group").remove();var Z=V&&V.select("svg");if(!Z||!Z.node()){fe(),K();return}var Q=X.append("g").classed(ae+"-group",!0).attr({"pointer-events":"none","data-unformatted":ee,"data-math":"Y"});Q.node().appendChild(Z.node()),q&&q.node()&&Z.node().insertBefore(q.node().cloneNode(!0),Z.node().firstChild);var ie=re.width,oe=re.height;Z.attr({class:ae,height:oe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ne=z.node().style.fill||"black",se=Z.select("g");se.attr({fill:ne,stroke:ne});var _e=se.node().getBoundingClientRect(),ue=_e.width,ge=_e.height;(ue>ie||ge>oe)&&(Z.style("overflow","hidden"),_e=Z.node().getBoundingClientRect(),ue=_e.width,ge=_e.height);var xe=+z.attr("x"),ye=+z.attr("y"),be=J||z.node().getBoundingClientRect().height,Se=-be/4;if(ae[0]==="y")Q.attr({transform:"rotate("+[-90,xe,ye]+")"+M(-ue/2,Se-ge/2)});else if(ae[0]==="l")ye=Se-ge/2;else if(ae[0]==="a"&&ae.indexOf("atitle")!==0)xe=0,ye=Se;else{var Re=z.attr("text-anchor");xe=xe-ue*(Re==="middle"?.5:Re==="end"?1:0),ye=ye+Se-ge/2}Z.attr({x:xe,y:ye}),Y&&Y.call(z,Q),K(Q)})})):fe(),z};var i=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;function r(z){return z.replace(i,"\\lt ").replace(n,"\\gt ")}var v=[["$","$"],["\\(","\\)"]];function s(z,H,Y){var ee=parseInt((MathJax.version||"").split(".")[0]);if(ee!==2&&ee!==3){f.warn("No MathJax version:",MathJax.version);return}var j,X,ae,fe,K=function(){return X=f.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:v},displayAlign:"left"})},J=function(){X=f.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=v},U=function(){if(j=MathJax.Hub.config.menuSettings.renderer,j!=="SVG")return MathJax.Hub.setRenderer("SVG")},V=function(){j=MathJax.config.startup.output,j!=="svg"&&(MathJax.config.startup.output="svg")},q=function(){var ne="math-output-"+f.randstr({},64);fe=x.select("body").append("div").attr({id:ne}).style({visibility:"hidden",position:"absolute","font-size":H.fontSize+"px"}).text(r(z));var se=fe.node();return ee===2?MathJax.Hub.Typeset(se):MathJax.typeset([se])},re=function(){var ne=fe.select(ee===2?".MathJax_SVG":".MathJax"),se=!ne.empty()&&fe.select("svg").node();if(!se)f.log("There was an error in the tex syntax.",z),Y();else{var _e=se.getBoundingClientRect(),ue;ee===2?ue=x.select("body").select("#MathJax_SVG_glyphs"):ue=ne.select("defs"),Y(ne,ue,_e)}fe.remove()},Z=function(){if(j!=="SVG")return MathJax.Hub.setRenderer(j)},Q=function(){j!=="svg"&&(MathJax.config.startup.output=j)},ie=function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(X)},oe=function(){MathJax.config=X};ee===2?MathJax.Hub.Queue(K,U,q,re,Z,ie):ee===3&&(J(),V(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),re(),Q(),oe()}))}var o={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},b={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},d="\u200B",c=["http:","https:","mailto:","",void 0,":"],m=G.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,u=/<br(\s+.*)?>/i;G.BR_TAG_ALL=/<br(\s+.*)?>/gi;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,w=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function h(z,H){if(!z)return null;var Y=z.match(H),ee=Y&&(Y[3]||Y[4]);return ee&&P(ee)}var L=/(^|;)\s*color:/;G.plainText=function(z,H){H=H||{};for(var Y=H.len!==void 0&&H.len!==-1?H.len:1/0,ee=H.allowedTags!==void 0?H.allowedTags:["br"],j="...",X=j.length,ae=z.split(l),fe=[],K="",J=0,U=0;U<ae.length;U++){var V=ae[U],q=V.match(y),re=q&&q[2].toLowerCase();if(re)ee.indexOf(re)!==-1&&(fe.push(V),K=re);else{var Z=V.length;if(J+Z<Y)fe.push(V),J+=Z;else if(J<Y){var Q=Y-J;K&&(K!=="br"||Q<=X||Z<=X)&&fe.pop(),Y>X?fe.push(V.substr(0,Q-X)+j):fe.push(V.substr(0,Q));break}K=""}}return fe.join("")};var E={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(z){return z.replace(S,function(H,Y){var ee;return Y.charAt(0)==="#"?ee=F(Y.charAt(1)==="x"?parseInt(Y.substr(2),16):parseInt(Y.substr(1),10)):ee=E[Y],ee||H})}G.convertEntities=P;function F(z){if(!(z>1114111)){var H=String.fromCodePoint;if(H)return H(z);var Y=String.fromCharCode;return z<=65535?Y(z):Y((z>>10)+55232,z%1024+56320)}}function I(z,H){H=H.replace(m," ");var Y=!1,ee=[],j,X=-1;function ae(){X++;var ge=document.createElementNS(T.svg,"tspan");x.select(ge).attr({class:"line",dy:X*e+"em"}),z.appendChild(ge),j=ge;var xe=ee;if(ee=[{node:ge}],xe.length>1)for(var ye=1;ye<xe.length;ye++)fe(xe[ye])}function fe(ge){var xe=ge.type,ye={},be;if(xe==="a"){be="a";var Se=ge.target,Re=ge.href,Ve=ge.popup;Re&&(ye={"xlink:xlink:show":Se==="_blank"||Se.charAt(0)!=="_"?"new":"replace",target:Se,"xlink:xlink:href":Re},Ve&&(ye.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ve+'");return false;'))}else be="tspan";ge.style&&(ye.style=ge.style);var Ae=document.createElementNS(T.svg,be);if(xe==="sup"||xe==="sub"){K(j,d),j.appendChild(Ae);var Ce=document.createElementNS(T.svg,"tspan");K(Ce,d),x.select(Ce).attr("dy",g[xe]),ye.dy=b[xe],j.appendChild(Ae),j.appendChild(Ce)}else j.appendChild(Ae);x.select(Ae).attr(ye),j=ge.node=Ae,ee.push(ge)}function K(ge,xe){ge.appendChild(document.createTextNode(xe))}function J(ge){if(ee.length===1){f.log("Ignoring unexpected end tag </"+ge+">.",H);return}var xe=ee.pop();ge!==xe.type&&f.log("Start tag <"+xe.type+"> doesnt match end tag <"+ge+">. Pretending it did match.",H),j=ee[ee.length-1].node}var U=u.test(H);U?ae():(j=z,ee=[{node:z}]);for(var V=H.split(l),q=0;q<V.length;q++){var re=V[q],Z=re.match(y),Q=Z&&Z[2].toLowerCase(),ie=o[Q];if(Q==="br")ae();else if(ie===void 0)K(j,P(re));else if(Z[1])J(Q);else{var oe=Z[4],ne={type:Q},se=h(oe,A);if(se?(se=se.replace(L,"$1 fill:"),ie&&(se+=";"+ie)):ie&&(se=ie),se&&(ne.style=se),Q==="a"){Y=!0;var _e=h(oe,_);if(_e){var ue=D(_e);ue&&(ne.href=ue,ne.target=h(oe,p)||"_blank",ne.popup=h(oe,w))}}fe(ne)}}return Y}function D(z){var H=encodeURI(decodeURI(z)),Y=document.createElement("a"),ee=document.createElement("a");Y.href=z,ee.href=H;var j=Y.protocol,X=ee.protocol;return c.indexOf(j)!==-1&&c.indexOf(X)!==-1?H:""}G.sanitizeHTML=function(H){H=H.replace(m," ");for(var Y=document.createElement("p"),ee=Y,j=[],X=H.split(l),ae=0;ae<X.length;ae++){var fe=X[ae],K=fe.match(y),J=K&&K[2].toLowerCase();if(J in o)if(K[1])j.length&&(ee=j.pop());else{var U=K[4],V=h(U,A),q=V?{style:V}:{};if(J==="a"){var re=h(U,_);if(re){var Z=D(re);if(Z){q.href=Z;var Q=h(U,p);Q&&(q.target=Q)}}}var ie=document.createElement(J);ee.appendChild(ie),x.select(ie).attr(q),ee=ie,j.push(ie)}else ee.appendChild(document.createTextNode(P(fe)))}var oe="innerHTML";return Y[oe]},G.lineCount=function(H){return H.selectAll("tspan.line").size()||1},G.positionText=function(H,Y,ee){return H.each(function(){var j=x.select(this);function X(K,J){return J===void 0?(J=j.attr(K),J===null&&(j.attr(K,0),J=0)):j.attr(K,J),J}var ae=X("x",Y),fe=X("y",ee);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:ae,y:fe})})};function R(z,H,Y){var ee=Y.horizontalAlign,j=Y.verticalAlign||"top",X=z.node().getBoundingClientRect(),ae=H.node().getBoundingClientRect(),fe,K,J;return j==="bottom"?K=function(){return X.bottom-fe.height}:j==="middle"?K=function(){return X.top+(X.height-fe.height)/2}:K=function(){return X.top},ee==="right"?J=function(){return X.right-fe.width}:ee==="center"?J=function(){return X.left+(X.width-fe.width)/2}:J=function(){return X.left},function(){fe=this.node().getBoundingClientRect();var U=J()-ae.left,V=K()-ae.top,q=Y.gd||{};if(Y.gd){q._fullLayout._calcInverseTransform(q);var re=f.apply3DTransform(q._fullLayout._invTransform)(U,V);U=re[0],V=re[1]}return this.style({top:V+"px",left:U+"px","z-index":1e3}),this}}var O="1px ";G.makeTextShadow=function(z){var H=O,Y=O,ee=O;return H+Y+ee+z+", -"+H+"-"+Y+ee+z+", "+H+"-"+Y+ee+z+", -"+H+Y+ee+z},G.makeEditable=function(z,H){var Y=H.gd,ee=H.delegate,j=x.dispatch("edit","input","cancel"),X=ee||z;if(z.style({"pointer-events":ee?"none":"all"}),z.size()!==1)throw new Error("boo");function ae(){K(),z.style({opacity:0});var J=X.attr("class"),U;J?U="."+J.split(" ")[0]+"-math-group":U="[class*=-math-group]",U&&x.select(z.node().parentNode).select(U).style({opacity:0})}function fe(J){var U=J.node(),V=document.createRange();V.selectNodeContents(U);var q=window.getSelection();q.removeAllRanges(),q.addRange(V),U.focus()}function K(){var J=x.select(Y),U=J.select(".svg-container"),V=U.append("div"),q=z.node().style,re=parseFloat(q.fontSize||12),Z=H.text;Z===void 0&&(Z=z.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":re,color:H.fill||q.fill||"black",opacity:1,"background-color":H.background||"transparent",outline:"#ffffff33 1px solid",margin:[-re/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(R(z,U,H)).on("blur",function(){Y._editing=!1,z.text(this.textContent).style({opacity:1});var Q=x.select(this).attr("class"),ie;Q?ie="."+Q.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&x.select(z.node().parentNode).select(ie).style({opacity:0});var oe=this.textContent;x.select(this).transition().duration(0).remove(),x.select(document).on("mouseup",null),j.edit.call(z,oe)}).on("focus",function(){var Q=this;Y._editing=!0,x.select(document).on("mouseup",function(){if(x.event.target===Q)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){x.event.which===27?(Y._editing=!1,z.style({opacity:1}),x.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(z,this.textContent)):(j.input.call(z,this.textContent),x.select(this).call(R(z,U,H)))}).on("keydown",function(){x.event.which===13&&this.blur()}).call(fe)}return H.immediate?ae():X.on("click",ae),x.rebind(z,j,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(t,B,G){var x={};G.throttle=function(T,e,a){var i=x[T],n=Date.now();if(!i){for(var r in x)x[r].ts<n-6e4&&delete x[r];i=x[T]={ts:0,timer:null}}f(i);function v(){a(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}if(n>i.ts+e){v();return}i.timer=setTimeout(function(){v(),i.timer=null},e)},G.done=function(M){var T=x[M];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},G.clear=function(M){if(M)f(x[M]),delete x[M];else for(var T in x)G.clear(T)};function f(M){M&&M.timer!==null&&(clearTimeout(M.timer),M.timer=null)}},{}],543:[function(t,B,G){var x=t("fast-isnumeric");B.exports=function(M,T){if(M>0)return Math.log(M)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return x(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],544:[function(t,B,G){var x=B.exports={},f=t("../plots/geo/constants").locationmodeToLayer,M=t("topojson-client").feature;x.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},x.getTopojsonPath=function(T,e){return T+e+".json"},x.getTopojsonFeatures=function(T,e){var a=f[T.locationmode],i=e.objects[a];return M(e,i).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(t,B,G){B.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(t,B,G){B.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(t,B,G){var x=t("../registry");B.exports=function(M){for(var T=x.layoutArrayContainers,e=x.layoutArrayRegexes,a=M.split("[")[0],i,n,r=0;r<e.length;r++)if(n=M.match(e[r]),n&&n.index===0){i=n[0];break}if(i||(i=T[T.indexOf(a)]),!i)return!1;var v=M.substr(i.length);return v?(n=v.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),n?{array:i,index:Number(n[1]),property:n[3]||""}:!1):{array:i,index:"",property:""}}},{"../registry":647}],548:[function(t,B,G){var x=t("../lib"),f=x.extendFlat,M=x.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),i=e.flags.slice().concat("layoutReplot");B.exports={traces:T,layout:e,traceFlags:function(){return n(a)},layoutFlags:function(){return n(i)},update:function(s,o){var b=o.editType;if(b&&b!=="none")for(var g=b.split("+"),d=0;d<g.length;d++)s[g[d]]=!0},overrideAll:r};function n(s){for(var o={},b=0;b<s.length;b++)o[s[b]]=!1;return o}function r(s,o,b){var g=f({},s);for(var d in g){var c=g[d];M(c)&&(g[d]=v(c,o,b,d))}return b==="from-root"&&(g.editType=o),g}function v(s,o,b,g){if(s.valType){var d=f({},s);if(d.editType=o,Array.isArray(s.items)){d.items=new Array(s.items.length);for(var c=0;c<s.items.length;c++)d.items[c]=v(s.items[c],o)}return d}else return r(s,o,g.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(t,B,G){var x=t("fast-isnumeric"),f=t("gl-mat4/fromQuat"),M=t("../registry"),T=t("../lib"),e=t("../plots/plots"),a=t("../plots/cartesian/axis_ids"),i=t("../components/color"),n=a.cleanId,r=a.getFromTrace,v=M.traceIs;G.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&T.log("Clearing previous rejected promises from queue."),u._promises=[]},G.cleanLayout=function(u){var A,_;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var p=(e.subplotsRegistry.cartesian||{}).attrRegex,w=(e.subplotsRegistry.polar||{}).attrRegex,h=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(u);for(A=0;A<E.length;A++){var S=E[A];if(p&&p.test(S)){var P=u[S];P.anchor&&P.anchor!=="free"&&(P.anchor=n(P.anchor)),P.overlaying&&(P.overlaying=n(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,c(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),o(P)}else if(w&&w.test(S)){var F=u[S];o(F.radialaxis)}else if(h&&h.test(S)){var I=u[S];o(I.aaxis),o(I.baxis),o(I.caxis)}else if(L&&L.test(S)){var D=u[S],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var O=R[0],z=R[1],H=R[2],Y=f([],O),ee=[];for(_=0;_<3;++_)ee[_]=z[_]+H*Y[2+4*_];D.camera={eye:{x:ee[0],y:ee[1],z:ee[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}o(D.xaxis),o(D.yaxis),o(D.zaxis)}}var j=Array.isArray(u.annotations)?u.annotations.length:0;for(A=0;A<j;A++){var X=u.annotations[A];!T.isPlainObject(X)||(X.ref&&(X.ref==="paper"?(X.xref="paper",X.yref="paper"):X.ref==="data"&&(X.xref="x",X.yref="y"),delete X.ref),s(X,"xref"),s(X,"yref"))}var ae=Array.isArray(u.shapes)?u.shapes.length:0;for(A=0;A<ae;A++){var fe=u.shapes[A];!T.isPlainObject(fe)||(s(fe,"xref"),s(fe,"yref"))}var K=Array.isArray(u.images)?u.images.length:0;for(A=0;A<K;A++){var J=u.images[A];!T.isPlainObject(J)||(s(J,"xref"),s(J,"yref"))}var U=u.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),o(u),u.dragmode==="rotate"&&(u.dragmode="orbit"),i.clean(u),u.template&&u.template.layout&&G.cleanLayout(u.template.layout),u};function s(u,A){var _=u[A],p=A.charAt(0);_&&_!=="paper"&&(u[A]=n(_,p,!0))}function o(u){u&&((typeof u.title=="string"||typeof u.title=="number")&&(u.title={text:u.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"));function A(_,p){var w=u[_],h=u.title&&u.title[p];w&&!h&&(u.title||(u.title={}),u.title[p]=u[_],delete u[_])}}G.cleanData=function(u){for(var A=0;A<u.length;A++){var _=u[A],p;if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var w=i.defaults,h=_.error_y.color||(v(_,"bar")?i.defaultLine:w[A%w.length]);_.error_y.color=i.addOpacity(i.rgb(h),i.opacity(h)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir==="h"&&(v(_,"bar")||_.type.substr(0,9)==="histogram")&&(_.orientation="h",G.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&G.swapXYData(_),(_.type==="histogramx"||_.type==="histogramy")&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=n(_.xaxis,"x")),_.yaxis&&(_.yaxis=n(_.yaxis,"y")),v(_,"gl3d")&&_.scene&&(_.scene=e.subplotsRegistry.gl3d.cleanId(_.scene)),!v(_,"pie-like")&&!v(_,"bar-like"))if(Array.isArray(_.textposition))for(p=0;p<_.textposition.length;p++)_.textposition[p]=d(_.textposition[p]);else _.textposition&&(_.textposition=d(_.textposition));var L=M.getModule(_);if(L&&L.colorbar){var E=L.colorbar.container,S=E?_[E]:_;S&&S.colorscale&&(S.colorscale==="YIGnBu"&&(S.colorscale="YlGnBu"),S.colorscale==="YIOrRd"&&(S.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var P=["x","y","z"];for(p=0;p<P.length;p++){var F=_.contours[P[p]];!T.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var I=(_.increasing||{}).showlegend!==!1,D=(_.decreasing||{}).showlegend!==!1,R=b(_.increasing),O=b(_.decreasing);if(R!==!1&&O!==!1){var z=g(R,O,I,D);z&&(_.name=z)}else(R||O)&&!_.name&&(_.name=R||O)}if(Array.isArray(_.transforms)){var H=_.transforms;for(p=0;p<H.length;p++){var Y=H[p];if(!!T.isPlainObject(Y))switch(Y.type){case"filter":Y.filtersrc&&(Y.target=Y.filtersrc,delete Y.filtersrc),Y.calendar&&(Y.valuecalendar||(Y.valuecalendar=Y.calendar),delete Y.calendar);break;case"groupby":if(Y.styles=Y.styles||Y.style,Y.styles&&!Array.isArray(Y.styles)){var ee=Y.styles,j=Object.keys(ee);Y.styles=[];for(var X=0;X<j.length;X++)Y.styles.push({target:j[X],value:ee[j[X]]})}break}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),i.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}};function b(u){if(!T.isPlainObject(u))return!1;var A=u.name;return delete u.name,delete u.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function g(u,A,_,p){if(_&&!p)return u;if(p&&!_||!u.trim())return A;if(!A.trim())return u;var w=Math.min(u.length,A.length),h;for(h=0;h<w&&u.charAt(h)===A.charAt(h);h++);var L=u.substr(0,h);return L.trim()}function d(u){var A="middle",_="center";return typeof u=="string"&&(u.indexOf("top")!==-1?A="top":u.indexOf("bottom")!==-1&&(A="bottom"),u.indexOf("left")!==-1?_="left":u.indexOf("right")!==-1&&(_="right")),A+" "+_}function c(u,A){return A in u&&typeof u[A]=="object"&&Object.keys(u[A]).length===0}G.swapXYData=function(u){var A;if(T.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var _=u.error_y,p="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);T.swapAttrs(u,["error_?.copy_ystyle"]),p&&T.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if(typeof u.hoverinfo=="string"){var w=u.hoverinfo.split("+");for(A=0;A<w.length;A++)w[A]==="x"?w[A]="y":w[A]==="y"&&(w[A]="x");u.hoverinfo=w.join("+")}},G.coerceTraceIndices=function(u,A){if(x(A))return[A];if(!Array.isArray(A)||!A.length)return u.data.map(function(w,h){return h});if(Array.isArray(A)){for(var _=[],p=0;p<A.length;p++)T.isIndex(A[p],u.data.length)?_.push(A[p]):T.warn("trace index (",A[p],") is not a number or is out of bounds");return _}return A},G.manageArrayContainers=function(u,A,_){var p=u.obj,w=u.parts,h=w.length,L=w[h-1],E=x(L);if(E&&A===null){var S=w.slice(0,h-1).join("."),P=T.nestedProperty(p,S).get();P.splice(L,1)}else E&&u.get()===void 0&&u.get()===void 0&&(_[u.astr]=null),u.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(u){var A=u.search(m);if(A>0)return u.substr(0,A)}G.hasParent=function(u,A){for(var _=l(A);_;){if(_ in u)return!0;_=l(_)}return!1};var y=["x","y","z"];G.clearAxisTypes=function(u,A,_){for(var p=0;p<A.length;p++)for(var w=u._fullData[p],h=0;h<3;h++){var L=r(u,w,y[h]);if(L&&L.type!=="log"){var E=L._name,S=L._id.substr(1);if(S.substr(0,5)==="scene"){if(_[S]!==void 0)continue;E=S+"."+E}var P=E+".type";_[E]===void 0&&_[P]===void 0&&T.nestedProperty(u.layout,P).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(t,B,G){var x=t("./plot_api");G._doPlot=x._doPlot,G.newPlot=x.newPlot,G.restyle=x.restyle,G.relayout=x.relayout,G.redraw=x.redraw,G.update=x.update,G._guiRestyle=x._guiRestyle,G._guiRelayout=x._guiRelayout,G._guiUpdate=x._guiUpdate,G._storeDirectGUIEdit=x._storeDirectGUIEdit,G.react=x.react,G.extendTraces=x.extendTraces,G.prependTraces=x.prependTraces,G.addTraces=x.addTraces,G.deleteTraces=x.deleteTraces,G.moveTraces=x.moveTraces,G.purge=x.purge,G.addFrames=x.addFrames,G.deleteFrames=x.deleteFrames,G.animate=x.animate,G.setPlotConfig=x.setPlotConfig,G.toImage=t("./to_image"),G.validate=t("./validate"),G.downloadImage=t("../snapshot/download");var f=t("./template_api");G.makeTemplate=f.makeTemplate,G.validateTemplate=f.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(t,B,G){var x=t("../lib/is_plain_object"),f=t("../lib/noop"),M=t("../lib/loggers"),T=t("../lib/search").sorterAsc,e=t("../registry");G.containerArrayMatch=t("./container_array_match");var a=G.isAddVal=function(r){return r==="add"||x(r)},i=G.isRemoveVal=function(r){return r===null||r==="remove"};G.applyContainerArrayChanges=function(r,v,s,o,b){var g=v.astr,d=e.getComponentMethod(g,"supplyLayoutDefaults"),c=e.getComponentMethod(g,"draw"),m=e.getComponentMethod(g,"drawOne"),l=o.replot||o.recalc||d===f||c===f,y=r.layout,u=r._fullLayout;if(s[""]){Object.keys(s).length>1&&M.warn("Full array edits are incompatible with other edits",g);var A=s[""][""];if(i(A))v.set(null);else if(Array.isArray(A))v.set(A);else return M.warn("Unrecognized full array edit value",g,A),!0;return l?!1:(d(y,u),c(r),!0)}var _=Object.keys(s).map(Number).sort(T),p=v.get(),w=p||[],h=b(u,g).get(),L=[],E=-1,S=w.length,P,F,I,D,R,O,z,H;for(P=0;P<_.length;P++){if(I=_[P],D=s[I],R=Object.keys(D),O=D[""],z=a(O),I<0||I>w.length-(z?0:1)){M.warn("index out of range",g,I);continue}if(O!==void 0)R.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",g,I),i(O)?L.push(I):z?(O==="add"&&(O={}),w.splice(I,0,O),h&&h.splice(I,0,{})):M.warn("Unrecognized full object edit value",g,I,O),E===-1&&(E=I);else for(F=0;F<R.length;F++)H=g+"["+I+"].",b(w[I],R[F],H).set(D[R[F]])}for(P=L.length-1;P>=0;P--)w.splice(L[P],1),h&&h.splice(L[P],1);if(w.length?p||v.set(w):v.set(null),l)return!1;if(d(y,u),m!==f){var Y;if(E===-1)Y=_;else{for(S=Math.max(w.length,S),Y=[],P=0;P<_.length&&(I=_[P],!(I>=E));P++)Y.push(I);for(P=E;P<S;P++)Y.push(P)}for(P=0;P<Y.length;P++)m(r,Y[P])}else c(r);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("has-hover"),T=t("../lib"),e=T.nestedProperty,a=t("../lib/events"),i=t("../lib/queue"),n=t("../registry"),r=t("./plot_schema"),v=t("../plots/plots"),s=t("../plots/cartesian/axes"),o=t("../components/drawing"),b=t("../components/color"),g=t("../plots/cartesian/graph_interact").initInteractions,d=t("../constants/xmlns_namespaces"),c=t("../components/selections").clearOutline,m=t("./plot_config").dfltConfig,l=t("./manage_arrays"),y=t("./helpers"),u=t("./subroutines"),A=t("./edit_types"),_=t("../plots/cartesian/constants").AX_NAME_PATTERN,p=0,w=5;function h(Ee,He,Ke,et){var At;if(Ee=T.getGraphDiv(Ee),a.init(Ee),T.isPlainObject(He)){var mt=He;He=mt.data,Ke=mt.layout,et=mt.config,At=mt.frames}var Mt=a.triggerHandler(Ee,"plotly_beforeplot",[He,Ke,et]);if(Mt===!1)return Promise.reject();!He&&!Ke&&!T.isPlotDiv(Ee)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ee);function Gt(){if(At)return G.addFrames(Ee,At)}F(Ee,et),Ke||(Ke={}),x.select(Ee).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Ee._promises)||(Ee._promises=[]);var zt=(Ee.data||[]).length===0&&Array.isArray(He);Array.isArray(He)&&(y.cleanData(He),zt?Ee.data=He:Ee.data.push.apply(Ee.data,He),Ee.empty=!1),(!Ee.layout||zt)&&(Ee.layout=y.cleanLayout(Ke)),v.supplyDefaults(Ee);var Ht=Ee._fullLayout,Xt=Ht._has("cartesian");Ht._replotting=!0,(zt||Ht._shouldCreateBgLayer)&&(We(Ee),Ht._shouldCreateBgLayer&&delete Ht._shouldCreateBgLayer),o.initGradients(Ee),o.initPatterns(Ee),zt&&s.saveShowSpikeInitial(Ee);var Wt=!Ee.calcdata||Ee.calcdata.length!==(Ee._fullData||[]).length;Wt&&v.doCalcdata(Ee);for(var sr=0;sr<Ee.calcdata.length;sr++)Ee.calcdata[sr][0].trace=Ee._fullData[sr];Ee._context.responsive?Ee._responsiveChartHandler||(Ee._responsiveChartHandler=function(){T.isHidden(Ee)||v.resize(Ee)},window.addEventListener("resize",Ee._responsiveChartHandler)):T.clearResponsive(Ee);var Gr=T.extendFlat({},Ht._size),cn=0;function en(){for(var ct=Ht._basePlotModules,Et=0;Et<ct.length;Et++)ct[Et].drawFramework&&ct[Et].drawFramework(Ee);!Ht._glcanvas&&Ht._has("gl")&&(Ht._glcanvas=Ht._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(ot){return ot.key}),Ht._glcanvas.enter().append("canvas").attr("class",function(ot){return"gl-canvas gl-canvas-"+ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Nt=Ee._context.plotGlPixelRatio;if(Ht._glcanvas){Ht._glcanvas.attr("width",Ht.width*Nt).attr("height",Ht.height*Nt).style("width",Ht.width+"px").style("height",Ht.height+"px");var Pe=Ht._glcanvas.data()[0].regl;if(Pe&&(Math.floor(Ht.width*Nt)!==Pe._gl.drawingBufferWidth||Math.floor(Ht.height*Nt)!==Pe._gl.drawingBufferHeight)){var Le="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(cn)T.error(Le);else return T.log(Le+" Clearing graph and plotting again."),v.cleanPlot([],{},Ee._fullData,Ht),v.supplyDefaults(Ee),Ht=Ee._fullLayout,v.doCalcdata(Ee),cn++,en()}}return Ht.modebar.orientation==="h"?Ht._modebardiv.style("height",null).style("width","100%"):Ht._modebardiv.style("width",null).style("height",Ht.height+"px"),v.previousPromises(Ee)}function st(){if(v.clearAutoMarginIds(Ee),u.drawMarginPushers(Ee),s.allowAutoMargin(Ee),Ht._has("pie"))for(var ct=Ee._fullData,Et=0;Et<ct.length;Et++){var Nt=ct[Et];Nt.type==="pie"&&Nt.automargin&&v.allowAutoMargin(Ee,"pie."+Nt.uid+".automargin")}return v.doAutoMargin(Ee),v.previousPromises(Ee)}function rr(){if(!!v.didMarginChange(Gr,Ht._size))return T.syncOrAsync([st,u.layoutStyles],Ee)}function er(){if(!Wt){jt();return}return T.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),jt],Ee)}function jt(){Ee._transitioning||(u.doAutoRangeAndConstraints(Ee),zt&&s.saveRangeInitial(Ee),n.getComponentMethod("rangeslider","calcAutorange")(Ee))}function Mr(){return s.draw(Ee,zt?"":"redraw")}var it=[v.previousPromises,Gt,en,st,rr];Xt&&it.push(er),it.push(u.layoutStyles),Xt&&it.push(Mr,function(Et){Et._fullLayout._insideTickLabelsAutorange&&ne(Et,Et._fullLayout._insideTickLabelsAutorange).then(function(){Et._fullLayout._insideTickLabelsAutorange=void 0})}),it.push(u.drawData,u.finalDraw,g,v.addLinks,v.rehover,v.redrag,v.reselect,v.doAutoMargin,Qe,v.previousPromises);function Qe(ct){ct._fullLayout._insideTickLabelsAutorange&&zt&&s.saveRangeInitial(ct,!0)}var ft=T.syncOrAsync(it,Ee);return(!ft||!ft.then)&&(ft=Promise.resolve()),ft.then(function(){return L(Ee),Ee})}function L(Ee){var He=Ee._fullLayout;He._redrawFromAutoMarginCount?He._redrawFromAutoMarginCount--:Ee.emit("plotly_afterplot")}function E(Ee){return T.extendFlat(m,Ee)}function S(Ee,He){try{Ee._fullLayout._paper.style("background",He)}catch(Ke){T.error(Ke)}}function P(Ee,He){var Ke=b.combine(He,"white");S(Ee,Ke)}function F(Ee,He){if(!Ee._context){Ee._context=T.extendDeep({},m);var Ke=x.select("base");Ee._context._baseUrl=Ke.size()&&Ke.attr("href")?window.location.href.split("#")[0]:""}var et=Ee._context,At,mt,Mt;if(He){for(mt=Object.keys(He),At=0;At<mt.length;At++)Mt=mt[At],!(Mt==="editable"||Mt==="edits")&&Mt in et&&(Mt==="setBackground"&&He[Mt]==="opaque"?et[Mt]=P:et[Mt]=He[Mt]);He.plot3dPixelRatio&&!et.plotGlPixelRatio&&(et.plotGlPixelRatio=et.plot3dPixelRatio);var Gt=He.editable;if(Gt!==void 0)for(et.editable=Gt,mt=Object.keys(et.edits),At=0;At<mt.length;At++)et.edits[mt[At]]=Gt;if(He.edits)for(mt=Object.keys(He.edits),At=0;At<mt.length;At++)Mt=mt[At],Mt in et.edits&&(et.edits[Mt]=He.edits[Mt]);et._exportedPlot=He._exportedPlot}et.staticPlot&&(et.editable=!1,et.edits={},et.autosizable=!1,et.scrollZoom=!1,et.doubleClick=!1,et.showTips=!1,et.showLink=!1,et.displayModeBar=!1),et.displayModeBar==="hover"&&!M&&(et.displayModeBar=!0),(et.setBackground==="transparent"||typeof et.setBackground!="function")&&(et.setBackground=S),et._hasZeroHeight=et._hasZeroHeight||Ee.clientHeight===0,et._hasZeroWidth=et._hasZeroWidth||Ee.clientWidth===0;var zt=et.scrollZoom,Ht=et._scrollZoom={};if(zt===!0)Ht.cartesian=1,Ht.gl3d=1,Ht.geo=1,Ht.mapbox=1;else if(typeof zt=="string"){var Xt=zt.split("+");for(At=0;At<Xt.length;At++)Ht[Xt[At]]=1}else zt!==!1&&(Ht.gl3d=1,Ht.geo=1,Ht.mapbox=1)}function I(Ee){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);return y.cleanData(Ee.data),y.cleanLayout(Ee.layout),Ee.calcdata=void 0,G._doPlot(Ee).then(function(){return Ee.emit("plotly_redraw"),Ee})}function D(Ee,He,Ke,et){return Ee=T.getGraphDiv(Ee),v.cleanPlot([],{},Ee._fullData||[],Ee._fullLayout||{}),v.purge(Ee),G._doPlot(Ee,He,Ke,et)}function R(Ee,He){var Ke=He+1,et=[],At,mt;for(At=0;At<Ee.length;At++)mt=Ee[At],mt<0?et.push(Ke+mt):et.push(mt);return et}function O(Ee,He,Ke){var et,At;for(et=0;et<He.length;et++){if(At=He[et],At!==parseInt(At,10))throw new Error("all values in "+Ke+" must be integers");if(At>=Ee.data.length||At<-Ee.data.length)throw new Error(Ke+" must be valid indices for gd.data.");if(He.indexOf(At,et+1)>-1||At>=0&&He.indexOf(-Ee.data.length+At)>-1||At<0&&He.indexOf(Ee.data.length+At)>-1)throw new Error("each index in "+Ke+" must be unique.")}}function z(Ee,He,Ke){if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(He)||(He=[He]),O(Ee,He,"currentIndices"),typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&O(Ee,Ke,"newIndices"),typeof Ke<"u"&&He.length!==Ke.length)throw new Error("current and new indices must be of equal length.")}function H(Ee,He,Ke){var et,At;if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),et=0;et<He.length;et++)if(At=He[et],typeof At!="object"||Array.isArray(At)||At===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&Ke.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Y(Ee,He,Ke,et){var At=T.isPlainObject(et);if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(He))throw new Error("update must be a key:value object");if(typeof Ke>"u")throw new Error("indices must be an integer or array of integers");O(Ee,Ke,"indices");for(var mt in He){if(!Array.isArray(He[mt])||He[mt].length!==Ke.length)throw new Error("attribute "+mt+" must be an array of length equal to indices array length");if(At&&(!(mt in et)||!Array.isArray(et[mt])||et[mt].length!==He[mt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ee(Ee,He,Ke,et){var At=T.isPlainObject(et),mt=[],Mt,Gt,zt,Ht,Xt;Array.isArray(Ke)||(Ke=[Ke]),Ke=R(Ke,Ee.data.length-1);for(var Wt in He)for(var sr=0;sr<Ke.length;sr++){if(Mt=Ee.data[Ke[sr]],zt=e(Mt,Wt),Gt=zt.get(),Ht=He[Wt][sr],!T.isArrayOrTypedArray(Ht))throw new Error("attribute: "+Wt+" index: "+sr+" must be an array");if(!T.isArrayOrTypedArray(Gt))throw new Error("cannot extend missing or non-array attribute: "+Wt);if(Gt.constructor!==Ht.constructor)throw new Error("cannot extend array with an array of a different type: "+Wt);Xt=At?et[Wt][sr]:et,f(Xt)||(Xt=-1),mt.push({prop:zt,target:Gt,insert:Ht,maxp:Math.floor(Xt)})}return mt}function j(Ee,He,Ke,et,At){Y(Ee,He,Ke,et);for(var mt=ee(Ee,He,Ke,et),Mt={},Gt={},zt=0;zt<mt.length;zt++){var Ht=mt[zt].prop,Xt=mt[zt].maxp,Wt=At(mt[zt].target,mt[zt].insert,Xt);Ht.set(Wt[0]),Array.isArray(Mt[Ht.astr])||(Mt[Ht.astr]=[]),Mt[Ht.astr].push(Wt[1]),Array.isArray(Gt[Ht.astr])||(Gt[Ht.astr]=[]),Gt[Ht.astr].push(mt[zt].target.length)}return{update:Mt,maxPoints:Gt}}function X(Ee,He){var Ke=new Ee.constructor(Ee.length+He.length);return Ke.set(Ee),Ke.set(He,Ee.length),Ke}function ae(Ee,He,Ke,et){Ee=T.getGraphDiv(Ee);function At(zt,Ht,Xt){var Wt,sr;if(T.isTypedArray(zt))if(Xt<0){var Gr=new zt.constructor(0),cn=X(zt,Ht);Xt<0?(Wt=cn,sr=Gr):(Wt=Gr,sr=cn)}else if(Wt=new zt.constructor(Xt),sr=new zt.constructor(zt.length+Ht.length-Xt),Xt===Ht.length)Wt.set(Ht),sr.set(zt);else if(Xt<Ht.length){var en=Ht.length-Xt;Wt.set(Ht.subarray(en)),sr.set(zt),sr.set(Ht.subarray(0,en),zt.length)}else{var st=Xt-Ht.length,rr=zt.length-st;Wt.set(zt.subarray(rr)),Wt.set(Ht,st),sr.set(zt.subarray(0,rr))}else Wt=zt.concat(Ht),sr=Xt>=0&&Xt<Wt.length?Wt.splice(0,Wt.length-Xt):[];return[Wt,sr]}var mt=j(Ee,He,Ke,et,At),Mt=G.redraw(Ee),Gt=[Ee,mt.update,Ke,mt.maxPoints];return i.add(Ee,G.prependTraces,Gt,ae,arguments),Mt}function fe(Ee,He,Ke,et){Ee=T.getGraphDiv(Ee);function At(zt,Ht,Xt){var Wt,sr;if(T.isTypedArray(zt))if(Xt<=0){var Gr=new zt.constructor(0),cn=X(Ht,zt);Xt<0?(Wt=cn,sr=Gr):(Wt=Gr,sr=cn)}else if(Wt=new zt.constructor(Xt),sr=new zt.constructor(zt.length+Ht.length-Xt),Xt===Ht.length)Wt.set(Ht),sr.set(zt);else if(Xt<Ht.length){var en=Ht.length-Xt;Wt.set(Ht.subarray(0,en)),sr.set(Ht.subarray(en)),sr.set(zt,en)}else{var st=Xt-Ht.length;Wt.set(Ht),Wt.set(zt.subarray(0,st),Ht.length),sr.set(zt.subarray(st))}else Wt=Ht.concat(zt),sr=Xt>=0&&Xt<Wt.length?Wt.splice(Xt,Wt.length):[];return[Wt,sr]}var mt=j(Ee,He,Ke,et,At),Mt=G.redraw(Ee),Gt=[Ee,mt.update,Ke,mt.maxPoints];return i.add(Ee,G.extendTraces,Gt,fe,arguments),Mt}function K(Ee,He,Ke){Ee=T.getGraphDiv(Ee);var et=[],At=G.deleteTraces,mt=K,Mt=[Ee,et],Gt=[Ee,He],zt,Ht;for(H(Ee,He,Ke),Array.isArray(He)||(He=[He]),He=He.map(function(Xt){return T.extendFlat({},Xt)}),y.cleanData(He),zt=0;zt<He.length;zt++)Ee.data.push(He[zt]);for(zt=0;zt<He.length;zt++)et.push(-He.length+zt);if(typeof Ke>"u")return Ht=G.redraw(Ee),i.add(Ee,At,Mt,mt,Gt),Ht;Array.isArray(Ke)||(Ke=[Ke]);try{z(Ee,et,Ke)}catch(Xt){throw Ee.data.splice(Ee.data.length-He.length,He.length),Xt}return i.startSequence(Ee),i.add(Ee,At,Mt,mt,Gt),Ht=G.moveTraces(Ee,et,Ke),i.stopSequence(Ee),Ht}function J(Ee,He){Ee=T.getGraphDiv(Ee);var Ke=[],et=G.addTraces,At=J,mt=[Ee,Ke,He],Mt=[Ee,He],Gt,zt;if(typeof He>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(He)||(He=[He]),O(Ee,He,"indices"),He=R(He,Ee.data.length-1),He.sort(T.sorterDes),Gt=0;Gt<He.length;Gt+=1)zt=Ee.data.splice(He[Gt],1)[0],Ke.push(zt);var Ht=G.redraw(Ee);return i.add(Ee,et,mt,At,Mt),Ht}function U(Ee,He,Ke){Ee=T.getGraphDiv(Ee);var et=[],At=[],mt=U,Mt=U,Gt=[Ee,Ke,He],zt=[Ee,He,Ke],Ht;if(z(Ee,He,Ke),He=Array.isArray(He)?He:[He],typeof Ke>"u")for(Ke=[],Ht=0;Ht<He.length;Ht++)Ke.push(-He.length+Ht);for(Ke=Array.isArray(Ke)?Ke:[Ke],He=R(He,Ee.data.length-1),Ke=R(Ke,Ee.data.length-1),Ht=0;Ht<Ee.data.length;Ht++)He.indexOf(Ht)===-1&&et.push(Ee.data[Ht]);for(Ht=0;Ht<He.length;Ht++)At.push({newIndex:Ke[Ht],trace:Ee.data[He[Ht]]});for(At.sort(function(Wt,sr){return Wt.newIndex-sr.newIndex}),Ht=0;Ht<At.length;Ht+=1)et.splice(At[Ht].newIndex,0,At[Ht].trace);Ee.data=et;var Xt=G.redraw(Ee);return i.add(Ee,mt,Gt,Mt,zt),Xt}function V(Ee,He,Ke,et){Ee=T.getGraphDiv(Ee),y.clearPromiseQueue(Ee);var At={};if(typeof He=="string")At[He]=Ke;else if(T.isPlainObject(He))At=T.extendFlat({},He),et===void 0&&(et=Ke);else return T.warn("Restyle fail.",He,Ke,et),Promise.reject();Object.keys(At).length&&(Ee.changed=!0);var mt=y.coerceTraceIndices(Ee,et),Mt=ie(Ee,At,mt),Gt=Mt.flags;Gt.calc&&(Ee.calcdata=void 0),Gt.clearAxisTypes&&y.clearAxisTypes(Ee,mt,{});var zt=[];Gt.fullReplot?zt.push(G._doPlot):(zt.push(v.previousPromises),v.supplyDefaults(Ee),Gt.markerSize&&(v.doCalcdata(Ee),_e(zt)),Gt.style&&zt.push(u.doTraceStyle),Gt.colorbars&&zt.push(u.doColorBars),zt.push(L)),zt.push(v.rehover,v.redrag,v.reselect),i.add(Ee,V,[Ee,Mt.undoit,Mt.traces],V,[Ee,Mt.redoit,Mt.traces]);var Ht=T.syncOrAsync(zt,Ee);return(!Ht||!Ht.then)&&(Ht=Promise.resolve()),Ht.then(function(){return Ee.emit("plotly_restyle",Mt.eventData),Ee})}function q(Ee){return Ee===void 0?null:Ee}function re(Ee,He){return He?function(Ke,et,At){var mt=e(Ke,et),Mt=mt.set;return mt.set=function(Gt){var zt=(At||"")+et;Z(zt,mt.get(),Gt,Ee),Mt(Gt)},mt}:e}function Z(Ee,He,Ke,et){if(Array.isArray(He)||Array.isArray(Ke))for(var At=Array.isArray(He)?He:[],mt=Array.isArray(Ke)?Ke:[],Mt=Math.max(At.length,mt.length),Gt=0;Gt<Mt;Gt++)Z(Ee+"["+Gt+"]",At[Gt],mt[Gt],et);else if(T.isPlainObject(He)||T.isPlainObject(Ke)){var zt=T.isPlainObject(He)?He:{},Ht=T.isPlainObject(Ke)?Ke:{},Xt=T.extendFlat({},zt,Ht);for(var Wt in Xt)Z(Ee+"."+Wt,zt[Wt],Ht[Wt],et)}else et[Ee]===void 0&&(et[Ee]=q(He))}function Q(Ee,He,Ke){for(var et in Ke){var At=e(Ee,et);Z(et,At.get(),Ke[et],He)}}function ie(Ee,He,Ke){var et=Ee._fullLayout,At=Ee._fullData,mt=Ee.data,Mt=et._guiEditing,Gt=re(et._preGUI,Mt),zt=T.extendDeepAll({},He),Ht;oe(He);var Xt=A.traceFlags(),Wt={},sr={},Gr;function cn(){return Ke.map(function(){})}function en(Jt){var fr=s.id2name(Jt);Gr.indexOf(fr)===-1&&Gr.push(fr)}function st(Jt){return"LAYOUT"+Jt+".autorange"}function rr(Jt){return"LAYOUT"+Jt+".range"}function er(Jt){for(var fr=Jt;fr<At.length;fr++)if(At[fr]._input===mt[Jt])return At[fr]}function jt(Jt,fr,Nr){if(Array.isArray(Jt)){Jt.forEach(function(jr){jt(jr,fr,Nr)});return}if(!(Jt in He||y.hasParent(He,Jt))){var Vr;if(Jt.substr(0,6)==="LAYOUT")Vr=Gt(Ee.layout,Jt.replace("LAYOUT",""));else{var Dr=Ke[Nr],Er=et._tracePreGUI[er(Dr)._fullInput.uid];Vr=re(Er,Mt)(mt[Dr],Jt)}Jt in sr||(sr[Jt]=cn()),sr[Jt][Nr]===void 0&&(sr[Jt][Nr]=q(Vr.get())),fr!==void 0&&Vr.set(fr)}}function Mr(Jt){return function(fr){return At[fr][Jt]}}function it(Jt){return function(fr,Nr){return fr===!1?At[Ke[Nr]][Jt]:null}}for(var Qe in He){if(y.hasParent(He,Qe))throw new Error("cannot set "+Qe+" and a parent attribute simultaneously");var ft=He[Qe],ct,Et,Nt,Pe,Le,ot;if((Qe==="autobinx"||Qe==="autobiny")&&(Qe=Qe.charAt(Qe.length-1)+"bins",Array.isArray(ft)?ft=ft.map(it(Qe)):ft===!1?ft=Ke.map(Mr(Qe)):ft=null),Wt[Qe]=ft,Qe.substr(0,6)==="LAYOUT"){Nt=Gt(Ee.layout,Qe.replace("LAYOUT","")),sr[Qe]=[q(Nt.get())],Nt.set(Array.isArray(ft)?ft[0]:ft),Xt.calc=!0;continue}for(sr[Qe]=cn(),Ht=0;Ht<Ke.length;Ht++){ct=mt[Ke[Ht]],Et=er(Ke[Ht]);var ut=et._tracePreGUI[Et._fullInput.uid];if(Nt=re(ut,Mt)(ct,Qe),Pe=Nt.get(),Le=Array.isArray(ft)?ft[Ht%ft.length]:ft,Le!==void 0){var pt=Nt.parts[Nt.parts.length-1],Pt=Qe.substr(0,Qe.length-pt.length-1),xt=Pt?Pt+".":"",Lt=Pt?e(Et,Pt).get():Et;if(ot=r.getTraceValObject(Et,Nt.parts),ot&&ot.impliedEdits&&Le!==null)for(var Zt in ot.impliedEdits)jt(T.relativeAttr(Qe,Zt),ot.impliedEdits[Zt],Ht);else if((pt==="thicknessmode"||pt==="lenmode")&&Pe!==Le&&(Le==="fraction"||Le==="pixels")&&Lt){var ur=et._size,Pr=Lt.orient,Ar=Pr==="top"||Pr==="bottom";if(pt==="thicknessmode"){var kr=Ar?ur.h:ur.w;jt(xt+"thickness",Lt.thickness*(Le==="fraction"?1/kr:kr),Ht)}else{var Zr=Ar?ur.w:ur.h;jt(xt+"len",Lt.len*(Le==="fraction"?1/Zr:Zr),Ht)}}else if(Qe==="type"&&(Le==="pie"!=(Pe==="pie")||Le==="funnelarea"!=(Pe==="funnelarea"))){var lr="x",br="y";(Le==="bar"||Pe==="bar")&&ct.orientation==="h"&&(lr="y",br="x"),T.swapAttrs(ct,["?","?src"],"labels",lr),T.swapAttrs(ct,["d?","?0"],"label",lr),T.swapAttrs(ct,["?","?src"],"values",br),Pe==="pie"||Pe==="funnelarea"?(e(ct,"marker.color").set(e(ct,"marker.colors").get()),et._pielayer.selectAll("g.trace").remove()):n.traceIs(ct,"cartesian")&&e(ct,"marker.colors").set(e(ct,"marker.color").get())}sr[Qe][Ht]=q(Pe);var Or=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Or.indexOf(Qe)!==-1){if(Qe==="orientation"){Nt.set(Le);var Hr=ct.x&&!ct.y?"h":"v";if((Nt.get()||Hr)===Et.orientation)continue}else Qe==="orientationaxes"&&(ct.orientation={v:"h",h:"v"}[Et.orientation]);y.swapXYData(ct),Xt.calc=Xt.clearAxisTypes=!0}else v.dataArrayContainers.indexOf(Nt.parts[0])!==-1?(y.manageArrayContainers(Nt,Le,sr),Xt.calc=!0):(ot?ot.arrayOk&&!n.traceIs(Et,"regl")&&(T.isArrayOrTypedArray(Le)||T.isArrayOrTypedArray(Pe))?Xt.calc=!0:A.update(Xt,ot):Xt.calc=!0,Nt.set(Le))}}if(["swapxyaxes","orientationaxes"].indexOf(Qe)!==-1&&s.swap(Ee,Ke),Qe==="orientationaxes"){var Lr=e(Ee.layout,"hovermode"),nt=Lr.get();nt==="x"?Lr.set("y"):nt==="y"?Lr.set("x"):nt==="x unified"?Lr.set("y unified"):nt==="y unified"&&Lr.set("x unified")}if(["orientation","type"].indexOf(Qe)!==-1){for(Gr=[],Ht=0;Ht<Ke.length;Ht++){var It=mt[Ke[Ht]];n.traceIs(It,"cartesian")&&(en(It.xaxis||"x"),en(It.yaxis||"y"))}jt(Gr.map(st),!0,0),jt(Gr.map(rr),[0,1],0)}}return(Xt.calc||Xt.plot)&&(Xt.fullReplot=!0),{flags:Xt,undoit:sr,redoit:Wt,traces:Ke,eventData:T.extendDeepNoArrays([],[zt,Ke])}}function oe(Ee){var He=T.counterRegex("axis",".title",!1,!1),Ke=/colorbar\.title$/,et=Object.keys(Ee),At,mt,Mt;for(At=0;At<et.length;At++)mt=et[At],Mt=Ee[mt],(mt==="title"||He.test(mt)||Ke.test(mt))&&(typeof Mt=="string"||typeof Mt=="number")?Gt(mt,mt.replace("title","title.text")):mt.indexOf("titlefont")>-1&&mt.indexOf("grouptitlefont")===-1?Gt(mt,mt.replace("titlefont","title.font")):mt.indexOf("titleposition")>-1?Gt(mt,mt.replace("titleposition","title.position")):mt.indexOf("titleside")>-1?Gt(mt,mt.replace("titleside","title.side")):mt.indexOf("titleoffset")>-1&&Gt(mt,mt.replace("titleoffset","title.offset"));function Gt(zt,Ht){Ee[Ht]=Ee[zt],delete Ee[zt]}}function ne(Ee,He,Ke){Ee=T.getGraphDiv(Ee),y.clearPromiseQueue(Ee);var et={};if(typeof He=="string")et[He]=Ke;else if(T.isPlainObject(He))et=T.extendFlat({},He);else return T.warn("Relayout fail.",He,Ke),Promise.reject();Object.keys(et).length&&(Ee.changed=!0);var At=ye(Ee,et),mt=At.flags;mt.calc&&(Ee.calcdata=void 0);var Mt=[v.previousPromises];mt.layoutReplot?Mt.push(u.layoutReplot):Object.keys(et).length&&(se(Ee,mt,At)||v.supplyDefaults(Ee),mt.legend&&Mt.push(u.doLegend),mt.layoutstyle&&Mt.push(u.layoutStyles),mt.axrange&&_e(Mt,At.rangesAltered),mt.ticks&&Mt.push(u.doTicksRelayout),mt.modebar&&Mt.push(u.doModeBar),mt.camera&&Mt.push(u.doCamera),mt.colorbars&&Mt.push(u.doColorBars),Mt.push(L)),Mt.push(v.rehover,v.redrag,v.reselect),i.add(Ee,ne,[Ee,At.undoit],ne,[Ee,At.redoit]);var Gt=T.syncOrAsync(Mt,Ee);return(!Gt||!Gt.then)&&(Gt=Promise.resolve(Ee)),Gt.then(function(){return Ee.emit("plotly_relayout",At.eventData),Ee})}function se(Ee,He,Ke){var et=Ee._fullLayout;if(!He.axrange)return!1;for(var At in He)if(At!=="axrange"&&He[At])return!1;for(var mt in Ke.rangesAltered){var Mt=s.id2name(mt),Gt=Ee.layout[Mt],zt=et[Mt];if(zt.autorange=Gt.autorange,Gt.range&&(zt.range=Gt.range.slice()),zt.cleanRange(),zt._matchGroup){for(var Ht in zt._matchGroup)if(Ht!==mt){var Xt=et[s.id2name(Ht)];Xt.autorange=zt.autorange,Xt.range=zt.range.slice(),Xt._input.range=zt.range.slice()}}}return!0}function _e(Ee,He){var Ke=He?function(et){var At=[],mt=!0;for(var Mt in He){var Gt=s.getFromId(et,Mt);if(At.push(Mt),(Gt.ticklabelposition||"").indexOf("inside")!==-1&&Gt._anchorAxis&&At.push(Gt._anchorAxis._id),Gt._matchGroup)for(var zt in Gt._matchGroup)He[zt]||At.push(zt)}return s.draw(et,At,{skipTitle:mt})}:function(et){return s.draw(et,"redraw")};Ee.push(c,u.doAutoRangeAndConstraints,Ke,u.drawData,u.finalDraw)}var ue=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ge=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ye(Ee,He){var Ke=Ee.layout,et=Ee._fullLayout,At=et._guiEditing,mt=re(et._preGUI,At),Mt=Object.keys(He),Gt=s.list(Ee),zt=T.extendDeepAll({},He),Ht={},Xt,Wt,sr;for(oe(He),Mt=Object.keys(He),Wt=0;Wt<Mt.length;Wt++)if(Mt[Wt].indexOf("allaxes")===0){for(sr=0;sr<Gt.length;sr++){var Gr=Gt[sr]._id.substr(1),cn=Gr.indexOf("scene")!==-1?Gr+".":"",en=Mt[Wt].replace("allaxes",cn+Gt[sr]._name);He[en]||(He[en]=He[Mt[Wt]])}delete He[Mt[Wt]]}var st=A.layoutFlags(),rr={},er={};function jt(Dr,Er){if(Array.isArray(Dr)){Dr.forEach(function(kn){jt(kn,Er)});return}if(!(Dr in He||y.hasParent(He,Dr))){var jr=mt(Ke,Dr);Dr in er||(er[Dr]=q(jr.get())),Er!==void 0&&jr.set(Er)}}var Mr={},it;function Qe(Dr){var Er=s.name2id(Dr.split(".")[0]);return Mr[Er]=1,Er}for(var ft in He){if(y.hasParent(He,ft))throw new Error("cannot set "+ft+" and a parent attribute simultaneously");for(var ct=mt(Ke,ft),Et=He[ft],Nt=ct.parts.length,Pe=Nt-1;Pe>0&&typeof ct.parts[Pe]!="string";)Pe--;var Le=ct.parts[Pe],ot=ct.parts[Pe-1]+"."+Le,ut=ct.parts.slice(0,Pe).join("."),pt=e(Ee.layout,ut).get(),Pt=e(et,ut).get(),xt=ct.get();if(Et!==void 0){rr[ft]=Et,er[ft]=Le==="reverse"?Et:q(xt);var Lt=r.getLayoutValObject(et,ct.parts);if(Lt&&Lt.impliedEdits&&Et!==null)for(var Zt in Lt.impliedEdits)jt(T.relativeAttr(ft,Zt),Lt.impliedEdits[Zt]);if(["width","height"].indexOf(ft)!==-1)if(Et){jt("autosize",null);var ur=ft==="height"?"width":"height";jt(ur,et[ur])}else et[ft]=Ee._initialAutoSize[ft];else if(ft==="autosize")jt("width",Et?null:et.width),jt("height",Et?null:et.height);else if(ot.match(ue))Qe(ot),e(et,ut+"._inputRange").set(null);else if(ot.match(ge)){Qe(ot),e(et,ut+"._inputRange").set(null);var Pr=e(et,ut).get();Pr._inputDomain&&(Pr._input.domain=Pr._inputDomain.slice())}else ot.match(xe)&&e(et,ut+"._inputDomain").set(null);if(Le==="type"){it=pt;var Ar=Pt.type==="linear"&&Et==="log",kr=Pt.type==="log"&&Et==="linear";if(Ar||kr){if(!it||!it.range)jt(ut+".autorange",!0);else if(Pt.autorange)Ar&&(it.range=it.range[1]>it.range[0]?[1,2]:[2,1]);else{var Zr=it.range[0],lr=it.range[1];Ar?(Zr<=0&&lr<=0&&jt(ut+".autorange",!0),Zr<=0?Zr=lr/1e6:lr<=0&&(lr=Zr/1e6),jt(ut+".range[0]",Math.log(Zr)/Math.LN10),jt(ut+".range[1]",Math.log(lr)/Math.LN10)):(jt(ut+".range[0]",Math.pow(10,Zr)),jt(ut+".range[1]",Math.pow(10,lr)))}Array.isArray(et._subplots.polar)&&et._subplots.polar.length&&et[ct.parts[0]]&&ct.parts[1]==="radialaxis"&&delete et[ct.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Ee,Pt,Et,jt),n.getComponentMethod("images","convertCoords")(Ee,Pt,Et,jt)}else jt(ut+".autorange",!0),jt(ut+".range",null);e(et,ut+"._inputRange").set(null)}else if(Le.match(_)){var br=e(et,ft).get(),Or=(Et||{}).type;(!Or||Or==="-")&&(Or="linear"),n.getComponentMethod("annotations","convertCoords")(Ee,br,Or,jt),n.getComponentMethod("images","convertCoords")(Ee,br,Or,jt)}var Hr=l.containerArrayMatch(ft);if(Hr){Xt=Hr.array,Wt=Hr.index;var Lr=Hr.property,nt=Lt||{editType:"calc"};Wt!==""&&Lr===""&&(l.isAddVal(Et)?er[ft]=null:l.isRemoveVal(Et)?er[ft]=(e(Ke,Xt).get()||[])[Wt]:T.warn("unrecognized full object value",He)),A.update(st,nt),Ht[Xt]||(Ht[Xt]={});var It=Ht[Xt][Wt];It||(It=Ht[Xt][Wt]={}),It[Lr]=Et,delete He[ft]}else Le==="reverse"?(pt.range?pt.range.reverse():(jt(ut+".autorange",!0),pt.range=[1,0]),Pt.autorange?st.calc=!0:st.plot=!0):(ft==="dragmode"&&(Et===!1&&xt!==!1||Et!==!1&&xt===!1)||et._has("scatter-like")&&et._has("regl")&&ft==="dragmode"&&(Et==="lasso"||Et==="select")&&!(xt==="lasso"||xt==="select")||et._has("gl2d")?st.plot=!0:Lt?A.update(st,Lt):st.calc=!0,ct.set(Et))}}for(Xt in Ht){var Jt=l.applyContainerArrayChanges(Ee,mt(Ke,Xt),Ht[Xt],st,mt);Jt||(st.plot=!0)}for(var fr in Mr){it=s.getFromId(Ee,fr);var Nr=it&&it._constraintGroup;if(Nr){st.calc=!0;for(var Vr in Nr)Mr[Vr]||(s.getFromId(Ee,Vr)._constraintShrinkable=!0)}}return(be(Ee)||He.height||He.width)&&(st.plot=!0),(st.plot||st.calc)&&(st.layoutReplot=!0),{flags:st,rangesAltered:Mr,undoit:er,redoit:rr,eventData:zt}}function be(Ee){var He=Ee._fullLayout,Ke=He.width,et=He.height;return Ee.layout.autosize&&v.plotAutoSize(Ee,Ee.layout,He),He.width!==Ke||He.height!==et}function Se(Ee,He,Ke,et){Ee=T.getGraphDiv(Ee),y.clearPromiseQueue(Ee),T.isPlainObject(He)||(He={}),T.isPlainObject(Ke)||(Ke={}),Object.keys(He).length&&(Ee.changed=!0),Object.keys(Ke).length&&(Ee.changed=!0);var At=y.coerceTraceIndices(Ee,et),mt=ie(Ee,T.extendFlat({},He),At),Mt=mt.flags,Gt=ye(Ee,T.extendFlat({},Ke)),zt=Gt.flags;(Mt.calc||zt.calc)&&(Ee.calcdata=void 0),Mt.clearAxisTypes&&y.clearAxisTypes(Ee,At,Ke);var Ht=[];zt.layoutReplot?Ht.push(u.layoutReplot):Mt.fullReplot?Ht.push(G._doPlot):(Ht.push(v.previousPromises),se(Ee,zt,Gt)||v.supplyDefaults(Ee),Mt.style&&Ht.push(u.doTraceStyle),(Mt.colorbars||zt.colorbars)&&Ht.push(u.doColorBars),zt.legend&&Ht.push(u.doLegend),zt.layoutstyle&&Ht.push(u.layoutStyles),zt.axrange&&_e(Ht,Gt.rangesAltered),zt.ticks&&Ht.push(u.doTicksRelayout),zt.modebar&&Ht.push(u.doModeBar),zt.camera&&Ht.push(u.doCamera),Ht.push(L)),Ht.push(v.rehover,v.redrag,v.reselect),i.add(Ee,Se,[Ee,mt.undoit,Gt.undoit,mt.traces],Se,[Ee,mt.redoit,Gt.redoit,mt.traces]);var Xt=T.syncOrAsync(Ht,Ee);return(!Xt||!Xt.then)&&(Xt=Promise.resolve(Ee)),Xt.then(function(){return Ee.emit("plotly_update",{data:mt.eventData,layout:Gt.eventData}),Ee})}function Re(Ee){return function(Ke){Ke._fullLayout._guiEditing=!0;var et=Ee.apply(null,arguments);return Ke._fullLayout._guiEditing=!1,et}}var Ve=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ae=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ce(Ee,He){for(var Ke=0;Ke<He.length;Ke++){var et=He[Ke],At=Ee.match(et.pattern);if(At){var mt=At[1]||"";return{head:mt,tail:Ee.substr(mt.length+1),attr:et.attr}}}}function Ze(Ee,He){var Ke=e(He,Ee).get();if(Ke!==void 0)return Ke;var et=Ee.split(".");for(et.pop();et.length>1;)if(et.pop(),Ke=e(He,et.join(".")+".uirevision").get(),Ke!==void 0)return Ke;return He.uirevision}function Ye(Ee,He){for(var Ke=0;Ke<He.length;Ke++)if(He[Ke]._fullInput.uid===Ee)return Ke;return-1}function ze(Ee,He,Ke){for(var et=0;et<He.length;et++)if(He[et].uid===Ee)return et;return!He[Ke]||He[Ke].uid?-1:Ke}function Ie(Ee,He){var Ke=T.isPlainObject(Ee),et=Array.isArray(Ee);return Ke||et?(Ke&&T.isPlainObject(He)||et&&Array.isArray(He))&&JSON.stringify(Ee)===JSON.stringify(He):Ee===He}function Ge(Ee,He,Ke,et){var At=et._preGUI,mt,Mt,Gt,zt,Ht,Xt,Wt,sr,Gr,cn,en=[],st={},rr={};for(mt in At){if(Ht=Ce(mt,Ve),Ht){if(Gr=Ht.head,cn=Ht.tail,Mt=Ht.attr||Gr+".uirevision",Gt=e(et,Mt).get(),zt=Gt&&Ze(Mt,He),zt&&zt===Gt){if(Xt=At[mt],Xt===null&&(Xt=void 0),Wt=e(He,mt),sr=Wt.get(),Ie(sr,Xt)){sr===void 0&&cn==="autorange"&&en.push(Gr),Wt.set(q(e(et,mt).get()));continue}else if(cn==="autorange"||cn.substr(0,6)==="range["){var er=At[Gr+".range[0]"],jt=At[Gr+".range[1]"],Mr=At[Gr+".autorange"];if(Mr||Mr===null&&er===null&&jt===null){if(!(Gr in st)){var it=e(He,Gr).get();st[Gr]=it&&(it.autorange||it.autorange!==!1&&(!it.range||it.range.length!==2))}if(st[Gr]){Wt.set(q(e(et,mt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+mt);delete At[mt],Ht&&Ht.tail.substr(0,6)==="range["&&(rr[Ht.head]=1)}for(var Qe=0;Qe<en.length;Qe++){var ft=en[Qe];if(rr[ft]){var ct=e(He,ft).get();ct&&delete ct.autorange}}var Et=et._tracePreGUI;for(var Nt in Et){var Pe=Et[Nt],Le=null,ot;for(mt in Pe){if(!Le){var ut=Ye(Nt,Ke);if(ut<0){delete Et[Nt];break}var pt=Ke[ut];ot=pt._fullInput;var Pt=ze(Nt,Ee,ot.index);if(Pt<0){delete Et[Nt];break}Le=Ee[Pt]}if(Ht=Ce(mt,Ae),Ht){if(Ht.attr?(Gt=e(et,Ht.attr).get(),zt=Gt&&Ze(Ht.attr,He)):(Gt=ot.uirevision,zt=Le.uirevision,zt===void 0&&(zt=He.uirevision)),zt&&zt===Gt&&(Xt=Pe[mt],Xt===null&&(Xt=void 0),Wt=e(Le,mt),sr=Wt.get(),Ie(sr,Xt))){Wt.set(q(e(ot,mt).get()));continue}}else T.warn("unrecognized GUI edit: "+mt+" in trace uid "+Nt);delete Pe[mt]}}}function dt(Ee,He,Ke,et){var At,mt;function Mt(){return G.addFrames(Ee,At)}Ee=T.getGraphDiv(Ee),y.clearPromiseQueue(Ee);var Gt=Ee._fullData,zt=Ee._fullLayout;if(!T.isPlotDiv(Ee)||!Gt||!zt)mt=G.newPlot(Ee,He,Ke,et);else{if(T.isPlainObject(He)){var Ht=He;He=Ht.data,Ke=Ht.layout,et=Ht.config,At=Ht.frames}var Xt=!1;if(et){var Wt=T.extendDeep({},Ee._context);Ee._context=void 0,F(Ee,et),Xt=Ct(Wt,Ee._context)}Ee.data=He||[],y.cleanData(Ee.data),Ee.layout=Ke||{},y.cleanLayout(Ee.layout),Ge(Ee.data,Ee.layout,Gt,zt),v.supplyDefaults(Ee,{skipUpdateCalc:!0});var sr=Ee._fullData,Gr=Ee._fullLayout,cn=Gr.datarevision===void 0,en=Gr.transition,st=Qt(Ee,zt,Gr,cn,en),rr=st.newDataRevision,er=Rt(Ee,Gt,sr,cn,en,rr);if(be(Ee)&&(st.layoutReplot=!0),er.calc||st.calc){Ee.calcdata=void 0;for(var jt=Object.getOwnPropertyNames(Gr),Mr=0;Mr<jt.length;Mr++){var it=jt[Mr],Qe=it.substring(0,5);if(Qe==="xaxis"||Qe==="yaxis"){var ft=Gr[it]._emptyCategories;ft&&ft()}}}else v.supplyDefaultsUpdateCalc(Ee.calcdata,sr);var ct=[];if(At&&(Ee._transitionData={},v.createTransitionData(Ee),ct.push(Mt)),Gr.transition&&!Xt&&(er.anim||st.anim))st.ticks&&ct.push(u.doTicksRelayout),v.doCalcdata(Ee),u.doAutoRangeAndConstraints(Ee),ct.push(function(){return v.transitionFromReact(Ee,er,st,zt)});else if(er.fullReplot||st.layoutReplot||Xt)Ee._fullLayout._skipDefaults=!0,ct.push(G._doPlot);else{for(var Et in st.arrays){var Nt=st.arrays[Et];if(Nt.length){var Pe=n.getComponentMethod(Et,"drawOne");if(Pe!==T.noop)for(var Le=0;Le<Nt.length;Le++)Pe(Ee,Nt[Le]);else{var ot=n.getComponentMethod(Et,"draw");if(ot===T.noop)throw new Error("cannot draw components: "+Et);ot(Ee)}}}ct.push(v.previousPromises),er.style&&ct.push(u.doTraceStyle),(er.colorbars||st.colorbars)&&ct.push(u.doColorBars),st.legend&&ct.push(u.doLegend),st.layoutstyle&&ct.push(u.layoutStyles),st.axrange&&_e(ct),st.ticks&&ct.push(u.doTicksRelayout),st.modebar&&ct.push(u.doModeBar),st.camera&&ct.push(u.doCamera),ct.push(L)}ct.push(v.rehover,v.redrag,v.reselect),mt=T.syncOrAsync(ct,Ee),(!mt||!mt.then)&&(mt=Promise.resolve(Ee))}return mt.then(function(){return Ee.emit("plotly_react",{data:He,layout:Ke}),Ee})}function Rt(Ee,He,Ke,et,At,mt){var Mt=He.length===Ke.length;if(!At&&!Mt)return{fullReplot:!0,calc:!0};var Gt=A.traceFlags();Gt.arrays={},Gt.nChanges=0,Gt.nChangesAnim=0;var zt,Ht;function Xt(Gr){var cn=r.getTraceValObject(Ht,Gr);return!Ht._module.animatable&&cn.anim&&(cn.anim=!1),cn}var Wt={getValObject:Xt,flags:Gt,immutable:et,transition:At,newDataRevision:mt,gd:Ee},sr={};for(zt=0;zt<He.length;zt++)if(Ke[zt]){if(Ht=Ke[zt]._fullInput,v.hasMakesDataTransform(Ht)&&(Ht=Ke[zt]),sr[Ht.uid])continue;sr[Ht.uid]=1,Bt(He[zt]._fullInput,Ht,[],Wt)}return(Gt.calc||Gt.plot)&&(Gt.fullReplot=!0),At&&Gt.nChanges&&Gt.nChangesAnim&&(Gt.anim=Gt.nChanges===Gt.nChangesAnim&&Mt?"all":"some"),Gt}function Qt(Ee,He,Ke,et,At){var mt=A.layoutFlags();mt.arrays={},mt.rangesAltered={},mt.nChanges=0,mt.nChangesAnim=0;function Mt(zt){return r.getLayoutValObject(Ke,zt)}var Gt={getValObject:Mt,flags:mt,immutable:et,transition:At,gd:Ee};return Bt(He,Ke,[],Gt),(mt.plot||mt.calc)&&(mt.layoutReplot=!0),At&&mt.nChanges&&mt.nChangesAnim&&(mt.anim=mt.nChanges===mt.nChangesAnim?"all":"some"),mt}function Bt(Ee,He,Ke,et){var At,mt,Mt,Gt=et.getValObject,zt=et.flags,Ht=et.immutable,Xt=et.inArray,Wt=et.arrayIndex;function sr(){var ut=At.editType;if(Xt&&ut.indexOf("arraydraw")!==-1){T.pushUnique(zt.arrays[Xt],Wt);return}A.update(zt,At),ut!=="none"&&zt.nChanges++,et.transition&&At.anim&&zt.nChangesAnim++,(ue.test(Mt)||ge.test(Mt))&&(zt.rangesAltered[Ke[0]]=1),xe.test(Mt)&&e(He,"_inputDomain").set(null),mt==="datarevision"&&(zt.newDataRevision=1)}function Gr(ut){return ut.valType==="data_array"||ut.arrayOk}for(mt in Ee){if(zt.calc&&!et.transition)return;var cn=Ee[mt],en=He[mt],st=Ke.concat(mt);if(Mt=st.join("."),!(mt.charAt(0)==="_"||typeof cn=="function"||cn===en)){if((mt==="tick0"||mt==="dtick")&&Ke[0]!=="geo"){var rr=He.tickmode;if(rr==="auto"||rr==="array"||!rr)continue}if(!(mt==="range"&&He.autorange)&&!((mt==="zmin"||mt==="zmax")&&He.type==="contourcarpet")&&(At=Gt(st),!!At&&!(At._compareAsJSON&&JSON.stringify(cn)===JSON.stringify(en)))){var er=At.valType,jt,Mr=Gr(At),it=Array.isArray(cn),Qe=Array.isArray(en);if(it&&Qe){var ft="_input_"+mt,ct=Ee[ft],Et=He[ft];if(Array.isArray(ct)&&ct===Et)continue}if(en===void 0)Mr&&it?zt.calc=!0:sr();else if(At._isLinkedToArray){var Nt=[],Pe=!1;Xt||(zt.arrays[mt]=Nt);var Le=Math.min(cn.length,en.length),ot=Math.max(cn.length,en.length);if(Le!==ot)if(At.editType==="arraydraw")Pe=!0;else{sr();continue}for(jt=0;jt<Le;jt++)Bt(cn[jt],en[jt],st.concat(jt),T.extendFlat({inArray:mt,arrayIndex:jt},et));if(Pe)for(jt=Le;jt<ot;jt++)Nt.push(jt)}else!er&&T.isPlainObject(cn)?Bt(cn,en,st,et):Mr?it&&Qe?(Ht&&(zt.calc=!0),(Ht||et.newDataRevision)&&sr()):it!==Qe?zt.calc=!0:sr():it&&Qe?(cn.length!==en.length||String(cn)!==String(en))&&sr():sr()}}}for(mt in He)if(!(mt in Ee||mt.charAt(0)==="_"||typeof He[mt]=="function"))if(At=Gt(Ke.concat(mt)),Gr(At)&&Array.isArray(He[mt])){zt.calc=!0;return}else sr()}function Ct(Ee,He){var Ke;for(Ke in Ee)if(Ke.charAt(0)!=="_"){var et=Ee[Ke],At=He[Ke];if(et!==At)if(T.isPlainObject(et)&&T.isPlainObject(At)){if(Ct(et,At))return!0}else if(Array.isArray(et)&&Array.isArray(At)){if(et.length!==At.length)return!0;for(var mt=0;mt<et.length;mt++)if(et[mt]!==At[mt])if(T.isPlainObject(et[mt])&&T.isPlainObject(At[mt])){if(Ct(et[mt],At[mt]))return!0}else return!0}else return!0}}function Kt(Ee,He,Ke){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var et=Ee._transitionData;et._frameQueue||(et._frameQueue=[]),Ke=v.supplyAnimationDefaults(Ke);var At=Ke.transition,mt=Ke.frame;et._frameWaitingCnt===void 0&&(et._frameWaitingCnt=0);function Mt(Ht){return Array.isArray(At)?Ht>=At.length?At[0]:At[Ht]:At}function Gt(Ht){return Array.isArray(mt)?Ht>=mt.length?mt[0]:mt[Ht]:mt}function zt(Ht,Xt){var Wt=0;return function(){if(Ht&&++Wt===Xt)return Ht()}}return new Promise(function(Ht,Xt){function Wt(){if(et._frameQueue.length!==0){for(;et._frameQueue.length;){var Le=et._frameQueue.pop();Le.onInterrupt&&Le.onInterrupt()}Ee.emit("plotly_animationinterrupted",[])}}function sr(Le){if(Le.length!==0){for(var ot=0;ot<Le.length;ot++){var ut;Le[ot].type==="byname"?ut=v.computeFrame(Ee,Le[ot].name):ut=Le[ot].data;var pt=Gt(ot),Pt=Mt(ot);Pt.duration=Math.min(Pt.duration,pt.duration);var xt={frame:ut,name:Le[ot].name,frameOpts:pt,transitionOpts:Pt};ot===Le.length-1&&(xt.onComplete=zt(Ht,2),xt.onInterrupt=Xt),et._frameQueue.push(xt)}Ke.mode==="immediate"&&(et._lastFrameAt=-1/0),et._animationRaf||en()}}function Gr(){Ee.emit("plotly_animated"),window.cancelAnimationFrame(et._animationRaf),et._animationRaf=null}function cn(){et._currentFrame&&et._currentFrame.onComplete&&et._currentFrame.onComplete();var Le=et._currentFrame=et._frameQueue.shift();if(Le){var ot=Le.name?Le.name.toString():null;Ee._fullLayout._currentFrame=ot,et._lastFrameAt=Date.now(),et._timeToNext=Le.frameOpts.duration,v.transition(Ee,Le.frame.data,Le.frame.layout,y.coerceTraceIndices(Ee,Le.frame.traces),Le.frameOpts,Le.transitionOpts).then(function(){Le.onComplete&&Le.onComplete()}),Ee.emit("plotly_animatingframe",{name:ot,frame:Le.frame,animation:{frame:Le.frameOpts,transition:Le.transitionOpts}})}else Gr()}function en(){Ee.emit("plotly_animating"),et._lastFrameAt=-1/0,et._timeToNext=0,et._runningTransitions=0,et._currentFrame=null;var Le=function(){et._animationRaf=window.requestAnimationFrame(Le),Date.now()-et._lastFrameAt>et._timeToNext&&cn()};Le()}var st=0;function rr(Le){return Array.isArray(At)?st>=At.length?Le.transitionOpts=At[st]:Le.transitionOpts=At[0]:Le.transitionOpts=At,st++,Le}var er,jt,Mr=[],it=He==null,Qe=Array.isArray(He),ft=!it&&!Qe&&T.isPlainObject(He);if(ft)Mr.push({type:"object",data:rr(T.extendFlat({},He))});else if(it||["string","number"].indexOf(typeof He)!==-1)for(er=0;er<et._frames.length;er++)jt=et._frames[er],!!jt&&(it||String(jt.group)===String(He))&&Mr.push({type:"byname",name:String(jt.name),data:rr({name:jt.name})});else if(Qe)for(er=0;er<He.length;er++){var ct=He[er];["number","string"].indexOf(typeof ct)!==-1?(ct=String(ct),Mr.push({type:"byname",name:ct,data:rr({name:ct})})):T.isPlainObject(ct)&&Mr.push({type:"object",data:rr(T.extendFlat({},ct))})}for(er=0;er<Mr.length;er++)if(jt=Mr[er],jt.type==="byname"&&!et._frameHash[jt.data.name]){T.warn('animate failure: frame not found: "'+jt.data.name+'"'),Xt();return}["next","immediate"].indexOf(Ke.mode)!==-1&&Wt(),Ke.direction==="reverse"&&Mr.reverse();var Et=Ee._fullLayout._currentFrame;if(Et&&Ke.fromcurrent){var Nt=-1;for(er=0;er<Mr.length;er++)if(jt=Mr[er],jt.type==="byname"&&jt.name===Et){Nt=er;break}if(Nt>0&&Nt<Mr.length-1){var Pe=[];for(er=0;er<Mr.length;er++)jt=Mr[er],(Mr[er].type!=="byname"||er>Nt)&&Pe.push(jt);Mr=Pe}}Mr.length>0?sr(Mr):(Ee.emit("plotly_animated"),Ht())})}function Ot(Ee,He,Ke){if(Ee=T.getGraphDiv(Ee),He==null)return Promise.resolve();if(!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var et,At,mt,Mt,Gt=Ee._transitionData._frames,zt=Ee._transitionData._frameHash;if(!Array.isArray(He))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+He);var Ht=Gt.length+He.length*2,Xt=[],Wt={};for(et=He.length-1;et>=0;et--)if(!!T.isPlainObject(He[et])){var sr=He[et].name,Gr=(zt[sr]||Wt[sr]||{}).name,cn=He[et].name,en=zt[Gr]||Wt[Gr];Gr&&cn&&typeof cn=="number"&&en&&p<w&&(p++,T.warn('addFrames: overwriting frame "'+(zt[Gr]||Wt[Gr]).name+'" with a frame whose name of type "number" also equates to "'+Gr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),p===w&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Wt[sr]={name:sr},Xt.push({frame:v.supplyFrameDefaults(He[et]),index:Ke&&Ke[et]!==void 0&&Ke[et]!==null?Ke[et]:Ht+et})}Xt.sort(function(ft,ct){return ft.index>ct.index?-1:ft.index<ct.index?1:0});var st=[],rr=[],er=Gt.length;for(et=Xt.length-1;et>=0;et--){if(At=Xt[et].frame,typeof At.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!At.name)for(;zt[At.name="frame "+Ee._transitionData._counter++];);if(zt[At.name]){for(mt=0;mt<Gt.length&&(Gt[mt]||{}).name!==At.name;mt++);st.push({type:"replace",index:mt,value:At}),rr.unshift({type:"replace",index:mt,value:Gt[mt]})}else Mt=Math.max(0,Math.min(Xt[et].index,er)),st.push({type:"insert",index:Mt,value:At}),rr.unshift({type:"delete",index:Mt}),er++}var jt=v.modifyFrames,Mr=v.modifyFrames,it=[Ee,rr],Qe=[Ee,st];return i&&i.add(Ee,jt,it,Mr,Qe),v.modifyFrames(Ee,st)}function St(Ee,He){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);var Ke,et,At=Ee._transitionData._frames,mt=[],Mt=[];if(!He)for(He=[],Ke=0;Ke<At.length;Ke++)He.push(Ke);for(He=He.slice(),He.sort(),Ke=He.length-1;Ke>=0;Ke--)et=He[Ke],mt.push({type:"delete",index:et}),Mt.unshift({type:"insert",index:et,value:At[et]});var Gt=v.modifyFrames,zt=v.modifyFrames,Ht=[Ee,Mt],Xt=[Ee,mt];return i&&i.add(Ee,Gt,Ht,zt,Xt),v.modifyFrames(Ee,mt)}function Xe(Ee){Ee=T.getGraphDiv(Ee);var He=Ee._fullLayout||{},Ke=Ee._fullData||[];return v.cleanPlot([],{},Ke,He),v.purge(Ee),a.purge(Ee),He._container&&He._container.remove(),delete Ee._context,Ee}function at(Ee){var He=Ee._fullLayout,Ke=Ee.getBoundingClientRect();if(!T.equalDomRects(Ke,He._lastBBox)){var et=He._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Ee));He._invScaleX=Math.sqrt(et[0][0]*et[0][0]+et[0][1]*et[0][1]+et[0][2]*et[0][2]),He._invScaleY=Math.sqrt(et[1][0]*et[1][0]+et[1][1]*et[1][1]+et[1][2]*et[1][2]),He._lastBBox=Ke}}function We(Ee){var He=x.select(Ee),Ke=Ee._fullLayout;if(Ke._calcInverseTransform=at,Ke._calcInverseTransform(Ee),Ke._container=He.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var et={};x.selectAll("defs").each(function(){this.id&&(et[this.id.split("-")[1]]=1)}),Ke._uid=T.randstr(et)}Ke._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var At=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=At.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=At.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var mt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=mt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=mt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ee.emit("plotly_framework")}G.animate=Kt,G.addFrames=Ot,G.deleteFrames=St,G.addTraces=K,G.deleteTraces=J,G.extendTraces=ae,G.moveTraces=U,G.prependTraces=fe,G.newPlot=D,G._doPlot=h,G.purge=Xe,G.react=dt,G.redraw=I,G.relayout=ne,G.restyle=V,G.setPlotConfig=E,G.update=Se,G._guiRelayout=Re(ne),G._guiRestyle=Re(V),G._guiUpdate=Re(Se),G._storeDirectGUIEdit=Q},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(t,B,G){var x={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},f={};function M(T,e){for(var a in T){var i=T[a];i.valType?e[a]=i.dflt:(e[a]||(e[a]={}),M(i,e[a]))}}M(x,f),B.exports={configAttributes:x,dfltConfig:f}},{}],554:[function(t,B,G){var x=t("../registry"),f=t("../lib"),M=t("../plots/attributes"),T=t("../plots/layout_attributes"),e=t("../plots/frame_attributes"),a=t("../plots/animation_attributes"),i=t("./plot_config").configAttributes,n=t("./edit_types"),r=f.extendDeepAll,v=f.isPlainObject,s=f.isArrayOrTypedArray,o=f.nestedProperty,b=f.valObjectMeta,g="_isSubplotObj",d="_isLinkedToArray",c="_arrayAttrRegexps",m="_deprecated",l=[g,d,c,m];G.IS_SUBPLOT_OBJ=g,G.IS_LINKED_TO_ARRAY=d,G.DEPRECATED=m,G.UNDERSCORE_ATTRS=l,G.get=function(){var D={};x.allTypes.forEach(function(O){D[O]=_(O)});var R={};return Object.keys(x.transformsRegistry).forEach(function(O){R[O]=w(O)}),{defs:{valObjects:b,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:D,layout:p(),transforms:R,frames:h(),animation:L(a),config:L(i)}},G.crawl=function(D,R,O,z){var H=O||0;z=z||"",Object.keys(D).forEach(function(Y){var ee=D[Y];if(l.indexOf(Y)===-1){var j=(z?z+".":"")+Y;R(ee,Y,D,H,j),!G.isValObject(ee)&&v(ee)&&Y!=="impliedEdits"&&G.crawl(ee,R,H+1,j)}})},G.isValObject=function(D){return D&&D.valType!==void 0},G.findArrayAttributes=function(D){var R=[],O=[],z=[],H,Y;function ee(J,U,V,q){O=O.slice(0,q).concat([U]),z=z.slice(0,q).concat([J&&J._isLinkedToArray]);var re=J&&(J.valType==="data_array"||J.arrayOk===!0)&&!(O[q-1]==="colorbar"&&(U==="ticktext"||U==="tickvals"));!re||j(H,0,"")}function j(J,U,V){var q=J[O[U]],re=V+O[U];if(U===O.length-1)s(q)&&R.push(Y+re);else if(z[U]){if(Array.isArray(q))for(var Z=0;Z<q.length;Z++)v(q[Z])&&j(q[Z],U+1,re+"["+Z+"].")}else v(q)&&j(q,U+1,re+".")}H=D,Y="",G.crawl(M,ee),D._module&&D._module.attributes&&G.crawl(D._module.attributes,ee);var X=D.transforms;if(X)for(var ae=0;ae<X.length;ae++){var fe=X[ae],K=fe._module;K&&(Y="transforms["+ae+"].",H=fe,G.crawl(K.attributes,ee))}return R},G.getTraceValObject=function(D,R){var O=R[0],z=1,H,Y;if(O==="transforms"){if(R.length===1)return M.transforms;var ee=D.transforms;if(!Array.isArray(ee)||!ee.length)return!1;var j=R[1];if(!A(j)||j>=ee.length)return!1;H=(x.transformsRegistry[ee[j].type]||{}).attributes,Y=H&&H[R[2]],z=3}else{var X=D._module;if(X||(X=(x.modules[D.type||M.type.dflt]||{})._module),!X)return!1;if(H=X.attributes,Y=H&&H[O],!Y){var ae=X.basePlotModule;ae&&ae.attributes&&(Y=ae.attributes[O])}Y||(Y=M[O])}return u(Y,R,z)},G.getLayoutValObject=function(D,R){var O=y(D,R[0]);return u(O,R,1)};function y(D,R){var O,z,H,Y,ee=D._basePlotModules;if(ee){var j;for(O=0;O<ee.length;O++){if(H=ee[O],H.attrRegex&&H.attrRegex.test(R)){if(H.layoutAttrOverrides)return H.layoutAttrOverrides;!j&&H.layoutAttributes&&(j=H.layoutAttributes)}var X=H.baseLayoutAttrOverrides;if(X&&R in X)return X[R]}if(j)return j}var ae=D._modules;if(ae){for(O=0;O<ae.length;O++)if(Y=ae[O].layoutAttributes,Y&&R in Y)return Y[R]}for(z in x.componentsRegistry){if(H=x.componentsRegistry[z],H.name==="colorscale"&&R.indexOf("coloraxis")===0)return H.layoutAttributes[R];if(!H.schema&&R===H.name)return H.layoutAttributes}return R in T?T[R]:!1}function u(D,R,O){if(!D)return!1;if(D._isLinkedToArray){if(A(R[O]))O++;else if(O<R.length)return!1}for(;O<R.length;O++){var z=D[R[O]];if(v(z))D=z;else break;if(O===R.length-1)break;if(D._isLinkedToArray){if(O++,!A(R[O]))return!1}else if(D.valType==="info_array"){O++;var H=R[O];if(!A(H))return!1;var Y=D.items;if(Array.isArray(Y)){if(H>=Y.length)return!1;if(D.dimensions===2){if(O++,R.length===O)return D;var ee=R[O];if(!A(ee))return!1;D=Y[H][ee]}else D=Y[H]}else D=Y}}return D}function A(D){return D===Math.round(D)&&D>=0}function _(D){var R,O;R=x.modules[D]._module,O=R.basePlotModule;var z={};z.type=null;var H=r({},M),Y=r({},R.attributes);G.crawl(Y,function(X,ae,fe,K,J){o(H,J).set(void 0),X===void 0&&o(Y,J).set(void 0)}),r(z,H),x.traceIs(D,"noOpacity")&&delete z.opacity,x.traceIs(D,"showLegend")||(delete z.showlegend,delete z.legendgroup),x.traceIs(D,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),R.selectPoints||delete z.selectedpoints,r(z,Y),O.attributes&&r(z,O.attributes),z.type=D;var ee={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(z)};if(R.layoutAttributes){var j={};r(j,R.layoutAttributes),ee.layoutAttributes=L(j)}return R.animatable||G.crawl(ee,function(X){G.isValObject(X)&&"anim"in X&&delete X.anim}),ee}function p(){var D={},R,O;r(D,T);for(R in x.subplotsRegistry)if(O=x.subplotsRegistry[R],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var z=0;z<O.attr.length;z++)F(D,O,O.attr[z]);else{var H=O.attr==="subplot"?O.name:O.attr;F(D,O,H)}for(R in x.componentsRegistry){O=x.componentsRegistry[R];var Y=O.schema;if(Y&&(Y.subplots||Y.layout)){var ee=Y.subplots;if(ee&&ee.xaxis&&!ee.yaxis)for(var j in ee.xaxis)delete D.yaxis[j]}else O.name==="colorscale"?r(D,O.layoutAttributes):O.layoutAttributes&&I(D,O.layoutAttributes,O.name)}return{layoutAttributes:L(D)}}function w(D){var R=x.transformsRegistry[D],O=r({},R.attributes);return Object.keys(x.componentsRegistry).forEach(function(z){var H=x.componentsRegistry[z];H.schema&&H.schema.transforms&&H.schema.transforms[D]&&Object.keys(H.schema.transforms[D]).forEach(function(Y){I(O,H.schema.transforms[D][Y],Y)})}),{attributes:L(O)}}function h(){var D={frames:r({},e)};return L(D),D.frames}function L(D){return E(D),S(D),P(D),D}function E(D){function R(z){return{valType:"string",editType:"none"}}function O(z,H,Y){G.isValObject(z)?(z.arrayOk===!0||z.valType==="data_array")&&(Y[H+"src"]=R()):v(z)&&(z.role="object")}G.crawl(D,O)}function S(D){function R(O,z,H){if(!!O){var Y=O[d];!Y||(delete O[d],H[z]={items:{}},H[z].items[Y]=O,H[z].role="object")}}G.crawl(D,R)}function P(D){function R(O){for(var z in O)if(v(O[z]))R(O[z]);else if(Array.isArray(O[z]))for(var H=0;H<O[z].length;H++)R(O[z][H]);else O[z]instanceof RegExp&&(O[z]=O[z].toString())}R(D)}function F(D,R,O){var z=o(D,O),H=r({},R.layoutAttributes);H[g]=!0,z.set(H)}function I(D,R,O){var z=o(D,O);z.set(r(z.get()||{},R))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(t,B,G){var x=t("../lib"),f=t("../plots/attributes"),M="templateitemname",T={name:{valType:"string",editType:"none"}};T[M]={valType:"string",editType:"calc"},G.templatedArray=function(i,n){return n._isLinkedToArray=i,n.name=T.name,n[M]=T[M],n},G.traceTemplater=function(i){var n={},r,v;for(r in i)v=i[r],Array.isArray(v)&&v.length&&(n[r]=0);function s(o){r=x.coerce(o,{},f,"type");var b={type:r,_template:null};if(r in n){v=i[r];var g=n[r]%v.length;n[r]++,b._template=v[g]}return b}return{newTrace:s}},G.newContainer=function(i,n,r){var v=i._template,s=v&&(v[n]||r&&v[r]);x.isPlainObject(s)||(s=null);var o=i[n]={_template:s};return o},G.arrayTemplater=function(i,n,r){var v=i._template,s=v&&v[a(n)],o=v&&v[n];(!Array.isArray(o)||!o.length)&&(o=[]);var b={};function g(c){var m={name:c.name,_input:c},l=m[M]=c[M];if(!e(l))return m._template=s,m;for(var y=0;y<o.length;y++){var u=o[y];if(u.name===l)return b[l]=1,m._template=u,m}return m[r]=c[r]||!1,m._template=!1,m}function d(){for(var c=[],m=0;m<o.length;m++){var l=o[m],y=l.name;if(e(y)&&!b[y]){var u={_template:l,name:y,_input:{_templateitemname:y}};u[M]=l[M],c.push(u),b[y]=1}}return c}return{newItem:g,defaultItems:d}};function e(i){return i&&typeof i=="string"}function a(i){var n=i.length-1;return i.charAt(n)!=="s"&&x.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}G.arrayDefaultKey=a,G.arrayEditor=function(i,n,r){var v=(x.nestedProperty(i,n).get()||[]).length,s=r._index,o=s>=v&&(r._input||{})._templateitemname;o&&(s=v);var b=n+"["+s+"]",g;function d(){g={},o&&(g[b]={},g[b][M]=o)}d();function c(u,A){g[u]=A}function m(u,A){o?x.nestedProperty(g[b],u).set(A):g[b+"."+u]=A}function l(){var u=g;return d(),u}function y(u,A){u&&m(u,A);var _=l();for(var p in _)x.nestedProperty(i,p).set(_[p])}return{modifyBase:c,modifyItem:m,getUpdateObj:l,applyUpdate:y}}},{"../lib":515,"../plots/attributes":562}],556:[function(t,B,G){var x=t("@plotly/d3"),f=t("../registry"),M=t("../plots/plots"),T=t("../lib"),e=t("../lib/clear_gl_canvases"),a=t("../components/color"),i=t("../components/drawing"),n=t("../components/titles"),r=t("../components/modebar"),v=t("../plots/cartesian/axes"),s=t("../constants/alignment"),o=t("../plots/cartesian/constraints"),b=o.enforce,g=o.clean,d=t("../plots/cartesian/autorange").doAutoRange,c="start",m="middle",l="end";G.layoutStyles=function(S){return T.syncOrAsync([M.doAutoMargin,u],S)};function y(S,P,F){for(var I=0;I<F.length;I++){var D=F[I][0],R=F[I][1];if(!(D[0]>=S[1]||D[1]<=S[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function u(S){var P=S._fullLayout,F=P._size,I=F.p,D=v.list(S,"",!0),R,O,z,H,Y,ee;if(P._paperdiv.style({width:S._context.responsive&&P.autosize&&!S._context._hasZeroWidth&&!S.layout.width?"100%":P.width+"px",height:S._context.responsive&&P.autosize&&!S._context._hasZeroHeight&&!S.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(i.setSize,P.width,P.height),S._context.setBackground(S,P.paper_bgcolor),G.drawMainTitle(S),r.manage(S),!P._has("cartesian"))return M.previousPromises(S);function j(Ct,Kt,Ot){var St=Ct._lw/2;if(Ct._id.charAt(0)==="x"){if(Kt){if(Ot==="top")return Kt._offset-I-St}else return F.t+F.h*(1-(Ct.position||0))+St%1;return Kt._offset+Kt._length+I+St}if(Kt){if(Ot==="right")return Kt._offset+Kt._length+I+St}else return F.l+F.w*(Ct.position||0)+St%1;return Kt._offset-I-St}for(R=0;R<D.length;R++){H=D[R];var X=H._anchorAxis;H._linepositions={},H._lw=i.crispRound(S,H.linewidth,1),H._mainLinePosition=j(H,X,H.side),H._mainMirrorPosition=H.mirror&&X?j(H,X,s.OPPOSITE_SIDE[H.side]):null}var ae=[],fe=[],K=[],J=a.opacity(P.paper_bgcolor)===1&&a.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if(z=P._plots[O],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var U=z.xaxis.domain,V=z.yaxis.domain,q=z.plotgroup;if(y(U,V,K)){var re=q.node(),Z=z.bg=T.ensureSingle(q,"rect","bg");re.insertBefore(Z.node(),re.childNodes[0]),fe.push(O)}else q.select("rect.bg").remove(),K.push([U,V]),J||(ae.push(O),fe.push(O))}var Q=P._bgLayer.selectAll(".bg").data(ae);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(Ct){P._plots[Ct].bg=x.select(this)}),R=0;R<fe.length;R++)z=P._plots[fe[R]],Y=z.xaxis,ee=z.yaxis,z.bg&&Y._offset!==void 0&&ee._offset!==void 0&&z.bg.call(i.setRect,Y._offset-I,ee._offset-I,Y._length+2*I,ee._length+2*I).call(a.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){z=P._plots[O],Y=z.xaxis,ee=z.yaxis;var ie=z.clipId="clip"+P._uid+O+"plot",oe=T.ensureSingleById(P._clips,"clipPath",ie,function(Ct){Ct.classed("plotclip",!0).append("rect")});z.clipRect=oe.select("rect").attr({width:Y._length,height:ee._length}),i.setTranslate(z.plot,Y._offset,ee._offset);var ne,se;z._hasClipOnAxisFalse?(ne=null,se=ie):(ne=ie,se=null),i.setClipUrl(z.plot,ne,S),z.layerClipId=se}var _e,ue,ge,xe,ye,be,Se,Re,Ve,Ae,Ce,Ze,Ye;function ze(Ct){return"M"+_e+","+Ct+"H"+ue}function Ie(Ct){return"M"+Y._offset+","+Ct+"h"+Y._length}function Ge(Ct){return"M"+Ct+","+Re+"V"+Se}function dt(Ct){return"M"+Ct+","+ee._offset+"v"+ee._length}function Rt(Ct,Kt,Ot){if(!Ct.showline||O!==Ct._mainSubplot)return"";if(!Ct._anchorAxis)return Ot(Ct._mainLinePosition);var St=Kt(Ct._mainLinePosition);return Ct.mirror&&(St+=Kt(Ct._mainMirrorPosition)),St}for(O in P._plots){z=P._plots[O],Y=z.xaxis,ee=z.yaxis;var Qt="M0,0";A(Y,O)&&(ye=p(Y,"left",ee,D),_e=Y._offset-(ye?I+ye:0),be=p(Y,"right",ee,D),ue=Y._offset+Y._length+(be?I+be:0),ge=j(Y,ee,"bottom"),xe=j(Y,ee,"top"),Ye=!Y._anchorAxis||O!==Y._mainSubplot,Ye&&(Y.mirror==="allticks"||Y.mirror==="all")&&(Y._linepositions[O]=[ge,xe]),Qt=Rt(Y,ze,Ie),Ye&&Y.showline&&(Y.mirror==="all"||Y.mirror==="allticks")&&(Qt+=ze(ge)+ze(xe)),z.xlines.style("stroke-width",Y._lw+"px").call(a.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",Qt);var Bt="M0,0";A(ee,O)&&(Ce=p(ee,"bottom",Y,D),Se=ee._offset+ee._length+(Ce?I:0),Ze=p(ee,"top",Y,D),Re=ee._offset-(Ze?I:0),Ve=j(ee,Y,"left"),Ae=j(ee,Y,"right"),Ye=!ee._anchorAxis||O!==ee._mainSubplot,Ye&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[O]=[Ve,Ae]),Bt=Rt(ee,Ge,dt),Ye&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(Bt+=Ge(Ve)+Ge(Ae)),z.ylines.style("stroke-width",ee._lw+"px").call(a.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",Bt)}return v.makeClipPaths(S),M.previousPromises(S)}function A(S,P){return(S.ticks||S.showline)&&(P===S._mainSubplot||S.mirror==="all"||S.mirror==="allticks")}function _(S,P,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var I=F._anchorAxis;if(!I)return!1;var D=s.FROM_BL[P];return F.side===P?I.domain[D]===S.domain[D]:F.mirror&&I.domain[1-D]===S.domain[1-D]}function p(S,P,F,I){if(_(S,P,F))return F._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===F._mainAxis&&_(S,P,R))return R._lw}return 0}G.drawMainTitle=function(S){var P=S._fullLayout,F=L(P),I=E(P);n.draw(S,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:w(P,F),y:h(P,I),"text-anchor":F,dy:I}})};function w(S,P){var F=S.title,I=S._size,D=0;switch(P===c?D=F.pad.l:P===l&&(D=-F.pad.r),F.xref){case"paper":return I.l+I.w*F.x+D;case"container":default:return S.width*F.x+D}}function h(S,P){var F=S.title,I=S._size,D=0;if(P==="0em"||!P?D=-F.pad.b:P===s.CAP_SHIFT+"em"&&(D=F.pad.t),F.y==="auto")return I.t/2;switch(F.yref){case"paper":return I.t+I.h-I.h*F.y+D;case"container":default:return S.height-S.height*F.y+D}}function L(S){var P=S.title,F=m;return T.isRightAnchor(P)?F=l:T.isLeftAnchor(P)&&(F=c),F}function E(S){var P=S.title,F="0em";return T.isTopAnchor(P)?F=s.CAP_SHIFT+"em":T.isMiddleAnchor(P)&&(F=s.MID_SHIFT+"em"),F}G.doTraceStyle=function(S){var P=S.calcdata,F=[],I;for(I=0;I<P.length;I++){var D=P[I],R=D[0]||{},O=R.trace||{},z=O._module||{},H=z.arraysToCalcdata;H&&H(D,O);var Y=z.editStyle;Y&&F.push({fn:Y,cd0:R})}if(F.length){for(I=0;I<F.length;I++){var ee=F[I];ee.fn(S,ee.cd0)}e(S),G.redrawReglTraces(S)}return M.style(S),f.getComponentMethod("legend","draw")(S),M.previousPromises(S)},G.doColorBars=function(S){return f.getComponentMethod("colorbar","draw")(S),M.previousPromises(S)},G.layoutReplot=function(S){var P=S.layout;return S.layout=void 0,f.call("_doPlot",S,"",P)},G.doLegend=function(S){return f.getComponentMethod("legend","draw")(S),M.previousPromises(S)},G.doTicksRelayout=function(S){return v.draw(S,"redraw"),S._fullLayout._hasOnlyLargeSploms&&(f.subplotsRegistry.splom.updateGrid(S),e(S),G.redrawReglTraces(S)),G.drawMainTitle(S),M.previousPromises(S)},G.doModeBar=function(S){var P=S._fullLayout;r.manage(S);for(var F=0;F<P._basePlotModules.length;F++){var I=P._basePlotModules[F].updateFx;I&&I(S)}return M.previousPromises(S)},G.doCamera=function(S){for(var P=S._fullLayout,F=P._subplots.gl3d,I=0;I<F.length;I++){var D=P[F[I]],R=D._scene;R.setViewport(D)}},G.drawData=function(S){var P=S._fullLayout;e(S);for(var F=P._basePlotModules,I=0;I<F.length;I++)F[I].plot(S);return G.redrawReglTraces(S),M.style(S),f.getComponentMethod("selections","draw")(S),f.getComponentMethod("shapes","draw")(S),f.getComponentMethod("annotations","draw")(S),f.getComponentMethod("images","draw")(S),P._replotting=!1,M.previousPromises(S)},G.redrawReglTraces=function(S){var P=S._fullLayout;if(P._has("regl")){var F=S._fullData,I=[],D=[],R,O;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<F.length;R++){var z=F[R];z.visible===!0&&z._length!==0&&(z.type==="splom"?P._splomScenes[z.uid].draw():z.type==="scattergl"?T.pushUnique(I,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&T.pushUnique(D,z.subplot))}for(R=0;R<I.length;R++)O=P._plots[I[R]],O._scene&&O._scene.draw();for(R=0;R<D.length;R++)O=P[D[R]]._subplot,O._scene&&O._scene.draw()}},G.doAutoRangeAndConstraints=function(S){for(var P=v.list(S,"",!0),F,I={},D=0;D<P.length;D++)if(F=P[D],!I[F._id]){I[F._id]=1,g(S,F),d(S,F);var R=F._matchGroup;if(R)for(var O in R){var z=v.getFromId(S,O);d(S,z,F.range),I[O]=1}}b(S)},G.finalDraw=function(S){f.getComponentMethod("rangeslider","draw")(S),f.getComponentMethod("rangeselector","draw")(S)},G.drawMarginPushers=function(S){f.getComponentMethod("legend","draw")(S),f.getComponentMethod("rangeselector","draw")(S),f.getComponentMethod("sliders","draw")(S),f.getComponentMethod("updatemenus","draw")(S),f.getComponentMethod("colorbar","draw")(S)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(t,B,G){var x=t("../lib"),f=x.isPlainObject,M=t("./plot_schema"),T=t("../plots/plots"),e=t("../plots/attributes"),a=t("./plot_template"),i=t("./plot_config").dfltConfig;G.makeTemplate=function(c){c=x.isPlainObject(c)?c:x.getGraphDiv(c),c=x.extendDeep({_context:i},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var m=c.data||[],l=c.layout||{};l._basePlotModules=c._fullLayout._basePlotModules,l._modules=c._fullLayout._modules;var y={data:{},layout:{}};m.forEach(function(P){var F={};v(P,F,o.bind(null,P));var I=x.coerce(P,{},e,"type"),D=y.data[I];D||(D=y.data[I]=[]),D.push(F)}),v(l,y.layout,s.bind(null,l)),delete y.layout.template;var u=l.template;if(f(u)){var A=u.layout,_,p,w,h,L,E;f(A)&&n(A,y.layout);var S=u.data;if(f(S)){for(p in y.data)if(w=S[p],Array.isArray(w)){for(L=y.data[p],E=L.length,h=w.length,_=0;_<E;_++)n(w[_%h],L[_]);for(_=E;_<h;_++)L.push(x.extendDeep({},w[_]))}for(p in S)p in y.data||(y.data[p]=x.extendDeep([],S[p]))}}return y};function n(c,m){c=x.extendDeep({},c);var l=Object.keys(c).sort(),y,u;function A(L,E,S){if(f(E)&&f(L))n(L,E);else if(Array.isArray(E)&&Array.isArray(L)){var P=a.arrayTemplater({_template:c},S);for(u=0;u<E.length;u++){var F=E[u],I=P.newItem(F)._template;I&&n(I,F)}var D=P.defaultItems();for(u=0;u<D.length;u++)E.push(D[u]._template);for(u=0;u<E.length;u++)delete E[u].templateitemname}}for(y=0;y<l.length;y++){var _=l[y],p=c[_];if(_ in m?A(p,m[_],_):m[_]=p,r(_)===_)for(var w in m){var h=r(w);w!==h&&h===_&&!(w in c)&&A(p,m[w],_)}}}function r(c){return c.replace(/[0-9]+$/,"")}function v(c,m,l,y,u){var A=u&&l(u);for(var _ in c){var p=c[_],w=b(c,_,y),h=b(c,_,u),L=l(h);if(!L){var E=r(_);E!==_&&(h=b(c,E,u),L=l(h))}if(!(A&&A===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(p)))if(!L.valType&&f(p))v(p,m,l,w,h);else if(L._isLinkedToArray&&Array.isArray(p))for(var S=!1,P=0,F={},I=0;I<p.length;I++){var D=p[I];if(f(D)){var R=D.name;if(R)F[R]||(v(D,m,l,b(p,P,w),b(p,P,h)),P++,F[R]=1);else if(!S){var O=a.arrayDefaultKey(_),z=b(c,O,y),H=b(p,P,w);v(D,m,l,H,b(p,P,h));var Y=x.nestedProperty(m,H),ee=x.nestedProperty(m,z);ee.set(Y.get()),Y.set(null),S=!0}}}else{var j=x.nestedProperty(m,w);j.set(p)}}}function s(c,m){return M.getLayoutValObject(c,x.nestedProperty({},m).parts)}function o(c,m){return M.getTraceValObject(c,x.nestedProperty({},m).parts)}function b(c,m,l){var y;return l?Array.isArray(c)?y=l+"["+m+"]":y=l+"."+m:y=m,y}G.validateTemplate=function(c,m){var l=x.extendDeep({},{_context:i,data:c.data,layout:c.layout}),y=l.layout||{};f(m)||(m=y.template||{});var u=m.layout,A=m.data,_=[];l.layout=y,l.layout.template=m,T.supplyDefaults(l);var p=l._fullLayout,w=l._fullData,h={};function L(z,H){for(var Y in z)if(Y.charAt(0)!=="_"&&f(z[Y])){var ee=r(Y),j=[],X;for(X=0;X<H.length;X++)j.push(b(z,Y,H[X])),ee!==Y&&j.push(b(z,ee,H[X]));for(X=0;X<j.length;X++)h[j[X]]=1;L(z[Y],j)}}function E(z,H){for(var Y in z)if(Y.indexOf("defaults")===-1&&f(z[Y])){var ee=b(z,Y,H);h[ee]?E(z[Y],ee):_.push({code:"unused",path:ee})}}if(f(u)?(L(p,["layout"]),E(u,"layout")):_.push({code:"layout"}),!f(A))_.push({code:"data"});else{for(var S={},P,F=0;F<w.length;F++){var I=w[F];P=I.type,S[P]=(S[P]||0)+1,I._fullInput._template||_.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in A){var D=A[P].length,R=S[P]||0;D>R?_.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&_.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function O(z,H){for(var Y in z)if(Y.charAt(0)!=="_"){var ee=z[Y],j=b(z,Y,H);f(ee)?(Array.isArray(z)&&ee._template===!1&&ee.templateitemname&&_.push({code:"missing",path:j,templateitemname:ee.templateitemname}),O(ee,j)):Array.isArray(ee)&&g(ee)&&O(ee,j)}}if(O({data:w,layout:p},""),_.length)return _.map(d)};function g(c){for(var m=0;m<c.length;m++)if(f(c[m]))return!0}function d(c){var m;switch(c.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":c.path?m="There are no templates for item "+c.path+" with name "+c.templateitemname:m="There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":c.path?m="The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?m="Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":m="The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type.";break}return c.msg=m,c}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(t,B,G){var x=t("fast-isnumeric"),f=t("./plot_api"),M=t("../plots/plots"),T=t("../lib"),e=t("../snapshot/helpers"),a=t("../snapshot/tosvg"),i=t("../snapshot/svgtoimg"),n=t("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function v(s,o){o=o||{};var b,g,d,c;T.isPlainObject(s)?(b=s.data||[],g=s.layout||{},d=s.config||{},c={}):(s=T.getGraphDiv(s),b=T.extendDeep([],s.data),g=T.extendDeep({},s.layout),d=s._context,c=s._fullLayout||{});function m(R){return!(R in o)||T.validate(o[R],r[R])}if(!m("width")&&o.width!==null||!m("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+T.join2(r.format.values,", "," or ")+".");var l={};function y(R,O){return T.coerce(o,l,r,R,O)}var u=y("format"),A=y("width"),_=y("height"),p=y("scale"),w=y("setBackground"),h=y("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var E=T.extendFlat({},g);A?E.width=A:o.width===null&&x(c.width)&&(E.width=c.width),_?E.height=_:o.height===null&&x(c.height)&&(E.height=c.height);var S=T.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),P=e.getRedrawFunc(L);function F(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(R,O){var z=a(L,u,p),H=L._fullLayout.width,Y=L._fullLayout.height;function ee(){f.purge(L),document.body.removeChild(L)}if(u==="full-json"){var j=M.graphJson(L,!1,"keepdata","object",!0,!0);return j.version=n,j=JSON.stringify(j),ee(),R(h?j:e.encodeJSON(j))}if(ee(),u==="svg")return R(h?z:e.encodeSVG(z));var X=document.createElement("canvas");X.id=T.randstr(),i({format:u,width:H,height:Y,scale:p,canvas:X,svg:z,promise:!0}).then(R).catch(O)})}function D(R){return h?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,O){f.newPlot(L,b,E,S).then(P).then(F).then(I).then(function(z){R(D(z))}).catch(function(z){O(z)})})}B.exports=v},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(t,B,G){var x=t("../lib"),f=t("../plots/plots"),M=t("./plot_schema"),T=t("./plot_config").dfltConfig,e=x.isPlainObject,a=Array.isArray,i=x.isArrayOrTypedArray;B.exports=function(y,u){y===void 0&&(y=[]),u===void 0&&(u={});var A=M.get(),_=[],p={_context:x.extendFlat({},T)},w,h;a(y)?(p.data=x.extendDeep([],y),w=y):(p.data=[],w=[],_.push(o("array","data"))),e(u)?(p.layout=x.extendDeep({},u),h=u):(p.layout={},h={},arguments.length>1&&_.push(o("object","layout"))),f.supplyDefaults(p);for(var L=p._fullData,E=w.length,S=0;S<E;S++){var P=w[S],F=["data",S];if(!e(P)){_.push(o("object",F));continue}var I=L[S],D=I.type,R=A.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&P.visible!==!1&&_.push(o("invisible",F)),n(P,I,R,_,F);var O=P.transforms,z=I.transforms;if(O){a(O)||_.push(o("array",F,["transforms"])),F.push("transforms");for(var H=0;H<O.length;H++){var Y=["transforms",H],ee=O[H].type;if(!e(O[H])){_.push(o("object",F,Y));continue}var j=A.transforms[ee]?A.transforms[ee].attributes:{};j.type={valType:"enumerated",values:Object.keys(A.transforms)},n(O[H],z[H],j,_,F,Y)}}}var X=p._fullLayout,ae=r(A,L);return n(h,X,ae,_,"layout"),_.length===0?void 0:_};function n(l,y,u,A,_,p){p=p||[];for(var w=Object.keys(l),h=0;h<w.length;h++){var L=w[h];if(L!=="transforms"){var E=p.slice();E.push(L);var S=l[L],P=y[L],F=g(u,L),I=(F||{}).valType,D=I==="info_array",R=I==="colorscale",O=(F||{}).items;if(!b(u,L))A.push(o("schema",_,E));else if(e(S)&&e(P)&&I!=="any")n(S,P,F,A,_,E);else if(D&&a(S)){S.length>P.length&&A.push(o("unused",_,E.concat(P.length)));var z=P.length,H=Array.isArray(O);H&&(z=Math.min(z,O.length));var Y,ee,j,X,ae;if(F.dimensions===2)for(ee=0;ee<z;ee++)if(a(S[ee])){S[ee].length>P[ee].length&&A.push(o("unused",_,E.concat(ee,P[ee].length)));var fe=P[ee].length;for(Y=0;Y<(H?Math.min(fe,O[ee].length):fe);Y++)j=H?O[ee][Y]:O,X=S[ee][Y],ae=P[ee][Y],x.validate(X,j)?ae!==X&&ae!==+X&&A.push(o("dynamic",_,E.concat(ee,Y),X,ae)):A.push(o("value",_,E.concat(ee,Y),X))}else A.push(o("array",_,E.concat(ee),S[ee]));else for(ee=0;ee<z;ee++)j=H?O[ee]:O,X=S[ee],ae=P[ee],x.validate(X,j)?ae!==X&&ae!==+X&&A.push(o("dynamic",_,E.concat(ee),X,ae)):A.push(o("value",_,E.concat(ee),X))}else if(F.items&&!D&&a(S)){var K=O[Object.keys(O)[0]],J=[],U,V;for(U=0;U<P.length;U++){var q=P[U]._index||U;if(V=E.slice(),V.push(q),e(S[q])&&e(P[U])){J.push(q);var re=S[q],Z=P[U];e(re)&&re.visible!==!1&&Z.visible===!1?A.push(o("invisible",_,V)):n(re,Z,K,A,_,V)}}for(U=0;U<S.length;U++)V=E.slice(),V.push(U),e(S[U])?J.indexOf(U)===-1&&A.push(o("unused",_,V)):A.push(o("object",_,V,S[U]))}else!e(S)&&e(P)?A.push(o("object",_,E,S)):!i(S)&&i(P)&&!D&&!R?A.push(o("array",_,E,S)):L in y?x.validate(S,F)?F.valType==="enumerated"&&(F.coerceNumber&&S!==+P||S!==P)&&A.push(o("dynamic",_,E,S,P)):A.push(o("value",_,E,S)):A.push(o("unused",_,E,S))}}return A}function r(l,y){for(var u=l.layout.layoutAttributes,A=0;A<y.length;A++){var _=y[A],p=l.traces[_.type],w=p.layoutAttributes;w&&(_.subplot?x.extendFlat(u[p.attributes.subplot.dflt],w):x.extendFlat(u,w))}return u}var v={object:function(l,y){var u;return l==="layout"&&y===""?u="The layout argument":l[0]==="data"&&y===""?u="Trace "+l[1]+" in the data argument":u=s(l)+"key "+y,u+" must be linked to an object container"},array:function(l,y){var u;return l==="data"?u="The data argument":u=s(l)+"key "+y,u+" must be linked to an array container"},schema:function(l,y){return s(l)+"key "+y+" is not part of the schema"},unused:function(l,y,u){var A=e(u)?"container":"key";return s(l)+A+" "+y+" did not get coerced"},dynamic:function(l,y,u,A){return[s(l)+"key",y,"(set to '"+u+"')","got reset to","'"+A+"'","during defaults."].join(" ")},invisible:function(l,y){return(y?s(l)+"item "+y:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,y,u){return[s(l)+"key "+y,"is set to an invalid value ("+u+")"].join(" ")}};function s(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function o(l,y,u,A,_){u=u||"";var p,w;a(y)?(p=y[0],w=y[1]):(p=y,w=null);var h=m(u),L=v[l](y,h,A,_);return x.log(L),{code:l,container:p,trace:w,path:u,astr:h,msg:L}}function b(l,y){var u=c(y),A=u.keyMinusId,_=u.id;return A in l&&l[A]._isSubplotObj&&_?!0:y in l}function g(l,y){if(y in l)return l[y];var u=c(y);return l[u.keyMinusId]}var d=x.counterRegex("([a-z]+)");function c(l){var y=l.match(d);return{keyMinusId:y&&y[1],id:y&&y[2]}}function m(l){if(!a(l))return String(l);for(var y="",u=0;u<l.length;u++){var A=l[u];typeof A=="number"?y=y.substr(0,y.length-1)+"["+A+"]":y+=A,u<l.length-1&&(y+=".")}return y}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(t,B,G){B.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(t,B,G){var x=t("../lib"),f=t("../plot_api/plot_template");B.exports=function(T,e,a){var i=a.name,n=a.inclusionAttr||"visible",r=e[i],v=x.isArrayOrTypedArray(T[i])?T[i]:[],s=e[i]=[],o=f.arrayTemplater(e,i,n),b,g;for(b=0;b<v.length;b++){var d=v[b];x.isPlainObject(d)?g=o.newItem(d):(g=o.newItem({}),g[n]=!1),g._index=b,g[n]!==!1&&a.handleItemDefaults(d,g,e,a),s.push(g)}var c=o.defaultItems();for(b=0;b<c.length;b++)g=c[b],g._index=s.length,a.handleItemDefaults({},g,e,a,{}),s.push(g);if(x.isArrayOrTypedArray(r)){var m=Math.min(r.length,s.length);for(b=0;b<m;b++)x.relinkPrivateKeys(s[b],r[b])}return s}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(t,B,G){var x=t("./font_attributes"),f=t("../components/fx/attributes");B.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:x({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:f.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=f.dateTime2ms,T=f.incrementMonth,e=t("../../constants/numerical"),a=e.ONEAVGMONTH;B.exports=function(n,r,v,s){if(r.type!=="date")return{vals:s};var o=n[v+"periodalignment"];if(!o)return{vals:s};var b=n[v+"period"],g;if(x(b)){if(b=+b,b<=0)return{vals:s}}else if(typeof b=="string"&&b.charAt(0)==="M"){var d=+b.substring(1);if(d>0&&Math.round(d)===d)g=d;else return{vals:s}}for(var c=r.calendar,m=o==="start",l=o==="end",y=n[v+"period0"],u=M(y,c)||0,A=[],_=[],p=[],w=s.length,h=0;h<w;h++){var L=s[h],E,S,P;if(g){for(E=Math.round((L-u)/(g*a)),P=T(u,g*E,c);P>L;)P=T(P,-g,c);for(;P<=L;)P=T(P,g,c);S=T(P,-g,c)}else{for(E=Math.round((L-u)/b),P=u+E*b;P>L;)P-=b;for(;P<=L;)P+=b;S=P-b}A[h]=m?S:l?P:(S+P)/2,_[h]=S,p[h]=P}return{vals:A,starts:_,ends:p}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(t,B,G){B.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../../lib"),T=t("../../constants/numerical").FP_SAFE,e=t("../../registry"),a=t("../../components/drawing"),i=t("./axis_ids"),n=i.getFromId,r=i.isLinked;B.exports={getAutoRange:v,makePadFn:o,doAutoRange:c,findExtremes:m,concatExtremes:d};function v(w,h){var L,E,S=[],P=w._fullLayout,F=o(P,h,0),I=o(P,h,1),D=d(w,h),R=D.min,O=D.max;if(R.length===0||O.length===0)return M.simpleMap(h.range,h.r2l);var z=R[0].val,H=O[0].val;for(L=1;L<R.length&&z===H;L++)z=Math.min(z,R[L].val);for(L=1;L<O.length&&z===H;L++)H=Math.max(H,O[L].val);var Y=!1;if(h.range){var ee=M.simpleMap(h.range,h.r2l);Y=ee[1]<ee[0]}h.autorange==="reversed"&&(Y=!0,h.autorange=!0);var j=h.rangemode,X=j==="tozero",ae=j==="nonnegative",fe=h._length,K=fe/10,J=0,U,V,q,re,Z,Q;for(L=0;L<R.length;L++)for(U=R[L],E=0;E<O.length;E++)V=O[E],Q=V.val-U.val-s(h,U.val,V.val),Q>0&&(Z=fe-F(U)-I(V),Z>K?Q/Z>J&&(q=U,re=V,J=Q/Z):Q/fe>J&&(q={val:U.val,nopad:1},re={val:V.val,nopad:1},J=Q/fe));function ie(ue,ge){return Math.max(ue,I(ge))}if(z===H){var oe=z-1,ne=z+1;if(X)if(z===0)S=[0,1];else{var se=(z>0?O:R).reduce(ie,0),_e=z/(1-Math.min(.5,se/fe));S=z>0?[0,_e]:[_e,0]}else ae?S=[Math.max(0,oe),Math.max(1,ne)]:S=[oe,ne]}else X?(q.val>=0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:0,nopad:1})):ae&&(q.val-J*F(q)<0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:1,nopad:1})),J=(re.val-q.val-s(h,U.val,V.val))/(fe-F(q)-I(re)),S=[q.val-J*F(q),re.val+J*I(re)];return Y&&S.reverse(),M.simpleMap(S,h.l2r||Number)}function s(w,h,L){var E=0;if(w.rangebreaks)for(var S=w.locateBreaks(h,L),P=0;P<S.length;P++){var F=S[P];E+=F.max-F.min}return E}function o(w,h,L){var E=.05*h._length,S=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(S.ticklabelposition||"").indexOf("inside")!==-1){var P=h.autorange==="reversed";if(!P){var F=M.simpleMap(h.range,h.r2l);P=F[1]<F[0]}P&&(L=!L)}var I=0;return r(w,h._id)||(I=g(w,h,L)),E=Math.max(I,E),h.constrain==="domain"&&h._inputDomain&&(E*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?E:I)}}var b=3;function g(w,h,L){var E=0,S=h._id.charAt(0)==="x";for(var P in w._plots){var F=w._plots[P];if(!(h._id!==F.xaxis._id&&h._id!==F.yaxis._id)){var I=(S?F.yaxis:F.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=M.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),O=Math.abs(Math.sin(D));if(!I._vals[0].bb){var z=I._id+"tick",H=I._selections[z];H.each(function(fe){var K=x.select(this),J=K.select(".text-math-group");J.empty()&&(fe.bb=a.bBox(K.node()))})}for(var Y=0;Y<I._vals.length;Y++){var ee=I._vals[Y],j=ee.bb;if(j){var X=2*b+j.width,ae=2*b+j.height;E=Math.max(E,S?Math.max(X*R,ae*O):Math.max(ae*R,X*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(E+=I.ticklen||0)}}}return E}function d(w,h,L){var E=h._id,S=w._fullData,P=w._fullLayout,F=[],I=[],D,R,O;function z(X,ae){for(D=0;D<ae.length;D++){var fe=X[ae[D]],K=(fe._extremes||{})[E];if(fe.visible===!0&&K){for(R=0;R<K.min.length;R++)O=K.min[R],l(F,O.val,O.pad,{extrapad:O.extrapad});for(R=0;R<K.max.length;R++)O=K.max[R],y(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(z(S,h._traceIndices),z(P.annotations||[],h._annIndices||[]),z(P.shapes||[],h._shapeIndices||[]),h._matchGroup&&!L){for(var H in h._matchGroup)if(H!==h._id){var Y=n(w,H),ee=d(w,Y,!0),j=h._length/Y._length;for(R=0;R<ee.min.length;R++)O=ee.min[R],l(F,O.val,O.pad*j,{extrapad:O.extrapad});for(R=0;R<ee.max.length;R++)O=ee.max[R],y(I,O.val,O.pad*j,{extrapad:O.extrapad})}}return{min:F,max:I}}function c(w,h,L){if(h.setScale(),h.autorange){h.range=L?L.slice():v(w,h),h._r=h.range.slice(),h._rl=M.simpleMap(h._r,h.r2l);var E=h._input,S={};S[h._attr+".range"]=h.range,S[h._attr+".autorange"]=h.autorange,e.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S),E.range=h.range.slice(),E.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var F=P.rangeslider[h._name];F&&F.rangemode==="auto"&&(F.range=v(w,h)),P._input.rangeslider[h._name]=M.extendFlat({},F)}}function m(w,h,L){L||(L={}),w._m||w.setScale();var E=[],S=[],P=h.length,F=L.padded||!1,I=L.tozero&&(w.type==="linear"||w.type==="-"),D=w.type==="log",R=!1,O=L.vpadLinearized||!1,z,H,Y,ee,j,X,ae,fe,K;function J(oe){if(Array.isArray(oe))return R=!0,function(se){return Math.max(Number(oe[se]||0),0)};var ne=Math.max(Number(oe||0),0);return function(){return ne}}var U=J((w._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),V=J((w._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),q=J(L.vpadplus||L.vpad),re=J(L.vpadminus||L.vpad);if(!R){if(fe=1/0,K=-1/0,D)for(z=0;z<P;z++)H=h[z],H<fe&&H>0&&(fe=H),H>K&&H<T&&(K=H);else for(z=0;z<P;z++)H=h[z],H<fe&&H>-T&&(fe=H),H>K&&H<T&&(K=H);h=[fe,K],P=2}var Z={tozero:I,extrapad:F};function Q(oe){Y=h[oe],f(Y)&&(X=U(oe),ae=V(oe),O?(ee=w.c2l(Y)-re(oe),j=w.c2l(Y)+q(oe)):(fe=Y-re(oe),K=Y+q(oe),D&&fe<K/10&&(fe=K/10),ee=w.c2l(fe),j=w.c2l(K)),I&&(ee=Math.min(0,ee),j=Math.max(0,j)),A(ee)&&l(E,ee,ae,Z),A(j)&&y(S,j,X,Z))}var ie=Math.min(6,P);for(z=0;z<ie;z++)Q(z);for(z=P-1;z>=ie;z--)Q(z);return{min:E,max:S,opts:L}}function l(w,h,L,E){u(w,h,L,E,_)}function y(w,h,L,E){u(w,h,L,E,p)}function u(w,h,L,E,S){for(var P=E.tozero,F=E.extrapad,I=!0,D=0;D<w.length&&I;D++){var R=w[D];if(S(R.val,h)&&R.pad>=L&&(R.extrapad||!F)){I=!1;break}else S(h,R.val)&&R.pad<=L&&(F||!R.extrapad)&&(w.splice(D,1),D--)}if(I){var O=P&&h===0;w.push({val:h,pad:O?0:L,extrapad:O?!1:F})}}function A(w){return f(w)&&Math.abs(w)<T}function _(w,h){return w<=h}function p(w,h){return w>=h}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../components/titles"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("./layout_attributes"),o=t("./clean_ticks"),b=t("../../constants/numerical"),g=b.ONEMAXYEAR,d=b.ONEAVGYEAR,c=b.ONEMINYEAR,m=b.ONEMAXQUARTER,l=b.ONEAVGQUARTER,y=b.ONEMINQUARTER,u=b.ONEMAXMONTH,A=b.ONEAVGMONTH,_=b.ONEMINMONTH,p=b.ONEWEEK,w=b.ONEDAY,h=w/2,L=b.ONEHOUR,E=b.ONEMIN,S=b.ONESEC,P=b.MINUS_SIGN,F=b.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},z={K:"tick",L:"text"},H={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Y=t("../../constants/alignment"),ee=Y.MID_SHIFT,j=Y.CAP_SHIFT,X=Y.LINE_SPACING,ae=Y.OPPOSITE_SIDE,fe=3,K=B.exports={};K.setConvert=t("./set_convert");var J=t("./axis_autotype"),U=t("./axis_ids"),V=U.idSort,q=U.isLinked;K.id2name=U.id2name,K.name2id=U.name2id,K.cleanId=U.cleanId,K.list=U.list,K.listIds=U.listIds,K.getFromId=U.getFromId,K.getFromTrace=U.getFromTrace;var re=t("./autorange");K.getAutoRange=re.getAutoRange,K.findExtremes=re.findExtremes;var Z=1e-4;function Q(Pe){var Le=(Pe[1]-Pe[0])*Z;return[Pe[0]-Le,Pe[1]+Le]}K.coerceRef=function(Pe,Le,ot,ut,pt,Pt){var xt=ut.charAt(ut.length-1),Lt=ot._fullLayout._subplots[xt+"axis"],Zt=ut+"ref",ur={};return pt||(pt=Lt[0]||(typeof Pt=="string"?Pt:Pt[0])),Pt||(Pt=pt),Lt=Lt.concat(Lt.map(function(Pr){return Pr+" domain"})),ur[Zt]={valType:"enumerated",values:Lt.concat(Pt?typeof Pt=="string"?[Pt]:Pt:[]),dflt:pt},e.coerce(Pe,Le,ur,Zt)},K.getRefType=function(Pe){return Pe===void 0?Pe:Pe==="paper"?"paper":Pe==="pixel"?"pixel":/( domain)$/.test(Pe)?"domain":"range"},K.coercePosition=function(Pe,Le,ot,ut,pt,Pt){var xt,Lt,Zt=K.getRefType(ut);if(Zt!=="range")xt=e.ensureNumber,Lt=ot(pt,Pt);else{var ur=K.getFromId(Le,ut);Pt=ur.fraction2r(Pt),Lt=ot(pt,Pt),xt=ur.cleanPos}Pe[pt]=xt(Lt)},K.cleanPosition=function(Pe,Le,ot){var ut=ot==="paper"||ot==="pixel"?e.ensureNumber:K.getFromId(Le,ot).cleanPos;return ut(Pe)},K.redrawComponents=function(Pe,Le){Le=Le||K.listIds(Pe);var ot=Pe._fullLayout;function ut(pt,Pt,xt,Lt){for(var Zt=T.getComponentMethod(pt,Pt),ur={},Pr=0;Pr<Le.length;Pr++)for(var Ar=ot[K.id2name(Le[Pr])],kr=Ar[xt],Zr=0;Zr<kr.length;Zr++){var lr=kr[Zr];if(!ur[lr]&&(Zt(Pe,lr),ur[lr]=1,Lt))return}}ut("annotations","drawOne","_annIndices"),ut("shapes","drawOne","_shapeIndices"),ut("images","draw","_imgIndices",!0),ut("selections","drawOne","_selectionIndices")};var ie=K.getDataConversions=function(Pe,Le,ot,ut){var pt,Pt=ot==="x"||ot==="y"||ot==="z"?ot:ut;if(Array.isArray(Pt)){if(pt={type:J(ut,void 0,{autotypenumbers:Pe._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(pt),pt.type==="category")for(var xt=0;xt<ut.length;xt++)pt.d2c(ut[xt])}else pt=K.getFromTrace(Pe,Le,Pt);return pt?{d2c:pt.d2c,c2d:pt.c2d}:Pt==="ids"?{d2c:ne,c2d:ne}:{d2c:oe,c2d:oe}};function oe(Pe){return+Pe}function ne(Pe){return String(Pe)}K.getDataToCoordFunc=function(Pe,Le,ot,ut){return ie(Pe,Le,ot,ut).d2c},K.counterLetter=function(Pe){var Le=Pe.charAt(0);if(Le==="x")return"y";if(Le==="y")return"x"},K.minDtick=function(Pe,Le,ot,ut){["log","category","multicategory"].indexOf(Pe.type)!==-1||!ut?Pe._minDtick=0:Pe._minDtick===void 0?(Pe._minDtick=Le,Pe._forceTick0=ot):Pe._minDtick&&((Pe._minDtick/Le+1e-6)%1<2e-6&&((ot-Pe._forceTick0)/Le%1+1.000001)%1<2e-6?(Pe._minDtick=Le,Pe._forceTick0=ot):((Le/Pe._minDtick+1e-6)%1>2e-6||((ot-Pe._forceTick0)/Pe._minDtick%1+1.000001)%1>2e-6)&&(Pe._minDtick=0))},K.saveRangeInitial=function(Pe,Le){for(var ot=K.list(Pe,"",!0),ut=!1,pt=0;pt<ot.length;pt++){var Pt=ot[pt],xt=Pt._rangeInitial===void 0,Lt=xt||!(Pt.range[0]===Pt._rangeInitial[0]&&Pt.range[1]===Pt._rangeInitial[1]);(xt&&Pt.autorange===!1||Le&&Lt)&&(Pt._rangeInitial=Pt.range.slice(),ut=!0)}return ut},K.saveShowSpikeInitial=function(Pe,Le){for(var ot=K.list(Pe,"",!0),ut=!1,pt="on",Pt=0;Pt<ot.length;Pt++){var xt=ot[Pt],Lt=xt._showSpikeInitial===void 0,Zt=Lt||xt.showspikes!==xt._showspikes;(Lt||Le&&Zt)&&(xt._showSpikeInitial=xt.showspikes,ut=!0),pt==="on"&&!xt.showspikes&&(pt="off")}return Pe._fullLayout._cartesianSpikesEnabled=pt,ut},K.autoBin=function(Pe,Le,ot,ut,pt,Pt){var xt=e.aggNums(Math.min,null,Pe),Lt=e.aggNums(Math.max,null,Pe);if(Le.type==="category"||Le.type==="multicategory")return{start:xt-.5,end:Lt+.5,size:Math.max(1,Math.round(Pt)||1),_dataSpan:Lt-xt};pt||(pt=Le.calendar);var Zt;if(Le.type==="log"?Zt={type:"linear",range:[xt,Lt]}:Zt={type:Le.type,range:e.simpleMap([xt,Lt],Le.c2r,0,pt),calendar:pt},K.setConvert(Zt),Pt=Pt&&o.dtick(Pt,Zt.type),Pt)Zt.dtick=Pt,Zt.tick0=o.tick0(void 0,Zt.type,pt);else{var ur;if(ot)ur=(Lt-xt)/ot;else{var Pr=e.distinctVals(Pe),Ar=Math.pow(10,Math.floor(Math.log(Pr.minDiff)/Math.LN10)),kr=Ar*e.roundUp(Pr.minDiff/Ar,[.9,1.9,4.9,9.9],!0);ur=Math.max(kr,2*e.stdev(Pe)/Math.pow(Pe.length,ut?.25:.4)),f(ur)||(ur=1)}K.autoTicks(Zt,ur)}var Zr=Zt.dtick,lr=K.tickIncrement(K.tickFirst(Zt),Zr,"reverse",pt),br,Or;if(typeof Zr=="number")lr=se(lr,Pe,Zt,xt,Lt),Or=1+Math.floor((Lt-lr)/Zr),br=lr+Or*Zr;else for(Zt.dtick.charAt(0)==="M"&&(lr=_e(lr,Pe,Zr,xt,pt)),br=lr,Or=0;br<=Lt;)br=K.tickIncrement(br,Zr,!1,pt),Or++;return{start:Le.c2r(lr,0,pt),end:Le.c2r(br,0,pt),size:Zr,_dataSpan:Lt-xt}};function se(Pe,Le,ot,ut,pt){var Pt=0,xt=0,Lt=0,Zt=0;function ur(Zr){return(1+(Zr-Pe)*100/ot.dtick)%100<2}for(var Pr=0;Pr<Le.length;Pr++)Le[Pr]%1===0?Lt++:f(Le[Pr])||Zt++,ur(Le[Pr])&&Pt++,ur(Le[Pr]+ot.dtick/2)&&xt++;var Ar=Le.length-Zt;if(Lt===Ar&&ot.type!=="date")ot.dtick<1?Pe=ut-.5*ot.dtick:(Pe-=.5,Pe+ot.dtick<ut&&(Pe+=ot.dtick));else if(xt<Ar*.1&&(Pt>Ar*.3||ur(ut)||ur(pt))){var kr=ot.dtick/2;Pe+=Pe+kr<ut?kr:-kr}return Pe}function _e(Pe,Le,ot,ut,pt){var Pt=e.findExactDates(Le,pt),xt=.8;if(Pt.exactDays>xt){var Lt=Number(ot.substr(1));Pt.exactYears>xt&&Lt%12===0?Pe=K.tickIncrement(Pe,"M6","reverse")+w*1.5:Pt.exactMonths>xt?Pe=K.tickIncrement(Pe,"M1","reverse")+w*15.5:Pe-=h;var Zt=K.tickIncrement(Pe,ot);if(Zt<=ut)return Zt}return Pe}K.prepMinorTicks=function(Pe,Le,ot){if(!Le.minor.dtick){delete Pe.dtick;var ut=Le.dtick&&f(Le._tmin),pt;if(ut){var Pt=K.tickIncrement(Le._tmin,Le.dtick,!0);pt=[Le._tmin,Pt*.99+Le._tmin*.01]}else{var xt=e.simpleMap(Le.range,Le.r2l);pt=[xt[0],.8*xt[0]+.2*xt[1]]}if(Pe.range=e.simpleMap(pt,Le.l2r),Pe._isMinor=!0,K.prepTicks(Pe,ot),ut){var Lt=f(Le.dtick),Zt=f(Pe.dtick),ur=Lt?Le.dtick:+Le.dtick.substring(1),Pr=Zt?Pe.dtick:+Pe.dtick.substring(1);Lt&&Zt?ue(ur,Pr)?ur===2*p&&Pr===2*w&&(Pe.dtick=p):ur===2*p&&Pr===3*w?Pe.dtick=p:ur===p&&!(Le._input.minor||{}).nticks?Pe.dtick=w:ge(ur/Pr,2.5)?Pe.dtick=ur/2:Pe.dtick=ur:String(Le.dtick).charAt(0)==="M"?Zt?Pe.dtick="M1":ue(ur,Pr)?ur>=12&&Pr===2&&(Pe.dtick="M3"):Pe.dtick=Le.dtick:String(Pe.dtick).charAt(0)==="L"?String(Le.dtick).charAt(0)==="L"?ue(ur,Pr)||(Pe.dtick=ge(ur/Pr,2.5)?Le.dtick/2:Le.dtick):Pe.dtick="D1":Pe.dtick==="D2"&&+Le.dtick>1&&(Pe.dtick=1)}Pe.range=Le.range}Le.minor._tick0Init===void 0&&(Pe.tick0=Le.tick0)};function ue(Pe,Le){return Math.abs((Pe/Le+.5)%1-.5)<.001}function ge(Pe,Le){return Math.abs(Pe/Le-1)<.001}K.prepTicks=function(Pe,Le){var ot=e.simpleMap(Pe.range,Pe.r2l,void 0,void 0,Le);if(Pe.tickmode==="auto"||!Pe.dtick){var ut=Pe.nticks,pt;ut||(Pe.type==="category"||Pe.type==="multicategory"?(pt=Pe.tickfont?e.bigFont(Pe.tickfont.size||12):15,ut=Pe._length/pt):(pt=Pe._id.charAt(0)==="y"?40:80,ut=e.constrain(Pe._length/pt,4,9)+1),Pe._name==="radialaxis"&&(ut*=2)),Pe.minor&&Pe.minor.tickmode!=="array"||Pe.tickmode==="array"&&(ut*=100),Pe._roughDTick=Math.abs(ot[1]-ot[0])/ut,K.autoTicks(Pe,Pe._roughDTick),Pe._minDtick>0&&Pe.dtick<Pe._minDtick*2&&(Pe.dtick=Pe._minDtick,Pe.tick0=Pe.l2r(Pe._forceTick0))}Pe.ticklabelmode==="period"&&ye(Pe),Pe.tick0||(Pe.tick0=Pe.type==="date"?"2000-01-01":0),Pe.type==="date"&&Pe.dtick<.1&&(Pe.dtick=.1),Ge(Pe)};function xe(Pe){return+Pe.substring(1)}function ye(Pe){var Le;function ot(){return!(f(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var ut=ot(),pt=K.getTickFormat(Pe);if(pt){var Pt=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(pt)||(/%[HI]/.test(pt)?(Le=L,Pt&&!ut&&Pe.dtick<L&&(Pe.dtick=L)):/%p/.test(pt)?(Le=h,Pt&&!ut&&Pe.dtick<h&&(Pe.dtick=h)):/%[Aadejuwx]/.test(pt)?(Le=w,Pt&&!ut&&Pe.dtick<w&&(Pe.dtick=w)):/%[UVW]/.test(pt)?(Le=p,Pt&&!ut&&Pe.dtick<p&&(Pe.dtick=p)):/%[Bbm]/.test(pt)?(Le=A,Pt&&(ut?xe(Pe.dtick)<1:Pe.dtick<_)&&(Pe.dtick="M1")):/%[q]/.test(pt)?(Le=l,Pt&&(ut?xe(Pe.dtick)<3:Pe.dtick<y)&&(Pe.dtick="M3")):/%[Yy]/.test(pt)&&(Le=d,Pt&&(ut?xe(Pe.dtick)<12:Pe.dtick<c)&&(Pe.dtick="M12")))}ut=ot(),ut&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=Le}function be(Pe,Le,ot){for(var ut=0;ut<Pe.length;ut++){var pt=Pe[ut].value,Pt=ut,xt=ut+1;ut<Pe.length-1?(Pt=ut,xt=ut+1):ut>0?(Pt=ut-1,xt=ut):(Pt=ut,xt=ut);var Lt=Pe[Pt].value,Zt=Pe[xt].value,ur=Math.abs(Zt-Lt),Pr=ot||ur,Ar=0;Pr>=c?ur>=c&&ur<=g?Ar=ur:Ar=d:ot===l&&Pr>=y?ur>=y&&ur<=m?Ar=ur:Ar=l:Pr>=_?ur>=_&&ur<=u?Ar=ur:Ar=A:ot===p&&Pr>=p?Ar=p:Pr>=w?Ar=w:ot===h&&Pr>=h?Ar=h:ot===L&&Pr>=L&&(Ar=L);var kr;Ar>=ur&&(Ar=ur,kr=!0);var Zr=pt+Ar;if(Le.rangebreaks&&Ar>0){for(var lr=84,br=0,Or=0;Or<lr;Or++){var Hr=(Or+.5)/lr;Le.maskBreaks(pt*(1-Hr)+Hr*Zr)!==F&&br++}Ar*=br/lr,Ar||(Pe[ut].drop=!0),kr&&ur>p&&(Ar=ur)}(Ar>0||ut===0)&&(Pe[ut].periodX=pt+Ar/2)}}K.calcTicks=function(Le,ot){for(var ut=Le.type,pt=Le.calendar,Pt=Le.ticklabelstep,xt=Le.ticklabelmode==="period",Lt=e.simpleMap(Le.range,Le.r2l,void 0,void 0,ot),Zt=Lt[1]<Lt[0],ur=Math.min(Lt[0],Lt[1]),Pr=Math.max(Lt[0],Lt[1]),Ar=Math.max(1e3,Le._length||0),kr=[],Zr=[],lr=[],br=[],Or=Le.minor&&(Le.minor.ticks||Le.minor.showgrid),Hr=1;Hr>=(Or?0:1);Hr--){var Lr=!Hr;Hr?(Le._dtickInit=Le.dtick,Le._tick0Init=Le.tick0):(Le.minor._dtickInit=Le.minor.dtick,Le.minor._tick0Init=Le.minor.tick0);var nt=Hr?Le:e.extendFlat({},Le,Le.minor);if(Lr?K.prepMinorTicks(nt,Le,ot):K.prepTicks(nt,ot),nt.tickmode==="array"){Hr?(lr=[],kr=Se(Le)):(br=[],Zr=Se(Le));continue}var It=Q(Lt),Jt=It[0],fr=It[1],Nr=f(nt.dtick),Vr=ut==="log"&&!(Nr||nt.dtick.charAt(0)==="L"),Dr=K.tickFirst(nt,ot);if(Hr){if(Le._tmin=Dr,Dr<Jt!==Zt)break;(ut==="category"||ut==="multicategory")&&(fr=Zt?Math.max(-.5,fr):Math.min(Le._categories.length-.5,fr))}var Er=null,jr=Dr,kn;if(Hr){var mn;Nr?mn=Le.dtick:ut==="date"?typeof Le.dtick=="string"&&Le.dtick.charAt(0)==="M"&&(mn=A*Le.dtick.substring(1)):mn=Le._roughDTick,kn=Math.round((Le.r2l(jr)-Le.r2l(Le.tick0))/mn)-1}var Wn=nt.dtick;for(nt.rangebreaks&&nt._tick0Init!==nt.tick0&&(jr=ct(jr,Le),Zt||(jr=K.tickIncrement(jr,Wn,!Zt,pt))),Hr&&xt&&(jr=K.tickIncrement(jr,Wn,!Zt,pt),kn--);Zt?jr>=fr:jr<=fr;jr=K.tickIncrement(jr,Wn,Zt,pt)){if(Hr&&kn++,nt.rangebreaks&&!Zt){if(jr<Jt)continue;if(nt.maskBreaks(jr)===F&&ct(jr,nt)>=Pr)break}if(lr.length>Ar||jr===Er)break;Er=jr;var In={value:jr};Hr?(Vr&&jr!==(jr|0)&&(In.simpleLabel=!0),Pt>1&&kn%Pt&&(In.skipLabel=!0),lr.push(In)):(In.minor=!0,br.push(In))}}if(Or){var $n=Le.minor.ticks==="inside"&&Le.ticks==="outside"||Le.minor.ticks==="outside"&&Le.ticks==="inside";if(!$n){for(var Kn=lr.map(function(Yt){return Yt.value}),ma=[],Ra=0;Ra<br.length;Ra++){var _i=br[Ra],Ka=_i.value;if(Kn.indexOf(Ka)===-1){for(var ri=!1,ei=0;!ri&&ei<lr.length;ei++)1e7+lr[ei].value===1e7+Ka&&(ri=!0);ri||ma.push(_i)}}br=ma}}xt&&be(lr,Le,Le._definedDelta);var Sr;if(Le.rangebreaks){var bn=Le._id.charAt(0)==="y",dn=1;Le.tickmode==="auto"&&(dn=Le.tickfont?Le.tickfont.size:12);var Ln=NaN;for(Sr=lr.length-1;Sr>-1;Sr--){if(lr[Sr].drop){lr.splice(Sr,1);continue}lr[Sr].value=ct(lr[Sr].value,Le);var ra=Le.c2p(lr[Sr].value);(bn?Ln>ra-dn:Ln<ra+dn)?lr.splice(Zt?Sr+1:Sr,1):Ln=ra}}ft(Le)&&Math.abs(Lt[1]-Lt[0])===360&&lr.pop(),Le._tmax=(lr[lr.length-1]||{}).value,Le._prevDateHead="",Le._inCalcTicks=!0;var ya,sa=function(Yt){Yt.text="",Le._prevDateHead=ya};lr=lr.concat(br);var Bn,Qn;for(Sr=0;Sr<lr.length;Sr++){var Xa=lr[Sr].minor,mi=lr[Sr].value;Xa?Zr.push({x:mi,minor:!0}):(ya=Le._prevDateHead,Bn=K.tickText(Le,mi,!1,lr[Sr].simpleLabel),Qn=lr[Sr].periodX,Qn!==void 0&&(Bn.periodX=Qn,(Qn>Pr||Qn<ur)&&(Qn>Pr&&(Bn.periodX=Pr),Qn<ur&&(Bn.periodX=ur),sa(Bn))),lr[Sr].skipLabel&&sa(Bn),kr.push(Bn))}return kr=kr.concat(Zr),Le._inCalcTicks=!1,xt&&kr.length&&(kr[0].noTick=!0),kr};function Se(Pe){var Le=e.simpleMap(Pe.range,Pe.r2l),ot=Q(Le),ut=Math.min(ot[0],ot[1]),pt=Math.max(ot[0],ot[1]),Pt=Pe.type==="category"?Pe.d2l_noadd:Pe.d2l;Pe.type==="log"&&String(Pe.dtick).charAt(0)!=="L"&&(Pe.dtick="L"+Math.pow(10,Math.floor(Math.min(Pe.range[0],Pe.range[1]))-1));for(var xt=[],Lt=0;Lt<=1;Lt++)if(!(Lt&&!Pe.minor)){var Zt=Lt?Pe.minor.tickvals:Pe.tickvals,ur=Lt?[]:Pe.ticktext;if(!!Zt){Array.isArray(ur)||(ur=[]);for(var Pr=0;Pr<Zt.length;Pr++){var Ar=Pt(Zt[Pr]);if(Ar>ut&&Ar<pt){var kr=ur[Pr]===void 0?K.tickText(Pe,Ar):dt(Pe,Ar,String(ur[Pr]));Lt&&(kr.minor=!0,kr.text=""),xt.push(kr)}}}}return Pe.rangebreaks&&(xt=xt.filter(function(Zr){return Pe.maskBreaks(Zr.x)!==F})),xt}var Re=[2,5,10],Ve=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Ce=[1,2,3,7,14],Ze=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ye=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Ie(Pe,Le,ot){return Le*e.roundUp(Pe/Le,ot)}K.autoTicks=function(Pe,Le,ot){var ut;function pt(Ar){return Math.pow(Ar,Math.floor(Math.log(Le)/Math.LN10))}if(Pe.type==="date"){Pe.tick0=e.dateTick0(Pe.calendar,0);var Pt=2*Le;if(Pt>d)Le/=d,ut=pt(10),Pe.dtick="M"+12*Ie(Le,ut,Re);else if(Pt>A)Le/=A,Pe.dtick="M"+Ie(Le,1,Ve);else if(Pt>w){if(Pe.dtick=Ie(Le,w,Pe._hasDayOfWeekBreaks?[1,2,7,14]:Ce),!ot){var xt=K.getTickFormat(Pe),Lt=Pe.ticklabelmode==="period";Lt&&(Pe._rawTick0=Pe.tick0),/%[uVW]/.test(xt)?Pe.tick0=e.dateTick0(Pe.calendar,2):Pe.tick0=e.dateTick0(Pe.calendar,1),Lt&&(Pe._dowTick0=Pe.tick0)}}else Pt>L?Pe.dtick=Ie(Le,L,Ve):Pt>E?Pe.dtick=Ie(Le,E,Ae):Pt>S?Pe.dtick=Ie(Le,S,Ae):(ut=pt(10),Pe.dtick=Ie(Le,ut,Re))}else if(Pe.type==="log"){Pe.tick0=0;var Zt=e.simpleMap(Pe.range,Pe.r2l);if(Pe._isMinor&&(Le*=1.5),Le>.7)Pe.dtick=Math.ceil(Le);else if(Math.abs(Zt[1]-Zt[0])<1){var ur=1.5*Math.abs((Zt[1]-Zt[0])/Le);Le=Math.abs(Math.pow(10,Zt[1])-Math.pow(10,Zt[0]))/ur,ut=pt(10),Pe.dtick="L"+Ie(Le,ut,Re)}else Pe.dtick=Le>.3?"D2":"D1"}else Pe.type==="category"||Pe.type==="multicategory"?(Pe.tick0=0,Pe.dtick=Math.ceil(Math.max(Le,1))):ft(Pe)?(Pe.tick0=0,ut=1,Pe.dtick=Ie(Le,ut,ze)):(Pe.tick0=0,ut=pt(10),Pe.dtick=Ie(Le,ut,Re));if(Pe.dtick===0&&(Pe.dtick=1),!f(Pe.dtick)&&typeof Pe.dtick!="string"){var Pr=Pe.dtick;throw Pe.dtick=1,"ax.dtick error: "+String(Pr)}};function Ge(Pe){var Le=Pe.dtick;if(Pe._tickexponent=0,!f(Le)&&typeof Le!="string"&&(Le=1),(Pe.type==="category"||Pe.type==="multicategory")&&(Pe._tickround=null),Pe.type==="date"){var ot=Pe.r2l(Pe.tick0),ut=Pe.l2r(ot).replace(/(^-|i)/g,""),pt=ut.length;if(String(Le).charAt(0)==="M")pt>10||ut.substr(5)!=="01-01"?Pe._tickround="d":Pe._tickround=+Le.substr(1)%12===0?"y":"m";else if(Le>=w&&pt<=10||Le>=w*15)Pe._tickround="d";else if(Le>=E&&pt<=16||Le>=L)Pe._tickround="M";else if(Le>=S&&pt<=19||Le>=E)Pe._tickround="S";else{var Pt=Pe.l2r(ot+Le).replace(/^-/,"").length;Pe._tickround=Math.max(pt,Pt)-20,Pe._tickround<0&&(Pe._tickround=4)}}else if(f(Le)||Le.charAt(0)==="L"){var xt=Pe.range.map(Pe.r2d||Number);f(Le)||(Le=Number(Le.substr(1))),Pe._tickround=2-Math.floor(Math.log(Le)/Math.LN10+.01);var Lt=Math.max(Math.abs(xt[0]),Math.abs(xt[1])),Zt=Math.floor(Math.log(Lt)/Math.LN10+.01),ur=Pe.minexponent===void 0?3:Pe.minexponent;Math.abs(Zt)>ur&&(at(Pe.exponentformat)&&!We(Zt)?Pe._tickexponent=3*Math.round((Zt-1)/3):Pe._tickexponent=Zt)}else Pe._tickround=null}K.tickIncrement=function(Pe,Le,ot,ut){var pt=ot?-1:1;if(f(Le))return e.increment(Pe,pt*Le);var Pt=Le.charAt(0),xt=pt*Number(Le.substr(1));if(Pt==="M")return e.incrementMonth(Pe,xt,ut);if(Pt==="L")return Math.log(Math.pow(10,Pe)+xt)/Math.LN10;if(Pt==="D"){var Lt=Le==="D2"?Ye:Ze,Zt=Pe+pt*.01,ur=e.roundUp(e.mod(Zt,1),Lt,ot);return Math.floor(Zt)+Math.log(x.round(Math.pow(10,ur),1))/Math.LN10}throw"unrecognized dtick "+String(Le)},K.tickFirst=function(Pe,Le){var ot=Pe.r2l||Number,ut=e.simpleMap(Pe.range,ot,void 0,void 0,Le),pt=ut[1]<ut[0],Pt=pt?Math.floor:Math.ceil,xt=Q(ut)[0],Lt=Pe.dtick,Zt=ot(Pe.tick0);if(f(Lt)){var ur=Pt((xt-Zt)/Lt)*Lt+Zt;return(Pe.type==="category"||Pe.type==="multicategory")&&(ur=e.constrain(ur,0,Pe._categories.length-1)),ur}var Pr=Lt.charAt(0),Ar=Number(Lt.substr(1));if(Pr==="M"){for(var kr=0,Zr=Zt,lr,br,Or;kr<10;){if(lr=K.tickIncrement(Zr,Lt,pt,Pe.calendar),(lr-xt)*(Zr-xt)<=0)return pt?Math.min(Zr,lr):Math.max(Zr,lr);br=(xt-(Zr+lr)/2)/(lr-Zr),Or=Pr+(Math.abs(Math.round(br))||1)*Ar,Zr=K.tickIncrement(Zr,Or,br<0?!pt:pt,Pe.calendar),kr++}return e.error("tickFirst did not converge",Pe),Zr}else{if(Pr==="L")return Math.log(Pt((Math.pow(10,xt)-Zt)/Ar)*Ar+Zt)/Math.LN10;if(Pr==="D"){var Hr=Lt==="D2"?Ye:Ze,Lr=e.roundUp(e.mod(xt,1),Hr,pt);return Math.floor(xt)+Math.log(x.round(Math.pow(10,Lr),1))/Math.LN10}else throw"unrecognized dtick "+String(Lt)}},K.tickText=function(Pe,Le,ot,ut){var pt=dt(Pe,Le),Pt=Pe.tickmode==="array",xt=ot||Pt,Lt=Pe.type,Zt=Lt==="category"?Pe.d2l_noadd:Pe.d2l,ur;if(Pt&&Array.isArray(Pe.ticktext)){var Pr=e.simpleMap(Pe.range,Pe.r2l),Ar=(Math.abs(Pr[1]-Pr[0])-(Pe._lBreaks||0))/1e4;for(ur=0;ur<Pe.ticktext.length&&!(Math.abs(Le-Zt(Pe.tickvals[ur]))<Ar);ur++);if(ur<Pe.ticktext.length)return pt.text=String(Pe.ticktext[ur]),pt}function kr(br){if(br===void 0)return!0;if(ot)return br==="none";var Or={first:Pe._tmin,last:Pe._tmax}[br];return br!=="all"&&Le!==Or}var Zr=ot?"never":Pe.exponentformat!=="none"&&kr(Pe.showexponent)?"hide":"";if(Lt==="date"?Rt(Pe,pt,ot,xt):Lt==="log"?Qt(Pe,pt,ot,xt,Zr):Lt==="category"?Bt(Pe,pt):Lt==="multicategory"?Ct(Pe,pt,ot):ft(Pe)?Ot(Pe,pt,ot,xt,Zr):Kt(Pe,pt,ot,xt,Zr),ut||(Pe.tickprefix&&!kr(Pe.showtickprefix)&&(pt.text=Pe.tickprefix+pt.text),Pe.ticksuffix&&!kr(Pe.showticksuffix)&&(pt.text+=Pe.ticksuffix)),Pe.tickson==="boundaries"||Pe.showdividers){var lr=function(br){var Or=Pe.l2p(br);return Or>=0&&Or<=Pe._length?br:null};pt.xbnd=[lr(pt.x-.5),lr(pt.x+Pe.dtick-.5)]}return pt},K.hoverLabelText=function(Pe,Le,ot){ot&&(Pe=e.extendFlat({},Pe,{hoverformat:ot}));var ut=Array.isArray(Le)?Le[0]:Le,pt=Array.isArray(Le)?Le[1]:void 0;if(pt!==void 0&&pt!==ut)return K.hoverLabelText(Pe,ut,ot)+" - "+K.hoverLabelText(Pe,pt,ot);var Pt=Pe.type==="log"&&ut<=0,xt=K.tickText(Pe,Pe.c2l(Pt?-ut:ut),"hover").text;return Pt?ut===0?"0":P+xt:xt};function dt(Pe,Le,ot){var ut=Pe.tickfont||{};return{x:Le,dx:0,dy:0,text:ot||"",fontSize:ut.size,font:ut.family,fontColor:ut.color}}function Rt(Pe,Le,ot,ut){var pt=Pe._tickround,Pt=ot&&Pe.hoverformat||K.getTickFormat(Pe);ut&&(f(pt)?pt=4:pt={y:"m",m:"d",d:"M",M:"S",S:4}[pt]);var xt=e.formatDate(Le.x,Pt,pt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Lt,Zt=xt.indexOf(`
`);if(Zt!==-1&&(Lt=xt.substr(Zt+1),xt=xt.substr(0,Zt)),ut&&(xt==="00:00:00"||xt==="00:00"?(xt=Lt,Lt=""):xt.length===8&&(xt=xt.replace(/:00$/,""))),Lt)if(ot)pt==="d"?xt+=", "+Lt:xt=Lt+(xt?", "+xt:"");else if(!Pe._inCalcTicks||Pe._prevDateHead!==Lt)Pe._prevDateHead=Lt,xt+="<br>"+Lt;else{var ur=Et(Pe),Pr=Pe._trueSide||Pe.side;(!ur&&Pr==="top"||ur&&Pr==="bottom")&&(xt+="<br> ")}Le.text=xt}function Qt(Pe,Le,ot,ut,pt){var Pt=Pe.dtick,xt=Le.x,Lt=Pe.tickformat,Zt=typeof Pt=="string"&&Pt.charAt(0);if(pt==="never"&&(pt=""),ut&&Zt!=="L"&&(Pt="L3",Zt="L"),Lt||Zt==="L")Le.text=Ee(Math.pow(10,xt),Pe,pt,ut);else if(f(Pt)||Zt==="D"&&e.mod(xt+.01,1)<.1){var ur=Math.round(xt),Pr=Math.abs(ur),Ar=Pe.exponentformat;Ar==="power"||at(Ar)&&We(ur)?(ur===0?Le.text=1:ur===1?Le.text="10":Le.text="10<sup>"+(ur>1?"":P)+Pr+"</sup>",Le.fontSize*=1.25):(Ar==="e"||Ar==="E")&&Pr>2?Le.text="1"+Ar+(ur>0?"+":P)+Pr:(Le.text=Ee(Math.pow(10,xt),Pe,"","fakehover"),Pt==="D1"&&Pe._id.charAt(0)==="y"&&(Le.dy-=Le.fontSize/6))}else if(Zt==="D")Le.text=String(Math.round(Math.pow(10,e.mod(xt,1)))),Le.fontSize*=.75;else throw"unrecognized dtick "+String(Pt);if(Pe.dtick==="D1"){var kr=String(Le.text).charAt(0);(kr==="0"||kr==="1")&&(Pe._id.charAt(0)==="y"?Le.dx-=Le.fontSize/4:(Le.dy+=Le.fontSize/2,Le.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*Le.fontSize*(xt<0?.5:.25)))}}function Bt(Pe,Le){var ot=Pe._categories[Math.round(Le.x)];ot===void 0&&(ot=""),Le.text=String(ot)}function Ct(Pe,Le,ot){var ut=Math.round(Le.x),pt=Pe._categories[ut]||[],Pt=pt[1]===void 0?"":String(pt[1]),xt=pt[0]===void 0?"":String(pt[0]);ot?Le.text=xt+" - "+Pt:(Le.text=Pt,Le.text2=xt)}function Kt(Pe,Le,ot,ut,pt){pt==="never"?pt="":Pe.showexponent==="all"&&Math.abs(Le.x/Pe.dtick)<1e-6&&(pt="hide"),Le.text=Ee(Le.x,Pe,pt,ut)}function Ot(Pe,Le,ot,ut,pt){if(Pe.thetaunit==="radians"&&!ot){var Pt=Le.x/180;if(Pt===0)Le.text="0";else{var xt=St(Pt);if(xt[1]>=100)Le.text=Ee(e.deg2rad(Le.x),Pe,pt,ut);else{var Lt=Le.x<0;xt[1]===1?xt[0]===1?Le.text="\u03C0":Le.text=xt[0]+"\u03C0":Le.text=["<sup>",xt[0],"</sup>","\u2044","<sub>",xt[1],"</sub>","\u03C0"].join(""),Lt&&(Le.text=P+Le.text)}}}else Le.text=Ee(Le.x,Pe,pt,ut)}function St(Pe){function Le(Lt,Zt){return Math.abs(Lt-Zt)<=1e-6}function ot(Lt,Zt){return Le(Zt,0)?Lt:ot(Zt,Lt%Zt)}function ut(Lt){for(var Zt=1;!Le(Math.round(Lt*Zt)/Zt,Lt);)Zt*=10;return Zt}var pt=ut(Pe),Pt=Pe*pt,xt=Math.abs(ot(Pt,pt));return[Math.round(Pt/xt),Math.round(pt/xt)]}var Xe=["f","p","n","\u03BC","m","","k","M","G","T"];function at(Pe){return Pe==="SI"||Pe==="B"}function We(Pe){return Pe>14||Pe<-15}function Ee(Pe,Le,ot,ut){var pt=Pe<0,Pt=Le._tickround,xt=ot||Le.exponentformat||"B",Lt=Le._tickexponent,Zt=K.getTickFormat(Le),ur=Le.separatethousands;if(ut){var Pr={exponentformat:xt,minexponent:Le.minexponent,dtick:Le.showexponent==="none"?Le.dtick:f(Pe)&&Math.abs(Pe)||1,range:Le.showexponent==="none"?Le.range.map(Le.r2d):[0,Pe||1]};Ge(Pr),Pt=(Number(Pr._tickround)||0)+4,Lt=Pr._tickexponent,Le.hoverformat&&(Zt=Le.hoverformat)}if(Zt)return Le._numFormat(Zt)(Pe).replace(/-/g,P);var Ar=Math.pow(10,-Pt)/2;if(xt==="none"&&(Lt=0),Pe=Math.abs(Pe),Pe<Ar)Pe="0",pt=!1;else{if(Pe+=Ar,Lt&&(Pe*=Math.pow(10,-Lt),Pt+=Lt),Pt===0)Pe=String(Math.floor(Pe));else if(Pt<0){Pe=String(Math.round(Pe)),Pe=Pe.substr(0,Pe.length+Pt);for(var kr=Pt;kr<0;kr++)Pe+="0"}else{Pe=String(Pe);var Zr=Pe.indexOf(".")+1;Zr&&(Pe=Pe.substr(0,Zr+Pt).replace(/\.?0+$/,""))}Pe=e.numSeparate(Pe,Le._separators,ur)}if(Lt&&xt!=="hide"){at(xt)&&We(Lt)&&(xt="power");var lr;Lt<0?lr=P+-Lt:xt!=="power"?lr="+"+Lt:lr=String(Lt),xt==="e"||xt==="E"?Pe+=xt+lr:xt==="power"?Pe+="\xD710<sup>"+lr+"</sup>":xt==="B"&&Lt===9?Pe+="B":at(xt)&&(Pe+=Xe[Lt/3+5])}return pt?P+Pe:Pe}K.getTickFormat=function(Pe){var Le;function ot(Zt){return typeof Zt!="string"?Zt:Number(Zt.replace("M",""))*A}function ut(Zt,ur){var Pr=["L","D"];if(typeof Zt==typeof ur){if(typeof Zt=="number")return Zt-ur;var Ar=Pr.indexOf(Zt.charAt(0)),kr=Pr.indexOf(ur.charAt(0));return Ar===kr?Number(Zt.replace(/(L|D)/g,""))-Number(ur.replace(/(L|D)/g,"")):Ar-kr}else return typeof Zt=="number"?1:-1}function pt(Zt,ur,Pr){var Ar=Pr||function(lr){return lr},kr=ur[0],Zr=ur[1];return(!kr&&typeof kr!="number"||Ar(kr)<=Ar(Zt))&&(!Zr&&typeof Zr!="number"||Ar(Zr)>=Ar(Zt))}function Pt(Zt,ur){var Pr=ur[0]===null,Ar=ur[1]===null,kr=ut(Zt,ur[0])>=0,Zr=ut(Zt,ur[1])<=0;return(Pr||kr)&&(Ar||Zr)}var xt,Lt;if(Pe.tickformatstops&&Pe.tickformatstops.length>0)switch(Pe.type){case"date":case"linear":{for(Le=0;Le<Pe.tickformatstops.length;Le++)if(Lt=Pe.tickformatstops[Le],Lt.enabled&&pt(Pe.dtick,Lt.dtickrange,ot)){xt=Lt;break}break}case"log":{for(Le=0;Le<Pe.tickformatstops.length;Le++)if(Lt=Pe.tickformatstops[Le],Lt.enabled&&Pt(Pe.dtick,Lt.dtickrange)){xt=Lt;break}break}}return xt?xt.value:Pe.tickformat},K.getSubplots=function(Pe,Le){var ot=Pe._fullLayout._subplots,ut=ot.cartesian.concat(ot.gl2d||[]),pt=Le?K.findSubplotsWithAxis(ut,Le):ut;return pt.sort(function(Pt,xt){var Lt=Pt.substr(1).split("y"),Zt=xt.substr(1).split("y");return Lt[0]===Zt[0]?+Lt[1]-+Zt[1]:+Lt[0]-+Zt[0]}),pt},K.findSubplotsWithAxis=function(Pe,Le){for(var ot=new RegExp(Le._id.charAt(0)==="x"?"^"+Le._id+"y":Le._id+"$"),ut=[],pt=0;pt<Pe.length;pt++){var Pt=Pe[pt];ot.test(Pt)&&ut.push(Pt)}return ut},K.makeClipPaths=function(Pe){var Le=Pe._fullLayout;if(!Le._hasOnlyLargeSploms){var ot={_offset:0,_length:Le.width,_id:""},ut={_offset:0,_length:Le.height,_id:""},pt=K.list(Pe,"x",!0),Pt=K.list(Pe,"y",!0),xt=[],Lt,Zt;for(Lt=0;Lt<pt.length;Lt++)for(xt.push({x:pt[Lt],y:ut}),Zt=0;Zt<Pt.length;Zt++)Lt===0&&xt.push({x:ot,y:Pt[Zt]}),xt.push({x:pt[Lt],y:Pt[Zt]});var ur=Le._clips.selectAll(".axesclip").data(xt,function(Pr){return Pr.x._id+Pr.y._id});ur.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Pr){return"clip"+Le._uid+Pr.x._id+Pr.y._id}).append("rect"),ur.exit().remove(),ur.each(function(Pr){x.select(this).select("rect").attr({x:Pr.x._offset||0,y:Pr.y._offset||0,width:Pr.x._length||1,height:Pr.y._length||1})})}},K.draw=function(Pe,Le,ot){var ut=Pe._fullLayout;Le==="redraw"&&ut._paper.selectAll("g.subplot").each(function(Pt){var xt=Pt[0],Lt=ut._plots[xt];if(Lt){var Zt=Lt.xaxis,ur=Lt.yaxis;Lt.xaxislayer.selectAll("."+Zt._id+"tick").remove(),Lt.yaxislayer.selectAll("."+ur._id+"tick").remove(),Lt.xaxislayer.selectAll("."+Zt._id+"tick2").remove(),Lt.yaxislayer.selectAll("."+ur._id+"tick2").remove(),Lt.xaxislayer.selectAll("."+Zt._id+"divider").remove(),Lt.yaxislayer.selectAll("."+ur._id+"divider").remove(),Lt.minorGridlayer&&Lt.minorGridlayer.selectAll("path").remove(),Lt.gridlayer&&Lt.gridlayer.selectAll("path").remove(),Lt.zerolinelayer&&Lt.zerolinelayer.selectAll("path").remove(),ut._infolayer.select(".g-"+Zt._id+"title").remove(),ut._infolayer.select(".g-"+ur._id+"title").remove()}});var pt=!Le||Le==="redraw"?K.listIds(Pe):Le;return e.syncOrAsync(pt.map(function(Pt){return function(){if(!!Pt){var xt=K.getFromId(Pe,Pt),Lt=K.drawOne(Pe,xt,ot);return xt._r=xt.range.slice(),xt._rl=e.simpleMap(xt._r,xt.r2l),Lt}}}))},K.drawOne=function(Pe,Le,ot){ot=ot||{};var ut,pt,Pt;Le.setScale();var xt=Pe._fullLayout,Lt=Le._id,Zt=Lt.charAt(0),ur=K.counterLetter(Lt),Pr=xt._plots[Le._mainSubplot];if(!Pr)return;var Ar=Pr[Zt+"axislayer"],kr=Le._mainLinePosition,Zr=Le._mainMirrorPosition,lr=Le._vals=K.calcTicks(Le),br=[Le.mirror,kr,Zr].join("_");for(ut=0;ut<lr.length;ut++)lr[ut].axInfo=br;Le._selections={},Le._tickAngles&&(Le._prevTickAngles=Le._tickAngles),Le._tickAngles={},Le._depth=null;var Or={};function Hr(Yt){var gr=Lt+(Yt||"tick");return Or[gr]||(Or[gr]=mt(Le,gr)),Or[gr]}if(!!Le.visible){var Lr=K.makeTransTickFn(Le),nt=K.makeTransTickLabelFn(Le),It,Jt,fr=Le.ticks==="inside",Nr=Le.ticks==="outside";if(Le.tickson==="boundaries"){var Vr=Ke(Le,lr);Jt=K.clipEnds(Le,Vr),It=fr?Jt:Vr}else Jt=K.clipEnds(Le,lr),It=fr&&Le.ticklabelmode!=="period"?Jt:lr;var Dr=Le._gridVals=Jt,Er=At(Le,lr);if(!xt._hasOnlyLargeSploms){var jr=Le._subplotsWith,kn={};for(ut=0;ut<jr.length;ut++){pt=jr[ut],Pt=xt._plots[pt];var mn=Pt[ur+"axis"],Wn=mn._mainAxis._id;if(!kn[Wn]){kn[Wn]=1;var In=Zt==="x"?"M0,"+mn._offset+"v"+mn._length:"M"+mn._offset+",0h"+mn._length;K.drawGrid(Pe,Le,{vals:Dr,counterAxis:mn,layer:Pt.gridlayer.select("."+Lt),minorLayer:Pt.minorGridlayer.select("."+Lt),path:In,transFn:Lr}),K.drawZeroLine(Pe,Le,{counterAxis:mn,layer:Pt.zerolinelayer,path:In,transFn:Lr})}}}var $n,Kn=K.getTickSigns(Le),ma=K.getTickSigns(Le,"minor");if(Le.ticks||Le.minor&&Le.minor.ticks){var Ra=K.makeTickPath(Le,kr,Kn[2]),_i=K.makeTickPath(Le,kr,ma[2],{minor:!0}),Ka,ri,ei,Sr;if(Le._anchorAxis&&Le.mirror&&Le.mirror!==!0?(Ka=K.makeTickPath(Le,Zr,Kn[3]),ri=K.makeTickPath(Le,Zr,ma[3],{minor:!0}),ei=Ra+Ka,Sr=_i+ri):(Ka="",ri="",ei=Ra,Sr=_i),Le.showdividers&&Nr&&Le.tickson==="boundaries"){var bn={};for(ut=0;ut<Er.length;ut++)bn[Er[ut].x]=1;$n=function(Yt){return bn[Yt.x]?Ka:ei}}else $n=function(Yt){return Yt.minor?Sr:ei}}if(K.drawTicks(Pe,Le,{vals:It,layer:Ar,path:$n,transFn:Lr}),Le.mirror==="allticks"){var dn=Object.keys(Le._linepositions||{});for(ut=0;ut<dn.length;ut++){pt=dn[ut],Pt=xt._plots[pt];var Ln=Le._linepositions[pt]||[],ra=Ln[0],ya=Ln[1],sa=Ln[2],Bn=K.makeTickPath(Le,ra,sa?Kn[0]:ma[0],{minor:sa})+K.makeTickPath(Le,ya,sa?Kn[1]:ma[1],{minor:sa});K.drawTicks(Pe,Le,{vals:It,layer:Pt[Zt+"axislayer"],path:Bn,transFn:Lr})}}var Qn=[];if(Qn.push(function(){return K.drawLabels(Pe,Le,{vals:lr,layer:Ar,plotinfo:Pt,transFn:nt,labelFns:K.makeLabelFns(Le,kr)})}),Le.type==="multicategory"){var Xa={x:2,y:10}[Zt];Qn.push(function(){var Yt={x:"height",y:"width"}[Zt],gr=Hr()[Yt]+Xa+(Le._tickAngles[Lt+"tick"]?Le.tickfont.size*X:0);return K.drawLabels(Pe,Le,{vals:et(Le,lr),layer:Ar,cls:Lt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Lr,labelFns:K.makeLabelFns(Le,kr+gr*Kn[4])})}),Qn.push(function(){return Le._depth=Kn[4]*(Hr("tick2")[Le.side]-kr),Ht(Pe,Le,{vals:Er,layer:Ar,path:K.makeTickPath(Le,kr,Kn[4],{len:Le._depth}),transFn:Lr})})}else Le.title.hasOwnProperty("standoff")&&Qn.push(function(){Le._depth=Kn[4]*(Hr()[Le.side]-kr)});var mi=T.getComponentMethod("rangeslider","isVisible")(Le);return Qn.push(function(){var Yt=Le.side.charAt(0),gr=ae[Le.side].charAt(0),un=K.getPxPosition(Pe,Le),yn=Nr?Le.ticklen:0,sn,Cn,Tn,gn;if((Le.automargin||mi)&&(Le.type==="multicategory"?sn=Hr("tick2"):(sn=Hr(),Zt==="x"&&Yt==="b"&&(Le._depth=Math.max(sn.width>0?sn.bottom-un:0,yn)))),Le.automargin){Cn={x:0,y:0,r:0,l:0,t:0,b:0};var _r=[0,1];if(Zt==="x"){if(Yt==="b"?Cn[Yt]=Le._depth:(Cn[Yt]=Le._depth=Math.max(sn.width>0?un-sn.top:0,yn),_r.reverse()),sn.width>0){var wr=sn.right-(Le._offset+Le._length);wr>0&&(Cn.xr=1,Cn.r=wr);var Br=Le._offset-sn.left;Br>0&&(Cn.xl=0,Cn.l=Br)}}else if(Yt==="l"?Cn[Yt]=Le._depth=Math.max(sn.height>0?un-sn.left:0,yn):(Cn[Yt]=Le._depth=Math.max(sn.height>0?sn.right-un:0,yn),_r.reverse()),sn.height>0){var An=sn.bottom-(Le._offset+Le._length);An>0&&(Cn.yb=0,Cn.b=An);var Yn=Le._offset-sn.top;Yn>0&&(Cn.yt=1,Cn.t=Yn)}Cn[ur]=Le.anchor==="free"?Le.position:Le._anchorAxis.domain[_r[0]],Le.title.text!==xt._dfltTitle[Zt]&&(Cn[Yt]+=Xt(Le)+(Le.title.standoff||0)),Le.mirror&&Le.anchor!=="free"&&(Tn={x:0,y:0,r:0,l:0,t:0,b:0},Tn[gr]=Le.linewidth,Le.mirror&&Le.mirror!==!0&&(Tn[gr]+=yn),Le.mirror===!0||Le.mirror==="ticks"?Tn[ur]=Le._anchorAxis.domain[_r[1]]:(Le.mirror==="all"||Le.mirror==="allticks")&&(Tn[ur]=[Le._counterDomainMin,Le._counterDomainMax][_r[1]]))}mi&&(gn=T.getComponentMethod("rangeslider","autoMarginOpts")(Pe,Le)),typeof Le.automargin=="string"&&(He(Cn,Le.automargin),He(Tn,Le.automargin)),M.autoMargin(Pe,st(Le),Cn),M.autoMargin(Pe,rr(Le),Tn),M.autoMargin(Pe,er(Le),gn)}),!ot.skipTitle&&!(mi&&Le.side==="bottom")&&Qn.push(function(){return Wt(Pe,Le)}),e.syncOrAsync(Qn)}};function He(Pe,Le){if(!!Pe){var ot=Object.keys(H).reduce(function(ut,pt){return Le.indexOf(pt)!==-1&&H[pt].forEach(function(Pt){ut[Pt]=1}),ut},{});Object.keys(Pe).forEach(function(ut){ot[ut]||(ut.length===1?Pe[ut]=0:delete Pe[ut])})}}function Ke(Pe,Le){var ot=[],ut,pt=function(Pt,xt){var Lt=Pt.xbnd[xt];Lt!==null&&ot.push(e.extendFlat({},Pt,{x:Lt}))};if(Le.length){for(ut=0;ut<Le.length;ut++)pt(Le[ut],0);pt(Le[ut-1],1)}return ot}function et(Pe,Le){for(var ot=[],ut={},pt=0;pt<Le.length;pt++){var Pt=Le[pt];ut[Pt.text2]?ut[Pt.text2].push(Pt.x):ut[Pt.text2]=[Pt.x]}for(var xt in ut)ot.push(dt(Pe,e.interp(ut[xt],.5),xt));return ot}function At(Pe,Le){var ot=[],ut,pt,Pt=Le.length&&Le[Le.length-1].x<Le[0].x,xt=function(Zt,ur){var Pr=Zt.xbnd[ur];Pr!==null&&ot.push(e.extendFlat({},Zt,{x:Pr}))};if(Pe.showdividers&&Le.length){for(ut=0;ut<Le.length;ut++){var Lt=Le[ut];Lt.text2!==pt&&xt(Lt,Pt?1:0),pt=Lt.text2}xt(Le[ut-1],Pt?0:1)}return ot}function mt(Pe,Le){var ot,ut,pt,Pt;return Pe._selections[Le].size()?(ot=1/0,ut=-1/0,pt=1/0,Pt=-1/0,Pe._selections[Le].each(function(){var xt=en(this),Lt=v.bBox(xt.node().parentNode);ot=Math.min(ot,Lt.top),ut=Math.max(ut,Lt.bottom),pt=Math.min(pt,Lt.left),Pt=Math.max(Pt,Lt.right)})):(ot=0,ut=0,pt=0,Pt=0),{top:ot,bottom:ut,left:pt,right:Pt,height:ut-ot,width:Pt-pt}}K.getTickSigns=function(Pe,Le){var ot=Pe._id.charAt(0),ut={x:"top",y:"right"}[ot],pt=Pe.side===ut?1:-1,Pt=[-1,1,pt,-pt],xt=Le?(Pe.minor||{}).ticks:Pe.ticks;return xt!=="inside"==(ot==="x")&&(Pt=Pt.map(function(Lt){return-Lt})),Pe.side&&Pt.push({l:-1,t:-1,r:1,b:1}[Pe.side.charAt(0)]),Pt},K.makeTransTickFn=function(Pe){return Pe._id.charAt(0)==="x"?function(Le){return a(Pe._offset+Pe.l2p(Le.x),0)}:function(Le){return a(0,Pe._offset+Pe.l2p(Le.x))}},K.makeTransTickLabelFn=function(Pe){var Le=Gt(Pe),ot=Le[0],ut=Le[1];return Pe._id.charAt(0)==="x"?function(pt){return a(ot+Pe._offset+Pe.l2p(Mt(pt)),ut)}:function(pt){return a(ut,ot+Pe._offset+Pe.l2p(Mt(pt)))}};function Mt(Pe){return Pe.periodX!==void 0?Pe.periodX:Pe.x}function Gt(Pe){var Le=Pe.ticklabelposition||"",ot=function(Zr){return Le.indexOf(Zr)!==-1},ut=ot("top"),pt=ot("left"),Pt=ot("right"),xt=ot("bottom"),Lt=ot("inside"),Zt=xt||pt||ut||Pt;if(!Zt&&!Lt)return[0,0];var ur=Pe.side,Pr=Zt?(Pe.tickwidth||0)/2:0,Ar=fe,kr=Pe.tickfont?Pe.tickfont.size:12;return(xt||ut)&&(Pr+=kr*j,Ar+=(Pe.linewidth||0)/2),(pt||Pt)&&(Pr+=(Pe.linewidth||0)/2,Ar+=fe),Lt&&ur==="top"&&(Ar-=kr*(1-j)),(pt||ut)&&(Pr=-Pr),(ur==="bottom"||ur==="right")&&(Ar=-Ar),[Zt?Pr:0,Lt?Ar:0]}K.makeTickPath=function(Pe,Le,ot,ut){ut||(ut={});var pt=ut.minor;if(pt&&!Pe.minor)return"";var Pt=ut.len!==void 0?ut.len:pt?Pe.minor.ticklen:Pe.ticklen,xt=Pe._id.charAt(0),Lt=(Pe.linewidth||1)/2;return xt==="x"?"M0,"+(Le+Lt*ot)+"v"+Pt*ot:"M"+(Le+Lt*ot)+",0h"+Pt*ot},K.makeLabelFns=function(Pe,Le,ot){var ut=Pe.ticklabelposition||"",pt=function(kn){return ut.indexOf(kn)!==-1},Pt=pt("top"),xt=pt("left"),Lt=pt("right"),Zt=pt("bottom"),ur=Zt||xt||Pt||Lt,Pr=pt("inside"),Ar=ut==="inside"&&Pe.ticks==="inside"||!Pr&&Pe.ticks==="outside"&&Pe.tickson!=="boundaries",kr=0,Zr=0,lr=Ar?Pe.ticklen:0;if(Pr?lr*=-1:ur&&(lr=0),Ar&&(kr+=lr,ot)){var br=e.deg2rad(ot);kr=lr*Math.cos(br)+1,Zr=lr*Math.sin(br)}Pe.showticklabels&&(Ar||Pe.showline)&&(kr+=.2*Pe.tickfont.size),kr+=(Pe.linewidth||1)/2*(Pr?-1:1);var Or={labelStandoff:kr,labelShift:Zr},Hr,Lr,nt,It,Jt=0,fr=Pe.side,Nr=Pe._id.charAt(0),Vr=Pe.tickangle,Dr;if(Nr==="x")Dr=!Pr&&fr==="bottom"||Pr&&fr==="top",It=Dr?1:-1,Pr&&(It*=-1),Hr=Zr*It,Lr=Le+kr*It,nt=Dr?1:-.2,Math.abs(Vr)===90&&(Pr?nt+=ee:Vr===-90&&fr==="bottom"?nt=j:Vr===90&&fr==="top"?nt=ee:nt=.5,Jt=ee/2*(Vr/90)),Or.xFn=function(kn){return kn.dx+Hr+Jt*kn.fontSize},Or.yFn=function(kn){return kn.dy+Lr+kn.fontSize*nt},Or.anchorFn=function(kn,mn){if(ur){if(xt)return"end";if(Lt)return"start"}return!f(mn)||mn===0||mn===180?"middle":mn*It<0!==Pr?"end":"start"},Or.heightFn=function(kn,mn,Wn){return mn<-60||mn>60?-.5*Wn:Pe.side==="top"!==Pr?-Wn:0};else if(Nr==="y"){if(Dr=!Pr&&fr==="left"||Pr&&fr==="right",It=Dr?1:-1,Pr&&(It*=-1),Hr=kr,Lr=Zr*It,nt=0,!Pr&&Math.abs(Vr)===90&&(Vr===-90&&fr==="left"||Vr===90&&fr==="right"?nt=j:nt=.5),Pr){var Er=f(Vr)?+Vr:0;if(Er!==0){var jr=e.deg2rad(Er);Jt=Math.abs(Math.sin(jr))*j*It,nt=0}}Or.xFn=function(kn){return kn.dx+Le-(Hr+kn.fontSize*nt)*It+Jt*kn.fontSize},Or.yFn=function(kn){return kn.dy+Lr+kn.fontSize*ee},Or.anchorFn=function(kn,mn){return f(mn)&&Math.abs(mn)===90?"middle":Dr?"end":"start"},Or.heightFn=function(kn,mn,Wn){return Pe.side==="right"&&(mn*=-1),mn<-30?-Wn:mn<30?-.5*Wn:0}}return Or};function zt(Pe){return[Pe.text,Pe.x,Pe.axInfo,Pe.font,Pe.fontSize,Pe.fontColor].join("_")}K.drawTicks=function(Pe,Le,ot){ot=ot||{};var ut=Le._id+"tick",pt=[].concat(Le.minor&&Le.minor.ticks?ot.vals.filter(function(xt){return xt.minor&&!xt.noTick}):[]).concat(Le.ticks?ot.vals.filter(function(xt){return!xt.minor&&!xt.noTick}):[]),Pt=ot.layer.selectAll("path."+ut).data(pt,zt);Pt.exit().remove(),Pt.enter().append("path").classed(ut,1).classed("ticks",1).classed("crisp",ot.crisp!==!1).each(function(xt){return r.stroke(x.select(this),xt.minor?Le.minor.tickcolor:Le.tickcolor)}).style("stroke-width",function(xt){return v.crispRound(Pe,xt.minor?Le.minor.tickwidth:Le.tickwidth,1)+"px"}).attr("d",ot.path).style("display",null),Nt(Le,[O]),Pt.attr("transform",ot.transFn)},K.drawGrid=function(Pe,Le,ot){ot=ot||{};var ut=Le._id+"grid",pt=Le.minor&&Le.minor.showgrid,Pt=pt?ot.vals.filter(function(Hr){return Hr.minor}):[],xt=Le.showgrid?ot.vals.filter(function(Hr){return!Hr.minor}):[],Lt=ot.counterAxis;if(Lt&&K.shouldShowZeroLine(Pe,Le,Lt))for(var Zt=Le.tickmode==="array",ur=0;ur<xt.length;ur++){var Pr=xt[ur].x;if(Zt?!Pr:Math.abs(Pr)<Le.dtick/100)if(xt=xt.slice(0,ur).concat(xt.slice(ur+1)),Zt)ur--;else break}Le._gw=v.crispRound(Pe,Le.gridwidth,1);for(var Ar=pt?v.crispRound(Pe,Le.minor.gridwidth,1):0,kr=ot.layer,Zr=ot.minorLayer,lr=1;lr>=0;lr--){var br=lr?kr:Zr;if(!!br){var Or=br.selectAll("path."+ut).data(lr?xt:Pt,zt);Or.exit().remove(),Or.enter().append("path").classed(ut,1).classed("crisp",ot.crisp!==!1),Or.attr("transform",ot.transFn).attr("d",ot.path).each(function(Hr){return r.stroke(x.select(this),Hr.minor?Le.minor.gridcolor:Le.gridcolor||"#ddd")}).style("stroke-dasharray",function(Hr){return v.dashStyle(Hr.minor?Le.minor.griddash:Le.griddash,Hr.minor?Le.minor.gridwidth:Le.gridwidth)}).style("stroke-width",function(Hr){return(Hr.minor?Ar:Le._gw)+"px"}).style("display",null),typeof ot.path=="function"&&Or.attr("d",ot.path)}}Nt(Le,[D,R])},K.drawZeroLine=function(Pe,Le,ot){ot=ot||ot;var ut=Le._id+"zl",pt=K.shouldShowZeroLine(Pe,Le,ot.counterAxis),Pt=ot.layer.selectAll("path."+ut).data(pt?[{x:0,id:Le._id}]:[]);Pt.exit().remove(),Pt.enter().append("path").classed(ut,1).classed("zl",1).classed("crisp",ot.crisp!==!1).each(function(){ot.layer.selectAll("path").sort(function(xt,Lt){return V(xt.id,Lt.id)})}),Pt.attr("transform",ot.transFn).attr("d",ot.path).call(r.stroke,Le.zerolinecolor||r.defaultLine).style("stroke-width",v.crispRound(Pe,Le.zerolinewidth,Le._gw||1)+"px").style("display",null),Nt(Le,[I])},K.drawLabels=function(Pe,Le,ot){ot=ot||{};var ut=Pe._fullLayout,pt=Le._id,Pt=pt.charAt(0),xt=ot.cls||pt+"tick",Lt=ot.vals.filter(function(It){return It.text}),Zt=ot.labelFns,ur=ot.secondary?0:Le.tickangle,Pr=(Le._prevTickAngles||{})[xt],Ar=ot.layer.selectAll("g."+xt).data(Le.showticklabels?Lt:[],zt),kr=[];Ar.enter().append("g").classed(xt,1).append("text").attr("text-anchor","middle").each(function(It){var Jt=x.select(this),fr=Pe._promises.length;Jt.call(i.positionText,Zt.xFn(It),Zt.yFn(It)).call(v.font,It.font,It.fontSize,It.fontColor).text(It.text).call(i.convertToTspans,Pe),Pe._promises[fr]?kr.push(Pe._promises.pop().then(function(){Zr(Jt,ur)})):Zr(Jt,ur)}),Nt(Le,[z]),Ar.exit().remove(),ot.repositionOnUpdate&&Ar.each(function(It){x.select(this).select("text").call(i.positionText,Zt.xFn(It),Zt.yFn(It))});function Zr(It,Jt){It.each(function(fr){var Nr=x.select(this),Vr=Nr.select(".text-math-group"),Dr=Zt.anchorFn(fr,Jt),Er=ot.transFn.call(Nr.node(),fr)+(f(Jt)&&+Jt!=0?" rotate("+Jt+","+Zt.xFn(fr)+","+(Zt.yFn(fr)-fr.fontSize/2)+")":""),jr=i.lineCount(Nr),kn=X*fr.fontSize,mn=Zt.heightFn(fr,f(Jt)?+Jt:0,(jr-1)*kn);if(mn&&(Er+=a(0,mn)),Vr.empty()){var Wn=Nr.select("text");Wn.attr({transform:Er,"text-anchor":Dr}),Wn.style("opacity",1),Le._adjustTickLabelsOverflow&&Le._adjustTickLabelsOverflow()}else{var In=v.bBox(Vr.node()).width,$n=In*{end:-.5,start:.5}[Dr];Vr.attr("transform",Er+a($n,0))}})}Le._adjustTickLabelsOverflow=function(){var It=Le.ticklabeloverflow;if(!(!It||It==="allow")){var Jt=It.indexOf("hide")!==-1,fr=Le._id.charAt(0)==="x",Nr=0,Vr=fr?Pe._fullLayout.width:Pe._fullLayout.height;if(It.indexOf("domain")!==-1){var Dr=e.simpleMap(Le.range,Le.r2l);Nr=Le.l2p(Dr[0])+Le._offset,Vr=Le.l2p(Dr[1])+Le._offset}var Er=Math.min(Nr,Vr),jr=Math.max(Nr,Vr),kn=Le.side,mn=1/0,Wn=-1/0;Ar.each(function(ma){var Ra=x.select(this),_i=Ra.select(".text-math-group");if(_i.empty()){var Ka=v.bBox(Ra.node()),ri=0;fr?(Ka.right>jr||Ka.left<Er)&&(ri=1):(Ka.bottom>jr||Ka.top+(Le.tickangle?0:ma.fontSize/4)<Er)&&(ri=1);var ei=Ra.select("text");ri?Jt&&ei.style("opacity",0):(ei.style("opacity",1),kn==="bottom"||kn==="right"?mn=Math.min(mn,fr?Ka.top:Ka.left):mn=-1/0,kn==="top"||kn==="left"?Wn=Math.max(Wn,fr?Ka.bottom:Ka.right):Wn=1/0)}});for(var In in ut._plots){var $n=ut._plots[In];if(!(Le._id!==$n.xaxis._id&&Le._id!==$n.yaxis._id)){var Kn=fr?$n.yaxis:$n.xaxis;Kn&&(Kn["_visibleLabelMin_"+Le._id]=mn,Kn["_visibleLabelMax_"+Le._id]=Wn)}}}},Le._hideCounterAxisInsideTickLabels=function(It){var Jt=Le._id.charAt(0)==="x",fr=[];for(var Nr in ut._plots){var Vr=ut._plots[Nr];Le._id!==Vr.xaxis._id&&Le._id!==Vr.yaxis._id||fr.push(Jt?Vr.yaxis:Vr.xaxis)}fr.forEach(function(Dr,Er){Dr&&Et(Dr)&&(It||[I,R,D,O,z]).forEach(function(jr){var kn=jr.K==="tick"&&jr.L==="text"&&Le.ticklabelmode==="period",mn=ut._plots[Le._mainSubplot],Wn;jr.K===I.K?Wn=mn.zerolinelayer.selectAll("."+Le._id+"zl"):jr.K===R.K?Wn=mn.minorGridlayer.selectAll("."+Le._id):jr.K===D.K?Wn=mn.gridlayer.selectAll("."+Le._id):Wn=mn[Le._id.charAt(0)+"axislayer"],Wn.each(function(){var In=x.select(this);jr.L&&(In=In.selectAll(jr.L)),In.each(function($n){var Kn=Le.l2p(kn?Mt($n):$n.x)+Le._offset,ma=x.select(this);Kn<Le["_visibleLabelMax_"+Dr._id]&&Kn>Le["_visibleLabelMin_"+Dr._id]?ma.style("display","none"):jr.K==="tick"&&!Er&&ma.style("display",null)})})})})},Zr(Ar,Pr+1?Pr:ur);function lr(){return kr.length&&Promise.all(kr)}var br=null;function Or(){if(Zr(Ar,ur),Lt.length&&Pt==="x"&&!f(ur)&&(Le.type!=="log"||String(Le.dtick).charAt(0)!=="D")){br=0;var It=0,Jt=[],fr;if(Ar.each(function(Ka){It=Math.max(It,Ka.fontSize);var ri=Le.l2p(Ka.x),ei=en(this),Sr=v.bBox(ei.node());Jt.push({top:0,bottom:10,height:10,left:ri-Sr.width/2,right:ri+Sr.width/2+2,width:Sr.width+2})}),(Le.tickson==="boundaries"||Le.showdividers)&&!ot.secondary){var Nr=2;for(Le.ticks&&(Nr+=Le.tickwidth/2),fr=0;fr<Jt.length;fr++){var Vr=Lt[fr].xbnd,Dr=Jt[fr];if(Vr[0]!==null&&Dr.left-Le.l2p(Vr[0])<Nr||Vr[1]!==null&&Le.l2p(Vr[1])-Dr.right<Nr){br=90;break}}}else{var Er=Lt.length,jr=Math.abs((Lt[Er-1].x-Lt[0].x)*Le._m)/(Er-1),kn=Le.ticklabelposition||"",mn=function(Ka){return kn.indexOf(Ka)!==-1},Wn=mn("top"),In=mn("left"),$n=mn("right"),Kn=mn("bottom"),ma=Kn||In||Wn||$n,Ra=ma?(Le.tickwidth||0)+2*fe:0,_i=jr<It*2.5||Le.type==="multicategory"||Le._name==="realaxis";for(fr=0;fr<Jt.length-1;fr++)if(e.bBoxIntersect(Jt[fr],Jt[fr+1],Ra)){br=_i?90:30;break}}br&&Zr(Ar,br)}}Le._selections&&(Le._selections[xt]=Ar);var Hr=[lr];Le.automargin&&ut._redrawFromAutoMarginCount&&Pr===90?(br=90,Hr.push(function(){Zr(Ar,Pr)})):Hr.push(Or),Le._tickAngles&&Hr.push(function(){Le._tickAngles[xt]=br===null?f(ur)?ur:0:br});var Lr=Le._anchorAxis;Lr&&Lr.autorange&&Et(Le)&&!q(ut,Le._id)&&(ut._insideTickLabelsAutorange||(ut._insideTickLabelsAutorange={}),ut._insideTickLabelsAutorange[Lr._name+".autorange"]=Lr.autorange,Hr.push(function(){Ar.each(function(Jt,fr){var Nr=en(this),Vr=Nr.select(".text-math-group");Vr.empty()&&(Le._vals[fr].bb=v.bBox(Nr.node()))})}));var nt=e.syncOrAsync(Hr);return nt&&nt.then&&Pe._promises.push(nt),nt};function Ht(Pe,Le,ot){var ut=Le._id+"divider",pt=ot.vals,Pt=ot.layer.selectAll("path."+ut).data(pt,zt);Pt.exit().remove(),Pt.enter().insert("path",":first-child").classed(ut,1).classed("crisp",1).call(r.stroke,Le.dividercolor).style("stroke-width",v.crispRound(Pe,Le.dividerwidth,1)+"px"),Pt.attr("transform",ot.transFn).attr("d",ot.path)}K.getPxPosition=function(Pe,Le){var ot=Pe._fullLayout._size,ut=Le._id.charAt(0),pt=Le.side,Pt;if(Le.anchor!=="free"?Pt=Le._anchorAxis:ut==="x"?Pt={_offset:ot.t+(1-(Le.position||0))*ot.h,_length:0}:ut==="y"&&(Pt={_offset:ot.l+(Le.position||0)*ot.w,_length:0}),pt==="top"||pt==="left")return Pt._offset;if(pt==="bottom"||pt==="right")return Pt._offset+Pt._length};function Xt(Pe){var Le=Pe.title.font.size,ot=(Pe.title.text.match(i.BR_TAG_ALL)||[]).length;return Pe.title.hasOwnProperty("standoff")?ot?Le*(j+ot*X):Le*j:ot?Le*(ot+1)*X:Le}function Wt(Pe,Le){var ot=Pe._fullLayout,ut=Le._id,pt=ut.charAt(0),Pt=Le.title.font.size,xt;if(Le.title.hasOwnProperty("standoff"))xt=Le._depth+Le.title.standoff+Xt(Le);else{var Lt=Et(Le);if(Le.type==="multicategory")xt=Le._depth;else{var Zt=1.5*Pt;Lt&&(Zt=.5*Pt,Le.ticks==="outside"&&(Zt+=Le.ticklen)),xt=10+Zt+(Le.linewidth?Le.linewidth-1:0)}Lt||(pt==="x"?xt+=Le.side==="top"?Pt*(Le.showticklabels?1:0):Pt*(Le.showticklabels?1.5:.5):xt+=Le.side==="right"?Pt*(Le.showticklabels?1:.5):Pt*(Le.showticklabels?.5:0))}var ur=K.getPxPosition(Pe,Le),Pr,Ar,kr;pt==="x"?(Ar=Le._offset+Le._length/2,kr=Le.side==="top"?ur-xt:ur+xt):(kr=Le._offset+Le._length/2,Ar=Le.side==="right"?ur+xt:ur-xt,Pr={rotate:"-90",offset:0});var Zr;if(Le.type!=="multicategory"){var lr=Le._selections[Le._id+"tick"];if(Zr={selection:lr,side:Le.side},lr&&lr.node()&&lr.node().parentNode){var br=v.getTranslate(lr.node().parentNode);Zr.offsetLeft=br.x,Zr.offsetTop=br.y}Le.title.hasOwnProperty("standoff")&&(Zr.pad=0)}return n.draw(Pe,ut+"title",{propContainer:Le,propName:Le._name+".title.text",placeholder:ot._dfltTitle[pt],avoid:Zr,transform:Pr,attributes:{x:Ar,y:kr,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(Pe,Le,ot){var ut=e.simpleMap(Le.range,Le.r2l);return ut[0]*ut[1]<=0&&Le.zeroline&&(Le.type==="linear"||Le.type==="-")&&!(Le.rangebreaks&&Le.maskBreaks(0)===F)&&(sr(Le,0)||!Gr(Pe,Le,ot,ut)||cn(Pe,Le))},K.clipEnds=function(Pe,Le){return Le.filter(function(ot){return sr(Pe,ot.x)})};function sr(Pe,Le){var ot=Pe.l2p(Le);return ot>1&&ot<Pe._length-1}function Gr(Pe,Le,ot,ut){var pt=ot._mainAxis;if(!pt)return;var Pt=Pe._fullLayout,xt=Le._id.charAt(0),Lt=K.counterLetter(Le._id),Zt=Le._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(xt==="x")?0:Le._length);function ur(lr){if(!lr.showline||!lr.linewidth)return!1;var br=Math.max((lr.linewidth+Le.zerolinewidth)/2,1);function Or(nt){return typeof nt=="number"&&Math.abs(nt-Zt)<br}if(Or(lr._mainLinePosition)||Or(lr._mainMirrorPosition))return!0;var Hr=lr._linepositions||{};for(var Lr in Hr)if(Or(Hr[Lr][0])||Or(Hr[Lr][1]))return!0}var Pr=Pt._plots[ot._mainSubplot];if(!(Pr.mainplotinfo||Pr).overlays.length)return ur(ot);for(var Ar=K.list(Pe,Lt),kr=0;kr<Ar.length;kr++){var Zr=Ar[kr];if(Zr._mainAxis===pt&&ur(Zr))return!0}}function cn(Pe,Le){for(var ot=Pe._fullData,ut=Le._mainSubplot,pt=Le._id.charAt(0),Pt=0;Pt<ot.length;Pt++){var xt=ot[Pt];if(xt.visible===!0&&xt.xaxis+xt.yaxis===ut&&(T.traceIs(xt,"bar-like")&&xt.orientation==={x:"h",y:"v"}[pt]||xt.fill&&xt.fill.charAt(xt.fill.length-1)===pt))return!0}return!1}function en(Pe){var Le=x.select(Pe),ot=Le.select(".text-math-group");return ot.empty()?Le.select("text"):ot}K.allowAutoMargin=function(Pe){for(var Le=K.list(Pe,"",!0),ot=0;ot<Le.length;ot++){var ut=Le[ot];ut.automargin&&(M.allowAutoMargin(Pe,st(ut)),ut.mirror&&M.allowAutoMargin(Pe,rr(ut))),T.getComponentMethod("rangeslider","isVisible")(ut)&&M.allowAutoMargin(Pe,er(ut))}};function st(Pe){return Pe._id+".automargin"}function rr(Pe){return st(Pe)+".mirror"}function er(Pe){return Pe._id+".rangeslider"}K.swap=function(Pe,Le){for(var ot=jt(Pe,Le),ut=0;ut<ot.length;ut++)it(Pe,ot[ut].x,ot[ut].y)};function jt(Pe,Le){var ot=[],ut,pt;for(ut=0;ut<Le.length;ut++){var Pt=[],xt=Pe._fullData[Le[ut]].xaxis,Lt=Pe._fullData[Le[ut]].yaxis;if(!(!xt||!Lt)){for(pt=0;pt<ot.length;pt++)(ot[pt].x.indexOf(xt)!==-1||ot[pt].y.indexOf(Lt)!==-1)&&Pt.push(pt);if(!Pt.length){ot.push({x:[xt],y:[Lt]});continue}var Zt=ot[Pt[0]],ur;if(Pt.length>1)for(pt=1;pt<Pt.length;pt++)ur=ot[Pt[pt]],Mr(Zt.x,ur.x),Mr(Zt.y,ur.y);Mr(Zt.x,[xt]),Mr(Zt.y,[Lt])}}return ot}function Mr(Pe,Le){for(var ot=0;ot<Le.length;ot++)Pe.indexOf(Le[ot])===-1&&Pe.push(Le[ot])}function it(Pe,Le,ot){var ut=[],pt=[],Pt=Pe.layout,xt,Lt;for(xt=0;xt<Le.length;xt++)ut.push(K.getFromId(Pe,Le[xt]));for(xt=0;xt<ot.length;xt++)pt.push(K.getFromId(Pe,ot[xt]));var Zt=Object.keys(s),ur=["anchor","domain","overlaying","position","side","tickangle","editType"],Pr=["linear","log"];for(xt=0;xt<Zt.length;xt++){var Ar=Zt[xt],kr=ut[0][Ar],Zr=pt[0][Ar],lr=!0,br=!1,Or=!1;if(!(Ar.charAt(0)==="_"||typeof kr=="function"||ur.indexOf(Ar)!==-1)){for(Lt=1;Lt<ut.length&&lr;Lt++){var Hr=ut[Lt][Ar];Ar==="type"&&Pr.indexOf(kr)!==-1&&Pr.indexOf(Hr)!==-1&&kr!==Hr?br=!0:Hr!==kr&&(lr=!1)}for(Lt=1;Lt<pt.length&&lr;Lt++){var Lr=pt[Lt][Ar];Ar==="type"&&Pr.indexOf(Zr)!==-1&&Pr.indexOf(Lr)!==-1&&Zr!==Lr?Or=!0:pt[Lt][Ar]!==Zr&&(lr=!1)}lr&&(br&&(Pt[ut[0]._name].type="linear"),Or&&(Pt[pt[0]._name].type="linear"),Qe(Pt,Ar,ut,pt,Pe._fullLayout._dfltTitle))}}for(xt=0;xt<Pe._fullLayout.annotations.length;xt++){var nt=Pe._fullLayout.annotations[xt];Le.indexOf(nt.xref)!==-1&&ot.indexOf(nt.yref)!==-1&&e.swapAttrs(Pt.annotations[xt],["?"])}}function Qe(Pe,Le,ot,ut,pt){var Pt=e.nestedProperty,xt=Pt(Pe[ot[0]._name],Le).get(),Lt=Pt(Pe[ut[0]._name],Le).get(),Zt;for(Le==="title"&&(xt&&xt.text===pt.x&&(xt.text=pt.y),Lt&&Lt.text===pt.y&&(Lt.text=pt.x)),Zt=0;Zt<ot.length;Zt++)Pt(Pe,ot[Zt]._name+"."+Le).set(Lt);for(Zt=0;Zt<ut.length;Zt++)Pt(Pe,ut[Zt]._name+"."+Le).set(xt)}function ft(Pe){return Pe._id==="angularaxis"}function ct(Pe,Le){for(var ot=Le._rangebreaks.length,ut=0;ut<ot;ut++){var pt=Le._rangebreaks[ut];if(Pe>=pt.min&&Pe<pt.max)return pt.max}return Pe}function Et(Pe){return(Pe.ticklabelposition||"").indexOf("inside")!==-1}function Nt(Pe,Le){Et(Pe._anchorAxis||{})&&Pe._hideCounterAxisInsideTickLabels&&Pe._hideCounterAxisInsideTickLabels(Le)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../constants/numerical").BADNUM,T=f.isArrayOrTypedArray,e=f.isDateTime,a=f.cleanNumber,i=Math.round;B.exports=function(d,c,m){var l=d,y=m.noMultiCategory;if(T(l)&&!l.length)return"-";if(!y&&b(l))return"multicategory";if(y&&Array.isArray(l[0])){for(var u=[],A=0;A<l.length;A++)if(T(l[A]))for(var _=0;_<l[A].length;_++)u.push(l[A][_]);l=u}if(v(l,c))return"date";var p=m.autotypenumbers!=="strict";return o(l,p)?"category":r(l,p)?"linear":"-"};function n(g,d){return d?x(g):typeof g=="number"}function r(g,d){for(var c=g.length,m=0;m<c;m++)if(n(g[m],d))return!0;return!1}function v(g,d){for(var c=g.length,m=s(c),l=0,y=0,u={},A=0;A<c;A+=m){var _=i(A),p=g[_],w=String(p);u[w]||(u[w]=1,e(p,d)&&l++,x(p)&&y++)}return l>y*2}function s(g){return Math.max(1,(g-1)/1e3)}function o(g,d){for(var c=g.length,m=s(c),l=0,y=0,u={},A=0;A<c;A+=m){var _=i(A),p=g[_],w=String(p);if(!u[w]){u[w]=1;var h=typeof p;h==="boolean"?y++:(d?a(p)!==M:h==="number")?l++:h==="string"&&y++}}return y>l*2}function b(g){return T(g[0])&&T(g[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../registry"),M=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("../array_container_defaults"),a=t("./layout_attributes"),i=t("./tick_value_defaults"),n=t("./tick_mark_defaults"),r=t("./tick_label_defaults"),v=t("./prefix_suffix_defaults"),s=t("./category_order_defaults"),o=t("./line_grid_defaults"),b=t("./set_convert"),g=t("./constants").WEEKDAY_PATTERN,d=t("./constants").HOUR_PATTERN;B.exports=function(u,A,_,p,w){var h=p.letter,L=p.font||{},E=p.splomStash||{},S=_("visible",!p.visibleDflt),P=A._template||{},F=A.type||P.type||"-",I;if(F==="date"){var D=f.getComponentMethod("calendars","handleDefaults");D(u,A,"calendar",p.calendar),p.noTicklabelmode||(I=_("ticklabelmode"))}var R="";(!p.noTicklabelposition||F==="multicategory")&&(R=M.coerce(u,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:h==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),p.noTicklabeloverflow||_("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),b(A,w);var O=!A.isValidRange(u.range);O&&p.reverseDflt&&(O="reversed");var z=_("autorange",O);z&&(F==="linear"||F==="-")&&_("rangemode"),_("range"),A.cleanRange(),s(u,A,_,p),F!=="category"&&!p.noHover&&_("hoverformat");var H=_("color"),Y=H!==a.color.dflt?H:L.color,ee=E.label||w._dfltTitle[h];if(v(u,A,_,F,p),!S)return A;_("title.text",ee),M.coerceFont(_,"title.font",{family:L.family,size:M.bigFont(L.size),color:Y}),i(u,A,_,F);var j=p.hasMinor;if(j&&(T.newContainer(A,"minor"),i(u,A,_,F,{isMinor:!0})),r(u,A,_,F,p),n(u,A,_,p),j){var X=p.isMinor;p.isMinor=!0,n(u,A,_,p),p.isMinor=X}o(u,A,_,{dfltColor:H,bgColor:p.bgColor,showGrid:p.showGrid,hasMinor:j,attributes:a}),j&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&_("mirror"),p.automargin&&_("automargin");var ae=F==="multicategory";if(!p.noTickson&&(F==="category"||ae)&&(A.ticks||A.showgrid)){var fe;ae&&(fe="boundaries");var K=_("tickson",fe);K==="boundaries"&&delete A.ticklabelposition}if(ae){var J=_("showdividers");J&&(_("dividercolor"),_("dividerwidth"))}if(F==="date")if(e(u,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),!A.rangebreaks.length)delete A.rangebreaks;else{for(var U=0;U<A.rangebreaks.length;U++)if(A.rangebreaks[U].pattern===g){A._hasDayOfWeekBreaks=!0;break}if(b(A,w),w._has("scattergl")||w._has("splom"))for(var V=0;V<p.data.length;V++){var q=p.data[V];(q.type==="scattergl"||q.type==="splom")&&(q.visible=!1,M.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}return A};function c(y,u,A){function _(I,D){return M.coerce(y,u,a.rangebreaks,I,D)}var p=_("enabled");if(p){var w=_("bounds");if(w&&w.length>=2){var h="",L,E;if(w.length===2){for(L=0;L<2;L++)if(E=l(w[L]),E){h=g;break}}var S=_("pattern",h);if(S===g)for(L=0;L<2;L++)E=l(w[L]),E&&(u.bounds[L]=w[L]=E-1);if(S)for(L=0;L<2;L++)switch(E=w[L],S){case g:if(!x(E)){u.enabled=!1;return}if(E=+E,E!==Math.floor(E)||E<0||E>=7){u.enabled=!1;return}u.bounds[L]=w[L]=E;break;case d:if(!x(E)){u.enabled=!1;return}if(E=+E,E<0||E>24){u.enabled=!1;return}u.bounds[L]=w[L]=E;break}if(A.autorange===!1){var P=A.range;if(P[0]<P[1]){if(w[0]<P[0]&&w[1]>P[1]){u.enabled=!1;return}}else if(w[0]>P[0]&&w[1]<P[1]){u.enabled=!1;return}}}else{var F=_("values");if(F&&F.length)_("dvalue");else{u.enabled=!1;return}}}}var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(y){if(typeof y=="string")return m[y.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(t,B,G){var x=t("../../constants/docs"),f=x.FORMAT_LINK,M=x.DATE_FORMAT_LINK;function T(i,n){return{valType:"string",dflt:"",editType:"none",description:(n?e:a)("hover text",i)+["By default the values are formatted using "+(n?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function e(i,n){return["Sets the "+i+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+f+"."].join(" ")}function a(i,n){return e(i,n)+[" And for dates see: "+M+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}B.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(t,B,G){var x=t("../../registry"),f=t("./constants");G.id2name=function(e){if(!(typeof e!="string"||!e.match(f.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},G.name2id=function(e){if(!!e.match(f.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},G.cleanId=function(e,a,i){var n=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(f.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(n&&!i)){var r=e.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),e.charAt(0)+r+(n&&i?" domain":"")}},G.list=function(T,e,a){var i=T._fullLayout;if(!i)return[];var n=G.listIds(T,e),r=new Array(n.length),v;for(v=0;v<n.length;v++){var s=n[v];r[v]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var o=i._subplots.gl3d||[];for(v=0;v<o.length;v++){var b=i[o[v]];e?r.push(b[e+"axis"]):r.push(b.xaxis,b.yaxis,b.zaxis)}}return r},G.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var i=a._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},G.getFromId=function(T,e,a){var i=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),i[G.id2name(e)]},G.getFromTrace=function(T,e,a){var i=T._fullLayout,n=null;if(x.traceIs(e,"gl3d")){var r=e.scene;r.substr(0,5)==="scene"&&(n=i[r][a+"axis"])}else n=G.getFromId(T,e[a+"axis"]||a);return n},G.idSort=function(T,e){var a=T.charAt(0),i=e.charAt(0);return a!==i?a>i?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},G.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function M(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}G.isLinked=function(T,e){return M(e,T._axisMatchGroups)||M(e,T._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(t,B,G){function x(f,M){var T=M.dataAttr||f._id.charAt(0),e={},a,i,n;if(M.axData)a=M.axData;else for(a=[],i=0;i<M.data.length;i++){var r=M.data[i];r[T+"axis"]===f._id&&a.push(r)}for(i=0;i<a.length;i++){var v=a[i][T];for(n=0;n<v.length;n++){var s=v[n];s!=null&&(e[s]=1)}}return Object.keys(e)}B.exports=function(M,T,e,a){if(T.type==="category"){var i=M.categoryarray,n=Array.isArray(i)&&i.length>0,r;n&&(r="array");var v=e("categoryorder",r),s;v==="array"&&(s=e("categoryarray")),!n&&v==="array"&&(v=T.categoryorder="trace"),v==="trace"?T._initialCategories=[]:v==="array"?T._initialCategories=s.slice():(s=x(T,a).sort(),v==="category ascending"?T._initialCategories=s:v==="category descending"&&(T._initialCategories=s.reverse()))}}},{}],572:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../constants/numerical"),T=M.ONEDAY,e=M.ONEWEEK;G.dtick=function(a,i){var n=i==="log",r=i==="date",v=i==="category",s=r?T:1;if(!a)return s;if(x(a))return a=Number(a),a<=0?s:v?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if(typeof a!="string"||!(r||n))return s;var o=a.charAt(0),b=a.substr(1);return b=x(b)?Number(b):0,b<=0||!(r&&o==="M"&&b===Math.round(b)||n&&o==="L"||n&&o==="D"&&(b===1||b===2))?s:a},G.tick0=function(a,i,n,r){if(i==="date")return f.cleanDate(a,f.dateTick0(n,r%e===0?1:0));if(!(r==="D1"||r==="D2"))return x(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(t,B,G){var x=t("../../lib/regex").counter;B.exports={idRegex:{x:x("x","( domain)?"),y:x("y","( domain)?")},attrRegex:x("[xy]axis"),xAxisMatch:x("xaxis"),yAxisMatch:x("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(t,B,G){var x=t("../../lib"),f=t("./autorange"),M=t("./axis_ids").id2name,T=t("./layout_attributes"),e=t("./scale_zoom"),a=t("./set_convert"),i=t("../../constants/numerical").ALMOST_EQUAL,n=t("../../constants/alignment").FROM_BL;G.handleDefaults=function(c,m,l){var y=l.axIds,u=l.axHasImage,A=m._axisConstraintGroups=[],_=m._axisMatchGroups=[],p,w,h,L,E,S,P,F;for(p=0;p<y.length;p++)L=M(y[p]),E=c[L],S=m[L],r(E,S,{axIds:y,layoutOut:m,hasImage:u[L]});function I(X,ae){for(p=0;p<X.length;p++){w=X[p];for(h in w)m[M(h)][ae]=w}}for(I(_,"_matchGroup"),p=0;p<A.length;p++){w=A[p];for(h in w)if(S=m[M(h)],S.fixedrange){for(var D in w){var R=M(D);(c[R]||{}).fixedrange===!1&&x.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),m[R].fixedrange=!0}break}}for(p=0;p<A.length;){w=A[p];for(h in w){S=m[M(h)],S._matchGroup&&Object.keys(S._matchGroup).length===Object.keys(w).length&&(A.splice(p,1),p--);break}p++}I(A,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,H=!1;function Y(){F=S[P],P==="rangebreaks"&&(H=S._hasDayOfWeekBreaks)}for(p=0;p<_.length;p++){w=_[p];for(var ee=0;ee<O.length;ee++){P=O[ee],F=null;var j;for(h in w)if(L=M(h),E=c[L],S=m[L],P in S){if(!S.matches&&(j=S,P in E)){Y();break}F===null&&P in E&&Y()}if(P==="range"&&F&&(z=!0),P==="autorange"&&F===null&&z&&(F=!1),F===null&&P in j&&(F=j[P]),F!==null)for(h in w)S=m[M(h)],S[P]=P==="range"?F.slice():F,P==="rangebreaks"&&(S._hasDayOfWeekBreaks=H,a(S,m))}}};function r(c,m,l){var y=l.axIds,u=l.layoutOut,A=l.hasImage,_=u._axisConstraintGroups,p=u._axisMatchGroups,w=m._id,h=w.charAt(0),L=((u._splomAxes||{})[h]||{})[w]||{},E=m._id,S=E.charAt(0)==="x";m._matchGroup=null,m._constraintGroup=null;function P(J,U){return x.coerce(c,m,T,J,U)}P("constrain",A?"domain":"range"),x.coerce(c,m,{constraintoward:{valType:"enumerated",values:S?["left","center","right"]:["bottom","middle","top"],dflt:S?"center":"middle"}},"constraintoward");var F=m.type,I,D,R=[];for(I=0;I<y.length;I++)if(D=y[I],D!==E){var O=u[M(D)];O.type===F&&R.push(D)}var z=s(_,E);if(z){var H=[];for(I=0;I<R.length;I++)D=R[I],z[D]||H.push(D);R=H}var Y=R.length,ee,j;Y&&(c.matches||L.matches)&&(ee=x.coerce(c,m,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var X=A&&!S?m.anchor:void 0;if(Y&&!ee&&(c.scaleanchor||X)&&(j=x.coerce(c,m,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",X)),ee){m._matchGroup=o(p,E,ee,1);var ae=u[M(ee)],fe=v(u,m)/v(u,ae);S!==(ee.charAt(0)==="x")&&(fe=(S?"x":"y")+fe),o(_,E,ee,fe)}else c.matches&&y.indexOf(c.matches)!==-1&&x.warn("ignored "+m._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(j){var K=P("scaleratio");K||(K=m.scaleratio=1),o(_,E,j,K)}else c.scaleanchor&&y.indexOf(c.scaleanchor)!==-1&&x.warn("ignored "+m._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function v(c,m){var l=m.domain;return l||(l=c[M(m.overlaying)].domain),l[1]-l[0]}function s(c,m){for(var l=0;l<c.length;l++)if(c[l][m])return c[l];return null}function o(c,m,l,y){var u,A,_,p,w,h=s(c,m);h===null?(h={},h[m]=1,w=c.length,c.push(h)):w=c.indexOf(h);var L=Object.keys(h);for(u=0;u<c.length;u++)if(_=c[u],u!==w&&_[l]){var E=_[l];for(A=0;A<L.length;A++)p=L[A],_[p]=b(E,b(y,h[p]));c.splice(w,1);return}if(y!==1)for(A=0;A<L.length;A++){var S=L[A];h[S]=b(y,h[S])}h[l]=1}function b(c,m){var l="",y="",u,A;typeof c=="string"&&(l=c.match(/^[xy]*/)[0],u=l.length,c=+c.substr(u)),typeof m=="string"&&(y=m.match(/^[xy]*/)[0],A=y.length,m=+m.substr(A));var _=c*m;return!u&&!A?_:!u||!A||l.charAt(0)===y.charAt(0)?l+y+c*m:u===A?_:(u>A?l.substr(A):y.substr(u))+_}function g(c,m){for(var l=m._size,y=l.h/l.w,u={},A=Object.keys(c),_=0;_<A.length;_++){var p=A[_],w=c[p];if(typeof w=="string"){var h=w.match(/^[xy]*/)[0],L=h.length;w=+w.substr(L);for(var E=h.charAt(0)==="y"?y:1/y,S=0;S<L;S++)w*=E}u[p]=w}return u}G.enforce=function(m){var l=m._fullLayout,y=l._axisConstraintGroups||[],u,A,_,p,w,h,L,E;for(u=0;u<y.length;u++){_=g(y[u],l);var S=Object.keys(_),P=1/0,F=0,I=1/0,D={},R={},O=!1;for(A=0;A<S.length;A++)p=S[A],R[p]=w=l[M(p)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),D[p]=h=Math.abs(w._m)/_[p],P=Math.min(P,h),(w.constrain==="domain"||!w._constraintShrinkable)&&(I=Math.min(I,h)),delete w._constraintShrinkable,F=Math.max(F,h),w.constrain==="domain"&&(O=!0);if(!(P>i*F&&!O)){for(A=0;A<S.length;A++)if(p=S[A],h=D[p],w=R[p],L=w.constrain,h!==I||L==="domain")if(E=h/I,L==="range")e(w,E);else{var z=w._inputDomain,H=(w.domain[1]-w.domain[0])/(z[1]-z[0]),Y=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if(E/=H,E*Y<1){w.domain=w._input.domain=z.slice(),e(w,E);continue}if(Y<1&&(w.range=w._input.range=w._inputRange.slice(),E*=Y),w.autorange){var ee=w.r2l(w.range[0]),j=w.r2l(w.range[1]),X=(ee+j)/2,ae=X,fe=X,K=Math.abs(j-X),J=X-K*E*1.0001,U=X+K*E*1.0001,V=f.makePadFn(l,w,0),q=f.makePadFn(l,w,1);d(w,E);var re=Math.abs(w._m),Z=f.concatExtremes(m,w),Q=Z.min,ie=Z.max,oe,ne;for(ne=0;ne<Q.length;ne++)oe=Q[ne].val-V(Q[ne])/re,oe>J&&oe<ae&&(ae=oe);for(ne=0;ne<ie.length;ne++)oe=ie[ne].val+q(ie[ne])/re,oe<U&&oe>fe&&(fe=oe);var se=(fe-ae)/(2*K);E/=se,ae=w.l2r(ae),fe=w.l2r(fe),w.range=w._input.range=ee<j?[ae,fe]:[fe,ae]}d(w,E)}}}},G.getAxisGroup=function(m,l){for(var y=m._axisMatchGroups,u=0;u<y.length;u++){var A=y[u];if(A[l])return"g"+u}return l},G.clean=function(m,l){if(l._inputDomain){for(var y=!1,u=l._id,A=m._fullLayout._axisConstraintGroups,_=0;_<A.length;_++)if(A[_][u]){y=!0;break}(!y||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function d(c,m){var l=c._inputDomain,y=n[c.constraintoward],u=l[0]+(l[1]-l[0])*y;c.domain=c._input.domain=[u+(l[0]-u)/m,u+(l[1]-u)/m],c.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=f.numberFormat,T=t("tinycolor2"),e=t("has-passive-events"),a=t("../../registry"),i=f.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("./axes"),b=t("../../lib/setcursor"),g=t("../../components/dragelement"),d=t("../../components/dragelement/helpers"),c=d.selectingOrDrawing,m=d.freeMode,l=t("../../constants/alignment").FROM_TL,y=t("../../lib/clear_gl_canvases"),u=t("../../plot_api/subroutines").redrawReglTraces,A=t("../plots"),_=t("./axis_ids").getFromId,p=t("../../components/selections").prepSelect,w=t("../../components/selections").clearOutline,h=t("../../components/selections").selectOnClick,L=t("./scale_zoom"),E=t("./constants"),S=E.MINDRAG,P=E.MINZOOM,F=!0;function I(oe,ne,se,_e,ue,ge,xe,ye){var be=oe._fullLayout._zoomlayer,Se=xe+ye==="nsew",Re=(xe+ye).length===1,Ve,Ae,Ce,Ze,Ye,ze,Ie,Ge,dt,Rt,Qt,Bt,Ct,Kt,Ot,St,Xe,at,We,Ee,He,Ke,et;function At(){if(Ve=ne.xaxis,Ae=ne.yaxis,dt=Ve._length,Rt=Ae._length,Ie=Ve._offset,Ge=Ae._offset,Ce={},Ce[Ve._id]=Ve,Ze={},Ze[Ae._id]=Ae,xe&&ye)for(var Ar=ne.overlays,kr=0;kr<Ar.length;kr++){var Zr=Ar[kr].xaxis;Ce[Zr._id]=Zr;var lr=Ar[kr].yaxis;Ze[lr._id]=lr}Ye=ie(Ce),ze=ie(Ze),Ct=O(Ye,ye),Kt=O(ze,xe),Ot=!Kt&&!Ct,Bt=Z(oe,oe._fullLayout._axisMatchGroups,Ce,Ze),Qt=Z(oe,oe._fullLayout._axisConstraintGroups,Ce,Ze,Bt);var br=Qt.isSubplotConstrained||Bt.isSubplotConstrained;St=ye||br,Xe=xe||br;var Or=oe._fullLayout;at=Or._has("scattergl"),We=Or._has("splom"),Ee=Or._has("svg")}At();var mt=j(Kt+Ct,oe._fullLayout.dragmode,Se),Mt=R(ne,xe+ye+"drag",mt,se,_e,ue,ge);if(Ot&&!Se)return Mt.onmousedown=null,Mt.style.pointerEvents="none",Mt;var Gt={element:Mt,gd:oe,plotinfo:ne};Gt.prepFn=function(Ar,kr,Zr){var lr=Gt.dragmode,br=oe._fullLayout.dragmode;br!==lr&&(Gt.dragmode=br),At(),Ke=oe._fullLayout._invScaleX,et=oe._fullLayout._invScaleY,Ot||(Se?Ar.shiftKey?br==="pan"?br="zoom":c(br)||(br="pan"):Ar.ctrlKey&&(br="pan"):br="pan"),m(br)?Gt.minDrag=1:Gt.minDrag=void 0,c(br)?(Gt.xaxes=Ye,Gt.yaxes=ze,p(Ar,kr,Zr,Gt,br)):(Gt.clickFn=Ht,c(lr)&&zt(),Ot||(br==="zoom"?(Gt.moveFn=it,Gt.doneFn=ft,Gt.minDrag=1,Mr(Ar,kr,Zr)):br==="pan"&&(Gt.moveFn=ot,Gt.doneFn=xt))),oe._fullLayout._redrag=function(){var Or=oe._dragdata;if(Or&&Or.element===Mt){var Hr=oe._fullLayout.dragmode;c(Hr)||(At(),Lt([0,0,dt,Rt]),Gt.moveFn(Or.dx,Or.dy))}}};function zt(){Gt.plotinfo.selection=!1,w(oe)}function Ht(Ar,kr){var Zr=Gt.gd;if(Zr._fullLayout._activeShapeIndex>=0){Zr._fullLayout._deactivateShape(Zr);return}var lr=Zr._fullLayout.clickmode;if(J(Zr),Ar===2&&!Re&&Pt(),Se)lr.indexOf("select")>-1&&h(kr,Zr,Ye,ze,ne.id,Gt),lr.indexOf("event")>-1&&s.click(Zr,kr,ne.id);else if(Ar===1&&Re){var br=xe?Ae:Ve,Or=xe==="s"||ye==="w"?0:1,Hr=br._name+".range["+Or+"]",Lr=z(br,Or),nt="left",It="middle";if(br.fixedrange)return;xe?(It=xe==="n"?"top":"bottom",br.side==="right"&&(nt="right")):ye==="e"&&(nt="right"),Zr._context.showAxisRangeEntryBoxes&&x.select(Mt).call(n.makeEditable,{gd:Zr,immediate:!0,background:Zr._fullLayout.paper_bgcolor,text:String(Lr),fill:br.tickfont?br.tickfont.color:"#444",horizontalAlign:nt,verticalAlign:It}).on("edit",function(Jt){var fr=br.d2r(Jt);fr!==void 0&&a.call("_guiRelayout",Zr,Hr,fr)})}}g.init(Gt);var Xt,Wt,sr,Gr,cn,en,st,rr,er,jt;function Mr(Ar,kr,Zr){var lr=Mt.getBoundingClientRect();Xt=kr-lr.left,Wt=Zr-lr.top,oe._fullLayout._calcInverseTransform(oe);var br=f.apply3DTransform(oe._fullLayout._invTransform)(Xt,Wt);Xt=br[0],Wt=br[1],sr={l:Xt,r:Xt,w:0,t:Wt,b:Wt,h:0},Gr=oe._hmpixcount?oe._hmlumcount/oe._hmpixcount:T(oe._fullLayout.plot_bgcolor).getLuminance(),cn="M0,0H"+dt+"V"+Rt+"H0V0",en=!1,st="xy",jt=!1,rr=X(be,Gr,Ie,Ge,cn),er=ae(be,Ie,Ge)}function it(Ar,kr){if(oe._transitioningWithDuration)return!1;var Zr=Math.max(0,Math.min(dt,Ke*Ar+Xt)),lr=Math.max(0,Math.min(Rt,et*kr+Wt)),br=Math.abs(Zr-Xt),Or=Math.abs(lr-Wt);sr.l=Math.min(Xt,Zr),sr.r=Math.max(Xt,Zr),sr.t=Math.min(Wt,lr),sr.b=Math.max(Wt,lr);function Hr(){st="",sr.r=sr.l,sr.t=sr.b,er.attr("d","M0,0Z")}if(Qt.isSubplotConstrained)br>P||Or>P?(st="xy",br/dt>Or/Rt?(Or=br*Rt/dt,Wt>lr?sr.t=Wt-Or:sr.b=Wt+Or):(br=Or*dt/Rt,Xt>Zr?sr.l=Xt-br:sr.r=Xt+br),er.attr("d",re(sr))):Hr();else if(Bt.isSubplotConstrained)if(br>P||Or>P){st="xy";var Lr=Math.min(sr.l/dt,(Rt-sr.b)/Rt),nt=Math.max(sr.r/dt,(Rt-sr.t)/Rt);sr.l=Lr*dt,sr.r=nt*dt,sr.b=(1-Lr)*Rt,sr.t=(1-nt)*Rt,er.attr("d",re(sr))}else Hr();else!Kt||Or<Math.min(Math.max(br*.6,S),P)?br<S||!Ct?Hr():(sr.t=0,sr.b=Rt,st="x",er.attr("d",V(sr,Wt))):!Ct||br<Math.min(Or*.6,P)?(sr.l=0,sr.r=dt,st="y",er.attr("d",q(sr,Xt))):(st="xy",er.attr("d",re(sr)));sr.w=sr.r-sr.l,sr.h=sr.b-sr.t,st&&(jt=!0),oe._dragged=jt,fe(rr,er,sr,cn,en,Gr),Qe(),oe.emit("plotly_relayouting",He),en=!0}function Qe(){He={},(st==="xy"||st==="x")&&(H(Ye,sr.l/dt,sr.r/dt,He,Qt.xaxes),ut("x",He)),(st==="xy"||st==="y")&&(H(ze,(Rt-sr.b)/Rt,(Rt-sr.t)/Rt,He,Qt.yaxes),ut("y",He))}function ft(){Qe(),J(oe),xt(),U(oe)}var ct=[0,0,dt,Rt],Et=null,Nt=E.REDRAWDELAY,Pe=ne.mainplot?oe._fullLayout._plots[ne.mainplot]:ne;function Le(Ar){if(!oe._context._scrollZoom.cartesian&&!oe._fullLayout._enablescrollzoom)return;if(zt(),oe._transitioningWithDuration){Ar.preventDefault(),Ar.stopPropagation();return}At(),clearTimeout(Et);var kr=-Ar.deltaY;if(isFinite(kr)||(kr=Ar.wheelDelta/10),!isFinite(kr)){f.log("Did not find wheel motion attributes: ",Ar);return}var Zr=Math.exp(-Math.min(Math.max(kr,-20),20)/200),lr=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),br=(Ar.clientX-lr.left)/lr.width,Or=(lr.bottom-Ar.clientY)/lr.height,Hr;function Lr(nt,It,Jt){if(nt.fixedrange)return;var fr=f.simpleMap(nt.range,nt.r2l),Nr=fr[0]+(fr[1]-fr[0])*It;function Vr(Dr){return nt.l2r(Nr+(Dr-Nr)*Jt)}nt.range=fr.map(Vr)}if(St){for(ye||(br=.5),Hr=0;Hr<Ye.length;Hr++)Lr(Ye[Hr],br,Zr);ut("x"),ct[2]*=Zr,ct[0]+=ct[2]*br*(1/Zr-1)}if(Xe){for(xe||(Or=.5),Hr=0;Hr<ze.length;Hr++)Lr(ze[Hr],Or,Zr);ut("y"),ct[3]*=Zr,ct[1]+=ct[3]*(1-Or)*(1/Zr-1)}Lt(ct),pt(),oe.emit("plotly_relayouting",He),Et=setTimeout(function(){!oe._fullLayout||(ct=[0,0,dt,Rt],xt())},Nt),Ar.preventDefault()}xe.length*ye.length!==1&&Q(Mt,Le);function ot(Ar,kr){if(Ar=Ar*Ke,kr=kr*et,oe._transitioningWithDuration)return;if(oe._fullLayout._replotting=!0,Ct==="ew"||Kt==="ns"){var Zr=Ct?-Ar:0,lr=Kt?-kr:0;if(Bt.isSubplotConstrained){if(Ct&&Kt){var br=(Ar/dt-kr/Rt)/2;Ar=br*dt,kr=-br*Rt,Zr=-Ar,lr=-kr}Kt?Zr=-lr*dt/Rt:lr=-Zr*Rt/dt}Ct&&(Y(Ye,Ar),ut("x")),Kt&&(Y(ze,kr),ut("y")),Lt([Zr,lr,dt,Rt]),pt(),oe.emit("plotly_relayouting",He);return}function Or(Vr,Dr,Er){for(var jr=1-Dr,kn,mn,Wn=0;Wn<Vr.length;Wn++){var In=Vr[Wn];if(!In.fixedrange){kn=In,mn=In._rl[jr]+(In._rl[Dr]-In._rl[jr])/ee(Er/In._length);var $n=In.l2r(mn);$n!==!1&&$n!==void 0&&(In.range[Dr]=$n)}}return kn._length*(kn._rl[Dr]-mn)/(kn._rl[Dr]-kn._rl[jr])}var Hr=Ct==="w"==(Kt==="n")?1:-1;if(Ct&&Kt&&(Qt.isSubplotConstrained||Bt.isSubplotConstrained)){var Lr=(Ar/dt+Hr*kr/Rt)/2;Ar=Lr*dt,kr=Hr*Lr*Rt}var nt,It;if(Ct==="w"?Ar=Or(Ye,0,Ar):Ct==="e"?Ar=Or(Ye,1,-Ar):Ct||(Ar=0),Kt==="n"?kr=Or(ze,1,kr):Kt==="s"?kr=Or(ze,0,-kr):Kt||(kr=0),nt=Ct==="w"?Ar:0,It=Kt==="n"?kr:0,Qt.isSubplotConstrained&&!Bt.isSubplotConstrained||Bt.isSubplotConstrained&&Ct&&Kt&&Hr>0){var Jt;if(Bt.isSubplotConstrained||!Ct&&Kt.length===1){for(Jt=0;Jt<Ye.length;Jt++)Ye[Jt].range=Ye[Jt]._r.slice(),L(Ye[Jt],1-kr/Rt);Ar=kr*dt/Rt,nt=Ar/2}if(Bt.isSubplotConstrained||!Kt&&Ct.length===1){for(Jt=0;Jt<ze.length;Jt++)ze[Jt].range=ze[Jt]._r.slice(),L(ze[Jt],1-Ar/dt);kr=Ar*Rt/dt,It=kr/2}}(!Bt.isSubplotConstrained||!Kt)&&ut("x"),(!Bt.isSubplotConstrained||!Ct)&&ut("y");var fr=dt-Ar,Nr=Rt-kr;Bt.isSubplotConstrained&&!(Ct&&Kt)&&(Ct?(It=nt?0:Ar*Rt/dt,Nr=fr*Rt/dt):(nt=It?0:kr*dt/Rt,fr=Nr*dt/Rt)),Lt([nt,It,fr,Nr]),pt(),oe.emit("plotly_relayouting",He)}function ut(Ar,kr){for(var Zr=Bt.isSubplotConstrained?{x:ze,y:Ye}[Ar]:Bt[Ar+"axes"],lr=Bt.isSubplotConstrained?{x:Ye,y:ze}[Ar]:[],br=0;br<Zr.length;br++){var Or=Zr[br],Hr=Or._id,Lr=Bt.xLinks[Hr]||Bt.yLinks[Hr],nt=lr[0]||Ce[Lr]||Ze[Lr];nt&&(kr?(kr[Or._name+".range[0]"]=kr[nt._name+".range[0]"],kr[Or._name+".range[1]"]=kr[nt._name+".range[1]"]):Or.range=nt.range.slice())}}function pt(){var Ar=[],kr;function Zr(Or){for(kr=0;kr<Or.length;kr++)Or[kr].fixedrange||Ar.push(Or[kr]._id)}for(St&&(Zr(Ye),Zr(Qt.xaxes),Zr(Bt.xaxes)),Xe&&(Zr(ze),Zr(Qt.yaxes),Zr(Bt.yaxes)),He={},kr=0;kr<Ar.length;kr++){var lr=Ar[kr],br=_(oe,lr);o.drawOne(oe,br,{skipTitle:!0}),He[br._name+".range[0]"]=br.range[0],He[br._name+".range[1]"]=br.range[1]}o.redrawComponents(oe,Ar)}function Pt(){if(!oe._transitioningWithDuration){var Ar=oe._context.doubleClick,kr=[];Ct&&(kr=kr.concat(Ye)),Kt&&(kr=kr.concat(ze)),Bt.xaxes&&(kr=kr.concat(Bt.xaxes)),Bt.yaxes&&(kr=kr.concat(Bt.yaxes));var Zr={},lr,br,Or;if(Ar==="reset+autosize"){for(Ar="autosize",br=0;br<kr.length;br++)if(lr=kr[br],lr._rangeInitial&&(lr.range[0]!==lr._rangeInitial[0]||lr.range[1]!==lr._rangeInitial[1])||!lr._rangeInitial&&!lr.autorange){Ar="reset";break}}if(Ar==="autosize")for(br=0;br<kr.length;br++)lr=kr[br],lr.fixedrange||(Zr[lr._name+".autorange"]=!0);else if(Ar==="reset")for((Ct||Qt.isSubplotConstrained)&&(kr=kr.concat(Qt.xaxes)),Kt&&!Qt.isSubplotConstrained&&(kr=kr.concat(Qt.yaxes)),Qt.isSubplotConstrained&&(Ct?Kt||(kr=kr.concat(ze)):kr=kr.concat(Ye)),br=0;br<kr.length;br++)lr=kr[br],lr.fixedrange||(lr._rangeInitial?(Or=lr._rangeInitial,Zr[lr._name+".range[0]"]=Or[0],Zr[lr._name+".range[1]"]=Or[1]):Zr[lr._name+".autorange"]=!0);oe.emit("plotly_doubleclick",null),a.call("_guiRelayout",oe,Zr)}}function xt(){Lt([0,0,dt,Rt]),f.syncOrAsync([A.previousPromises,function(){oe._fullLayout._replotting=!1,a.call("_guiRelayout",oe,He)}],oe)}function Lt(Ar){var kr=oe._fullLayout,Zr=kr._plots,lr=kr._subplots.cartesian,br,Or,Hr,Lr;if(We&&a.subplotsRegistry.splom.drag(oe),at){for(br=0;br<lr.length;br++)if(Or=Zr[lr[br]],Hr=Or.xaxis,Lr=Or.yaxis,Or._scene){var nt=f.simpleMap(Hr.range,Hr.r2l),It=f.simpleMap(Lr.range,Lr.r2l);Or._scene.update({range:[nt[0],It[0],nt[1],It[1]]})}}if((We||at)&&(y(oe),u(oe)),Ee){var Jt=Ar[2]/Ve._length,fr=Ar[3]/Ae._length;for(br=0;br<lr.length;br++){Or=Zr[lr[br]],Hr=Or.xaxis,Lr=Or.yaxis;var Nr=(St||Bt.isSubplotConstrained)&&!Hr.fixedrange&&Ce[Hr._id],Vr=(Xe||Bt.isSubplotConstrained)&&!Lr.fixedrange&&Ze[Lr._id],Dr,Er,jr,kn;if(Nr?(Dr=Jt,jr=ye||Bt.isSubplotConstrained?Ar[0]:Pr(Hr,Dr)):Bt.xaHash[Hr._id]?(Dr=Jt,jr=Ar[0]*Hr._length/Ve._length):Bt.yaHash[Hr._id]?(Dr=fr,jr=Kt==="ns"?-Ar[1]*Hr._length/Ae._length:Pr(Hr,Dr,{n:"top",s:"bottom"}[Kt])):(Dr=Zt(Hr,Jt,fr),jr=ur(Hr,Dr)),Vr?(Er=fr,kn=xe||Bt.isSubplotConstrained?Ar[1]:Pr(Lr,Er)):Bt.yaHash[Lr._id]?(Er=fr,kn=Ar[1]*Lr._length/Ae._length):Bt.xaHash[Lr._id]?(Er=Jt,kn=Ct==="ew"?-Ar[0]*Lr._length/Ve._length:Pr(Lr,Er,{e:"right",w:"left"}[Ct])):(Er=Zt(Lr,Jt,fr),kn=ur(Lr,Er)),!(!Dr&&!Er)){Dr||(Dr=1),Er||(Er=1);var mn=Hr._offset-jr/Dr,Wn=Lr._offset-kn/Er;Or.clipRect.call(v.setTranslate,jr,kn).call(v.setScale,Dr,Er),Or.plot.call(v.setTranslate,mn,Wn).call(v.setScale,1/Dr,1/Er),(Dr!==Or.xScaleFactor||Er!==Or.yScaleFactor)&&(v.setPointGroupScale(Or.zoomScalePts,Dr,Er),v.setTextPointsScale(Or.zoomScaleTxt,Dr,Er)),v.hideOutsideRangePoints(Or.clipOnAxisFalseTraces,Or),Or.xScaleFactor=Dr,Or.yScaleFactor=Er}}}}function Zt(Ar,kr,Zr){return Ar.fixedrange?0:St&&Qt.xaHash[Ar._id]?kr:Xe&&(Qt.isSubplotConstrained?Qt.xaHash:Qt.yaHash)[Ar._id]?Zr:0}function ur(Ar,kr){return kr?(Ar.range=Ar._r.slice(),L(Ar,kr),Pr(Ar,kr)):0}function Pr(Ar,kr,Zr){return Ar._length*(1-kr)*l[Zr||Ar.constraintoward||"middle"]}return Mt}function D(oe,ne,se,_e){var ue=f.ensureSingle(oe.draglayer,ne,se,function(ge){ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",oe.id)});return ue.call(b,_e),ue.node()}function R(oe,ne,se,_e,ue,ge,xe){var ye=D(oe,"rect",ne,se);return x.select(ye).call(v.setRect,_e,ue,ge,xe),ye}function O(oe,ne){for(var se=0;se<oe.length;se++)if(!oe[se].fixedrange)return ne;return""}function z(oe,ne){var se=oe.range[ne],_e=Math.abs(se-oe.range[1-ne]),ue;return oe.type==="date"?se:oe.type==="log"?(ue=Math.ceil(Math.max(0,-Math.log(_e)/Math.LN10))+3,M("."+ue+"g")(Math.pow(10,se))):(ue=Math.floor(Math.log(Math.abs(se))/Math.LN10)-Math.floor(Math.log(_e)/Math.LN10)+4,M("."+String(ue)+"g")(se))}function H(oe,ne,se,_e,ue){for(var ge=0;ge<oe.length;ge++){var xe=oe[ge];if(!xe.fixedrange)if(xe.rangebreaks){var ye=xe._id.charAt(0)==="y",be=ye?1-ne:ne,Se=ye?1-se:se;_e[xe._name+".range[0]"]=xe.l2r(xe.p2l(be*xe._length)),_e[xe._name+".range[1]"]=xe.l2r(xe.p2l(Se*xe._length))}else{var Re=xe._rl[0],Ve=xe._rl[1]-Re;_e[xe._name+".range[0]"]=xe.l2r(Re+Ve*ne),_e[xe._name+".range[1]"]=xe.l2r(Re+Ve*se)}}if(ue&&ue.length){var Ae=(ne+(1-se))/2;H(ue,Ae,1-Ae,_e,[])}}function Y(oe,ne){for(var se=0;se<oe.length;se++){var _e=oe[se];if(!_e.fixedrange)if(_e.rangebreaks){var ue=0,ge=_e._length,xe=_e.p2l(ue+ne)-_e.p2l(ue),ye=_e.p2l(ge+ne)-_e.p2l(ge),be=(xe+ye)/2;_e.range=[_e.l2r(_e._rl[0]-be),_e.l2r(_e._rl[1]-be)]}else _e.range=[_e.l2r(_e._rl[0]-ne/_e._m),_e.l2r(_e._rl[1]-ne/_e._m)]}}function ee(oe){return 1-(oe>=0?Math.min(oe,.9):1/(1/Math.max(oe,-.3)+3.222))}function j(oe,ne,se){return oe?oe==="nsew"?se?"":ne==="pan"?"move":"crosshair":oe.toLowerCase()+"-resize":"pointer"}function X(oe,ne,se,_e,ue){return oe.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(se,_e)).attr("d",ue+"Z")}function ae(oe,ne,se){return oe.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ne,se)).attr("d","M0,0Z")}function fe(oe,ne,se,_e,ue,ge){oe.attr("d",_e+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),K(oe,ne,ue,ge)}function K(oe,ne,se,_e){se||(oe.transition().style("fill",_e>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function J(oe){x.select(oe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(oe){F&&oe.data&&oe._context.showTips&&(f.notifier(f._(oe,"Double-click to zoom back out"),"long"),F=!1)}function V(oe,ne){return"M"+(oe.l-.5)+","+(ne-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(oe.r+.5)+","+(ne-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function q(oe,ne){return"M"+(ne-P-.5)+","+(oe.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ne-P-.5)+","+(oe.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function re(oe){var ne=Math.floor(Math.min(oe.b-oe.t,oe.r-oe.l,P)/2);return"M"+(oe.l-3.5)+","+(oe.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(oe.r+3.5)+","+(oe.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(oe.r+3.5)+","+(oe.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(oe.l-3.5)+","+(oe.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function Z(oe,ne,se,_e,ue){for(var ge=!1,xe={},ye={},be,Se,Re,Ve,Ae=(ue||{}).xaHash,Ce=(ue||{}).yaHash,Ze=0;Ze<ne.length;Ze++){var Ye=ne[Ze];for(be in se)if(Ye[be]){for(Re in Ye)!(ue&&(Ae[Re]||Ce[Re]))&&!(Re.charAt(0)==="x"?se:_e)[Re]&&(xe[Re]=be);for(Se in _e)!(ue&&(Ae[Se]||Ce[Se]))&&Ye[Se]&&(ge=!0)}for(Se in _e)if(Ye[Se])for(Ve in Ye)!(ue&&(Ae[Ve]||Ce[Ve]))&&!(Ve.charAt(0)==="x"?se:_e)[Ve]&&(ye[Ve]=Se)}ge&&(f.extendFlat(xe,ye),ye={});var ze={},Ie=[];for(Re in xe){var Ge=_(oe,Re);Ie.push(Ge),ze[Ge._id]=Ge}var dt={},Rt=[];for(Ve in ye){var Qt=_(oe,Ve);Rt.push(Qt),dt[Qt._id]=Qt}return{xaHash:ze,yaHash:dt,xaxes:Ie,yaxes:Rt,xLinks:xe,yLinks:ye,isSubplotConstrained:ge}}function Q(oe,ne){if(!e)oe.onwheel!==void 0?oe.onwheel=ne:oe.onmousewheel!==void 0?oe.onmousewheel=ne:oe.isAddedWheelEvent||(oe.isAddedWheelEvent=!0,oe.addEventListener("wheel",ne,{passive:!1}));else{var se=oe.onwheel!==void 0?"wheel":"mousewheel";oe._onwheel&&oe.removeEventListener(se,oe._onwheel),oe._onwheel=ne,oe.addEventListener(se,ne,{passive:!1})}}function ie(oe){var ne=[];for(var se in oe)ne.push(oe[se]);return ne}B.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:X,makeCorners:ae,updateZoombox:fe,xyCorners:re,transitionZoombox:K,removeZoombox:J,showDoubleClickNotifier:U,attachWheelEventHandler:Q}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/fx"),M=t("../../components/dragelement"),T=t("../../lib/setcursor"),e=t("./dragbox").makeDragBox,a=t("./constants").DRAGGERSIZE;G.initInteractions=function(n){var r=n._fullLayout;if(n._context.staticPlot){x.select(n).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var v=Object.keys(r._plots||{}).sort(function(o,b){if((r._plots[o].mainplot&&!0)===(r._plots[b].mainplot&&!0)){var g=o.split("y"),d=b.split("y");return g[0]===d[0]?Number(g[1]||1)-Number(d[1]||1):Number(g[0]||1)-Number(d[0]||1)}return r._plots[o].mainplot?1:-1});v.forEach(function(o){var b=r._plots[o],g=b.xaxis,d=b.yaxis;if(!b.mainplot){var c=e(n,b,g._offset,d._offset,g._length,d._length,"ns","ew");c.onmousemove=function(y){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===o&&n._fullLayout._plots[o]&&f.hover(n,y,o)},f.hover(n,y,o),n._fullLayout._lasthover=c,n._fullLayout._hoversubplot=o},c.onmouseout=function(y){n._dragging||(n._fullLayout._hoversubplot=null,M.unhover(n,y))},n._context.showAxisDragHandles&&(e(n,b,g._offset-a,d._offset-a,a,a,"n","w"),e(n,b,g._offset+g._length,d._offset-a,a,a,"n","e"),e(n,b,g._offset-a,d._offset+d._length,a,a,"s","w"),e(n,b,g._offset+g._length,d._offset+d._length,a,a,"s","e"))}if(n._context.showAxisDragHandles){if(o===g._mainSubplot){var m=g._mainLinePosition;g.side==="top"&&(m-=a),e(n,b,g._offset+g._length*.1,m,g._length*.8,a,"","ew"),e(n,b,g._offset,m,g._length*.1,a,"","w"),e(n,b,g._offset+g._length*.9,m,g._length*.1,a,"","e")}if(o===d._mainSubplot){var l=d._mainLinePosition;d.side!=="right"&&(l-=a),e(n,b,l,d._offset+d._length*.1,a,d._length*.8,"ns",""),e(n,b,l,d._offset+d._length*.9,a,d._length*.1,"s",""),e(n,b,l,d._offset,a,d._length*.1,"n","")}}});var s=r._hoverlayer.node();s.onmousemove=function(o){o.target=n._fullLayout._lasthover,f.hover(n,o,r._hoversubplot)},s.onclick=function(o){o.target=n._fullLayout._lasthover,f.click(n,o)},s.onmousedown=function(o){n._fullLayout._lasthover.onmousedown(o)},G.updateFx(n)}},G.updateFx=function(i){var n=i._fullLayout,r=n.dragmode==="pan"?"move":"crosshair";T(n._draggers,r)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("./axis_ids");B.exports=function(e){return function(i,n){var r=i[e];if(!!Array.isArray(r))for(var v=x.subplotsRegistry.cartesian,s=v.idRegex,o=n._subplots,b=o.xaxis,g=o.yaxis,d=o.cartesian,c=n._has("cartesian")||n._has("gl2d"),m=0;m<r.length;m++){var l=r[m];if(!!f.isPlainObject(l)){var y=M.cleanId(l.xref,"x",!1),u=M.cleanId(l.yref,"y",!1),A=s.x.test(y),_=s.y.test(u);if(A||_){c||f.pushUnique(n._basePlotModules,v);var p=!1;A&&b.indexOf(y)===-1&&(b.push(y),p=!0),_&&g.indexOf(u)===-1&&(g.push(u),p=!0),p&&A&&_&&d.push(y+u)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../lib"),T=t("../plots"),e=t("../../components/drawing"),a=t("../get_data").getModuleCalcData,i=t("./axis_ids"),n=t("./constants"),r=t("../../constants/xmlns_namespaces"),v=M.ensureSingle;function s(m,l,y){return M.ensureSingle(m,l,y,function(u){u.datum(y)})}G.name="cartesian",G.attr=["xaxis","yaxis"],G.idRoot=["x","y"],G.idRegex=n.idRegex,G.attrRegex=n.attrRegex,G.attributes=t("./attributes"),G.layoutAttributes=t("./layout_attributes"),G.supplyLayoutDefaults=t("./layout_defaults"),G.transitionAxes=t("./transition_axes"),G.finalizeSubplots=function(m,l){var y=l._subplots,u=y.xaxis,A=y.yaxis,_=y.cartesian,p=_.concat(y.gl2d||[]),w={},h={},L,E,S;for(L=0;L<p.length;L++){var P=p[L].split("y");w[P[0]]=1,h["y"+P[1]]=1}for(L=0;L<u.length;L++)E=u[L],w[E]||(S=(m[i.id2name(E)]||{}).anchor,n.idRegex.y.test(S)||(S="y"),_.push(E+S),p.push(E+S),h[S]||(h[S]=1,M.pushUnique(A,S)));for(L=0;L<A.length;L++)S=A[L],h[S]||(E=(m[i.id2name(S)]||{}).anchor,n.idRegex.x.test(E)||(E="x"),_.push(E+S),p.push(E+S),w[E]||(w[E]=1,M.pushUnique(u,E)));if(!p.length){E="",S="";for(var F in m)if(n.attrRegex.test(F)){var I=F.charAt(0);I==="x"?(!E||+F.substr(5)<+E.substr(5))&&(E=F):(!S||+F.substr(5)<+S.substr(5))&&(S=F)}E=E?i.name2id(E):"x",S=S?i.name2id(S):"y",u.push(E),A.push(S),_.push(E+S)}},G.plot=function(m,l,y,u){var A=m._fullLayout,_=A._subplots.cartesian,p=m.calcdata,w;if(!Array.isArray(l))for(l=[],w=0;w<p.length;w++)l.push(w);for(w=0;w<_.length;w++){for(var h=_[w],L=A._plots[h],E=[],S,P=0;P<p.length;P++){var F=p[P],I=F[0].trace;I.xaxis+I.yaxis===h&&((l.indexOf(I.index)!==-1||I.carpet)&&(S&&S[0].trace.xaxis+S[0].trace.yaxis===h&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&E.indexOf(S)===-1&&E.push(S),E.push(F)),S=F)}o(m,L,E,y,u)}};function o(m,l,y,u,A){for(var _=n.traceLayerClasses,p=m._fullLayout,w=p._modules,h,L,E,S=[],P=[],F=0;F<w.length;F++){h=w[F];var I=h.name,D=f.modules[I].categories;if(D.svg){var R=h.layerName||I+"layer",O=h.plot;L=a(y,O),E=L[0],y=L[1],E.length&&S.push({i:_.indexOf(R),className:R,plotMethod:O,cdModule:E}),D.zoomScale&&P.push("."+R)}}S.sort(function(Y,ee){return Y.i-ee.i});var z=l.plot.selectAll("g.mlayer").data(S,function(Y){return Y.className});if(z.enter().append("g").attr("class",function(Y){return Y.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),z.exit().remove(),z.order(),z.each(function(Y){var ee=x.select(this),j=Y.className;Y.plotMethod(m,l,Y.cdModule,ee,u,A),n.clipOnAxisFalseQuery.indexOf("."+j)===-1&&e.setClipUrl(ee,l.layerClipId,m)}),p._has("scattergl")&&(h=f.getModule("scattergl"),E=a(y,h)[0],h.plot(m,l,E)),!m._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var H=l.plot.selectAll(P.join(",")).selectAll(".trace");l.zoomScalePts=H.selectAll("path.point"),l.zoomScaleTxt=H.selectAll(".textpoint")}}G.clean=function(m,l,y,u){var A=u._plots||{},_=l._plots||{},p=u._subplots||{},w,h,L;if(u._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(L in A)w=A[L],w.plotgroup&&w.plotgroup.remove();var E=u._has&&u._has("gl"),S=l._has&&l._has("gl");if(E&&!S)for(L in A)w=A[L],w._scene&&w._scene.destroy();if(p.xaxis&&p.yaxis){var P=i.listIds({_fullLayout:u});for(h=0;h<P.length;h++){var F=P[h];l[i.id2name(F)]||u._infolayer.selectAll(".g-"+F+"title").remove()}}var I=u._has&&u._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)d(u._cartesianlayer.selectAll(".subplot"),u),u._defs.selectAll(".axesclip").remove(),delete u._axisConstraintGroups,delete u._axisMatchGroups;else if(p.cartesian)for(h=0;h<p.cartesian.length;h++){var R=p.cartesian[h];if(!_[R]){var O="."+R+",."+R+"-x,."+R+"-y";u._cartesianlayer.selectAll(O).remove(),c(R,u)}}},G.drawFramework=function(m){var l=m._fullLayout,y=b(m),u=l._cartesianlayer.selectAll(".subplot").data(y,String);u.enter().append("g").attr("class",function(A){return"subplot "+A[0]}),u.order(),u.exit().call(d,l),u.each(function(A){var _=A[0],p=l._plots[_];p.plotgroup=x.select(this),g(m,p),p.draglayer=v(l._draggers,"g",_)})},G.rangePlot=function(m,l,y){g(m,l),o(m,l,y),T.style(m)};function b(m){var l=m._fullLayout,y=l._subplots.cartesian,u=y.length,A,_,p,w,h,L,E=[],S=[];for(A=0;A<u;A++){p=y[A],w=l._plots[p],h=w.xaxis,L=w.yaxis;var P=h._mainAxis,F=L._mainAxis,I=P._id+F._id,D=l._plots[I];w.overlays=[],I!==p&&D?(w.mainplot=I,w.mainplotinfo=D,S.push(p)):(w.mainplot=void 0,w.mainplotinfo=void 0,E.push(p))}for(A=0;A<S.length;A++)p=S[A],w=l._plots[p],w.mainplotinfo.overlays.push(w);var R=E.concat(S),O=new Array(u);for(A=0;A<u;A++){p=R[A],w=l._plots[p],h=w.xaxis,L=w.yaxis;var z=[p,h.layer,L.layer,h.overlaying||"",L.overlaying||""];for(_=0;_<w.overlays.length;_++)z.push(w.overlays[_].id);O[A]=z}return O}function g(m,l){var y=l.plotgroup,u=l.id,A=n.layerValue2layerClass[l.xaxis.layer],_=n.layerValue2layerClass[l.yaxis.layer],p=m._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var h=l.mainplotinfo,L=h.plotgroup,E=u+"-x",S=u+"-y";l.minorGridlayer=h.minorGridlayer,l.gridlayer=h.gridlayer,l.zerolinelayer=h.zerolinelayer,v(h.overlinesBelow,"path",E),v(h.overlinesBelow,"path",S),v(h.overaxesBelow,"g",E),v(h.overaxesBelow,"g",S),l.plot=v(h.overplot,"g",u),v(h.overlinesAbove,"path",E),v(h.overlinesAbove,"path",S),v(h.overaxesAbove,"g",E),v(h.overaxesAbove,"g",S),l.xlines=L.select(".overlines-"+A).select("."+E),l.ylines=L.select(".overlines-"+_).select("."+S),l.xaxislayer=L.select(".overaxes-"+A).select("."+E),l.yaxislayer=L.select(".overaxes-"+_).select("."+S)}else if(p)l.xlines=v(y,"path","xlines-above"),l.ylines=v(y,"path","ylines-above"),l.xaxislayer=v(y,"g","xaxislayer-above"),l.yaxislayer=v(y,"g","yaxislayer-above");else{var w=v(y,"g","layer-subplot");l.shapelayer=v(w,"g","shapelayer"),l.imagelayer=v(w,"g","imagelayer"),l.minorGridlayer=v(y,"g","minor-gridlayer"),l.gridlayer=v(y,"g","gridlayer"),l.zerolinelayer=v(y,"g","zerolinelayer"),v(y,"path","xlines-below"),v(y,"path","ylines-below"),l.overlinesBelow=v(y,"g","overlines-below"),v(y,"g","xaxislayer-below"),v(y,"g","yaxislayer-below"),l.overaxesBelow=v(y,"g","overaxes-below"),l.plot=v(y,"g","plot"),l.overplot=v(y,"g","overplot"),l.xlines=v(y,"path","xlines-above"),l.ylines=v(y,"path","ylines-above"),l.overlinesAbove=v(y,"g","overlines-above"),v(y,"g","xaxislayer-above"),v(y,"g","yaxislayer-above"),l.overaxesAbove=v(y,"g","overaxes-above"),l.xlines=y.select(".xlines-"+A),l.ylines=y.select(".ylines-"+_),l.xaxislayer=y.select(".xaxislayer-"+A),l.yaxislayer=y.select(".yaxislayer-"+_)}p||(s(l.minorGridlayer,"g",l.xaxis._id),s(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort),s(l.gridlayer,"g",l.xaxis._id),s(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function d(m,l){if(!!m){var y={};m.each(function(h){var L=h[0],E=x.select(this);E.remove(),c(L,l),y[L]=!0});for(var u in l._plots)for(var A=l._plots[u],_=A.overlays||[],p=0;p<_.length;p++){var w=_[p];y[w.id]&&w.plot.selectAll(".trace").remove()}}}function c(m,l){l._draggers.selectAll("g."+m).remove(),l._defs.select("#clip"+l._uid+m+"plot").remove()}G.toSVG=function(m){var l=m._fullLayout._glimages,y=x.select(m).selectAll(".svg-container"),u=y.filter(function(_,p){return p===y.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function A(){var _=this,p=_.toDataURL("image/png"),w=l.append("svg:image");w.attr({xmlns:r.svg,"xlink:href":p,preserveAspectRatio:"none",x:0,y:0,width:_.style.width,height:_.style.height})}u.each(A)},G.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(t,B,G){var x=t("../font_attributes"),f=t("../../components/color/attributes"),M=t("../../components/drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray,a=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=t("../../constants/numerical").ONEDAY,n=t("./constants"),r=n.HOUR_PATTERN,v=n.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(w){return{valType:"integer",min:0,dflt:w?5:0,editType:"ticks"}}var b={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"data_array",editType:"ticks"},c={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=5),h}function l(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=1),h}var y={valType:"color",dflt:f.defaultLine,editType:"ticks"},u={valType:"color",dflt:f.lightLine,editType:"ticks"};function A(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=1),h}var _=T({},M,{editType:"ticks"}),p={valType:"boolean",editType:"ticks"};B.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:f.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:x({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:s,nticks:o(),tick0:b,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:d,ticktext:{valType:"data_array",editType:"ticks"},ticks:c,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:l(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},M,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:x({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:f.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:p,gridcolor:u,gridwidth:A(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:f.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:f.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:o("minor"),tick0:b,dtick:g,tickvals:d,ticks:c,ticklen:m("minor"),tickwidth:l("minor"),tickcolor:y,gridcolor:u,gridwidth:A("minor"),griddash:_,showgrid:p,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:x({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../../components/fx/helpers").isUnifiedHover,T=t("../../components/fx/hovermode_defaults"),e=t("../../plot_api/plot_template"),a=t("../layout_attributes"),i=t("./layout_attributes"),n=t("./type_defaults"),r=t("./axis_defaults"),v=t("./constraints"),s=t("./position_defaults"),o=t("./axis_ids"),b=o.id2name,g=o.name2id,d=t("./constants").AX_ID_PATTERN,c=t("../../registry"),m=c.traceIs,l=c.getComponentMethod;function y(u,A,_){Array.isArray(u[A])?u[A].push(_):u[A]=[_]}B.exports=function(A,_,p){var w=_.autotypenumbers,h={},L={},E={},S={},P={},F={},I={},D={},R={},O={},z,H;for(z=0;z<p.length;z++){var Y=p[z];if(!(!m(Y,"cartesian")&&!m(Y,"gl2d"))){var ee;if(Y.xaxis)ee=b(Y.xaxis),y(h,ee,Y);else if(Y.xaxes)for(H=0;H<Y.xaxes.length;H++)y(h,b(Y.xaxes[H]),Y);var j;if(Y.yaxis)j=b(Y.yaxis),y(h,j,Y);else if(Y.yaxes)for(H=0;H<Y.yaxes.length;H++)y(h,b(Y.yaxes[H]),Y);if(Y.type==="funnel"?Y.orientation==="h"?(ee&&(L[ee]=!0),j&&(I[j]=!0)):j&&(E[j]=!0):Y.type==="image"?(j&&(D[j]=!0),ee&&(D[ee]=!0)):(j&&(P[j]=!0,F[j]=!0),(!m(Y,"carpet")||Y.type==="carpet"&&!Y._cheater)&&ee&&(S[ee]=!0)),Y.type==="carpet"&&Y._cheater&&ee&&(L[ee]=!0),m(Y,"2dMap")&&(R[ee]=!0,R[j]=!0),m(Y,"oriented")){var X=Y.orientation==="h"?j:ee;O[X]=!0}}}var ae=_._subplots,fe=ae.xaxis,K=ae.yaxis,J=x.simpleMap(fe,b),U=x.simpleMap(K,b),V=J.concat(U),q=f.background;fe.length&&K.length&&(q=x.coerce(A,_,a,"plot_bgcolor"));var re=f.combine(q,_.paper_bgcolor),Z,Q,ie,oe,ne;function se(){var We=h[Z]||[];ne._traceIndices=We.map(function(Ee){return Ee._expandedIndex}),ne._annIndices=[],ne._shapeIndices=[],ne._selectionIndices=[],ne._imgIndices=[],ne._subplotsWith=[],ne._counterAxes=[],ne._name=ne._attr=Z,ne._id=Q}function _e(We,Ee){return x.coerce(oe,ne,i,We,Ee)}function ue(We,Ee){return x.coerce2(oe,ne,i,We,Ee)}function ge(We){return We==="x"?K:fe}function xe(We,Ee){for(var He=We==="x"?J:U,Ke=[],et=0;et<He.length;et++){var At=He[et];At!==Ee&&!(A[At]||{}).overlaying&&Ke.push(g(At))}return Ke}var ye={x:ge("x"),y:ge("y")},be=ye.x.concat(ye.y),Se={},Re=[];function Ve(){var We=oe.matches;d.test(We)&&be.indexOf(We)===-1&&(Se[We]=oe.type,Re=Object.keys(Se))}var Ae=T(A,_),Ce=M(Ae);for(z=0;z<V.length;z++){Z=V[z],Q=g(Z),ie=Z.charAt(0),x.isPlainObject(A[Z])||(A[Z]={}),oe=A[Z],ne=e.newContainer(_,Z,ie+"axis"),se();var Ze=ie==="x"&&!S[Z]&&L[Z]||ie==="y"&&!P[Z]&&E[Z],Ye=ie==="y"&&(!F[Z]&&I[Z]||D[Z]),ze={hasMinor:!0,letter:ie,font:_.font,outerTicks:R[Z],showGrid:!O[Z],data:h[Z]||[],bgColor:re,calendar:_.calendar,automargin:!0,visibleDflt:Ze,reverseDflt:Ye,autotypenumbersDflt:w,splomStash:((_._splomAxes||{})[ie]||{})[Q]};_e("uirevision",_.uirevision),n(oe,ne,_e,ze),r(oe,ne,_e,ze,_);var Ie=Ce&&ie===Ae.charAt(0),Ge=ue("spikecolor",Ce?ne.color:void 0),dt=ue("spikethickness",Ce?1.5:void 0),Rt=ue("spikedash",Ce?"dot":void 0),Qt=ue("spikemode",Ce?"across":void 0),Bt=ue("spikesnap"),Ct=_e("showspikes",!!Ie||!!Ge||!!dt||!!Rt||!!Qt||!!Bt);Ct||(delete ne.spikecolor,delete ne.spikethickness,delete ne.spikedash,delete ne.spikemode,delete ne.spikesnap),s(oe,ne,_e,{letter:ie,counterAxes:ye[ie],overlayableAxes:xe(ie,Z),grid:_.grid}),_e("title.standoff"),Ve(),ne._input=oe}for(z=0;z<Re.length;){Q=Re[z++],Z=b(Q),ie=Z.charAt(0),x.isPlainObject(A[Z])||(A[Z]={}),oe=A[Z],ne=e.newContainer(_,Z,ie+"axis"),se();var Kt={letter:ie,font:_.font,outerTicks:R[Z],showGrid:!O[Z],data:[],bgColor:re,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:w,splomStash:((_._splomAxes||{})[ie]||{})[Q]};_e("uirevision",_.uirevision),ne.type=Se[Q]||"linear",r(oe,ne,_e,Kt,_),s(oe,ne,_e,{letter:ie,counterAxes:ye[ie],overlayableAxes:xe(ie,Z),grid:_.grid}),_e("fixedrange"),Ve(),ne._input=oe}var Ot=l("rangeslider","handleDefaults"),St=l("rangeselector","handleDefaults");for(z=0;z<J.length;z++)Z=J[z],oe=A[Z],ne=_[Z],Ot(A,_,Z),ne.type==="date"&&St(oe,ne,_,U,ne.calendar),_e("fixedrange");for(z=0;z<U.length;z++){Z=U[z],oe=A[Z],ne=_[Z];var Xe=_[b(ne.anchor)],at=l("rangeslider","isVisible")(Xe);_e("fixedrange",at)}v.handleDefaults(A,_,{axIds:be.concat(Re).sort(o.idSort),axHasImage:D})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(t,B,G){var x=t("tinycolor2").mix,f=t("../../components/color/attributes"),M=t("../../lib");B.exports=function(e,a,i,n){n=n||{};var r=n.dfltColor;function v(E,S){return M.coerce2(e,a,n.attributes,E,S)}var s=v("linecolor",r),o=v("linewidth"),b=i("showline",n.showLine||!!s||!!o);b||(delete a.linecolor,delete a.linewidth);var g=x(r,n.bgColor,n.blend||f.lightFraction).toRgbString(),d=v("gridcolor",g),c=v("gridwidth"),m=v("griddash"),l=i("showgrid",n.showGrid||!!d||!!c||!!m);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),n.hasMinor){var y=x(a.gridcolor,n.bgColor,67).toRgbString(),u=v("minor.gridcolor",y),A=v("minor.gridwidth",a.gridwidth||1),_=v("minor.griddash",a.griddash||"solid"),p=i("minor.showgrid",!!u||!!A||!!_);p||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!n.noZeroLine){var w=v("zerolinecolor",r),h=v("zerolinewidth"),L=i("zeroline",n.showGrid||!!w||!!h);L||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib");B.exports=function(T,e,a,i){var n=i.counterAxes||[],r=i.overlayableAxes||[],v=i.letter,s=i.grid,o,b,g,d;s&&(b=s._domains[v][s._axisMap[e._id]],o=s._anchors[e._id],b&&(g=s[v+"side"].split(" ")[0],d=s.domain[v][g==="right"||g==="top"?1:0])),b=b||[0,1],o=o||(x(T.position)?"free":n[0]||"free"),g=g||(v==="x"?"bottom":"left"),d=d||0;var c=f.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:o}},"anchor");c==="free"&&a("position",d),f.coerce(T,e,{side:{valType:"enumerated",values:v==="x"?["bottom","top"]:["left","right"],dflt:g}},"side");var m=!1;if(r.length&&(m=f.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!m){var l=a("domain",b);l[0]>l[1]-1/4096&&(e.domain=b),f.noneOrAll(T.domain,e.domain,b)}return a("layer"),e}},{"../../lib":515,"fast-isnumeric":190}],583:[function(t,B,G){var x=t("./show_dflt");B.exports=function(M,T,e,a,i){i||(i={});var n=i.tickSuffixDflt,r=x(M),v=e("tickprefix");v&&e("showtickprefix",r);var s=e("ticksuffix",n);s&&e("showticksuffix",r)}},{"./show_dflt":586}],584:[function(t,B,G){var x=t("../../constants/alignment").FROM_BL;B.exports=function(M,T,e){e===void 0&&(e=x[M.constraintoward||"center"]);var a=[M.r2l(M.range[0]),M.r2l(M.range[1])],i=a[0]+(a[1]-a[0])*e;M.range=M._input.range=[M.l2r(i+(a[0]-i)*T),M.l2r(i+(a[1]-i)*T)],M.setScale()}},{"../../constants/alignment":483}],585:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-time-format").utcFormat,M=t("../../lib"),T=M.numberFormat,e=t("fast-isnumeric"),a=M.cleanNumber,i=M.ms2DateTime,n=M.dateTime2ms,r=M.ensureNumber,v=M.isArrayOrTypedArray,s=t("../../constants/numerical"),o=s.FP_SAFE,b=s.BADNUM,g=s.LOG_CLIP,d=s.ONEWEEK,c=s.ONEDAY,m=s.ONEHOUR,l=s.ONEMIN,y=s.ONESEC,u=t("./axis_ids"),A=t("./constants"),_=A.HOUR_PATTERN,p=A.WEEKDAY_PATTERN;function w(L){return Math.pow(10,L)}function h(L){return L!=null}B.exports=function(E,S){S=S||{};var P=E._id||"x",F=P.charAt(0);function I(V,q){if(V>0)return Math.log(V)/Math.LN10;if(V<=0&&q&&E.range&&E.range.length===2){var re=E.range[0],Z=E.range[1];return .5*(re+Z-2*g*Math.abs(re-Z))}else return b}function D(V,q,re,Z){if((Z||{}).msUTC&&e(V))return+V;var Q=n(V,re||E.calendar);if(Q===b)if(e(V)){V=+V;var ie=Math.floor(M.mod(V+.05,1)*10),oe=Math.round(V-ie/10);Q=n(new Date(oe))+ie/10}else return b;return Q}function R(V,q,re){return i(V,q,re||E.calendar)}function O(V){return E._categories[Math.round(V)]}function z(V){if(h(V)){if(E._categoriesMap===void 0&&(E._categoriesMap={}),E._categoriesMap[V]!==void 0)return E._categoriesMap[V];E._categories.push(typeof V=="number"?String(V):V);var q=E._categories.length-1;return E._categoriesMap[V]=q,q}return b}function H(V,q){for(var re=new Array(q),Z=0;Z<q;Z++){var Q=(V[0]||[])[Z],ie=(V[1]||[])[Z];re[Z]=Y([Q,ie])}return re}function Y(V){if(E._categoriesMap)return E._categoriesMap[V]}function ee(V){var q=Y(V);if(q!==void 0)return q;if(e(V))return+V}function j(V){return e(V)?+V:Y(V)}function X(V,q,re){return x.round(re+q*V,2)}function ae(V,q,re){return(V-re)/q}var fe=function(q){return e(q)?X(q,E._m,E._b):b},K=function(V){return ae(V,E._m,E._b)};if(E.rangebreaks){var J=F==="y";fe=function(V){if(!e(V))return b;var q=E._rangebreaks.length;if(!q)return X(V,E._m,E._b);var re=J;E.range[0]>E.range[1]&&(re=!re);for(var Z=re?-1:1,Q=Z*V,ie=0,oe=0;oe<q;oe++){var ne=Z*E._rangebreaks[oe].min,se=Z*E._rangebreaks[oe].max;if(Q<ne)break;if(Q>se)ie=oe+1;else{ie=Q<(ne+se)/2?oe:oe+1;break}}var _e=E._B[ie]||0;return isFinite(_e)?X(V,E._m2,_e):0},K=function(V){var q=E._rangebreaks.length;if(!q)return ae(V,E._m,E._b);for(var re=0,Z=0;Z<q&&!(V<E._rangebreaks[Z].pmin);Z++)V>E._rangebreaks[Z].pmax&&(re=Z+1);return ae(V,E._m2,E._B[re])}}E.c2l=E.type==="log"?I:r,E.l2c=E.type==="log"?w:r,E.l2p=fe,E.p2l=K,E.c2p=E.type==="log"?function(V,q){return fe(I(V,q))}:fe,E.p2c=E.type==="log"?function(V){return w(K(V))}:K,["linear","-"].indexOf(E.type)!==-1?(E.d2r=E.r2d=E.d2c=E.r2c=E.d2l=E.r2l=a,E.c2d=E.c2r=E.l2d=E.l2r=r,E.d2p=E.r2p=function(V){return E.l2p(a(V))},E.p2d=E.p2r=K,E.cleanPos=r):E.type==="log"?(E.d2r=E.d2l=function(V,q){return I(a(V),q)},E.r2d=E.r2c=function(V){return w(a(V))},E.d2c=E.r2l=a,E.c2d=E.l2r=r,E.c2r=I,E.l2d=w,E.d2p=function(V,q){return E.l2p(E.d2r(V,q))},E.p2d=function(V){return w(K(V))},E.r2p=function(V){return E.l2p(a(V))},E.p2r=K,E.cleanPos=r):E.type==="date"?(E.d2r=E.r2d=M.identity,E.d2c=E.r2c=E.d2l=E.r2l=D,E.c2d=E.c2r=E.l2d=E.l2r=R,E.d2p=E.r2p=function(V,q,re){return E.l2p(D(V,0,re))},E.p2d=E.p2r=function(V,q,re){return R(K(V),q,re)},E.cleanPos=function(V){return M.cleanDate(V,b,E.calendar)}):E.type==="category"?(E.d2c=E.d2l=z,E.r2d=E.c2d=E.l2d=O,E.d2r=E.d2l_noadd=ee,E.r2c=function(V){var q=j(V);return q!==void 0?q:E.fraction2r(.5)},E.l2r=E.c2r=r,E.r2l=j,E.d2p=function(V){return E.l2p(E.r2c(V))},E.p2d=function(V){return O(K(V))},E.r2p=E.d2p,E.p2r=K,E.cleanPos=function(V){return typeof V=="string"&&V!==""?V:r(V)}):E.type==="multicategory"&&(E.r2d=E.c2d=E.l2d=O,E.d2r=E.d2l_noadd=ee,E.r2c=function(V){var q=ee(V);return q!==void 0?q:E.fraction2r(.5)},E.r2c_just_indices=Y,E.l2r=E.c2r=r,E.r2l=ee,E.d2p=function(V){return E.l2p(E.r2c(V))},E.p2d=function(V){return O(K(V))},E.r2p=E.d2p,E.p2r=K,E.cleanPos=function(V){return Array.isArray(V)||typeof V=="string"&&V!==""?V:r(V)},E.setupMultiCategory=function(V){var q=E._traceIndices,re,Z,Q=E._matchGroup;if(Q&&E._categories.length===0){for(var ie in Q)if(ie!==P){var oe=S[u.id2name(ie)];q=q.concat(oe._traceIndices)}}var ne=[[0,{}],[0,{}]],se=[];for(re=0;re<q.length;re++){var _e=V[q[re]];if(F in _e){var ue=_e[F],ge=_e._length||M.minRowLength(ue);if(v(ue[0])&&v(ue[1]))for(Z=0;Z<ge;Z++){var xe=ue[0][Z],ye=ue[1][Z];h(xe)&&h(ye)&&(se.push([xe,ye]),xe in ne[0][1]||(ne[0][1][xe]=ne[0][0]++),ye in ne[1][1]||(ne[1][1][ye]=ne[1][0]++))}}}for(se.sort(function(be,Se){var Re=ne[0][1],Ve=Re[be[0]]-Re[Se[0]];if(Ve)return Ve;var Ae=ne[1][1];return Ae[be[1]]-Ae[Se[1]]}),re=0;re<se.length;re++)z(se[re])}),E.fraction2r=function(V){var q=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return E.l2r(q+V*(re-q))},E.r2fraction=function(V){var q=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return(E.r2l(V)-q)/(re-q)},E.cleanRange=function(V,q){q||(q={}),V||(V="range");var re=M.nestedProperty(E,V).get(),Z,Q;if(E.type==="date"?Q=M.dfltRange(E.calendar):F==="y"?Q=A.DFLTRANGEY:E._name==="realaxis"?Q=[0,1]:Q=q.dfltRange||A.DFLTRANGEX,Q=Q.slice(),(E.rangemode==="tozero"||E.rangemode==="nonnegative")&&(Q[0]=0),!re||re.length!==2){M.nestedProperty(E,V).set(Q);return}for(E.type==="date"&&!E.autorange&&(re[0]=M.cleanDate(re[0],b,E.calendar),re[1]=M.cleanDate(re[1],b,E.calendar)),Z=0;Z<2;Z++)if(E.type==="date"){if(!M.isDateTime(re[Z],E.calendar)){E[V]=Q;break}if(E.r2l(re[0])===E.r2l(re[1])){var ie=M.constrain(E.r2l(re[0]),M.MIN_MS+1e3,M.MAX_MS-1e3);re[0]=E.l2r(ie-1e3),re[1]=E.l2r(ie+1e3);break}}else{if(!e(re[Z]))if(e(re[1-Z]))re[Z]=re[1-Z]*(Z?10:.1);else{E[V]=Q;break}if(re[Z]<-o?re[Z]=-o:re[Z]>o&&(re[Z]=o),re[0]===re[1]){var oe=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=oe,re[1]+=oe}}},E.setScale=function(V){var q=S._size;if(E.overlaying){var re=u.getFromId({_fullLayout:S},E.overlaying);E.domain=re.domain}var Z=V&&E._r?"_r":"range",Q=E.calendar;E.cleanRange(Z);var ie=E.r2l(E[Z][0],Q),oe=E.r2l(E[Z][1],Q),ne=F==="y";if(ne?(E._offset=q.t+(1-E.domain[1])*q.h,E._length=q.h*(E.domain[1]-E.domain[0]),E._m=E._length/(ie-oe),E._b=-E._m*oe):(E._offset=q.l+E.domain[0]*q.w,E._length=q.w*(E.domain[1]-E.domain[0]),E._m=E._length/(oe-ie),E._b=-E._m*ie),E._rangebreaks=[],E._lBreaks=0,E._m2=0,E._B=[],E.rangebreaks){var se,_e;if(E._rangebreaks=E.locateBreaks(Math.min(ie,oe),Math.max(ie,oe)),E._rangebreaks.length){for(se=0;se<E._rangebreaks.length;se++)_e=E._rangebreaks[se],E._lBreaks+=Math.abs(_e.max-_e.min);var ue=ne;ie>oe&&(ue=!ue),ue&&E._rangebreaks.reverse();var ge=ue?-1:1;for(E._m2=ge*E._length/(Math.abs(oe-ie)-E._lBreaks),E._B.push(-E._m2*(ne?oe:ie)),se=0;se<E._rangebreaks.length;se++)_e=E._rangebreaks[se],E._B.push(E._B[E._B.length-1]-ge*E._m2*(_e.max-_e.min));for(se=0;se<E._rangebreaks.length;se++)_e=E._rangebreaks[se],_e.pmin=fe(_e.min),_e.pmax=fe(_e.max)}}if(!isFinite(E._m)||!isFinite(E._b)||E._length<0)throw S._replotting=!1,new Error("Something went wrong with axis scaling")},E.maskBreaks=function(V){var q=E.rangebreaks||[],re,Z,Q,ie,oe;q._cachedPatterns||(q._cachedPatterns=q.map(function(Re){return Re.enabled&&Re.bounds?M.simpleMap(Re.bounds,Re.pattern?a:E.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(Re){return Re.enabled&&Re.values?M.simpleMap(Re.values,E.d2c).sort(M.sorterAsc):null}));for(var ne=0;ne<q.length;ne++){var se=q[ne];if(se.enabled){if(se.bounds){var _e=se.pattern;switch(re=q._cachedPatterns[ne],Z=re[0],Q=re[1],_e){case p:oe=new Date(V),ie=oe.getUTCDay(),Z>Q&&(Q+=7,ie<Z&&(ie+=7));break;case _:oe=new Date(V);var ue=oe.getUTCHours(),ge=oe.getUTCMinutes(),xe=oe.getUTCSeconds(),ye=oe.getUTCMilliseconds();ie=ue+(ge/60+xe/3600+ye/36e5),Z>Q&&(Q+=24,ie<Z&&(ie+=24));break;case"":ie=V;break}if(ie>=Z&&ie<Q)return b}else for(var be=q._cachedValues[ne],Se=0;Se<be.length;Se++)if(Z=be[Se],Q=Z+se.dvalue,V>=Z&&V<Q)return b}}return V},E.locateBreaks=function(V,q){var re,Z,Q,ie,oe=[];if(!E.rangebreaks)return oe;var ne=E.rangebreaks.slice().sort(function(Ae,Ce){return Ae.pattern===p&&Ce.pattern===_?-1:Ce.pattern===p&&Ae.pattern===_?1:0}),se=function(Ae,Ce){if(Ae=M.constrain(Ae,V,q),Ce=M.constrain(Ce,V,q),Ae!==Ce){for(var Ze=!0,Ye=0;Ye<oe.length;Ye++){var ze=oe[Ye];Ae<ze.max&&Ce>=ze.min&&(Ae<ze.min&&(ze.min=Ae),Ce>ze.max&&(ze.max=Ce),Ze=!1)}Ze&&oe.push({min:Ae,max:Ce})}};for(re=0;re<ne.length;re++){var _e=ne[re];if(_e.enabled)if(_e.bounds){var ue=V,ge=q;_e.pattern&&(ue=Math.floor(ue)),Z=M.simpleMap(_e.bounds,_e.pattern?a:E.r2l),Q=Z[0],ie=Z[1];var xe=new Date(ue),ye,be;switch(_e.pattern){case p:be=d,ye=((ie<Q?7:0)+(ie-Q))*c,ue+=Q*c-(xe.getUTCDay()*c+xe.getUTCHours()*m+xe.getUTCMinutes()*l+xe.getUTCSeconds()*y+xe.getUTCMilliseconds());break;case _:be=c,ye=((ie<Q?24:0)+(ie-Q))*m,ue+=Q*m-(xe.getUTCHours()*m+xe.getUTCMinutes()*l+xe.getUTCSeconds()*y+xe.getUTCMilliseconds());break;default:ue=Math.min(Z[0],Z[1]),ge=Math.max(Z[0],Z[1]),be=ge-ue,ye=be}for(var Se=ue;Se<ge;Se+=be)se(Se,Se+ye)}else for(var Re=M.simpleMap(_e.values,E.d2c),Ve=0;Ve<Re.length;Ve++)Q=Re[Ve],ie=Q+_e.dvalue,se(Q,ie)}return oe.sort(function(Ae,Ce){return Ae.min-Ce.min}),oe},E.makeCalcdata=function(V,q,re){var Z,Q,ie,oe,ne=E.type,se=ne==="date"&&V[q+"calendar"];if(q in V){if(Z=V[q],oe=V._length||M.minRowLength(Z),M.isTypedArray(Z)&&(ne==="linear"||ne==="log")){if(oe===Z.length)return Z;if(Z.subarray)return Z.subarray(0,oe)}if(ne==="multicategory")return H(Z,oe);for(Q=new Array(oe),ie=0;ie<oe;ie++)Q[ie]=E.d2c(Z[ie],0,se,re)}else{var _e=q+"0"in V?E.d2c(V[q+"0"],0,se):0,ue=V["d"+q]?Number(V["d"+q]):1;for(Z=V[{x:"y",y:"x"}[q]],oe=V._length||Z.length,Q=new Array(oe),ie=0;ie<oe;ie++)Q[ie]=_e+ie*ue}if(E.rangebreaks)for(ie=0;ie<oe;ie++)Q[ie]=E.maskBreaks(Q[ie]);return Q},E.isValidRange=function(V){return Array.isArray(V)&&V.length===2&&e(E.r2l(V[0]))&&e(E.r2l(V[1]))},E.isPtWithinRange=function(V,q){var re=E.c2l(V[F],null,q),Z=E.r2l(E.range[0]),Q=E.r2l(E.range[1]);return Z<Q?Z<=re&&re<=Q:Q<=re&&re<=Z},E._emptyCategories=function(){E._categories=[],E._categoriesMap={}},E.clearCalc=function(){var V=E._matchGroup;if(V){var q=null,re=null;for(var Z in V){var Q=S[u.id2name(Z)];if(Q._categories){q=Q._categories,re=Q._categoriesMap;break}}q&&re?(E._categories=q,E._categoriesMap=re):E._emptyCategories()}else E._emptyCategories();if(E._initialCategories)for(var ie=0;ie<E._initialCategories.length;ie++)z(E._initialCategories[ie])},E.sortByInitialCategories=function(){var V=[];if(E._emptyCategories(),E._initialCategories)for(var q=0;q<E._initialCategories.length;q++)z(E._initialCategories[q]);V=V.concat(E._traceIndices);var re=E._matchGroup;for(var Z in re)if(P!==Z){var Q=S[u.id2name(Z)];Q._categories=E._categories,Q._categoriesMap=E._categoriesMap,V=V.concat(Q._traceIndices)}return V};var U=S._d3locale;E.type==="date"&&(E._dateFormat=U?U.timeFormat:f,E._extraFormat=S._extraFormat),E._separators=S.separators,E._numFormat=U?U.numberFormat:T,delete E._minDtick,delete E._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(t,B,G){B.exports=function(f){var M=["showexponent","showtickprefix","showticksuffix"],T=M.filter(function(a){return f[a]!==void 0}),e=function(a){return f[a]===f[T[0]]};if(T.every(e)||T.length===1)return f[T[0]]}},{}],587:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color").contrast,M=t("./layout_attributes"),T=t("./show_dflt"),e=t("../array_container_defaults");B.exports=function(n,r,v,s,o){o||(o={});var b=T(n),g=v("showticklabels");if(g){var d=o.font||{},c=r.color,m=r.ticklabelposition||"",l=m.indexOf("inside")!==-1?f(o.bgColor):c&&c!==M.color.dflt?c:d.color;if(x.coerceFont(v,"tickfont",{family:d.family,size:d.size,color:l}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&v("ticklabelstep"),o.noAng||v("tickangle"),s!=="category"){var y=v("tickformat");e(n,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),r.tickformatstops.length||delete r.tickformatstops,!o.noExp&&!y&&s!=="date"&&(v("showexponent",b),v("exponentformat"),v("minexponent"),v("separatethousands"))}}};function a(i,n){function r(s,o){return x.coerce(i,n,M.tickformatstops,s,o)}var v=r("enabled");v&&(r("dtickrange"),r("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e,a,i){var n=i.isMinor,r=n?T.minor||{}:T,v=n?e.minor:e,s=n?f.minor:f,o=n?"minor.":"",b=x.coerce2(r,v,s,"ticklen",n?(e.ticklen||5)*.6:void 0),g=x.coerce2(r,v,s,"tickwidth",n?e.tickwidth||1:void 0),d=x.coerce2(r,v,s,"tickcolor",(n?e.tickcolor:void 0)||v.color),c=a(o+"ticks",!n&&i.outerTicks||b||g||d?"outside":"");c||(delete v.ticklen,delete v.tickwidth,delete v.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(t,B,G){var x=t("./clean_ticks"),f=t("../../lib").isArrayOrTypedArray;B.exports=function(T,e,a,i,n){n||(n={});var r=n.isMinor,v=r?T.minor||{}:T,s=r?e.minor:e,o=r?"minor.":"";function b(A){var _=v[A];return _!==void 0?_:(s._template||{})[A]}var g=b("tick0"),d=b("dtick"),c=b("tickvals"),m=f(c)?"array":d?"linear":"auto",l=a(o+"tickmode",m);if(l==="auto")a(o+"nticks");else if(l==="linear"){var y=s.dtick=x.dtick(d,i);s.tick0=x.tick0(g,i,e.calendar,y)}else if(i!=="multicategory"){var u=a(o+"tickvals");u===void 0?s.tickmode="auto":r||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../lib"),T=t("../../components/drawing"),e=t("./axes");B.exports=function(i,n,r,v){var s=i._fullLayout;if(n.length===0){e.redrawComponents(i);return}function o(_){var p=_.xaxis,w=_.yaxis;s._defs.select("#"+_.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),_.plot.call(T.setTranslate,p._offset,w._offset).call(T.setScale,1,1);var h=_.plot.selectAll(".scatterlayer .trace");h.selectAll(".point").call(T.setPointGroupScale,1,1),h.selectAll(".textpoint").call(T.setTextPointsScale,1,1),h.call(T.hideOutsideRangePoints,_)}function b(_,p){var w=_.plotinfo,h=w.xaxis,L=w.yaxis,E=h._length,S=L._length,P=!!_.xr1,F=!!_.yr1,I=[];if(P){var D=M.simpleMap(_.xr0,h.r2l),R=M.simpleMap(_.xr1,h.r2l),O=D[1]-D[0],z=R[1]-R[0];I[0]=(D[0]*(1-p)+p*R[0]-D[0])/(D[1]-D[0])*E,I[2]=E*(1-p+p*z/O),h.range[0]=h.l2r(D[0]*(1-p)+p*R[0]),h.range[1]=h.l2r(D[1]*(1-p)+p*R[1])}else I[0]=0,I[2]=E;if(F){var H=M.simpleMap(_.yr0,L.r2l),Y=M.simpleMap(_.yr1,L.r2l),ee=H[1]-H[0],j=Y[1]-Y[0];I[1]=(H[1]*(1-p)+p*Y[1]-H[1])/(H[0]-H[1])*S,I[3]=S*(1-p+p*j/ee),L.range[0]=h.l2r(H[0]*(1-p)+p*Y[0]),L.range[1]=L.l2r(H[1]*(1-p)+p*Y[1])}else I[1]=0,I[3]=S;e.drawOne(i,h,{skipTitle:!0}),e.drawOne(i,L,{skipTitle:!0}),e.redrawComponents(i,[h._id,L._id]);var X=P?E/I[2]:1,ae=F?S/I[3]:1,fe=P?I[0]:0,K=F?I[1]:0,J=P?I[0]/I[2]*E:0,U=F?I[1]/I[3]*S:0,V=h._offset-J,q=L._offset-U;w.clipRect.call(T.setTranslate,fe,K).call(T.setScale,1/X,1/ae),w.plot.call(T.setTranslate,V,q).call(T.setScale,X,ae),T.setPointGroupScale(w.zoomScalePts,1/X,1/ae),T.setTextPointsScale(w.zoomScaleTxt,1/X,1/ae)}var g;v&&(g=v());function d(){for(var _={},p=0;p<n.length;p++){var w=n[p],h=w.plotinfo.xaxis,L=w.plotinfo.yaxis;w.xr1&&(_[h._name+".range"]=w.xr1.slice()),w.yr1&&(_[L._name+".range"]=w.yr1.slice())}return g&&g(),f.call("relayout",i,_).then(function(){for(var E=0;E<n.length;E++)o(n[E].plotinfo)})}function c(){for(var _={},p=0;p<n.length;p++){var w=n[p],h=w.plotinfo.xaxis,L=w.plotinfo.yaxis;w.xr0&&(_[h._name+".range"]=w.xr0.slice()),w.yr0&&(_[L._name+".range"]=w.yr0.slice())}return f.call("relayout",i,_).then(function(){for(var E=0;E<n.length;E++)o(n[E].plotinfo)})}var m,l,y,u=x.ease(r.easing);i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(y),y=null,c()});function A(){l=Date.now();for(var _=Math.min(1,(l-m)/r.duration),p=u(_),w=0;w<n.length;w++)b(n[w],p);l-m>r.duration?(d(),y=window.cancelAnimationFrame(A)):y=window.requestAnimationFrame(A)}return m=Date.now(),y=window.requestAnimationFrame(A),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(t,B,G){var x=t("../../registry").traceIs,f=t("./axis_autotype");B.exports=function(n,r,v,s){v("autotypenumbers",s.autotypenumbersDflt);var o=v("type",(s.splomStash||{}).type);o==="-"&&(M(r,s.data),r.type==="-"?r.type="linear":n.type=r.type)};function M(i,n){if(i.type==="-"){var r=i._id,v=r.charAt(0),s;r.indexOf("scene")!==-1&&(r=v);var o=T(n,r,v);if(!!o){if(o.type==="histogram"&&v==={v:"y",h:"x"}[o.orientation||"v"]){i.type="linear";return}var b=v+"calendar",g=o[b],d={noMultiCategory:!x(o,"cartesian")||x(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&v==={h:"x",v:"y"}[o.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=i.autotypenumbers,a(o,v)){var c=e(o),m=[];for(s=0;s<n.length;s++){var l=n[s];!x(l,"box-violin")||(l[v+"axis"]||v)!==r||(l[c]!==void 0?m.push(l[c][0]):l.name!==void 0?m.push(l.name):m.push("text"),l[b]!==g&&(g=void 0))}i.type=f(m,g,d)}else if(o.type==="splom"){var y=o.dimensions,u=y[o._axesDim[r]];u.visible&&(i.type=f(u.values,g,d))}else i.type=f(o[v]||[o[v+"0"]],g,d)}}}function T(i,n,r){for(var v=0;v<i.length;v++){var s=i[v];if(s.type==="splom"&&s._length>0&&(s["_"+r+"axes"]||{})[n])return s;if((s[r+"axis"]||r)===n){if(a(s,r))return s;if((s[r]||[]).length||s[r+"0"])return s}}}function e(i){return{v:"x",h:"y"}[i.orientation||"v"]}function a(i,n){var r=e(i),v=x(i,"box-violin"),s=x(i._fullInput||{},"candlestick");return v&&!s&&n===r&&i[r]===void 0&&i[r+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(t,B,G){var x=t("../registry"),f=t("../lib");G.manageCommandObserver=function(n,r,v,s){var o={},b=!0;r&&r._commandObserver&&(o=r._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var g=G.hasSimpleAPICommandBindings(n,v,o.lookupTable);if(r&&r._commandObserver){if(g)return o;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,o}if(g){M(n,g,o.cache),o.check=function(){if(!!b){var l=M(n,g,o.cache);return l.changed&&s&&o.lookupTable[l.value]!==void 0&&(o.disable(),Promise.resolve(s({value:l.value,type:g.type,prop:g.prop,traces:g.traces,index:o.lookupTable[l.value]})).then(o.enable,o.enable)),l.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<d.length;c++)n._internalOn(d[c],o.check);o.remove=function(){for(var m=0;m<d.length;m++)n._removeInternalListener(d[m],o.check)}}else f.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){b=!1},o.enable=function(){b=!0},r&&(r._commandObserver=o),o},G.hasSimpleAPICommandBindings=function(n,r,v){var s,o=r.length,b;for(s=0;s<o;s++){var g,d=r[s],c=d.method,m=d.args;if(Array.isArray(m)||(m=[]),!c)return!1;var l=G.computeAPICommandBindings(n,c,m);if(l.length!==1)return!1;if(!b)b=l[0],Array.isArray(b.traces)&&b.traces.sort();else{if(g=l[0],g.type!==b.type||g.prop!==b.prop)return!1;if(Array.isArray(b.traces))if(Array.isArray(g.traces)){g.traces.sort();for(var y=0;y<b.traces.length;y++)if(b.traces[y]!==g.traces[y])return!1}else return!1;else if(g.prop!==b.prop)return!1}g=l[0];var u=g.value;if(Array.isArray(u))if(u.length===1)u=u[0];else return!1;v&&(v[u]=s)}return b};function M(n,r,v){var s,o,b,g=!1;if(r.type==="data")s=n._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")s=n._fullLayout;else return!1;return o=f.nestedProperty(s,r.prop).get(),b=v[r.type]=v[r.type]||{},b.hasOwnProperty(r.prop)&&b[r.prop]!==o&&(g=!0),b[r.prop]=o,{changed:g,value:o}}G.executeAPICommand=function(n,r,v){if(r==="skip")return Promise.resolve();var s=x.apiMethodRegistry[r],o=[n];Array.isArray(v)||(v=[]);for(var b=0;b<v.length;b++)o.push(v[b]);return s.apply(null,o).catch(function(g){return f.warn("API call to Plotly."+r+" rejected.",g),Promise.reject(g)})},G.computeAPICommandBindings=function(n,r,v){var s;switch(Array.isArray(v)||(v=[]),r){case"restyle":s=a(n,v);break;case"relayout":s=e(n,v);break;case"update":s=a(n,[v[0],v[2]]).concat(e(n,[v[1]]));break;case"animate":s=T(n,v);break;default:s=[]}return s};function T(n,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function e(n,r){var v=[],s=r[0],o={};if(typeof s=="string")o[s]=r[1];else if(f.isPlainObject(s))o=s;else return v;return i(o,function(b,g,d){v.push({type:"layout",prop:b,value:d})},"",0),v}function a(n,r){var v,s,o,b,g=[];if(s=r[0],o=r[1],v=r[2],b={},typeof s=="string")b[s]=o;else if(f.isPlainObject(s))b=s,v===void 0&&(v=o);else return g;return v===void 0&&(v=null),i(b,function(d,c,m){var l,y;if(Array.isArray(m)){y=m.slice();var u=Math.min(y.length,n.data.length);v&&(u=Math.min(u,v.length)),l=[];for(var A=0;A<u;A++)l[A]=v?v[A]:A}else y=m,l=v?v.slice():null;if(l===null)Array.isArray(y)&&(y=y[0]);else if(Array.isArray(l)){if(!Array.isArray(y)){var _=y;y=[];for(var p=0;p<l.length;p++)y[p]=_}y.length=Math.min(l.length,y.length)}g.push({type:"data",prop:d,traces:l,value:y})},"",0),g}function i(n,r,v,s){Object.keys(n).forEach(function(o){var b=n[o];if(o[0]!=="_"){var g=v+(s>0?".":"")+o;f.isPlainObject(b)?i(b,r,g,s+1):r(g,o,b)}})}},{"../lib":515,"../registry":647}],593:[function(t,B,G){var x=t("../lib/extend").extendFlat;G.attributes=function(f,M){f=f||{},M=M||{};var T={valType:"info_array",editType:f.editType,items:[{valType:"number",min:0,max:1,editType:f.editType},{valType:"number",min:0,max:1,editType:f.editType}],dflt:[0,1]};f.name&&f.name+"",f.trace,M.description&&""+M.description;var e={x:x({},T,{}),y:x({},T,{}),editType:f.editType};return f.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:f.editType},e.column={valType:"integer",min:0,dflt:0,editType:f.editType}),e},G.defaults=function(f,M,T,e){var a=e&&e.x||[0,1],i=e&&e.y||[0,1],n=M.grid;if(n){var r=T("domain.column");r!==void 0&&(r<n.columns?a=n._domains.x[r]:delete f.domain.column);var v=T("domain.row");v!==void 0&&(v<n.rows?i=n._domains.y[v]:delete f.domain.row)}var s=T("domain.x",a),o=T("domain.y",i);s[0]<s[1]||(f.domain.x=a.slice()),o[0]<o[1]||(f.domain.y=i.slice())}},{"../lib/extend":505}],594:[function(t,B,G){B.exports=function(x){var f=x.editType,M=x.colorEditType;M===void 0&&(M=f);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:f},size:{valType:"number",min:1,editType:f},color:{valType:"color",editType:M},editType:f};return x.autoSize&&(T.size.dflt="auto"),x.autoColor&&(T.color.dflt="auto"),x.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],595:[function(t,B,G){B.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(t,B,G){G.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},G.axesNames=["lonaxis","lataxis"],G.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},G.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},G.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},G.clipPad=.001,G.precision=.1,G.landColor="#F0DC82",G.waterColor="#3399FF",G.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},G.sphereSVG={type:"Sphere"},G.fillLayers={ocean:1,land:1,lakes:1},G.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},G.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],G.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],G.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-geo"),M=f.geoPath,T=f.geoDistance,e=t("d3-geo-projection"),a=t("../../registry"),i=t("../../lib"),n=i.strTranslate,r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("../plots"),b=t("../cartesian/axes"),g=t("../cartesian/autorange").getAutoRange,d=t("../../components/dragelement"),c=t("../../components/selections").prepSelect,m=t("../../components/selections").clearOutline,l=t("../../components/selections").selectOnClick,y=t("./zoom"),u=t("./constants"),A=t("../../lib/geo_location_utils"),_=t("../../lib/topojson_utils"),p=t("topojson-client").feature;function w(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var h=w.prototype;B.exports=function(F){return new w(F)},h.plot=function(P,F,I,D){var R=this;if(D)return R.update(P,F,!0);R._geoCalcData=P,R._fullLayout=F;var O=F[this.id],z=[],H=!1;for(var Y in u.layerNameToAdjective)if(Y!=="frame"&&O["show"+Y]){H=!0;break}for(var ee=!1,j=0;j<P.length;j++){var X=P[0][0].trace;X._geo=R,X.locationmode&&(H=!0);var ae=X.marker;if(ae){var fe=ae.angle,K=ae.angleref;(fe||K==="north"||K==="previous")&&(ee=!0)}}if(this._hasMarkerAngles=ee,H){var J=_.getTopojsonName(O);(R.topojson===null||J!==R.topojsonName)&&(R.topojsonName=J,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&z.push(R.fetchTopojson()))}z=z.concat(A.fetchTraceGeoData(P)),I.push(new Promise(function(U,V){Promise.all(z).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,F),U()}).catch(V)}))},h.fetchTopojson=function(){var P=this,F=_.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,D){x.json(F,function(R,O){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=O,I()})})},h.update=function(P,F,I){var D=F[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var O=P[R],z=O[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(O,F)}if(!I){var H=this.updateProjection(P,F);if(H)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(F,D),this.updateDims(F,D),this.updateFx(F,D),o.generalUpdatePerTraceModule(this.graphDiv,this,P,D);var Y=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Y.selectAll(".point"),this.dataPoints.text=Y.selectAll("text"),this.dataPaths.line=Y.selectAll(".js-line");var ee=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=ee.selectAll("path"),this._render()},h.updateProjection=function(P,F){var I=this.graphDiv,D=F[this.id],R=F._size,O=D.domain,z=D.projection,H=D.lonaxis,Y=D.lataxis,ee=H._ax,j=Y._ax,X=this.projection=L(D),ae=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],fe=D.center||{},K=z.rotation||{},J=H.range||[],U=Y.range||[];if(D.fitbounds){ee._length=ae[1][0]-ae[0][0],j._length=ae[1][1]-ae[0][1],ee.range=g(I,ee),j.range=g(I,j);var V=(ee.range[0]+ee.range[1])/2,q=(j.range[0]+j.range[1])/2;if(D._isScoped)fe={lon:V,lat:q};else if(D._isClipped){fe={lon:V,lat:q},K={lon:V,lat:q,roll:K.roll};var re=z.type,Z=u.lonaxisSpan[re]/2||180,Q=u.lataxisSpan[re]/2||90;J=[V-Z,V+Z],U=[q-Q,q+Q]}else fe={lon:V,lat:q},K={lon:V,lat:K.lat,roll:K.roll}}X.center([fe.lon-K.lon,fe.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(z.parallels);var ie=S(J,U);X.fitExtent(ae,ie);var oe=this.bounds=X.getBounds(ie),ne=this.fitScale=X.scale(),se=X.translate();if(D.fitbounds){var _e=X.getBounds(S(ee.range,j.range)),ue=Math.min((oe[1][0]-oe[0][0])/(_e[1][0]-_e[0][0]),(oe[1][1]-oe[0][1])/(_e[1][1]-_e[0][1]));isFinite(ue)?X.scale(ue*ne):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(z.scale*ne);var ge=this.midPt=[(oe[0][0]+oe[1][0])/2,(oe[0][1]+oe[1][1])/2];if(X.translate([se[0]+(ge[0]-se[0]),se[1]+(ge[1]-se[1])]).clipExtent(oe),D._isAlbersUsa){var xe=X([fe.lon,fe.lat]),ye=X.translate();X.translate([ye[0]-(xe[0]-ye[0]),ye[1]-(xe[1]-ye[1])])}},h.updateBaseLayers=function(P,F){var I=this,D=I.topojson,R=I.layers,O=I.basePaths;function z(ae){return ae==="lonaxis"||ae==="lataxis"}function H(ae){return Boolean(u.lineLayers[ae])}function Y(ae){return Boolean(u.fillLayers[ae])}var ee=this.hasChoropleth?u.layersForChoropleth:u.layers,j=ee.filter(function(ae){return H(ae)||Y(ae)?F["show"+ae]:z(ae)?F[ae].showgrid:!0}),X=I.framework.selectAll(".layer").data(j,String);X.exit().each(function(ae){delete R[ae],delete O[ae],x.select(this).remove()}),X.enter().append("g").attr("class",function(ae){return"layer "+ae}).each(function(ae){var fe=R[ae]=x.select(this);ae==="bg"?I.bgRect=fe.append("rect").style("pointer-events","all"):z(ae)?O[ae]=fe.append("path").style("fill","none"):ae==="backplot"?fe.append("g").classed("choroplethlayer",!0):ae==="frontplot"?fe.append("g").classed("scatterlayer",!0):H(ae)?O[ae]=fe.append("path").style("fill","none").style("stroke-miterlimit",2):Y(ae)&&(O[ae]=fe.append("path").style("stroke","none"))}),X.order(),X.each(function(ae){var fe=O[ae],K=u.layerNameToAdjective[ae];ae==="frame"?fe.datum(u.sphereSVG):H(ae)||Y(ae)?fe.datum(p(D,D.objects[ae])):z(ae)&&fe.datum(E(ae,F,P)).call(r.stroke,F[ae].gridcolor).call(v.dashLine,F[ae].griddash,F[ae].gridwidth),H(ae)?fe.call(r.stroke,F[K+"color"]).call(v.dashLine,"",F[K+"width"]):Y(ae)&&fe.call(r.fill,F[K+"color"])})},h.updateDims=function(P,F){var I=this.bounds,D=(F.framewidth||0)/2,R=I[0][0]-D,O=I[0][1]-D,z=I[1][0]-R+D,H=I[1][1]-O+D;v.setRect(this.clipRect,R,O,z,H),this.bgRect.call(v.setRect,R,O,z,H).call(r.fill,F.bgcolor),this.xaxis._offset=R,this.xaxis._length=z,this.yaxis._offset=O,this.yaxis._length=H},h.updateFx=function(P,F){var I=this,D=I.graphDiv,R=I.bgRect,O=P.dragmode,z=P.clickmode;if(I.isStatic)return;function H(){var X=I.viewInitial,ae={};for(var fe in X)ae[I.id+"."+fe]=X[fe];a.call("_guiRelayout",D,ae),D.emit("plotly_doubleclick",null)}function Y(X){return I.projection.invert([X[0]+I.xaxis._offset,X[1]+I.yaxis._offset])}var ee=function(X,ae){if(ae.isRect){var fe=X.range={};fe[I.id]=[Y([ae.xmin,ae.ymin]),Y([ae.xmax,ae.ymax])]}else{var K=X.lassoPoints={};K[I.id]=ae.map(Y)}},j={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:ee},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(X){X===2&&m(D)}};O==="pan"?(R.node().onmousedown=null,R.call(y(I,F)),R.on("dblclick.zoom",H),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),j.prepFn=function(X,ae,fe){c(X,ae,fe,j,O)},d.init(j)),R.on("mousemove",function(){var X=I.projection.invert(i.getPositionFromD3Event());if(!X)return d.unhover(D,x.event);I.xaxis.p2c=function(){return X[0]},I.yaxis.p2c=function(){return X[1]},s.hover(D,x.event,I.id)}),R.on("mouseout",function(){D._dragging||d.unhover(D,x.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(z.indexOf("select")>-1&&l(x.event,D,[I.xaxis],[I.yaxis],I.id,j),z.indexOf("event")>-1&&s.click(D,x.event))})},h.makeFramework=function(){var P=this,F=P.graphDiv,I=F._fullLayout,D="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=x.select(P.container).append("g").attr("class","geo "+P.id).call(v.setClipUrl,D,F),P.project=function(R){var O=P.projection(R);return O?[O[0]-P.xaxis._offset,O[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(P.mockAxis,I)},h.saveViewInitial=function(P){var F=P.center||{},I=P.projection,D=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var R;P._isScoped?R={"center.lon":F.lon,"center.lat":F.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":D.lon},i.extendFlat(this.viewInitial,R)},h.render=function(P){this._hasMarkerAngles&&P?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},h._render=function(){var P=this.projection,F=P.getPath(),I;function D(O){var z=P(O.lonlat);return z?n(z[0],z[1]):null}function R(O){return P.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",F);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return F(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function L(P){var F=P.projection,I=F.type,D=u.projNames[I];D="geo"+i.titleCase(D);for(var R=f[D]||e[D],O=R(),z=P._isSatellite?Math.acos(1/F.distance)*180/Math.PI:P._isClipped?u.lonaxisSpan[I]/2:null,H=["center","rotate","parallels","clipExtent"],Y=function(X){return X?O:[]},ee=0;ee<H.length;ee++){var j=H[ee];typeof O[j]!="function"&&(O[j]=Y)}return O.isLonLatOverEdges=function(X){if(O(X)===null)return!0;if(z){var ae=O.rotate(),fe=T(X,[-ae[0],-ae[1]]),K=z*Math.PI/180;return fe>K}else return!1},O.getPath=function(){return M().projection(O)},O.getBounds=function(X){return O.getPath().bounds(X)},O.precision(u.precision),P._isSatellite&&O.tilt(F.tilt).distance(F.distance),z&&O.clipAngle(z-u.clipPad),O}function E(P,F,I){var D=1e-6,R=2.5,O=F[P],z=u.scopeDefaults[F.scope],H,Y,ee;P==="lonaxis"?(H=z.lonaxisRange,Y=z.lataxisRange,ee=function(q,re){return[q,re]}):P==="lataxis"&&(H=z.lataxisRange,Y=z.lonaxisRange,ee=function(q,re){return[re,q]});var j={type:"linear",range:[H[0],H[1]-D],tick0:O.tick0,dtick:O.dtick};b.setConvert(j,I);var X=b.calcTicks(j);!F.isScoped&&P==="lonaxis"&&X.pop();for(var ae=X.length,fe=new Array(ae),K=0;K<ae;K++)for(var J=X[K].x,U=fe[K]=[],V=Y[0];V<Y[1]+R;V+=R)U.push(ee(J,V));return{type:"MultiLineString",coordinates:fe}}function S(P,F){var I=u.clipPad,D=P[0]+I,R=P[1]-I,O=F[0]+I,z=F[1]-I;D>0&&R<0&&(R+=360);var H=(R-D)/4;return{type:"Polygon",coordinates:[[[D,O],[D,z],[D+H,z],[D+2*H,z],[D+3*H,z],[R,z],[R,O],[R-H,O],[R-2*H,O],[R-3*H,O],[D,O]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(t,B,G){var x=t("../../plots/get_data").getSubplotCalcData,f=t("../../lib").counterRegex,M=t("./geo"),T="geo",e=f(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function i(v){for(var s=v._fullLayout,o=v.calcdata,b=s._subplots[T],g=0;g<b.length;g++){var d=b[g],c=x(o,T,d),m=s[d],l=m._subplot;l||(l=M({id:d,graphDiv:v,container:s._geolayer.node(),topojsonURL:v._context.topojsonURL,staticPlot:v._context.staticPlot}),s[d]._subplot=l),l.plot(c,s,v._promises)}}function n(v,s,o,b){for(var g=b._subplots[T]||[],d=0;d<g.length;d++){var c=g[d],m=b[c]._subplot;!s[c]&&!!m&&(m.framework.remove(),m.clipDef.remove())}}function r(v){for(var s=v._fullLayout,o=s._subplots[T],b=0;b<o.length;b++){var g=s[o[b]],d=g._subplot;d.updateFx(s,g)}}B.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:i,updateFx:r,clean:n}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(t,B,G){var x=t("../../components/color/attributes"),f=t("../domain").attributes,M=t("../../components/drawing/attributes").dash,T=t("./constants"),e=t("../../plot_api/edit_types").overrideAll,a=t("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:x.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:M},n=B.exports=e({domain:f({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:x.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:x.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:x.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:x.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:x.background},lonaxis:i,lataxis:i},"plot","from-root");n.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(t,B,G){var x=t("../../lib"),f=t("../subplot_defaults"),M=t("../get_data").getSubplotData,T=t("./constants"),e=t("./layout_attributes"),a=T.axesNames;B.exports=function(r,v,s){f(r,v,s,{type:"geo",attributes:e,handleDefaults:i,fullData:s,partition:"y"})};function i(n,r,v,s){var o=M(s.fullData,"geo",s.id),b=o.map(function(U){return U._expandedIndex}),g=v("resolution"),d=v("scope"),c=T.scopeDefaults[d],m=v("projection.type",c.projType),l=r._isAlbersUsa=m==="albers usa";l&&(d=r.scope="usa");var y=r._isScoped=d!=="world",u=r._isSatellite=m==="satellite",A=r._isConic=m.indexOf("conic")!==-1||m==="albers",_=r._isClipped=!!T.lonaxisSpan[m];if(n.visible===!1){var p=x.extendDeep({},r._template);p.showcoastlines=!1,p.showcountries=!1,p.showframe=!1,p.showlakes=!1,p.showland=!1,p.showocean=!1,p.showrivers=!1,p.showsubunits=!1,p.lonaxis&&(p.lonaxis.showgrid=!1),p.lataxis&&(p.lataxis.showgrid=!1),r._template=p}for(var w=v("visible"),h,L=0;L<a.length;L++){var E=a[L],S=[30,10][L],P;if(y)P=c[E+"Range"];else{var F=T[E+"Span"],I=(F[m]||F["*"])/2,D=v("projection.rotation."+E.substr(0,3),c.projRotate[L]);P=[D-I,D+I]}var R=v(E+".range",P);v(E+".tick0"),v(E+".dtick",S),h=v(E+".showgrid",w?void 0:!1),h&&(v(E+".gridcolor"),v(E+".gridwidth"),v(E+".griddash")),r[E]._ax={type:"linear",_id:E.slice(0,3),_traceIndices:b,setScale:x.identity,c2l:x.identity,r2l:x.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var O=r.lonaxis.range,z=r.lataxis.range,H=O[0],Y=O[1];H>0&&Y<0&&(Y+=360);var ee=(H+Y)/2,j;if(!l){var X=y?c.projRotate:[ee,0,0];j=v("projection.rotation.lon",X[0]),v("projection.rotation.lat",X[1]),v("projection.rotation.roll",X[2]),h=v("showcoastlines",!y&&w),h&&(v("coastlinecolor"),v("coastlinewidth")),h=v("showocean",w?void 0:!1),h&&v("oceancolor")}var ae,fe;if(l?(ae=-96.6,fe=38.7):(ae=y?ee:j,fe=(z[0]+z[1])/2),v("center.lon",ae),v("center.lat",fe),u&&(v("projection.tilt"),v("projection.distance")),A){var K=c.projParallels||[0,60];v("projection.parallels",K)}v("projection.scale"),h=v("showland",w?void 0:!1),h&&v("landcolor"),h=v("showlakes",w?void 0:!1),h&&v("lakecolor"),h=v("showrivers",w?void 0:!1),h&&(v("rivercolor"),v("riverwidth")),h=v("showcountries",y&&d!=="usa"&&w),h&&(v("countrycolor"),v("countrywidth")),(d==="usa"||d==="north america"&&g===50)&&(v("showsubunits",w),v("subunitcolor"),v("subunitwidth")),y||(h=v("showframe",w),h&&(v("framecolor"),v("framewidth"))),v("bgcolor");var J=v("fitbounds");J&&(delete r.projection.scale,y?(delete r.center.lon,delete r.center.lat):_?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},i={cursor:"auto"};function n(E,S){var P=E.projection,F;return S._isScoped?F=s:S._isClipped?F=b:F=o,F(E,P)}B.exports=n;function r(E,S){return x.behavior.zoom().translate(S.translate()).scale(S.scale())}function v(E,S,P){var F=E.id,I=E.graphDiv,D=I.layout,R=D[F],O=I._fullLayout,z=O[F],H={},Y={};function ee(j,X){H[F+"."+j]=f.nestedProperty(R,j).get(),M.call("_storeDirectGUIEdit",D,O._preGUI,H);var ae=f.nestedProperty(z,j);ae.get()!==X&&(ae.set(X),f.nestedProperty(R,j).set(X),Y[F+"."+j]=X)}P(ee),ee("projection.scale",S.scale()/E.fitScale),ee("fitbounds",!1),I.emit("plotly_relayout",Y)}function s(E,S){var P=r(E,S);function F(){x.select(this).style(a)}function I(){S.scale(x.event.scale).translate(x.event.translate),E.render(!0);var O=S.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function D(O){var z=S.invert(E.midPt);O("center.lon",z[0]),O("center.lat",z[1])}function R(){x.select(this).style(i),v(E,S,D)}return P.on("zoomstart",F).on("zoom",I).on("zoomend",R),P}function o(E,S){var P=r(E,S),F=2,I,D,R,O,z,H,Y,ee,j;function X(V){return S.invert(V)}function ae(V){var q=X(V);if(!q)return!0;var re=S(q);return Math.abs(re[0]-V[0])>F||Math.abs(re[1]-V[1])>F}function fe(){x.select(this).style(a),I=x.mouse(this),D=S.rotate(),R=S.translate(),O=D,z=X(I)}function K(){if(H=x.mouse(this),ae(I)){P.scale(S.scale()),P.translate(S.translate());return}S.scale(x.event.scale),S.translate([R[0],x.event.translate[1]]),z?X(H)&&(ee=X(H),Y=[O[0]+(ee[0]-z[0]),D[1],D[2]],S.rotate(Y),O=Y):(I=H,z=X(I)),j=!0,E.render(!0);var V=S.rotate(),q=S.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-V[0]})}function J(){x.select(this).style(i),j&&v(E,S,U)}function U(V){var q=S.rotate(),re=S.invert(E.midPt);V("projection.rotation.lon",-q[0]),V("center.lon",re[0]),V("center.lat",re[1])}return P.on("zoomstart",fe).on("zoom",K).on("zoomend",J),P}function b(E,S){S.rotate(),S.scale();var P=r(E,S),F=L(P,"zoomstart","zoom","zoomend"),I=0,D=P.on,R;P.on("zoomstart",function(){x.select(this).style(a);var ee=x.mouse(this),j=S.rotate(),X=j,ae=S.translate(),fe=d(j);R=g(S,ee),D.call(P,"zoom",function(){var K=x.mouse(this);if(S.scale(x.event.scale),!R)ee=K,R=g(S,ee);else if(g(S,K)){S.rotate(j).translate(ae);var J=g(S,K),U=m(R,J),V=_(c(fe,U)),q=l(V,R,X);(!isFinite(q[0])||!isFinite(q[1])||!isFinite(q[2]))&&(q=X),S.rotate(q),X=q}z(F.of(this,arguments))}),O(F.of(this,arguments))}).on("zoomend",function(){x.select(this).style(i),D.call(P,"zoom",null),H(F.of(this,arguments)),v(E,S,Y)}).on("zoom.redraw",function(){E.render(!0);var ee=S.rotate();E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})});function O(ee){I++||ee({type:"zoomstart"})}function z(ee){ee({type:"zoom"})}function H(ee){--I||ee({type:"zoomend"})}function Y(ee){var j=S.rotate();ee("projection.rotation.lon",-j[0]),ee("projection.rotation.lat",-j[1])}return x.rebind(P,F,"on")}function g(E,S){var P=E.invert(S);return P&&isFinite(P[0])&&isFinite(P[1])&&p(P)}function d(E){var S=.5*E[0]*T,P=.5*E[1]*T,F=.5*E[2]*T,I=Math.sin(S),D=Math.cos(S),R=Math.sin(P),O=Math.cos(P),z=Math.sin(F),H=Math.cos(F);return[D*O*H+I*R*z,I*O*H-D*R*z,D*R*H+I*O*z,D*O*z-I*R*H]}function c(E,S){var P=E[0],F=E[1],I=E[2],D=E[3],R=S[0],O=S[1],z=S[2],H=S[3];return[P*R-F*O-I*z-D*H,P*O+F*R+I*H-D*z,P*z-F*H+I*R+D*O,P*H+F*z-I*O+D*R]}function m(E,S){if(!(!E||!S)){var P=h(E,S),F=Math.sqrt(w(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,w(E,S)))),D=Math.sin(I)/F;return F&&[Math.cos(I),P[2]*D,-P[1]*D,P[0]*D]}}function l(E,S,P){var F=A(S,2,E[0]);F=A(F,1,E[1]),F=A(F,0,E[2]-P[2]);var I=S[0],D=S[1],R=S[2],O=F[0],z=F[1],H=F[2],Y=Math.atan2(D,I)*e,ee=Math.sqrt(I*I+D*D),j,X;Math.abs(z)>ee?(X=(z>0?90:-90)-Y,j=0):(X=Math.asin(z/ee)*e-Y,j=Math.sqrt(ee*ee-z*z));var ae=180-X-2*Y,fe=(Math.atan2(H,O)-Math.atan2(R,j))*e,K=(Math.atan2(H,O)-Math.atan2(R,-j))*e,J=y(P[0],P[1],X,fe),U=y(P[0],P[1],ae,K);return J<=U?[X,fe,P[2]]:[ae,K,P[2]]}function y(E,S,P,F){var I=u(P-E),D=u(F-S);return Math.sqrt(I*I+D*D)}function u(E){return(E%360+540)%360-180}function A(E,S,P){var F=P*T,I=E.slice(),D=S===0?1:0,R=S===2?1:2,O=Math.cos(F),z=Math.sin(F);return I[D]=E[D]*O-E[R]*z,I[R]=E[R]*O+E[D]*z,I}function _(E){return[Math.atan2(2*(E[0]*E[1]+E[2]*E[3]),1-2*(E[1]*E[1]+E[2]*E[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(E[0]*E[2]-E[3]*E[1]))))*e,Math.atan2(2*(E[0]*E[3]+E[1]*E[2]),1-2*(E[2]*E[2]+E[3]*E[3]))*e]}function p(E){var S=E[0]*T,P=E[1]*T,F=Math.cos(P);return[F*Math.cos(S),F*Math.sin(S),Math.sin(P)]}function w(E,S){for(var P=0,F=0,I=E.length;F<I;++F)P+=E[F]*S[F];return P}function h(E,S){return[E[1]*S[2]-E[2]*S[1],E[2]*S[0]-E[0]*S[2],E[0]*S[1]-E[1]*S[0]]}function L(E){for(var S=0,P=arguments.length,F=[];++S<P;)F.push(arguments[S]);var I=x.dispatch.apply(null,F);return I.of=function(D,R){return function(O){var z;try{z=O.sourceEvent=x.event,O.target=E,x.event=O,I[O.type].apply(D,R)}finally{x.event=z}}},I}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(t,B,G){var x=t("../registry"),f=t("./cartesian/constants").SUBPLOT_PATTERN;G.getSubplotCalcData=function(M,T,e){var a=x.subplotsRegistry[T];if(!a)return[];for(var i=a.attr,n=[],r=0;r<M.length;r++){var v=M[r],s=v[0].trace;s[i]===e&&n.push(v)}return n},G.getModuleCalcData=function(M,T){var e=[],a=[],i;if(typeof T=="string"?i=x.getModule(T).plot:typeof T=="function"?i=T:i=T.plot,!i)return[e,M];for(var n=0;n<M.length;n++){var r=M[n],v=r[0].trace;v.visible!==!0||v._length===0||(v._module.plot===i?e.push(r):a.push(r))}return[e,a]},G.getSubplotData=function(T,e,a){if(!x.subplotsRegistry[e])return[];var i=x.subplotsRegistry[e].attr,n=[],r,v,s;if(e==="gl2d"){var o=a.match(f);v="x"+o[1],s="y"+o[2]}for(var b=0;b<T.length;b++)r=T[b],e==="gl2d"&&x.traceIs(r,"gl2d")?r[i[0]]===v&&r[i[1]]===s&&n.push(r):r[i]===a&&n.push(r);return n}},{"../registry":647,"./cartesian/constants":573}],603:[function(t,B,G){var x=t("mouse-change"),f=t("mouse-wheel"),M=t("mouse-event-offset"),T=t("../cartesian/constants"),e=t("has-passive-events");B.exports=i;function a(n,r){this.element=n,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function i(n){var r=n.mouseContainer,v=n.glplot,s=new a(r,v);function o(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function b(){for(var d=n.graphDiv._fullLayout._axisConstraintGroups,c=n.xaxis._id,m=n.yaxis._id,l=0;l<d.length;l++)if(d[l][c]!==-1){if(d[l][m]!==-1)return!0;break}return!1}s.mouseListener=x(r,g),r.addEventListener("touchstart",function(d){var c=M(d.changedTouches[0],r);g(0,c[0],c[1]),g(1,c[0],c[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchmove",function(d){d.preventDefault();var c=M(d.changedTouches[0],r);g(1,c[0],c[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchend",function(d){g(0,s.lastPos[0],s.lastPos[1]),d.preventDefault()},e?{passive:!1}:!1);function g(d,c,m){var l=n.calcDataBox(),y=v.viewBox,u=s.lastPos[0],A=s.lastPos[1],_=T.MINDRAG*v.pixelRatio,p=T.MINZOOM*v.pixelRatio,w,h;c*=v.pixelRatio,m*=v.pixelRatio,m=y[3]-y[1]-m;function L(D,R,O){var z=Math.min(R,O),H=Math.max(R,O);z!==H?(l[D]=z,l[D+2]=H,s.dataBox=l,n.setRanges(l)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(n.fullLayout.dragmode){case"zoom":if(d){var E=c/(y[2]-y[0])*(l[2]-l[0])+l[0],S=m/(y[3]-y[1])*(l[3]-l[1])+l[1];s.boxInited||(s.boxStart[0]=E,s.boxStart[1]=S,s.dragStart[0]=c,s.dragStart[1]=m),s.boxEnd[0]=E,s.boxEnd[1]=S,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var P=Math.abs(s.dragStart[0]-c)<p,F=Math.abs(s.dragStart[1]-m)<p;if(b()&&!(P&&F)){w=s.boxEnd[0]-s.boxStart[0],h=s.boxEnd[1]-s.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(w*I)>Math.abs(h)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(w)*I*(h>=0?1:-1),s.boxEnd[1]<l[1]?(s.boxEnd[1]=l[1],s.boxEnd[0]=s.boxStart[0]+(l[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>l[3]&&(s.boxEnd[1]=l[3],s.boxEnd[0]=s.boxStart[0]+(l[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(h)/I*(w>=0?1:-1),s.boxEnd[0]<l[0]?(s.boxEnd[0]=l[0],s.boxEnd[1]=s.boxStart[1]+(l[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>l[2]&&(s.boxEnd[0]=l[2],s.boxEnd[1]=s.boxStart[1]+(l[2]-s.boxStart[0])*Math.abs(I)))}else P&&(s.boxEnd[0]=s.boxStart[0]),F&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(w=s.boxStart[0]!==s.boxEnd[0],h=s.boxStart[1]!==s.boxEnd[1],w||h?(w&&(L(0,s.boxStart[0],s.boxEnd[0]),n.xaxis.autorange=!1),h&&(L(1,s.boxStart[1],s.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,d?(s.panning||(s.dragStart[0]=c,s.dragStart[1]=m),Math.abs(s.dragStart[0]-c)<_&&(c=s.dragStart[0]),Math.abs(s.dragStart[1]-m)<_&&(m=s.dragStart[1]),w=(u-c)*(l[2]-l[0])/(v.viewBox[2]-v.viewBox[0]),h=(A-m)*(l[3]-l[1])/(v.viewBox[3]-v.viewBox[1]),l[0]+=w,l[2]+=w,l[1]+=h,l[3]+=h,n.setRanges(l),s.panning=!0,s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations()):s.panning&&(s.panning=!1,n.relayoutCallback());break}s.lastPos[0]=c,s.lastPos[1]=m}return s.wheelListener=f(r,function(d,c){if(!n.scrollZoom)return!1;var m=n.calcDataBox(),l=v.viewBox,y=s.lastPos[0],u=s.lastPos[1],A=Math.exp(5*c/(l[3]-l[1])),_=y/(l[2]-l[0])*(m[2]-m[0])+m[0],p=u/(l[3]-l[1])*(m[3]-m[1])+m[1];return m[0]=(m[0]-_)*A+_,m[2]=(m[2]-_)*A+_,m[1]=(m[1]-p)*A+p,m[3]=(m[3]-p)*A+p,n.setRanges(m),s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(t,B,G){var x=t("../cartesian/axes"),f=t("../../lib/str2rgbarray");function M(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=M.prototype,e=["xaxis","yaxis"];T.merge=function(i){this.titleEnable=!1,this.backgroundColor=f(i.plot_bgcolor);var n,r,v,s,o,b,g,d,c,m,l;for(m=0;m<2;++m){n=e[m];var y=n.charAt(0);for(r=i[this.scene[n]._name],v=r.title.text===this.scene.fullLayout._dfltTitle[y]?"":r.title.text,l=0;l<=2;l+=2)this.labelEnable[m+l]=!1,this.labels[m+l]=v,this.labelColor[m+l]=f(r.title.font.color),this.labelFont[m+l]=r.title.font.family,this.labelSize[m+l]=r.title.font.size,this.labelPad[m+l]=this.getLabelPad(n,r),this.tickEnable[m+l]=!1,this.tickColor[m+l]=f((r.tickfont||{}).color),this.tickAngle[m+l]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[m+l]=this.getTickPad(r),this.tickMarkLength[m+l]=0,this.tickMarkWidth[m+l]=r.tickwidth||0,this.tickMarkColor[m+l]=f(r.tickcolor),this.borderLineEnable[m+l]=!1,this.borderLineColor[m+l]=f(r.linecolor),this.borderLineWidth[m+l]=r.linewidth||0;g=this.hasSharedAxis(r),o=this.hasAxisInDfltPos(n,r)&&!g,b=this.hasAxisInAltrPos(n,r)&&!g,s=r.mirror||!1,d=g?String(s).indexOf("all")!==-1:!!s,c=g?s==="allticks":String(s).indexOf("ticks")!==-1,o?this.labelEnable[m]=!0:b&&(this.labelEnable[m+2]=!0),o?this.tickEnable[m]=r.showticklabels:b&&(this.tickEnable[m+2]=r.showticklabels),(o||d)&&(this.borderLineEnable[m]=r.showline),(b||d)&&(this.borderLineEnable[m+2]=r.showline),(o||c)&&(this.tickMarkLength[m]=this.getTickMarkLength(r)),(b||c)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(r)),this.gridLineEnable[m]=r.showgrid,this.gridLineColor[m]=f(r.gridcolor),this.gridLineWidth[m]=r.gridwidth,this.zeroLineEnable[m]=r.zeroline,this.zeroLineColor[m]=f(r.zerolinecolor),this.zeroLineWidth[m]=r.zerolinewidth}},T.hasSharedAxis=function(i){var n=this.scene,r=n.fullLayout._subplots.gl2d,v=x.findSubplotsWithAxis(r,i);return v.indexOf(n.id)!==0},T.hasAxisInDfltPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="bottom";if(i==="yaxis")return r==="left"},T.hasAxisInAltrPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="top";if(i==="yaxis")return r==="right"},T.getLabelPad=function(i,n){var r=1.5,v=n.title.font.size,s=n.showticklabels;if(i==="xaxis")return n.side==="top"?-10+v*(r+(s?1:0)):-10+v*(r+(s?.5:0));if(i==="yaxis")return n.side==="right"?10+v*(r+(s?1:.5)):10+v*(r+(s?.5:0))},T.getTickPad=function(i){return i.ticks==="outside"?10+i.ticklen:15},T.getTickMarkLength=function(i){if(!i.ticks)return 0;var n=i.ticklen;return i.ticks==="inside"?-n:n};function a(i){return new M(i)}B.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(t,B,G){var x=t("../../plot_api/edit_types").overrideAll,f=t("./scene2d"),M=t("../layout_attributes"),T=t("../../constants/xmlns_namespaces"),e=t("../cartesian/constants"),a=t("../cartesian"),i=t("../../components/fx/layout_attributes"),n=t("../get_data").getSubplotData;G.name="gl2d",G.attr=["xaxis","yaxis"],G.idRoot=["x","y"],G.idRegex=e.idRegex,G.attrRegex=e.attrRegex,G.attributes=t("../cartesian/attributes"),G.supplyLayoutDefaults=function(r,v,s){v._has("cartesian")||a.supplyLayoutDefaults(r,v,s)},G.layoutAttrOverrides=x(a.layoutAttributes,"plot","from-root"),G.baseLayoutAttrOverrides=x({plot_bgcolor:M.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),G.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots.gl2d,g=0;g<b.length;g++){var d=b[g],c=s._plots[d],m=n(o,"gl2d",d),l=c._scene2d;l===void 0&&(l=new f({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio},s),c._scene2d=l),l.plot(m,v.calcdata,s,v.layout)}},G.clean=function(r,v,s,o){for(var b=o._subplots.gl2d||[],g=0;g<b.length;g++){var d=b[g],c=o._plots[d];if(!!c._scene2d){var m=n(r,"gl2d",d);m.length===0&&(c._scene2d.destroy(),delete o._plots[d])}}a.clean.apply(this,arguments)},G.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)},G.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]],g=b._scene2d,d=g.toImage("png"),c=v._glimages.append("svg:image");c.attr({xmlns:T.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),g.destroy()}},G.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]]._scene2d;b.updateFx(v.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(t,B,G){var x=t("../../registry"),f=t("../../plots/cartesian/axes"),M=t("../../components/fx"),T=t("../../../stackgl_modules").gl_plot2d,e=t("../../../stackgl_modules").gl_spikes2d,a=t("../../../stackgl_modules").gl_select_box,i=t("webgl-context"),n=t("./convert"),r=t("./camera"),v=t("../../lib/show_no_webgl_msg"),s=t("../cartesian/constraints"),o=s.enforce,b=s.clean,g=t("../cartesian/autorange").doAutoRange,d=t("../../components/dragelement/helpers"),c=d.drawMode,m=d.selectMode,l=["xaxis","yaxis"],y,u,A=t("../cartesian/constants").SUBPLOT_PATTERN;function _(h,L){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(L),this.glplot=T(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}B.exports=_;var p=_.prototype;p.makeFramework=function(){if(this.staticPlot){if(!u&&(y=document.createElement("canvas"),u=i({canvas:y,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!u))throw new Error("Error creating static canvas/context for image server");this.canvas=y,this.gl=u}else{var h=this.container.querySelector(".gl-canvas-focus"),L=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){v(this),this.stopped=!0;return}this.canvas=h,this.gl=L}var E=this.canvas;E.style.width="100%",E.style.height="100%",E.style.position="absolute",E.style.top="0px",E.style.left="0px",E.style["pointer-events"]="none",this.updateSize(E);var S=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",S.style["z-index"]=20,S.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(S),F.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},p.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(y),this.updateSize(this.canvas);var L=this.glplot.gl,E=L.drawingBufferWidth,S=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(E*S*4);L.readPixels(0,0,E,S,L.RGBA,L.UNSIGNED_BYTE,P);for(var F=0,I=S-1;F<I;++F,--I)for(var D=0;D<E;++D)for(var R=0;R<4;++R){var O=P[4*(E*F+D)+R];P[4*(E*F+D)+R]=P[4*(E*I+D)+R],P[4*(E*I+D)+R]=O}var z=document.createElement("canvas");z.width=E,z.height=S;var H=z.getContext("2d",{willReadFrequently:!0}),Y=H.createImageData(E,S);Y.data.set(P),H.putImageData(Y,0,0);var ee;switch(h){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(y),ee},p.updateSize=function(h){h||(h=this.canvas);var L=this.pixelRatio,E=this.fullLayout,S=E.width,P=E.height,F=Math.ceil(L*S)|0,I=Math.ceil(L*P)|0;return(h.width!==F||h.height!==I)&&(h.width=F,h.height=I),h},p.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[f.calcTicks(this.xaxis),f.calcTicks(this.yaxis)],L=0;L<2;++L)for(var E=0;E<h[L].length;++E)h[L][E].text=h[L][E].text+"";return h};function w(h,L){for(var E=0;E<2;++E){var S=h[E],P=L[E];if(S.length!==P.length)return!0;for(var F=0;F<S.length;++F)if(S[F].x!==P[F].x)return!0}return!1}p.updateRefs=function(h){this.fullLayout=h;var L=this.id.match(A),E="xaxis"+L[1],S="yaxis"+L[2];this.xaxis=this.fullLayout[E],this.yaxis=this.fullLayout[S]},p.relayoutCallback=function(){var h=this.graphDiv,L=this.xaxis,E=this.yaxis,S=h.layout,P={},F=P[L._name+".range"]=L.range.slice(),I=P[E._name+".range"]=E.range.slice();P[L._name+".autorange"]=L.autorange,P[E._name+".autorange"]=E.autorange,x.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var D=S[L._name];D.range=F,D.autorange=L.autorange;var R=S[E._name];R.range=I,R.autorange=E.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},p.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),E=this.glplotOptions.ticks;w(L,E)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},p.handleAnnotations=function(){for(var h=this.graphDiv,L=this.fullLayout.annotations,E=0;E<L.length;E++){var S=L[E];S.xref===this.xaxis._id&&S.yref===this.yaxis._id&&x.getComponentMethod("annotations","drawOne")(h,E)}},p.destroy=function(){if(!!this.glplot){var h=this.traces;h&&Object.keys(h).map(function(L){h[L].dispose(),delete h[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},p.plot=function(h,L,E){var S=this.glplot;this.updateRefs(E),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,L),this.updateFx(E.dragmode);var P=E.width,F=E.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(E),I.screenBox=[0,0,P,F];var D={_fullLayout:{_axisConstraintGroups:E._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:E._size}};b(D,this.xaxis),b(D,this.yaxis);var R=E._size,O=this.xaxis.domain,z=this.yaxis.domain;I.viewBox=[R.l+O[0]*R.w,R.b+z[0]*R.h,P-R.r-(1-O[1])*R.w,F-R.t-(1-z[1])*R.h],this.mouseContainer.style.width=R.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=R.h*(z[1]-z[0])+"px",this.mouseContainer.height=R.h*(z[1]-z[0]),this.mouseContainer.style.left=R.l+O[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-z[1])*R.h+"px";var H,Y;for(Y=0;Y<2;++Y)H=this[l[Y]],H._length=I.viewBox[Y+2]-I.viewBox[Y],g(this.graphDiv,H),H.setScale();o(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(E),S.update(I),this.glplot.draw()},p.calcDataBox=function(){var h=this.xaxis,L=this.yaxis,E=h.range,S=L.range,P=h.r2l,F=L.r2l;return[P(E[0]),F(S[0]),P(E[1]),F(S[1])]},p.setRanges=function(h){var L=this.xaxis,E=this.yaxis,S=L.l2r,P=E.l2r;L.range=[S(h[0]),S(h[2])],E.range=[P(h[1]),P(h[3])]},p.updateTraces=function(h,L){var E=Object.keys(this.traces),S,P,F;this.fullData=h;e:for(S=0;S<E.length;S++){var I=E[S],D=this.traces[I];for(P=0;P<h.length;P++)if(F=h[P],F.uid===I&&F.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(S=0;S<h.length;S++){F=h[S];var R=L[S],O=this.traces[F.uid];O?O.update(F,R):(O=F._module.plot(this,F,R),this.traces[F.uid]=O)}this.glplot.objects.sort(function(z,H){return z._trace.index-H._trace.index})},p.updateFx=function(h){m(h)||c(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),h==="pan"?this.mouseContainer.style.cursor="move":h==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},p.emitPointAction=function(h,L){for(var E=h.trace.uid,S=h.pointIndex,P,F=0;F<this.fullData.length;F++)this.fullData[F].uid===E&&(P=this.fullData[F]);var I={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:P.index,pointNumber:S,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};M.appendArrayPointValue(I,P,S),this.graphDiv.emit(L,{points:[I]})},p.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,L=this.camera,E=L.mouseListener,S=this.lastButtonState===1&&E.buttons===0,P=this.fullLayout;this.lastButtonState=E.buttons,this.cameraChanged();var F=E.x*h.pixelRatio,I=this.canvas.height-h.pixelRatio*E.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],O=0;O<2;O++)L.boxStart[O]===L.boxEnd[O]&&(R[O]=h.dataBox[O],R[O+2]=h.dataBox[O+2]);h.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=P._size,H=this.xaxis.domain,Y=this.yaxis.domain;D=h.pick(F/h.pixelRatio+z.l+H[0]*z.w,I/h.pixelRatio-(z.t+(1-Y[1])*z.h));var ee=D&&D.object._trace.handlePick(D);if(ee&&S&&this.emitPointAction(ee,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&ee&&(!this.lastPickResult||this.lastPickResult.traceUid!==ee.trace.uid||this.lastPickResult.dataCoord[0]!==ee.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ee.dataCoord[1])){var j=ee;this.lastPickResult={traceUid:ee.trace?ee.trace.uid:null,dataCoord:ee.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),j.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(D.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(D.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(ee,"plotly_hover");var X=this.fullData[j.trace.index]||{},ae=j.pointIndex,fe=M.castHoverinfo(X,P,ae);if(fe&&fe!=="all"){var K=fe.split("+");K.indexOf("x")===-1&&(j.traceCoord[0]=void 0),K.indexOf("y")===-1&&(j.traceCoord[1]=void 0),K.indexOf("z")===-1&&(j.traceCoord[2]=void 0),K.indexOf("text")===-1&&(j.textLabel=void 0),K.indexOf("name")===-1&&(j.name=void 0)}M.loneHover({x:j.screenCoord[0],y:j.screenCoord[1],xLabel:this.hoverFormatter("xaxis",j.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",j.traceCoord[1]),zLabel:j.traceCoord[2],text:j.textLabel,name:j.name,color:M.castHoverOption(X,ae,"bgcolor")||j.color,borderColor:M.castHoverOption(X,ae,"bordercolor"),fontFamily:M.castHoverOption(X,ae,"font.family"),fontSize:M.castHoverOption(X,ae,"font.size"),fontColor:M.castHoverOption(X,ae,"font.color"),nameLength:M.castHoverOption(X,ae,"namelength"),textAlign:M.castHoverOption(X,ae,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),h.draw()}},p.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),M.loneUnhover(this.svgContainer))},p.hoverFormatter=function(h,L){if(L!==void 0){var E=this[h];return f.tickText(E,E.c2l(L),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(t,B,G){var x=t("../../plot_api/edit_types").overrideAll,f=t("../../components/fx/layout_attributes"),M=t("./scene"),T=t("../get_data").getSubplotData,e=t("../../lib"),a=t("../../constants/xmlns_namespaces"),i="gl3d",n="scene";G.name=i,G.attr=n,G.idRoot=n,G.idRegex=G.attrRegex=e.counterRegex("scene"),G.attributes=t("./layout/attributes"),G.layoutAttributes=t("./layout/layout_attributes"),G.baseLayoutAttrOverrides=x({hoverlabel:f.hoverlabel},"plot","nested"),G.supplyLayoutDefaults=t("./layout/defaults"),G.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots[i],g=0;g<b.length;g++){var d=b[g],c=T(o,i,d),m=s[d],l=m.camera,y=m._scene;y||(y=new M({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio,camera:l},s),m._scene=y),y.viewInitial||(y.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),y.plot(c,s,v.layout)}},G.clean=function(r,v,s,o){for(var b=o._subplots[i]||[],g=0;g<b.length;g++){var d=b[g];!v[d]&&!!o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},G.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=v._size,b=0;b<s.length;b++){var g=v[s[b]],d=g.domain,c=g._scene,m=c.toImage("png"),l=v._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":m,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),c.destroy()}},G.cleanId=function(v){if(!!v.match(/^scene[0-9]*$/)){var s=v.substr(5);return s==="1"&&(s=""),n+s}},G.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=0;o<s.length;o++){var b=v[s[o]]._scene;b.updateFx(v.dragmode,v.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(t,B,G){B.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(t,B,G){var x=t("../../../components/color"),f=t("../../cartesian/layout_attributes"),M=t("../../../lib/extend").extendFlat,T=t("../../../plot_api/edit_types").overrideAll;B.exports=T({visible:f.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:x.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:f.color,categoryorder:f.categoryorder,categoryarray:f.categoryarray,title:{text:f.title.text,font:f.title.font},type:M({},f.type,{values:["-","linear","log","date","category"]}),autotypenumbers:f.autotypenumbers,autorange:f.autorange,rangemode:f.rangemode,range:M({},f.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,mirror:f.mirror,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,showticklabels:f.showticklabels,tickfont:f.tickfont,tickangle:f.tickangle,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickformat:f.tickformat,tickformatstops:f.tickformatstops,hoverformat:f.hoverformat,showline:f.showline,linecolor:f.linecolor,linewidth:f.linewidth,showgrid:f.showgrid,gridcolor:M({},f.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:f.gridwidth,zeroline:f.zeroline,zerolinecolor:f.zerolinecolor,zerolinewidth:f.zerolinewidth,_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(t,B,G){var x=t("tinycolor2").mix,f=t("../../../lib"),M=t("../../../plot_api/plot_template"),T=t("./axis_attributes"),e=t("../../cartesian/type_defaults"),a=t("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],n=100*(204-68)/(255-68);B.exports=function(v,s,o){var b,g;function d(l,y){return f.coerce(b,g,T,l,y)}for(var c=0;c<i.length;c++){var m=i[c];b=v[m]||{},g=M.newContainer(s,m),g._id=m[0]+o.scene,g._name=m,e(b,g,d,o),a(b,g,d,{font:o.font,letter:m[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),d("gridcolor",x(g.color,o.bgColor,n).toRgbString()),d("title.text",m[0]),g.setScale=f.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",g.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(t,B,G){var x=t("../../../lib/str2rgbarray"),f=t("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(i,n){for(var r=this,v=0;v<3;++v){var s=n[M[v]];if(!s.visible){r.tickEnable[v]=!1,r.labelEnable[v]=!1,r.lineEnable[v]=!1,r.lineTickEnable[v]=!1,r.gridEnable[v]=!1,r.zeroEnable[v]=!1,r.backgroundEnable[v]=!1;continue}r.labels[v]=i._meta?f.templateString(s.title.text,i._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(r.labelColor[v]=x(s.title.font.color)),s.title.font.family&&(r.labelFont[v]=s.title.font.family),s.title.font.size&&(r.labelSize[v]=s.title.font.size)),"showline"in s&&(r.lineEnable[v]=s.showline),"linecolor"in s&&(r.lineColor[v]=x(s.linecolor)),"linewidth"in s&&(r.lineWidth[v]=s.linewidth),"showgrid"in s&&(r.gridEnable[v]=s.showgrid),"gridcolor"in s&&(r.gridColor[v]=x(s.gridcolor)),"gridwidth"in s&&(r.gridWidth[v]=s.gridwidth),s.type==="log"?r.zeroEnable[v]=!1:"zeroline"in s&&(r.zeroEnable[v]=s.zeroline),"zerolinecolor"in s&&(r.zeroLineColor[v]=x(s.zerolinecolor)),"zerolinewidth"in s&&(r.zeroLineWidth[v]=s.zerolinewidth),"ticks"in s&&!!s.ticks?r.lineTickEnable[v]=!0:r.lineTickEnable[v]=!1,"ticklen"in s&&(r.lineTickLength[v]=r._defaultLineTickLength[v]=s.ticklen),"tickcolor"in s&&(r.lineTickColor[v]=x(s.tickcolor)),"tickwidth"in s&&(r.lineTickWidth[v]=s.tickwidth),"tickangle"in s&&(r.tickAngle[v]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(r.tickEnable[v]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(r.tickColor[v]=x(s.tickfont.color)),s.tickfont.family&&(r.tickFont[v]=s.tickfont.family),s.tickfont.size&&(r.tickSize[v]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(r.lineTickMirror[v]=!0,r.lineMirror[v]=!0):s.mirror===!0?(r.lineTickMirror[v]=!1,r.lineMirror[v]=!0):(r.lineTickMirror[v]=!1,r.lineMirror[v]=!1):r.lineMirror[v]=!1,"showbackground"in s&&s.showbackground!==!1?(r.backgroundEnable[v]=!0,r.backgroundColor[v]=x(s.backgroundcolor)):r.backgroundEnable[v]=!1}};function a(i,n){var r=new T;return r.merge(i,n),r}B.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(t,B,G){var x=t("../../../lib"),f=t("../../../components/color"),M=t("../../../registry"),T=t("../../subplot_defaults"),e=t("./axis_defaults"),a=t("./layout_attributes"),i=t("../../get_data").getSubplotData,n="gl3d";B.exports=function(s,o,b){var g=o._basePlotModules.length>1;function d(c){if(!g){var m=x.validate(s[c],a[c]);if(m)return s[c]}}T(s,o,b,{type:n,attributes:a,handleDefaults:r,fullLayout:o,font:o.font,fullData:b,getDfltFromLayout:d,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function r(v,s,o,b){for(var g=o("bgcolor"),d=f.combine(g,b.paper_bgcolor),c=["up","center","eye"],m=0;m<c.length;m++)o("camera."+c[m]+".x"),o("camera."+c[m]+".y"),o("camera."+c[m]+".z");o("camera.projection.type");var l=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),y=l?"manual":"auto",u=o("aspectmode",y);l||(v.aspectratio=s.aspectratio={x:1,y:1,z:1},u==="manual"&&(s.aspectmode="auto"),v.aspectmode=s.aspectmode);var A=i(b.fullData,n,b.id);e(v,s,{font:b.font,scene:b.id,data:A,bgColor:d,calendar:b.calendar,autotypenumbersDflt:b.autotypenumbersDflt,fullLayout:b.fullLayout}),M.getComponentMethod("annotations3d","handleDefaults")(v,s,b);var _=b.getDfltFromLayout("dragmode");if(_!==!1&&!_)if(_="orbit",v.camera&&v.camera.up){var p=v.camera.up.x,w=v.camera.up.y,h=v.camera.up.z;h!==0&&(!p||!w||!h||h/Math.sqrt(p*p+w*w+h*h)>.999)&&(_="turntable")}else _="turntable";o("dragmode",_),o("hovermode",b.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(t,B,G){var x=t("./axis_attributes"),f=t("../../domain").attributes,M=t("../../../lib/extend").extendFlat,T=t("../../../lib").counterRegex;function e(a,i,n){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}B.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:M(e(0,0,1),{}),center:M(e(0,0,0),{}),eye:M(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:f({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:x,yaxis:x,zaxis:x,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(t,B,G){var x=t("../../../lib/str2rgbarray"),f=["xaxis","yaxis","zaxis"];function M(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=M.prototype;T.merge=function(a){for(var i=0;i<3;++i){var n=a[f[i]];if(!n.visible){this.enabled[i]=!1,this.drawSides[i]=!1;continue}this.enabled[i]=n.showspikes,this.colors[i]=x(n.spikecolor),this.drawSides[i]=n.spikesides,this.lineWidth[i]=n.spikethickness}};function e(a){var i=new M;return i.merge(a),i}B.exports=e},{"../../../lib/str2rgbarray":540}],615:[function(t,B,G){B.exports=e;var x=t("../../cartesian/axes"),f=t("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(a){for(var i=new Array(3),n=0;n<3;++n){for(var r=a[n],v=new Array(r.length),s=0;s<r.length;++s)v[s]=r[s].x;i[n]=v}return i}function e(a){for(var i=a.axesOptions,n=a.glplot.axesPixels,r=a.fullSceneLayout,v=[[],[],[]],s=0;s<3;++s){var o=r[M[s]];if(o._length=(n[s].hi-n[s].lo)*n[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))v[s]=[];else{o._input_range=o.range.slice(),o.range[0]=n[s].lo/a.dataScale[s],o.range[1]=n[s].hi/a.dataScale[s],o._m=1/(a.dataScale[s]*n[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var b=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var g=o.nticks||f.constrain(o._length/40,4,9);x.autoTicks(o,Math.abs(o.range[1]-o.range[0])/g)}for(var d=x.calcTicks(o,{msUTC:!0}),c=0;c<d.length;++c)d[c].x=d[c].x*a.dataScale[s],o.type==="date"&&(d[c].text=d[c].text.replace(/\<br\>/g," "));v[s]=d,o.tickmode=b}}i.ticks=v;for(var s=0;s<3;++s){.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var c=0;c<2;++c)i.bounds[c][s]=a.glplot.bounds[c][s]}a.contourLevels=T(v)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(t,B,G){function x(M,T){var e=[0,0,0,0],a,i;for(a=0;a<4;++a)for(i=0;i<4;++i)e[i]+=M[4*a+i]*T[a];return e}function f(M,T){var e=x(M.projection,x(M.view,x(M.model,[T[0],T[1],T[2],1])));return e}B.exports=f},{}],617:[function(t,B,G){var x=t("../../../stackgl_modules").gl_plot3d,f=x.createCamera,M=x.createScene,T=t("webgl-context"),e=t("has-passive-events"),a=t("../../registry"),i=t("../../lib"),n=i.preserveDrawingBuffer(),r=t("../../plots/cartesian/axes"),v=t("../../components/fx"),s=t("../../lib/str2rgbarray"),o=t("../../lib/show_no_webgl_msg"),b=t("./project"),g=t("./layout/convert"),d=t("./layout/spikes"),c=t("./layout/tick_marks"),m,l;function y(P,F){var I=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=F,this.id=P.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(F,F[this.id]),this.spikeOptions=d(F[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=y.prototype;u.prepareOptions=function(){var P=this,F={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!l&&(m=document.createElement("canvas"),l=T({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");F.gl=l,F.canvas=m}return F};var A=!0;u.tryCreatePlot=function(){var P=this,F=P.prepareOptions(),I=!0;try{P.glplot=M(F)}catch{if(P.staticMode||!A||n)I=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=F.glOptions.preserveDrawingBuffer=!0,P.glplot=M(F)}catch{n=F.glOptions.preserveDrawingBuffer=!1,I=!1}}}return A=!1,I},u.initializeGLCamera=function(){var P=this,F=P.fullSceneLayout.camera,I=F.projection.type==="orthographic";P.camera=f(P.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var F=P.tryCreatePlot();if(!F)return o(P);P.traces={},P.make4thDimension();var I=P.graphDiv,D=I.layout,R=function(){var z={};return P.isCameraChanged(D)&&(z[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(z[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=z[P.id+".aspectmode"]="manual")),z},O=function(z){if(z.fullSceneLayout.dragmode!==!1){var H=R();z.saveLayout(D),z.graphDiv.emit("plotly_relayout",H)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){O(P)}),P.glplot.canvas.addEventListener("wheel",function(z){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var H=z.deltaX>z.deltaY?1.1:.9090909090909091,Y=P.glplot.getAspectratio();P.glplot.setAspectratio({x:H*Y.x,y:H*Y.y,z:H*Y.z})}O(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var z=R();P.graphDiv.emit("plotly_relayouting",z)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(z){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:z,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},u.render=function(){var P=this,F=P.graphDiv,I,D=P.svgContainer,R=P.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var O=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,H=R.width*O,Y=R.height*z;D.setAttributeNS(null,"viewBox","0 0 "+H+" "+Y),D.setAttributeNS(null,"width",H),D.setAttributeNS(null,"height",Y),c(P),P.glplot.axes.update(P.axesOptions);for(var ee=Object.keys(P.traces),j=null,X=P.glplot.selection,ae=0;ae<ee.length;++ae)I=P.traces[ee[ae]],I.data.hoverinfo!=="skip"&&I.handlePick(X)&&(j=I),I.setContourLevels&&I.setContourLevels();function fe(_e,ue,ge){var xe=P.fullSceneLayout[_e+"axis"];return xe.type!=="log"&&(ue=xe.d2l(ue)),r.hoverLabelText(xe,ue,ge)}if(j!==null){var K=b(P.glplot.cameraParams,X.dataCoordinate);I=j.data;var J=F._fullData[I.index],U=X.index,V={xLabel:fe("x",X.traceCoordinate[0],I.xhoverformat),yLabel:fe("y",X.traceCoordinate[1],I.yhoverformat),zLabel:fe("z",X.traceCoordinate[2],I.zhoverformat)},q=v.castHoverinfo(J,P.fullLayout,U),re=(q||"").split("+"),Z=q&&q==="all";!J.hovertemplate&&!Z&&(re.indexOf("x")===-1&&(V.xLabel=void 0),re.indexOf("y")===-1&&(V.yLabel=void 0),re.indexOf("z")===-1&&(V.zLabel=void 0),re.indexOf("text")===-1&&(X.textLabel=void 0),re.indexOf("name")===-1&&(j.name=void 0));var Q,ie=[];I.type==="cone"||I.type==="streamtube"?(V.uLabel=fe("x",X.traceCoordinate[3],I.uhoverformat),(Z||re.indexOf("u")!==-1)&&ie.push("u: "+V.uLabel),V.vLabel=fe("y",X.traceCoordinate[4],I.vhoverformat),(Z||re.indexOf("v")!==-1)&&ie.push("v: "+V.vLabel),V.wLabel=fe("z",X.traceCoordinate[5],I.whoverformat),(Z||re.indexOf("w")!==-1)&&ie.push("w: "+V.wLabel),V.normLabel=X.traceCoordinate[6].toPrecision(3),(Z||re.indexOf("norm")!==-1)&&ie.push("norm: "+V.normLabel),I.type==="streamtube"&&(V.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(Z||re.indexOf("divergence")!==-1)&&ie.push("divergence: "+V.divergenceLabel)),X.textLabel&&ie.push(X.textLabel),Q=ie.join("<br>")):I.type==="isosurface"||I.type==="volume"?(V.valueLabel=r.hoverLabelText(P._mockAxis,P._mockAxis.d2l(X.traceCoordinate[3]),I.valuehoverformat),ie.push("value: "+V.valueLabel),X.textLabel&&ie.push(X.textLabel),Q=ie.join("<br>")):Q=X.textLabel;var oe={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:J._input,fullData:J,curveNumber:J.index,pointNumber:U};v.appendArrayPointValue(oe,J,U),I._module.eventData&&(oe=J._module.eventData(oe,X,J,{},U));var ne={points:[oe]};if(P.fullSceneLayout.hovermode){var se=[];v.loneHover({trace:J,x:(.5+.5*K[0]/K[3])*H,y:(.5-.5*K[1]/K[3])*Y,xLabel:V.xLabel,yLabel:V.yLabel,zLabel:V.zLabel,text:Q,name:j.name,color:v.castHoverOption(J,U,"bgcolor")||j.color,borderColor:v.castHoverOption(J,U,"bordercolor"),fontFamily:v.castHoverOption(J,U,"font.family"),fontSize:v.castHoverOption(J,U,"font.size"),fontColor:v.castHoverOption(J,U,"font.color"),nameLength:v.castHoverOption(J,U,"namelength"),textAlign:v.castHoverOption(J,U,"align"),hovertemplate:i.castOption(J,U,"hovertemplate"),hovertemplateLabels:i.extendFlat({},oe,V),eventData:[oe]},{container:D,gd:F,inOut_bbox:se}),oe.bbox=se[0]}X.buttons&&X.distance<5?F.emit("plotly_click",ne):F.emit("plotly_hover",ne),this.oldEventData=ne}else v.loneUnhover(D),this.oldEventData&&F.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},u.recoverContext=function(){var P=this;P.glplot.dispose();var F=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!P.initializeGLPlot()){i.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(F)};var _=["xaxis","yaxis","zaxis"];function p(P,F,I){for(var D=P.fullSceneLayout,R=0;R<3;R++){var O=_[R],z=O.charAt(0),H=D[O],Y=F[z],ee=F[z+"calendar"],j=F["_"+z+"length"];if(!i.isArrayOrTypedArray(Y))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],j-1);else for(var X,ae=0;ae<(j||Y.length);ae++)if(i.isArrayOrTypedArray(Y[ae]))for(var fe=0;fe<Y[ae].length;++fe)X=H.d2l(Y[ae][fe],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X));else X=H.d2l(Y[ae],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X))}}function w(P,F){for(var I=P.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var O=_[R],z=O.charAt(0),H=I[O],Y=0;Y<D.length;Y++){var ee=D[Y];if(ee.visible){var j=H.r2l(ee[z]);!isNaN(j)&&isFinite(j)&&(F[0][R]=Math.min(F[0][R],j),F[1][R]=Math.max(F[1][R],j))}}}u.plot=function(P,F,I){var D=this;if(D.plotArgs=[P,F,I],D.glplot.contextLost)return;var R,O,z,H,Y,ee,j=F[D.id],X=I[D.id];D.fullLayout=F,D.fullSceneLayout=j,D.axesOptions.merge(F,j),D.spikeOptions.merge(j),D.setViewport(j),D.updateFx(j.dragmode,j.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(s(j.bgcolor)),D.setConvert(Y),P?Array.isArray(P)||(P=[P]):P=[];var ae=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&p(this,R,ae);w(this,ae);var fe=[1,1,1];for(H=0;H<3;++H)ae[1][H]===ae[0][H]?fe[H]=1:fe[H]=1/(ae[1][H]-ae[0][H]);for(D.dataScale=fe,D.convertAnnotations(this),z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&(O=D.traces[R.uid],O?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),D.traces[R.uid]=O):(O=R._module.plot(this,R),D.traces[R.uid]=O),O.name=R.name);var K=Object.keys(D.traces);e:for(z=0;z<K.length;++z){for(H=0;H<P.length;++H)if(P[H].uid===K[z]&&P[H].visible===!0&&P[H]._length!==0)continue e;O=D.traces[K[z]],O.dispose(),delete D.traces[K[z]]}D.glplot.objects.sort(function(Ce,Ze){return Ce._trace.data.index-Ze._trace.data.index});var J=[[0,0,0],[0,0,0]],U={};for(z=0;z<3;++z){if(Y=j[_[z]],ee=Y.type,ee in U?(U[ee].acc*=fe[z],U[ee].count+=1):U[ee]={acc:fe[z],count:1},Y.autorange){J[0][z]=1/0,J[1][z]=-1/0;var V=D.glplot.objects,q=D.fullSceneLayout.annotations||[],re=Y._name.charAt(0);for(H=0;H<V.length;H++){var Z=V[H],Q=Z.bounds,ie=Z._trace.data._pad||0;Z.constructor.name==="ErrorBars"&&Y._lowerLogErrorBound?J[0][z]=Math.min(J[0][z],Y._lowerLogErrorBound):J[0][z]=Math.min(J[0][z],Q[0][z]/fe[z]-ie),J[1][z]=Math.max(J[1][z],Q[1][z]/fe[z]+ie)}for(H=0;H<q.length;H++){var oe=q[H];if(oe.visible){var ne=Y.r2l(oe[re]);J[0][z]=Math.min(J[0][z],ne),J[1][z]=Math.max(J[1][z],ne)}}if("rangemode"in Y&&Y.rangemode==="tozero"&&(J[0][z]=Math.min(J[0][z],0),J[1][z]=Math.max(J[1][z],0)),J[0][z]>J[1][z])J[0][z]=-1,J[1][z]=1;else{var se=J[1][z]-J[0][z];J[0][z]-=se/32,J[1][z]+=se/32}if(Y.autorange==="reversed"){var _e=J[0][z];J[0][z]=J[1][z],J[1][z]=_e}}else{var ue=Y.range;J[0][z]=Y.r2l(ue[0]),J[1][z]=Y.r2l(ue[1])}J[0][z]===J[1][z]&&(J[0][z]-=1,J[1][z]+=1),D.glplot.setBounds(z,{min:J[0][z]*fe[z],max:J[1][z]*fe[z]})}var ge,xe=j.aspectmode;if(xe==="cube")ge=[1,1,1];else if(xe==="manual"){var ye=j.aspectratio;ge=[ye.x,ye.y,ye.z]}else if(xe==="auto"||xe==="data"){var be=[1,1,1];for(z=0;z<3;++z){Y=j[_[z]],ee=Y.type;var Se=U[ee];be[z]=Math.pow(Se.acc,1/Se.count)/fe[z]}xe==="data"||Math.max.apply(null,be)/Math.min.apply(null,be)<=4?ge=be:ge=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");j.aspectratio.x=X.aspectratio.x=ge[0],j.aspectratio.y=X.aspectratio.y=ge[1],j.aspectratio.z=X.aspectratio.z=ge[2],D.glplot.setAspectratio(j.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:j.aspectratio.x,y:j.aspectratio.y,z:j.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=j.aspectmode);var Re=j.domain||null,Ve=F._size||null;if(Re&&Ve){var Ae=D.container.style;Ae.position="absolute",Ae.left=Ve.l+Re.x[0]*Ve.w+"px",Ae.top=Ve.t+(1-Re.y[1])*Ve.h+"px",Ae.width=Ve.w*(Re.x[1]-Re.x[0])+"px",Ae.height=Ve.h*(Re.y[1]-Re.y[0])+"px"}D.glplot.redraw()},u.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function h(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}u.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},u.setViewport=function(P){var F=this,I=P.camera;F.camera.lookAt.apply(this,h(I)),F.glplot.setAspectratio(P.aspectratio);var D=I.projection.type==="orthographic",R=F.camera._ortho;D!==R&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},u.isCameraChanged=function(P){var F=this,I=F.getCamera(),D=i.nestedProperty(P,F.id+".camera"),R=D.get();function O(ee,j,X,ae){var fe=["up","center","eye"],K=["x","y","z"];return j[fe[X]]&&ee[fe[X]][K[ae]]===j[fe[X]][K[ae]]}var z=!1;if(R===void 0)z=!0;else{for(var H=0;H<3;H++)for(var Y=0;Y<3;Y++)if(!O(I,R,H,Y)){z=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(z=!0)}return z},u.isAspectChanged=function(P){var F=this,I=F.glplot.getAspectratio(),D=i.nestedProperty(P,F.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},u.saveLayout=function(P){var F=this,I=F.fullLayout,D,R,O,z,H,Y,ee=F.isCameraChanged(P),j=F.isAspectChanged(P),X=ee||j;if(X){var ae={};if(ee&&(D=F.getCamera(),R=i.nestedProperty(P,F.id+".camera"),O=R.get(),ae[F.id+".camera"]=O),j&&(z=F.glplot.getAspectratio(),H=i.nestedProperty(P,F.id+".aspectratio"),Y=H.get(),ae[F.id+".aspectratio"]=Y),a.call("_storeDirectGUIEdit",P,I._preGUI,ae),ee){R.set(D);var fe=i.nestedProperty(I,F.id+".camera");fe.set(D)}if(j){H.set(z);var K=i.nestedProperty(I,F.id+".aspectratio");K.set(z),F.glplot.redraw()}}return X},u.updateFx=function(P,F){var I=this,D=I.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,O=R._fullLayout,z=I.fullSceneLayout.camera,H=z.up.x,Y=z.up.y,ee=z.up.z;if(ee/Math.sqrt(H*H+Y*Y+ee*ee)<.999){var j=I.id+".camera.up",X={x:0,y:0,z:1},ae={};ae[j]=X;var fe=R.layout;a.call("_storeDirectGUIEdit",fe,O._preGUI,ae),z.up=X,i.nestedProperty(fe,j).set(X)}}else D.keyBindingMode=P;I.fullSceneLayout.hovermode=F};function E(P,F,I){for(var D=0,R=I-1;D<R;++D,--R)for(var O=0;O<F;++O)for(var z=0;z<4;++z){var H=4*(F*D+O)+z,Y=4*(F*R+O)+z,ee=P[H];P[H]=P[Y],P[Y]=ee}}function S(P,F,I){for(var D=0;D<I;++D)for(var R=0;R<F;++R){var O=4*(F*D+R),z=P[O+3];if(z>0)for(var H=255/z,Y=0;Y<3;++Y)P[O+Y]=Math.min(H*P[O+Y],255)}}u.toImage=function(P){var F=this;P||(P="png"),F.staticMode&&F.container.appendChild(m),F.glplot.redraw();var I=F.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,O),E(O,D,R),S(O,D,R);var z=document.createElement("canvas");z.width=D,z.height=R;var H=z.getContext("2d",{willReadFrequently:!0}),Y=H.createImageData(D,R);Y.data.set(O),H.putImageData(Y,0,0);var ee;switch(P){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(m),ee},u.setConvert=function(){for(var P=this,F=0;F<3;F++){var I=P.fullSceneLayout[_[F]];r.setConvert(I,P.fullLayout),I.setScale=i.noop}},u.make4thDimension=function(){var P=this,F=P.graphDiv,I=F._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(P._mockAxis,I)},B.exports=y},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(t,B,G){B.exports=function(f,M,T,e){e=e||f.length;for(var a=new Array(e),i=0;i<e;i++)a[i]=[f[i],M[i],T[i]];return a}},{}],619:[function(t,B,G){var x=t("./font_attributes"),f=t("./animation_attributes"),M=t("../components/color/attributes"),T=t("../components/shapes/draw_newshape/attributes"),e=t("../components/selections/draw_newselection/attributes"),a=t("./pad_attributes"),i=t("../lib/extend").extendFlat,n=x({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=M.defaultLine,B.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:x({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:M.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:M.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:M.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},f.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:x({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(t,B,G){var x=t("../../lib/sort_object_keys"),f="1.10.1",M='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',M].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),i={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:M,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=x(i);B.exports={requiredVersion:f,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:i,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+f+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){var e=M.split(" "),a=e[0],i=e[1],n=x.isArrayOrTypedArray(T)?x.mean(T):T,r=.5+n/100,v=1.5+n/100,s=["",""],o=[0,0];switch(a){case"top":s[0]="top",o[1]=-v;break;case"bottom":s[0]="bottom",o[1]=v;break}switch(i){case"left":s[1]="right",o[0]=-r;break;case"right":s[1]="left",o[0]=r;break}var b;return s[0]&&s[1]?b=s.join("-"):s[0]?b=s[0]:s[1]?b=s[1]:b="center",{anchor:b,offset:o}}},{"../../lib":515}],622:[function(t,B,G){var x=t("mapbox-gl/dist/mapbox-gl-unminified"),f=t("../../lib"),M=f.strTranslate,T=f.strScale,e=t("../../plots/get_data").getSubplotCalcData,a=t("../../constants/xmlns_namespaces"),i=t("@plotly/d3"),n=t("../../components/drawing"),r=t("../../lib/svg_text_utils"),v=t("./mapbox"),s="mapbox",o=G.constants=t("./constants");G.name=s,G.attr="subplot",G.idRoot=s,G.idRegex=G.attrRegex=f.counterRegex(s),G.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},G.layoutAttributes=t("./layout_attributes"),G.supplyLayoutDefaults=t("./layout_defaults"),G.plot=function(c){var m=c._fullLayout,l=c.calcdata,y=m._subplots[s];if(x.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var u=b(c,y);x.accessToken=u;for(var A=0;A<y.length;A++){var _=y[A],p=e(l,s,_),w=m[_],h=w._subplot;h||(h=new v(c,_),m[_]._subplot=h),h.viewInitial||(h.viewInitial={center:f.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),h.plot(p,m,c._promises)}},G.clean=function(d,c,m,l){for(var y=l._subplots[s]||[],u=0;u<y.length;u++){var A=y[u];!c[A]&&!!l[A]._subplot&&l[A]._subplot.destroy()}},G.toSVG=function(d){for(var c=d._fullLayout,m=c._subplots[s],l=c._size,y=0;y<m.length;y++){var u=c[m[y]],A=u.domain,_=u._subplot,p=_.toImage("png"),w=c._glimages.append("svg:image");w.attr({xmlns:a.svg,"xlink:href":p,x:l.l+l.w*A.x[0],y:l.t+l.h*(1-A.y[1]),width:l.w*(A.x[1]-A.x[0]),height:l.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});var h=i.select(u._subplot.div),L=h.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var E=c._glimages.append("g");E.attr("transform",M(l.l+l.w*A.x[0]+10,l.t+l.h*(1-A.y[0])-31)),E.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),E.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),E.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),E.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var S=h.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=c._glimages.append("g"),F=P.append("text");F.text(S).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":S});var I=n.bBox(F.node()),D=l.w*(A.x[1]-A.x[0]);if(I.width>D/2){var R=S.split("|").join("<br>");F.text(R).attr("data-unformatted",R).call(r.convertToTspans,d),I=n.bBox(F.node())}F.attr("transform",M(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>D&&(O=D/(I.width+6));var z=[l.l+l.w*A.x[1],l.t+l.h*(1-A.y[0])];P.attr("transform",M(z[0],z[1])+T(O))}};function b(d,c){var m=d._fullLayout,l=d._context;if(l.mapboxAccessToken==="")return"";for(var y=[],u=[],A=!1,_=!1,p=0;p<c.length;p++){var w=m[c[p]],h=w.accesstoken;g(w.style)&&(h?f.pushUnique(y,h):(g(w._input.style)&&(f.error("Uses Mapbox map style, but did not set an access token."),A=!0),_=!0)),h&&f.pushUnique(u,h)}if(_){var L=A?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw f.error(L),new Error(L)}return y.length?(y.length>1&&f.warn(o.multipleTokensErrorMsg),y[0]):(u.length&&f.log(["Listed mapbox access token(s)",u.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function g(d){return typeof d=="string"&&(o.styleValuesMapbox.indexOf(d)!==-1||d.indexOf("mapbox://")===0)}G.updateFx=function(d){for(var c=d._fullLayout,m=c._subplots[s],l=0;l<m.length;l++){var y=c[m[l]]._subplot;y.updateFx(c)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(t,B,G){var x=t("../../lib"),f=t("../../lib/svg_text_utils").sanitizeHTML,M=t("./convert_text_opts"),T=t("./constants");function e(v,s){this.subplot=v,this.uid=v.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=i(s)},a.needsNewImage=function(v){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&v.sourcetype==="image"&&(this.source!==v.source||JSON.stringify(this.coordinates)!==JSON.stringify(v.coordinates))},a.needsNewSource=function(v){return this.sourceType!==v.sourcetype||JSON.stringify(this.source)!==JSON.stringify(v.source)||this.layerType!==v.type},a.needsNewLayer=function(v){return this.layerType!==v.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(v){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:v.source,coordinates:v.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},a.updateSource=function(v){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=v.sourcetype,this.source=v.source,!!i(v)){var o=r(v);s.addSource(this.idSource,o)}},a.findFollowingMapboxLayerId=function(v){if(v==="traces")for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var b=s[o].id;if(typeof b=="string"&&b.indexOf(T.traceLayerPrefix)===0){v=b;break}}return v},a.updateLayer=function(v){var s=this.subplot,o=n(v),b=this.lookupBelow(),g=this.findFollowingMapboxLayerId(b);this.removeLayer(),i(v)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":v.sourcelayer||"",type:v.type,minzoom:v.minzoom,maxzoom:v.maxzoom,layout:o.layout,paint:o.paint},g),this.layerType=v.type,this.below=b},a.updateStyle=function(v){if(i(v)){var s=n(v);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},a.removeLayer=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer)},a.dispose=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer),v.getSource(this.idSource)&&v.removeSource(this.idSource)};function i(v){if(!v.visible)return!1;var s=v.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if(typeof s[o]!="string"||s[o].length===0)return!1;return!0}return x.isPlainObject(s)||typeof s=="string"&&s.length>0}function n(v){var s={},o={};switch(v.type){case"circle":x.extendFlat(o,{"circle-radius":v.circle.radius,"circle-color":v.color,"circle-opacity":v.opacity});break;case"line":x.extendFlat(o,{"line-width":v.line.width,"line-color":v.color,"line-opacity":v.opacity,"line-dasharray":v.line.dash});break;case"fill":x.extendFlat(o,{"fill-color":v.color,"fill-outline-color":v.fill.outlinecolor,"fill-opacity":v.opacity});break;case"symbol":var b=v.symbol,g=M(b.textposition,b.iconsize);x.extendFlat(s,{"icon-image":b.icon+"-15","icon-size":b.iconsize/10,"text-field":b.text,"text-size":b.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":b.placement}),x.extendFlat(o,{"icon-color":v.color,"text-color":b.textfont.color,"text-opacity":v.opacity});break;case"raster":x.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":v.opacity});break}return{layout:s,paint:o}}function r(v){var s=v.sourcetype,o=v.source,b={type:s},g;return s==="geojson"?g="data":s==="vector"?g=typeof o=="string"?"url":"tiles":s==="raster"?(g="tiles",b.tileSize=256):s==="image"&&(g="url",b.coordinates=v.coordinates),b[g]=o,v.sourceattribution&&(b.attribution=f(v.sourceattribution)),b}B.exports=function(s,o,b){var g=new e(s,o);return g.update(b),g}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color").defaultLine,M=t("../domain").attributes,T=t("../font_attributes"),e=t("../../traces/scatter/attributes").textposition,a=t("../../plot_api/edit_types").overrideAll,i=t("../../plot_api/plot_template").templatedArray,n=t("./constants"),r=T({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var v=B.exports=a({_arrayAttrRegexps:[x.counterRegex("mapbox",".layers",!0)],domain:M({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:f},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:f}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:x.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");v.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(t,B,G){var x=t("../../lib"),f=t("../subplot_defaults"),M=t("../array_container_defaults"),T=t("./layout_attributes");B.exports=function(n,r,v){f(n,r,v,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:r._mapboxAccessToken})};function e(i,n,r,v){r("accesstoken",v.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var s=r("bounds.west"),o=r("bounds.east"),b=r("bounds.south"),g=r("bounds.north");(s===void 0||o===void 0||b===void 0||g===void 0)&&delete n.bounds,M(i,n,{name:"layers",handleItemDefaults:a}),n._input=i}function a(i,n){function r(d,c){return x.coerce(i,n,T.layers,d,c)}var v=r("visible");if(v){var s=r("sourcetype"),o=s==="raster"||s==="image";r("source"),r("sourceattribution"),s==="vector"&&r("sourcelayer"),s==="image"&&r("coordinates");var b;o&&(b="raster");var g=r("type",b);o&&g!=="raster"&&(g=n.type="raster",x.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),g==="circle"&&r("circle.radius"),g==="line"&&(r("line.width"),r("line.dash")),g==="fill"&&r("fill.outlinecolor"),g==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),x.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(t,B,G){var x=t("mapbox-gl/dist/mapbox-gl-unminified"),f=t("../../lib"),M=t("../../lib/geo_location_utils"),T=t("../../registry"),e=t("../cartesian/axes"),a=t("../../components/dragelement"),i=t("../../components/fx"),n=t("../../components/dragelement/helpers"),r=n.drawMode,v=n.selectMode,s=t("../../components/selections").prepSelect,o=t("../../components/selections").clearOutline,b=t("../../components/selections").clearSelectionsCache,g=t("../../components/selections").selectOnClick,d=t("./constants"),c=t("./layers");function m(p,w){this.id=w,this.gd=p;var h=p._fullLayout,L=p._context;this.container=h._glcontainer.node(),this.isStatic=L.staticPlot,this.uid=h._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(h),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var l=m.prototype;l.plot=function(p,w,h){var L=this,E=w[L.id];L.map&&E.accesstoken!==L.accessToken&&(L.map.remove(),L.map=null,L.styleObj=null,L.traceHash={},L.layerList=[]);var S;L.map?S=new Promise(function(P,F){L.updateMap(p,w,P,F)}):S=new Promise(function(P,F){L.createMap(p,w,P,F)}),h.push(S)},l.createMap=function(p,w,h,L){var E=this,S=w[E.id],P=E.styleObj=u(S.style);E.accessToken=S.accesstoken;var F=S.bounds,I=F?[[F.west,F.south],[F.east,F.north]]:null,D=E.map=new x.Map({container:E.div,style:P.style,center:_(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new x.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",E.rejectOnError(L),E.isStatic||E.initFx(p,w);var R=[];R.push(new Promise(function(O){D.once("load",O)})),R=R.concat(M.fetchTraceGeoData(p)),Promise.all(R).then(function(){E.fillBelowLookup(p,w),E.updateData(p),E.updateLayout(w),E.resolveOnRender(h)}).catch(L)},l.updateMap=function(p,w,h,L){var E=this,S=E.map,P=w[this.id];E.rejectOnError(L);var F=[],I=u(P.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,S.setStyle(I.style),E.traceHash={},F.push(new Promise(function(D){S.once("styledata",D)}))),F=F.concat(M.fetchTraceGeoData(p)),Promise.all(F).then(function(){E.fillBelowLookup(p,w),E.updateData(p),E.updateLayout(w),E.resolveOnRender(h)}).catch(L)},l.fillBelowLookup=function(p,w){var h=w[this.id],L=h.layers,E,S,P=this.belowLookup={},F=!1;for(E=0;E<p.length;E++){var I=p[E][0].trace,D=I._module;typeof I.below=="string"?S=I.below:D.getBelow&&(S=D.getBelow(I,this)),S===""&&(F=!0),P["trace-"+I.uid]=S||""}for(E=0;E<L.length;E++){var R=L[E];typeof R.below=="string"?S=R.below:F?S="traces":S="",P["layout-"+E]=S}var O={},z,H;for(z in P)S=P[z],O[S]?O[S].push(z):O[S]=[z];for(S in O){var Y=O[S];if(Y.length>1)for(E=0;E<Y.length;E++)z=Y[E],z.indexOf("trace-")===0?(H=z.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):z.indexOf("layout-")===0&&(H=z.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};l.updateData=function(p){var w=this.traceHash,h,L,E,S,P=p.slice().sort(function(O,z){return y[O[0].trace.type]-y[z[0].trace.type]});for(E=0;E<P.length;E++){var F=P[E];L=F[0].trace,h=w[L.uid];var I=!1;h&&(h.type===L.type?(h.update(F),I=!0):h.dispose()),!I&&L._module&&(w[L.uid]=L._module.plot(this,F))}var D=Object.keys(w);e:for(E=0;E<D.length;E++){var R=D[E];for(S=0;S<p.length;S++)if(L=p[S][0].trace,R===L.uid)continue e;h=w[R],h.dispose(),delete w[R]}},l.updateLayout=function(p){var w=this.map,h=p[this.id];!this.dragging&&!this.wheeling&&(w.setCenter(_(h.center)),w.setZoom(h.zoom),w.setBearing(h.bearing),w.setPitch(h.pitch)),this.updateLayers(p),this.updateFramework(p),this.updateFx(p),this.map.resize(),this.gd._context._scrollZoom.mapbox?w.scrollZoom.enable():w.scrollZoom.disable()},l.resolveOnRender=function(p){var w=this.map;w.on("render",function h(){w.loaded()&&(w.off("render",h),setTimeout(p,10))})},l.rejectOnError=function(p){var w=this.map;function h(){p(new Error(d.mapOnErrorMsg))}w.once("error",h),w.once("style.error",h),w.once("source.error",h),w.once("tile.error",h),w.once("layer.error",h)},l.createFramework=function(p){var w=this,h=w.div=document.createElement("div");h.id=w.uid,h.style.position="absolute",w.container.appendChild(h),w.xaxis={_id:"x",c2p:function(L){return w.project(L).x}},w.yaxis={_id:"y",c2p:function(L){return w.project(L).y}},w.updateFramework(p),w.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(w.mockAxis,p)},l.initFx=function(p,w){var h=this,L=h.gd,E=h.map;E.on("moveend",function(F){if(!!h.map){var I=L._fullLayout;if(F.originalEvent||h.wheeling){var D=I[h.id];T.call("_storeDirectGUIEdit",L.layout,I._preGUI,h.getViewEdits(D));var R=h.getView();D._input.center=D.center=R.center,D._input.zoom=D.zoom=R.zoom,D._input.bearing=D.bearing=R.bearing,D._input.pitch=D.pitch=R.pitch,L.emit("plotly_relayout",h.getViewEditsWithDerived(R))}F.originalEvent&&F.originalEvent.type==="mouseup"?h.dragging=!1:h.wheeling&&(h.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){h.wheeling=!0}),E.on("mousemove",function(F){var I=h.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},h.xaxis.p2c=function(){return E.unproject(D).lng},h.yaxis.p2c=function(){return E.unproject(D).lat},L._fullLayout._rehover=function(){L._fullLayout._hoversubplot===h.id&&L._fullLayout[h.id]&&i.hover(L,F,h.id)},i.hover(L,F,h.id),L._fullLayout._hoversubplot=h.id});function S(){i.loneUnhover(w._hoverlayer)}E.on("dragstart",function(){h.dragging=!0,S()}),E.on("zoomstart",S),E.on("mouseout",function(){L._fullLayout._hoversubplot=null});function P(){var F=h.getView();L.emit("plotly_relayouting",h.getViewEditsWithDerived(F))}E.on("drag",P),E.on("zoom",P),E.on("dblclick",function(){var F=L._fullLayout[h.id];T.call("_storeDirectGUIEdit",L.layout,L._fullLayout._preGUI,h.getViewEdits(F));var I=h.viewInitial;E.setCenter(_(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var D=h.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,L.emit("plotly_doubleclick",null),L.emit("plotly_relayout",h.getViewEditsWithDerived(D))}),h.clearOutline=function(){b(h.dragOptions),o(h.dragOptions.gd)},h.onClickInPanFn=function(F){return function(I){var D=L._fullLayout.clickmode;D.indexOf("select")>-1&&g(I.originalEvent,L,[h.xaxis],[h.yaxis],h.id,F),D.indexOf("event")>-1&&i.click(L,I.originalEvent)}}},l.updateFx=function(p){var w=this,h=w.map,L=w.gd;if(w.isStatic)return;function E(I){var D=w.map.unproject(I);return[D.lng,D.lat]}var S=p.dragmode,P;P=function(I,D){if(D.isRect){var R=I.range={};R[w.id]=[E([D.xmin,D.ymin]),E([D.xmax,D.ymax])]}else{var O=I.lassoPoints={};O[w.id]=D.map(E)}};var F=w.dragOptions;w.dragOptions=f.extendDeep(F||{},{dragmode:p.dragmode,element:w.div,gd:L,plotinfo:{id:w.id,domain:p[w.id].domain,xaxis:w.xaxis,yaxis:w.yaxis,fillRangeItems:P},xaxes:[w.xaxis],yaxes:[w.yaxis],subplot:w.id}),h.off("click",w.onClickInPanHandler),v(S)||r(S)?(h.dragPan.disable(),h.on("zoomstart",w.clearOutline),w.dragOptions.prepFn=function(I,D,R){s(I,D,R,w.dragOptions,S)},a.init(w.dragOptions)):(h.dragPan.enable(),h.off("zoomstart",w.clearOutline),w.div.onmousedown=null,w.div.ontouchstart=null,w.div.removeEventListener("touchstart",w.div._ontouchstart),w.onClickInPanHandler=w.onClickInPanFn(w.dragOptions),h.on("click",w.onClickInPanHandler))},l.updateFramework=function(p){var w=p[this.id].domain,h=p._size,L=this.div.style;L.width=h.w*(w.x[1]-w.x[0])+"px",L.height=h.h*(w.y[1]-w.y[0])+"px",L.left=h.l+w.x[0]*h.w+"px",L.top=h.t+(1-w.y[1])*h.h+"px",this.xaxis._offset=h.l+w.x[0]*h.w,this.xaxis._length=h.w*(w.x[1]-w.x[0]),this.yaxis._offset=h.t+(1-w.y[1])*h.h,this.yaxis._length=h.h*(w.y[1]-w.y[0])},l.updateLayers=function(p){var w=p[this.id],h=w.layers,L=this.layerList,E;if(h.length!==L.length){for(E=0;E<L.length;E++)L[E].dispose();for(L=this.layerList=[],E=0;E<h.length;E++)L.push(c(this,E,h[E]))}else for(E=0;E<h.length;E++)L[E].update(h[E])},l.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},l.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},l.setOptions=function(p,w,h){for(var L in h)this.map[w](p,L,h[L])},l.getMapLayers=function(){return this.map.getStyle().layers},l.addLayer=function(p,w){var h=this.map;if(typeof w=="string"){if(w===""){h.addLayer(p,w);return}for(var L=this.getMapLayers(),E=0;E<L.length;E++)if(w===L[E].id){h.addLayer(p,w);return}f.warn(["Trying to add layer with *below* value",w,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}h.addLayer(p)},l.project=function(p){return this.map.project(new x.LngLat(p[0],p[1]))},l.getView=function(){var p=this.map,w=p.getCenter(),h=w.lng,L=w.lat,E={lon:h,lat:L},S=p.getCanvas(),P=parseInt(S.style.width),F=parseInt(S.style.height);return{center:E,zoom:p.getZoom(),bearing:p.getBearing(),pitch:p.getPitch(),_derived:{coordinates:[p.unproject([0,0]).toArray(),p.unproject([P,0]).toArray(),p.unproject([P,F]).toArray(),p.unproject([0,F]).toArray()]}}},l.getViewEdits=function(p){for(var w=this.id,h=["center","zoom","bearing","pitch"],L={},E=0;E<h.length;E++){var S=h[E];L[w+"."+S]=p[S]}return L},l.getViewEditsWithDerived=function(p){var w=this.id,h=this.getViewEdits(p);return h[w+"._derived"]=p._derived,h};function u(p){var w={};return f.isPlainObject(p)?(w.id=p.id,w.style=p):typeof p=="string"?(w.id=p,d.styleValuesMapbox.indexOf(p)!==-1?w.style=A(p):d.stylesNonMapbox[p]?w.style=d.stylesNonMapbox[p]:w.style=p):(w.id=d.styleValueDflt,w.style=A(d.styleValueDflt)),w.transition={duration:0,delay:0},w}function A(p){return d.styleUrlPrefix+p+"-"+d.styleUrlSuffix}function _(p){return[p.lon,p.lat]}B.exports=m},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(t,B,G){B.exports=function(x){var f=x.editType;return{t:{valType:"number",dflt:0,editType:f},r:{valType:"number",dflt:0,editType:f},b:{valType:"number",dflt:0,editType:f},l:{valType:"number",dflt:0,editType:f},editType:f}}},{}],628:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-time-format").timeFormatLocale,M=t("d3-format").formatLocale,T=t("fast-isnumeric"),e=t("../registry"),a=t("../plot_api/plot_schema"),i=t("../plot_api/plot_template"),n=t("../lib"),r=t("../components/color"),v=t("../constants/numerical").BADNUM,s=t("./cartesian/axis_ids"),o=t("../components/shapes/handle_outline").clearOutline,b=t("./animation_attributes"),g=t("./frame_attributes"),d=t("../plots/get_data").getModuleCalcData,c=n.relinkPrivateKeys,m=n._,l=B.exports={};n.extendFlat(l,e),l.attributes=t("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=t("./font_attributes"),l.layoutAttributes=t("./layout_attributes"),l.fontWeight="normal";var y=l.transformsRegistry,u=t("./command");l.executeAPICommand=u.executeAPICommand,l.computeAPICommandBindings=u.computeAPICommandBindings,l.manageCommandObserver=u.manageCommandObserver,l.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,l.redrawText=function(K){return K=n.getGraphDiv(K),new Promise(function(J){setTimeout(function(){!K._fullLayout||(e.getComponentMethod("annotations","draw")(K),e.getComponentMethod("legend","draw")(K),e.getComponentMethod("colorbar","draw")(K),J(l.previousPromises(K)))},300)})},l.resize=function(K){K=n.getGraphDiv(K);var J,U=new Promise(function(V,q){(!K||n.isHidden(K))&&q(new Error("Resize must be passed a displayed plot div element.")),K._redrawTimer&&clearTimeout(K._redrawTimer),K._resolveResize&&(J=K._resolveResize),K._resolveResize=V,K._redrawTimer=setTimeout(function(){if(!K.layout||K.layout.width&&K.layout.height||n.isHidden(K)){V(K);return}delete K.layout.width,delete K.layout.height;var re=K.changed;K.autoplay=!0,e.call("relayout",K,{autosize:!0}).then(function(){K.changed=re,K._resolveResize===V&&(delete K._resolveResize,V(K))})},100)});return J&&J(U),U},l.previousPromises=function(K){if((K._promises||[]).length)return Promise.all(K._promises).then(function(){K._promises=[]})},l.addLinks=function(K){if(!(!K._context.showLink&&!K._context.showSources)){var J=K._fullLayout,U=n.ensureSingle(J._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var oe=x.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),V=U.node(),q={y:J._paper.attr("height")-9};document.body.contains(V)&&V.getComputedTextLength()>=J.width-20?(q["text-anchor"]="start",q.x=5):(q["text-anchor"]="end",q.x=J._paper.attr("width")-7),U.attr(q);var re=U.select(".js-link-to-tool"),Z=U.select(".js-link-spacer"),Q=U.select(".js-sourcelinks");K._context.showSources&&K._context.showSources(K),K._context.showLink&&A(K,re),Z.text(re.text()&&Q.text()?" - ":"")}};function A(K,J){J.text("");var U=J.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" "+String.fromCharCode(187));if(K._context.sendData)U.on("click",function(){l.sendDataToCloud(K)});else{var V=window.location.pathname.split("/"),q=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+V[2].split(".")[0]+"/"+V[1]+q})}}l.sendDataToCloud=function(K){var J=(window.PLOTLYENV||{}).BASE_URL||K._context.plotlyServerURL;if(!!J){K.emit("plotly_beforeexport");var U=x.select(K).append("div").attr("id","hiddenform").style("display","none"),V=U.append("form").attr({action:J+"/external",method:"post",target:"_blank"}),q=V.append("input").attr({type:"text",name:"data"});return q.node().value=l.graphJson(K,!1,"keepdata"),V.node().submit(),U.remove(),K.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],p=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(K,J){var U=J&&J.skipUpdateCalc,V=K._fullLayout||{};if(V._skipDefaults){delete V._skipDefaults;return}var q=K._fullLayout={},re=K.layout||{},Z=K._fullData||[],Q=K._fullData=[],ie=K.data||[],oe=K.calcdata||[],ne=K._context||{},se;K._transitionData||l.createTransitionData(K),q._dfltTitle={plot:m(K,"Click to enter Plot title"),x:m(K,"Click to enter X axis title"),y:m(K,"Click to enter Y axis title"),colorbar:m(K,"Click to enter Colorscale title"),annotation:m(K,"new text")},q._traceWord=m(K,"trace");var _e=L(K,_);if(q._mapboxAccessToken=ne.mapboxAccessToken,V._initialAutoSizeIsDone){var ue=V.width,ge=V.height;l.supplyLayoutGlobalDefaults(re,q,_e),re.width||(q.width=ue),re.height||(q.height=ge),l.sanitizeMargins(q)}else{l.supplyLayoutGlobalDefaults(re,q,_e);var xe=!re.width||!re.height,ye=q.autosize,be=ne.autosizable,Se=xe&&(ye||be);Se?l.plotAutoSize(K,re,q):xe&&l.sanitizeMargins(q),!ye&&xe&&(re.width=q.width,re.height=q.height)}q._d3locale=E(_e,q.separators),q._extraFormat=L(K,p),q._initialAutoSizeIsDone=!0,q._dataLength=ie.length,q._modules=[],q._visibleModules=[],q._basePlotModules=[];var Re=q._subplots=h(),Ve=q._splomAxes={x:{},y:{}},Ae=q._splomSubplots={};q._splomGridDflt={},q._scatterStackOpts={},q._firstScatter={},q._alignmentOpts={},q._colorAxes={},q._requestRangeslider={},q._traceUids=w(Z,ie),q._globalTransforms=(K._context||{}).globalTransforms,l.supplyDataDefaults(ie,Q,re,q);var Ce=Object.keys(Ve.x),Ze=Object.keys(Ve.y);if(Ce.length>1&&Ze.length>1){for(e.getComponentMethod("grid","sizeDefaults")(re,q),se=0;se<Ce.length;se++)n.pushUnique(Re.xaxis,Ce[se]);for(se=0;se<Ze.length;se++)n.pushUnique(Re.yaxis,Ze[se]);for(var Ye in Ae)n.pushUnique(Re.cartesian,Ye)}if(q._has=l._hasPlotType.bind(q),Z.length===Q.length)for(se=0;se<Q.length;se++)c(Q[se],Z[se]);l.supplyLayoutModuleDefaults(re,q,Q,K._transitionData);var ze=q._visibleModules,Ie=[];for(se=0;se<ze.length;se++){var Ge=ze[se].crossTraceDefaults;Ge&&n.pushUnique(Ie,Ge)}for(se=0;se<Ie.length;se++)Ie[se](Q,q);q._hasOnlyLargeSploms=q._basePlotModules.length===1&&q._basePlotModules[0].name==="splom"&&Ce.length>15&&Ze.length>15&&q.shapes.length===0&&q.images.length===0,l.linkSubplots(Q,q,Z,V),l.cleanPlot(Q,q,Z,V);var dt=!!(V._has&&V._has("gl2d")),Rt=!!(q._has&&q._has("gl2d")),Qt=!!(V._has&&V._has("cartesian")),Bt=!!(q._has&&q._has("cartesian")),Ct=Qt||dt,Kt=Bt||Rt;Ct&&!Kt?V._bgLayer.remove():Kt&&!Ct&&(q._shouldCreateBgLayer=!0),V._zoomlayer&&!K._dragging&&o({_fullLayout:V}),S(Q,q),c(q,V),e.getComponentMethod("colorscale","crossTraceDefaults")(Q,q),q._preGUI||(q._preGUI={}),q._tracePreGUI||(q._tracePreGUI={});var Ot=q._tracePreGUI,St={},Xe;for(Xe in Ot)St[Xe]="old";for(se=0;se<Q.length;se++)Xe=Q[se]._fullInput.uid,St[Xe]||(Ot[Xe]={}),St[Xe]="new";for(Xe in St)St[Xe]==="old"&&delete Ot[Xe];R(q),e.getComponentMethod("rangeslider","makeData")(q),!U&&oe.length===Q.length&&l.supplyDefaultsUpdateCalc(oe,Q)},l.supplyDefaultsUpdateCalc=function(K,J){for(var U=0;U<J.length;U++){var V=J[U],q=(K[U]||[])[0];if(q&&q.trace){var re=q.trace;if(re._hasCalcTransform){var Z=re._arrayAttrs,Q,ie,oe;for(Q=0;Q<Z.length;Q++)ie=Z[Q],oe=n.nestedProperty(re,ie).get().slice(),n.nestedProperty(V,ie).set(oe)}q.trace=V}}};function w(K,J){var U=J.length,V=[],q,re;for(q=0;q<K.length;q++){var Z=K[q]._fullInput;Z!==re&&V.push(Z),re=Z}var Q=V.length,ie=new Array(U),oe={};function ne(ue,ge){ie[ge]=ue,oe[ue]=1}function se(ue,ge){if(ue&&typeof ue=="string"&&!oe[ue])return ne(ue,ge),!0}for(q=0;q<U;q++){var _e=J[q].uid;typeof _e=="number"&&(_e=String(_e)),!se(_e,q)&&(q<Q&&se(V[q].uid,q)||ne(n.randstr(oe),q))}return ie}function h(){var K=e.collectableSubplotTypes,J={},U,V;if(!K){K=[];var q=e.subplotsRegistry;for(var re in q){var Z=q[re],Q=Z.attr;if(Q&&(K.push(re),Array.isArray(Q)))for(V=0;V<Q.length;V++)n.pushUnique(K,Q[V])}}for(U=0;U<K.length;U++)J[K[U]]=[];return J}function L(K,J){var U=K._context.locale;U||(U="en-US");var V=!1,q={};function re(se){for(var _e=!0,ue=0;ue<J.length;ue++){var ge=J[ue];q[ge]||(se[ge]?q[ge]=se[ge]:_e=!1)}_e&&(V=!0)}for(var Z=0;Z<2;Z++){for(var Q=K._context.locales,ie=0;ie<2;ie++){var oe=(Q[U]||{}).format;if(oe&&(re(oe),V))break;Q=e.localeRegistry}var ne=U.split("-")[0];if(V||ne===U)break;U=ne}return V||re(e.localeRegistry.en.format),q}function E(K,J){return K.decimal=J.charAt(0),K.thousands=J.charAt(1),{numberFormat:function(U){try{U=M(K).format(n.adjustFormat(U))}catch{return n.warnBadFormat(U),n.noFormat}return U},timeFormat:f(K).utcFormat}}function S(K,J){var U,V=[];J.meta&&(U=J._meta={meta:J.meta,layout:{meta:J.meta}});for(var q=0;q<K.length;q++){var re=K[q];re.meta?V[re.index]=re._meta={meta:re.meta}:J.meta&&(re._meta={meta:J.meta}),J.meta&&(re._meta.layout={meta:J.meta})}V.length&&(U||(U=J._meta={}),U.data=V)}l.createTransitionData=function(K){K._transitionData||(K._transitionData={}),K._transitionData._frames||(K._transitionData._frames=[]),K._transitionData._frameHash||(K._transitionData._frameHash={}),K._transitionData._counter||(K._transitionData._counter=0),K._transitionData._interruptCallbacks||(K._transitionData._interruptCallbacks=[])},l._hasPlotType=function(K){var J,U=this._basePlotModules||[];for(J=0;J<U.length;J++)if(U[J].name===K)return!0;var V=this._modules||[];for(J=0;J<V.length;J++){var q=V[J].name;if(q===K)return!0;var re=e.modules[q];if(re&&re.categories[K])return!0}return!1},l.cleanPlot=function(K,J,U,V){var q,re,Z=V._basePlotModules||[];for(q=0;q<Z.length;q++){var Q=Z[q];Q.clean&&Q.clean(K,J,U,V)}var ie=V._has&&V._has("gl"),oe=J._has&&J._has("gl");ie&&!oe&&V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.selectAll(".no-webgl").remove(),V._glcanvas=null);var ne=!!V._infolayer;e:for(q=0;q<U.length;q++){var se=U[q],_e=se.uid;for(re=0;re<K.length;re++){var ue=K[re];if(_e===ue.uid)continue e}ne&&V._infolayer.select(".cb"+_e).remove()}},l.linkSubplots=function(K,J,U,V){var q,re,Z=V._plots||{},Q=J._plots={},ie=J._subplots,oe={_fullData:K,_fullLayout:J},ne=ie.cartesian.concat(ie.gl2d||[]);for(q=0;q<ne.length;q++){var se=ne[q],_e=Z[se],ue=s.getFromId(oe,se,"x"),ge=s.getFromId(oe,se,"y"),xe;for(_e?xe=Q[se]=_e:(xe=Q[se]={},xe.id=se),ue._counterAxes.push(ge._id),ge._counterAxes.push(ue._id),ue._subplotsWith.push(se),ge._subplotsWith.push(se),xe.xaxis=ue,xe.yaxis=ge,xe._hasClipOnAxisFalse=!1,re=0;re<K.length;re++){var ye=K[re];if(ye.xaxis===xe.xaxis._id&&ye.yaxis===xe.yaxis._id&&ye.cliponaxis===!1){xe._hasClipOnAxisFalse=!0;break}}}var be=s.list(oe,null,!0),Se;for(q=0;q<be.length;q++){Se=be[q];var Re=null;Se.overlaying&&(Re=s.getFromId(oe,Se.overlaying),Re&&Re.overlaying&&(Se.overlaying=!1,Re=null)),Se._mainAxis=Re||Se,Re&&(Se.domain=Re.domain.slice()),Se._anchorAxis=Se.anchor==="free"?null:s.getFromId(oe,Se.anchor)}for(q=0;q<be.length;q++)if(Se=be[q],Se._counterAxes.sort(s.idSort),Se._subplotsWith.sort(n.subplotSort),Se._mainSubplot=P(Se,J),Se._counterAxes.length&&(Se.spikemode&&Se.spikemode.indexOf("across")!==-1||Se.automargin&&Se.mirror&&Se.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Se))){var Ve=1,Ae=0;for(re=0;re<Se._counterAxes.length;re++){var Ce=s.getFromId(oe,Se._counterAxes[re]);Ve=Math.min(Ve,Ce.domain[0]),Ae=Math.max(Ae,Ce.domain[1])}Ve<Ae&&(Se._counterDomainMin=Ve,Se._counterDomainMax=Ae)}};function P(K,J){var U={_fullLayout:J},V=K._id.charAt(0)==="x",q=K._mainAxis._anchorAxis,re="",Z="",Q="";if(q&&(Q=q._mainAxis._id,re=V?K._id+Q:Q+K._id),!re||!J._plots[re]){re="";for(var ie=K._counterAxes,oe=0;oe<ie.length;oe++){var ne=ie[oe],se=V?K._id+ne:ne+K._id;Z||(Z=se);var _e=s.getFromId(U,ne);if(Q&&_e.overlaying===Q){re=se;break}}}return re||Z}l.clearExpandedTraceDefaultColors=function(K){var J,U,V;function q(Z,Q,ie,oe){U[oe]=Q,U.length=oe+1,Z.valType==="color"&&Z.dflt===void 0&&J.push(U.join("."))}for(U=[],J=K._module._colorAttrs,J||(K._module._colorAttrs=J=[],a.crawl(K._module.attributes,q)),V=0;V<J.length;V++){var re=n.nestedProperty(K,"_input."+J[V]);re.get()||n.nestedProperty(K,J[V]).set(null)}},l.supplyDataDefaults=function(K,J,U,V){var q=V._modules,re=V._visibleModules,Z=V._basePlotModules,Q=0,ie=0,oe,ne,se;V._transformModules=[];function _e(Ze){J.push(Ze);var Ye=Ze._module;!Ye||(n.pushUnique(q,Ye),Ze.visible===!0&&n.pushUnique(re,Ye),n.pushUnique(Z,Ze._module.basePlotModule),Q++,Ze._input.visible!==!1&&ie++)}var ue={},ge=[],xe=(U.template||{}).data||{},ye=i.traceTemplater(xe);for(oe=0;oe<K.length;oe++){if(se=K[oe],ne=ye.newTrace(se),ne.uid=V._traceUids[oe],l.supplyTraceDefaults(se,ne,ie,V,oe),ne.index=oe,ne._input=se,ne._expandedIndex=Q,ne.transforms&&ne.transforms.length)for(var be=se.visible!==!1&&ne.visible===!1,Se=I(ne,J,U,V),Re=0;Re<Se.length;Re++){var Ve=Se[Re],Ae={_template:ne._template,type:ne.type,uid:ne.uid+Re};be&&Ve.visible===!1&&delete Ve.visible,l.supplyTraceDefaults(Ve,Ae,Q,V,oe),c(Ae,Ve),Ae.index=oe,Ae._input=se,Ae._fullInput=ne,Ae._expandedIndex=Q,Ae._expandedInput=Ve,_e(Ae)}else ne._fullInput=ne,ne._expandedInput=ne,_e(ne);e.traceIs(ne,"carpetAxis")&&(ue[ne.carpet]=ne),e.traceIs(ne,"carpetDependent")&&ge.push(oe)}for(oe=0;oe<ge.length;oe++)if(ne=J[ge[oe]],!!ne.visible){var Ce=ue[ne.carpet];if(ne._carpet=Ce,!Ce||!Ce.visible){ne.visible=!1;continue}ne.xaxis=Ce.xaxis,ne.yaxis=Ce.yaxis}},l.supplyAnimationDefaults=function(K){K=K||{};var J,U={};function V(q,re){return n.coerce(K||{},U,b,q,re)}if(V("mode"),V("direction"),V("fromcurrent"),Array.isArray(K.frame))for(U.frame=[],J=0;J<K.frame.length;J++)U.frame[J]=l.supplyAnimationFrameDefaults(K.frame[J]||{});else U.frame=l.supplyAnimationFrameDefaults(K.frame||{});if(Array.isArray(K.transition))for(U.transition=[],J=0;J<K.transition.length;J++)U.transition[J]=l.supplyAnimationTransitionDefaults(K.transition[J]||{});else U.transition=l.supplyAnimationTransitionDefaults(K.transition||{});return U},l.supplyAnimationFrameDefaults=function(K){var J={};function U(V,q){return n.coerce(K||{},J,b.frame,V,q)}return U("duration"),U("redraw"),J},l.supplyAnimationTransitionDefaults=function(K){var J={};function U(V,q){return n.coerce(K||{},J,b.transition,V,q)}return U("duration"),U("easing"),J},l.supplyFrameDefaults=function(K){var J={};function U(V,q){return n.coerce(K,J,g,V,q)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),J},l.supplyTraceDefaults=function(K,J,U,V,q){var re=V.colorway||r.defaults,Z=re[U%re.length],Q;function ie(Se,Re){return n.coerce(K,J,l.attributes,Se,Re)}var oe=ie("visible");ie("type"),ie("name",V._traceWord+" "+q),ie("uirevision",V.uirevision);var ne=l.getModule(J);if(J._module=ne,ne){var se=ne.basePlotModule,_e=se.attr,ue=se.attributes;if(_e&&ue){var ge=V._subplots,xe="";if(oe||se.name!=="gl2d"){if(Array.isArray(_e))for(Q=0;Q<_e.length;Q++){var ye=_e[Q],be=n.coerce(K,J,ue,ye);ge[ye]&&n.pushUnique(ge[ye],be),xe+=be}else xe=n.coerce(K,J,ue,_e);ge[se.name]&&n.pushUnique(ge[se.name],xe)}}}return oe&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(J,"showLegend")?(n.coerce(K,J,ne.attributes.showlegend?ne.attributes:l.attributes,"showlegend"),ie("legendwidth"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),J._dfltShowLegend=!0):J._dfltShowLegend=!1,ne&&ne.supplyDefaults(K,J,Z,V),e.traceIs(J,"noOpacity")||ie("opacity"),e.traceIs(J,"notLegendIsolatable")&&(J.visible=!!J.visible),e.traceIs(J,"noHover")||(J.hovertemplate||n.coerceHoverinfo(K,J,V),J.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(K,J,Z,V)),ne&&ne.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(K,J,V)),J};function F(K){var J=K.transforms;if(Array.isArray(J)&&J.length)for(var U=0;U<J.length;U++){var V=J[U],q=V._module||y[V.type];if(q&&q.makesData)return!0}return!1}l.hasMakesDataTransform=F,l.supplyTransformDefaults=function(K,J,U){if(!!(J._length||F(K))){var V=U._globalTransforms||[],q=U._transformModules||[];if(!(!Array.isArray(K.transforms)&&V.length===0))for(var re=K.transforms||[],Z=V.concat(re),Q=J.transforms=[],ie=0;ie<Z.length;ie++){var oe=Z[ie],ne=oe.type,se=y[ne],_e,ue=!(oe._module&&oe._module===se),ge=se&&typeof se.transform=="function";se||n.warn("Unrecognized transform type "+ne+"."),se&&se.supplyDefaults&&(ue||ge)?(_e=se.supplyDefaults(oe,J,U,K),_e.type=ne,_e._module=se,n.pushUnique(q,se)):_e=n.extendFlat({},oe),Q.push(_e)}}};function I(K,J,U,V){for(var q=K.transforms,re=[K],Z=0;Z<q.length;Z++){var Q=q[Z],ie=y[Q.type];ie&&ie.transform&&(re=ie.transform(re,{transform:Q,fullTrace:K,fullData:J,layout:U,fullLayout:V,transformIndex:Z}))}return re}l.supplyLayoutGlobalDefaults=function(K,J,U){function V(oe,ne){return n.coerce(K,J,l.layoutAttributes,oe,ne)}var q=K.template;n.isPlainObject(q)&&(J.template=q,J._template=q.layout,J._dataTemplate=q.data),V("autotypenumbers");var re=n.coerceFont(V,"font"),Z=re.size;n.coerceFont(V,"title.font",n.extendFlat({},re,{size:Math.round(Z*1.4)})),V("title.text",J._dfltTitle.plot),V("title.xref"),V("title.yref"),V("title.x"),V("title.y"),V("title.xanchor"),V("title.yanchor"),V("title.pad.t"),V("title.pad.r"),V("title.pad.b"),V("title.pad.l");var Q=V("uniformtext.mode");Q&&V("uniformtext.minsize"),V("autosize",!(K.width&&K.height)),V("width"),V("height"),V("minreducedwidth"),V("minreducedheight"),V("margin.l"),V("margin.r"),V("margin.t"),V("margin.b"),V("margin.pad"),V("margin.autoexpand"),K.width&&K.height&&l.sanitizeMargins(J),e.getComponentMethod("grid","sizeDefaults")(K,J),V("paper_bgcolor"),V("separators",U.decimal+U.thousands),V("hidesources"),V("colorway"),V("datarevision");var ie=V("uirevision");V("editrevision",ie),V("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(K,J),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(K,J,V),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(K,J,V),V("meta"),n.isPlainObject(K.transition)&&(V("transition.duration"),V("transition.easing"),V("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(K,J,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(K,J,V)};function D(K){return typeof K=="string"&&K.substr(K.length-2)==="px"&&parseFloat(K)}l.plotAutoSize=function(J,U,V){var q=J._context||{},re=q.frameMargins,Z,Q,ie=n.isPlotDiv(J);if(ie&&J.emit("plotly_autosize"),q.fillFrame)Z=window.innerWidth,Q=window.innerHeight,document.body.style.overflow="hidden";else{var oe=ie?window.getComputedStyle(J):{};if(Z=D(oe.width)||D(oe.maxWidth)||V.width,Q=D(oe.height)||D(oe.maxHeight)||V.height,T(re)&&re>0){var ne=1-2*re;Z=Math.round(ne*Z),Q=Math.round(ne*Q)}}var se=l.layoutAttributes.width.min,_e=l.layoutAttributes.height.min;Z<se&&(Z=se),Q<_e&&(Q=_e);var ue=!U.width&&Math.abs(V.width-Z)>1,ge=!U.height&&Math.abs(V.height-Q)>1;(ge||ue)&&(ue&&(V.width=Z),ge&&(V.height=Q)),J._initialAutoSize||(J._initialAutoSize={width:Z,height:Q}),l.sanitizeMargins(V)},l.supplyLayoutModuleDefaults=function(K,J,U,V){var q=e.componentsRegistry,re=J._basePlotModules,Z,Q,ie,oe=e.subplotsRegistry.cartesian;for(Z in q)ie=q[Z],ie.includeBasePlot&&ie.includeBasePlot(K,J);re.length||re.push(oe),J._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(K,J),oe.finalizeSubplots(K,J));for(var ne in J._subplots)J._subplots[ne].sort(n.subplotSort);for(Q=0;Q<re.length;Q++)ie=re[Q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U);var se=J._modules;for(Q=0;Q<se.length;Q++)ie=se[Q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U);var _e=J._transformModules;for(Q=0;Q<_e.length;Q++)ie=_e[Q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U,V);for(Z in q)ie=q[Z],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U)},l.purge=function(K){var J=K._fullLayout||{};J._glcontainer!==void 0&&(J._glcontainer.selectAll(".gl-canvas").remove(),J._glcontainer.remove(),J._glcanvas=null),J._modeBar&&J._modeBar.destroy(),K._transitionData&&(K._transitionData._interruptCallbacks&&(K._transitionData._interruptCallbacks.length=0),K._transitionData._animationRaf&&window.cancelAnimationFrame(K._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(K),delete K.data,delete K.layout,delete K._fullData,delete K._fullLayout,delete K.calcdata,delete K.empty,delete K.fid,delete K.undoqueue,delete K.undonum,delete K.autoplay,delete K.changed,delete K._promises,delete K._redrawTimer,delete K._hmlumcount,delete K._hmpixcount,delete K._transitionData,delete K._transitioning,delete K._initialAutoSize,delete K._transitioningWithDuration,delete K._dragging,delete K._dragged,delete K._dragdata,delete K._hoverdata,delete K._snapshotInProgress,delete K._editing,delete K._mouseDownTime,delete K._legendMouseDownTime,K.removeAllListeners&&K.removeAllListeners()},l.style=function(K){var J=K._fullLayout._visibleModules,U=[],V;for(V=0;V<J.length;V++){var q=J[V];q.style&&n.pushUnique(U,q.style)}for(V=0;V<U.length;V++)U[V](K)},l.sanitizeMargins=function(K){if(!(!K||!K.margin)){var J=K.width,U=K.height,V=K.margin,q=J-(V.l+V.r),re=U-(V.t+V.b),Z;q<0&&(Z=(J-1)/(V.l+V.r),V.l=Math.floor(Z*V.l),V.r=Math.floor(Z*V.r)),re<0&&(Z=(U-1)/(V.t+V.b),V.t=Math.floor(Z*V.t),V.b=Math.floor(Z*V.b))}},l.clearAutoMarginIds=function(K){K._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(K,J){K._fullLayout._pushmarginIds[J]=1};function R(K){var J=K.margin;if(!K._size){var U=K._size={l:Math.round(J.l),r:Math.round(J.r),t:Math.round(J.t),b:Math.round(J.b),p:Math.round(J.pad)};U.w=Math.round(K.width)-U.l-U.r,U.h=Math.round(K.height)-U.t-U.b}K._pushmargin||(K._pushmargin={}),K._pushmarginIds||(K._pushmarginIds={})}var O=2,z=2;l.autoMargin=function(K,J,U){var V=K._fullLayout,q=V.width,re=V.height,Z=V.margin,Q=V.minreducedwidth,ie=V.minreducedheight,oe=n.constrain(q-Z.l-Z.r,O,Q),ne=n.constrain(re-Z.t-Z.b,z,ie),se=Math.max(0,q-oe),_e=Math.max(0,re-ne),ue=V._pushmargin,ge=V._pushmarginIds;if(Z.autoexpand!==!1){if(!U)delete ue[J],delete ge[J];else{var xe=U.pad;if(xe===void 0&&(xe=Math.min(12,Z.l,Z.r,Z.t,Z.b)),se){var ye=(U.l+U.r)/se;ye>1&&(U.l/=ye,U.r/=ye)}if(_e){var be=(U.t+U.b)/_e;be>1&&(U.t/=be,U.b/=be)}var Se=U.xl!==void 0?U.xl:U.x,Re=U.xr!==void 0?U.xr:U.x,Ve=U.yt!==void 0?U.yt:U.y,Ae=U.yb!==void 0?U.yb:U.y;ue[J]={l:{val:Se,size:U.l+xe},r:{val:Re,size:U.r+xe},b:{val:Ae,size:U.b+xe},t:{val:Ve,size:U.t+xe}},ge[J]=1}if(!V._replotting)return l.doAutoMargin(K)}},l.doAutoMargin=function(K){var J=K._fullLayout,U=J.width,V=J.height;J._size||(J._size={}),R(J);var q=J._size,re=J.margin,Z=n.extendFlat({},q),Q=re.l,ie=re.r,oe=re.t,ne=re.b,se=J._pushmargin,_e=J._pushmarginIds,ue=J.minreducedwidth,ge=J.minreducedheight;if(J.margin.autoexpand!==!1){for(var xe in se)_e[xe]||delete se[xe];se.base={l:{val:0,size:Q},r:{val:1,size:ie},t:{val:1,size:oe},b:{val:0,size:ne}};for(var ye in se){var be=se[ye].l||{},Se=se[ye].b||{},Re=be.val,Ve=be.size,Ae=Se.val,Ce=Se.size;for(var Ze in se){if(T(Ve)&&se[Ze].r){var Ye=se[Ze].r.val,ze=se[Ze].r.size;if(Ye>Re){var Ie=(Ve*Ye+(ze-U)*Re)/(Ye-Re),Ge=(ze*(1-Re)+(Ve-U)*(1-Ye))/(Ye-Re);Ie+Ge>Q+ie&&(Q=Ie,ie=Ge)}}if(T(Ce)&&se[Ze].t){var dt=se[Ze].t.val,Rt=se[Ze].t.size;if(dt>Ae){var Qt=(Ce*dt+(Rt-V)*Ae)/(dt-Ae),Bt=(Rt*(1-Ae)+(Ce-V)*(1-dt))/(dt-Ae);Qt+Bt>ne+oe&&(ne=Qt,oe=Bt)}}}}}var Ct=n.constrain(U-re.l-re.r,O,ue),Kt=n.constrain(V-re.t-re.b,z,ge),Ot=Math.max(0,U-Ct),St=Math.max(0,V-Kt);if(Ot){var Xe=(Q+ie)/Ot;Xe>1&&(Q/=Xe,ie/=Xe)}if(St){var at=(ne+oe)/St;at>1&&(ne/=at,oe/=at)}if(q.l=Math.round(Q),q.r=Math.round(ie),q.t=Math.round(oe),q.b=Math.round(ne),q.p=Math.round(re.pad),q.w=Math.round(U)-q.l-q.r,q.h=Math.round(V)-q.t-q.b,!J._replotting&&l.didMarginChange(Z,q)){"_redrawFromAutoMarginCount"in J?J._redrawFromAutoMarginCount++:J._redrawFromAutoMarginCount=1;var We=3*(1+Object.keys(_e).length);if(J._redrawFromAutoMarginCount<We)return e.call("_doPlot",K);J._size=Z,n.warn("Too many auto-margin redraws.")}H(K)};function H(K){var J=s.list(K,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(U){for(var V=0;V<J.length;V++){var q=J[V][U];q&&q()}})}var Y=["l","r","t","b","p","w","h"];l.didMarginChange=function(K,J){for(var U=0;U<Y.length;U++){var V=Y[U],q=K[V],re=J[V];if(!T(q)||Math.abs(re-q)>1)return!0}return!1},l.graphJson=function(K,J,U,V,q,re){(q&&J&&!K._fullData||q&&!J&&!K._fullLayout)&&l.supplyDefaults(K);var Z=q?K._fullData:K.data,Q=q?K._fullLayout:K.layout,ie=(K._transitionData||{})._frames;function oe(_e,ue){if(typeof _e=="function")return ue?"_function_":null;if(n.isPlainObject(_e)){var ge={},xe;return Object.keys(_e).sort().forEach(function(ye){if(["_","["].indexOf(ye.charAt(0))===-1){if(typeof _e[ye]=="function"){ue&&(ge[ye]="_function");return}if(U==="keepdata"){if(ye.substr(ye.length-3)==="src")return}else if(U==="keepstream"){if(xe=_e[ye+"src"],typeof xe=="string"&&xe.indexOf(":")>0&&!n.isPlainObject(_e.stream))return}else if(U!=="keepall"&&(xe=_e[ye+"src"],typeof xe=="string"&&xe.indexOf(":")>0))return;ge[ye]=oe(_e[ye],ue)}}),ge}return Array.isArray(_e)?_e.map(function(ye){return oe(ye,ue)}):n.isTypedArray(_e)?n.simpleMap(_e,n.identity):n.isJSDate(_e)?n.ms2DateTimeLocal(+_e):_e}var ne={data:(Z||[]).map(function(_e){var ue=oe(_e);return J&&delete ue.fit,ue})};if(!J&&(ne.layout=oe(Q),q)){var se=Q._size;ne.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return ie&&(ne.frames=oe(ie)),re&&(ne.config=oe(K._context,!0)),V==="object"?ne:JSON.stringify(ne)},l.modifyFrames=function(K,J){var U,V,q,re=K._transitionData._frames,Z=K._transitionData._frameHash;for(U=0;U<J.length;U++)switch(V=J[U],V.type){case"replace":q=V.value;var Q=(re[V.index]||{}).name,ie=q.name;re[V.index]=Z[ie]=q,ie!==Q&&(delete Z[Q],Z[ie]=q);break;case"insert":q=V.value,Z[q.name]=q,re.splice(V.index,0,q);break;case"delete":q=re[V.index],delete Z[q.name],re.splice(V.index,1);break}return Promise.resolve()},l.computeFrame=function(K,J){var U=K._transitionData._frameHash,V,q,re,Z;if(!J)throw new Error("computeFrame must be given a string frame name");var Q=U[J.toString()];if(!Q)return!1;for(var ie=[Q],oe=[Q.name];Q.baseframe&&(Q=U[Q.baseframe.toString()])&&oe.indexOf(Q.name)===-1;)ie.push(Q),oe.push(Q.name);for(var ne={};Q=ie.pop();)if(Q.layout&&(ne.layout=l.extendLayout(ne.layout,Q.layout)),Q.data){if(ne.data||(ne.data=[]),q=Q.traces,!q)for(q=[],V=0;V<Q.data.length;V++)q[V]=V;for(ne.traces||(ne.traces=[]),V=0;V<Q.data.length;V++)re=q[V],re!=null&&(Z=ne.traces.indexOf(re),Z===-1&&(Z=ne.data.length,ne.traces[Z]=re),ne.data[Z]=l.extendTrace(ne.data[Z],Q.data[V]))}return ne},l.recomputeFrameHash=function(K){for(var J=K._transitionData._frameHash={},U=K._transitionData._frames,V=0;V<U.length;V++){var q=U[V];q&&q.name&&(J[q.name]=q)}},l.extendObjectWithContainers=function(K,J,U){var V,q,re,Z,Q,ie,oe,ne,se=n.extendDeepNoArrays({},J||{}),_e=n.expandObjectPaths(se),ue={};if(U&&U.length)for(re=0;re<U.length;re++)V=n.nestedProperty(_e,U[re]),q=V.get(),q===void 0?n.nestedProperty(ue,U[re]).set(null):(V.set(null),n.nestedProperty(ue,U[re]).set(q));if(K=n.extendDeepNoArrays(K||{},_e),U&&U.length){for(re=0;re<U.length;re++)if(Q=n.nestedProperty(ue,U[re]),oe=Q.get(),!!oe){for(ie=n.nestedProperty(K,U[re]),ne=ie.get(),Array.isArray(ne)||(ne=[],ie.set(ne)),Z=0;Z<oe.length;Z++){var ge=oe[Z];ge===null?ne[Z]=null:ne[Z]=l.extendObjectWithContainers(ne[Z],ge)}ie.set(ne)}}return K},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(K,J){return l.extendObjectWithContainers(K,J,l.dataArrayContainers)},l.extendLayout=function(K,J){return l.extendObjectWithContainers(K,J,l.layoutArrayContainers)},l.transition=function(K,J,U,V,q,re){var Z={redraw:q.redraw},Q={},ie=[];return Z.prepareFn=function(){for(var oe=Array.isArray(J)?J.length:0,ne=V.slice(0,oe),se=0;se<ne.length;se++){var _e=ne[se],ue=K._fullData[_e],ge=ue._module;if(!!ge){if(ge.animatable){var xe=ge.basePlotModule.name;Q[xe]||(Q[xe]=[]),Q[xe].push(_e)}K.data[ne[se]]=l.extendTrace(K.data[ne[se]],J[se])}}var ye=n.expandObjectPaths(n.extendDeepNoArrays({},U)),be=/^[xy]axis[0-9]*$/;for(var Se in ye)!be.test(Se)||delete ye[Se].range;l.extendLayout(K.layout,ye),delete K.calcdata,l.supplyDefaults(K),l.doCalcdata(K);var Re=n.expandObjectPaths(U);if(Re){var Ve=K._fullLayout._plots;for(var Ae in Ve){var Ce=Ve[Ae],Ze=Ce.xaxis,Ye=Ce.yaxis,ze=Ze.range.slice(),Ie=Ye.range.slice(),Ge=null,dt=null,Rt=null,Qt=null;Array.isArray(Re[Ze._name+".range"])?Ge=Re[Ze._name+".range"].slice():Array.isArray((Re[Ze._name]||{}).range)&&(Ge=Re[Ze._name].range.slice()),Array.isArray(Re[Ye._name+".range"])?dt=Re[Ye._name+".range"].slice():Array.isArray((Re[Ye._name]||{}).range)&&(dt=Re[Ye._name].range.slice()),ze&&Ge&&(Ze.r2l(ze[0])!==Ze.r2l(Ge[0])||Ze.r2l(ze[1])!==Ze.r2l(Ge[1]))&&(Rt={xr0:ze,xr1:Ge}),Ie&&dt&&(Ye.r2l(Ie[0])!==Ye.r2l(dt[0])||Ye.r2l(Ie[1])!==Ye.r2l(dt[1]))&&(Qt={yr0:Ie,yr1:dt}),(Rt||Qt)&&ie.push(n.extendFlat({plotinfo:Ce},Rt,Qt))}}return Promise.resolve()},Z.runFn=function(oe){var ne,se=K._fullLayout._basePlotModules,_e=ie.length,ue;if(U)for(ue=0;ue<se.length;ue++)se[ue].transitionAxes&&se[ue].transitionAxes(K,ie,re,oe);_e?(ne=n.extendFlat({},re),ne.duration=0,delete Q.cartesian):ne=re;for(var ge in Q){var xe=Q[ge],ye=K._fullData[xe[0]]._module;ye.basePlotModule.plot(K,xe,ne,oe)}},ee(K,re,Z)},l.transitionFromReact=function(K,J,U,V){var q=K._fullLayout,re=q.transition,Z={},Q=[];return Z.prepareFn=function(){var ie=q._plots;Z.redraw=!1,J.anim==="some"&&(Z.redraw=!0),U.anim==="some"&&(Z.redraw=!0);for(var oe in ie){var ne=ie[oe],se=ne.xaxis,_e=ne.yaxis,ue=V[se._name].range.slice(),ge=V[_e._name].range.slice(),xe=se.range.slice(),ye=_e.range.slice();se.setScale(),_e.setScale();var be=null,Se=null;(se.r2l(ue[0])!==se.r2l(xe[0])||se.r2l(ue[1])!==se.r2l(xe[1]))&&(be={xr0:ue,xr1:xe}),(_e.r2l(ge[0])!==_e.r2l(ye[0])||_e.r2l(ge[1])!==_e.r2l(ye[1]))&&(Se={yr0:ge,yr1:ye}),(be||Se)&&Q.push(n.extendFlat({plotinfo:ne},be,Se))}return Promise.resolve()},Z.runFn=function(ie){for(var oe=K._fullData,ne=K._fullLayout,se=ne._basePlotModules,_e,ue,ge,xe=[],ye=0;ye<oe.length;ye++)xe.push(ye);function be(){if(!!K._fullLayout)for(var Re=0;Re<se.length;Re++)se[Re].transitionAxes&&se[Re].transitionAxes(K,Q,_e,ie)}function Se(){if(!!K._fullLayout)for(var Re=0;Re<se.length;Re++)se[Re].plot(K,ge,ue,ie)}Q.length&&J.anim?re.ordering==="traces first"?(_e=n.extendFlat({},re,{duration:0}),ge=xe,ue=re,setTimeout(be,re.duration),Se()):(_e=re,ge=null,ue=n.extendFlat({},re,{duration:0}),setTimeout(Se,_e.duration),be()):Q.length?(_e=re,be()):J.anim&&(ge=xe,ue=re,Se())},ee(K,re,Z)};function ee(K,J,U){var V=!1;function q(se){var _e=Promise.resolve();if(!se)return _e;for(;se.length;)_e=_e.then(se.shift());return _e}function re(se){if(!!se)for(;se.length;)se.shift()}function Z(){return K.emit("plotly_transitioning",[]),new Promise(function(se){K._transitioning=!0,J.duration>0&&(K._transitioningWithDuration=!0),K._transitionData._interruptCallbacks.push(function(){V=!0}),U.redraw&&K._transitionData._interruptCallbacks.push(function(){return e.call("redraw",K)}),K._transitionData._interruptCallbacks.push(function(){K.emit("plotly_transitioninterrupted",[])});var _e=0,ue=0;function ge(){return _e++,function(){ue++,!V&&ue===_e&&Q(se)}}U.runFn(ge),setTimeout(ge())})}function Q(se){if(!!K._transitionData)return re(K._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return e.call("redraw",K)}).then(function(){K._transitioning=!1,K._transitioningWithDuration=!1,K.emit("plotly_transitioned",[])}).then(se)}function ie(){if(!!K._transitionData)return K._transitioning=!1,q(K._transitionData._interruptCallbacks)}var oe=[l.previousPromises,ie,U.prepareFn,l.rehover,l.reselect,Z],ne=n.syncOrAsync(oe,K);return(!ne||!ne.then)&&(ne=Promise.resolve()),ne.then(function(){return K})}l.doCalcdata=function(K,J){var U=s.list(K),V=K._fullData,q=K._fullLayout,re,Z,Q,ie,oe=new Array(V.length),ne=(K.calcdata||[]).slice();for(K.calcdata=oe,q._numBoxes=0,q._numViolins=0,q._violinScaleGroupStats={},K._hmpixcount=0,K._hmlumcount=0,q._piecolormap={},q._sunburstcolormap={},q._treemapcolormap={},q._iciclecolormap={},q._funnelareacolormap={},Q=0;Q<V.length;Q++)if(Array.isArray(J)&&J.indexOf(Q)===-1){oe[Q]=ne[Q];continue}for(Q=0;Q<V.length;Q++)re=V[Q],re._arrayAttrs=a.findArrayAttributes(re),re._extremes={};var se=q._subplots.polar||[];for(Q=0;Q<se.length;Q++)U.push(q[se[Q]].radialaxis,q[se[Q]].angularaxis);for(var _e in q._colorAxes){var ue=q[_e];ue.cauto!==!1&&(delete ue.cmin,delete ue.cmax)}var ge=!1;function xe(Se){if(re=V[Se],Z=re._module,re.visible===!0&&re.transforms){if(Z&&Z.calc){var Re=Z.calc(K,re);Re[0]&&Re[0].t&&Re[0].t._scene&&delete Re[0].t._scene.dirty}for(ie=0;ie<re.transforms.length;ie++){var Ve=re.transforms[ie];Z=y[Ve.type],Z&&Z.calcTransform&&(re._hasCalcTransform=!0,ge=!0,Z.calcTransform(K,re,Ve))}}}function ye(Se,Re){if(re=V[Se],Z=re._module,!!Z.isContainer===Re){var Ve=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var Ae=re.transforms||[];for(ie=Ae.length-1;ie>=0;ie--)if(Ae[ie].enabled){re._indexToPoints=Ae[ie]._indexToPoints;break}Z&&Z.calc&&(Ve=Z.calc(K,re))}(!Array.isArray(Ve)||!Ve[0])&&(Ve=[{x:v,y:v}]),Ve[0].t||(Ve[0].t={}),Ve[0].trace=re,oe[Se]=Ve}}for(ae(U,V,q),Q=0;Q<V.length;Q++)ye(Q,!0);for(Q=0;Q<V.length;Q++)xe(Q);for(ge&&ae(U,V,q),Q=0;Q<V.length;Q++)ye(Q,!0);for(Q=0;Q<V.length;Q++)ye(Q,!1);fe(K);var be=X(U,K);if(be.length){for(q._numBoxes=0,q._numViolins=0,Q=0;Q<be.length;Q++)ye(be[Q],!0);for(Q=0;Q<be.length;Q++)ye(be[Q],!1);fe(K)}e.getComponentMethod("fx","calc")(K),e.getComponentMethod("errorbars","calc")(K)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function X(K,J){var U=[],V,q,re,Z,Q;function ie(Ct,Kt,Ot){var St=Kt._id.charAt(0);if(Ct==="histogram2dcontour"){var Xe=Kt._counterAxes[0],at=s.getFromId(J,Xe),We=St==="x"||Xe==="x"&&at.type==="category",Ee=St==="y"||Xe==="y"&&at.type==="category";return function(He,Ke){return He===0||Ke===0||We&&He===Ot[Ke].length-1||Ee&&Ke===Ot.length-1?-1:(St==="y"?Ke:He)-1}}else return function(He,Ke){return St==="y"?Ke:He}}var oe={min:function(Ct){return n.aggNums(Math.min,null,Ct)},max:function(Ct){return n.aggNums(Math.max,null,Ct)},sum:function(Ct){return n.aggNums(function(Kt,Ot){return Kt+Ot},null,Ct)},total:function(Ct){return n.aggNums(function(Kt,Ot){return Kt+Ot},null,Ct)},mean:function(Ct){return n.mean(Ct)},median:function(Ct){return n.median(Ct)}};for(V=0;V<K.length;V++){var ne=K[V];if(ne.type==="category"){var se=ne.categoryorder.match(j);if(se){var _e=se[1],ue=se[2],ge=ne._id.charAt(0),xe=ge==="x",ye=[];for(q=0;q<ne._categories.length;q++)ye.push([ne._categories[q],[]]);for(q=0;q<ne._traceIndices.length;q++){var be=ne._traceIndices[q],Se=J._fullData[be];if(Se.visible===!0){var Re=Se.type;e.traceIs(Se,"histogram")&&(delete Se._xautoBinFinished,delete Se._yautoBinFinished);var Ve=Re==="splom",Ae=Re==="scattergl",Ce=J.calcdata[be];for(re=0;re<Ce.length;re++){var Ze=Ce[re],Ye,ze;if(Ve){var Ie=Se._axesDim[ne._id];if(!xe){var Ge=Se._diag[Ie][0];Ge&&(ne=J._fullLayout[s.id2name(Ge)])}var dt=Ze.trace.dimensions[Ie].values;for(Z=0;Z<dt.length;Z++)for(Ye=ne._categoriesMap[dt[Z]],Q=0;Q<Ze.trace.dimensions.length;Q++)if(Q!==Ie){var Rt=Ze.trace.dimensions[Q];ye[Ye][1].push(Rt.values[Z])}}else if(Ae){for(Z=0;Z<Ze.t.x.length;Z++)xe?(Ye=Ze.t.x[Z],ze=Ze.t.y[Z]):(Ye=Ze.t.y[Z],ze=Ze.t.x[Z]),ye[Ye][1].push(ze);Ze.t&&Ze.t._scene&&delete Ze.t._scene.dirty}else if(Ze.hasOwnProperty("z")){ze=Ze.z;var Qt=ie(Se.type,ne,ze);for(Z=0;Z<ze.length;Z++)for(Q=0;Q<ze[Z].length;Q++)Ye=Qt(Q,Z),Ye+1&&ye[Ye][1].push(ze[Z][Q])}else for(Ye=Ze.p,Ye===void 0&&(Ye=Ze[ge]),ze=Ze.s,ze===void 0&&(ze=Ze.v),ze===void 0&&(ze=xe?Ze.y:Ze.x),Array.isArray(ze)||(ze===void 0?ze=[]:ze=[ze]),Z=0;Z<ze.length;Z++)ye[Ye][1].push(ze[Z])}}}ne._categoriesValue=ye;var Bt=[];for(q=0;q<ye.length;q++)Bt.push([ye[q][0],oe[_e](ye[q][1])]);Bt.sort(function(Ct,Kt){return Ct[1]-Kt[1]}),ne._categoriesAggregatedValue=Bt,ne._initialCategories=Bt.map(function(Ct){return Ct[0]}),ue==="descending"&&ne._initialCategories.reverse(),U=U.concat(ne.sortByInitialCategories())}}}return U}function ae(K,J,U){var V={};function q(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(J),V[ie._id]=1}n.simpleMap(K,q);for(var re=U._axisMatchGroups||[],Z=0;Z<re.length;Z++)for(var Q in re[Z])V[Q]||q(U[s.id2name(Q)])}function fe(K){var J=K._fullLayout,U=J._visibleModules,V={},q,re,Z;for(re=0;re<U.length;re++){var Q=U[re],ie=Q.crossTraceCalc;if(ie){var oe=Q.basePlotModule.name;V[oe]?n.pushUnique(V[oe],ie):V[oe]=[ie]}}for(Z in V){var ne=V[Z],se=J._subplots[Z];if(Array.isArray(se))for(q=0;q<se.length;q++){var _e=se[q],ue=Z==="cartesian"?J._plots[_e]:J[_e];for(re=0;re<ne.length;re++)ne[re](K,ue,_e)}else for(re=0;re<ne.length;re++)ne[re](K)}}l.rehover=function(K){K._fullLayout._rehover&&K._fullLayout._rehover()},l.redrag=function(K){K._fullLayout._redrag&&K._fullLayout._redrag()},l.reselect=function(K){var J=K._fullLayout,U=(K.layout||{}).selections,V=J._previousSelections;J._previousSelections=U;var q=J._reselect||JSON.stringify(U)!==JSON.stringify(V);e.getComponentMethod("selections","reselect")(K,q)},l.generalUpdatePerTraceModule=function(K,J,U,V){var q=J.traceHash,re={},Z;for(Z=0;Z<U.length;Z++){var Q=U[Z],ie=Q[0].trace;ie.visible&&(re[ie.type]=re[ie.type]||[],re[ie.type].push(Q))}for(var oe in q)if(!re[oe]){var ne=q[oe][0],se=ne[0].trace;se.visible=!1,re[oe]=[ne]}for(var _e in re){var ue=re[_e],ge=ue[0][0].trace._module;ge.plot(K,J,n.filterVisible(ue),V)}J.traceHash=re},l.plotBasePlot=function(K,J,U,V,q){var re=e.getModule(K),Z=d(J.calcdata,re)[0];re.plot(J,Z,V,q)},l.cleanBasePlot=function(K,J,U,V,q){var re=q._has&&q._has(K),Z=U._has&&U._has(K);re&&!Z&&q["_"+K+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(t,B,G){B.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(t,B,G){var x=t("../../lib"),f=t("../../lib/polygon").tester,M=x.findIndexOfMin,T=x.isAngleInsideSector,e=x.angleDelta,a=x.angleDist;function i(y,u,A,_,p){if(!T(u,_))return!1;var w,h;A[0]<A[1]?(w=A[0],h=A[1]):(w=A[1],h=A[0]);var L=f(o(w,_[0],_[1],p)),E=f(o(h,_[0],_[1],p)),S=[y*Math.cos(u),y*Math.sin(u)];return E.contains(S)&&!L.contains(S)}function n(y,u,A,_){var p,w,h=_[0],L=_[1],E=d(Math.sin(u)-Math.sin(y)),S=d(Math.cos(u)-Math.cos(y)),P=Math.tan(A),F=d(1/P),I=E/S,D=L-I*h;return F?E&&S?(p=D/(P-I),w=P*p):S?(p=L*F,w=L):(p=h,w=h*P):E&&S?(p=0,w=D):S?(p=0,w=L):p=w=NaN,[p,w]}function r(y,u,A,_){var p=-u*A,w=u*u+1,h=2*(u*p-A),L=p*p+A*A-y*y,E=Math.sqrt(h*h-4*w*L),S=(-h+E)/(2*w),P=(-h-E)/(2*w);return[[S,u*S+p+_],[P,u*P+p+_]]}function v(y,u){var A=u.length,_=new Array(A+1),p;for(p=0;p<A;p++){var w=u[p];_[p]=[y*Math.cos(w),y*Math.sin(w)]}return _[p]=_[0].slice(),_}function s(y,u,A,_){var p=_.length,w=[],h,L;function E(H){return[y*Math.cos(H),y*Math.sin(H)]}function S(H,Y,ee){return n(H,Y,ee,E(H))}function P(H){return x.mod(H,p)}function F(H){return T(H,[u,A])}var I=M(_,function(H){return F(H)?a(H,u):1/0}),D=S(_[I],_[P(I-1)],u);for(w.push(D),h=I,L=0;L<p;h++,L++){var R=_[P(h)];if(!F(R))break;w.push(E(R))}var O=M(_,function(H){return F(H)?a(H,A):1/0}),z=S(_[O],_[P(O+1)],A);return w.push(z),w.push([0,0]),w.push(w[0].slice()),w}function o(y,u,A,_){return x.isFullCircle([u,A])?v(y,_):s(y,u,A,_)}function b(y,u,A,_){for(var p=1/0,w=1/0,h=o(y,u,A,_),L=0;L<h.length;L++){var E=h[L];p=Math.min(p,E[0]),w=Math.min(w,-E[1])}return[p,w]}function g(y,u){var A=function(w){var h=e(w,y);return h>0?h:1/0},_=M(u,A),p=x.mod(_+1,u.length);return[u[_],u[p]]}function d(y){return Math.abs(y)>1e-10?y:0}function c(y,u,A){u=u||0,A=A||0;for(var _=y.length,p=new Array(_),w=0;w<_;w++){var h=y[w];p[w]=[u+h[0],A-h[1]]}return p}function m(y,u,A,_,p,w){var h=o(y,u,A,_);return"M"+c(h,p,w).join("L")}function l(y,u,A,_,p,w,h){var L,E;y<u?(L=y,E=u):(L=u,E=y);var S=c(o(L,A,_,p),w,h),P=c(o(E,A,_,p),w,h);return"M"+P.reverse().join("L")+"M"+S.join("L")}B.exports={isPtInsidePolygon:i,findPolygonOffset:b,findEnclosingVertexAngles:g,findIntersectionXY:n,findXYatLength:r,clampTiny:d,pathPolygon:m,pathPolygonAnnulus:l}},{"../../lib":515,"../../lib/polygon":527}],631:[function(t,B,G){var x=t("../get_data").getSubplotCalcData,f=t("../../lib").counterRegex,M=t("./polar"),T=t("./constants"),e=T.attr,a=T.name,i=f(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var c=g[d],m=x(b,a,c),l=o[c]._subplot;l||(l=M(s,c),o[c]._subplot=l),l.plot(m,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],c=g._has&&g._has("gl"),m=o._has&&o._has("gl"),l=c&&!m,y=0;y<d.length;y++){var u=d[y],A=g[u]._subplot;if(!o[u]&&!!A){A.framework.remove(),A.layers["radial-axis-title"].remove();for(var _ in A.clipPaths)A.clipPaths[_].remove()}l&&A._scene&&(A._scene.destroy(),A._scene=null)}}B.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(t,B,G){var x=t("../../components/color/attributes"),f=t("../cartesian/layout_attributes"),M=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:f.color,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash},"plot","from-root"),i=e({tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickfont:f.tickfont,tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,layer:f.layer},"plot","from-root"),n={visible:T({},f.visible,{dflt:!0}),type:T({},f.type,{values:["-","linear","log","date","category"]}),autotypenumbers:f.autotypenumbers,autorange:T({},f.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},f.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:f.categoryorder,categoryarray:f.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},f.title.text,{editType:"plot",dflt:""}),font:T({},f.title.font,{editType:"plot"}),editType:"plot"},hoverformat:f.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}};T(n,a,i);var r={visible:T({},f.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:f.autotypenumbers,categoryorder:f.categoryorder,categoryarray:f.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:f.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(r,a,i),B.exports={domain:M({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:x.background},radialaxis:n,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/tick_value_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_label_defaults"),r=t("../cartesian/prefix_suffix_defaults"),v=t("../cartesian/category_order_defaults"),s=t("../cartesian/line_grid_defaults"),o=t("../cartesian/axis_autotype"),b=t("./layout_attributes"),g=t("./set_convert"),d=t("./constants"),c=d.axisNames;function m(y,u,A,_){var p=A("bgcolor");_.bgColor=f.combine(p,_.paper_bgcolor);var w=A("sector");A("hole");var h=e(_.fullData,d.name,_.id),L=_.layoutOut,E;function S(K,J){return A(E+"."+K,J)}for(var P=0;P<c.length;P++){E=c[P],x.isPlainObject(y[E])||(y[E]={});var F=y[E],I=M.newContainer(u,E);I._id=I._name=E,I._attr=_.id+"."+E,I._traceIndices=h.map(function(K){return K._expandedIndex});var D=d.axisName2dataArray[E],R=l(F,I,S,h,D,_);v(F,I,S,{axData:h,dataAttr:D});var O=S("visible");switch(g(I,u,L),S("uirevision",u.uirevision),I._m=1,E){case"radialaxis":var z=S("autorange",!I.isValidRange(F.range));F.autorange=z,z&&(R==="linear"||R==="-")&&S("rangemode"),z==="reversed"&&(I._m=-1),S("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){x.log("Polar plots do not support date angular axes yet.");for(var H=0;H<h.length;H++)h[H].visible=!1;R=F.type=I.type="linear"}S(R==="linear"?"thetaunit":"period");var Y=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[Y]);break}if(r(F,I,S,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var ee,j,X,ae,fe=_.font||{};ee=S("color"),j=ee===F.color?ee:fe.color,X=fe.size,ae=fe.family,a(F,I,S,I.type),n(F,I,S,I.type,{font:{color:j,size:X,family:ae}}),i(F,I,S,{outerTicks:!0}),s(F,I,S,{dfltColor:ee,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:b[E]}),S("layer"),E==="radialaxis"&&(S("side"),S("angle",w[0]),S("title.text"),x.coerceFont(S,"title.font",{color:j,size:x.bigFont(X),family:ae}))}R!=="category"&&S("hoverformat"),I._input=F}u.angularaxis.type==="category"&&A("gridshape")}function l(y,u,A,_,p,w){var h=A("autotypenumbers",w.autotypenumbersDflt),L=A("type");if(L==="-"){for(var E,S=0;S<_.length;S++)if(_[S].visible){E=_[S];break}E&&E[p]&&(u.type=o(E[p],"gregorian",{noMultiCategory:!0,autotypenumbers:h})),u.type==="-"?u.type="linear":y.type=u.type}return u.type}B.exports=function(u,A,_){T(u,A,_,{type:d.name,attributes:b,handleDefaults:m,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:_,layoutOut:A})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(t,B,G){var x=t("@plotly/d3"),f=t("tinycolor2"),M=t("../../registry"),T=t("../../lib"),e=T.strRotate,a=T.strTranslate,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../plots"),v=t("../../plots/cartesian/axes"),s=t("../cartesian/set_convert"),o=t("./set_convert"),b=t("../cartesian/autorange").doAutoRange,g=t("../cartesian/dragbox"),d=t("../../components/dragelement"),c=t("../../components/fx"),m=t("../../components/titles"),l=t("../../components/selections").prepSelect,y=t("../../components/selections").selectOnClick,u=t("../../components/selections").clearOutline,A=t("../../lib/setcursor"),_=t("../../lib/clear_gl_canvases"),p=t("../../plot_api/subroutines").redrawReglTraces,w=t("../../constants/alignment").MID_SHIFT,h=t("./constants"),L=t("./helpers"),E=t("../smith/helpers"),S=E.smith,P=E.reactanceArc,F=E.resistanceArc,I=E.smithTransform,D=T._,R=T.mod,O=T.deg2rad,z=T.rad2deg;function H(fe,K,J){this.isSmith=J||!1,this.id=K,this.gd=fe,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=fe._fullLayout,V="clip"+U._uid+K;this.clipIds.forTraces=V+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var Y=H.prototype;B.exports=function(K,J,U){return new H(K,J,U)},Y.plot=function(fe,K){for(var J=this,U=K[J.id],V=!1,q=0;q<fe.length;q++){var re=fe[q][0].trace;if(re.cliponaxis===!1){V=!0;break}}J._hasClipOnAxisFalse=V,J.updateLayers(K,U),J.updateLayout(K,U),r.generalUpdatePerTraceModule(J.gd,J,fe,U),J.updateFx(K,U),J.isSmith&&(delete U.realaxis.range,delete U.imaginaryaxis.range)},Y.updateLayers=function(fe,K){var J=this,U=J.isSmith,V=J.layers,q=J.getRadial(K),re=J.getAngular(K),Z=h.layerNames,Q=Z.indexOf("frontplot"),ie=Z.slice(0,Q),oe=re.layer==="below traces",ne=q.layer==="below traces";oe&&ie.push("angular-line"),ne&&ie.push("radial-line"),oe&&ie.push("angular-axis"),ne&&ie.push("radial-axis"),ie.push("frontplot"),oe||ie.push("angular-line"),ne||ie.push("radial-line"),oe||ie.push("angular-axis"),ne||ie.push("radial-axis");var se=(U?"smith":"polar")+"sublayer",_e=J.framework.selectAll("."+se).data(ie,String);_e.enter().append("g").attr("class",function(ue){return se+" "+ue}).each(function(ue){var ge=V[ue]=x.select(this);switch(ue){case"frontplot":U||ge.append("g").classed("barlayer",!0),ge.append("g").classed("scatterlayer",!0);break;case"backplot":ge.append("g").classed("maplayer",!0);break;case"plotbg":V.bg=ge.append("path");break;case"radial-grid":ge.style("fill","none");break;case"angular-grid":ge.style("fill","none");break;case"radial-line":ge.append("line").style("fill","none");break;case"angular-line":ge.append("path").style("fill","none");break}}),_e.order()},Y.updateLayout=function(fe,K){var J=this,U=J.layers,V=fe._size,q=J.getRadial(K),re=J.getAngular(K),Z=K.domain.x,Q=K.domain.y;J.xOffset=V.l+V.w*Z[0],J.yOffset=V.t+V.h*(1-Q[1]);var ie=J.xLength=V.w*(Z[1]-Z[0]),oe=J.yLength=V.h*(Q[1]-Q[0]),ne=J.getSector(K);J.sectorInRad=ne.map(O);var se=J.sectorBBox=j(ne),_e=se[2]-se[0],ue=se[3]-se[1],ge=oe/ie,xe=Math.abs(ue/_e),ye,be,Se,Re,Ve;ge>xe?(ye=ie,be=ie*xe,Ve=(oe-be)/V.h/2,Se=[Z[0],Z[1]],Re=[Q[0]+Ve,Q[1]-Ve]):(ye=oe/xe,be=oe,Ve=(ie-ye)/V.w/2,Se=[Z[0]+Ve,Z[1]-Ve],Re=[Q[0],Q[1]]),J.xLength2=ye,J.yLength2=be,J.xDomain2=Se,J.yDomain2=Re;var Ae=J.xOffset2=V.l+V.w*Se[0],Ce=J.yOffset2=V.t+V.h*(1-Re[1]),Ze=J.radius=ye/_e,Ye=J.innerRadius=J.getHole(K)*Ze,ze=J.cx=Ae-Ze*se[0],Ie=J.cy=Ce+Ze*se[3],Ge=J.cxx=ze-Ae,dt=J.cyy=Ie-Ce,Rt=q.side,Qt;Rt==="counterclockwise"?(Qt=Rt,Rt="top"):Rt==="clockwise"&&(Qt=Rt,Rt="bottom"),J.radialAxis=J.mockAxis(fe,K,q,{_id:"x",side:Rt,_trueSide:Qt,domain:[Ye/V.w,Ze/V.w]}),J.angularAxis=J.mockAxis(fe,K,re,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(fe,K),J.updateAngularAxis(fe,K),J.updateRadialAxis(fe,K),J.updateRadialAxisTitle(fe,K),J.xaxis=J.mockCartesianAxis(fe,K,{_id:"x",domain:Se}),J.yaxis=J.mockCartesianAxis(fe,K,{_id:"y",domain:Re});var Bt=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",Bt).attr("transform",a(Ge,dt)),U.frontplot.attr("transform",a(Ae,Ce)).call(n.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),U.bg.attr("d",Bt).attr("transform",a(ze,Ie)).call(i.fill,K.bgcolor)},Y.mockAxis=function(fe,K,J,U){var V=T.extendFlat({},J,U);return o(V,K,fe),V},Y.mockCartesianAxis=function(fe,K,J){var U=this,V=U.isSmith,q=J._id,re=T.extendFlat({type:"linear"},J);s(re,fe);var Z={x:[0,2],y:[1,3]};return re.setRange=function(){var Q=U.sectorBBox,ie=Z[q],oe=U.radialAxis._rl,ne=(oe[1]-oe[0])/(1-U.getHole(K));re.range=[Q[ie[0]]*ne,Q[ie[1]]*ne]},re.isPtWithinRange=q==="x"&&!V?function(Q){return U.isPtInside(Q)}:function(){return!0},re.setRange(),re.setScale(),re},Y.doAutoRange=function(fe,K){var J=this,U=J.gd,V=J.radialAxis,q=J.getRadial(K);b(U,V);var re=V.range;q.range=re.slice(),q._input.range=re.slice(),V._rl=[V.r2l(re[0],null,"gregorian"),V.r2l(re[1],null,"gregorian")]},Y.updateRadialAxis=function(fe,K){var J=this,U=J.gd,V=J.layers,q=J.radius,re=J.innerRadius,Z=J.cx,Q=J.cy,ie=J.getRadial(K),oe=R(J.getSector(K)[0],360),ne=J.radialAxis,se=re<q,_e=J.isSmith;_e||(J.fillViewInitialKey("radialaxis.angle",ie.angle),J.fillViewInitialKey("radialaxis.range",ne.range.slice()),ne.setGeometry()),ne.tickangle==="auto"&&oe>90&&oe<=270&&(ne.tickangle=180);var ue=_e?function(Ze){var Ye=I(J,S([Ze.x,0]));return a(Ye[0]-Z,Ye[1]-Q)}:function(Ze){return a(ne.l2p(Ze.x)+re,0)},ge=_e?function(Ze){return F(J,Ze.x,-1/0,1/0)}:function(Ze){return J.pathArc(ne.r2p(Ze.x)+re)},xe=ee(ie);if(J.radialTickLayout!==xe&&(V["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=xe),se){ne.setScale();var ye=0,be=_e?(ne.tickvals||[]).filter(function(Ze){return Ze>=0}).map(function(Ze){return v.tickText(ne,Ze,!0,!1)}):v.calcTicks(ne),Se=_e?be:v.clipEnds(ne,be),Re=v.getTickSigns(ne)[2];_e&&((ne.ticks==="top"&&ne.side==="bottom"||ne.ticks==="bottom"&&ne.side==="top")&&(Re=-Re),ne.ticks==="top"&&ne.side==="top"&&(ye=-ne.ticklen),ne.ticks==="bottom"&&ne.side==="bottom"&&(ye=ne.ticklen)),v.drawTicks(U,ne,{vals:be,layer:V["radial-axis"],path:v.makeTickPath(ne,0,Re),transFn:ue,crisp:!1}),v.drawGrid(U,ne,{vals:Se,layer:V["radial-grid"],path:ge,transFn:T.noop,crisp:!1}),v.drawLabels(U,ne,{vals:be,layer:V["radial-axis"],transFn:ue,labelFns:v.makeLabelFns(ne,ye)})}var Ve=J.radialAxisAngle=J.vangles?z(X(O(ie.angle),J.vangles)):ie.angle,Ae=a(Z,Q),Ce=Ae+e(-Ve);ae(V["radial-axis"],se&&(ie.showticklabels||ie.ticks),{transform:Ce}),ae(V["radial-grid"],se&&ie.showgrid,{transform:_e?"":Ae}),ae(V["radial-line"].select("line"),se&&ie.showline,{x1:_e?-q:re,y1:0,x2:q,y2:0,transform:Ce}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},Y.updateRadialAxisTitle=function(fe,K,J){if(!this.isSmith){var U=this,V=U.gd,q=U.radius,re=U.cx,Z=U.cy,Q=U.getRadial(K),ie=U.id+"title",oe=0;if(Q.title){var ne=n.bBox(U.layers["radial-axis"].node()).height,se=Q.title.font.size,_e=Q.side;oe=_e==="top"?se:_e==="counterclockwise"?-(ne+se*.4):ne+se*.8}var ue=J!==void 0?J:U.radialAxisAngle,ge=O(ue),xe=Math.cos(ge),ye=Math.sin(ge),be=re+q/2*xe+oe*ye,Se=Z-q/2*ye+oe*xe;U.layers["radial-axis-title"]=m.draw(V,ie,{propContainer:Q,propName:U.id+".radialaxis.title",placeholder:D(V,"Click to enter radial axis title"),attributes:{x:be,y:Se,"text-anchor":"middle"},transform:{rotate:-ue}})}},Y.updateAngularAxis=function(fe,K){var J=this,U=J.gd,V=J.layers,q=J.radius,re=J.innerRadius,Z=J.cx,Q=J.cy,ie=J.getAngular(K),oe=J.angularAxis,ne=J.isSmith;ne||(J.fillViewInitialKey("angularaxis.rotation",ie.rotation),oe.setGeometry(),oe.setScale());var se=ne?function(Ye){var ze=I(J,S([0,Ye.x]));return Math.atan2(ze[0]-Z,ze[1]-Q)-Math.PI/2}:function(Ye){return oe.t2g(Ye.x)};oe.type==="linear"&&oe.thetaunit==="radians"&&(oe.tick0=z(oe.tick0),oe.dtick=z(oe.dtick));var _e=function(Ye){return a(Z+q*Math.cos(Ye),Q-q*Math.sin(Ye))},ue=ne?function(Ye){var ze=I(J,S([0,Ye.x]));return a(ze[0],ze[1])}:function(Ye){return _e(se(Ye))},ge=ne?function(Ye){var ze=I(J,S([0,Ye.x])),Ie=Math.atan2(ze[0]-Z,ze[1]-Q)-Math.PI/2;return a(ze[0],ze[1])+e(-z(Ie))}:function(Ye){var ze=se(Ye);return _e(ze)+e(-z(ze))},xe=ne?function(Ye){return P(J,Ye.x,0,1/0)}:function(Ye){var ze=se(Ye),Ie=Math.cos(ze),Ge=Math.sin(ze);return"M"+[Z+re*Ie,Q-re*Ge]+"L"+[Z+q*Ie,Q-q*Ge]},ye=v.makeLabelFns(oe,0),be=ye.labelStandoff,Se={};Se.xFn=function(Ye){var ze=se(Ye);return Math.cos(ze)*be},Se.yFn=function(Ye){var ze=se(Ye),Ie=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(be+Ye.fontSize*Ie)+Math.abs(Math.cos(ze))*(Ye.fontSize*w)},Se.anchorFn=function(Ye){var ze=se(Ye),Ie=Math.cos(ze);return Math.abs(Ie)<.1?"middle":Ie>0?"start":"end"},Se.heightFn=function(Ye,ze,Ie){var Ge=se(Ye);return-.5*(1+Math.sin(Ge))*Ie};var Re=ee(ie);J.angularTickLayout!==Re&&(V["angular-axis"].selectAll("."+oe._id+"tick").remove(),J.angularTickLayout=Re);var Ve=ne?[1/0].concat(oe.tickvals||[]).map(function(Ye){return v.tickText(oe,Ye,!0,!1)}):v.calcTicks(oe);ne&&(Ve[0].text="\u221E",Ve[0].fontSize*=1.75);var Ae;if(K.gridshape==="linear"?(Ae=Ve.map(se),T.angleDelta(Ae[0],Ae[1])<0&&(Ae=Ae.slice().reverse())):Ae=null,J.vangles=Ae,oe.type==="category"&&(Ve=Ve.filter(function(Ye){return T.isAngleInsideSector(se(Ye),J.sectorInRad)})),oe.visible){var Ce=oe.ticks==="inside"?-1:1,Ze=(oe.linewidth||1)/2;v.drawTicks(U,oe,{vals:Ve,layer:V["angular-axis"],path:"M"+Ce*Ze+",0h"+Ce*oe.ticklen,transFn:ge,crisp:!1}),v.drawGrid(U,oe,{vals:Ve,layer:V["angular-grid"],path:xe,transFn:T.noop,crisp:!1}),v.drawLabels(U,oe,{vals:Ve,layer:V["angular-axis"],repositionOnUpdate:!0,transFn:ue,labelFns:Se})}ae(V["angular-line"].select("path"),ie.showline,{d:J.pathSubplot(),transform:a(Z,Q)}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},Y.updateFx=function(fe,K){if(!this.gd._context.staticPlot){var J=!this.isSmith;J&&(this.updateAngularDrag(fe),this.updateRadialDrag(fe,K,0),this.updateRadialDrag(fe,K,1)),this.updateHoverAndMainDrag(fe)}},Y.updateHoverAndMainDrag=function(fe){var K=this,J=K.isSmith,U=K.gd,V=K.layers,q=fe._zoomlayer,re=h.MINZOOM,Z=h.OFFEDGE,Q=K.radius,ie=K.innerRadius,oe=K.cx,ne=K.cy,se=K.cxx,_e=K.cyy,ue=K.sectorInRad,ge=K.vangles,xe=K.radialAxis,ye=L.clampTiny,be=L.findXYatLength,Se=L.findEnclosingVertexAngles,Re=h.cornerHalfWidth,Ve=h.cornerLen/2,Ae,Ce,Ze=g.makeDragger(V,"path","maindrag",fe.dragmode===!1?"none":"crosshair");x.select(Ze).attr("d",K.pathSubplot()).attr("transform",a(oe,ne)),Ze.onmousemove=function(Xt){c.hover(U,Xt,K.id),U._fullLayout._lasthover=Ze,U._fullLayout._hoversubplot=K.id},Ze.onmouseout=function(Xt){U._dragging||d.unhover(U,Xt)};var Ye={element:Ze,gd:U,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]},ze,Ie,Ge,dt,Rt,Qt,Bt,Ct,Kt;function Ot(Xt,Wt){return Math.sqrt(Xt*Xt+Wt*Wt)}function St(Xt,Wt){return Ot(Xt-se,Wt-_e)}function Xe(Xt,Wt){return Math.atan2(_e-Wt,Xt-se)}function at(Xt,Wt){return[Xt*Math.cos(Wt),Xt*Math.sin(-Wt)]}function We(Xt,Wt){if(Xt===0)return K.pathSector(2*Re);var sr=Ve/Xt,Gr=Wt-sr,cn=Wt+sr,en=Math.max(0,Math.min(Xt,Q)),st=en-Re,rr=en+Re;return"M"+at(st,Gr)+"A"+[st,st]+" 0,0,0 "+at(st,cn)+"L"+at(rr,cn)+"A"+[rr,rr]+" 0,0,1 "+at(rr,Gr)+"Z"}function Ee(Xt,Wt,sr){if(Xt===0)return K.pathSector(2*Re);var Gr=at(Xt,Wt),cn=at(Xt,sr),en=ye((Gr[0]+cn[0])/2),st=ye((Gr[1]+cn[1])/2),rr,er;if(en&&st){var jt=st/en,Mr=-1/jt,it=be(Re,jt,en,st);rr=be(Ve,Mr,it[0][0],it[0][1]),er=be(Ve,Mr,it[1][0],it[1][1])}else{var Qe,ft;st?(Qe=Ve,ft=Re):(Qe=Re,ft=Ve),rr=[[en-Qe,st-ft],[en+Qe,st-ft]],er=[[en-Qe,st+ft],[en+Qe,st+ft]]}return"M"+rr.join("L")+"L"+er.reverse().join("L")+"Z"}function He(){Ge=null,dt=null,Rt=K.pathSubplot(),Qt=!1;var Xt=U._fullLayout[K.id];Bt=f(Xt.bgcolor).getLuminance(),Ct=g.makeZoombox(q,Bt,oe,ne,Rt),Ct.attr("fill-rule","evenodd"),Kt=g.makeCorners(q,oe,ne),u(U)}function Ke(Xt,Wt){return Wt=Math.max(Math.min(Wt,Q),ie),Xt<Z?Xt=0:Q-Xt<Z?Xt=Q:Wt<Z?Wt=0:Q-Wt<Z&&(Wt=Q),Math.abs(Wt-Xt)>re?(Xt<Wt?(Ge=Xt,dt=Wt):(Ge=Wt,dt=Xt),!0):(Ge=null,dt=null,!1)}function et(Xt,Wt){Xt=Xt||Rt,Wt=Wt||"M0,0Z",Ct.attr("d",Xt),Kt.attr("d",Wt),g.transitionZoombox(Ct,Kt,Qt,Bt),Qt=!0;var sr={};zt(sr),U.emit("plotly_relayouting",sr)}function At(Xt,Wt){Xt=Xt*Ae,Wt=Wt*Ce;var sr=ze+Xt,Gr=Ie+Wt,cn=St(ze,Ie),en=Math.min(St(sr,Gr),Q),st=Xe(ze,Ie),rr,er;Ke(cn,en)&&(rr=Rt+K.pathSector(dt),Ge&&(rr+=K.pathSector(Ge)),er=We(Ge,st)+We(dt,st)),et(rr,er)}function mt(Xt,Wt,sr,Gr){var cn=L.findIntersectionXY(sr,Gr,sr,[Xt-se,_e-Wt]);return Ot(cn[0],cn[1])}function Mt(Xt,Wt){var sr=ze+Xt,Gr=Ie+Wt,cn=Xe(ze,Ie),en=Xe(sr,Gr),st=Se(cn,ge),rr=Se(en,ge),er=mt(ze,Ie,st[0],st[1]),jt=Math.min(mt(sr,Gr,rr[0],rr[1]),Q),Mr,it;Ke(er,jt)&&(Mr=Rt+K.pathSector(dt),Ge&&(Mr+=K.pathSector(Ge)),it=[Ee(Ge,st[0],st[1]),Ee(dt,st[0],st[1])].join(" ")),et(Mr,it)}function Gt(){if(g.removeZoombox(U),!(Ge===null||dt===null)){var Xt={};zt(Xt),g.showDoubleClickNotifier(U),M.call("_guiRelayout",U,Xt)}}function zt(Xt){var Wt=xe._rl,sr=(Wt[1]-Wt[0])/(1-ie/Q)/Q,Gr=[Wt[0]+(Ge-ie)*sr,Wt[0]+(dt-ie)*sr];Xt[K.id+".radialaxis.range"]=Gr}function Ht(Xt,Wt){var sr=U._fullLayout.clickmode;if(g.removeZoombox(U),Xt===2){var Gr={};for(var cn in K.viewInitial)Gr[K.id+"."+cn]=K.viewInitial[cn];U.emit("plotly_doubleclick",null),M.call("_guiRelayout",U,Gr)}sr.indexOf("select")>-1&&Xt===1&&y(Wt,U,[K.xaxis],[K.yaxis],K.id,Ye),sr.indexOf("event")>-1&&c.click(U,Wt,K.id)}Ye.prepFn=function(Xt,Wt,sr){var Gr=U._fullLayout.dragmode,cn=Ze.getBoundingClientRect();U._fullLayout._calcInverseTransform(U);var en=U._fullLayout._invTransform;Ae=U._fullLayout._invScaleX,Ce=U._fullLayout._invScaleY;var st=T.apply3DTransform(en)(Wt-cn.left,sr-cn.top);if(ze=st[0],Ie=st[1],ge){var rr=L.findPolygonOffset(Q,ue[0],ue[1],ge);ze+=se+rr[0],Ie+=_e+rr[1]}switch(Gr){case"zoom":Ye.clickFn=Ht,J||(ge?Ye.moveFn=Mt:Ye.moveFn=At,Ye.doneFn=Gt,He());break;case"select":case"lasso":l(Xt,Wt,sr,Ye,Gr);break}},d.init(Ye)},Y.updateRadialDrag=function(fe,K,J){var U=this,V=U.gd,q=U.layers,re=U.radius,Z=U.innerRadius,Q=U.cx,ie=U.cy,oe=U.radialAxis,ne=h.radialDragBoxSize,se=ne/2;if(!oe.visible)return;var _e=O(U.radialAxisAngle),ue=oe._rl,ge=ue[0],xe=ue[1],ye=ue[J],be=.75*(ue[1]-ue[0])/(1-U.getHole(K))/re,Se,Re,Ve;J?(Se=Q+(re+se)*Math.cos(_e),Re=ie-(re+se)*Math.sin(_e),Ve="radialdrag"):(Se=Q+(Z-se)*Math.cos(_e),Re=ie-(Z-se)*Math.sin(_e),Ve="radialdrag-inner");var Ae=g.makeRectDragger(q,Ve,"crosshair",-se,-se,ne,ne),Ce={element:Ae,gd:V};fe.dragmode===!1&&(Ce.dragmode=!1),ae(x.select(Ae),oe.visible&&Z<re,{transform:a(Se,Re)});var Ze,Ye,ze;function Ie(Bt,Ct){if(Ze)Ze(Bt,Ct);else{var Kt=[Bt,-Ct],Ot=[Math.cos(_e),Math.sin(_e)],St=Math.abs(T.dot(Kt,Ot)/Math.sqrt(T.dot(Kt,Kt)));isNaN(St)||(Ze=St<.5?Rt:Qt)}var Xe={};Ge(Xe),V.emit("plotly_relayouting",Xe)}function Ge(Bt){Ye!==null?Bt[U.id+".radialaxis.angle"]=Ye:ze!==null&&(Bt[U.id+".radialaxis.range["+J+"]"]=ze)}function dt(){Ye!==null?M.call("_guiRelayout",V,U.id+".radialaxis.angle",Ye):ze!==null&&M.call("_guiRelayout",V,U.id+".radialaxis.range["+J+"]",ze)}function Rt(Bt,Ct){if(J!==0){var Kt=Se+Bt,Ot=Re+Ct;Ye=Math.atan2(ie-Ot,Kt-Q),U.vangles&&(Ye=X(Ye,U.vangles)),Ye=z(Ye);var St=a(Q,ie)+e(-Ye);q["radial-axis"].attr("transform",St),q["radial-line"].select("line").attr("transform",St);var Xe=U.gd._fullLayout,at=Xe[U.id];U.updateRadialAxisTitle(Xe,at,Ye)}}function Qt(Bt,Ct){var Kt=T.dot([Bt,-Ct],[Math.cos(_e),Math.sin(_e)]);if(ze=ye-be*Kt,be>0!=(J?ze>ge:ze<xe)){ze=null;return}var Ot=V._fullLayout,St=Ot[U.id];oe.range[J]=ze,oe._rl[J]=ze,U.updateRadialAxis(Ot,St),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var Xe=!1;for(var at in U.traceHash){var We=U.traceHash[at],Ee=T.filterVisible(We),He=We[0][0].trace._module;He.plot(V,U,Ee,St),M.traceIs(at,"gl")&&Ee.length&&(Xe=!0)}Xe&&(_(V),p(V))}Ce.prepFn=function(){Ze=null,Ye=null,ze=null,Ce.moveFn=Ie,Ce.doneFn=dt,u(V)},Ce.clampFn=function(Bt,Ct){return Math.sqrt(Bt*Bt+Ct*Ct)<h.MINDRAG&&(Bt=0,Ct=0),[Bt,Ct]},d.init(Ce)},Y.updateAngularDrag=function(fe){var K=this,J=K.gd,U=K.layers,V=K.radius,q=K.angularAxis,re=K.cx,Z=K.cy,Q=K.cxx,ie=K.cyy,oe=h.angularDragBoxSize,ne=g.makeDragger(U,"path","angulardrag",fe.dragmode===!1?"none":"move"),se={element:ne,gd:J};fe.dragmode===!1?se.dragmode=!1:x.select(ne).attr("d",K.pathAnnulus(V,V+oe)).attr("transform",a(re,Z)).call(A,"move");function _e(ze,Ie){return Math.atan2(ie+oe-Ie,ze-Q-oe)}var ue=U.frontplot.select(".scatterlayer").selectAll(".trace"),ge=ue.selectAll(".point"),xe=ue.selectAll(".textpoint"),ye,be,Se,Re,Ve,Ae;function Ce(ze,Ie){var Ge=K.gd._fullLayout,dt=Ge[K.id],Rt=ye+ze*fe._invScaleX,Qt=be+Ie*fe._invScaleY,Bt=_e(Rt,Qt),Ct=z(Bt-Ae);if(Re=Se+Ct,U.frontplot.attr("transform",a(K.xOffset2,K.yOffset2)+e([-Ct,Q,ie])),K.vangles){Ve=K.radialAxisAngle+Ct;var Kt=a(re,Z)+e(-Ct),Ot=a(re,Z)+e(-Ve);U.bg.attr("transform",Kt),U["radial-grid"].attr("transform",Kt),U["radial-axis"].attr("transform",Ot),U["radial-line"].select("line").attr("transform",Ot),K.updateRadialAxisTitle(Ge,dt,Ve)}else K.clipPaths.forTraces.select("path").attr("transform",a(Q,ie)+e(Ct));ge.each(function(){var Ke=x.select(this),et=n.getTranslate(Ke);Ke.attr("transform",a(et.x,et.y)+e([Ct]))}),xe.each(function(){var Ke=x.select(this),et=Ke.select("text"),At=n.getTranslate(Ke);Ke.attr("transform",e([Ct,et.attr("x"),et.attr("y")])+a(At.x,At.y))}),q.rotation=T.modHalf(Re,360),K.updateAngularAxis(Ge,dt),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&ue.call(n.hideOutsideRangePoints,K);var St=!1;for(var Xe in K.traceHash)if(M.traceIs(Xe,"gl")){var at=K.traceHash[Xe],We=T.filterVisible(at),Ee=at[0][0].trace._module;Ee.plot(J,K,We,dt),We.length&&(St=!0)}St&&(_(J),p(J));var He={};Ze(He),J.emit("plotly_relayouting",He)}function Ze(ze){ze[K.id+".angularaxis.rotation"]=Re,K.vangles&&(ze[K.id+".radialaxis.angle"]=Ve)}function Ye(){xe.select("text").attr("transform",null);var ze={};Ze(ze),M.call("_guiRelayout",J,ze)}se.prepFn=function(ze,Ie,Ge){var dt=fe[K.id];Se=dt.angularaxis.rotation;var Rt=ne.getBoundingClientRect();ye=Ie-Rt.left,be=Ge-Rt.top,J._fullLayout._calcInverseTransform(J);var Qt=T.apply3DTransform(fe._invTransform)(ye,be);ye=Qt[0],be=Qt[1],Ae=_e(ye,be),se.moveFn=Ce,se.doneFn=Ye,u(J)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(se.prepFn=T.noop,A(x.select(ne),null)),d.init(se)},Y.isPtInside=function(fe){if(this.isSmith)return!0;var K=this.sectorInRad,J=this.vangles,U=this.angularAxis.c2g(fe.theta),V=this.radialAxis,q=V.c2l(fe.r),re=V._rl,Z=J?L.isPtInsidePolygon:T.isPtInsideSector;return Z(q,U,re,K,J)},Y.pathArc=function(fe){var K=this.sectorInRad,J=this.vangles,U=J?L.pathPolygon:T.pathArc;return U(fe,K[0],K[1],J)},Y.pathSector=function(fe){var K=this.sectorInRad,J=this.vangles,U=J?L.pathPolygon:T.pathSector;return U(fe,K[0],K[1],J)},Y.pathAnnulus=function(fe,K){var J=this.sectorInRad,U=this.vangles,V=U?L.pathPolygonAnnulus:T.pathAnnulus;return V(fe,K,J[0],J[1],U)},Y.pathSubplot=function(){var fe=this.innerRadius,K=this.radius;return fe?this.pathAnnulus(fe,K):this.pathSector(K)},Y.fillViewInitialKey=function(fe,K){fe in this.viewInitial||(this.viewInitial[fe]=K)};function ee(fe){var K=fe.ticks+String(fe.ticklen)+String(fe.showticklabels);return"side"in fe&&(K+=fe.side),K}function j(fe){var K=fe[0],J=fe[1],U=J-K,V=R(K,360),q=V+U,re=Math.cos(O(V)),Z=Math.sin(O(V)),Q=Math.cos(O(q)),ie=Math.sin(O(q)),oe,ne,se,_e;return V<=90&&q>=90||V>90&&q>=450?_e=1:Z<=0&&ie<=0?_e=0:_e=Math.max(Z,ie),V<=180&&q>=180||V>180&&q>=540?oe=-1:re>=0&&Q>=0?oe=0:oe=Math.min(re,Q),V<=270&&q>=270||V>270&&q>=630?ne=-1:Z>=0&&ie>=0?ne=0:ne=Math.min(Z,ie),q>=360?se=1:re<=0&&Q<=0?se=0:se=Math.max(re,Q),[oe,ne,se,_e]}function X(fe,K){var J=function(V){return T.angleDist(fe,V)},U=T.findIndexOfMin(K,J);return K[U]}function ae(fe,K,J){return K?(fe.attr("display",null),fe.attr(J)):fe&&fe.attr("display","none"),fe}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(t,B,G){var x=t("../../lib"),f=t("../cartesian/set_convert"),M=x.deg2rad,T=x.rad2deg;B.exports=function(v,s,o){switch(f(v,o),v._id){case"x":case"radialaxis":e(v,s);break;case"angularaxis":n(v,s);break}};function e(r,v){var s=v._subplot;r.setGeometry=function(){var o=r._rl[0],b=r._rl[1],g=s.innerRadius,d=(s.radius-g)/(b-o),c=g/d,m=o>b?function(l){return l<=0}:function(l){return l>=0};r.c2g=function(l){var y=r.c2l(l)-o;return(m(y)?y:0)+c},r.g2c=function(l){return r.l2c(l+o-c)},r.g2p=function(l){return l*d},r.c2p=function(l){return r.g2p(r.c2g(l))}}}function a(r,v){return v==="degrees"?M(r):r}function i(r,v){return v==="degrees"?T(r):r}function n(r,v){var s=r.type;if(s==="linear"){var o=r.d2c,b=r.c2d;r.d2c=function(g,d){return a(o(g),d)},r.c2d=function(g,d){return b(i(g,d))}}r.makeCalcdata=function(g,d){var c=g[d],m=g._length,l,y,u=function(h){return r.d2c(h,g.thetaunit)};if(c){if(x.isTypedArray(c)&&s==="linear"){if(m===c.length)return c;if(c.subarray)return c.subarray(0,m)}for(l=new Array(m),y=0;y<m;y++)l[y]=u(c[y])}else{var A=d+"0",_="d"+d,p=A in g?u(g[A]):0,w=g[_]?u(g[_]):(r.period||2*Math.PI)/m;for(l=new Array(m),y=0;y<m;y++)l[y]=p+y*w}return l},r.setGeometry=function(){var g=v.sector,d=g.map(M),c={clockwise:-1,counterclockwise:1}[r.direction],m=M(r.rotation),l=function(L){return c*L+m},y=function(L){return(L-m)/c},u,A,_,p;switch(s){case"linear":A=u=x.identity,p=M,_=T,r.range=x.isFullCircle(d)?[g[0],g[0]+360]:d.map(y).map(T);break;case"category":var w=r._categories.length,h=r.period?Math.max(r.period,w):w;h===0&&(h=1),A=p=function(L){return L*2*Math.PI/h},u=_=function(L){return L*h/Math.PI/2},r.range=[0,h];break}r.c2g=function(L){return l(A(L))},r.g2c=function(L){return u(y(L))},r.t2g=function(L){return l(p(L))},r.g2t=function(L){return _(y(L))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(t,B,G){B.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(t,B,G){function x(i){return i<0?-1:i>0?1:0}function f(i){var n=i[0],r=i[1];if(!isFinite(n)||!isFinite(r))return[1,0];var v=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/v,2*r/v]}function M(i,n){var r=n[0],v=n[1];return[r*i.radius+i.cx,-v*i.radius+i.cy]}function T(i,n){return n*i.radius}function e(i,n,r,v){var s=M(i,f([r,n])),o=s[0],b=s[1],g=M(i,f([v,n])),d=g[0],c=g[1];if(n===0)return["M"+o+","+b,"L"+d+","+c].join(" ");var m=T(i,1/Math.abs(n));return["M"+o+","+b,"A"+m+","+m+" 0 0,"+(n<0?1:0)+" "+d+","+c].join(" ")}function a(i,n,r,v){var s=T(i,1/(n+1)),o=M(i,f([n,r])),b=o[0],g=o[1],d=M(i,f([n,v])),c=d[0],m=d[1];if(x(r)!==x(v)){var l=M(i,f([n,0])),y=l[0],u=l[1];return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(0<r?0:1)+" "+y+","+u,"A"+s+","+s+" 0 0,"+(v<0?0:1)+c+","+m].join(" ")}return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(v<r?0:1)+" "+c+","+m].join(" ")}B.exports={smith:f,reactanceArc:e,resistanceArc:a,smithTransform:M}},{}],638:[function(t,B,G){var x=t("../get_data").getSubplotCalcData,f=t("../../lib").counterRegex,M=t("../polar/polar"),T=t("./constants"),e=T.attr,a=T.name,i=f(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var c=g[d],m=x(b,a,c),l=o[c]._subplot;l||(l=M(s,c,!0),o[c]._subplot=l),l.plot(m,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],c=0;c<d.length;c++){var m=d[c],l=g[m]._subplot;if(!o[m]&&!!l){l.framework.remove();for(var y in l.clipPaths)l.clipPaths[y].remove()}}}B.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(t,B,G){var x=t("../../components/color/attributes"),f=t("../cartesian/layout_attributes"),M=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:f.color,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash},"plot","from-root"),i=e({ticklen:f.ticklen,tickwidth:T({},f.tickwidth,{dflt:2}),tickcolor:f.tickcolor,showticklabels:f.showticklabels,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,tickfont:f.tickfont,tickformat:f.tickformat,hoverformat:f.hoverformat,layer:f.layer},"plot","from-root"),n=T({visible:T({},f.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},f.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,i),r=T({visible:T({},f.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:f.ticks,editType:"calc"},a,i);B.exports={domain:M({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:x.background},realaxis:n,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_label_defaults"),n=t("../cartesian/line_grid_defaults"),r=t("../cartesian/set_convert"),v=t("./layout_attributes"),s=t("./constants"),o=s.axisNames,b=d(function(c){return c.slice().reverse().map(function(m){return-m}).concat([0]).concat(c)},String);function g(c,m,l,y){var u=l("bgcolor");y.bgColor=f.combine(u,y.paper_bgcolor);var A=e(y.fullData,s.name,y.id),_=y.layoutOut,p;function w(Y,ee){return l(p+"."+Y,ee)}for(var h=0;h<o.length;h++){p=o[h],x.isPlainObject(c[p])||(c[p]={});var L=c[p],E=M.newContainer(m,p);E._id=E._name=p,E._attr=y.id+"."+p,E._traceIndices=A.map(function(Y){return Y._expandedIndex});var S=w("visible");if(E.type="linear",r(E,_),a(L,E,w,E.type),S){var P=p==="realaxis";if(P&&w("side"),P)w("tickvals");else{var F=b(m.realaxis.tickvals||v.realaxis.tickvals.dflt);w("tickvals",F)}var I,D,R,O,z=y.font||{};S&&(I=w("color"),D=I===L.color?I:z.color,R=z.size,O=z.family),i(L,E,w,E.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:D,size:R,family:O}}),x.coerce2(c,m,v,p+".ticklen"),x.coerce2(c,m,v,p+".tickwidth"),x.coerce2(c,m,v,p+".tickcolor",m.color);var H=w("ticks");H||(delete m[p].ticklen,delete m[p].tickwidth,delete m[p].tickcolor),n(L,E,w,{dfltColor:I,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[p]}),w("layer")}w("hoverformat"),delete E.type,E._input=L}}B.exports=function(m,l,y){T(m,l,y,{noUirevision:!0,type:s.name,attributes:v,handleDefaults:g,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:y,layoutOut:l})};function d(c,m){var l={};return function(y){var u=m?m(y):y;if(u in l)return l[u];var A=c(y);return l[u]=A,A}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(t,B,G){var x=t("../lib"),f=t("../plot_api/plot_template"),M=t("./domain").defaults;B.exports=function(e,a,i,n){var r=n.type,v=n.attributes,s=n.handleDefaults,o=n.partition||"x",b=a._subplots[r],g=b.length,d=g&&b[0].replace(/\d+$/,""),c,m;function l(_,p){return x.coerce(c,m,v,_,p)}for(var y=0;y<g;y++){var u=b[y];e[u]?c=e[u]:c=e[u]={},m=f.newContainer(a,u,d),n.noUirevision||l("uirevision",a.uirevision);var A={};A[o]=[y/g,(y+1)/g],M(m,a,l,A),n.id=u,s(c,m,l,n)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(t,B,G){var x=t("../constants/docs");x.FORMAT_LINK,x.DATE_FORMAT_LINK;function f(M){var T=M.description?" "+M.description:"",e=M.keys||[];if(e.length>0){for(var a=[],i=0;i<e.length;i++)a[i]="`"+e[i]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}G.hovertemplateAttrs=function(M,T){M=M||{},T=T||{},f(T);var e={valType:"string",dflt:"",editType:M.editType||"none"};return M.arrayOk!==!1&&(e.arrayOk=!0),e},G.texttemplateAttrs=function(M,T){M=M||{},T=T||{},f(T);var e={valType:"string",dflt:"",editType:M.editType||"calc"};return M.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(t,B,G){var x=t("./ternary"),f=t("../../plots/get_data").getSubplotCalcData,M=t("../../lib").counterRegex,T="ternary";G.name=T;var e=G.attr="subplot";G.idRoot=T,G.idRegex=G.attrRegex=M(T);var a=G.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},G.layoutAttributes=t("./layout_attributes"),G.supplyLayoutDefaults=t("./layout_defaults"),G.plot=function(n){for(var r=n._fullLayout,v=n.calcdata,s=r._subplots[T],o=0;o<s.length;o++){var b=s[o],g=f(v,T,b),d=r[b]._subplot;d||(d=new x({id:b,graphDiv:n,container:r._ternarylayer.node()},r),r[b]._subplot=d),d.plot(g,r,n._promises)}},G.clean=function(i,n,r,v){for(var s=v._subplots[T]||[],o=0;o<s.length;o++){var b=s[o],g=v[b]._subplot;!n[b]&&!!g&&(g.plotContainer.remove(),g.clipDef.remove(),g.clipDefRelative.remove(),g.layers["a-title"].remove(),g.layers["b-title"].remove(),g.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(t,B,G){var x=t("../../components/color/attributes"),f=t("../domain").attributes,M=t("../cartesian/layout_attributes"),T=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/extend").extendFlat,a={title:{text:M.title.text,font:M.title.font},color:M.color,tickmode:M.tickmode,nticks:e({},M.nticks,{dflt:6,min:1}),tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:e({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:e({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash,layer:M.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},i=B.exports=T({domain:f({name:"ternary"}),bgcolor:{valType:"color",dflt:x.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(t,B,G){var x=t("../../components/color"),f=t("../../plot_api/plot_template"),M=t("../../lib"),T=t("../subplot_defaults"),e=t("../cartesian/tick_label_defaults"),a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_value_defaults"),r=t("../cartesian/line_grid_defaults"),v=t("./layout_attributes"),s=["aaxis","baxis","caxis"];B.exports=function(d,c,m){T(d,c,m,{type:"ternary",attributes:v,handleDefaults:o,font:c.font,paper_bgcolor:c.paper_bgcolor})};function o(g,d,c,m){var l=c("bgcolor"),y=c("sum");m.bgColor=x.combine(l,m.paper_bgcolor);for(var u,A,_,p=0;p<s.length;p++)u=s[p],A=g[u]||{},_=f.newContainer(d,u),_._name=u,b(A,_,m,d);var w=d.aaxis,h=d.baxis,L=d.caxis;w.min+h.min+L.min>=y&&(w.min=0,h.min=0,L.min=0,g.aaxis&&delete g.aaxis.min,g.baxis&&delete g.baxis.min,g.caxis&&delete g.caxis.min)}function b(g,d,c,m){var l=v[d._name];function y(E,S){return M.coerce(g,d,l,E,S)}y("uirevision",m.uirevision),d.type="linear";var u=y("color"),A=u!==l.color.dflt?u:c.font.color,_=d._name,p=_.charAt(0).toUpperCase(),w="Component "+p,h=y("title.text",w);d._hovertitle=h===w?h:p,M.coerceFont(y,"title.font",{family:c.font.family,size:M.bigFont(c.font.size),color:A}),y("min"),n(g,d,y,"linear"),a(g,d,y,"linear"),e(g,d,y,"linear"),i(g,d,y,{outerTicks:!0});var L=y("showticklabels");L&&(M.coerceFont(y,"tickfont",{family:c.font.family,size:c.font.size,color:A}),y("tickangle"),y("tickformat")),r(g,d,y,{dfltColor:u,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),y("hoverformat"),y("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(t,B,G){var x=t("@plotly/d3"),f=t("tinycolor2"),M=t("../../registry"),T=t("../../lib"),e=T.strTranslate,a=T._,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../cartesian/set_convert"),v=t("../../lib/extend").extendFlat,s=t("../plots"),o=t("../cartesian/axes"),b=t("../../components/dragelement"),g=t("../../components/fx"),d=t("../../components/dragelement/helpers"),c=d.freeMode,m=d.rectMode,l=t("../../components/titles"),y=t("../../components/selections").prepSelect,u=t("../../components/selections").selectOnClick,A=t("../../components/selections").clearOutline,_=t("../../components/selections").clearSelectionsCache,p=t("../cartesian/constants");function w(z,H){this.id=z.id,this.graphDiv=z.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}B.exports=w;var h=w.prototype;h.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},h.plot=function(z,H){var Y=this,ee=H[Y.id],j=H._size;Y._hasClipOnAxisFalse=!1;for(var X=0;X<z.length;X++){var ae=z[X][0].trace;if(ae.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}}Y.updateLayers(ee),Y.adjustLayout(ee,j),s.generalUpdatePerTraceModule(Y.graphDiv,Y,z,ee),Y.layers.plotbg.select("path").call(i.fill,ee.bgcolor)},h.makeFramework=function(z){var H=this,Y=H.graphDiv,ee=z[H.id],j=H.clipId="clip"+H.layoutId+H.id,X=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=T.ensureSingleById(z._clips,"clipPath",j,function(ae){ae.append("path").attr("d","M0,0Z")}),H.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",X,function(ae){ae.append("path").attr("d","M0,0Z")}),H.plotContainer=T.ensureSingle(H.container,"g",H.id),H.updateLayers(ee),n.setClipUrl(H.layers.backplot,j,Y),n.setClipUrl(H.layers.grids,j,Y)},h.updateLayers=function(z){var H=this,Y=H.layers,ee=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&ee.push("aaxis","aline"),z.baxis.layer==="below traces"&&ee.push("baxis","bline"),z.caxis.layer==="below traces"&&ee.push("caxis","cline"),ee.push("frontplot"),z.aaxis.layer==="above traces"&&ee.push("aaxis","aline"),z.baxis.layer==="above traces"&&ee.push("baxis","bline"),z.caxis.layer==="above traces"&&ee.push("caxis","cline");var j=H.plotContainer.selectAll("g.toplevel").data(ee,String),X=["agrid","bgrid","cgrid"];j.enter().append("g").attr("class",function(ae){return"toplevel "+ae}).each(function(ae){var fe=x.select(this);Y[ae]=fe,ae==="frontplot"?fe.append("g").classed("scatterlayer",!0):ae==="backplot"?fe.append("g").classed("maplayer",!0):ae==="plotbg"?fe.append("path").attr("d","M0,0Z"):ae==="aline"||ae==="bline"||ae==="cline"?fe.append("path"):ae==="grids"&&X.forEach(function(K){Y[K]=fe.append("g").classed("grid "+K,!0)})}),j.order()};var L=Math.sqrt(4/3);h.adjustLayout=function(z,H){var Y=this,ee=z.domain,j=(ee.x[0]+ee.x[1])/2,X=(ee.y[0]+ee.y[1])/2,ae=ee.x[1]-ee.x[0],fe=ee.y[1]-ee.y[0],K=ae*H.w,J=fe*H.h,U=z.sum,V=z.aaxis.min,q=z.baxis.min,re=z.caxis.min,Z,Q,ie,oe,ne,se;K>L*J?(oe=J,ie=oe*L):(ie=K,oe=ie/L),ne=ae*ie/K,se=fe*oe/J,Z=H.l+H.w*j-ie/2,Q=H.t+H.h*(1-X)-oe/2,Y.x0=Z,Y.y0=Q,Y.w=ie,Y.h=oe,Y.sum=U,Y.xaxis={type:"linear",range:[V+2*re-U,U-V-2*q],domain:[j-ne/2,j+ne/2],_id:"x"},r(Y.xaxis,Y.graphDiv._fullLayout),Y.xaxis.setScale(),Y.xaxis.isPtWithinRange=function(Ce){return Ce.a>=Y.aaxis.range[0]&&Ce.a<=Y.aaxis.range[1]&&Ce.b>=Y.baxis.range[1]&&Ce.b<=Y.baxis.range[0]&&Ce.c>=Y.caxis.range[1]&&Ce.c<=Y.caxis.range[0]},Y.yaxis={type:"linear",range:[V,U-q-re],domain:[X-se/2,X+se/2],_id:"y"},r(Y.yaxis,Y.graphDiv._fullLayout),Y.yaxis.setScale(),Y.yaxis.isPtWithinRange=function(){return!0};var _e=Y.yaxis.domain[0],ue=Y.aaxis=v({},z.aaxis,{range:[V,U-q-re],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[_e,_e+se*L],anchor:"free",position:0,_id:"y",_length:ie});r(ue,Y.graphDiv._fullLayout),ue.setScale();var ge=Y.baxis=v({},z.baxis,{range:[U-V-re,q],side:"bottom",domain:Y.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ie});r(ge,Y.graphDiv._fullLayout),ge.setScale();var xe=Y.caxis=v({},z.caxis,{range:[U-V-q,re],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[_e,_e+se*L],anchor:"free",position:0,_id:"y",_length:ie});r(xe,Y.graphDiv._fullLayout),xe.setScale();var ye="M"+Z+","+(Q+oe)+"h"+ie+"l-"+ie/2+",-"+oe+"Z";Y.clipDef.select("path").attr("d",ye),Y.layers.plotbg.select("path").attr("d",ye);var be="M0,"+oe+"h"+ie+"l-"+ie/2+",-"+oe+"Z";Y.clipDefRelative.select("path").attr("d",be);var Se=e(Z,Q);Y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Se),Y.clipDefRelative.select("path").attr("transform",null);var Re=e(Z-ge._offset,Q+oe);Y.layers.baxis.attr("transform",Re),Y.layers.bgrid.attr("transform",Re);var Ve=e(Z+ie/2,Q)+"rotate(30)"+e(0,-ue._offset);Y.layers.aaxis.attr("transform",Ve),Y.layers.agrid.attr("transform",Ve);var Ae=e(Z+ie/2,Q)+"rotate(-30)"+e(0,-xe._offset);Y.layers.caxis.attr("transform",Ae),Y.layers.cgrid.attr("transform",Ae),Y.drawAxes(!0),Y.layers.aline.select("path").attr("d",ue.showline?"M"+Z+","+(Q+oe)+"l"+ie/2+",-"+oe:"M0,0").call(i.stroke,ue.linecolor||"#000").style("stroke-width",(ue.linewidth||0)+"px"),Y.layers.bline.select("path").attr("d",ge.showline?"M"+Z+","+(Q+oe)+"h"+ie:"M0,0").call(i.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),Y.layers.cline.select("path").attr("d",xe.showline?"M"+(Z+ie/2)+","+Q+"l"+ie/2+","+oe:"M0,0").call(i.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Y.graphDiv._context.staticPlot||Y.initInteractions(),n.setClipUrl(Y.layers.frontplot,Y._hasClipOnAxisFalse?null:Y.clipId,Y.graphDiv)},h.drawAxes=function(z){var H=this,Y=H.graphDiv,ee=H.id.substr(7)+"title",j=H.layers,X=H.aaxis,ae=H.baxis,fe=H.caxis;if(H.drawAx(X),H.drawAx(ae),H.drawAx(fe),z){var K=Math.max(X.showticklabels?X.tickfont.size/2:0,(fe.showticklabels?fe.tickfont.size*.75:0)+(fe.ticks==="outside"?fe.ticklen*.87:0)),J=(ae.showticklabels?ae.tickfont.size:0)+(ae.ticks==="outside"?ae.ticklen:0)+3;j["a-title"]=l.draw(Y,"a"+ee,{propContainer:X,propName:H.id+".aaxis.title",placeholder:a(Y,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-X.title.font.size/3-K,"text-anchor":"middle"}}),j["b-title"]=l.draw(Y,"b"+ee,{propContainer:ae,propName:H.id+".baxis.title",placeholder:a(Y,"Click to enter Component B title"),attributes:{x:H.x0-J,y:H.y0+H.h+ae.title.font.size*.83+J,"text-anchor":"middle"}}),j["c-title"]=l.draw(Y,"c"+ee,{propContainer:fe,propName:H.id+".caxis.title",placeholder:a(Y,"Click to enter Component C title"),attributes:{x:H.x0+H.w+J,y:H.y0+H.h+fe.title.font.size*.83+J,"text-anchor":"middle"}})}},h.drawAx=function(z){var H=this,Y=H.graphDiv,ee=z._name,j=ee.charAt(0),X=z._id,ae=H.layers[ee],fe=30,K=j+"tickLayout",J=E(z);H[K]!==J&&(ae.selectAll("."+X+"tick").remove(),H[K]=J),z.setScale();var U=o.calcTicks(z),V=o.clipEnds(z,U),q=o.makeTransTickFn(z),re=o.getTickSigns(z)[2],Z=T.deg2rad(fe),Q=re*(z.linewidth||1)/2,ie=re*z.ticklen,oe=H.w,ne=H.h,se=j==="b"?"M0,"+Q+"l"+Math.sin(Z)*ie+","+Math.cos(Z)*ie:"M"+Q+",0l"+Math.cos(Z)*ie+","+-Math.sin(Z)*ie,_e={a:"M0,0l"+ne+",-"+oe/2,b:"M0,0l-"+oe/2+",-"+ne,c:"M0,0l-"+ne+","+oe/2}[j];o.drawTicks(Y,z,{vals:z.ticks==="inside"?V:U,layer:ae,path:se,transFn:q,crisp:!1}),o.drawGrid(Y,z,{vals:V,layer:H.layers[j+"grid"],path:_e,transFn:q,crisp:!1}),o.drawLabels(Y,z,{vals:U,layer:ae,transFn:q,labelFns:o.makeLabelFns(z,0,fe)})};function E(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var S=p.MINZOOM/2+.87,P="m-0.87,.5h"+S+"v3h-"+(S+5.2)+"l"+(S/2+2.6)+",-"+(S*.87+4.5)+"l2.6,1.5l-"+S/2+","+S*.87+"Z",F="m0.87,.5h-"+S+"v3h"+(S+5.2)+"l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-2.6,1.5l"+S/2+","+S*.87+"Z",I="m0,1l"+S/2+","+S*.87+"l2.6,-1.5l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-"+(S/2+2.6)+","+(S*.87+4.5)+"l2.6,1.5l"+S/2+",-"+S*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;h.clearOutline=function(){_(this.dragOptions),A(this.dragOptions.gd)},h.initInteractions=function(){var z=this,H=z.layers.plotbg.select("path").node(),Y=z.graphDiv,ee=Y._fullLayout._zoomlayer,j,X;this.dragOptions={element:H,gd:Y,plotinfo:{id:z.id,domain:Y._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(Re,Ve,Ae){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],j=Y._fullLayout._invScaleX,X=Y._fullLayout._invScaleY;var Ce=z.dragOptions.dragmode=Y._fullLayout.dragmode;c(Ce)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Ce==="zoom"?(z.dragOptions.moveFn=ge,z.dragOptions.clickFn=oe,z.dragOptions.doneFn=xe,ne(Re,Ve,Ae)):Ce==="pan"?(z.dragOptions.moveFn=be,z.dragOptions.clickFn=oe,z.dragOptions.doneFn=Se,ye(),z.clearOutline(Y)):(m(Ce)||c(Ce))&&y(Re,Ve,Ae,z.dragOptions,Ce)}};var ae,fe,K,J,U,V,q,re,Z,Q;function ie(Re){var Ve={};return Ve[z.id+".aaxis.min"]=Re.a,Ve[z.id+".baxis.min"]=Re.b,Ve[z.id+".caxis.min"]=Re.c,Ve}function oe(Re,Ve){var Ae=Y._fullLayout.clickmode;O(Y),Re===2&&(Y.emit("plotly_doubleclick",null),M.call("_guiRelayout",Y,ie({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&Re===1&&u(Ve,Y,[z.xaxis],[z.yaxis],z.id,z.dragOptions),Ae.indexOf("event")>-1&&g.click(Y,Ve,z.id)}function ne(Re,Ve,Ae){var Ce=H.getBoundingClientRect();ae=Ve-Ce.left,fe=Ae-Ce.top,Y._fullLayout._calcInverseTransform(Y);var Ze=Y._fullLayout._invTransform,Ye=T.apply3DTransform(Ze)(ae,fe);ae=Ye[0],fe=Ye[1],K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=K,J=z.aaxis.range[1]-K.a,V=f(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),q="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",re=!1,Z=ee.append("path").attr("class","zoombox").attr("transform",e(z.x0,z.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),Q=ee.append("path").attr("class","zoombox-corners").attr("transform",e(z.x0,z.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearOutline(Y)}function se(Re,Ve){return 1-Ve/z.h}function _e(Re,Ve){return 1-(Re+(z.h-Ve)/Math.sqrt(3))/z.w}function ue(Re,Ve){return(Re-(z.h-Ve)/Math.sqrt(3))/z.w}function ge(Re,Ve){var Ae=ae+Re*j,Ce=fe+Ve*X,Ze=Math.max(0,Math.min(1,se(ae,fe),se(Ae,Ce))),Ye=Math.max(0,Math.min(1,_e(ae,fe),_e(Ae,Ce))),ze=Math.max(0,Math.min(1,ue(ae,fe),ue(Ae,Ce))),Ie=(Ze/2+ze)*z.w,Ge=(1-Ze/2-Ye)*z.w,dt=(Ie+Ge)/2,Rt=Ge-Ie,Qt=(1-Ze)*z.h,Bt=Qt-Rt/L;Rt<p.MINZOOM?(U=K,Z.attr("d",q),Q.attr("d","M0,0Z")):(U={a:K.a+Ze*J,b:K.b+Ye*J,c:K.c+ze*J},Z.attr("d",q+"M"+Ie+","+Qt+"H"+Ge+"L"+dt+","+Bt+"L"+Ie+","+Qt+"Z"),Q.attr("d","M"+ae+","+fe+D+"M"+Ie+","+Qt+P+"M"+Ge+","+Qt+F+"M"+dt+","+Bt+I)),re||(Z.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),re=!0),Y.emit("plotly_relayouting",ie(U))}function xe(){O(Y),U!==K&&(M.call("_guiRelayout",Y,ie(U)),R&&Y.data&&Y._context.showTips&&(T.notifier(a(Y,"Double-click to zoom back out"),"long"),R=!1))}function ye(){K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=K}function be(Re,Ve){var Ae=Re/z.xaxis._m,Ce=Ve/z.yaxis._m;U={a:K.a-Ce,b:K.b+(Ae+Ce)/2,c:K.c-(Ae-Ce)/2};var Ze=[U.a,U.b,U.c].sort(T.sorterAsc),Ye={a:Ze.indexOf(U.a),b:Ze.indexOf(U.b),c:Ze.indexOf(U.c)};Ze[0]<0&&(Ze[1]+Ze[0]/2<0?(Ze[2]+=Ze[0]+Ze[1],Ze[0]=Ze[1]=0):(Ze[2]+=Ze[0]/2,Ze[1]+=Ze[0]/2,Ze[0]=0),U={a:Ze[Ye.a],b:Ze[Ye.b],c:Ze[Ye.c]},Ve=(K.a-U.a)*z.yaxis._m,Re=(K.c-U.c-K.b+U.b)*z.xaxis._m);var ze=e(z.x0+Re,z.y0+Ve);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var Ie=e(-Re,-Ve);z.clipDefRelative.select("path").attr("transform",Ie),z.aaxis.range=[U.a,z.sum-U.b-U.c],z.baxis.range=[z.sum-U.a-U.c,U.b],z.caxis.range=[z.sum-U.a-U.b,U.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,z),Y.emit("plotly_relayouting",ie(U))}function Se(){M.call("_guiRelayout",Y,ie(U))}H.onmousemove=function(Re){g.hover(Y,Re,z.id),Y._fullLayout._lasthover=H,Y._fullLayout._hoversubplot=z.id},H.onmouseout=function(Re){Y._dragging||b.unhover(Y,Re)},b.init(this.dragOptions)};function O(z){x.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(t,B,G){var x=t("./lib/loggers"),f=t("./lib/noop"),M=t("./lib/push_unique"),T=t("./lib/is_plain_object"),e=t("./lib/dom").addStyleRule,a=t("./lib/extend"),i=t("./plots/attributes"),n=t("./plots/layout_attributes"),r=a.extendFlat,v=a.extendDeepAll;G.modules={},G.allCategories={},G.allTypes=[],G.subplotsRegistry={},G.transformsRegistry={},G.componentsRegistry={},G.layoutArrayContainers=[],G.layoutArrayRegexes=[],G.traceLayoutAttributes={},G.localeRegistry={},G.apiMethodRegistry={},G.collectableSubplotTypes=null,G.register=function(_){if(G.collectableSubplotTypes=null,_)_&&!Array.isArray(_)&&(_=[_]);else throw new Error("No argument passed to Plotly.register.");for(var p=0;p<_.length;p++){var w=_[p];if(!w)throw new Error("Invalid module was attempted to be registered!");switch(w.moduleType){case"trace":s(w);break;case"transform":g(w);break;case"component":b(w);break;case"locale":d(w);break;case"apiMethod":var h=w.name;G.apiMethodRegistry[h]=w.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},G.getModule=function(A){var _=G.modules[u(A)];return _?_._module:!1},G.traceIs=function(A,_){if(A=u(A),A==="various")return!1;var p=G.modules[A];return p||(A&&x.log("Unrecognized trace type "+A+"."),p=G.modules[i.type.dflt]),!!p.categories[_]},G.getTransformIndices=function(A,_){for(var p=[],w=A.transforms||[],h=0;h<w.length;h++)w[h].type===_&&p.push(h);return p},G.hasTransform=function(A,_){for(var p=A.transforms||[],w=0;w<p.length;w++)if(p[w].type===_)return!0;return!1},G.getComponentMethod=function(A,_){var p=G.componentsRegistry[A];return p&&p[_]||f},G.call=function(){var A=arguments[0],_=[].slice.call(arguments,1);return G.apiMethodRegistry[A].apply(null,_)};function s(A){var _=A.name,p=A.categories,w=A.meta;if(G.modules[_]){x.log("Type "+_+" already registered");return}G.subplotsRegistry[A.basePlotModule.name]||o(A.basePlotModule);for(var h={},L=0;L<p.length;L++)h[p[L]]=!0,G.allCategories[p[L]]=!0;G.modules[_]={_module:A,categories:h},w&&Object.keys(w).length&&(G.modules[_].meta=w),G.allTypes.push(_);for(var E in G.componentsRegistry)m(E,_);A.layoutAttributes&&r(G.traceLayoutAttributes,A.layoutAttributes);var S=A.basePlotModule,P=S.name;if(P==="mapbox"){var F=S.constants.styleRules;for(var I in F)e(".js-plotly-plot .plotly .mapboxgl-"+I,F[I])}(P==="geo"||P==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(A){var _=A.name;if(G.subplotsRegistry[_]){x.log("Plot type "+_+" already registered.");return}c(A),G.subplotsRegistry[_]=A;for(var p in G.componentsRegistry)y(p,A.name)}function b(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var _=A.name;G.componentsRegistry[_]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&M(G.layoutArrayContainers,_),c(A));for(var p in G.modules)m(_,p);for(var w in G.subplotsRegistry)y(_,w);for(var h in G.transformsRegistry)l(_,h);A.schema&&A.schema.layout&&v(n,A.schema.layout)}function g(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var _="Transform module "+A.name,p=typeof A.transform=="function",w=typeof A.calcTransform=="function";if(!p&&!w)throw new Error(_+" is missing a *transform* or *calcTransform* method.");p&&w&&x.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(A.attributes)||x.log(_+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&x.log(_+" registered without a *supplyDefaults* method."),G.transformsRegistry[A.name]=A;for(var h in G.componentsRegistry)l(h,A.name)}function d(A){var _=A.name,p=_.split("-")[0],w=A.dictionary,h=A.format,L=w&&Object.keys(w).length,E=h&&Object.keys(h).length,S=G.localeRegistry,P=S[_];if(P||(S[_]=P={}),p!==_){var F=S[p];F||(S[p]=F={}),L&&F.dictionary===P.dictionary&&(F.dictionary=w),E&&F.format===P.format&&(F.format=h)}L&&(P.dictionary=w),E&&(P.format=h)}function c(A){if(A.layoutAttributes){var _=A.layoutAttributes._arrayAttrRegexps;if(_)for(var p=0;p<_.length;p++)M(G.layoutArrayRegexes,_[p])}}function m(A,_){var p=G.componentsRegistry[A].schema;if(!(!p||!p.traces)){var w=p.traces[_];w&&v(G.modules[_]._module.attributes,w)}}function l(A,_){var p=G.componentsRegistry[A].schema;if(!(!p||!p.transforms)){var w=p.transforms[_];w&&v(G.transformsRegistry[_].attributes,w)}}function y(A,_){var p=G.componentsRegistry[A].schema;if(!(!p||!p.subplots)){var w=G.subplotsRegistry[_],h=w.layoutAttributes,L=w.attr==="subplot"?w.name:w.attr;Array.isArray(L)&&(L=L[0]);var E=p.subplots[L];h&&E&&v(h,E)}}function u(A){return typeof A=="object"&&(A=A.type),A}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(t,B,G){var x=t("../registry"),f=t("../lib"),M=f.extendFlat,T=f.extendDeep;function e(i){var n;switch(i){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}function a(i){var n=["xaxis","yaxis","zaxis"];return n.indexOf(i.slice(0,5))>-1}B.exports=function(n,r){var v,s=n.data,o=n.layout,b=T([],s),g=T({},o,e(r.tileClass)),d=n._context||{};if(r.width&&(g.width=r.width),r.height&&(g.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){g.annotations=[];var c=Object.keys(g);for(v=0;v<c.length;v++)a(c[v])&&(g[c[v]].title={text:""});for(v=0;v<b.length;v++){var m=b[v];m.showscale=!1,m.marker&&(m.marker.showscale=!1),x.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(r.annotations))for(v=0;v<r.annotations.length;v++)g.annotations.push(r.annotations[v]);var l=Object.keys(g).filter(function(p){return p.match(/^scene\d*$/)});if(l.length){var y={};for(r.tileClass==="thumbnail"&&(y={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),v=0;v<l.length;v++){var u=g[l[v]];u.xaxis||(u.xaxis={}),u.yaxis||(u.yaxis={}),u.zaxis||(u.zaxis={}),M(u.xaxis,y),M(u.yaxis,y),M(u.zaxis,y),u._scene=null}}var A=document.createElement("div");r.tileClass&&(A.className=r.tileClass);var _={gd:A,td:A,layout:g,data:b,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return r.setBackground!=="transparent"&&(_.config.setBackground=r.setBackground||"opaque"),_.gd.defaultLayout=e(r.tileClass),_}},{"../lib":515,"../registry":647}],649:[function(t,B,G){var x=t("../lib"),f=t("../plot_api/to_image"),M=t("./filesaver"),T=t("./helpers");function e(a,i){var n;return x.isPlainObject(a)||(n=x.getGraphDiv(a)),i=i||{},i.format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(r,v){n&&n._snapshotInProgress&&v(new Error("Snapshotting already in progress.")),x.isIE()&&i.format!=="svg"&&v(new Error(T.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var s=f(a,i),o=i.filename||a.fn||"newplot";o+="."+i.format.replace("-","."),s.then(function(b){return n&&(n._snapshotInProgress=!1),M(b,o,i.format)}).then(function(b){r(b)}).catch(function(b){n&&(n._snapshotInProgress=!1),v(b)})})}B.exports=e},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(t,B,G){var x=t("../lib"),f=t("./helpers");function M(T,e,a){var i=document.createElement("a"),n="download"in i,r=new Promise(function(v,s){var o,b;if(x.isIE())return o=f.createBlob(T,"svg"),window.navigator.msSaveBlob(o,e),o=null,v(e);if(n)return o=f.createBlob(T,a),b=f.createObjectURL(o),i.href=b,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),f.revokeObjectURL(b),o=null,v(e);if(x.isSafari()){var g=a==="svg"?",":";base64,";return f.octetStream(g+encodeURIComponent(T)),v(e)}s(new Error("download error"))});return r}B.exports=M},{"../lib":515,"./helpers":651}],651:[function(t,B,G){var x=t("../registry");G.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},G.getRedrawFunc=function(T){return function(){x.getComponentMethod("colorbar","draw")(T)}},G.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},G.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var f=window.URL||window.webkitURL;G.createObjectURL=function(T){return f.createObjectURL(T)},G.revokeObjectURL=function(T){return f.revokeObjectURL(T)},G.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=M(window.atob(T));return new window.Blob([a],{type:"image/"+e})},G.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function M(T){for(var e=T.length,a=new ArrayBuffer(e),i=new Uint8Array(a),n=0;n<e;n++)i[n]=T.charCodeAt(n);return a}G.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,G.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(t,B,G){var x=t("./helpers"),f={getDelay:x.getDelay,getRedrawFunc:x.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};B.exports=f},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(t,B,G){var x=t("../lib"),f=t("events").EventEmitter,M=t("./helpers");function T(e){var a=e.emitter||new f,i=new Promise(function(n,r){var v=window.Image,s=e.svg,o=e.format||"png";if(x.isIE()&&o!=="svg"){var b=new Error(M.MSG_IE_BAD_FORMAT);return r(b),e.promise?i:a.emit("error",b)}var g=e.canvas,d=e.scale||1,c=e.width||300,m=e.height||150,l=d*c,y=d*m,u=g.getContext("2d",{willReadFrequently:!0}),A=new v,_,p;o==="svg"||x.isSafari()?p=M.encodeSVG(s):(_=M.createBlob(s,"svg"),p=M.createObjectURL(_)),g.width=l,g.height=y,A.onload=function(){var w;switch(_=null,M.revokeObjectURL(p),o!=="svg"&&u.drawImage(A,0,0,l,y),o){case"jpeg":w=g.toDataURL("image/jpeg");break;case"png":w=g.toDataURL("image/png");break;case"webp":w=g.toDataURL("image/webp");break;case"svg":w=p;break;default:var h="Image format is not jpeg, png, svg or webp.";if(r(new Error(h)),!e.promise)return a.emit("error",h)}n(w),e.promise||a.emit("success",w)},A.onerror=function(w){if(_=null,M.revokeObjectURL(p),r(w),!e.promise)return a.emit("error",w)},A.src=p});return e.promise?i:a}B.exports=T},{"../lib":515,"./helpers":651,events:84}],654:[function(t,B,G){var x=t("events").EventEmitter,f=t("../registry"),M=t("../lib"),T=t("./helpers"),e=t("./cloneplot"),a=t("./tosvg"),i=t("./svgtoimg");function n(r,v){var s=new x,o=e(r,{format:"png"}),b=o.gd;b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);function g(){var c=T.getDelay(b._fullLayout);setTimeout(function(){var m=a(b),l=document.createElement("canvas");l.id=M.randstr(),s=i({format:v.format,width:b._fullLayout.width,height:b._fullLayout.height,canvas:l,emitter:s,svg:m}),s.clean=function(){b&&document.body.removeChild(b)}},c)}var d=T.getRedrawFunc(b);return f.call("_doPlot",b,o.data,o.layout,o.config).then(d).then(g).catch(function(c){s.emit("error",c)}),s}B.exports=n},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(t,B,G){var x=t("@plotly/d3"),f=t("../lib"),M=t("../components/drawing"),T=t("../components/color"),e=t("../constants/xmlns_namespaces"),a=/"/g,i="TOBESTRIPPED",n=new RegExp('("'+i+")|("+i+'")',"g");function r(s){var o=x.select("body").append("div").style({display:"none"}).html(""),b=s.replace(/(&[^;]*;)/gi,function(g){return g==="&lt;"?"&#60;":g==="&rt;"?"&#62;":g.indexOf("<")!==-1||g.indexOf(">")!==-1?"":o.html(g).text()});return o.remove(),b}function v(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}B.exports=function(o,b,g){var d=o._fullLayout,c=d._paper,m=d._toppaper,l=d.width,y=d.height,u;c.insert("rect",":first-child").call(M.setRect,0,0,l,y).call(T.fill,d.paper_bgcolor);var A=d._basePlotModules||[];for(u=0;u<A.length;u++){var _=A[u];_.toSVG&&_.toSVG(o)}if(m){var p=m.node().childNodes,w=Array.prototype.slice.call(p);for(u=0;u<w.length;u++){var h=w[u];h.childNodes.length&&c.node().appendChild(h)}}d._draggers&&d._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=x.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){E.remove();return}else E.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&E.style("font-family",S.replace(a,i))}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var E=x.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&E.style("fill",S.replace(a,i));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&E.style("stroke",P.replace(a,i))}),(b==="pdf"||b==="eps")&&c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),b==="svg"&&g&&(c.attr("width",g*l),c.attr("height",g*y),c.attr("viewBox","0 0 "+l+" "+y));var L=new window.XMLSerializer().serializeToString(c.node());return L=r(L),L=v(L),L=L.replace(n,"'"),f.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;x.mergeArray(T.text,M,"tx"),x.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){x.mergeArray(a.opacity,M,"mo",!0),x.mergeArray(a.color,M,"mc");var i=a.line;i&&(x.mergeArray(i.color,M,"mlc"),x.mergeArrayCastPositive(i.width,M,"mlw"))}}},{"../../lib":515}],657:[function(t,B,G){var x=t("../scatter/attributes"),f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../plots/font_attributes"),i=t("./constants"),n=t("../../components/drawing/attributes").pattern,r=t("../../lib/extend").extendFlat,v=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=x.marker,o=s.line,b=r({},o.width,{dflt:0}),g=r({width:b,editType:"calc"},e("marker.line")),d=r({line:g,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});B.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),text:x.text,texttemplate:T({editType:"plot"},{keys:i.eventDataKeys}),hovertext:x.hovertext,hovertemplate:M({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},v,{}),insidetextfont:r({},v,{}),outsidetextfont:r({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},x.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:x.selected.marker.opacity,color:x.selected.marker.color,editType:"style"},textfont:x.selected.textfont,editType:"style"},unselected:{marker:{opacity:x.unselected.marker.opacity,color:x.unselected.marker.color,editType:"style"},textfont:x.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../plots/cartesian/align_period"),M=t("../../components/colorscale/helpers").hasColorscale,T=t("../../components/colorscale/calc"),e=t("./arrays_to_calcdata"),a=t("../scatter/calc_selection");B.exports=function(n,r){var v=x.getFromId(n,r.xaxis||"x"),s=x.getFromId(n,r.yaxis||"y"),o,b,g,d,c,m,l={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(o=v.makeCalcdata(r,"x",l),g=s.makeCalcdata(r,"y"),d=f(r,s,"y",g),c=!!r.yperiodalignment,m="y"):(o=s.makeCalcdata(r,"y",l),g=v.makeCalcdata(r,"x"),d=f(r,v,"x",g),c=!!r.xperiodalignment,m="x"),b=d.vals;for(var y=Math.min(b.length,o.length),u=new Array(y),A=0;A<y;A++)u[A]={p:b[A],s:o[A]},c&&(u[A].orig_p=g[A],u[A][m+"End"]=d.ends[A],u[A][m+"Start"]=d.starts[A]),r.ids&&(u[A].id=String(r.ids[A]));return M(r,"marker")&&T(n,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),M(r,"marker.line")&&T(n,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(u,r),a(u,r),u}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(t,B,G){B.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib").isArrayOrTypedArray,M=t("../../constants/numerical").BADNUM,T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../../plots/cartesian/constraints").getAxisGroup,i=t("./sieve.js");function n(L,E){for(var S=E.xaxis,P=E.yaxis,F=L._fullLayout,I=L._fullData,D=L.calcdata,R=[],O=[],z=0;z<I.length;z++){var H=I[z];if(H.visible===!0&&T.traceIs(H,"bar")&&H.xaxis===S._id&&H.yaxis===P._id&&(H.orientation==="h"?R.push(D[z]):O.push(D[z]),H._computePh))for(var Y=L.calcdata[z],ee=0;ee<Y.length;ee++)typeof Y[ee].ph0=="function"&&(Y[ee].ph0=Y[ee].ph0()),typeof Y[ee].ph1=="function"&&(Y[ee].ph1=Y[ee].ph1())}var j={xCat:S.type==="category"||S.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};r(L,S,P,O,j),r(L,P,S,R,j)}function r(L,E,S,P,F){if(!!P.length){var I,D,R,O,z;switch(v(S,P),F.mode){case"overlay":s(E,S,P,F);break;case"group":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],z=O[0].trace,z.offset===void 0?D.push(O):I.push(O);D.length&&o(L,E,S,D,F),I.length&&s(E,S,I,F);break;case"stack":case"relative":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],z=O[0].trace,z.base===void 0?D.push(O):I.push(O);D.length&&b(L,E,S,D,F),I.length&&s(E,S,I,F);break}w(P,E)}}function v(L,E){var S,P;for(S=0;S<E.length;S++){var F=E[S],I=F[0].trace,D=I.type==="funnel"?I._base:I.base,R,O=I.orientation==="h"?I.xcalendar:I.ycalendar,z=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(f(D)){for(P=0;P<Math.min(D.length,F.length);P++)R=z(D[P],0,O),x(R)?(F[P].b=+R,F[P].hasB=1):F[P].b=0;for(;P<F.length;P++)F[P].b=0}else{R=z(D,0,O);var H=x(R);for(R=H?R:0,P=0;P<F.length;P++)F[P].b=R,H&&(F[P].hasB=1)}}}function s(L,E,S,P){for(var F=0;F<S.length;F++){var I=S[F],D=new i([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});g(L,D,P),P.norm?(A(D),p(E,D,P)):y(E,D)}}function o(L,E,S,P,F){var I=new i(P,{posAxis:E,sepNegVal:!1,overlapNoMerge:!F.norm});d(L,E,I,F),_(I,E),F.norm?(A(I),p(S,I,F)):y(S,I)}function b(L,E,S,P,F){var I=new i(P,{posAxis:E,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});g(E,I,F),u(S,I,F);for(var D=0;D<P.length;D++)for(var R=P[D],O=0;O<R.length;O++){var z=R[O];if(z.s!==M){var H=z.b+z.s===I.get(z.p,z.s);H&&(z._outmost=!0)}}F.norm&&p(S,I,F)}function g(L,E,S){for(var P=E.minDiff,F=E.traces,I=P*(1-S.gap),D=I,R=D*(1-(S.groupgap||0)),O=-R/2,z=0;z<F.length;z++){var H=F[z],Y=H[0].t;Y.barwidth=R,Y.poffset=O,Y.bargroupwidth=I,Y.bardelta=P}E.binWidth=F[0][0].t.barwidth/100,c(E),m(L,E),l(L,E)}function d(L,E,S,P){for(var F=L._fullLayout,I=S.positions,D=S.distinctPositions,R=S.minDiff,O=S.traces,z=O.length,H=I.length!==D.length,Y=R*(1-P.gap),ee=a(F,E._id)+O[0][0].trace.orientation,j=F._alignmentOpts[ee]||{},X=0;X<z;X++){var ae=O[X],fe=ae[0].trace,K=j[fe.alignmentgroup]||{},J=Object.keys(K.offsetGroups||{}).length,U;J?U=Y/J:U=H?Y/z:Y;var V=U*(1-(P.groupgap||0)),q;J?q=((2*fe._offsetIndex+1-J)*U-V)/2:q=H?((2*X+1-z)*U-V)/2:-V/2;var re=ae[0].t;re.barwidth=V,re.poffset=q,re.bargroupwidth=Y,re.bardelta=R}S.binWidth=O[0][0].t.barwidth/100,c(S),m(E,S),l(E,S,H)}function c(L){var E=L.traces,S,P;for(S=0;S<E.length;S++){var F=E[S],I=F[0],D=I.trace,R=I.t,O=D._offset||D.offset,z=R.poffset,H;if(f(O)){for(H=Array.prototype.slice.call(O,0,F.length),P=0;P<H.length;P++)x(H[P])||(H[P]=z);for(P=H.length;P<F.length;P++)H.push(z);R.poffset=H}else O!==void 0&&(R.poffset=O);var Y=D._width||D.width,ee=R.barwidth;if(f(Y)){var j=Array.prototype.slice.call(Y,0,F.length);for(P=0;P<j.length;P++)x(j[P])||(j[P]=ee);for(P=j.length;P<F.length;P++)j.push(ee);if(R.barwidth=j,O===void 0){for(H=[],P=0;P<F.length;P++)H.push(z+(ee-j[P])/2);R.poffset=H}}else Y!==void 0&&(R.barwidth=Y,O===void 0&&(R.poffset=z+(ee-Y)/2))}}function m(L,E){for(var S=E.traces,P=h(L),F=0;F<S.length;F++)for(var I=S[F],D=I[0].t,R=D.poffset,O=Array.isArray(R),z=D.barwidth,H=Array.isArray(z),Y=0;Y<I.length;Y++){var ee=I[Y],j=ee.w=H?z[Y]:z;ee[P]=ee.p+(O?R[Y]:R)+j/2}}function l(L,E,S){var P=E.traces,F=E.minDiff,I=F/2;e.minDtick(L,E.minDiff,E.distinctPositions[0],S);for(var D=0;D<P.length;D++){var R=P[D],O=R[0],z=O.trace,H=[],Y,ee,j,X;for(X=0;X<R.length;X++)Y=R[X],ee=Y.p-I,j=Y.p+I,H.push(ee,j);if(z.width||z.offset){var ae=O.t,fe=ae.poffset,K=ae.barwidth,J=Array.isArray(fe),U=Array.isArray(K);for(X=0;X<R.length;X++){Y=R[X];var V=J?fe[X]:fe,q=U?K[X]:K;ee=Y.p+V,j=ee+q,H.push(ee,j)}}z._extremes[L._id]=e.findExtremes(L,H,{padded:!1})}}function y(L,E){for(var S=E.traces,P=h(L),F=0;F<S.length;F++){for(var I=S[F],D=I[0].trace,R=[],O=!1,z=0;z<I.length;z++){var H=I[z],Y=H.b,ee=Y+H.s;H[P]=ee,R.push(ee),H.hasB&&R.push(Y),(!H.hasB||!H.b)&&(O=!0)}D._extremes[L._id]=e.findExtremes(L,R,{tozero:O,padded:!0})}}function u(L,E,S){var P=h(L),F=E.traces,I,D,R,O,z,H;for(O=0;O<F.length;O++)if(I=F[O],D=I[0].trace,D.type==="funnel")for(z=0;z<I.length;z++)H=I[z],H.s!==M&&E.put(H.p,-.5*H.s);for(O=0;O<F.length;O++){I=F[O],D=I[0].trace,R=D.type==="funnel";var Y=[];for(z=0;z<I.length;z++)if(H=I[z],H.s!==M){var ee;R?ee=H.s:ee=H.s+H.b;var j=E.put(H.p,ee),X=j+ee;H.b=j,H[P]=X,S.norm||(Y.push(X),H.hasB&&Y.push(j))}S.norm||(D._extremes[L._id]=e.findExtremes(L,Y,{tozero:!0,padded:!0}))}}function A(L){for(var E=L.traces,S=0;S<E.length;S++)for(var P=E[S],F=0;F<P.length;F++){var I=P[F];I.s!==M&&L.put(I.p,I.b+I.s)}}function _(L,E){for(var S=L.traces,P=0;P<S.length;P++){var F=S[P],I=F[0].trace;if(I.base===void 0)for(var D=new i([F],{posAxis:E,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<F.length;R++){var O=F[R];if(O.p!==M){var z=D.put(O.p,O.b+O.s);z&&(O.b=z)}}}}function p(L,E,S){var P=E.traces,F=h(L),I=S.norm==="fraction"?1:100,D=I/1e9,R=L.l2c(L.c2l(0)),O=S.mode==="stack"?I:R;function z(q){return x(L.c2l(q))&&(q<R-D||q>O+D||!x(R))}for(var H=0;H<P.length;H++){for(var Y=P[H],ee=Y[0].trace,j=[],X=!1,ae=!1,fe=0;fe<Y.length;fe++){var K=Y[fe];if(K.s!==M){var J=Math.abs(I/E.get(K.p,K.s));K.b*=J,K.s*=J;var U=K.b,V=U+K.s;K[F]=V,j.push(V),ae=ae||z(V),K.hasB&&(j.push(U),ae=ae||z(U)),(!K.hasB||!K.b)&&(X=!0)}}ee._extremes[L._id]=e.findExtremes(L,j,{tozero:X,padded:ae})}}function w(L,E){var S=h(E),P={},F,I,D,R=1/0,O=-1/0;for(F=0;F<L.length;F++)for(D=L[F],I=0;I<D.length;I++){var z=D[I].p;x(z)&&(R=Math.min(R,z),O=Math.max(O,z))}var H=1e4/(O-R),Y=P.round=function(J){return String(Math.round(H*(J-R)))};for(F=0;F<L.length;F++){D=L[F],D[0].t.extents=P;var ee=D[0].t.poffset,j=Array.isArray(ee);for(I=0;I<D.length;I++){var X=D[I],ae=X[S]-X.w/2;if(x(ae)){var fe=X[S]+X.w/2,K=Y(X.p);P[K]?P[K]=[Math.min(ae,P[K][0]),Math.max(fe,P[K][1])]:P[K]=[ae,fe]}X.p0=X.p+(j?ee[I]:ee),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}}function h(L){return L._id.charAt(0)}B.exports={crossTraceCalc:n,setGroupPositions:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../../registry"),T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./style_defaults"),i=t("../../plots/cartesian/constraints").getAxisGroup,n=t("./attributes"),r=x.coerceFont;function v(g,d,c,m){function l(p,w){return x.coerce(g,d,n,p,w)}var y=T(g,d,m,l);if(!y){d.visible=!1;return}e(g,d,m,l),l("xhoverformat"),l("yhoverformat"),l("orientation",d.x&&!d.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var u=l("textposition");b(g,d,m,l,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(g,d,l,c,m);var A=(d.marker.line||{}).color,_=M.getComponentMethod("errorbars","supplyDefaults");_(g,d,A||f.defaultLine,{axis:"y"}),_(g,d,A||f.defaultLine,{axis:"x",inherit:"y"}),x.coerceSelectionMarkerOpacity(d,l)}function s(g,d,c,m){var l=d.orientation,y=d[{v:"x",h:"y"}[l]+"axis"],u=i(c,y)+l,A=c._alignmentOpts||{},_=m("alignmentgroup"),p=A[u];p||(p=A[u]={});var w=p[_];w?w.traces.push(d):w=p[_]={traces:[d],alignmentIndex:Object.keys(p).length,offsetGroups:{}};var h=m("offsetgroup"),L=w.offsetGroups,E=L[h];h&&(E||(E=L[h]={offsetIndex:Object.keys(L).length}),d._offsetIndex=E.offsetIndex)}function o(g,d){var c,m;function l(u){return x.coerce(m._input,m,n,u)}if(d.barmode==="group")for(var y=0;y<g.length;y++)m=g[y],m.type==="bar"&&(c=m._input,s(c,m,d,l))}function b(g,d,c,m,l,y){y=y||{};var u=y.moduleHasSelected!==!1,A=y.moduleHasUnselected!==!1,_=y.moduleHasConstrain!==!1,p=y.moduleHasCliponaxis!==!1,w=y.moduleHasTextangle!==!1,h=y.moduleHasInsideanchor!==!1,L=!!y.hasPathbar,E=Array.isArray(l)||l==="auto",S=E||l==="inside",P=E||l==="outside";if(S||P){var F=r(m,"textfont",c.font),I=x.extendFlat({},F),D=g.textfont&&g.textfont.color,R=!D;if(R&&delete I.color,r(m,"insidetextfont",I),L){var O=x.extendFlat({},F);R&&delete O.color,r(m,"pathbar.textfont",O)}P&&r(m,"outsidetextfont",F),u&&m("selected.textfont.color"),A&&m("unselected.textfont.color"),_&&m("constraintext"),p&&m("cliponaxis"),w&&m("textangle"),m("texttemplate")}S&&h&&m("insidetextanchor")}B.exports={supplyDefaults:v,crossTraceDefaults:o,handleGroupingDefaults:s,handleText:b}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(t,B,G){B.exports=function(f,M,T){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),T.orientation==="h"?(f.label=f.y,f.value=f.x):(f.label=f.x,f.value=f.y),f}},{}],663:[function(t,B,G){var x=t("fast-isnumeric"),f=t("tinycolor2"),M=t("../../lib").isArrayOrTypedArray;G.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},G.coerceNumber=function(T,e,a){if(x(e)){e=+e;var i=T.min,n=T.max,r=i!==void 0&&e<i||n!==void 0&&e>n;if(!r)return e}return a!==void 0?a:T.dflt},G.coerceColor=function(T,e,a){return f(e).isValid()?e:a!==void 0?a:T.dflt},G.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},G.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},G.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:M(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(t,B,G){var x=t("../../components/fx"),f=t("../../registry"),M=t("../../components/color"),T=t("../../lib").fillText,e=t("./helpers").getLineWidth,a=t("../../plots/cartesian/axes").hoverLabelText,i=t("../../constants/numerical").BADNUM;function n(s,o,b,g,d){var c=r(s,o,b,g,d);if(c){var m=c.cd,l=m[0].trace,y=m[c.index];return c.color=v(l,y),f.getComponentMethod("errorbars","hoverInfo")(y,l,c),[c]}}function r(s,o,b,g,d){var c=s.cd,m=c[0].trace,l=c[0].t,y=g==="closest",u=m.type==="waterfall",A=s.maxHoverDistance,_=s.maxSpikeDistance,p,w,h,L,E,S,P;m.orientation==="h"?(p=b,w=o,h="y",L="x",E=fe,S=j):(p=o,w=b,h="x",L="y",S=fe,E=j);var F=m[h+"period"],I=y||F;function D(ne){return O(ne,-1)}function R(ne){return O(ne,1)}function O(ne,se){var _e=ne.w;return ne[h]+se*_e/2}function z(ne){return ne[h+"End"]-ne[h+"Start"]}var H=y?D:F?function(ne){return ne.p-z(ne)/2}:function(ne){return Math.min(D(ne),ne.p-l.bardelta/2)},Y=y?R:F?function(ne){return ne.p+z(ne)/2}:function(ne){return Math.max(R(ne),ne.p+l.bardelta/2)};function ee(ne,se,_e){return d.finiteRange&&(_e=0),x.inbox(ne-p,se-p,_e+Math.min(1,Math.abs(se-ne)/P)-1)}function j(ne){return ee(H(ne),Y(ne),A)}function X(ne){return ee(D(ne),R(ne),_)}function ae(ne){var se=ne[L];if(u){var _e=Math.abs(ne.rawS)||0;w>0?se+=_e:w<0&&(se-=_e)}return se}function fe(ne){var se=w,_e=ne.b,ue=ae(ne);return x.inbox(_e-se,ue-se,A+(ue-se)/(ue-_e)-1)}function K(ne){var se=w,_e=ne.b,ue=ae(ne);return x.inbox(_e-se,ue-se,_+(ue-se)/(ue-_e)-1)}var J=s[h+"a"],U=s[L+"a"];P=Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0]));function V(ne){return(E(ne)+S(ne))/2}var q=x.getDistanceFunction(g,E,S,V);if(x.getClosest(c,q,s),s.index!==!1&&c[s.index].p!==i){I||(H=function(ne){return Math.min(D(ne),ne.p-l.bargroupwidth/2)},Y=function(ne){return Math.max(R(ne),ne.p+l.bargroupwidth/2)});var re=s.index,Z=c[re],Q=m.base?Z.b+Z.s:Z.s;s[L+"0"]=s[L+"1"]=U.c2p(Z[L],!0),s[L+"LabelVal"]=Q;var ie=l.extents[l.extents.round(Z.p)];s[h+"0"]=J.c2p(y?H(Z):ie[0],!0),s[h+"1"]=J.c2p(y?Y(Z):ie[1],!0);var oe=Z.orig_p!==void 0;return s[h+"LabelVal"]=oe?Z.orig_p:Z.p,s.labelLabel=a(J,s[h+"LabelVal"],m[h+"hoverformat"]),s.valueLabel=a(U,s[L+"LabelVal"],m[L+"hoverformat"]),s.baseLabel=a(U,Z.b,m[L+"hoverformat"]),s.spikeDistance=(K(Z)+X(Z))/2,s[h+"Spike"]=J.c2p(Z.p,!0),T(Z,m,s),s.hovertemplate=m.hovertemplate,s}}function v(s,o){var b=o.mcc||s.marker.color,g=o.mlcc||s.marker.line.color,d=e(s,o);if(M.opacity(b))return b;if(M.opacity(g)&&d)return g}B.exports={hoverPoints:n,hoverOnBars:r,getTraceColor:v}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(t,B,G){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(t,B,G){B.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(t,B,G){var x=t("../../registry"),f=t("../../plots/cartesian/axes"),M=t("../../lib"),T=t("./layout_attributes");B.exports=function(e,a,i){function n(l,y){return M.coerce(e,a,T,l,y)}for(var r=!1,v=!1,s=!1,o={},b=n("barmode"),g=0;g<i.length;g++){var d=i[g];if(x.traceIs(d,"bar")&&d.visible)r=!0;else continue;if(b==="group"){var c=d.xaxis+d.yaxis;o[c]&&(s=!0),o[c]=!0}if(d.visible&&d.type==="histogram"){var m=f.getFromId({_fullLayout:a},d[d.orientation==="v"?"xaxis":"yaxis"]);m.type!=="category"&&(v=!0)}}if(!r){delete a.barmode;return}b!=="overlay"&&n("barnorm"),n("bargap",v&&!s?0:.2),n("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../../lib"),T=t("../../lib/svg_text_utils"),e=t("../../components/color"),a=t("../../components/drawing"),i=t("../../registry"),n=t("../../plots/cartesian/axes").tickText,r=t("./uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("./style"),b=t("./helpers"),g=t("./constants"),d=t("./attributes"),c=d.text,m=d.textposition,l=t("../../components/fx/helpers").appendArrayPointValue,y=g.TEXTPAD;function u(H){return H.id}function A(H){if(H.ids)return u}function _(H,Y){return H<Y?1:-1}function p(H,Y,ee,j){var X=[],ae=[],fe=j?Y:ee,K=j?ee:Y;return X[0]=fe.c2p(H.s0,!0),ae[0]=K.c2p(H.p0,!0),X[1]=fe.c2p(H.s1,!0),ae[1]=K.c2p(H.p1,!0),j?[X,ae]:[ae,X]}function w(H,Y,ee,j){if(!Y.uniformtext.mode&&h(ee)){var X;return j&&(X=j()),H.transition().duration(ee.duration).ease(ee.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})}else return H}function h(H){return H&&H.duration>0}function L(H,Y,ee,j,X,ae){var fe=Y.xaxis,K=Y.yaxis,J=H._fullLayout;X||(X={mode:J.barmode,norm:J.barmode,gap:J.bargap,groupgap:J.bargroupgap},s("bar",J));var U=M.makeTraceGroups(j,ee,"trace bars").each(function(V){var q=x.select(this),re=V[0].trace,Z=re.type==="waterfall",Q=re.type==="funnel",ie=re.type==="bar",oe=ie||Q,ne=0;Z&&re.connector.visible&&re.connector.mode==="between"&&(ne=re.connector.line.width/2);var se=re.orientation==="h",_e=h(X),ue=M.ensureSingle(q,"g","points"),ge=A(re),xe=ue.selectAll("g.point").data(M.identity,ge);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(be,Se){var Re=x.select(this),Ve=p(be,fe,K,se),Ae=Ve[0][0],Ce=Ve[0][1],Ze=Ve[1][0],Ye=Ve[1][1],ze=(se?Ce-Ae:Ye-Ze)===0;ze&&oe&&b.getLineWidth(re,be)&&(ze=!1),ze||(ze=!f(Ae)||!f(Ce)||!f(Ze)||!f(Ye)),be.isBlank=ze,ze&&(se?Ce=Ae:Ye=Ze),ne&&!ze&&(se?(Ae-=_(Ae,Ce)*ne,Ce+=_(Ae,Ce)*ne):(Ze-=_(Ze,Ye)*ne,Ye+=_(Ze,Ye)*ne));var Ie,Ge;if(re.type==="waterfall"){if(!ze){var dt=re[be.dir].marker;Ie=dt.line.width,Ge=dt.color}}else Ie=b.getLineWidth(re,be),Ge=be.mc||re.marker.color;function Rt(St){var Xe=x.round(Ie/2%1,2);return X.gap===0&&X.groupgap===0?x.round(Math.round(St)-Xe,2):St}function Qt(St,Xe,at){return at&&St===Xe?St:Math.abs(St-Xe)>=2?Rt(St):St>Xe?Math.ceil(St):Math.floor(St)}if(!H._context.staticPlot){var Bt=e.opacity(Ge),Ct=Bt<1||Ie>.01?Rt:Qt;Ae=Ct(Ae,Ce,se),Ce=Ct(Ce,Ae,se),Ze=Ct(Ze,Ye,!se),Ye=Ct(Ye,Ze,!se)}var Kt=w(M.ensureSingle(Re,"path"),J,X,ae);if(Kt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ce-Ae)*(Ye-Ze))||ze&&H._context.staticPlot?"M0,0Z":"M"+Ae+","+Ze+"V"+Ye+"H"+Ce+"V"+Ze+"Z").call(a.setClipUrl,Y.layerClipId,H),!J.uniformtext.mode&&_e){var Ot=a.makePointStyleFns(re);a.singlePointStyle(be,Kt,re,Ot,H)}E(H,Y,Re,V,Se,Ae,Ce,Ze,Ye,X,ae),Y.layerClipId&&a.hideOutsideRangePoint(be,Re.select("text"),fe,K,re.xcalendar,re.ycalendar)});var ye=re.cliponaxis===!1;a.setClipUrl(q,ye?null:Y.layerClipId,H)});i.getComponentMethod("errorbars","plot")(H,U,Y,X)}function E(H,Y,ee,j,X,ae,fe,K,J,U,V){var q=Y.xaxis,re=Y.yaxis,Z=H._fullLayout,Q;function ie(Xe,at,We){var Ee=M.ensureSingle(Xe,"text").text(at).attr({class:"bartext bartext-"+Q,"text-anchor":"middle","data-notex":1}).call(a.font,We).call(T.convertToTspans,H);return Ee}var oe=j[0].trace,ne=oe.orientation==="h",se=D(Z,j,X,q,re);Q=R(oe,X);var _e=U.mode==="stack"||U.mode==="relative",ue=j[X],ge=!_e||ue._outmost;if(!se||Q==="none"||(ue.isBlank||ae===fe||K===J)&&(Q==="auto"||Q==="inside")){ee.select("text").remove();return}var xe=Z.font,ye=o.getBarColor(j[X],oe),be=o.getInsideTextFont(oe,X,xe,ye),Se=o.getOutsideTextFont(oe,X,xe),Re=ee.datum();ne?q.type==="log"&&Re.s0<=0&&(q.range[0]<q.range[1]?ae=0:ae=q._length):re.type==="log"&&Re.s0<=0&&(re.range[0]<re.range[1]?K=re._length:K=0);var Ve=Math.abs(fe-ae)-2*y,Ae=Math.abs(J-K)-2*y,Ce,Ze,Ye,ze,Ie;if(Q==="outside"&&!ge&&!ue.hasB&&(Q="inside"),Q==="auto")if(ge){Q="inside",Ie=M.ensureUniformFontSize(H,be),Ce=ie(ee,se,Ie),Ze=a.bBox(Ce.node()),Ye=Ze.width,ze=Ze.height;var Ge=Ye>0&&ze>0,dt=Ye<=Ve&&ze<=Ae,Rt=Ye<=Ae&&ze<=Ve,Qt=ne?Ve>=Ye*(Ae/ze):Ae>=ze*(Ve/Ye);Ge&&(dt||Rt||Qt)?Q="inside":(Q="outside",Ce.remove(),Ce=null)}else Q="inside";if(!Ce){Ie=M.ensureUniformFontSize(H,Q==="outside"?Se:be),Ce=ie(ee,se,Ie);var Bt=Ce.attr("transform");if(Ce.attr("transform",""),Ze=a.bBox(Ce.node()),Ye=Ze.width,ze=Ze.height,Ce.attr("transform",Bt),Ye<=0||ze<=0){Ce.remove();return}}var Ct=oe.textangle,Kt,Ot;Q==="outside"?(Ot=oe.constraintext==="both"||oe.constraintext==="outside",Kt=I(ae,fe,K,J,Ze,{isHorizontal:ne,constrained:Ot,angle:Ct})):(Ot=oe.constraintext==="both"||oe.constraintext==="inside",Kt=F(ae,fe,K,J,Ze,{isHorizontal:ne,constrained:Ot,angle:Ct,anchor:oe.insidetextanchor})),Kt.fontSize=Ie.size,v(oe.type==="histogram"?"bar":oe.type,Kt,Z),ue.transform=Kt;var St=w(Ce,Z,U,V);M.setTransormAndDisplay(St,Kt)}function S(H){return H==="auto"?0:H}function P(H,Y){var ee=Math.PI/180*Y,j=Math.abs(Math.sin(ee)),X=Math.abs(Math.cos(ee));return{x:H.width*X+H.height*j,y:H.width*j+H.height*X}}function F(H,Y,ee,j,X,ae){var fe=!!ae.isHorizontal,K=!!ae.constrained,J=ae.angle||0,U=ae.anchor||"end",V=U==="end",q=U==="start",re=ae.leftToRight||0,Z=(re+1)/2,Q=1-Z,ie=X.width,oe=X.height,ne=Math.abs(Y-H),se=Math.abs(j-ee),_e=ne>2*y&&se>2*y?y:0;ne-=2*_e,se-=2*_e;var ue=S(J);J==="auto"&&!(ie<=ne&&oe<=se)&&(ie>ne||oe>se)&&(!(ie>se||oe>ne)||ie<oe!=ne<se)&&(ue+=90);var ge=P(X,ue),xe=1;K&&(xe=Math.min(1,ne/ge.x,se/ge.y));var ye=X.left*Q+X.right*Z,be=(X.top+X.bottom)/2,Se=(H+y)*Q+(Y-y)*Z,Re=(ee+j)/2,Ve=0,Ae=0;if(q||V){var Ce=(fe?ge.x:ge.y)/2,Ze=fe?_(H,Y):_(ee,j);fe?q?(Se=H+Ze*_e,Ve=-Ze*Ce):(Se=Y-Ze*_e,Ve=Ze*Ce):q?(Re=ee+Ze*_e,Ae=-Ze*Ce):(Re=j-Ze*_e,Ae=Ze*Ce)}return{textX:ye,textY:be,targetX:Se,targetY:Re,anchorX:Ve,anchorY:Ae,scale:xe,rotate:ue}}function I(H,Y,ee,j,X,ae){var fe=!!ae.isHorizontal,K=!!ae.constrained,J=ae.angle||0,U=X.width,V=X.height,q=Math.abs(Y-H),re=Math.abs(j-ee),Z;fe?Z=re>2*y?y:0:Z=q>2*y?y:0;var Q=1;K&&(Q=fe?Math.min(1,re/V):Math.min(1,q/U));var ie=S(J),oe=P(X,ie),ne=(fe?oe.x:oe.y)/2,se=(X.left+X.right)/2,_e=(X.top+X.bottom)/2,ue=(H+Y)/2,ge=(ee+j)/2,xe=0,ye=0,be=fe?_(Y,H):_(ee,j);return fe?(ue=Y-be*Z,xe=be*ne):(ge=j+be*Z,ye=-be*ne),{textX:se,textY:_e,targetX:ue,targetY:ge,anchorX:xe,anchorY:ye,scale:Q,rotate:ie}}function D(H,Y,ee,j,X){var ae=Y[0].trace,fe=ae.texttemplate,K;return fe?K=O(H,Y,ee,j,X):ae.textinfo?K=z(Y,ee,j,X):K=b.getValue(ae.text,ee),b.coerceString(c,K)}function R(H,Y){var ee=b.getValue(H.textposition,Y);return b.coerceEnumerated(m,ee)}function O(H,Y,ee,j,X){var ae=Y[0].trace,fe=M.castOption(ae,ee,"texttemplate");if(!fe)return"";var K=ae.type==="histogram",J=ae.type==="waterfall",U=ae.type==="funnel",V=ae.orientation==="h",q,re,Z,Q;V?(q="y",re=X,Z="x",Q=j):(q="x",re=j,Z="y",Q=X);function ie(xe){return n(re,re.c2l(xe),!0).text}function oe(xe){return n(Q,Q.c2l(xe),!0).text}var ne=Y[ee],se={};se.label=ne.p,se.labelLabel=se[q+"Label"]=ie(ne.p);var _e=M.castOption(ae,ne.i,"text");(_e===0||_e)&&(se.text=_e),se.value=ne.s,se.valueLabel=se[Z+"Label"]=oe(ne.s);var ue={};l(ue,ae,ne.i),(K||ue.x===void 0)&&(ue.x=V?se.value:se.label),(K||ue.y===void 0)&&(ue.y=V?se.label:se.value),(K||ue.xLabel===void 0)&&(ue.xLabel=V?se.valueLabel:se.labelLabel),(K||ue.yLabel===void 0)&&(ue.yLabel=V?se.labelLabel:se.valueLabel),J&&(se.delta=+ne.rawS||ne.s,se.deltaLabel=oe(se.delta),se.final=ne.v,se.finalLabel=oe(se.final),se.initial=se.final-se.delta,se.initialLabel=oe(se.initial)),U&&(se.value=ne.s,se.valueLabel=oe(se.value),se.percentInitial=ne.begR,se.percentInitialLabel=M.formatPercent(ne.begR),se.percentPrevious=ne.difR,se.percentPreviousLabel=M.formatPercent(ne.difR),se.percentTotal=ne.sumR,se.percenTotalLabel=M.formatPercent(ne.sumR));var ge=M.castOption(ae,ne.i,"customdata");return ge&&(se.customdata=ge),M.texttemplateString(fe,se,H._d3locale,ue,se,ae._meta||{})}function z(H,Y,ee,j){var X=H[0].trace,ae=X.orientation==="h",fe=X.type==="waterfall",K=X.type==="funnel";function J(ge){var xe=ae?j:ee;return n(xe,ge,!0).text}function U(ge){var xe=ae?ee:j;return n(xe,+ge,!0).text}var V=X.textinfo,q=H[Y],re=V.split("+"),Z=[],Q,ie=function(ge){return re.indexOf(ge)!==-1};if(ie("label")&&Z.push(J(H[Y].p)),ie("text")&&(Q=M.castOption(X,q.i,"text"),(Q===0||Q)&&Z.push(Q)),fe){var oe=+q.rawS||q.s,ne=q.v,se=ne-oe;ie("initial")&&Z.push(U(se)),ie("delta")&&Z.push(U(oe)),ie("final")&&Z.push(U(ne))}if(K){ie("value")&&Z.push(U(q.s));var _e=0;ie("percent initial")&&_e++,ie("percent previous")&&_e++,ie("percent total")&&_e++;var ue=_e>1;ie("percent initial")&&(Q=M.formatPercent(q.begR),ue&&(Q+=" of initial"),Z.push(Q)),ie("percent previous")&&(Q=M.formatPercent(q.difR),ue&&(Q+=" of previous"),Z.push(Q)),ie("percent total")&&(Q=M.formatPercent(q.sumR),ue&&(Q+=" of total"),Z.push(Q))}return Z.join("<br>")}B.exports={plot:L,toMoveInsideBar:F}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(t,B,G){B.exports=function(M,T){var e=M.cd,a=M.xaxis,i=M.yaxis,n=e[0].trace,r=n.type==="funnel",v=n.orientation==="h",s=[],o;if(T===!1)for(o=0;o<e.length;o++)e[o].selected=0;else for(o=0;o<e.length;o++){var b=e[o],g="ct"in b?b.ct:x(b,a,i,v,r);T.contains(g,!1,o,M)?(s.push({pointNumber:o,x:a.c2d(b.x),y:i.c2d(b.y)}),b.selected=1):b.selected=0}return s};function x(f,M,T,e,a){var i=M.c2p(e?f.s0:f.p0,!0),n=M.c2p(e?f.s1:f.p1,!0),r=T.c2p(e?f.p0:f.s0,!0),v=T.c2p(e?f.p1:f.s1,!0);return a?[(i+n)/2,(r+v)/2]:e?[n,(r+v)/2]:[(i+n)/2,v]}},{}],670:[function(t,B,G){B.exports=M;var x=t("../../lib").distinctVals,f=t("../../constants/numerical").BADNUM;function M(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,i=[],n=0;n<T.length;n++){for(var r=T[n],v=0;v<r.length;v++){var s=r[v];s.p!==f&&i.push(s.p)}r[0]&&r[0].width1&&(a=Math.min(r[0].width1,a))}this.positions=i;var o=x(i);this.distinctPositions=o.vals,o.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(o.minDiff,a);var b=(e.posAxis||{}).type;(b==="category"||b==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(e,a){var i=this.getLabel(e,a),n=this.bins[i]||0;return this.bins[i]=n+a,n},M.prototype.get=function(e,a){var i=this.getLabel(e,a);return this.bins[i]||0},M.prototype.getLabel=function(e,a){var i=a<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?e:Math.round(e/this.binWidth);return i+n}},{"../../constants/numerical":491,"../../lib":515}],671:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../../components/drawing"),T=t("../../lib"),e=t("../../registry"),a=t("./uniform_text").resizeText,i=t("./attributes"),n=i.textfont,r=i.insidetextfont,v=i.outsidetextfont,s=t("./helpers");function o(w){var h=x.select(w).selectAll("g.barlayer").selectAll("g.trace");a(w,h,"bar");var L=h.size(),E=w._fullLayout;h.style("opacity",function(S){return S[0].trace.opacity}).each(function(S){(E.barmode==="stack"&&L>1||E.bargap===0&&E.bargroupgap===0&&!S[0].trace.marker.line.width)&&x.select(this).attr("shape-rendering","crispEdges")}),h.selectAll("g.points").each(function(S){var P=x.select(this),F=S[0].trace;b(P,F,w)}),e.getComponentMethod("errorbars","style")(h)}function b(w,h,L){M.pointStyle(w.selectAll("path"),h,L),g(w,h,L)}function g(w,h,L){w.selectAll("text").each(function(E){var S=x.select(this),P=T.ensureUniformFontSize(L,l(S,E,h,L));M.font(S,P)})}function d(w,h,L){var E=h[0].trace;E.selectedpoints?c(L,E,w):(b(L,E,w),e.getComponentMethod("errorbars","style")(L))}function c(w,h,L){M.selectedPointStyle(w.selectAll("path"),h),m(w.selectAll("text"),h,L)}function m(w,h,L){w.each(function(E){var S=x.select(this),P;if(E.selected){P=T.ensureUniformFontSize(L,l(S,E,h,L));var F=h.selected.textfont&&h.selected.textfont.color;F&&(P.color=F),M.font(S,P)}else M.selectedTextStyle(S,h)})}function l(w,h,L,E){var S=E._fullLayout.font,P=L.textfont;if(w.classed("bartext-inside")){var F=p(h,L);P=u(L,h.i,S,F)}else w.classed("bartext-outside")&&(P=A(L,h.i,S));return P}function y(w,h,L){return _(n,w.textfont,h,L)}function u(w,h,L,E){var S=y(w,h,L),P=w._input.textfont===void 0||w._input.textfont.color===void 0||Array.isArray(w.textfont.color)&&w.textfont.color[h]===void 0;return P&&(S={color:f.contrast(E),family:S.family,size:S.size}),_(r,w.insidetextfont,h,S)}function A(w,h,L){var E=y(w,h,L);return _(v,w.outsidetextfont,h,E)}function _(w,h,L,E){h=h||{};var S=s.getValue(h.family,L),P=s.getValue(h.size,L),F=s.getValue(h.color,L);return{family:s.coerceString(w.family,S,E.family),size:s.coerceNumber(w.size,P,E.size),color:s.coerceColor(w.color,F,E.color)}}function p(w,h){return h.type==="waterfall"?h[w.dir].marker.color:w.mcc||w.mc||h.marker.color}B.exports={style:o,styleTextPoints:g,styleOnSelect:d,getInsideTextFont:u,getOutsideTextFont:A,getBarColor:p,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(t,B,G){var x=t("../../components/color"),f=t("../../components/colorscale/helpers").hasColorscale,M=t("../../components/colorscale/defaults"),T=t("../../lib").coercePattern;B.exports=function(a,i,n,r,v){var s=n("marker.color",r),o=f(a,"marker");o&&M(a,i,v,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",x.defaultLine),f(a,"marker.line")&&M(a,i,v,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),T(n,"marker.pattern",s,o),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib");function M(i,n,r){var v=i._fullLayout,s=v["_"+r+"Text_minsize"];if(s){var o=v.uniformtext.mode==="hide",b;switch(r){case"funnelarea":case"pie":case"sunburst":b="g.slice";break;case"treemap":case"icicle":b="g.slice, g.pathbar";break;default:b="g.points > g.point"}n.selectAll(b).each(function(g){var d=g.transform;if(d){d.scale=o&&d.hide?0:s/d.fontSize;var c=x.select(this).select("text");f.setTransormAndDisplay(c,d)}})}}function T(i,n,r){if(r.uniformtext.mode){var v=a(i),s=r.uniformtext.minsize,o=n.scale*n.fontSize;n.hide=o<s,r[v]=r[v]||1/0,n.hide||(r[v]=Math.min(r[v],Math.max(o,s)))}}function e(i,n){var r=a(i);n[r]=void 0}function a(i){return"_"+i+"Text_minsize"}B.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:M}},{"../../lib":515,"@plotly/d3":58}],674:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../lib/extend").extendFlat,M=t("../scatterpolar/attributes"),T=t("../bar/attributes");B.exports={r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,base:f({},T.base,{}),offset:f({},T.offset,{}),width:f({},T.width,{}),text:f({},T.text,{}),hovertext:f({},T.hovertext,{}),marker:T.marker,hoverinfo:M.hoverinfo,hovertemplate:x(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(t,B,G){var x=t("../../components/colorscale/helpers").hasColorscale,f=t("../../components/colorscale/calc"),M=t("../bar/arrays_to_calcdata"),T=t("../bar/cross_trace_calc").setGroupPositions,e=t("../scatter/calc_selection"),a=t("../../registry").traceIs,i=t("../../lib").extendFlat;function n(v,s){for(var o=v._fullLayout,b=s.subplot,g=o[b].radialaxis,d=o[b].angularaxis,c=g.makeCalcdata(s,"r"),m=d.makeCalcdata(s,"theta"),l=s._length,y=new Array(l),u=c,A=m,_=0;_<l;_++)y[_]={p:A[_],s:u[_]};function p(w){var h=s[w];h!==void 0&&(s["_"+w]=Array.isArray(h)?d.makeCalcdata(s,w):d.d2c(h,s.thetaunit))}return d.type==="linear"&&(p("width"),p("offset")),x(s,"marker")&&f(v,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),x(s,"marker.line")&&f(v,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),M(y,s),e(y,s),y}function r(v,s,o){for(var b=v.calcdata,g=[],d=0;d<b.length;d++){var c=b[d],m=c[0].trace;m.visible===!0&&a(m,"bar")&&m.subplot===o&&g.push(c)}var l=i({},s.radialaxis,{_id:"x"}),y=s.angularaxis;T(v,y,l,g,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}B.exports={calc:n,crossTraceCalc:r}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(t,B,G){var x=t("../../lib"),f=t("../scatterpolar/defaults").handleRThetaDefaults,M=t("../bar/style_defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(o,b){return x.coerce(a,i,T,o,b)}var s=f(a,i,r,v);if(!s){i.visible=!1;return}v("thetaunit"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate"),M(a,i,v,n,r),x.coerceSelectionMarkerOpacity(i,v)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(t,B,G){var x=t("../../components/fx"),f=t("../../lib"),M=t("../bar/hover").getTraceColor,T=f.fillText,e=t("../scatterpolar/hover").makeHoverPointText,a=t("../../plots/polar/helpers").isPtInsidePolygon;B.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.subplot,g=b.radialAxis,d=b.angularAxis,c=b.vangles,m=c?a:f.isPtInsideSector,l=n.maxHoverDistance,y=d._period||2*Math.PI,u=Math.abs(g.g2p(Math.sqrt(r*r+v*v))),A=Math.atan2(v,r);g.range[0]>g.range[1]&&(A+=Math.PI);var _=function(L){return m(u,A,[L.rp0,L.rp1],[L.thetag0,L.thetag1],c)?l+Math.min(1,Math.abs(L.thetag1-L.thetag0)/y)-1+(L.rp1-u)/(L.rp1-L.rp0)-1:1/0};if(x.getClosest(s,_,n),n.index!==!1){var p=n.index,w=s[p];n.x0=n.x1=w.ct[0],n.y0=n.y1=w.ct[1];var h=f.extendFlat({},w,{r:w.s,theta:w.p});return T(w,o,n),e(h,o,b,n),n.hovertemplate=o.hovertemplate,n.color=M(o,w),n.xLabelVal=n.yLabelVal=void 0,w.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(t,B,G){B.exports={moduleType:"trace",name:"barpolar",basePlotModule:t("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("../scatterpolar/format_labels"),style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(t,B,G){B.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(M,T,e){var a={},i;function n(s,o){return x.coerce(M[i]||{},T[i],f,s,o)}for(var r=0;r<e.length;r++){var v=e[r];v.type==="barpolar"&&v.visible===!0&&(i=v.subplot,a[i]||(n("barmode"),n("bargap"),a[i]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(t,B,G){var x=t("@plotly/d3"),f=t("fast-isnumeric"),M=t("../../lib"),T=t("../../components/drawing"),e=t("../../plots/polar/helpers");B.exports=function(n,r,v){var s=r.xaxis,o=r.yaxis,b=r.radialAxis,g=r.angularAxis,d=a(r),c=r.layers.frontplot.select("g.barlayer");M.makeTraceGroups(c,v,"trace bars").each(function(){var m=x.select(this),l=M.ensureSingle(m,"g","points"),y=l.selectAll("g.point").data(M.identity);y.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),y.exit().remove(),y.each(function(u){var A=x.select(this),_=u.rp0=b.c2p(u.s0),p=u.rp1=b.c2p(u.s1),w=u.thetag0=g.c2g(u.p0),h=u.thetag1=g.c2g(u.p1),L;if(!f(_)||!f(p)||!f(w)||!f(h)||_===p||w===h)L="M0,0Z";else{var E=b.c2g(u.s1),S=(w+h)/2;u.ct=[s.c2p(E*Math.cos(S)),o.c2p(E*Math.sin(S))],L=d(_,p,w,h)}M.ensureSingle(A,"path").attr("d",L)}),T.setClipUrl(m,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})};function a(i){var n=i.cxx,r=i.cyy;return i.vangles?function(v,s,o,b){var g,d;M.angleDelta(o,b)>0?(g=o,d=b):(g=b,d=o);var c=e.findEnclosingVertexAngles(g,i.vangles)[0],m=e.findEnclosingVertexAngles(d,i.vangles)[1],l=[c,(g+d)/2,m];return e.pathPolygonAnnulus(v,s,g,d,l,n,r)}:function(v,s,o,b){return M.pathAnnulus(v,s,o,b,n,r)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(t,B,G){var x=t("../scatter/attributes"),f=t("../bar/attributes"),M=t("../../components/color/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../lib/extend").extendFlat,i=x.marker,n=i.line;B.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:a({},i.angle,{arrayOk:!1,editType:"calc"}),size:a({},i.size,{arrayOk:!1,editType:"calc"}),color:a({},i.color,{arrayOk:!1,editType:"style"}),line:{color:a({},n.color,{arrayOk:!1,dflt:M.defaultLine,editType:"style"}),width:a({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:x.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup,selected:{marker:x.selected.marker,editType:"style"},unselected:{marker:x.unselected.marker,editType:"style"},text:a({},x.text,{}),hovertext:a({},x.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../plots/cartesian/axes"),M=t("../../plots/cartesian/align_period"),T=t("../../lib"),e=t("../../constants/numerical").BADNUM,a=T._;B.exports=function(A,_){var p=A._fullLayout,w=f.getFromId(A,_.xaxis||"x"),h=f.getFromId(A,_.yaxis||"y"),L=[],E=_.type==="violin"?"_numViolins":"_numBoxes",S,P,F,I,D,R,O;_.orientation==="h"?(F=w,I="x",D=h,R="y",O=!!_.yperiodalignment):(F=h,I="y",D=w,R="x",O=!!_.xperiodalignment);var z=i(_,R,D,p[E]),H=z[0],Y=z[1],ee=T.distinctVals(H,D),j=ee.vals,X=ee.minDiff/2,ae,fe,K,J,U,V,q=(_.boxpoints||_.points)==="all"?T.identity:function(Bt){return Bt.v<ae.lf||Bt.v>ae.uf};if(_._hasPreCompStats){var re=_[I],Z=function(Bt){return F.d2c((_[Bt]||[])[S])},Q=1/0,ie=-1/0;for(S=0;S<_._length;S++){var oe=H[S];if(!!x(oe)){if(ae={},ae.pos=ae[R]=oe,O&&Y&&(ae.orig_p=Y[S]),ae.q1=Z("q1"),ae.med=Z("median"),ae.q3=Z("q3"),fe=[],re&&T.isArrayOrTypedArray(re[S]))for(P=0;P<re[S].length;P++)V=F.d2c(re[S][P]),V!==e&&(U={v:V,i:[S,P]},s(U,_,[S,P]),fe.push(U));if(ae.pts=fe.sort(b),K=ae[I]=fe.map(g),J=K.length,ae.med!==e&&ae.q1!==e&&ae.q3!==e&&ae.med>=ae.q1&&ae.q3>=ae.med){var ne=Z("lowerfence");ae.lf=ne!==e&&ne<=ae.q1?ne:d(ae,K,J);var se=Z("upperfence");ae.uf=se!==e&&se>=ae.q3?se:c(ae,K,J);var _e=Z("mean");ae.mean=_e!==e?_e:J?T.mean(K,J):(ae.q1+ae.q3)/2;var ue=Z("sd");ae.sd=_e!==e&&ue>=0?ue:J?T.stdev(K,J,ae.mean):ae.q3-ae.q1,ae.lo=m(ae),ae.uo=l(ae);var ge=Z("notchspan");ge=ge!==e&&ge>0?ge:y(ae,J),ae.ln=ae.med-ge,ae.un=ae.med+ge;var xe=ae.lf,ye=ae.uf;_.boxpoints&&K.length&&(xe=Math.min(xe,K[0]),ye=Math.max(ye,K[J-1])),_.notched&&(xe=Math.min(xe,ae.ln),ye=Math.max(ye,ae.un)),ae.min=xe,ae.max=ye}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+ae.q1,"median = "+ae.med,"q3 = "+ae.q3].join(`
`));var be;ae.med!==e?be=ae.med:ae.q1!==e?ae.q3!==e?be=(ae.q1+ae.q3)/2:be=ae.q1:ae.q3!==e?be=ae.q3:be=0,ae.med=be,ae.q1=ae.q3=be,ae.lf=ae.uf=be,ae.mean=ae.sd=be,ae.ln=ae.un=be,ae.min=ae.max=be}Q=Math.min(Q,ae.min),ie=Math.max(ie,ae.max),ae.pts2=fe.filter(q),L.push(ae)}}_._extremes[F._id]=f.findExtremes(F,[Q,ie],{padded:!0})}else{var Se=F.makeCalcdata(_,I),Re=n(j,X),Ve=j.length,Ae=r(Ve);for(S=0;S<_._length;S++)if(V=Se[S],!!x(V)){var Ce=T.findBin(H[S],Re);Ce>=0&&Ce<Ve&&(U={v:V,i:S},s(U,_,S),Ae[Ce].push(U))}var Ze=1/0,Ye=-1/0,ze=_.quartilemethod,Ie=ze==="exclusive",Ge=ze==="inclusive";for(S=0;S<Ve;S++)if(Ae[S].length>0){if(ae={},ae.pos=ae[R]=j[S],fe=ae.pts=Ae[S].sort(b),K=ae[I]=fe.map(g),J=K.length,ae.min=K[0],ae.max=K[J-1],ae.mean=T.mean(K,J),ae.sd=T.stdev(K,J,ae.mean),ae.med=T.interp(K,.5),J%2&&(Ie||Ge)){var dt,Rt;Ie?(dt=K.slice(0,J/2),Rt=K.slice(J/2+1)):Ge&&(dt=K.slice(0,J/2+1),Rt=K.slice(J/2)),ae.q1=T.interp(dt,.5),ae.q3=T.interp(Rt,.5)}else ae.q1=T.interp(K,.25),ae.q3=T.interp(K,.75);ae.lf=d(ae,K,J),ae.uf=c(ae,K,J),ae.lo=m(ae),ae.uo=l(ae);var Qt=y(ae,J);ae.ln=ae.med-Qt,ae.un=ae.med+Qt,Ze=Math.min(Ze,ae.ln),Ye=Math.max(Ye,ae.un),ae.pts2=fe.filter(q),L.push(ae)}_._extremes[F._id]=f.findExtremes(F,_.notched?Se.concat([Ze,Ye]):Se,{padded:!0})}return o(L,_),L.length>0?(L[0].t={num:p[E],dPos:X,posLetter:R,valLetter:I,labels:{med:a(A,"median:"),min:a(A,"min:"),q1:a(A,"q1:"),q3:a(A,"q3:"),max:a(A,"max:"),mean:_.boxmean==="sd"?a(A,"mean \xB1 \u03C3:"):a(A,"mean:"),lf:a(A,"lower fence:"),uf:a(A,"upper fence:")}},p[E]++,L):[{t:{empty:!0}}]};function i(u,A,_,p){var w=A in u,h=A+"0"in u,L="d"+A in u;if(w||h&&L){var E=_.makeCalcdata(u,A),S=M(u,_,A,E).vals;return[S,E]}var P;h?P=u[A+"0"]:"name"in u&&(_.type==="category"||x(u.name)&&["linear","log"].indexOf(_.type)!==-1||T.isDateTime(u.name)&&_.type==="date")?P=u.name:P=p;for(var F=_.type==="multicategory"?_.r2c_just_indices(P):_.d2c(P,0,u[A+"calendar"]),I=u._length,D=new Array(I),R=0;R<I;R++)D[R]=F;return[D]}function n(u,A){for(var _=u.length,p=new Array(_+1),w=0;w<_;w++)p[w]=u[w]-A;return p[_]=u[_-1]+A,p}function r(u){for(var A=new Array(u),_=0;_<u;_++)A[_]=[];return A}var v={text:"tx",hovertext:"htx"};function s(u,A,_){for(var p in v)T.isArrayOrTypedArray(A[p])&&(Array.isArray(_)?T.isArrayOrTypedArray(A[p][_[0]])&&(u[v[p]]=A[p][_[0]][_[1]]):u[v[p]]=A[p][_])}function o(u,A){if(T.isArrayOrTypedArray(A.selectedpoints))for(var _=0;_<u.length;_++){for(var p=u[_].pts||[],w={},h=0;h<p.length;h++)w[p[h].i]=h;T.tagSelected(p,A,w)}}function b(u,A){return u.v-A.v}function g(u){return u.v}function d(u,A,_){return _===0?u.q1:Math.min(u.q1,A[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,A,!0)+1,_-1)])}function c(u,A,_){return _===0?u.q3:Math.max(u.q3,A[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,A),0)])}function m(u){return 4*u.q1-3*u.q3}function l(u){return 4*u.q3-3*u.q1}function y(u,A){return A===0?0:1.57*(u.q3-u.q1)/Math.sqrt(A)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib"),M=t("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(i,n){for(var r=i.calcdata,v=n.xaxis,s=n.yaxis,o=0;o<T.length;o++){for(var b=T[o],g=b==="h"?s:v,d=[],c=0;c<r.length;c++){var m=r[c],l=m[0].t,y=m[0].trace;y.visible===!0&&(y.type==="box"||y.type==="candlestick")&&!l.empty&&(y.orientation||"v")===b&&y.xaxis===v._id&&y.yaxis===s._id&&d.push(c)}a("box",i,d,g)}}function a(i,n,r,v){var s=n.calcdata,o=n._fullLayout,b=v._id,g=b.charAt(0),d,c,m,l=[],y=0;for(d=0;d<r.length;d++)for(m=s[r[d]],c=0;c<m.length;c++)l.push(v.c2l(m[c].pos,!0)),y+=(m[c].pts2||[]).length;if(!!l.length){var u=f.distinctVals(l);(v.type==="category"||v.type==="multicategory")&&(u.minDiff=1);var A=u.minDiff/2;x.minDtick(v,u.minDiff,u.vals[0],!0);var _=i==="violin"?"_numViolins":"_numBoxes",p=o[_],w=o[i+"mode"]==="group"&&p>1,h=1-o[i+"gap"],L=1-o[i+"groupgap"];for(d=0;d<r.length;d++){m=s[r[d]];var E=m[0].trace,S=m[0].t,P=E.width,F=E.side,I,D,R,O;if(P)I=D=O=P/2,R=0;else if(I=A,w){var z=M(o,v._id)+E.orientation,H=o._alignmentOpts[z]||{},Y=H[E.alignmentgroup]||{},ee=Object.keys(Y.offsetGroups||{}).length,j=ee||p,X=ee?E._offsetIndex:S.num;D=I*h*L/j,R=2*I*(-.5+(X+.5)/j)*h,O=I*h/j}else D=I*h*L,R=0,O=I;S.dPos=I,S.bPos=R,S.bdPos=D,S.wHover=O;var ae,fe,K=R+D,J,U,V,q,re,Z,Q=Boolean(P),ie=(E.boxpoints||E.points)&&y>0;if(F==="positive"?(ae=I*(P?1:.5),J=K,fe=J=R):F==="negative"?(ae=J=R,fe=I*(P?1:.5),U=K):(ae=fe=I,J=U=K),ie){var oe=E.pointpos,ne=E.jitter,se=E.marker.size/2,_e=0;oe+ne>=0&&(_e=K*(oe+ne),_e>ae?(Q=!0,re=se,V=_e):_e>J&&(re=se,V=ae)),_e<=ae&&(V=ae);var ue=0;oe-ne<=0&&(ue=-K*(oe-ne),ue>fe?(Q=!0,Z=se,q=ue):ue>U&&(Z=se,q=fe)),ue<=fe&&(q=fe)}else V=ae,q=fe;var ge=new Array(m.length);for(c=0;c<m.length;c++)ge[c]=m[c].pos;E._extremes[b]=x.findExtremes(v,ge,{padded:Q,vpadminus:q,vpadplus:V,vpadLinearized:!0,ppadminus:{x:Z,y:re}[g],ppadplus:{x:re,y:Z}[g]})}}}B.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(t,B,G){var x=t("../../lib"),f=t("../../registry"),M=t("../../components/color"),T=t("../scatter/period_defaults"),e=t("../bar/defaults").handleGroupingDefaults,a=t("../../plots/cartesian/axis_autotype"),i=t("./attributes");function n(o,b,g,d){function c(w,h){return x.coerce(o,b,i,w,h)}if(r(o,b,c,d),b.visible!==!1){T(o,b,d,c),c("xhoverformat"),c("yhoverformat");var m=b._hasPreCompStats;m&&(c("lowerfence"),c("upperfence")),c("line.color",(o.marker||{}).color||g),c("line.width"),c("fillcolor",M.addOpacity(b.line.color,.5));var l=!1;if(m){var y=c("mean"),u=c("sd");y&&y.length&&(l=!0,u&&u.length&&(l="sd"))}c("boxmean",l),c("whiskerwidth"),c("width"),c("quartilemethod");var A=!1;if(m){var _=c("notchspan");_&&_.length&&(A=!0)}else x.validate(o.notchwidth,i.notchwidth)&&(A=!0);var p=c("notched",A);p&&c("notchwidth"),v(o,b,c,{prefix:"box"})}}function r(o,b,g,d){function c(ee){var j=0;return ee&&ee.length&&(j+=1,x.isArrayOrTypedArray(ee[0])&&ee[0].length&&(j+=1)),j}function m(ee){return x.validate(o[ee],i[ee])}var l=g("y"),y=g("x"),u;if(b.type==="box"){var A=g("q1"),_=g("median"),p=g("q3");b._hasPreCompStats=A&&A.length&&_&&_.length&&p&&p.length,u=Math.min(x.minRowLength(A),x.minRowLength(_),x.minRowLength(p))}var w=c(l),h=c(y),L=w&&x.minRowLength(l),E=h&&x.minRowLength(y),S=d.calendar,P={autotypenumbers:d.autotypenumbers},F,I;if(b._hasPreCompStats)switch(String(h)+String(w)){case"00":var D=m("x0")||m("dx"),R=m("y0")||m("dy");R&&!D?F="h":F="v",I=u;break;case"10":F="v",I=Math.min(u,E);break;case"20":F="h",I=Math.min(u,y.length);break;case"01":F="h",I=Math.min(u,L);break;case"02":F="v",I=Math.min(u,l.length);break;case"12":F="v",I=Math.min(u,E,l.length);break;case"21":F="h",I=Math.min(u,y.length,L);break;case"11":I=0;break;case"22":var O=!1,z;for(z=0;z<y.length;z++)if(a(y[z],S,P)==="category"){O=!0;break}if(O)F="v",I=Math.min(u,E,l.length);else{for(z=0;z<l.length;z++)if(a(l[z],S,P)==="category"){O=!0;break}O?(F="h",I=Math.min(u,y.length,L)):(F="v",I=Math.min(u,E,l.length))}break}else w>0?(F="v",h>0?I=Math.min(E,L):I=Math.min(L)):h>0?(F="h",I=Math.min(E)):I=0;if(!I){b.visible=!1;return}b._length=I;var H=g("orientation",F);b._hasPreCompStats?H==="v"&&h===0?(g("x0",0),g("dx",1)):H==="h"&&w===0&&(g("y0",0),g("dy",1)):H==="v"&&h===0?g("x0"):H==="h"&&w===0&&g("y0");var Y=f.getComponentMethod("calendars","handleTraceDefaults");Y(o,b,["x","y"],d)}function v(o,b,g,d){var c=d.prefix,m=x.coerce2(o,b,i,"marker.outliercolor"),l=g("marker.line.outliercolor"),y="outliers";b._hasPreCompStats?y="all":(m||l)&&(y="suspectedoutliers");var u=g(c+"points",y);u?(g("jitter",u==="all"?.3:0),g("pointpos",u==="all"?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.angle"),g("marker.color",b.line.color),g("marker.line.color"),g("marker.line.width"),u==="suspectedoutliers"&&(g("marker.line.outliercolor",b.marker.color),g("marker.line.outlierwidth")),g("selected.marker.color"),g("unselected.marker.color"),g("selected.marker.size"),g("unselected.marker.size"),g("text"),g("hovertext")):delete b.marker;var A=g("hoveron");(A==="all"||A.indexOf("points")!==-1)&&g("hovertemplate"),x.coerceSelectionMarkerOpacity(b,g)}function s(o,b){var g,d;function c(y){return x.coerce(d._input,d,i,y)}for(var m=0;m<o.length;m++){d=o[m];var l=d.type;(l==="box"||l==="violin")&&(g=d._input,b[l+"mode"]==="group"&&e(g,d,b,c))}}B.exports={supplyDefaults:n,crossTraceDefaults:s,handleSampleDefaults:r,handlePointsDefaults:v}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(t,B,G){B.exports=function(f,M){return M.hoverOnBox&&(f.hoverOnBox=M.hoverOnBox),"xVal"in M&&(f.x=M.xVal),"yVal"in M&&(f.y=M.yVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],687:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib"),M=t("../../components/fx"),T=t("../../components/color"),e=f.fillText;function a(r,v,s,o){var b=r.cd,g=b[0].trace,d=g.hoveron,c=[],m;return d.indexOf("boxes")!==-1&&(c=c.concat(i(r,v,s,o))),d.indexOf("points")!==-1&&(m=n(r,v,s)),o==="closest"?m?[m]:c:(m&&c.push(m),c)}function i(r,v,s,o){var b=r.cd,g=r.xa,d=r.ya,c=b[0].trace,m=b[0].t,l=c.type==="violin",y,u,A,_,p,w,h,L,E,S,P,F=m.bdPos,I,D,R=m.wHover,O=function(ue){return A.c2l(ue.pos)+m.bPos-A.c2l(w)};l&&c.side!=="both"?(c.side==="positive"&&(E=function(ue){var ge=O(ue);return M.inbox(ge,ge+R,S)},I=F,D=0),c.side==="negative"&&(E=function(ue){var ge=O(ue);return M.inbox(ge-R,ge,S)},I=0,D=F)):(E=function(ue){var ge=O(ue);return M.inbox(ge-R,ge+R,S)},I=D=F);var z;l?z=function(ue){return M.inbox(ue.span[0]-p,ue.span[1]-p,S)}:z=function(ue){return M.inbox(ue.min-p,ue.max-p,S)},c.orientation==="h"?(p=v,w=s,h=z,L=E,y="y",A=d,u="x",_=g):(p=s,w=v,h=E,L=z,y="x",A=g,u="y",_=d);var H=Math.min(1,F/Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0])));S=r.maxHoverDistance-H,P=r.maxSpikeDistance-H;function Y(ue){return(h(ue)+L(ue))/2}var ee=M.getDistanceFunction(o,h,L,Y);if(M.getClosest(b,ee,r),r.index===!1)return[];var j=b[r.index],X=c.line.color,ae=(c.marker||{}).color;T.opacity(X)&&c.line.width?r.color=X:T.opacity(ae)&&c.boxpoints?r.color=ae:r.color=c.fillcolor,r[y+"0"]=A.c2p(j.pos+m.bPos-D,!0),r[y+"1"]=A.c2p(j.pos+m.bPos+I,!0),r[y+"LabelVal"]=j.orig_p!==void 0?j.orig_p:j.pos;var fe=y+"Spike";r.spikeDistance=Y(j)*P/S,r[fe]=A.c2p(j.pos,!0);var K=c.boxmean||(c.meanline||{}).visible,J=c.boxpoints||c.points,U=J&&K?["max","uf","q3","med","mean","q1","lf","min"]:J&&!K?["max","uf","q3","med","q1","lf","min"]:!J&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],V=_.range[1]<_.range[0];c.orientation===(V?"v":"h")&&U.reverse();for(var q=r.spikeDistance,re=r[fe],Z=[],Q=0;Q<U.length;Q++){var ie=U[Q];if(ie in j){var oe=j[ie],ne=_.c2p(oe,!0),se=f.extendFlat({},r);se.attr=ie,se[u+"0"]=se[u+"1"]=ne,se[u+"LabelVal"]=oe,se[u+"Label"]=(m.labels?m.labels[ie]+" ":"")+x.hoverLabelText(_,oe,c[u+"hoverformat"]),se.hoverOnBox=!0,ie==="mean"&&"sd"in j&&c.boxmean==="sd"&&(se[u+"err"]=j.sd),se.hovertemplate=!1,Z.push(se)}}r.name="",r.spikeDistance=void 0,r[fe]=void 0;for(var _e=0;_e<Z.length;_e++)Z[_e].attr!=="med"?(Z[_e].name="",Z[_e].spikeDistance=void 0,Z[_e][fe]=void 0):(Z[_e].spikeDistance=q,Z[_e][fe]=re);return Z}function n(r,v,s){for(var o=r.cd,b=r.xa,g=r.ya,d=o[0].trace,c=b.c2p(v),m=g.c2p(s),l,y=function(z){var H=Math.max(3,z.mrc||0);return Math.max(Math.abs(b.c2p(z.x)-c)-H,1-3/H)},u=function(z){var H=Math.max(3,z.mrc||0);return Math.max(Math.abs(g.c2p(z.y)-m)-H,1-3/H)},A=M.quadrature(y,u),_=!1,p,w,h=0;h<o.length;h++){p=o[h];for(var L=0;L<(p.pts||[]).length;L++){w=p.pts[L];var E=A(w);E<=r.distance&&(r.distance=E,_=[h,L])}}if(!_)return!1;p=o[_[0]],w=p.pts[_[1]];var S=b.c2p(w.x,!0),P=g.c2p(w.y,!0),F=w.mrc||1;l=f.extendFlat({},r,{index:w.i,color:(d.marker||{}).color,name:d.name,x0:S-F,x1:S+F,y0:P-F,y1:P+F,spikeDistance:r.distance,hovertemplate:d.hovertemplate});var I=p.orig_p,D=I!==void 0?I:p.pos,R;d.orientation==="h"?(R=g,l.xLabelVal=w.x,l.yLabelVal=D):(R=b,l.xLabelVal=D,l.yLabelVal=w.y);var O=R._id.charAt(0);return l[O+"Spike"]=R.c2p(p.pos,!0),e(w,d,l),l}B.exports={hoverPoints:a,hoverOnBoxes:i,hoverOnPoints:n}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(t,B,G){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults").supplyLayoutDefaults,calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"box",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(t,B,G){B.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("./layout_attributes");function T(a,i,n,r,v){for(var s=v+"Layout",o=!1,b=0;b<n.length;b++){var g=n[b];if(x.traceIs(g,s)){o=!0;break}}!o||(r(v+"mode"),r(v+"gap"),r(v+"groupgap"))}function e(a,i,n){function r(v,s){return f.coerce(a,i,M,v,s)}T(a,i,n,r,"box")}B.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=5,e=.01;function a(v,s,o,b){var g=s.xaxis,d=s.yaxis;f.makeTraceGroups(b,o,"trace boxes").each(function(c){var m=x.select(this),l=c[0],y=l.t,u=l.trace;if(y.wdPos=y.bdPos*u.whiskerwidth,u.visible!==!0||y.empty){m.remove();return}var A,_;u.orientation==="h"?(A=d,_=g):(A=g,_=d),i(m,{pos:A,val:_},u,y),n(m,{x:g,y:d},u,y),r(m,{pos:A,val:_},u,y)})}function i(v,s,o,b){var g=o.orientation==="h",d=s.val,c=s.pos,m=!!c.rangebreaks,l=b.bPos,y=b.wdPos||0,u=b.bPosPxOffset||0,A=o.whiskerwidth||0,_=o.notched||!1,p=_?1-2*o.notchwidth:1,w,h;Array.isArray(b.bdPos)?(w=b.bdPos[0],h=b.bdPos[1]):(w=b.bdPos,h=b.bdPos);var L=v.selectAll("path.box").data(o.type!=="violin"||o.box.visible?f.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(E){if(E.empty)return"M0,0Z";var S=c.c2l(E.pos+l,!0),P=c.l2p(S-w)+u,F=c.l2p(S+h)+u,I=m?(P+F)/2:c.l2p(S)+u,D=o.whiskerwidth,R=m?P*D+(1-D)*I:c.l2p(S-y)+u,O=m?F*D+(1-D)*I:c.l2p(S+y)+u,z=c.l2p(S-w*p)+u,H=c.l2p(S+h*p)+u,Y=d.c2p(E.q1,!0),ee=d.c2p(E.q3,!0),j=f.constrain(d.c2p(E.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),X=E.lf===void 0||o.boxpoints===!1,ae=d.c2p(X?E.min:E.lf,!0),fe=d.c2p(X?E.max:E.uf,!0),K=d.c2p(E.ln,!0),J=d.c2p(E.un,!0);g?x.select(this).attr("d","M"+j+","+z+"V"+H+"M"+Y+","+P+"V"+F+(_?"H"+K+"L"+j+","+H+"L"+J+","+F:"")+"H"+ee+"V"+P+(_?"H"+J+"L"+j+","+z+"L"+K+","+P:"")+"ZM"+Y+","+I+"H"+ae+"M"+ee+","+I+"H"+fe+(A===0?"":"M"+ae+","+R+"V"+O+"M"+fe+","+R+"V"+O)):x.select(this).attr("d","M"+z+","+j+"H"+H+"M"+P+","+Y+"H"+F+(_?"V"+K+"L"+H+","+j+"L"+F+","+J:"")+"V"+ee+"H"+P+(_?"V"+J+"L"+z+","+j+"L"+P+","+K:"")+"ZM"+I+","+Y+"V"+ae+"M"+I+","+ee+"V"+fe+(A===0?"":"M"+R+","+ae+"H"+O+"M"+R+","+fe+"H"+O))})}function n(v,s,o,b){var g=s.x,d=s.y,c=b.bdPos,m=b.bPos,l=o.boxpoints||o.points;f.seedPseudoRandom();var y=function(_){return _.forEach(function(p){p.t=b,p.trace=o}),_},u=v.selectAll("g.points").data(l?y:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var A=u.selectAll("path").data(function(_){var p,w=_.pts2,h=Math.max((_.max-_.min)/10,_.q3-_.q1),L=h*1e-9,E=h*e,S=[],P=0,F;if(o.jitter){if(h===0)for(P=1,S=new Array(w.length),p=0;p<w.length;p++)S[p]=1;else for(p=0;p<w.length;p++){var I=Math.max(0,p-T),D=w[I].v,R=Math.min(w.length-1,p+T),O=w[R].v;l!=="all"&&(w[p].v<_.lf?O=Math.min(O,_.lf):D=Math.max(D,_.uf));var z=Math.sqrt(E*(R-I)/(O-D+L))||0;z=f.constrain(Math.abs(z),0,1),S.push(z),P=Math.max(z,P)}F=o.jitter*2/(P||1)}for(p=0;p<w.length;p++){var H=w[p],Y=H.v,ee=o.jitter?F*S[p]*(f.pseudoRandom()-.5):0,j=_.pos+m+c*(o.pointpos+ee);o.orientation==="h"?(H.y=j,H.x=Y):(H.x=j,H.y=Y),l==="suspectedoutliers"&&Y<_.uo&&Y>_.lo&&(H.so=!0)}return w});A.enter().append("path").classed("point",!0),A.exit().remove(),A.call(M.translatePoints,g,d)}function r(v,s,o,b){var g=s.val,d=s.pos,c=!!d.rangebreaks,m=b.bPos,l=b.bPosPxOffset||0,y=o.boxmean||(o.meanline||{}).visible,u,A;Array.isArray(b.bdPos)?(u=b.bdPos[0],A=b.bdPos[1]):(u=b.bdPos,A=b.bdPos);var _=v.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?f.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(p){var w=d.c2l(p.pos+m,!0),h=d.l2p(w-u)+l,L=d.l2p(w+A)+l,E=c?(h+L)/2:d.l2p(w)+l,S=g.c2p(p.mean,!0),P=g.c2p(p.mean-p.sd,!0),F=g.c2p(p.mean+p.sd,!0);o.orientation==="h"?x.select(this).attr("d","M"+S+","+h+"V"+L+(y==="sd"?"m0,0L"+P+","+E+"L"+S+","+h+"L"+F+","+E+"Z":"")):x.select(this).attr("d","M"+h+","+S+"H"+L+(y==="sd"?"m0,0L"+E+","+P+"L"+h+","+S+"L"+E+","+F+"Z":""))})}B.exports={plot:a,plotBoxAndWhiskers:i,plotPoints:n,plotBoxMean:r}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(t,B,G){B.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,i=[],n,r;if(M===!1)for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++)T[n].pts[r].selected=0;else for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++){var v=T[n].pts[r],s=e.c2p(v.x),o=a.c2p(v.y);M.contains([s,o],null,v.i,f)?(i.push({pointNumber:v.i,x:e.c2d(v.x),y:a.c2d(v.y)}),v.selected=1):v.selected=0}return i}},{}],693:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../../components/drawing");function T(a,i,n){var r=n||x.select(a).selectAll("g.trace.boxes");r.style("opacity",function(v){return v[0].trace.opacity}),r.each(function(v){var s=x.select(this),o=v[0].trace,b=o.line.width;function g(m,l,y,u){m.style("stroke-width",l+"px").call(f.stroke,y).call(f.fill,u)}var d=s.selectAll("path.box");if(o.type==="candlestick")d.each(function(m){if(!m.empty){var l=x.select(this),y=o[m.dir];g(l,y.line.width,y.line.color,y.fillcolor),l.style("opacity",o.selectedpoints&&!m.selected?.3:1)}});else{g(d,b,o.line.color,o.fillcolor),s.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(f.stroke,o.line.color);var c=s.selectAll("path.point");M.pointStyle(c,o,a)}})}function e(a,i,n){var r=i[0].trace,v=n.selectAll("path.point");r.selectedpoints?M.selectedPointStyle(v,r):M.pointStyle(v,r,a)}B.exports={style:T,styleOnSelect:e}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(t,B,G){var x=t("../../lib").extendFlat,f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../ohlc/attributes"),T=t("../box/attributes");function e(a){return{line:{color:x({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}B.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),x:M.x,open:M.open,high:M.high,low:M.low,close:M.close,line:{width:x({},T.line.width,{}),editType:"style"},increasing:e(M.increasing.line.color.dflt),decreasing:e(M.decreasing.line.color.dflt),text:M.text,hovertext:M.hovertext,whiskerwidth:x({},T.whiskerwidth,{dflt:0}),hoverlabel:M.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../../plots/cartesian/align_period"),T=t("../ohlc/calc").calcCommon;B.exports=function(a,i){var n=a._fullLayout,r=f.getFromId(a,i.xaxis),v=f.getFromId(a,i.yaxis),s=r.makeCalcdata(i,"x"),o=M(i,r,"x",s).vals,b=T(a,i,s,o,v,e);return b.length?(x.extendFlat(b[0].t,{num:n._numBoxes,dPos:x.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,b):[{t:{empty:!0}}]};function e(a,i,n,r){return{min:n,q1:Math.min(a,r),med:r,q3:Math.max(a,r),max:i}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../ohlc/ohlc_defaults"),T=t("../scatter/period_defaults"),e=t("./attributes");B.exports=function(n,r,v,s){function o(g,d){return x.coerce(n,r,e,g,d)}var b=M(n,r,o,s);if(!b){r.visible=!1;return}T(n,r,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),a(n,r,o,"increasing"),a(n,r,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[r.xaxis]=!0};function a(i,n,r,v){var s=r(v+".line.color");r(v+".line.width",n.line.width),r(v+".fillcolor",f.addOpacity(s,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(t,B,G){B.exports={moduleType:"trace",name:"candlestick",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t("./attributes"),layoutAttributes:t("../box/layout_attributes"),supplyLayoutDefaults:t("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:t("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("../box/plot").plot,layerName:"boxlayer",style:t("../box/style").style,hoverPoints:t("../ohlc/hover").hoverPoints,selectPoints:t("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(t,B,G){var x=t("./axis_defaults"),f=t("../../plot_api/plot_template");B.exports=function(e,a,i,n,r){var v=n("a");v||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),M(e,a,i,r)};function M(T,e,a,i){var n=["aaxis","baxis"];n.forEach(function(r){var v=r.charAt(0),s=T[r]||{},o=f.newContainer(e,r),b={noTicklabelstep:!0,tickfont:"x",id:v+"axis",letter:v,font:e.font,name:r,data:T[v],calendar:e.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};x(s,o,b),o._categories=o._categories||[],!T[r]&&s.type!=="-"&&(T[r]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(t,B,G){var x=t("../../lib").isArrayOrTypedArray;B.exports=function(M){return f(M,0)};function f(M,T){if(!x(M)||T>=10)return null;for(var e=1/0,a=-1/0,i=M.length,n=0;n<i;n++){var r=M[n];if(x(r)){var v=f(r,T+1);v&&(e=Math.min(v[0],e),a=Math.max(v[1],a))}else e=Math.min(r,e),a=Math.max(r,a)}return[e,a]}},{"../../lib":515}],700:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("./axis_attributes"),M=t("../../components/color/attributes"),T=x({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=M.defaultLine,B.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:f,baxis:f,font:T,color:{valType:"color",dflt:M.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(t,B,G){var x=t("../../lib").isArrayOrTypedArray;B.exports=function(f,M,T,e){var a,i,n,r,v,s,o,b,g,d,c,m,l,y=x(T)?"a":"b",u=y==="a"?f.aaxis:f.baxis,A=u.smoothing,_=y==="a"?f.a2i:f.b2j,p=y==="a"?T:e,w=y==="a"?e:T,h=y==="a"?M.a.length:M.b.length,L=y==="a"?M.b.length:M.a.length,E=Math.floor(y==="a"?f.b2j(w):f.a2i(w)),S=y==="a"?function(X){return f.evalxy([],X,E)}:function(X){return f.evalxy([],E,X)};A&&(n=Math.max(0,Math.min(L-2,E)),r=E-n,i=y==="a"?function(X,ae){return f.dxydi([],X,n,ae,r)}:function(X,ae){return f.dxydj([],n,X,r,ae)});var P=_(p[0]),F=_(p[1]),I=P<F?1:-1,D=(F-P)*1e-8,R=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,z=I>0?Math.min:Math.max,H=I>0?Math.max:Math.min,Y=R(P+D),ee=O(F-D);o=S(P);var j=[[o]];for(a=Y;a*I<ee*I;a+=I)v=[],c=H(P,a),m=z(F,a+I),l=m-c,s=Math.max(0,Math.min(h-2,Math.floor(.5*(c+m)))),b=S(m),A&&(g=i(s,c-s),d=i(s,m-s),v.push([o[0]+g[0]/3*l,o[1]+g[1]/3*l]),v.push([b[0]-d[0]/3*l,b[1]-d[1]/3*l])),v.push(b),j.push(v),o=b;return j}},{"../../lib":515}],702:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("../../components/color/attributes"),M=t("../../plots/cartesian/layout_attributes"),T=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=t("../../plot_api/edit_types").overrideAll,a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat;B.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:x({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:M.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:x({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(M.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:f.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:f.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:x({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(t,B,G){var x=t("./attributes"),f=t("../../components/color").addOpacity,M=t("../../registry"),T=t("../../lib"),e=t("../../plots/cartesian/tick_value_defaults"),a=t("../../plots/cartesian/tick_label_defaults"),i=t("../../plots/cartesian/prefix_suffix_defaults"),n=t("../../plots/cartesian/category_order_defaults"),r=t("../../plots/cartesian/set_convert"),v=t("../../plots/cartesian/axis_autotype");B.exports=function(b,g,d){var c=d.letter,m=d.font||{},l=x[c+"axis"];function y(Y,ee){return T.coerce(b,g,l,Y,ee)}function u(Y,ee){return T.coerce2(b,g,l,Y,ee)}d.name&&(g._name=d.name,g._id=d.name),y("autotypenumbers",d.autotypenumbersDflt);var A=y("type");if(A==="-"&&(d.data&&s(g,d.data),g.type==="-"?g.type="linear":A=b.type=g.type),y("smoothing"),y("cheatertype"),y("showticklabels"),y("labelprefix",c+" = "),y("labelsuffix"),y("showtickprefix"),y("showticksuffix"),y("separatethousands"),y("tickformat"),y("exponentformat"),y("minexponent"),y("showexponent"),y("categoryorder"),y("tickmode"),y("tickvals"),y("ticktext"),y("tick0"),y("dtick"),g.tickmode==="array"&&(y("arraytick0"),y("arraydtick")),y("labelpadding"),g._hovertitle=c,A==="date"){var _=M.getComponentMethod("calendars","handleDefaults");_(b,g,"calendar",d.calendar)}r(g,d.fullLayout),g.c2p=T.identity;var p=y("color",d.dfltColor),w=p===b.color?p:m.color,h=y("title.text");h&&(T.coerceFont(y,"title.font",{family:m.family,size:T.bigFont(m.size),color:w}),y("title.offset")),y("tickangle");var L=y("autorange",!g.isValidRange(b.range));L&&y("rangemode"),y("range"),g.cleanRange(),y("fixedrange"),e(b,g,y,A),i(b,g,y,A,d),a(b,g,y,A,d),n(b,g,y,{data:d.data,dataAttr:c});var E=u("gridcolor",f(p,.3)),S=u("gridwidth"),P=u("griddash"),F=y("showgrid");F||(delete g.gridcolor,delete g.gridwidth,delete g.griddash);var I=u("startlinecolor",p),D=u("startlinewidth",S),R=y("startline",g.showgrid||!!I||!!D);R||(delete g.startlinecolor,delete g.startlinewidth);var O=u("endlinecolor",p),z=u("endlinewidth",S),H=y("endline",g.showgrid||!!O||!!z);return H||(delete g.endlinecolor,delete g.endlinewidth),F?(y("minorgridcount"),y("minorgridwidth",S),y("minorgriddash",P),y("minorgridcolor",f(E,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgriddash,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridwidth,delete g.griddash),g.showticklabels==="none"&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.minexponent,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix),g.showticksuffix||delete g.ticksuffix,g.showtickprefix||delete g.tickprefix,y("tickmode"),g};function s(o,b){if(o.type==="-"){var g=o._id,d=g.charAt(0),c=d+"calendar",m=o[c];o.type=v(b,m,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib").isArray1D,M=t("./cheater_basis"),T=t("./array_minmax"),e=t("./calc_gridlines"),a=t("./calc_labels"),i=t("./calc_clippath"),n=t("../heatmap/clean_2d_array"),r=t("./smooth_fill_2d_array"),v=t("../heatmap/convert_column_xyz"),s=t("./set_convert");B.exports=function(b,g){var d=x.getFromId(b,g.xaxis),c=x.getFromId(b,g.yaxis),m=g.aaxis,l=g.baxis,y=g.x,u=g.y,A=[];y&&f(y)&&A.push("x"),u&&f(u)&&A.push("y"),A.length&&v(g,m,l,"a","b",A);var _=g._a=g._a||g.a,p=g._b=g._b||g.b;y=g._x||g.x,u=g._y||g.y;var w={};if(g._cheater){var h=m.cheatertype==="index"?_.length:_,L=l.cheatertype==="index"?p.length:p;y=M(h,L,g.cheaterslope)}g._x=y=n(y),g._y=u=n(u),r(y,_,p),r(u,_,p),s(g),g.setScale();var E=T(y),S=T(u),P=.5*(E[1]-E[0]),F=.5*(E[1]+E[0]),I=.5*(S[1]-S[0]),D=.5*(S[1]+S[0]),R=1.3;return E=[F-P*R,F+P*R],S=[D-I*R,D+I*R],g._extremes[d._id]=x.findExtremes(d,E,{padded:!0}),g._extremes[c._id]=x.findExtremes(c,S,{padded:!0}),e(g,"a","b"),e(g,"b","a"),a(g,m),a(g,l),w.clipsegments=i(g._xctrl,g._yctrl,m,l),w.x=y,w.y=u,w.a=_,w.b=p,[w]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(t,B,G){B.exports=function(f,M,T,e){var a,i,n,r=[],v=!!T.smoothing,s=!!e.smoothing,o=f[0].length-1,b=f.length-1;for(a=0,i=[],n=[];a<=o;a++)i[a]=f[0][a],n[a]=M[0][a];for(r.push({x:i,y:n,bicubic:v}),a=0,i=[],n=[];a<=b;a++)i[a]=f[a][o],n[a]=M[a][o];for(r.push({x:i,y:n,bicubic:s}),a=o,i=[],n=[];a>=0;a--)i[o-a]=f[b][a],n[o-a]=M[b][a];for(r.push({x:i,y:n,bicubic:v}),a=b,i=[],n=[];a>=0;a--)i[b-a]=f[a][0],n[b-a]=M[a][0];return r.push({x:i,y:n,bicubic:s}),r}},{}],706:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib/extend").extendFlat;B.exports=function(T,e,a){var i,n,r,v,s,o,b,g,d,c,m,l,y,u,A=T["_"+e],_=T[e+"axis"],p=_._gridlines=[],w=_._minorgridlines=[],h=_._boundarylines=[],L=T["_"+a],E=T[a+"axis"];_.tickmode==="array"&&(_.tickvals=A.slice());var S=T._xctrl,P=T._yctrl,F=S[0].length,I=S.length,D=T._a.length,R=T._b.length;x.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var O=_.smoothing?3:1;function z(Y){var ee,j,X,ae,fe,K,J,U,V,q,re,Z,Q=[],ie=[],oe={};if(e==="b")for(j=T.b2j(Y),X=Math.floor(Math.max(0,Math.min(R-2,j))),ae=j-X,oe.length=R,oe.crossLength=D,oe.xy=function(ne){return T.evalxy([],ne,j)},oe.dxy=function(ne,se){return T.dxydi([],ne,X,se,ae)},ee=0;ee<D;ee++)K=Math.min(D-2,ee),J=ee-K,U=T.evalxy([],ee,j),E.smoothing&&ee>0&&(V=T.dxydi([],ee-1,X,0,ae),Q.push(fe[0]+V[0]/3),ie.push(fe[1]+V[1]/3),q=T.dxydi([],ee-1,X,1,ae),Q.push(U[0]-q[0]/3),ie.push(U[1]-q[1]/3)),Q.push(U[0]),ie.push(U[1]),fe=U;else for(ee=T.a2i(Y),K=Math.floor(Math.max(0,Math.min(D-2,ee))),J=ee-K,oe.length=D,oe.crossLength=R,oe.xy=function(ne){return T.evalxy([],ee,ne)},oe.dxy=function(ne,se){return T.dxydj([],K,ne,J,se)},j=0;j<R;j++)X=Math.min(R-2,j),ae=j-X,U=T.evalxy([],ee,j),E.smoothing&&j>0&&(re=T.dxydj([],K,j-1,J,0),Q.push(fe[0]+re[0]/3),ie.push(fe[1]+re[1]/3),Z=T.dxydj([],K,j-1,J,1),Q.push(U[0]-Z[0]/3),ie.push(U[1]-Z[1]/3)),Q.push(U[0]),ie.push(U[1]),fe=U;return oe.axisLetter=e,oe.axis=_,oe.crossAxis=E,oe.value=Y,oe.constvar=a,oe.index=g,oe.x=Q,oe.y=ie,oe.smoothing=E.smoothing,oe}function H(Y){var ee,j,X,ae,fe,K=[],J=[],U={};if(U.length=A.length,U.crossLength=L.length,e==="b")for(X=Math.max(0,Math.min(R-2,Y)),fe=Math.min(1,Math.max(0,Y-X)),U.xy=function(V){return T.evalxy([],V,Y)},U.dxy=function(V,q){return T.dxydi([],V,X,q,fe)},ee=0;ee<F;ee++)K[ee]=S[Y*O][ee],J[ee]=P[Y*O][ee];else for(j=Math.max(0,Math.min(D-2,Y)),ae=Math.min(1,Math.max(0,Y-j)),U.xy=function(V){return T.evalxy([],Y,V)},U.dxy=function(V,q){return T.dxydj([],j,V,ae,q)},ee=0;ee<I;ee++)K[ee]=S[ee][Y*O],J[ee]=P[ee][Y*O];return U.axisLetter=e,U.axis=_,U.crossAxis=E,U.value=A[Y],U.constvar=a,U.index=Y,U.x=K,U.y=J,U.smoothing=E.smoothing,U}if(_.tickmode==="array"){for(v=5e-15,s=[Math.floor((A.length-1-_.arraytick0)/_.arraydtick*(1+v)),Math.ceil(-_.arraytick0/_.arraydtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0]-1,b=s[1]+1,g=o;g<b;g++)n=_.arraytick0+_.arraydtick*g,!(n<0||n>A.length-1)&&p.push(f(H(n),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(g=o;g<b;g++)if(r=_.arraytick0+_.arraydtick*g,m=Math.min(r+_.arraydtick,A.length-1),!(r<0||r>A.length-1)&&!(m<0||m>A.length-1))for(l=A[r],y=A[m],i=0;i<_.minorgridcount;i++)u=m-r,!(u<=0)&&(c=l+(y-l)*(i+1)/(_.minorgridcount+1)*(_.arraydtick/u),!(c<A[0]||c>A[A.length-1])&&w.push(f(z(c),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash})));_.startline&&h.push(f(H(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&h.push(f(H(A.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(v=5e-15,s=[Math.floor((A[A.length-1]-_.tick0)/_.dtick*(1+v)),Math.ceil((A[0]-_.tick0)/_.dtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0],b=s[1],g=o;g<=b;g++)d=_.tick0+_.dtick*g,p.push(f(z(d),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(g=o-1;g<b+1;g++)for(d=_.tick0+_.dtick*g,i=0;i<_.minorgridcount;i++)c=d+_.dtick*(i+1)/(_.minorgridcount+1),!(c<A[0]||c>A[A.length-1])&&w.push(f(z(c),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}));_.startline&&h.push(f(z(A[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&h.push(f(z(A[A.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib/extend").extendFlat;B.exports=function(T,e){var a,i,n,r,v,s=e._labels=[],o=e._gridlines;for(a=0;a<o.length;a++)v=o[a],["start","both"].indexOf(e.showticklabels)!==-1&&(i=x.tickText(e,v.value),f(i,{prefix:n,suffix:r,endAnchor:!0,xy:v.xy(0),dxy:v.dxy(0,0),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i)),["end","both"].indexOf(e.showticklabels)!==-1&&(i=x.tickText(e,v.value),f(i,{endAnchor:!1,xy:v.xy(v.crossLength-1),dxy:v.dxy(v.crossLength-2,1),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(t,B,G){var x=.5;B.exports=function(M,T,e,a){var i=M[0]-T[0],n=M[1]-T[1],r=e[0]-T[0],v=e[1]-T[1],s=Math.pow(i*i+n*n,x/2),o=Math.pow(r*r+v*v,x/2),b=(o*o*i-s*s*r)*a,g=(o*o*n-s*s*v)*a,d=o*(s+o)*3,c=s*(s+o)*3;return[[T[0]+(d&&b/d),T[1]+(d&&g/d)],[T[0]-(c&&b/c),T[1]-(c&&g/c)]]}},{}],709:[function(t,B,G){var x=t("../../lib").isArrayOrTypedArray;B.exports=function(f,M,T){var e,a,i,n,r,v,s=[],o=x(f)?f.length:f,b=x(M)?M.length:M,g=x(f)?f:null,d=x(M)?M:null;g&&(i=(g.length-1)/(g[g.length-1]-g[0])/(o-1)),d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(b-1));var c,m=1/0,l=-1/0;for(a=0;a<b;a++)for(s[a]=[],v=d?(d[a]-d[0])*n:a/(b-1),e=0;e<o;e++)r=g?(g[e]-g[0])*i:e/(o-1),c=r-v*T,m=Math.min(c,m),l=Math.max(c,l),s[a][e]=c;var y=1/(l-m),u=-m*y;for(a=0;a<b;a++)for(e=0;e<o;e++)s[a][e]=y*s[a][e]+u;return s}},{"../../lib":515}],710:[function(t,B,G){var x=t("./catmull_rom"),f=t("../../lib").ensureArray;function M(T,e,a){var i=-.5*a[0]+1.5*e[0],n=-.5*a[1]+1.5*e[1];return[(2*i+T[0])/3,(2*n+T[1])/3]}B.exports=function(e,a,i,n,r,v){var s,o,b,g,d,c,m,l,y,u,A=i[0].length,_=i.length,p=r?3*A-2:A,w=v?3*_-2:_;for(e=f(e,w),a=f(a,w),b=0;b<w;b++)e[b]=f(e[b],p),a[b]=f(a[b],p);for(o=0,g=0;o<_;o++,g+=v?3:1)for(d=e[g],c=a[g],m=i[o],l=n[o],s=0,b=0;s<A;s++,b+=r?3:1)d[b]=m[s],c[b]=l[s];if(r)for(o=0,g=0;o<_;o++,g+=v?3:1){for(s=1,b=3;s<A-1;s++,b+=3)y=x([i[o][s-1],n[o][s-1]],[i[o][s],n[o][s]],[i[o][s+1],n[o][s+1]],r),e[g][b-1]=y[0][0],a[g][b-1]=y[0][1],e[g][b+1]=y[1][0],a[g][b+1]=y[1][1];u=M([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=u[0],a[g][1]=u[1],u=M([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=u[0],a[g][p-2]=u[1]}if(v)for(b=0;b<p;b++){for(g=3;g<w-3;g+=3)y=x([e[g-3][b],a[g-3][b]],[e[g][b],a[g][b]],[e[g+3][b],a[g+3][b]],v),e[g-1][b]=y[0][0],a[g-1][b]=y[0][1],e[g+1][b]=y[1][0],a[g+1][b]=y[1][1];u=M([e[0][b],a[0][b]],[e[2][b],a[2][b]],[e[3][b],a[3][b]]),e[1][b]=u[0],a[1][b]=u[1],u=M([e[w-1][b],a[w-1][b]],[e[w-3][b],a[w-3][b]],[e[w-4][b],a[w-4][b]]),e[w-2][b]=u[0],a[w-2][b]=u[1]}if(r&&v)for(g=1;g<w;g+=(g+1)%3===0?2:1){for(b=3;b<p-3;b+=3)y=x([e[g][b-3],a[g][b-3]],[e[g][b],a[g][b]],[e[g][b+3],a[g][b+3]],r),e[g][b-1]=.5*(e[g][b-1]+y[0][0]),a[g][b-1]=.5*(a[g][b-1]+y[0][1]),e[g][b+1]=.5*(e[g][b+1]+y[1][0]),a[g][b+1]=.5*(a[g][b+1]+y[1][1]);u=M([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=.5*(e[g][1]+u[0]),a[g][1]=.5*(a[g][1]+u[1]),u=M([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=.5*(e[g][p-2]+u[0]),a[g][p-2]=.5*(a[g][p-2]+u[1])}return[e,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(t,B,G){B.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(t,B,G){B.exports=function(x,f,M){return f&&M?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,c=1-i,m=c*c,l=c*i*2,y=-3*m,u=3*(m-l),A=3*(l-d),_=3*d,p=n*n,w=p*n,h=1-n,L=h*h,E=L*h;for(g=0;g<x.length;g++)b=x[g],r=y*b[a][e]+u*b[a][e+1]+A*b[a][e+2]+_*b[a][e+3],v=y*b[a+1][e]+u*b[a+1][e+1]+A*b[a+1][e+2]+_*b[a+1][e+3],s=y*b[a+2][e]+u*b[a+2][e+1]+A*b[a+2][e+2]+_*b[a+2][e+3],o=y*b[a+3][e]+u*b[a+3][e+1]+A*b[a+3][e+2]+_*b[a+3][e+3],T[g]=E*r+3*(L*n*v+h*p*s)+w*o;return T}:f?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;e*=3;var b=i*i,g=1-i,d=g*g,c=g*i*2,m=-3*d,l=3*(d-c),y=3*(c-b),u=3*b,A=1-n;for(s=0;s<x.length;s++)o=x[s],r=m*o[a][e]+l*o[a][e+1]+y*o[a][e+2]+u*o[a][e+3],v=m*o[a+1][e]+l*o[a+1][e+1]+y*o[a+1][e+2]+u*o[a+1][e+3],T[s]=A*r+n*v;return T}:M?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;a*=3;var d=n*n,c=d*n,m=1-n,l=m*m,y=l*m;for(b=0;b<x.length;b++)g=x[b],r=g[a][e+1]-g[a][e],v=g[a+1][e+1]-g[a+1][e],s=g[a+2][e+1]-g[a+2][e],o=g[a+3][e+1]-g[a+3][e],T[b]=y*r+3*(l*n*v+m*d*s)+c*o;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-n;for(s=0;s<x.length;s++)o=x[s],r=o[a][e+1]-o[a][e],v=o[a+1][e+1]-o[a+1][e],T[s]=b*r+n*v;return T}}},{}],713:[function(t,B,G){B.exports=function(x,f,M){return f&&M?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,c=d*i,m=1-i,l=m*m,y=l*m,u=n*n,A=1-n,_=A*A,p=A*n*2,w=-3*_,h=3*(_-p),L=3*(p-u),E=3*u;for(g=0;g<x.length;g++)b=x[g],r=w*b[a][e]+h*b[a+1][e]+L*b[a+2][e]+E*b[a+3][e],v=w*b[a][e+1]+h*b[a+1][e+1]+L*b[a+2][e+1]+E*b[a+3][e+1],s=w*b[a][e+2]+h*b[a+1][e+2]+L*b[a+2][e+2]+E*b[a+3][e+2],o=w*b[a][e+3]+h*b[a+1][e+3]+L*b[a+2][e+3]+E*b[a+3][e+3],T[g]=y*r+3*(l*i*v+m*d*s)+c*o;return T}:f?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3;var d=n*n,c=d*n,m=1-n,l=m*m,y=l*m;for(b=0;b<x.length;b++)g=x[b],r=g[a+1][e]-g[a][e],v=g[a+1][e+1]-g[a][e+1],s=g[a+1][e+2]-g[a][e+2],o=g[a+1][e+3]-g[a][e+3],T[b]=y*r+3*(l*n*v+m*d*s)+c*o;return T}:M?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;a*=3;var b=1-i,g=n*n,d=1-n,c=d*d,m=d*n*2,l=-3*c,y=3*(c-m),u=3*(m-g),A=3*g;for(s=0;s<x.length;s++)o=x[s],r=l*o[a][e]+y*o[a+1][e]+u*o[a+2][e]+A*o[a+3][e],v=l*o[a][e+1]+y*o[a+1][e+1]+u*o[a+2][e+1]+A*o[a+3][e+1],T[s]=b*r+i*v;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-i;for(s=0;s<x.length;s++)o=x[s],r=o[a+1][e]-o[a][e],v=o[a+1][e+1]-o[a][e+1],T[s]=b*r+i*v;return T}}},{}],714:[function(t,B,G){B.exports=function(x,f,M,T,e){var a=f-2,i=M-2;return T&&e?function(n,r,v){n||(n=[]);var s,o,b,g,d,c,m=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(v),i)),y=Math.max(0,Math.min(1,r-m)),u=Math.max(0,Math.min(1,v-l));m*=3,l*=3;var A=y*y,_=A*y,p=1-y,w=p*p,h=w*p,L=u*u,E=L*u,S=1-u,P=S*S,F=P*S;for(c=0;c<x.length;c++)d=x[c],s=h*d[l][m]+3*(w*y*d[l][m+1]+p*A*d[l][m+2])+_*d[l][m+3],o=h*d[l+1][m]+3*(w*y*d[l+1][m+1]+p*A*d[l+1][m+2])+_*d[l+1][m+3],b=h*d[l+2][m]+3*(w*y*d[l+2][m+1]+p*A*d[l+2][m+2])+_*d[l+2][m+3],g=h*d[l+3][m]+3*(w*y*d[l+3][m+1]+p*A*d[l+3][m+2])+_*d[l+3][m+3],n[c]=F*s+3*(P*u*o+S*L*b)+E*g;return n}:T?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,c,m,l,y,u;s*=3;var A=b*b,_=A*b,p=1-b,w=p*p,h=w*p,L=1-g;for(y=0;y<x.length;y++)u=x[y],d=L*u[o][s]+g*u[o+1][s],c=L*u[o][s+1]+g*u[o+1][s+1],m=L*u[o][s+2]+g*u[o+1][s+1],l=L*u[o][s+3]+g*u[o+1][s+1],n[y]=h*d+3*(w*b*c+p*A*m)+_*l;return n}:e?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,c,m,l,y,u;o*=3;var A=g*g,_=A*g,p=1-g,w=p*p,h=w*p,L=1-b;for(y=0;y<x.length;y++)u=x[y],d=L*u[o][s]+b*u[o][s+1],c=L*u[o+1][s]+b*u[o+1][s+1],m=L*u[o+2][s]+b*u[o+2][s+1],l=L*u[o+3][s]+b*u[o+3][s+1],n[y]=h*d+3*(w*g*c+p*A*m)+_*l;return n}:function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,c,m,l,y=1-g,u=1-b;for(m=0;m<x.length;m++)l=x[m],d=u*l[o][s]+b*l[o][s+1],c=u*l[o+1][s]+b*l[o+1][s+1],n[m]=y*d+g*c;return n}}},{}],715:[function(t,B,G){var x=t("../../lib"),f=t("./xy_defaults"),M=t("./ab_defaults"),T=t("./attributes"),e=t("../../components/color/attributes");B.exports=function(i,n,r,v){function s(g,d){return x.coerce(i,n,T,g,d)}n._clipPathId="clip"+n.uid+"carpet";var o=s("color",e.defaultLine);if(x.coerceFont(s,"font"),s("carpet"),M(i,n,v,s,o),!n.a||!n.b){n.visible=!1;return}n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0);var b=f(i,n,s);b||(n.visible=!1),n._cheater&&s("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),plot:t("./plot"),calc:t("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(t,B,G){B.exports=function(x,f){for(var M=x._fullData.length,T,e=0;e<M;e++){var a=x._fullData[e];if(a.index!==f.index&&a.type==="carpet"&&(T||(T=a),a.carpet===f.carpet))return a}return T}},{}],718:[function(t,B,G){B.exports=function(f,M,T){if(f.length===0)return"";var e,a=[],i=T?3:1;for(e=0;e<f.length;e+=i)a.push(f[e]+","+M[e]),T&&e<f.length-i&&(a.push("C"),a.push([f[e+1]+","+M[e+1],f[e+2]+","+M[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],719:[function(t,B,G){var x=t("../../lib").isArrayOrTypedArray;B.exports=function(M,T,e){var a;for(x(M)?M.length>T.length&&(M=M.slice(0,T.length)):M=[],a=0;a<T.length;a++)M[a]=e(T[a]);return M}},{"../../lib":515}],720:[function(t,B,G){B.exports=function(f,M,T,e,a,i){var n=a[0]*f.dpdx(M),r=a[1]*f.dpdy(T),v=1,s=1;if(i){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),b=Math.sqrt(i[0]*i[0]+i[1]*i[1]),g=(a[0]*i[0]+a[1]*i[1])/o/b;s=Math.max(0,g)}var d=Math.atan2(r,n)*180/Math.PI;return d<-90?(d+=180,v=-v):d>90&&(d-=180,v=-v),{angle:d,flip:v,p:f.c2p(e,M,T),offsetMultplier:s}}},{}],721:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("./map_1d_array"),T=t("./makepath"),e=t("./orient_text"),a=t("../../lib/svg_text_utils"),i=t("../../lib"),n=i.strRotate,r=i.strTranslate,v=t("../../constants/alignment");B.exports=function(y,u,A,_){var p=u.xaxis,w=u.yaxis,h=y._fullLayout,L=h._clips;i.makeTraceGroups(_,A,"trace").each(function(E){var S=x.select(this),P=E[0],F=P.trace,I=F.aaxis,D=F.baxis,R=i.ensureSingle(S,"g","minorlayer"),O=i.ensureSingle(S,"g","majorlayer"),z=i.ensureSingle(S,"g","boundarylayer"),H=i.ensureSingle(S,"g","labellayer");S.style("opacity",F.opacity),o(p,w,O,I,"a",I._gridlines),o(p,w,O,D,"b",D._gridlines),o(p,w,R,I,"a",I._minorgridlines),o(p,w,R,D,"b",D._minorgridlines),o(p,w,z,I,"a-boundary",I._boundarylines),o(p,w,z,D,"b-boundary",D._boundarylines);var Y=b(y,p,w,F,P,H,I._labels,"a-label"),ee=b(y,p,w,F,P,H,D._labels,"b-label");g(y,H,F,P,p,w,Y,ee),s(F,P,L,p,w)})};function s(l,y,u,A,_){var p,w,h,L,E=u.select("#"+l._clipPathId);E.size()||(E=u.append("clipPath").classed("carpetclip",!0));var S=i.ensureSingle(E,"path","carpetboundary"),P=y.clipsegments,F=[];for(L=0;L<P.length;L++)p=P[L],w=M([],p.x,A.c2p),h=M([],p.y,_.c2p),F.push(T(w,h,p.bicubic));var I="M"+F.join("L")+"Z";E.attr("id",l._clipPathId),S.attr("d",I)}function o(l,y,u,A,_,p){var w="const-"+_+"-lines",h=u.selectAll("."+w).data(p);h.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke"),h.each(function(L){var E=L,S=E.x,P=E.y,F=M([],S,l.c2p),I=M([],P,y.c2p),D="M"+T(F,I,E.smoothing),R=x.select(this);R.attr("d",D).style("stroke-width",E.width).style("stroke",E.color).style("stroke-dasharray",f.dashStyle(E.dash,E.width)).style("fill","none")}),h.exit().remove()}function b(l,y,u,A,_,p,w,h){var L=p.selectAll("text."+h).data(w);L.enter().append("text").classed(h,!0);var E=0,S={};return L.each(function(P,F){var I;if(P.axis.tickangle==="auto")I=e(A,y,u,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;I=e(A,y,u,P.xy,[Math.cos(D),Math.sin(D)])}F||(S={angle:I.angle,flip:I.flip});var R=(P.endAnchor?-1:1)*I.flip,O=x.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(f.font,P.font).text(P.text).call(a.convertToTspans,l),z=f.bBox(this);O.attr("transform",r(I.p[0],I.p[1])+n(I.angle)+r(P.axis.labelpadding*R,z.height*.3)),E=Math.max(E,z.width+P.axis.labelpadding)}),L.exit().remove(),S.maxExtent=E,S}function g(l,y,u,A,_,p,w,h){var L,E,S,P,F=i.aggNums(Math.min,null,u.a),I=i.aggNums(Math.max,null,u.a),D=i.aggNums(Math.min,null,u.b),R=i.aggNums(Math.max,null,u.b);L=.5*(F+I),E=D,S=u.ab2xy(L,E,!0),P=u.dxyda_rough(L,E),w.angle===void 0&&i.extendFlat(w,e(u,_,p,S,u.dxydb_rough(L,E))),m(l,y,u,A,S,P,u.aaxis,_,p,w,"a-title"),L=F,E=.5*(D+R),S=u.ab2xy(L,E,!0),P=u.dxydb_rough(L,E),h.angle===void 0&&i.extendFlat(h,e(u,_,p,S,u.dxyda_rough(L,E))),m(l,y,u,A,S,P,u.baxis,_,p,h,"b-title")}var d=v.LINE_SPACING,c=(1-v.MID_SHIFT)/d+1;function m(l,y,u,A,_,p,w,h,L,E,S){var P=[];w.title.text&&P.push(w.title.text);var F=y.selectAll("text."+S).data(P),I=E.maxExtent;F.enter().append("text").classed(S,!0),F.each(function(){var D=e(u,h,L,_,p);["start","both"].indexOf(w.showticklabels)===-1&&(I=0);var R=w.title.font.size;I+=R+w.title.offset;var O=E.angle+(E.flip<0?180:0),z=(O-D.angle+450)%360,H=z>90&&z<270,Y=x.select(this);Y.text(w.title.text).call(a.convertToTspans,l),H&&(I=(-a.lineCount(Y)+c)*d*R-I),Y.attr("transform",r(D.p[0],D.p[1])+n(D.angle)+r(0,I)).attr("text-anchor","middle").call(f.font,w.title.font)}),F.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(t,B,G){var x=t("./constants"),f=t("../../lib/search").findBin,M=t("./compute_control_points"),T=t("./create_spline_evaluator"),e=t("./create_i_derivative_evaluator"),a=t("./create_j_derivative_evaluator");B.exports=function(n){var r=n._a,v=n._b,s=r.length,o=v.length,b=n.aaxis,g=n.baxis,d=r[0],c=r[s-1],m=v[0],l=v[o-1],y=r[r.length-1]-r[0],u=v[v.length-1]-v[0],A=y*x.RELATIVE_CULL_TOLERANCE,_=u*x.RELATIVE_CULL_TOLERANCE;d-=A,c+=A,m-=_,l+=_,n.isVisible=function(p,w){return p>d&&p<c&&w>m&&w<l},n.isOccluded=function(p,w){return p<d||p>c||w<m||w>l},n.setScale=function(){var p=n._x,w=n._y,h=M(n._xctrl,n._yctrl,p,w,b.smoothing,g.smoothing);n._xctrl=h[0],n._yctrl=h[1],n.evalxy=T([n._xctrl,n._yctrl],s,o,b.smoothing,g.smoothing),n.dxydi=e([n._xctrl,n._yctrl],b.smoothing,g.smoothing),n.dxydj=a([n._xctrl,n._yctrl],b.smoothing,g.smoothing)},n.i2a=function(p){var w=Math.max(0,Math.floor(p[0]),s-2),h=p[0]-w;return(1-h)*r[w]+h*r[w+1]},n.j2b=function(p){var w=Math.max(0,Math.floor(p[1]),s-2),h=p[1]-w;return(1-h)*v[w]+h*v[w+1]},n.ij2ab=function(p){return[n.i2a(p[0]),n.j2b(p[1])]},n.a2i=function(p){var w=Math.max(0,Math.min(f(p,r),s-2)),h=r[w],L=r[w+1];return Math.max(0,Math.min(s-1,w+(p-h)/(L-h)))},n.b2j=function(p){var w=Math.max(0,Math.min(f(p,v),o-2)),h=v[w],L=v[w+1];return Math.max(0,Math.min(o-1,w+(p-h)/(L-h)))},n.ab2ij=function(p){return[n.a2i(p[0]),n.b2j(p[1])]},n.i2c=function(p,w){return n.evalxy([],p,w)},n.ab2xy=function(p,w,h){if(!h&&(p<r[0]||p>r[s-1]|w<v[0]||w>v[o-1]))return[!1,!1];var L=n.a2i(p),E=n.b2j(w),S=n.evalxy([],L,E);if(h){var P=0,F=0,I=[],D,R,O,z;p<r[0]?(D=0,R=0,P=(p-r[0])/(r[1]-r[0])):p>r[s-1]?(D=s-2,R=1,P=(p-r[s-1])/(r[s-1]-r[s-2])):(D=Math.max(0,Math.min(s-2,Math.floor(L))),R=L-D),w<v[0]?(O=0,z=0,F=(w-v[0])/(v[1]-v[0])):w>v[o-1]?(O=o-2,z=1,F=(w-v[o-1])/(v[o-1]-v[o-2])):(O=Math.max(0,Math.min(o-2,Math.floor(E))),z=E-O),P&&(n.dxydi(I,D,O,R,z),S[0]+=I[0]*P,S[1]+=I[1]*P),F&&(n.dxydj(I,D,O,R,z),S[0]+=I[0]*F,S[1]+=I[1]*F)}return S},n.c2p=function(p,w,h){return[w.c2p(p[0]),h.c2p(p[1])]},n.p2x=function(p,w,h){return[w.p2c(p[0]),h.p2c(p[1])]},n.dadi=function(p){var w=Math.max(0,Math.min(r.length-2,p));return r[w+1]-r[w]},n.dbdj=function(p){var w=Math.max(0,Math.min(v.length-2,p));return v[w+1]-v[w]},n.dxyda=function(p,w,h,L){var E=n.dxydi(null,p,w,h,L),S=n.dadi(p,h);return[E[0]/S,E[1]/S]},n.dxydb=function(p,w,h,L){var E=n.dxydj(null,p,w,h,L),S=n.dbdj(w,L);return[E[0]/S,E[1]/S]},n.dxyda_rough=function(p,w,h){var L=y*(h||.1),E=n.ab2xy(p+L,w,!0),S=n.ab2xy(p-L,w,!0);return[(E[0]-S[0])*.5/L,(E[1]-S[1])*.5/L]},n.dxydb_rough=function(p,w,h){var L=u*(h||.1),E=n.ab2xy(p,w+L,!0),S=n.ab2xy(p,w-L,!0);return[(E[0]-S[0])*.5/L,(E[1]-S[1])*.5/L]},n.dpdx=function(p){return p._m},n.dpdy=function(p){return p._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T,e){var a,i,n,r=[],v=[],s=M[0].length,o=M.length;function b(j,X){var ae=0,fe,K=0;return j>0&&(fe=M[X][j-1])!==void 0&&(K++,ae+=fe),j<s-1&&(fe=M[X][j+1])!==void 0&&(K++,ae+=fe),X>0&&(fe=M[X-1][j])!==void 0&&(K++,ae+=fe),X<o-1&&(fe=M[X+1][j])!==void 0&&(K++,ae+=fe),ae/Math.max(1,K)}var g=0;for(a=0;a<s;a++)for(i=0;i<o;i++)M[i][a]===void 0&&(r.push(a),v.push(i),M[i][a]=b(a,i)),g=Math.max(g,Math.abs(M[i][a]));if(!r.length)return M;var d,c,m,l,y,u,A,_,p,w,h,L=1e-5,E=0,S=100,P=0,F=r.length;do{for(E=0,n=0;n<F;n++){a=r[n],i=v[n];var I=0,D=0,R,O,z,H,Y,ee;a===0?(Y=Math.min(s-1,2),z=T[Y],H=T[1],R=M[i][Y],O=M[i][1],D+=O+(O-R)*(T[0]-H)/(H-z),I++):a===s-1&&(Y=Math.max(0,s-3),z=T[Y],H=T[s-2],R=M[i][Y],O=M[i][s-2],D+=O+(O-R)*(T[s-1]-H)/(H-z),I++),(a===0||a===s-1)&&i>0&&i<o-1&&(d=e[i+1]-e[i],c=e[i]-e[i-1],D+=(c*M[i+1][a]+d*M[i-1][a])/(c+d),I++),i===0?(ee=Math.min(o-1,2),z=e[ee],H=e[1],R=M[ee][a],O=M[1][a],D+=O+(O-R)*(e[0]-H)/(H-z),I++):i===o-1&&(ee=Math.max(0,o-3),z=e[ee],H=e[o-2],R=M[ee][a],O=M[o-2][a],D+=O+(O-R)*(e[o-1]-H)/(H-z),I++),(i===0||i===o-1)&&a>0&&a<s-1&&(d=T[a+1]-T[a],c=T[a]-T[a-1],D+=(c*M[i][a+1]+d*M[i][a-1])/(c+d),I++),I?D/=I:(m=T[a+1]-T[a],l=T[a]-T[a-1],y=e[i+1]-e[i],u=e[i]-e[i-1],A=m*l*(m+l),_=y*u*(y+u),D=(A*(u*M[i+1][a]+y*M[i-1][a])+_*(l*M[i][a+1]+m*M[i][a-1]))/(_*(l+m)+A*(u+y))),p=D-M[i][a],w=p/g,E+=w*w,h=I?0:.85,M[i][a]+=p*(1+h)}E=Math.sqrt(E)}while(P++<S&&E>L);return x.log("Smoother converged to",E,"after",P,"iterations"),M}},{"../../lib":515}],724:[function(t,B,G){var x=t("../../lib").isArray1D;B.exports=function(M,T,e){var a=e("x"),i=a&&a.length,n=e("y"),r=n&&n.length;if(!i&&!r)return!1;if(T._cheater=!a,(!i||x(a))&&(!r||x(n))){var v=i?a.length:1/0;r&&(v=Math.min(v,n.length)),T.a&&T.a.length&&(v=Math.min(v,T.a.length)),T.b&&T.b.length&&(v=Math.min(v,T.b.length)),T._length=v}else T._length=null;return!0}},{"../../lib":515}],725:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../scattergeo/attributes"),M=t("../../components/colorscale/attributes"),T=t("../../plots/attributes"),e=t("../../components/color/attributes").defaultLine,a=t("../../lib/extend").extendFlat,i=f.marker.line;B.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:f.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},f.geojson,{}),featureidkey:f.featureidkey,text:a({},f.text,{}),hovertext:a({},f.hovertext,{}),marker:{line:{color:a({},i.color,{dflt:e}),width:a({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:f.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:f.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:x(),showlegend:a({},T.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../constants/numerical").BADNUM,M=t("../../components/colorscale/calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection");function a(i){return i&&typeof i=="string"}B.exports=function(n,r){var v=r._length,s=new Array(v),o;r.geojson?o=function(m){return a(m)||x(m)}:o=a;for(var b=0;b<v;b++){var g=s[b]={},d=r.locations[b],c=r.z[b];o(d)&&x(c)?(g.loc=d,g.z=c):(g.loc=null,g.z=f),g.index=b}return T(s,r),M(n,r,{vals:r.z,containerStr:"",cLetter:"z"}),e(s,r),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/defaults"),M=t("./attributes");B.exports=function(e,a,i,n){function r(c,m){return x.coerce(e,a,M,c,m)}var v=r("locations"),s=r("z");if(!(v&&v.length&&x.isArrayOrTypedArray(s)&&s.length)){a.visible=!1;return}a._length=Math.min(v.length,s.length);var o=r("geojson"),b;(typeof o=="string"&&o!==""||x.isPlainObject(o))&&(b="geojson-id");var g=r("locationmode",b);g==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var d=r("marker.line.width");d&&r("marker.line.color"),r("marker.opacity"),f(e,a,n,r,{prefix:"",cLetter:"z"}),x.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(t,B,G){B.exports=function(f,M,T,e,a){f.location=M.location,f.z=M.z;var i=e[a];return i.fIn&&i.fIn.properties&&(f.properties=i.fIn.properties),f.ct=i.ct,f}},{}],729:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("./attributes"),M=t("../../lib").fillText;B.exports=function(a,i,n){var r=a.cd,v=r[0].trace,s=a.subplot,o,b,g,d,c=[i,n],m=[i+360,n];for(b=0;b<r.length;b++)if(o=r[b],d=!1,o._polygons){for(g=0;g<o._polygons.length;g++)o._polygons[g].contains(c)&&(d=!d),o._polygons[g].contains(m)&&(d=!d);if(d)break}if(!(!d||!o))return a.x0=a.x1=a.xa.c2p(o.ct),a.y0=a.y1=a.ya.c2p(o.ct),a.index=o.index,a.location=o.loc,a.z=o.z,a.zLabel=x.tickText(s.mockAxis,s.mockAxis.c2l(o.z),"hover").text,a.hovertemplate=o.hovertemplate,T(a,v,o),[a]};function T(e,a,i){if(!a.hovertemplate){var n=i.hi||a.hoverinfo,r=String(i.loc),v=n==="all"?f.hoverinfo.flags:n.split("+"),s=v.indexOf("name")!==-1,o=v.indexOf("location")!==-1,b=v.indexOf("z")!==-1,g=v.indexOf("text")!==-1,d=!s&&o,c=[];d?e.nameOverride=r:(s&&(e.nameOverride=a.name),o&&c.push(r)),b&&c.push(e.zLabel),g&&M(i,a,c),e.extraText=c.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"choropleth",basePlotModule:t("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../lib/geo_location_utils"),T=t("../../lib/topojson_utils").getTopojsonFeatures,e=t("../../plots/cartesian/autorange").findExtremes,a=t("./style").style;function i(r,v,s){var o=v.layers.backplot.select(".choroplethlayer");f.makeTraceGroups(o,s,"trace choropleth").each(function(b){var g=x.select(this),d=g.selectAll("path.choroplethlocation").data(f.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),a(r,b)})}function n(r,v){for(var s=r[0].trace,o=v[s.geo],b=o._subplot,g=s.locationmode,d=s._length,c=g==="geojson-id"?M.extractTraceFeature(r):T(s,b.topojson),m=[],l=[],y=0;y<d;y++){var u=r[y],A=g==="geojson-id"?u.fOut:M.locationToFeature(g,u.loc,c);if(A){u.geojson=A,u.ct=A.properties.ct,u._polygons=M.feature2polygons(A);var _=M.computeBbox(A);m.push(_[0],_[2]),l.push(_[1],_[3])}else u.geojson=null}if(o.fitbounds==="geojson"&&g==="geojson-id"){var p=M.computeBbox(M.getTraceGeojson(s));m=[p[0],p[2]],l=[p[1],p[3]]}var w={padded:!0};s._extremes.lon=e(o.lonaxis._ax,m,w),s._extremes.lat=e(o.lataxis._ax,l,w)}B.exports={calcGeoJSON:n,plot:i}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(t,B,G){B.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,i=[],n,r,v,s,o;if(M===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++)r=T[n],v=r.ct,v&&(s=e.c2p(v),o=a.c2p(v),M.contains([s,o],null,n,f)?(i.push({pointNumber:n,lon:v[0],lat:v[1]}),r.selected=1):r.selected=0);return i}},{}],733:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../../components/drawing"),T=t("../../components/colorscale");function e(n,r){r&&a(n,r)}function a(n,r){var v=r[0].trace,s=r[0].node3,o=s.selectAll(".choroplethlocation"),b=v.marker||{},g=b.line||{},d=T.makeColorScaleFuncFromTrace(v);o.each(function(c){x.select(this).attr("fill",d(c.z)).call(f.stroke,c.mlc||g.color).call(M.dashLine,"",c.mlw||g.width||0).style("opacity",b.opacity)}),M.selectedPointStyle(o,v)}function i(n,r){var v=r[0].node3,s=r[0].trace;s.selectedpoints?M.selectedPointStyle(v.selectAll(".choroplethlocation"),s):a(n,r)}B.exports={style:e,styleOnSelect:i}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(t,B,G){var x=t("../choropleth/attributes"),f=t("../../components/colorscale/attributes"),M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},x.featureidkey,{}),below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,marker:{line:{color:e({},x.marker.line.color,{editType:"plot"}),width:e({},x.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},x.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},x.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},x.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:x.hoverinfo,hovertemplate:M({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},f("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../components/colorscale"),T=t("../../components/drawing"),e=t("../../lib/geojson_utils").makeBlank,a=t("../../lib/geo_location_utils");function i(r){var v=r[0].trace,s=v.visible===!0&&v._length!==0,o={layout:{visibility:"none"},paint:{}},b={layout:{visibility:"none"},paint:{}},g=v._opts={fill:o,line:b,geojson:e()};if(!s)return g;var d=a.extractTraceFeature(r);if(!d)return g;var c=M.makeColorScaleFuncFromTrace(v),m=v.marker,l=m.line||{},y;f.isArrayOrTypedArray(m.opacity)&&(y=function(E){var S=E.mo;return x(S)?+f.constrain(S,0,1):0});var u;f.isArrayOrTypedArray(l.color)&&(u=function(E){return E.mlc});var A;f.isArrayOrTypedArray(l.width)&&(A=function(E){return E.mlw});for(var _=0;_<r.length;_++){var p=r[_],w=p.fOut;if(w){var h=w.properties;h.fc=c(p.z),y&&(h.mo=y(p)),u&&(h.mlc=u(p)),A&&(h.mlw=A(p)),p.ct=h.ct,p._polygons=a.feature2polygons(w)}}var L=y?{type:"identity",property:"mo"}:m.opacity;return f.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),f.extendFlat(b.paint,{"line-color":u?{type:"identity",property:"mlc"}:l.color,"line-width":A?{type:"identity",property:"mlw"}:l.width,"line-opacity":L}),o.layout.visibility="visible",b.layout.visibility="visible",g.geojson={type:"FeatureCollection",features:d},n(r),g}function n(r){var v=r[0].trace,s=v._opts,o;if(v.selectedpoints){for(var b=T.makeSelectedPointStyleFns(v),g=0;g<r.length;g++){var d=r[g];d.fOut&&(d.fOut.properties.mo2=b.selectedOpacityFn(d))}o={type:"identity",property:"mo2"}}else o=f.isArrayOrTypedArray(v.marker.opacity)?{type:"identity",property:"mo"}:v.marker.opacity;return f.extendFlat(s.fill.paint,{"fill-opacity":o}),f.extendFlat(s.line.paint,{"line-opacity":o}),s}B.exports={convert:i,convertOnSelect:n}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/defaults"),M=t("./attributes");B.exports=function(e,a,i,n){function r(g,d){return x.coerce(e,a,M,g,d)}var v=r("locations"),s=r("z"),o=r("geojson");if(!x.isArrayOrTypedArray(v)||!v.length||!x.isArrayOrTypedArray(s)||!s.length||!(typeof o=="string"&&o!==""||x.isPlainObject(o))){a.visible=!1;return}r("featureidkey"),a._length=Math.min(v.length,s.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var b=r("marker.line.width");b&&r("marker.line.color"),r("marker.opacity"),f(e,a,n,r,{prefix:"",cLetter:"z"}),x.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../choropleth/calc"),plot:t("./plot"),hoverPoints:t("../choropleth/hover"),eventData:t("../choropleth/event_data"),selectPoints:t("../choropleth/select"),styleOnSelect:function(x,f){if(f){var M=f[0].trace;M._glTrace.updateOnSelect(f)}},getBelow:function(x,f){for(var M=f.getMapLayers(),T=M.length-2;T>=0;T--){var e=M[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<M.length;a++)if(e=M[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(t,B,G){var x=t("./convert").convert,f=t("./convert").convertOnSelect,M=t("../../plots/mapbox/constants").traceLayerPrefix;function T(a,i){this.type="choroplethmapbox",this.subplot=a,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",M+i+"-fill"],["line",M+i+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(x(a)),a[0].trace._glTrace=this},e.updateOnSelect=function(a){this._update(f(a))},e._update=function(a){var i=this.subplot,n=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var v=0;v<n.length;v++){var s=n[v],o=s[0],b=s[1],g=a[o];i.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&i.setOptions(b,"setPaintProperty",g.paint)}},e._addLayers=function(a,i){for(var n=this.subplot,r=this.layerList,v=this.sourceId,s=0;s<r.length;s++){var o=r[s],b=o[0],g=a[b];n.addLayer({type:b,id:o[1],source:v,layout:g.layout,paint:g.paint},i)}},e._removeLayers=function(){for(var a=this.subplot.map,i=this.layerList,n=i.length-1;n>=0;n--)a.removeLayer(i[n][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},B.exports=function(i,n){var r=n[0].trace,v=new T(i,r.uid),s=v.sourceId,o=x(n),b=v.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(s,{type:"geojson",data:o.geojson}),v._addLayers(o,b),n[0].trace._glTrace=v,v}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["norm"]}),uhoverformat:f("u",1),vhoverformat:f("v",1),whoverformat:f("w",1),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,x("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,B.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(t,B,G){var x=t("../../components/colorscale/calc");B.exports=function(M,T){for(var e=T.u,a=T.v,i=T.w,n=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,i.length),r=-1/0,v=1/0,s=0;s<n;s++){var o=e[s],b=a[s],g=i[s],d=Math.sqrt(o*o+b*b+g*g);r=Math.max(r,d),v=Math.min(v,d)}T._len=n,T._normMax=r,x(M,T,{vals:[v,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(t,B,G){var x=t("../../../stackgl_modules").gl_cone3d,f=t("../../../stackgl_modules").gl_cone3d.createConeMesh,M=t("../../lib").simpleMap,T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3");function i(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var n=i.prototype;n.handlePick=function(g){if(g.object===this.mesh){var d=g.index=g.data.index,c=this.data.x[d],m=this.data.y[d],l=this.data.z[d],y=this.data.u[d],u=this.data.v[d],A=this.data.w[d];g.traceCoordinate=[c,m,l,y,u,A,Math.sqrt(y*y+u*u+A*A)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[d]!==void 0?g.textLabel=_[d]:_&&(g.textLabel=_),!0}};var r={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(g,d){var c=g.fullSceneLayout,m=g.dataScale,l={};function y(p,w){var h=c[w],L=m[r[w]];return M(p,function(E){return h.d2l(E)*L})}l.vectors=a(y(d.u,"xaxis"),y(d.v,"yaxis"),y(d.w,"zaxis"),d._len),l.positions=a(y(d.x,"xaxis"),y(d.y,"yaxis"),y(d.z,"zaxis"),d._len);var u=e(d);l.colormap=T(d),l.vertexIntensityBounds=[u.min/d._normMax,u.max/d._normMax],l.coneOffset=v[d.anchor],d.sizemode==="scaled"?l.coneSize=d.sizeref||.5:l.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var A=x(l),_=d.lightposition;return A.lightPosition=[_.x,_.y,_.z],A.ambient=d.lighting.ambient,A.diffuse=d.lighting.diffuse,A.specular=d.lighting.specular,A.roughness=d.lighting.roughness,A.fresnel=d.lighting.fresnel,A.opacity=d.opacity,d._pad=s[d.anchor]*A.vectorScale*A.coneScale*d._normMax,A}n.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var c=g.glplot.gl,m=o(g,d),l=f(c,m),y=new i(g,d.uid);return y.mesh=l,y.data=d,l._trace=y,g.glplot.add(l),y}B.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/defaults"),M=t("./attributes");B.exports=function(e,a,i,n){function r(c,m){return x.coerce(e,a,M,c,m)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),f(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(t,B,G){B.exports={moduleType:"trace",name:"cone",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),eventData:function(x,f){return x.norm=f.traceCoordinate[6],x},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(t,B,G){var x=t("../heatmap/attributes"),f=t("../scatter/attributes"),M=t("../../plots/cartesian/axis_format_attributes"),T=M.axisHoverFormat,e=M.descriptionOnlyNumbers,a=t("../../components/colorscale/attributes"),i=t("../../components/drawing/attributes").dash,n=t("../../plots/font_attributes"),r=t("../../lib/extend").extendFlat,v=t("../../constants/filter_ops"),s=v.COMPARISON_OPS2,o=v.INTERVAL_OPS,b=f.line;B.exports=r({z:x.z,x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,text:x.text,hovertext:x.hovertext,transpose:x.transpose,xtype:x.xtype,ytype:x.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:x.hovertemplate,texttemplate:r({},x.texttemplate,{}),textfont:r({},x.textfont,{}),hoverongaps:x.hoverongaps,connectgaps:r({},x.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},b.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(t,B,G){var x=t("../../components/colorscale"),f=t("../heatmap/calc"),M=t("./set_contours"),T=t("./end_plus");B.exports=function(a,i){var n=f(a,i),r=n[0].z;M(i,r);var v=i.contours,s=x.extractOpts(i),o;if(v.coloring==="heatmap"&&s.auto&&i.autocontour===!1){var b=v.start,g=T(v),d=v.size||1,c=Math.floor((g-b)/d)+1;isFinite(d)||(d=1,c=1);var m=b-d/2,l=m+c*d;o=[m,l]}else o=r;return x.calc(a,i,{vals:o,cLetter:"z"}),n}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(t,B,G){B.exports=function(x,f){var M=x[0],T=M.z,e;switch(f.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<x.length;e++){var i=x[e];i.prefixBoundary=!i.edgepaths.length&&(a>i.level||i.starts.length&&a===i.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var n=M.x.length,r=M.y.length,v=-1/0,s=1/0;for(e=0;e<r;e++)s=Math.min(s,T[e][0]),s=Math.min(s,T[e][n-1]),v=Math.max(v,T[e][0]),v=Math.max(v,T[e][n-1]);for(e=1;e<n-1;e++)s=Math.min(s,T[0][e]),s=Math.min(s,T[r-1][e]),v=Math.max(v,T[0][e]),v=Math.max(v,T[r-1][e]);var o=f.value,b,g;switch(f._operation){case">":o>v&&(M.prefixBoundary=!0);break;case"<":(o<s||M.starts.length&&o===s)&&(M.prefixBoundary=!0);break;case"[]":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),(g<s||b>v||M.starts.length&&g===s)&&(M.prefixBoundary=!0);break;case"][":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),b<s&&g>v&&(M.prefixBoundary=!0);break}break}}},{}],747:[function(t,B,G){var x=t("../../components/colorscale"),f=t("./make_color_map"),M=t("./end_plus");function T(e,a,i){var n=a.contours,r=a.line,v=n.size||1,s=n.coloring,o=f(a,{isColorbar:!0});if(s==="heatmap"){var b=x.extractOpts(a);i._fillgradient=b.reversescale?x.flipScale(b.colorscale):b.colorscale,i._zrange=[b.min,b.max]}else s==="fill"&&(i._fillcolor=o);i._line={color:s==="lines"?o:r.color,width:n.showlines!==!1?r.width:0,dash:r.dash},i._levels={start:n.start,end:M(n),size:v}}B.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(t,B,G){B.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(t,B,G){var x=t("fast-isnumeric"),f=t("./label_defaults"),M=t("../../components/color"),T=M.addOpacity,e=M.opacity,a=t("../../constants/filter_ops"),i=a.CONSTRAINT_REDUCTION,n=a.COMPARISON_OPS2;B.exports=function(s,o,b,g,d,c){var m=o.contours,l,y,u,A=b("contours.operation");if(m._operation=i[A],r(b,m),A==="="?l=m.showlines=!0:(l=b("contours.showlines"),u=b("fillcolor",T((s.line||{}).color||d,.5))),l){var _=u&&e(u)?T(o.fillcolor,1):d;y=b("line.color",_),b("line.width",2),b("line.dash")}b("line.smoothing"),f(b,g,y,c)};function r(v,s){var o;n.indexOf(s.operation)===-1?(v("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:x(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(v("contours.value",0),x(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(t,B,G){var x=t("../../constants/filter_ops"),f=t("fast-isnumeric");B.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function M(a,i){var n=Array.isArray(i),r;function v(s){return f(s)?+s:null}return x.COMPARISON_OPS2.indexOf(a)!==-1?r=v(n?i[0]:i):x.INTERVAL_OPS.indexOf(a)!==-1?r=n?[v(i[0]),v(i[1])]:[v(i),v(i)]:x.SET_OPS.indexOf(a)!==-1&&(r=n?i.map(v):[v(i)]),r}function T(a){return function(i){i=M(a,i);var n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:n,end:r,size:r-n}}}function e(a){return function(i){return i=M(a,i),{start:i,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(t,B,G){B.exports=function(f,M,T,e){var a=e("contours.start"),i=e("contours.end"),n=a===!1||i===!1,r=T("contours.size"),v;n?v=M.autocontour=!0:v=T("autocontour",!1),(v||!r)&&T("ncontours")}},{}],752:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){var e,a,i,n=function(s){return s.reverse()},r=function(s){return s};switch(T){case"=":case"<":return M;case">":for(M.length!==1&&x.warn("Contour data invalid for the specified inequality operation."),a=M[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);return M;case"][":var v=n;n=r,r=v;case"[]":for(M.length!==2&&x.warn("Contour data invalid for the specified inequality range operation."),a=f(M[0]),i=f(M[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);for(;i.edgepaths.length;)a.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)a.paths.push(r(i.paths.shift()));for(;i.starts.length;)a.starts.push(r(i.starts.shift()));return[a]}};function f(M){return x.extendFlat({},M,{edgepaths:x.extendDeep([],M.edgepaths),paths:x.extendDeep([],M.paths),starts:x.extendDeep([],M.starts)})}},{"../../lib":515}],753:[function(t,B,G){var x=t("../../lib"),f=t("../heatmap/xyz_defaults"),M=t("../scatter/period_defaults"),T=t("./constraint_defaults"),e=t("./contours_defaults"),a=t("./style_defaults"),i=t("../heatmap/label_defaults"),n=t("./attributes");B.exports=function(v,s,o,b){function g(l,y){return x.coerce(v,s,n,l,y)}function d(l){return x.coerce2(v,s,n,l)}var c=f(v,s,g,b);if(!c){s.visible=!1;return}M(v,s,b,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hoverongaps"),g("hovertemplate");var m=g("contours.type")==="constraint";g("connectgaps",x.isArray1D(s.z)),m?T(v,s,g,b,o):(e(v,s,g,d),a(v,s,g,b)),s.contours&&s.contours.coloring==="heatmap"&&i(g,b)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(t,B,G){var x=t("../../lib"),f=t("./constraint_mapping"),M=t("./end_plus");B.exports=function(e,a,i){for(var n=e.type==="constraint"?f[e._operation](e.value):e,r=n.size,v=[],s=M(n),o=i.trace._carpetTrace,b=o?{xaxis:o.aaxis,yaxis:o.baxis,x:i.a,y:i.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:i.x,y:i.y},g=n.start;g<s;g+=r)if(v.push(x.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},b)),v.length>1e3){x.warn("Too many contours, clipping at 1000",e);break}return v}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(t,B,G){B.exports=function(f){return f.end+f.size/1e6}},{}],756:[function(t,B,G){var x=t("../../lib"),f=t("./constants");B.exports=function(r,v,s){var o,b,g,d,c;for(v=v||.01,s=s||.01,g=0;g<r.length;g++){for(d=r[g],c=0;c<d.starts.length;c++)b=d.starts[c],e(d,b,"edge",v,s);for(o=0;Object.keys(d.crossings).length&&o<1e4;)o++,b=Object.keys(d.crossings)[0].split(",").map(Number),e(d,b,void 0,v,s);o===1e4&&x.log("Infinite loop in contour?")}};function M(n,r,v,s){return Math.abs(n[0]-r[0])<v&&Math.abs(n[1]-r[1])<s}function T(n,r){var v=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(v*v+s*s)}function e(n,r,v,s,o){var b=r.join(","),g=n.crossings[b],d=a(g,v,r),c=[i(n,r,[-d[0],-d[1]])],m=n.z.length,l=n.z[0].length,y=r.slice(),u=d.slice(),A;for(A=0;A<1e4;A++){if(g>20?(g=f.CHOOSESADDLE[g][(d[0]||d[1])<0?0:1],n.crossings[b]=f.SADDLEREMAINDER[g]):delete n.crossings[b],d=f.NEWDELTA[g],!d){x.log("Found bad marching index:",g,r,n.level);break}c.push(i(n,r,d)),r[0]+=d[0],r[1]+=d[1],b=r.join(","),M(c[c.length-1],c[c.length-2],s,o)&&c.pop();var _=d[0]&&(r[0]<0||r[0]>l-2)||d[1]&&(r[1]<0||r[1]>m-2),p=r[0]===y[0]&&r[1]===y[1]&&d[0]===u[0]&&d[1]===u[1];if(p||v&&_)break;g=n.crossings[b]}A===1e4&&x.log("Infinite loop in contour?");var w=M(c[0],c[c.length-1],s,o),h=0,L=.2*n.smoothing,E=[],S=0,P,F,I,D,R,O,z,H,Y,ee,j;for(A=1;A<c.length;A++)z=T(c[A],c[A-1]),h+=z,E.push(z);var X=h/E.length*L;function ae(J){return c[J%c.length]}for(A=c.length-2;A>=S;A--)if(P=E[A],P<X){for(I=0,F=A-1;F>=S&&P+E[F]<X;F--)P+=E[F];if(w&&A===c.length-2)for(I=0;I<F&&P+E[I]<X;I++)P+=E[I];R=A-F+I+1,O=Math.floor((A+F+I+2)/2),!w&&A===c.length-2?D=c[c.length-1]:!w&&F===-1?D=c[0]:R%2?D=ae(O):D=[(ae(O)[0]+ae(O+1)[0])/2,(ae(O)[1]+ae(O+1)[1])/2],c.splice(F+1,A-F+1,D),A=F+1,I&&(S=I),w&&(A===c.length-2?c[I]=c[c.length-1]:A===0&&(c[c.length-1]=c[0]))}for(c.splice(0,S),A=0;A<c.length;A++)c[A].length=2;if(!(c.length<2))if(w)c.pop(),n.paths.push(c);else{v||x.log("Unclosed interior contour?",n.level,y.join(","),c.join("L"));var fe=!1;for(H=0;H<n.edgepaths.length;H++)if(ee=n.edgepaths[H],!fe&&M(ee[0],c[c.length-1],s,o)){c.pop(),fe=!0;var K=!1;for(Y=0;Y<n.edgepaths.length;Y++)if(j=n.edgepaths[Y],M(j[j.length-1],c[0],s,o)){K=!0,c.shift(),n.edgepaths.splice(H,1),Y===H?n.paths.push(c.concat(j)):(Y>H&&Y--,n.edgepaths[Y]=j.concat(c,ee));break}K||(n.edgepaths[H]=c.concat(ee))}for(H=0;H<n.edgepaths.length&&!fe;H++)ee=n.edgepaths[H],M(ee[ee.length-1],c[0],s,o)&&(c.shift(),n.edgepaths[H]=ee.concat(c),fe=!0);fe||n.edgepaths.push(c)}}function a(n,r,v){var s=0,o=0;return n>20&&r?n===208||n===1114?s=v[0]===0?1:-1:o=v[1]===0?1:-1:f.BOTTOMSTART.indexOf(n)!==-1?o=1:f.LEFTSTART.indexOf(n)!==-1?s=1:f.TOPSTART.indexOf(n)!==-1?o=-1:s=-1,[s,o]}function i(n,r,v){var s=r[0]+Math.max(v[0],0),o=r[1]+Math.max(v[1],0),b=n.z[o][s],g=n.xaxis,d=n.yaxis;if(v[1]){var c=(n.level-b)/(n.z[o][s+1]-b),m=(c!==1?(1-c)*g.c2l(n.x[s]):0)+(c!==0?c*g.c2l(n.x[s+1]):0);return[g.c2p(g.l2c(m),!0),d.c2p(n.y[o],!0),s+c,o]}else{var l=(n.level-b)/(n.z[o+1][s]-b),y=(l!==1?(1-l)*d.c2l(n.y[o]):0)+(l!==0?l*d.c2l(n.y[o+1]):0);return[g.c2p(n.x[s],!0),d.c2p(d.l2c(y),!0),s,o+l]}}},{"../../lib":515,"./constants":748}],757:[function(t,B,G){var x=t("../../components/color"),f=t("../heatmap/hover");B.exports=function(T,e,a,i,n){n||(n={}),n.isContour=!0;var r=f(T,e,a,i,n);return r&&r.forEach(function(v){var s=v.trace;s.contours.type==="constraint"&&(s.fillcolor&&x.opacity(s.fillcolor)?v.color=x.addOpacity(s.fillcolor,1):s.contours.showlines&&x.opacity(s.line.color)&&(v.color=x.addOpacity(s.line.color,1)))}),r}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot").plot,style:t("./style"),colorbar:t("./colorbar"),hoverPoints:t("./hover"),moduleType:"trace",name:"contour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T,e,a){a||(a={});var i=M("contours.showlabels");if(i){var n=T.font;x.coerceFont(M,"contours.labelfont",{family:n.family,size:n.size,color:e}),M("contours.labelformat")}a.hasHover!==!1&&M("zhoverformat")}},{"../../lib":515}],760:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/colorscale"),M=t("./end_plus");B.exports=function(e){var a=e.contours,i=a.start,n=M(a),r=a.size||1,v=Math.floor((n-i)/r)+1,s=a.coloring==="lines"?0:1,o=f.extractOpts(e);isFinite(r)||(r=1,v=1);var b=o.reversescale?f.flipScale(o.colorscale):o.colorscale,g=b.length,d=new Array(g),c=new Array(g),m,l;if(a.coloring==="heatmap"){var y=o.min,u=o.max;for(l=0;l<g;l++)m=b[l],d[l]=m[0]*(u-y)+y,c[l]=m[1];var A=x.extent([y,u,a.start,a.start+r*(v-1)]),_=A[y<u?0:1],p=A[y<u?1:0];_!==y&&(d.splice(0,0,_),c.splice(0,0,c[0])),p!==u&&(d.push(p),c.push(c[c.length-1]))}else for(l=0;l<g;l++)m=b[l],d[l]=(m[0]*(v+s-1)-s/2)*r+i,c[l]=m[1];return f.makeColorScaleFunc({domain:d,range:c},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(t,B,G){var x=t("./constants");B.exports=function(T){var e=T[0].z,a=e.length,i=e[0].length,n=a===2||i===2,r,v,s,o,b,g,d,c,m;for(v=0;v<a-1;v++)for(o=[],v===0&&(o=o.concat(x.BOTTOMSTART)),v===a-2&&(o=o.concat(x.TOPSTART)),r=0;r<i-1;r++)for(s=o.slice(),r===0&&(s=s.concat(x.LEFTSTART)),r===i-2&&(s=s.concat(x.RIGHTSTART)),b=r+","+v,g=[[e[v][r],e[v][r+1]],[e[v+1][r],e[v+1][r+1]]],m=0;m<T.length;m++)c=T[m],d=f(c.level,g),d&&(c.crossings[b]=d,s.indexOf(d)!==-1&&(c.starts.push([r,v]),n&&s.indexOf(d,s.indexOf(d)+1)!==-1&&c.starts.push([r,v])))};function f(M,T){var e=(T[0][0]>M?0:1)+(T[0][1]>M?0:2)+(T[1][1]>M?0:4)+(T[1][0]>M?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return M>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":748}],762:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../../components/colorscale"),e=t("../../lib/svg_text_utils"),a=t("../../plots/cartesian/axes"),i=t("../../plots/cartesian/set_convert"),n=t("../heatmap/plot"),r=t("./make_crossings"),v=t("./find_all_paths"),s=t("./empty_pathinfo"),o=t("./convert_to_constraints"),b=t("./close_boundaries"),g=t("./constants"),d=g.LABELOPTIMIZER;G.plot=function(w,h,L,E){var S=h.xaxis,P=h.yaxis;f.makeTraceGroups(E,L,"contour").each(function(F){var I=x.select(this),D=F[0],R=D.trace,O=D.x,z=D.y,H=R.contours,Y=s(H,h,D),ee=f.ensureSingle(I,"g","heatmapcoloring"),j=[];H.coloring==="heatmap"&&(j=[F]),n(w,h,j,ee),r(Y),v(Y);var X=S.c2p(O[0],!0),ae=S.c2p(O[O.length-1],!0),fe=P.c2p(z[0],!0),K=P.c2p(z[z.length-1],!0),J=[[X,K],[ae,K],[ae,fe],[X,fe]],U=Y;H.type==="constraint"&&(U=o(Y,H._operation)),c(I,J,H),m(I,U,J,H),y(I,Y,w,D,H),A(I,h,w,D,J)})};function c(p,w,h){var L=f.ensureSingle(p,"g","contourbg"),E=L.selectAll("path").data(h.coloring==="fill"?[0]:[]);E.enter().append("path"),E.exit().remove(),E.attr("d","M"+w.join("L")+"Z").style("stroke","none")}function m(p,w,h,L){var E=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",S="M"+h.join("L")+"Z";E&&b(w,L);var P=f.ensureSingle(p,"g","contourfill"),F=P.selectAll("path").data(E?w:[]);F.enter().append("path"),F.exit().remove(),F.each(function(I){var D=(I.prefixBoundary?S:"")+l(I,h);D?x.select(this).attr("d",D).style("stroke","none"):x.select(this).remove()})}function l(p,w){var h="",L=0,E=p.edgepaths.map(function(X,ae){return ae}),S=!0,P,F,I,D,R,O;function z(X){return Math.abs(X[1]-w[0][1])<.01}function H(X){return Math.abs(X[1]-w[2][1])<.01}function Y(X){return Math.abs(X[0]-w[0][0])<.01}function ee(X){return Math.abs(X[0]-w[2][0])<.01}for(;E.length;){for(O=M.smoothopen(p.edgepaths[L],p.smoothing),h+=S?O:O.replace(/^M/,"L"),E.splice(E.indexOf(L),1),P=p.edgepaths[L][p.edgepaths[L].length-1],D=-1,I=0;I<4;I++){if(!P){f.log("Missing end?",L,p);break}for(z(P)&&!ee(P)?F=w[1]:Y(P)?F=w[0]:H(P)?F=w[3]:ee(P)&&(F=w[2]),R=0;R<p.edgepaths.length;R++){var j=p.edgepaths[R][0];Math.abs(P[0]-F[0])<.01?Math.abs(P[0]-j[0])<.01&&(j[1]-P[1])*(F[1]-j[1])>=0&&(F=j,D=R):Math.abs(P[1]-F[1])<.01?Math.abs(P[1]-j[1])<.01&&(j[0]-P[0])*(F[0]-j[0])>=0&&(F=j,D=R):f.log("endpt to newendpt is not vert. or horz.",P,F,j)}if(P=F,D>=0)break;h+="L"+F}if(D===p.edgepaths.length){f.log("unclosed perimeter path");break}L=D,S=E.indexOf(L)===-1,S&&(L=E[0],h+="Z")}for(L=0;L<p.paths.length;L++)h+=M.smoothclosed(p.paths[L],p.smoothing);return h}function y(p,w,h,L,E){var S=f.ensureSingle(p,"g","contourlines"),P=E.showlines!==!1,F=E.showlabels,I=P&&F,D=G.createLines(S,P||F,w),R=G.createLineClip(S,I,h,L.trace.uid),O=p.selectAll("g.contourlabels").data(F?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),F){var z=[],H=[];f.clearLocationCache();var Y=G.labelFormatter(h,L),ee=M.tester.append("text").attr("data-notex",1).call(M.font,E.labelfont),j=w[0].xaxis,X=w[0].yaxis,ae=j._length,fe=X._length,K=j.range,J=X.range,U=f.aggNums(Math.min,null,L.x),V=f.aggNums(Math.max,null,L.x),q=f.aggNums(Math.min,null,L.y),re=f.aggNums(Math.max,null,L.y),Z=Math.max(j.c2p(U,!0),0),Q=Math.min(j.c2p(V,!0),ae),ie=Math.max(X.c2p(re,!0),0),oe=Math.min(X.c2p(q,!0),fe),ne={};K[0]<K[1]?(ne.left=Z,ne.right=Q):(ne.left=Q,ne.right=Z),J[0]<J[1]?(ne.top=ie,ne.bottom=oe):(ne.top=oe,ne.bottom=ie),ne.middle=(ne.top+ne.bottom)/2,ne.center=(ne.left+ne.right)/2,z.push([[ne.left,ne.top],[ne.right,ne.top],[ne.right,ne.bottom],[ne.left,ne.bottom]]);var se=Math.sqrt(ae*ae+fe*fe),_e=g.LABELDISTANCE*se/Math.max(1,w.length/g.LABELINCREASE);D.each(function(ue){var ge=G.calcTextOpts(ue.level,Y,ee,h);x.select(this).selectAll("path").each(function(){var xe=this,ye=f.getVisibleSegment(xe,ne,ge.height/2);if(!!ye&&!(ye.len<(ge.width+ge.height)*g.LABELMIN))for(var be=Math.min(Math.ceil(ye.len/_e),g.LABELMAX),Se=0;Se<be;Se++){var Re=G.findBestTextLocation(xe,ye,ge,H,ne);if(!Re)break;G.addLabelData(Re,ge,H,z)}})}),ee.remove(),G.drawLabels(O,H,h,R,I?z:null)}F&&!P&&D.remove()}G.createLines=function(p,w,h){var L=h[0].smoothing,E=p.selectAll("g.contourlevel").data(w?h:[]);if(E.exit().remove(),E.enter().append("g").classed("contourlevel",!0),w){var S=E.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(F){return M.smoothopen(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=E.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(F){return M.smoothclosed(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return E},G.createLineClip=function(p,w,h,L){var E=h._fullLayout._clips,S=w?"clipline"+L:null,P=E.selectAll("#"+S).data(w?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",S),M.setClipUrl(p,S,h),P},G.labelFormatter=function(p,w){var h=p._fullLayout,L=w.trace,E=L.contours,S={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(E.labelformat)S.tickformat=E.labelformat,i(S,h);else{var P=T.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)S=P.colorbar._axis;else{if(E.type==="constraint"){var F=E.value;Array.isArray(F)?S.range=[F[0],F[F.length-1]]:S.range=[F,F]}else S.range=[E.start,E.end],S.nticks=(E.end-E.start)/E.size;S.range[0]===S.range[1]&&(S.range[1]+=S.range[0]||1),S.nticks||(S.nticks=1e3),i(S,h),a.prepTicks(S),S._tmin=null,S._tmax=null}}return function(I){return a.tickText(S,I).text}},G.calcTextOpts=function(p,w,h,L){var E=w(p);h.text(E).call(e.convertToTspans,L);var S=h.node(),P=M.bBox(S,!0);return{text:E,width:P.width,height:P.height,fontSize:+S.style["font-size"].replace("px",""),level:p,dy:(P.top+P.bottom)/2}},G.findBestTextLocation=function(p,w,h,L,E){var S=h.width,P,F,I,D,R;w.isClosed?(F=w.len/d.INITIALSEARCHPOINTS,P=w.min+F/2,I=w.max):(F=(w.len-S)/(d.INITIALSEARCHPOINTS+1),P=w.min+F+S/2,I=w.max-(F+S)/2);for(var O=1/0,z=0;z<d.ITERATIONS;z++){for(var H=P;H<I;H+=F){var Y=f.getTextLocation(p,w.total,H,S),ee=u(Y,h,L,E);ee<O&&(O=ee,R=Y,D=H)}if(O>d.MAXCOST*2)break;z&&(F/=2),P=D-F/2,I=P+F*1.5}if(O<=d.MAXCOST)return R};function u(p,w,h,L){var E=w.width/2,S=w.height/2,P=p.x,F=p.y,I=p.theta,D=Math.cos(I)*E,R=Math.sin(I)*E,O=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(I)*S)),z=(F>L.middle?L.bottom-F:F-L.top)/(Math.abs(R)+Math.cos(I)*S);if(O<1||z<1)return 1/0;var H=d.EDGECOST*(1/(O-1)+1/(z-1));H+=d.ANGLECOST*I*I;for(var Y=P-D,ee=F-R,j=P+D,X=F+R,ae=0;ae<h.length;ae++){var fe=h[ae],K=Math.cos(fe.theta)*fe.width/2,J=Math.sin(fe.theta)*fe.width/2,U=f.segmentDistance(Y,ee,j,X,fe.x-K,fe.y-J,fe.x+K,fe.y+J)*2/(w.height+fe.height),V=fe.level===w.level,q=V?d.SAMELEVELDISTANCE:1;if(U<=q)return 1/0;var re=d.NEIGHBORCOST*(V?d.SAMELEVELFACTOR:1);H+=re/(U-q)}return H}G.addLabelData=function(p,w,h,L){var E=w.fontSize,S=w.width+E/3,P=Math.max(0,w.height-E/3),F=p.x,I=p.y,D=p.theta,R=Math.sin(D),O=Math.cos(D),z=function(Y,ee){return[F+Y*O-ee*R,I+Y*R+ee*O]},H=[z(-S/2,-P/2),z(-S/2,P/2),z(S/2,P/2),z(S/2,-P/2)];h.push({text:w.text,x:F,y:I,dy:w.dy,theta:D,level:w.level,width:S,height:P}),L.push(H)},G.drawLabels=function(p,w,h,L,E){var S=p.selectAll("text").data(w,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(S.exit().remove(),S.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,O=D.y-Math.cos(D.theta)*D.dy;x.select(this).text(D.text).attr({x:R,y:O,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+O+")"}).call(e.convertToTspans,h)}),E){for(var P="",F=0;F<E.length;F++)P+="M"+E[F].join("L")+"Z";var I=f.ensureSingle(L,"path","");I.attr("d",P)}};function A(p,w,h,L,E){var S=L.trace,P=h._fullLayout._clips,F="clip"+S.uid,I=P.selectAll("#"+F).data(S.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",F),I.exit().remove(),S.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:w.xaxis,yaxis:w.yaxis,x:L.x,y:L.y,z:_(L),smoothing:0};r([D]),v([D]),b([D],{type:"levels"});var R=f.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+E.join("L")+"Z":"")+l(D,E))}else F=null;M.setClipUrl(p,F,h)}function _(p){var w=p.trace._emptypoints,h=[],L=p.z.length,E=p.z[0].length,S,P=[],F;for(S=0;S<E;S++)P.push(1);for(S=0;S<L;S++)h.push(P.slice());for(S=0;S<w.length;S++)F=w[S],h[F[0]][F[1]]=0;return p.zmask=h,h}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib");B.exports=function(e,a){var i=e.contours;if(e.autocontour){var n=e.zmin,r=e.zmax;(e.zauto||n===void 0)&&(n=f.aggNums(Math.min,null,a)),(e.zauto||r===void 0)&&(r=f.aggNums(Math.max,null,a));var v=M(n,r,e.ncontours);i.size=v.dtick,i.start=x.tickFirst(v),v.range.reverse(),i.end=x.tickFirst(v),i.start===n&&(i.start+=i.size),i.end===r&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),e._input.contours||(e._input.contours={}),f.extendFlat(e._input.contours,{start:i.start,end:i.end,size:i.size}),e._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,o=i.end,b=e._input.contours;if(s>o&&(i.start=b.start=o,o=i.end=b.end=s,s=i.start),!(i.size>0)){var g;s===o?g=1:g=M(s,o,e.ncontours).dtick,b.size=i.size=g}}};function M(T,e,a){var i={type:"linear",range:[T,e]};return x.autoTicks(i,(e-T)/(a||15)),i}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../heatmap/style"),T=t("./make_color_map");B.exports=function(a){var i=x.select(a).selectAll("g.contour");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var r=x.select(this),v=n[0].trace,s=v.contours,o=v.line,b=s.size||1,g=s.start,d=s.type==="constraint",c=!d&&s.coloring==="lines",m=!d&&s.coloring==="fill",l=c||m?T(v):null;r.selectAll("g.contourlevel").each(function(A){x.select(this).selectAll("path").call(f.lineGroupStyle,o.width,c?l(A.level):o.color,o.dash)});var y=s.labelfont;if(r.selectAll("g.contourlabels text").each(function(A){f.font(x.select(this),{family:y.family,size:y.size,color:y.color||(c?l(A.level):o.color)})}),d)r.selectAll("g.contourfill path").style("fill",v.fillcolor);else if(m){var u;r.selectAll("g.contourfill path").style("fill",function(A){return u===void 0&&(u=A.level),l(A.level+.5*b)}),u===void 0&&(u=g),r.selectAll("g.contourbg path").style("fill",l(u-.5*b))}}),M(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(t,B,G){var x=t("../../components/colorscale/defaults"),f=t("./label_defaults");B.exports=function(T,e,a,i,n){var r=a("contours.coloring"),v,s="";r==="fill"&&(v=a("contours.showlines")),v!==!1&&(r!=="lines"&&(s=a("line.color","#000")),a("line.width",.5),a("line.dash")),r!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,x(T,e,i,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),f(a,i,s,n)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(t,B,G){var x=t("../heatmap/attributes"),f=t("../contour/attributes"),M=t("../../components/colorscale/attributes"),T=t("../../lib/extend").extendFlat,e=f.contours;B.exports=T({carpet:{valType:"string",editType:"calc"},z:x.z,a:x.x,a0:x.x0,da:x.dx,b:x.y,b0:x.y0,db:x.dy,text:x.text,hovertext:x.hovertext,transpose:x.transpose,atype:x.xtype,btype:x.ytype,fillcolor:f.fillcolor,autocontour:f.autocontour,ncontours:f.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f.line.color,width:f.line.width,dash:f.line.dash,smoothing:f.line.smoothing,editType:"plot"},transforms:void 0},M("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(t,B,G){var x=t("../../components/colorscale/calc"),f=t("../../lib"),M=t("../heatmap/convert_column_xyz"),T=t("../heatmap/clean_2d_array"),e=t("../heatmap/interp2d"),a=t("../heatmap/find_empties"),i=t("../heatmap/make_bound_array"),n=t("./defaults"),r=t("../carpet/lookup_carpetid"),v=t("../contour/set_contours");B.exports=function(b,g){var d=g._carpetTrace=r(b,g);if(!(!d||!d.visible||d.visible==="legendonly")){if(!g.a||!g.b){var c=b.data[d.index],m=b.data[g.index];m.a||(m.a=c.a),m.b||(m.b=c.b),n(m,g,g._defaultColor,b._fullLayout)}var l=s(b,g);return v(g,g._z),l}};function s(o,b){var g=b._carpetTrace,d=g.aaxis,c=g.baxis,m,l,y,u,A,_,p;d._minDtick=0,c._minDtick=0,f.isArray1D(b.z)&&M(b,d,c,"a","b",["z"]),m=b._a=b._a||b.a,u=b._b=b._b||b.b,m=m?d.makeCalcdata(b,"_a"):[],u=u?c.makeCalcdata(b,"_b"):[],l=b.a0||0,y=b.da||1,A=b.b0||0,_=b.db||1,p=b._z=T(b._z||b.z,b.transpose),b._emptypoints=a(p),e(p,b._emptypoints);var w=f.maxRowLength(p),h=b.xtype==="scaled"?"":m,L=i(b,h,l,y,w,d),E=b.ytype==="scaled"?"":u,S=i(b,E,A,_,p.length,c),P={a:L,b:S,z:p};return b.contours.type==="levels"&&b.contours.coloring!=="none"&&x(o,b,{vals:p,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(t,B,G){var x=t("../../lib"),f=t("../heatmap/xyz_defaults"),M=t("./attributes"),T=t("../contour/constraint_defaults"),e=t("../contour/contours_defaults"),a=t("../contour/style_defaults");B.exports=function(n,r,v,s){function o(c,m){return x.coerce(n,r,M,c,m)}function b(c){return x.coerce2(n,r,M,c)}if(o("carpet"),n.a&&n.b){var g=f(n,r,o,s,"a","b");if(!g){r.visible=!1;return}o("text");var d=o("contours.type")==="constraint";d?T(n,r,o,s,v,{hasHover:!1}):(e(n,r,o,b),a(n,r,o,s,{hasHover:!1}))}else r._defaultColor=v,r._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../contour/colorbar"),calc:t("./calc"),plot:t("./plot"),style:t("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(t,B,G){var x=t("@plotly/d3"),f=t("../carpet/map_1d_array"),M=t("../carpet/makepath"),T=t("../../components/drawing"),e=t("../../lib"),a=t("../contour/make_crossings"),i=t("../contour/find_all_paths"),n=t("../contour/plot"),r=t("../contour/constants"),v=t("../contour/convert_to_constraints"),s=t("../contour/empty_pathinfo"),o=t("../contour/close_boundaries"),b=t("../carpet/lookup_carpetid"),g=t("../carpet/axis_aligned_line");B.exports=function(h,L,E,S){var P=L.xaxis,F=L.yaxis;e.makeTraceGroups(S,E,"contour").each(function(I){var D=x.select(this),R=I[0],O=R.trace,z=O._carpetTrace=b(h,O),H=h.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var Y=R.a,ee=R.b,j=O.contours,X=s(j,L,R),ae=j.type==="constraint",fe=j._operation,K=ae?fe==="="?"lines":"fill":j.coloring;function J(_e){var ue=z.ab2xy(_e[0],_e[1],!0);return[P.c2p(ue[0]),F.c2p(ue[1])]}var U=[[Y[0],ee[ee.length-1]],[Y[Y.length-1],ee[ee.length-1]],[Y[Y.length-1],ee[0]],[Y[0],ee[0]]];a(X);var V=(Y[Y.length-1]-Y[0])*1e-8,q=(ee[ee.length-1]-ee[0])*1e-8;i(X,V,q);var re=X;j.type==="constraint"&&(re=v(X,fe)),d(X,J);var Z,Q,ie,oe,ne=[];for(oe=H.clipsegments.length-1;oe>=0;oe--)Z=H.clipsegments[oe],Q=f([],Z.x,P.c2p),ie=f([],Z.y,F.c2p),Q.reverse(),ie.reverse(),ne.push(M(Q,ie,Z.bicubic));var se="M"+ne.join("L")+"Z";A(D,H.clipsegments,P,F,ae,K),_(O,D,P,F,re,U,J,z,H,K,se),c(D,X,h,R,j,L,z),T.setClipUrl(D,z._clipPathId,h)})};function d(w,h){var L,E,S,P,F,I,D,R,O;for(L=0;L<w.length;L++){for(P=w[L],F=P.pedgepaths=[],I=P.ppaths=[],E=0;E<P.edgepaths.length;E++){for(O=P.edgepaths[E],D=[],S=0;S<O.length;S++)D[S]=h(O[S]);F.push(D)}for(E=0;E<P.paths.length;E++){for(O=P.paths[E],R=[],S=0;S<O.length;S++)R[S]=h(O[S]);I.push(R)}}}function c(w,h,L,E,S,P,F){var I=e.ensureSingle(w,"g","contourlines"),D=S.showlines!==!1,R=S.showlabels,O=D&&R,z=n.createLines(I,D||R,h),H=n.createLineClip(I,O,L,E.trace.uid),Y=w.selectAll("g.contourlabels").data(R?[0]:[]);if(Y.exit().remove(),Y.enter().append("g").classed("contourlabels",!0),R){var ee=P.xaxis,j=P.yaxis,X=ee._length,ae=j._length,fe=[[[0,0],[X,0],[X,ae],[0,ae]]],K=[];e.clearLocationCache();var J=n.labelFormatter(L,E),U=T.tester.append("text").attr("data-notex",1).call(T.font,S.labelfont),V={left:0,right:X,center:X/2,top:0,bottom:ae,middle:ae/2},q=Math.sqrt(X*X+ae*ae),re=r.LABELDISTANCE*q/Math.max(1,h.length/r.LABELINCREASE);z.each(function(Z){var Q=n.calcTextOpts(Z.level,J,U,L);x.select(this).selectAll("path").each(function(ie){var oe=this,ne=e.getVisibleSegment(oe,V,Q.height/2);if(!!ne&&(m(oe,ie,Z,ne,F,Q.height),!(ne.len<(Q.width+Q.height)*r.LABELMIN)))for(var se=Math.min(Math.ceil(ne.len/re),r.LABELMAX),_e=0;_e<se;_e++){var ue=n.findBestTextLocation(oe,ne,Q,K,V);if(!ue)break;n.addLabelData(ue,Q,K,fe)}})}),U.remove(),n.drawLabels(Y,K,L,H,O?fe:null)}R&&!D&&z.remove()}function m(w,h,L,E,S,P){for(var F,I=0;I<L.pedgepaths.length;I++)h===L.pedgepaths[I]&&(F=L.edgepaths[I]);if(!F)return;var D=S.a[0],R=S.a[S.a.length-1],O=S.b[0],z=S.b[S.b.length-1];function H(ae,fe){var K=0,J,U=.1;return(Math.abs(ae[0]-D)<U||Math.abs(ae[0]-R)<U)&&(J=y(S.dxydb_rough(ae[0],ae[1],U)),K=Math.max(K,P*u(fe,J)/2)),(Math.abs(ae[1]-O)<U||Math.abs(ae[1]-z)<U)&&(J=y(S.dxyda_rough(ae[0],ae[1],U)),K=Math.max(K,P*u(fe,J)/2)),K}var Y=l(w,0,1),ee=l(w,E.total,E.total-1),j=H(F[0],Y),X=E.total-H(F[F.length-1],ee);E.min<j&&(E.min=j),E.max>X&&(E.max=X),E.len=E.max-E.min}function l(w,h,L){var E=w.getPointAtLength(h),S=w.getPointAtLength(L),P=S.x-E.x,F=S.y-E.y,I=Math.sqrt(P*P+F*F);return[P/I,F/I]}function y(w){var h=Math.sqrt(w[0]*w[0]+w[1]*w[1]);return[w[0]/h,w[1]/h]}function u(w,h){var L=Math.abs(w[0]*h[0]+w[1]*h[1]),E=Math.sqrt(1-L*L);return E/L}function A(w,h,L,E,S,P){var F,I,D,R,O=e.ensureSingle(w,"g","contourbg"),z=O.selectAll("path").data(P==="fill"&&!S?[0]:[]);z.enter().append("path"),z.exit().remove();var H=[];for(R=0;R<h.length;R++)F=h[R],I=f([],F.x,L.c2p),D=f([],F.y,E.c2p),H.push(M(I,D,F.bicubic));z.attr("d","M"+H.join("L")+"Z").style("stroke","none")}function _(w,h,L,E,S,P,F,I,D,R,O){var z=R==="fill";z&&o(S,w.contours);var H=e.ensureSingle(h,"g","contourfill"),Y=H.selectAll("path").data(z?S:[]);Y.enter().append("path"),Y.exit().remove(),Y.each(function(ee){var j=(ee.prefixBoundary?O:"")+p(w,ee,P,F,I,D,L,E);j?x.select(this).attr("d",j).style("stroke","none"):x.select(this).remove()})}function p(w,h,L,E,S,P,F,I){var D,R="",O=h.edgepaths.map(function(ie,oe){return oe}),z=!0,H,Y,ee,j,X,ae,fe=Math.abs(L[0][0]-L[2][0])*1e-4,K=Math.abs(L[0][1]-L[2][1])*1e-4;function J(ie){return Math.abs(ie[1]-L[0][1])<K}function U(ie){return Math.abs(ie[1]-L[2][1])<K}function V(ie){return Math.abs(ie[0]-L[0][0])<fe}function q(ie){return Math.abs(ie[0]-L[2][0])<fe}function re(ie,oe){var ne,se,_e,ue,ge="";for(J(ie)&&!q(ie)||U(ie)&&!V(ie)?(ue=S.aaxis,_e=g(S,P,[ie[0],oe[0]],.5*(ie[1]+oe[1]))):(ue=S.baxis,_e=g(S,P,.5*(ie[0]+oe[0]),[ie[1],oe[1]])),ne=1;ne<_e.length;ne++)for(ge+=ue.smoothing?"C":"L",se=0;se<_e[ne].length;se++){var xe=_e[ne][se];ge+=[F.c2p(xe[0]),I.c2p(xe[1])]+" "}return ge}for(D=0,H=null;O.length;){var Z=h.edgepaths[D][0];for(H&&(R+=re(H,Z)),ae=T.smoothopen(h.edgepaths[D].map(E),h.smoothing),R+=z?ae:ae.replace(/^M/,"L"),O.splice(O.indexOf(D),1),H=h.edgepaths[D][h.edgepaths[D].length-1],j=-1,ee=0;ee<4;ee++){if(!H){e.log("Missing end?",D,h);break}for(J(H)&&!q(H)?Y=L[1]:V(H)?Y=L[0]:U(H)?Y=L[3]:q(H)&&(Y=L[2]),X=0;X<h.edgepaths.length;X++){var Q=h.edgepaths[X][0];Math.abs(H[0]-Y[0])<fe?Math.abs(H[0]-Q[0])<fe&&(Q[1]-H[1])*(Y[1]-Q[1])>=0&&(Y=Q,j=X):Math.abs(H[1]-Y[1])<K?Math.abs(H[1]-Q[1])<K&&(Q[0]-H[0])*(Y[0]-Q[0])>=0&&(Y=Q,j=X):e.log("endpt to newendpt is not vert. or horz.",H,Y,Q)}if(j>=0)break;R+=re(H,Y),H=Y}if(j===h.edgepaths.length){e.log("unclosed perimeter path");break}D=j,z=O.indexOf(D)===-1,z&&(D=O[0],R+=re(H,Y)+"Z",H=null)}for(D=0;D<h.paths.length;D++)R+=T.smoothclosed(h.paths[D].map(E),h.smoothing);return R}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../../plots/template_attributes").hovertemplateAttrs,M=t("../../plots/attributes"),T=t("../scattermapbox/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:f(),showlegend:e({},M.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib").isArrayOrTypedArray,M=t("../../constants/numerical").BADNUM,T=t("../../components/colorscale/calc"),e=t("../../lib")._;B.exports=function(i,n){for(var r=n._length,v=new Array(r),s=n.z,o=f(s)&&s.length,b=0;b<r;b++){var g=v[b]={},d=n.lon[b],c=n.lat[b];if(g.lonlat=x(d)&&x(c)?[+d,+c]:[M,M],o){var m=s[b];g.z=x(m)?m:M}}return T(i,n,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),r&&(v[0].t={labels:{lat:e(i,"lat:")+" ",lon:e(i,"lon:")+" "}}),v}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../components/color"),T=t("../../components/colorscale"),e=t("../../constants/numerical").BADNUM,a=t("../../lib/geojson_utils").makeBlank;B.exports=function(n){var r=n[0].trace,v=r.visible===!0&&r._length!==0,s={layout:{visibility:"none"},paint:{}},o=r._opts={heatmap:s,geojson:a()};if(!v)return o;var b=[],g,d=r.z,c=r.radius,m=f.isArrayOrTypedArray(d)&&d.length,l=f.isArrayOrTypedArray(c);for(g=0;g<n.length;g++){var y=n[g],u=y.lonlat;if(u[0]!==e){var A={};if(m){var _=y.z;A.z=_!==e?_:0}l&&(A.r=x(c[g])&&c[g]>0?+c[g]:0),b.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:A})}}var p=T.extractOpts(r),w=p.reversescale?T.flipScale(p.colorscale):p.colorscale,h=w[0][1],L=M.opacity(h)<1?h:M.addOpacity(h,0),E=["interpolate",["linear"],["heatmap-density"],0,L];for(g=1;g<w.length;g++)E.push(w[g][0],w[g][1]);var S=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return f.extendFlat(o.heatmap.paint,{"heatmap-weight":m?S:1/(p.max-p.min),"heatmap-color":E,"heatmap-radius":l?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),o.geojson={type:"FeatureCollection",features:b},o.heatmap.layout.visibility="visible",o}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/defaults"),M=t("./attributes");B.exports=function(e,a,i,n){function r(b,g){return x.coerce(e,a,M,b,g)}var v=r("lon")||[],s=r("lat")||[],o=Math.min(v.length,s.length);if(!o){a.visible=!1;return}a._length=o,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),f(e,a,n,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(t,B,G){B.exports=function(f,M){return f.lon=M.lon,f.lat=M.lat,f.z=M.z,f}},{}],776:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../scattermapbox/hover").hoverPoints,M=t("../scattermapbox/hover").getExtraText;B.exports=function(e,a,i){var n=f(e,a,i);if(!!n){var r=n[0],v=r.cd,s=v[0].trace,o=v[r.index];if(delete r.color,"z"in o){var b=r.subplot.mockAxis;r.z=o.z,r.zLabel=x.tickText(b,b.c2l(o.z),"hover").text}return r.extraText=M(s,o,v[0].t.labels),[r]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),formatLabels:t("../scattermapbox/format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover"),eventData:t("./event_data"),getBelow:function(x,f){for(var M=f.getMapLayers(),T=0;T<M.length;T++){var e=M[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(t,B,G){var x=t("./convert"),f=t("../../plots/mapbox/constants").traceLayerPrefix;function M(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",f+a+"-heatmap"]],this.below=null}var T=M.prototype;T.update=function(e){var a=this.subplot,i=this.layerList,n=x(e),r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var v=0;v<i.length;v++){var s=i[v],o=s[0],b=s[1],g=n[o];a.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&a.setOptions(b,"setPaintProperty",g.paint)}},T._addLayers=function(e,a){for(var i=this.subplot,n=this.layerList,r=this.sourceId,v=0;v<n.length;v++){var s=n[v],o=s[0],b=e[o];i.addLayer({type:o,id:s[1],source:r,layout:b.layout,paint:b.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)e.removeLayer(a[i][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},B.exports=function(a,i){var n=i[0].trace,r=new M(a,n.uid),v=r.sourceId,s=x(i),o=r.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(v,{type:"geojson",data:s.geojson}),r._addLayers(s,o),r}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;x.mergeArray(T.text,M,"tx"),x.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){x.mergeArray(a.opacity,M,"mo"),x.mergeArray(a.color,M,"mc");var i=a.line;i&&(x.mergeArray(i.color,M,"mlc"),x.mergeArrayCastPositive(i.width,M,"mlw"))}}},{"../../lib":515}],780:[function(t,B,G){var x=t("../bar/attributes"),f=t("../scatter/attributes").line,M=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");B.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:x.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},M.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:x.text,textposition:x.textposition,insidetextanchor:n({},x.insidetextanchor,{dflt:"middle"}),textangle:n({},x.textangle,{dflt:0}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:n({},x.orientation,{}),offset:n({},x.offset,{arrayOk:!1}),width:n({},x.width,{arrayOk:!1}),marker:v(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},f.color,{dflt:r.defaultLine}),width:n({},f.width,{dflt:0,editType:"plot"}),dash:f.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup};function v(){var s=n({},x.marker);return delete s.pattern,s}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../plots/cartesian/align_period"),M=t("./arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;B.exports=function(n,r){var v=x.getFromId(n,r.xaxis||"x"),s=x.getFromId(n,r.yaxis||"y"),o,b,g,d,c,m,l,y;r.orientation==="h"?(o=v.makeCalcdata(r,"x"),g=s.makeCalcdata(r,"y"),d=f(r,s,"y",g),c=!!r.yperiodalignment,m="y"):(o=s.makeCalcdata(r,"y"),g=v.makeCalcdata(r,"x"),d=f(r,v,"x",g),c=!!r.xperiodalignment,m="x"),b=d.vals;var u=Math.min(b.length,o.length),A=new Array(u);for(r._base=[],l=0;l<u;l++){o[l]<0&&(o[l]=e);var _=!1;o[l]!==e&&l+1<u&&o[l+1]!==e&&(_=!0),y=A[l]={p:b[l],s:o[l],cNext:_},r._base[l]=-.5*y.s,c&&(A[l].orig_p=g[l],A[l][m+"End"]=d.ends[l],A[l][m+"Start"]=d.starts[l]),r.ids&&(y.id=String(r.ids[l])),l===0&&(A[0].vTotal=0),A[0].vTotal+=a(y.s),y.begR=a(y.s)/a(A[0].s)}var p;for(l=0;l<u;l++)y=A[l],y.s!==e&&(y.sumR=y.s/A[0].vTotal,y.difR=p!==void 0?y.s/p:1,p=y.s);return M(A,r),T(A,r),A};function a(i){return i===e?0:i}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(t,B,G){B.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(t,B,G){var x=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(M,T){var e=M._fullLayout,a=M._fullData,i=M.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g],c=d.orientation==="h";d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="funnel"&&(b=i[g],c?o.push(b):s.push(b),v.push(b))}var m={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(x(M,n,r,s,m),x(M,r,n,o,m),g=0;g<v.length;g++){b=v[g];for(var l=0;l<b.length;l++)l+1<b.length&&(b[l].nextP0=b[l+1].p0,b[l].nextS0=b[l+1].s0,b[l].nextP1=b[l+1].p1,b[l].nextS1=b[l+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(t,B,G){var x=t("../../lib"),f=t("../bar/defaults").handleGroupingDefaults,M=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color");function n(s,o,b,g){function d(_,p){return x.coerce(s,o,a,_,p)}var c=T(s,o,g,d);if(!c){o.visible=!1;return}e(s,o,g,d),d("xhoverformat"),d("yhoverformat"),d("orientation",o.y&&!o.x?"v":"h"),d("offset"),d("width");var m=d("text");d("hovertext"),d("hovertemplate");var l=d("textposition");M(s,o,g,d,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&d("textinfo",Array.isArray(m)?"text+value":"value");var y=d("marker.color",b);d("marker.line.color",i.defaultLine),d("marker.line.width");var u=d("connector.visible");if(u){d("connector.fillcolor",r(y));var A=d("connector.line.width");A&&(d("connector.line.color"),d("connector.line.dash"))}}function r(s){var o=x.isArrayOrTypedArray(s)?"#000":s;return i.addOpacity(o,.5*i.opacity(o))}function v(s,o){var b,g;function d(m){return x.coerce(g._input,g,a,m)}if(o.funnelmode==="group")for(var c=0;c<s.length;c++)g=s[c],b=g._input,f(b,g,o,d)}B.exports={supplyDefaults:n,crossTraceDefaults:v}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(t,B,G){B.exports=function(f,M){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"percentInitial"in M&&(f.percentInitial=M.percentInitial),"percentPrevious"in M&&(f.percentPrevious=M.percentPrevious),"percentTotal"in M&&(f.percentTotal=M.percentTotal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],786:[function(t,B,G){var x=t("../../components/color").opacity,f=t("../bar/hover").hoverOnBars,M=t("../../lib").formatPercent;B.exports=function(a,i,n,r,v){var s=f(a,i,n,r,v);if(!!s){var o=s.cd,b=o[0].trace,g=b.orientation==="h",d=s.index,c=o[d],m=g?"x":"y";s[m+"LabelVal"]=c.s,s.percentInitial=c.begR,s.percentInitialLabel=M(c.begR,1),s.percentPrevious=c.difR,s.percentPreviousLabel=M(c.difR,1),s.percentTotal=c.sumR,s.percentTotalLabel=M(c.sumR,1);var l=c.hi||b.hoverinfo,y=[];if(l&&l!=="none"&&l!=="skip"){var u=l==="all",A=l.split("+"),_=function(p){return u||A.indexOf(p)!==-1};_("percent initial")&&y.push(s.percentInitialLabel+" of initial"),_("percent previous")&&y.push(s.percentPreviousLabel+" of previous"),_("percent total")&&y.push(s.percentTotalLabel+" of total")}return s.extraText=y.join("<br>"),s.color=T(b,c),[s]}};function T(e,a){var i=e.marker,n=a.mc||i.color,r=a.mlc||i.line.color,v=a.mlw||i.line.width;if(x(n))return n;if(x(r)&&v)return r}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(t,B,G){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(t,B,G){B.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(M,T,e){var a=!1;function i(v,s){return x.coerce(M,T,f,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="funnel"){a=!0;break}}a&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;B.exports=function(s,o,b,g){var d=s._fullLayout;a("funnel",d),i(s,o,b,g),n(s,o,b,g),e.plot(s,o,b,g,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})};function i(v,s,o,b){var g=s.xaxis,d=s.yaxis;f.makeTraceGroups(b,o,"trace bars").each(function(c){var m=x.select(this),l=c[0].trace,y=f.ensureSingle(m,"g","regions");if(!l.connector||!l.connector.visible){y.remove();return}var u=l.orientation==="h",A=y.selectAll("g.region").data(f.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var _=A.size();A.each(function(p,w){if(!(w!==_-1&&!p.cNext)){var h=r(p,g,d,u),L=h[0],E=h[1],S="";L[0]!==T&&E[0]!==T&&L[1]!==T&&E[1]!==T&&L[2]!==T&&E[2]!==T&&L[3]!==T&&E[3]!==T&&(u?S+="M"+L[0]+","+E[1]+"L"+L[2]+","+E[2]+"H"+L[3]+"L"+L[1]+","+E[1]+"Z":S+="M"+L[1]+","+E[1]+"L"+L[2]+","+E[3]+"V"+E[2]+"L"+L[1]+","+E[0]+"Z"),S===""&&(S="M0,0Z"),f.ensureSingle(x.select(this),"path").attr("d",S).call(M.setClipUrl,s.layerClipId,v)}})})}function n(v,s,o,b){var g=s.xaxis,d=s.yaxis;f.makeTraceGroups(b,o,"trace bars").each(function(c){var m=x.select(this),l=c[0].trace,y=f.ensureSingle(m,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){y.remove();return}var u=l.orientation==="h",A=y.selectAll("g.line").data(f.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var _=A.size();A.each(function(p,w){if(!(w!==_-1&&!p.cNext)){var h=r(p,g,d,u),L=h[0],E=h[1],S="";L[3]!==void 0&&E[3]!==void 0&&(u?(S+="M"+L[0]+","+E[1]+"L"+L[2]+","+E[2],S+="M"+L[1]+","+E[1]+"L"+L[3]+","+E[2]):(S+="M"+L[1]+","+E[1]+"L"+L[2]+","+E[3],S+="M"+L[1]+","+E[0]+"L"+L[2]+","+E[2])),S===""&&(S="M0,0Z"),f.ensureSingle(x.select(this),"path").attr("d",S).call(M.setClipUrl,s.layerClipId,v)}})})}function r(v,s,o,b){var g=[],d=[],c=b?s:o,m=b?o:s;return g[0]=c.c2p(v.s0,!0),d[0]=m.c2p(v.p0,!0),g[1]=c.c2p(v.s1,!0),d[1]=m.c2p(v.p1,!0),g[2]=c.c2p(v.nextS0,!0),d[2]=m.c2p(v.nextP0,!0),g[3]=c.c2p(v.nextS1,!0),d[3]=m.c2p(v.nextP1,!0),b?[g,d]:[d,g]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||x.select(r).selectAll("g.funnellayer").selectAll("g.trace");a(r,o,"funnel"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=x.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(c){if(!c.isBlank){var m=d.marker;x.select(this).call(M.fill,c.mc||m.color).call(M.stroke,c.mlc||m.line.color).call(f.dashLine,m.line.dash,c.mlw||m.line.width).style("opacity",d.selectedpoints&&!c.selected?T:1)}}),i(g,d,r),g.selectAll(".regions").each(function(){x.select(this).selectAll("path").style("stroke-width",0).call(M.fill,d.connector.fillcolor)}),g.selectAll(".lines").each(function(){var c=d.connector.line;f.lineGroupStyle(x.select(this).selectAll("path"),c.width,c.color,c.dash)})})}B.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(t,B,G){var x=t("../pie/attributes"),f=t("../../plots/attributes"),M=t("../../plots/domain").attributes,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../lib/extend").extendFlat;B.exports={labels:x.labels,label0:x.label0,dlabel:x.dlabel,values:x.values,marker:{colors:x.marker.colors,line:{color:a({},x.marker.line.color,{dflt:null}),width:a({},x.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:x.text,hovertext:x.hovertext,scalegroup:a({},x.scalegroup,{}),textinfo:a({},x.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},x.textposition,{values:["inside","none"],dflt:"inside"}),textfont:x.textfont,insidetextfont:x.insidetextfont,title:{text:x.title.text,font:x.title.font,position:a({},x.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:M({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(t,B,G){var x=t("../../plots/plots");G.name="funnelarea",G.plot=function(f,M,T,e){x.plotBasePlot(G.name,f,M,T,e)},G.clean=function(f,M,T,e){x.cleanBasePlot(G.name,f,M,T,e)}},{"../../plots/plots":628}],794:[function(t,B,G){var x=t("../pie/calc");function f(T,e){return x.calc(T,e)}function M(T){x.crossTraceCalc(T,{type:"funnelarea"})}B.exports={calc:f,crossTraceCalc:M}},{"../pie/calc":912}],795:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../pie/defaults").handleLabelsAndValues;B.exports=function(i,n,r,v){function s(_,p){return x.coerce(i,n,f,_,p)}var o=s("labels"),b=s("values"),g=e(o,b),d=g.len;if(n._hasLabels=g.hasLabels,n._hasValues=g.hasValues,!n._hasLabels&&n._hasValues&&(s("label0"),s("dlabel")),!d){n.visible=!1;return}n._length=d;var c=s("marker.line.width");c&&s("marker.line.color",v.paper_bgcolor),s("marker.colors"),s("scalegroup");var m=s("text"),l=s("texttemplate"),y;if(l||(y=s("textinfo",Array.isArray(m)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),l||y&&y!=="none"){var u=s("textposition");T(i,n,v,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}M(n,v,s);var A=s("title.text");A&&(s("title.position"),x.coerceFont(s,"title.font",v.font)),s("aspectratio"),s("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(t,B,G){B.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style"),styleOne:t("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(t,B,G){var x=t("../pie/layout_attributes").hiddenlabels;B.exports={hiddenlabels:x,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return x.coerce(T,e,f,i,n)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../../lib"),T=M.strScale,e=M.strTranslate,a=t("../../lib/svg_text_utils"),i=t("../bar/plot"),n=i.toMoveInsideBar,r=t("../bar/uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("../pie/helpers"),b=t("../pie/plot"),g=b.attachFxHandlers,d=b.determineInsideTextFont,c=b.layoutAreas,m=b.prerenderTitles,l=b.positionTitleOutside,y=b.formatSliceLabel;B.exports=function(w,h){var L=w._context.staticPlot,E=w._fullLayout;s("funnelarea",E),m(h,w),c(h,E._size),M.makeTraceGroups(E._funnelarealayer,h,"trace").each(function(S){var P=x.select(this),F=S[0],I=F.trace;_(S),P.each(function(){var D=x.select(this).selectAll("g.slice").data(S);D.enter().append("g").classed("slice",!0),D.exit().remove(),D.each(function(O,z){if(O.hidden){x.select(this).selectAll("path,g").remove();return}O.pointNumber=O.i,O.curveNumber=I.index;var H=F.cx,Y=F.cy,ee=x.select(this),j=ee.selectAll("path.surface").data([O]);j.enter().append("path").classed("surface",!0).style({"pointer-events":L?"none":"all"}),ee.call(g,w,S);var X="M"+(H+O.TR[0])+","+(Y+O.TR[1])+u(O.TR,O.BR)+u(O.BR,O.BL)+u(O.BL,O.TL)+"Z";j.attr("d",X),y(w,O,F);var ae=o.castOption(I.textposition,O.pts),fe=ee.selectAll("g.slicetext").data(O.text&&ae!=="none"?[0]:[]);fe.enter().append("g").classed("slicetext",!0),fe.exit().remove(),fe.each(function(){var K=M.ensureSingle(x.select(this),"text","",function(ie){ie.attr("data-notex",1)}),J=M.ensureUniformFontSize(w,d(I,O,E.font));K.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(f.font,J).call(a.convertToTspans,w);var U=f.bBox(K.node()),V,q,re,Z=Math.min(O.BL[1],O.BR[1])+Y,Q=Math.max(O.TL[1],O.TR[1])+Y;q=Math.max(O.TL[0],O.BL[0])+H,re=Math.min(O.TR[0],O.BR[0])+H,V=n(q,re,Z,Q,U,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),V.fontSize=J.size,v(I.type,V,E),S[z].transform=V,M.setTransormAndDisplay(K,V)})});var R=x.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var O=M.ensureSingle(x.select(this),"text","",function(Y){Y.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=M.templateString(z,I._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(f.font,I.title.font).call(a.convertToTspans,w);var H=l(F,E._size);O.attr("transform",e(H.x,H.y)+T(Math.min(1,H.scale))+e(H.tx,H.ty))})})})};function u(p,w){var h=w[0]-p[0],L=w[1]-p[1];return"l"+h+","+L}function A(p,w){return[.5*(p[0]+w[0]),.5*(p[1]+w[1])]}function _(p){if(!p.length)return;var w=p[0],h=w.trace,L=h.aspectratio,E=h.baseratio;E>.999&&(E=.999);var S=Math.pow(E,2),P=w.vTotal,F=P*S/(1-S),I=P,D=F/P;function R(){var oe=Math.sqrt(D);return{x:oe,y:-oe}}function O(){var oe=R();return[oe.x,oe.y]}var z,H=[];H.push(O());var Y,ee;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){var j=ee.v/I;D+=j,H.push(O())}var X=1/0,ae=-1/0;for(Y=0;Y<H.length;Y++)z=H[Y],X=Math.min(X,z[1]),ae=Math.max(ae,z[1]);for(Y=0;Y<H.length;Y++)H[Y][1]-=(ae+X)/2;var fe=H[H.length-1][0],K=w.r,J=(ae-X)/2,U=K/fe,V=K/J*L;for(w.r=V*J,Y=0;Y<H.length;Y++)H[Y][0]*=U,H[Y][1]*=V;z=H[0];var q=[-z[0],z[1]],re=[z[0],z[1]],Z=0;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){Z+=1;var Q=H[Z][0],ie=H[Z][1];ee.TL=[-Q,ie],ee.TR=[Q,ie],ee.BL=q,ee.BR=re,ee.pxmid=A(ee.TR,ee.BR),q=ee.TL,re=ee.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(t,B,G){var x=t("@plotly/d3"),f=t("../pie/style_one"),M=t("../bar/uniform_text").resizeText;B.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");M(e,a,"funnelarea"),a.each(function(i){var n=i[0],r=n.trace,v=x.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){x.select(this).call(f,s,r)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(t,B,G){var x=t("../scatter/attributes"),f=t("../../plots/attributes"),M=t("../../plots/font_attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat;B.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},x.x,{impliedEdits:{xtype:"array"}}),x0:n({},x.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},x.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},x.y,{impliedEdits:{ytype:"array"}}),y0:n({},x.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},x.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},x.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},x.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},x.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},x.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},x.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},x.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:M({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},f.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../histogram2d/calc"),a=t("../../components/colorscale/calc"),i=t("./convert_column_xyz"),n=t("./clean_2d_array"),r=t("./interp2d"),v=t("./find_empties"),s=t("./make_bound_array"),o=t("../../constants/numerical").BADNUM;B.exports=function(c,m){var l=M.getFromId(c,m.xaxis||"x"),y=M.getFromId(c,m.yaxis||"y"),u=x.traceIs(m,"contour"),A=x.traceIs(m,"histogram"),_=x.traceIs(m,"gl2d"),p=u?"best":m.zsmooth,w,h,L,E,S,P,F,I,D,R,O;if(l._minDtick=0,y._minDtick=0,A)O=e(c,m),E=O.orig_x,w=O.x,h=O.x0,L=O.dx,I=O.orig_y,S=O.y,P=O.y0,F=O.dy,D=O.z;else{var z=m.z;f.isArray1D(z)?(i(m,l,y,"x","y",["z"]),w=m._x,S=m._y,z=m._z):(E=m.x?l.makeCalcdata(m,"x"):[],I=m.y?y.makeCalcdata(m,"y"):[],w=T(m,l,"x",E).vals,S=T(m,y,"y",I).vals,m._x=w,m._y=S),h=m.x0,L=m.dx,P=m.y0,F=m.dy,D=n(z,m,l,y)}(l.rangebreaks||y.rangebreaks)&&(D=g(w,S,D),A||(w=b(w),S=b(S),m._x=w,m._y=S)),!A&&(u||m.connectgaps)&&(m._emptypoints=v(D),r(D,m._emptypoints));function H(re){p=m._input.zsmooth=m.zsmooth=!1,f.warn('cannot use zsmooth: "fast": '+re)}if(p==="fast"){if(l.type==="log"||y.type==="log")H("log axis found");else if(!A){if(w.length){var Y=(w[w.length-1]-w[0])/(w.length-1),ee=Math.abs(Y/100);for(R=0;R<w.length-1;R++)if(Math.abs(w[R+1]-w[R]-Y)>ee){H("x scale is not linear");break}}if(S.length&&p==="fast"){var j=(S[S.length-1]-S[0])/(S.length-1),X=Math.abs(j/100);for(R=0;R<S.length-1;R++)if(Math.abs(S[R+1]-S[R]-j)>X){H("y scale is not linear");break}}}}var ae=f.maxRowLength(D),fe=m.xtype==="scaled"?"":w,K=s(m,fe,h,L,ae,l),J=m.ytype==="scaled"?"":S,U=s(m,J,P,F,D.length,y);_||(m._extremes[l._id]=M.findExtremes(l,K),m._extremes[y._id]=M.findExtremes(y,U));var V={x:K,y:U,z:D,text:m._text||m.text,hovertext:m._hovertext||m.hovertext};if(m.xperiodalignment&&E&&(V.orig_x=E),m.yperiodalignment&&I&&(V.orig_y=I),fe&&fe.length===K.length-1&&(V.xCenter=fe),J&&J.length===U.length-1&&(V.yCenter=J),A&&(V.xRanges=O.xRanges,V.yRanges=O.yRanges,V.pts=O.pts),u||a(c,m,{vals:D,cLetter:"z"}),u&&m.contours&&m.contours.coloring==="heatmap"){var q={type:m.type==="contour"?"heatmap":"histogram2d",xcalendar:m.xcalendar,ycalendar:m.ycalendar};V.xfill=s(q,fe,h,L,ae,l),V.yfill=s(q,J,P,F,D.length,y)}return[V]};function b(d){for(var c=[],m=d.length,l=0;l<m;l++){var y=d[l];y!==o&&c.push(y)}return c}function g(d,c,m){for(var l=[],y=-1,u=0;u<m.length;u++)if(c[u]!==o){y++,l[y]=[];for(var A=0;A<m[u].length;A++)d[A]!==o&&l[y].push(m[u][A])}return l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../constants/numerical").BADNUM;B.exports=function(e,a,i,n){var r,v,s,o,b,g;function d(A){if(!!x(A))return+A}if(a&&a.transpose){for(r=0,b=0;b<e.length;b++)r=Math.max(r,e[b].length);if(r===0)return!1;s=function(A){return A.length},o=function(A,_,p){return(A[p]||[])[_]}}else r=e.length,s=function(A,_){return A[_].length},o=function(A,_,p){return(A[_]||[])[p]};var c=function(A,_,p){return _===M||p===M?M:o(A,_,p)};function m(A){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&A&&A.type==="category"&&a["_"+A._id.charAt(0)].length){var _=A._id.charAt(0),p={},w=a["_"+_+"CategoryMap"]||a[_];for(b=0;b<w.length;b++)p[w[b]]=b;return function(h){var L=p[A._categories[h]];return L+1?L:M}}else return f.identity}var l=m(i),y=m(n);n&&n.type==="category"&&(r=n._categories.length);var u=new Array(r);for(b=0;b<r;b++)for(i&&i.type==="category"?v=i._categories.length:v=s(e,b),u[b]=new Array(v),g=0;g<v;g++)u[b][g]=d(c(e,y(b),l(g)));return u}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(t,B,G){B.exports={min:"zmin",max:"zmax"}},{}],805:[function(t,B,G){var x=t("../../lib"),f=t("../../constants/numerical").BADNUM,M=t("../../plots/cartesian/align_period");B.exports=function(e,a,i,n,r,v){var s=e._length,o=a.makeCalcdata(e,n),b=i.makeCalcdata(e,r);o=M(e,a,n,o).vals,b=M(e,i,r,b).vals;var g=e.text,d=g!==void 0&&x.isArray1D(g),c=e.hovertext,m=c!==void 0&&x.isArray1D(c),l,y,u=x.distinctVals(o),A=u.vals,_=x.distinctVals(b),p=_.vals,w=[],h,L,E=p.length,S=A.length;for(l=0;l<v.length;l++)w[l]=x.init2dArray(E,S);d&&(h=x.init2dArray(E,S)),m&&(L=x.init2dArray(E,S));var P=x.init2dArray(E,S);for(l=0;l<s;l++)if(o[l]!==f&&b[l]!==f){var F=x.findBin(o[l]+u.minDiff/2,A),I=x.findBin(b[l]+_.minDiff/2,p);for(y=0;y<v.length;y++){var D=v[y],R=e[D],O=w[y];O[I][F]=R[l],P[I][F]=l}d&&(h[I][F]=g[l]),m&&(L[I][F]=c[l])}for(e["_"+n]=A,e["_"+r]=p,y=0;y<v.length;y++)e["_"+v[y]]=w[y];d&&(e._text=h),m&&(e._hovertext=L),a&&a.type==="category"&&(e["_"+n+"CategoryMap"]=A.map(function(z){return a._categories[z]})),i&&i.type==="category"&&(e["_"+r+"CategoryMap"]=p.map(function(z){return i._categories[z]})),e._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(t,B,G){var x=t("../../lib"),f=t("./xyz_defaults"),M=t("./label_defaults"),T=t("../scatter/period_defaults"),e=t("./style_defaults"),a=t("../../components/colorscale/defaults"),i=t("./attributes");B.exports=function(r,v,s,o){function b(d,c){return x.coerce(r,v,i,d,c)}var g=f(r,v,b,o);if(!g){v.visible=!1;return}T(r,v,o,b),b("xhoverformat"),b("yhoverformat"),b("text"),b("hovertext"),b("hovertemplate"),M(b,o),e(r,v,b,o),b("hoverongaps"),b("connectgaps",x.isArray1D(v.z)&&v.zsmooth!==!1),a(r,v,o,b,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(t,B,G){var x=t("../../lib").maxRowLength;B.exports=function(M){var T=[],e={},a=[],i=M[0],n=[],r=[0,0,0],v=x(M),s,o,b,g,d,c,m,l;for(o=0;o<M.length;o++)for(s=n,n=i,i=M[o+1]||[],b=0;b<v;b++)n[b]===void 0&&(c=(n[b-1]!==void 0?1:0)+(n[b+1]!==void 0?1:0)+(s[b]!==void 0?1:0)+(i[b]!==void 0?1:0),c?(o===0&&c++,b===0&&c++,o===M.length-1&&c++,b===n.length-1&&c++,c<4&&(e[[o,b]]=[o,b,c]),T.push([o,b,c])):a.push([o,b]));for(;a.length;){for(m={},l=!1,d=a.length-1;d>=0;d--)g=a[d],o=g[0],b=g[1],c=((e[[o-1,b]]||r)[2]+(e[[o+1,b]]||r)[2]+(e[[o,b-1]]||r)[2]+(e[[o,b+1]]||r)[2])/20,c&&(m[g]=[o,b,c],a.splice(d,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(g in m)e[g]=m[g],T.push(m[g])}return T.sort(function(y,u){return u[2]-y[2]})}},{"../../lib":515}],808:[function(t,B,G){var x=t("../../components/fx"),f=t("../../lib"),M=t("../../plots/cartesian/axes"),T=t("../../components/colorscale").extractOpts;B.exports=function(a,i,n,r,v){v||(v={});var s=v.isContour,o=a.cd[0],b=o.trace,g=a.xa,d=a.ya,c=o.x,m=o.y,l=o.z,y=o.xCenter,u=o.yCenter,A=o.zmask,_=b.zhoverformat,p=c,w=m,h,L,E,S;if(a.index!==!1){try{E=Math.round(a.index[1]),S=Math.round(a.index[0])}catch{f.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(E<0||E>=l[0].length||S<0||S>l.length)return}else{if(x.inbox(i-c[0],i-c[c.length-1],0)>0||x.inbox(n-m[0],n-m[m.length-1],0)>0)return;if(s){var P;for(p=[2*c[0]-c[1]],P=1;P<c.length;P++)p.push((c[P]+c[P-1])/2);for(p.push([2*c[c.length-1]-c[c.length-2]]),w=[2*m[0]-m[1]],P=1;P<m.length;P++)w.push((m[P]+m[P-1])/2);w.push([2*m[m.length-1]-m[m.length-2]])}E=Math.max(0,Math.min(p.length-2,f.findBin(i,p))),S=Math.max(0,Math.min(w.length-2,f.findBin(n,w)))}var F=g.c2p(c[E]),I=g.c2p(c[E+1]),D=d.c2p(m[S]),R=d.c2p(m[S+1]),O,z;s?(O=o.orig_x||c,z=o.orig_y||m,I=F,h=O[E],R=D,L=z[S]):(O=o.orig_x||y||c,z=o.orig_y||u||m,h=y?O[E]:(O[E]+O[E+1])/2,L=u?z[S]:(z[S]+z[S+1])/2,g&&g.type==="category"&&(h=c[E]),d&&d.type==="category"&&(L=m[S]),b.zsmooth&&(F=I=g.c2p(h),D=R=d.c2p(L)));var H=l[S][E];if(A&&!A[S][E]&&(H=void 0),!(H===void 0&&!b.hoverongaps)){var Y;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[S])?Y=o.hovertext[S][E]:Array.isArray(o.text)&&Array.isArray(o.text[S])&&(Y=o.text[S][E]);var ee=T(b),j={type:"linear",range:[ee.min,ee.max],hoverformat:_,_separators:g._separators,_numFormat:g._numFormat},X=M.tickText(j,H,"hover").text;return[f.extendFlat(a,{index:b._after2before?b._after2before[S][E]:[S,E],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:F,x1:I,y0:D,y1:R,xLabelVal:h,yLabelVal:L,zLabelVal:H,zLabel:X,text:Y})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(t,B,G){var x=t("../../lib"),f=.01,M=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}B.exports=function(i,n){var r=1,v;for(e(i,n),v=0;v<n.length&&!(n[v][2]<4);v++);for(n=n.slice(v),v=0;v<100&&r>f;v++)r=e(i,n,T(r));return r>f&&x.log("interp2d didn't converge quickly",r),i};function e(a,i,n){var r=0,v,s,o,b,g,d,c,m,l,y,u,A,_;for(b=0;b<i.length;b++){for(v=i[b],s=v[0],o=v[1],u=a[s][o],y=0,l=0,g=0;g<4;g++)d=M[g],c=a[s+d[0]],c&&(m=c[o+d[1]],m!==void 0&&(y===0?A=_=m:(A=Math.min(A,m),_=Math.max(_,m)),l++,y+=m));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[s][o]=y/l,u===void 0?l<4&&(r=1):(a[s][o]=(1+n)*a[s][o]-n*u,_>A&&(r=Math.max(r,Math.abs(a[s][o]-u)/(_-A))))}return r}},{"../../lib":515}],811:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){M("texttemplate");var e=x.extendFlat({},T.font,{color:"auto",size:"auto"});x.coerceFont(M,"textfont",e)}},{"../../lib":515}],812:[function(t,B,G){var x=t("../../registry"),f=t("../../lib").isArrayOrTypedArray;B.exports=function(T,e,a,i,n,r){var v=[],s=x.traceIs(T,"contour"),o=x.traceIs(T,"histogram"),b=x.traceIs(T,"gl2d"),g,d,c,m=f(e)&&e.length>1;if(m&&!o&&r.type!=="category"){var l=e.length;if(l<=n){if(s||b)v=e.slice(0,n);else if(n===1)v=[e[0]-.5,e[0]+.5];else{for(v=[1.5*e[0]-.5*e[1]],c=1;c<l;c++)v.push((e[c-1]+e[c])*.5);v.push(1.5*e[l-1]-.5*e[l-2])}if(l<n){var y=v[v.length-1],u=y-v[v.length-2];for(c=l;c<n;c++)y+=u,v.push(y)}}else return s?e.slice(0,n):e.slice(0,n+1)}else{var A=T[r._id.charAt(0)+"calendar"];if(o)g=r.r2c(a,0,A);else if(f(e)&&e.length===1)g=e[0];else if(a===void 0)g=0;else{var _=r.type==="log"?r.d2c:r.r2c;g=_(a,0,A)}for(d=i||1,c=s||b?0:-.5;c<n;c++)v.push(g+d*c)}return v}},{"../../lib":515,"../../registry":647}],813:[function(t,B,G){var x=t("@plotly/d3"),f=t("tinycolor2"),M=t("../../registry"),T=t("../../components/drawing"),e=t("../../plots/cartesian/axes"),a=t("../../lib"),i=t("../../lib/svg_text_utils"),n=t("../scatter/format_labels"),r=t("../../components/color"),v=t("../../components/colorscale").extractOpts,s=t("../../components/colorscale").makeColorScaleFuncFromTrace,o=t("../../constants/xmlns_namespaces"),b=t("../../constants/alignment"),g=b.LINE_SPACING,d="heatmap-label";function c(A){return A.selectAll("g."+d)}function m(A){c(A).remove()}B.exports=function(A,_,p,w){var h=_.xaxis,L=_.yaxis;a.makeTraceGroups(w,p,"hm").each(function(E){var S=x.select(this),P=E[0],F=P.trace,I=F.xgap||0,D=F.ygap||0,R=P.z,O=P.x,z=P.y,H=P.xCenter,Y=P.yCenter,ee=M.traceIs(F,"contour"),j=ee?"best":F.zsmooth,X=R.length,ae=a.maxRowLength(R),fe=!1,K=!1,J,U,V,q,re,Z,Q,ie;for(Z=0;J===void 0&&Z<O.length-1;)J=h.c2p(O[Z]),Z++;for(Z=O.length-1;U===void 0&&Z>0;)U=h.c2p(O[Z]),Z--;for(U<J&&(V=U,U=J,J=V,fe=!0),Z=0;q===void 0&&Z<z.length-1;)q=L.c2p(z[Z]),Z++;for(Z=z.length-1;re===void 0&&Z>0;)re=L.c2p(z[Z]),Z--;if(re<q&&(V=q,q=re,re=V,K=!0),ee&&(H=O,Y=z,O=P.xfill,z=P.yfill),j!=="fast"){var oe=j==="best"?0:.5;J=Math.max(-oe*h._length,J),U=Math.min((1+oe)*h._length,U),q=Math.max(-oe*L._length,q),re=Math.min((1+oe)*L._length,re)}var ne=Math.round(U-J),se=Math.round(re-q),_e=ne<=0||se<=0;if(_e){var ue=S.selectAll("image").data([]);ue.exit().remove(),m(S);return}var ge,xe;j==="fast"?(ge=ae,xe=X):(ge=ne,xe=se);var ye=document.createElement("canvas");ye.width=ge,ye.height=xe;var be=ye.getContext("2d"),Se=s(F,{noNumericCheck:!0,returnArray:!0}),Re,Ve;j==="fast"?(Re=fe?function(Dr){return ae-1-Dr}:a.identity,Ve=K?function(Dr){return X-1-Dr}:a.identity):(Re=function(Dr){return a.constrain(Math.round(h.c2p(O[Dr])-J),0,ne)},Ve=function(Dr){return a.constrain(Math.round(L.c2p(z[Dr])-q),0,se)});var Ae=Ve(0),Ce=[Ae,Ae],Ze=fe?0:1,Ye=K?0:1,ze=0,Ie=0,Ge=0,dt=0,Rt,Qt,Bt,Ct,Kt;function Ot(Dr,Er){if(Dr!==void 0){var jr=Se(Dr);return jr[0]=Math.round(jr[0]),jr[1]=Math.round(jr[1]),jr[2]=Math.round(jr[2]),ze+=Er,Ie+=jr[0]*Er,Ge+=jr[1]*Er,dt+=jr[2]*Er,jr}return[0,0,0,0]}function St(Dr,Er,jr,kn){var mn=Dr[jr.bin0];if(mn===void 0)return Ot(void 0,1);var Wn=Dr[jr.bin1],In=Er[jr.bin0],$n=Er[jr.bin1],Kn=Wn-mn||0,ma=In-mn||0,Ra;return Wn===void 0?$n===void 0?Ra=0:In===void 0?Ra=2*($n-mn):Ra=(2*$n-In-mn)*2/3:$n===void 0?In===void 0?Ra=0:Ra=(2*mn-Wn-In)*2/3:In===void 0?Ra=(2*$n-Wn-mn)*2/3:Ra=$n+mn-Wn-In,Ot(mn+jr.frac*Kn+kn.frac*(ma+jr.frac*Ra))}if(j){var Xe=0,at;try{at=new Uint8Array(ne*se*4)}catch{at=new Array(ne*se*4)}if(j==="best"){var We=H||O,Ee=Y||z,He=new Array(We.length),Ke=new Array(Ee.length),et=new Array(ne),At=H?y:l,mt=Y?y:l,Mt,Gt,zt;for(Z=0;Z<We.length;Z++)He[Z]=Math.round(h.c2p(We[Z])-J);for(Z=0;Z<Ee.length;Z++)Ke[Z]=Math.round(L.c2p(Ee[Z])-q);for(Z=0;Z<ne;Z++)et[Z]=At(Z,He);for(Q=0;Q<se;Q++)for(Mt=mt(Q,Ke),Gt=R[Mt.bin0],zt=R[Mt.bin1],Z=0;Z<ne;Z++,Xe+=4)Kt=St(Gt,zt,et[Z],Mt),u(at,Xe,Kt)}else for(Q=0;Q<X;Q++)for(Ct=R[Q],Ce=Ve(Q),Z=0;Z<ne;Z++)Kt=Ot(Ct[Z],1),Xe=(Ce*ne+Re(Z))*4,u(at,Xe,Kt);var Ht=be.createImageData(ne,se);try{Ht.data.set(at)}catch{var Xt=Ht.data,Wt=Xt.length;for(Q=0;Q<Wt;Q++)Xt[Q]=at[Q]}be.putImageData(Ht,0,0)}else{var sr=Math.floor(I/2),Gr=Math.floor(D/2);for(Q=0;Q<X;Q++)if(Ct=R[Q],Ce.reverse(),Ce[Ye]=Ve(Q+1),!(Ce[0]===Ce[1]||Ce[0]===void 0||Ce[1]===void 0))for(Qt=Re(0),Rt=[Qt,Qt],Z=0;Z<ae;Z++)Rt.reverse(),Rt[Ze]=Re(Z+1),!(Rt[0]===Rt[1]||Rt[0]===void 0||Rt[1]===void 0)&&(Bt=Ct[Z],Kt=Ot(Bt,(Rt[1]-Rt[0])*(Ce[1]-Ce[0])),be.fillStyle="rgba("+Kt.join(",")+")",be.fillRect(Rt[0]+sr,Ce[0]+Gr,Rt[1]-Rt[0]-I,Ce[1]-Ce[0]-D))}Ie=Math.round(Ie/ze),Ge=Math.round(Ge/ze),dt=Math.round(dt/ze);var cn=f("rgb("+Ie+","+Ge+","+dt+")");A._hmpixcount=(A._hmpixcount||0)+ze,A._hmlumcount=(A._hmlumcount||0)+ze*cn.getLuminance();var en=S.selectAll("image").data(E);en.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),en.attr({height:se,width:ne,x:J,y:q,"xlink:href":ye.toDataURL("image/png")}),m(S);var st=F.texttemplate;if(st){var rr=v(F),er={type:"linear",range:[rr.min,rr.max],_separators:h._separators,_numFormat:h._numFormat},jt=F.type==="histogram2dcontour",Mr=F.type==="contour",it=Mr?1:0,Qe=Mr?X-1:X,ft=Mr?1:0,ct=Mr?ae-1:ae,Et=[];for(Z=it;Z<Qe;Z++){var Nt;if(Mr)Nt=P.y[Z];else if(jt){if(Z===0||Z===X-1)continue;Nt=P.y[Z]}else if(P.yCenter)Nt=P.yCenter[Z];else{if(Z+1===X&&P.y[Z+1]===void 0)continue;Nt=(P.y[Z]+P.y[Z+1])/2}var Pe=Math.round(L.c2p(Nt));if(!(0>Pe||Pe>L._length))for(Q=ft;Q<ct;Q++){var Le;if(Mr)Le=P.x[Q];else if(jt){if(Q===0||Q===ae-1)continue;Le=P.x[Q]}else if(P.xCenter)Le=P.xCenter[Q];else{if(Q+1===ae&&P.x[Q+1]===void 0)continue;Le=(P.x[Q]+P.x[Q+1])/2}var ot=Math.round(h.c2p(Le));if(!(0>ot||ot>h._length)){var ut=n({x:Le,y:Nt},F,A._fullLayout);ut.x=Le,ut.y=Nt;var pt=P.z[Z][Q];pt===void 0?(ut.z="",ut.zLabel=""):(ut.z=pt,ut.zLabel=e.tickText(er,pt,"hover").text);var Pt=P.text&&P.text[Z]&&P.text[Z][Q];(Pt===void 0||Pt===!1)&&(Pt=""),ut.text=Pt;var xt=a.texttemplateString(st,ut,A._fullLayout._d3locale,ut,F._meta||{});if(!!xt){var Lt=xt.split("<br>"),Zt=Lt.length,ur=0;for(ie=0;ie<Zt;ie++)ur=Math.max(ur,Lt[ie].length);Et.push({l:Zt,c:ur,t:xt,x:ot,y:Pe,z:pt})}}}}var Pr=F.textfont,Ar=Pr.family,kr=Pr.size,Zr=A._fullLayout.font.size;if(!kr||kr==="auto"){var lr=1/0,br=1/0,Or=0,Hr=0;for(ie=0;ie<Et.length;ie++){var Lr=Et[ie];if(Or=Math.max(Or,Lr.l),Hr=Math.max(Hr,Lr.c),ie<Et.length-1){var nt=Et[ie+1],It=Math.abs(nt.x-Lr.x),Jt=Math.abs(nt.y-Lr.y);It&&(lr=Math.min(lr,It)),Jt&&(br=Math.min(br,Jt))}}!isFinite(lr)||!isFinite(br)?kr=Zr:(lr-=I,br-=D,lr/=Hr,br/=Or,lr/=g/2,br/=g,kr=Math.min(Math.floor(lr),Math.floor(br),Zr))}if(kr<=0||!isFinite(kr))return;var fr=function(Dr){return Dr.x},Nr=function(Dr){return Dr.y-kr*(Dr.l*g/2-1)},Vr=c(S).data(Et);Vr.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(Dr){var Er=x.select(this),jr=Pr.color;(!jr||jr==="auto")&&(jr=r.contrast("rgba("+Se(Dr.z).join()+")")),Er.attr("data-notex",1).call(i.positionText,fr(Dr),Nr(Dr)).call(T.font,Ar,kr,jr).text(Dr.t).call(i.convertToTspans,A)})}})};function l(A,_){var p=_.length-2,w=a.constrain(a.findBin(A,_),0,p),h=_[w],L=_[w+1],E=a.constrain(w+(A-h)/(L-h)-.5,0,p),S=Math.round(E),P=Math.abs(E-S);return!E||E===p||!P?{bin0:S,bin1:S,frac:0}:{bin0:S,frac:P,bin1:Math.round(S+P/(E-S))}}function y(A,_){var p=_.length-1,w=a.constrain(a.findBin(A,_),0,p),h=_[w],L=_[w+1],E=(A-h)/(L-h)||0;return E<=0?{bin0:w,bin1:w,frac:0}:E<.5?{bin0:w,bin1:w+1,frac:E}:{bin0:w+1,bin1:w,frac:1-E}}function u(A,_,p){A[_]=p[0],A[_+1]=p[1],A[_+2]=p[2],A[_+3]=Math.round(p[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(t,B,G){var x=t("@plotly/d3");B.exports=function(M){x.select(M).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],815:[function(t,B,G){B.exports=function(f,M,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],816:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../registry");B.exports=function(i,n,r,v,s,o){var b=r("z");s=s||"x",o=o||"y";var g,d;if(b===void 0||!b.length)return 0;if(f.isArray1D(i.z)){g=r(s),d=r(o);var c=f.minRowLength(g),m=f.minRowLength(d);if(c===0||m===0)return 0;n._length=Math.min(c,m,b.length)}else{if(g=T(s,r),d=T(o,r),!e(b))return 0;r("transpose"),n._length=null}if(i.type==="heatmapgl")return!0;var l=M.getComponentMethod("calendars","handleTraceDefaults");return l(i,n,[s,o],v),!0};function T(a,i){var n=i(a),r=n?i(a+"type","array"):"scaled";return r==="scaled"&&(i(a+"0"),i("d"+a)),n}function e(a){for(var i=!0,n=!1,r=!1,v,s=0;s<a.length;s++){if(v=a[s],!f.isArrayOrTypedArray(v)){i=!1;break}v.length>0&&(n=!0);for(var o=0;o<v.length;o++)if(x(v[o])){r=!0;break}}return i&&n&&r}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(t,B,G){for(var x=t("../heatmap/attributes"),f=t("../../components/colorscale/attributes"),M=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},i=0;i<e.length;i++){var n=e[i];a[n]=x[n]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},M(a,f("",{cLetter:"z",autoColorDflt:!1})),B.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(t,B,G){var x=t("../../../stackgl_modules").gl_heatmap2d,f=t("../../plots/cartesian/axes"),M=t("../../lib/str2rgbarray");function T(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=x(n.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(n){var r=this.options,v=r.shape,s=n.pointId,o=s%v[0],b=Math.floor(s/v[0]),g=s;return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[o],r.y[b],r.z[g]],textLabel:this.textLabels[s],name:this.name,pointIndex:[b,o],hoverinfo:this.hoverinfo}},e.update=function(n,r){var v=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var s=v.z;this.options.z=[].concat.apply([],s);var o=s[0].length,b=s.length;this.options.shape=[o,b],this.options.x=v.x,this.options.y=v.y,this.options.zsmooth=n.zsmooth;var g=a(n);this.options.colorLevels=g.colorLevels,this.options.colorValues=g.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var d=this.scene.xaxis,c=this.scene.yaxis,m,l;n.zsmooth===!1&&(m={ppad:v.x[1]-v.x[0]},l={ppad:v.y[1]-v.y[0]}),n._extremes[d._id]=f.findExtremes(d,v.x,m),n._extremes[c._id]=f.findExtremes(c,v.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(n){for(var r=n.colorscale,v=n.zmin,s=n.zmax,o=r.length,b=new Array(o),g=new Array(4*o),d=0;d<o;d++){var c=r[d],m=M(c[1]);b[d]=v+c[0]*(s-v);for(var l=0;l<4;l++)g[4*d+l]=m[l]}return{colorLevels:b,colorValues:g}}function i(n,r,v){var s=new T(n,r.uid);return s.update(r,v),s}B.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(t,B,G){var x=t("../../lib"),f=t("../heatmap/xyz_defaults"),M=t("../../components/colorscale/defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(o,b){return x.coerce(a,i,T,o,b)}var s=f(a,i,v,r);if(!s){i.visible=!1;return}v("text"),v("zsmooth"),M(a,i,r,v,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../heatmap/calc"),plot:t("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(t,B,G){var x=t("../bar/attributes"),f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../plots/font_attributes"),a=t("./bin_attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:f("x"),yhoverformat:f("y"),text:n({},x.text,{}),hovertext:n({},x.hovertext,{}),orientation:x.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({},{keys:i.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},x.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:x.insidetextanchor,textangle:x.textangle,cliponaxis:x.cliponaxis,constraintext:x.constraintext,marker:x.marker,offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:x.selected,unselected:x.unselected,_deprecated:{bardir:x._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(t,B,G){B.exports=function(f,M){for(var T=f.length,e=0,a=0;a<T;a++)M[a]?(f[a]/=M[a],e+=f[a]):f[a]=null;return e}},{}],823:[function(t,B,G){B.exports=function(f,M){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(t,B,G){var x=t("fast-isnumeric");B.exports={count:function(f,M,T){return T[f]++,1},sum:function(f,M,T,e){var a=e[M];return x(a)?(a=Number(a),T[f]+=a,a):0},avg:function(f,M,T,e,a){var i=e[M];return x(i)&&(i=Number(i),T[f]+=i,a[f]++),0},min:function(f,M,T,e){var a=e[M];if(x(a))if(a=Number(a),x(T[f])){if(T[f]>a){var i=a-T[f];return T[f]=a,i}}else return T[f]=a,a;return 0},max:function(f,M,T,e){var a=e[M];if(x(a))if(a=Number(a),x(T[f])){if(T[f]<a){var i=a-T[f];return T[f]=a,i}}else return T[f]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(t,B,G){var x=t("../../constants/numerical"),f=x.ONEAVGYEAR,M=x.ONEAVGMONTH,T=x.ONEDAY,e=x.ONEHOUR,a=x.ONEMIN,i=x.ONESEC,n=t("../../plots/cartesian/axes").tickIncrement;B.exports=function(g,d,c,m,l){var y=-1.1*d,u=-.1*d,A=g-u,_=c[0],p=c[1],w=Math.min(r(_+u,_+A,m,l),r(p+u,p+A,m,l)),h=Math.min(r(_+y,_+u,m,l),r(p+y,p+u,m,l)),L,E;if(w>h&&h<Math.abs(p-_)/4e3?(L=w,E=!1):(L=Math.min(w,h),E=!0),m.type==="date"&&L>T){var S=L===f?1:6,P=L===f?"M12":"M1";return function(F,I){var D=m.c2d(F,f,l),R=D.indexOf("-",S);R>0&&(D=D.substr(0,R));var O=m.d2c(D,0,l);if(O<F){var z=n(O,P,!1,l);(O+z)/2<F+g&&(O=z)}return I&&E?n(O,P,!0,l):O}}return function(F,I){var D=L*Math.round(F/L);return D+L/10<F&&D+L*.9<F+g&&(D+=L),I&&E&&(D-=L),D}};function r(b,g,d,c){if(b*g<=0)return 1/0;for(var m=Math.abs(g-b),l=d.type==="date",y=v(m,l),u=0;u<10;u++){var A=v(y*80,l);if(y===A)break;if(s(A,b,g,l,d,c))y=A;else break}return y}function v(b,g){return g&&b>i?b>T?b>f*1.1?f:b>M*1.1?M:T:b>e?e:b>a?a:i:Math.pow(10,Math.floor(Math.log(b)/Math.LN10))}function s(b,g,d,c,m,l){if(c&&b>T){var y=o(g,m,l),u=o(d,m,l),A=b===f?0:1;return y[A]!==u[A]}return Math.floor(d/b)-Math.floor(g/b)>.1}function o(b,g,d){var c=g.c2d(b,f,d).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../registry"),T=t("../../plots/cartesian/axes"),e=t("../bar/arrays_to_calcdata"),a=t("./bin_functions"),i=t("./norm_functions"),n=t("./average"),r=t("./bin_label_vals");function v(d,c){var m=[],l=[],y=c.orientation==="h",u=T.getFromId(d,y?c.yaxis:c.xaxis),A=y?"y":"x",_={x:"y",y:"x"}[A],p=c[A+"calendar"],w=c.cumulative,h,L=s(d,c,u,A),E=L[0],S=L[1],P=typeof E.size=="string",F=[],I=P?F:E,D=[],R=[],O=[],z=0,H=c.histnorm,Y=c.histfunc,ee=H.indexOf("density")!==-1,j,X,ae;w.enabled&&ee&&(H=H.replace(/ ?density$/,""),ee=!1);var fe=Y==="max"||Y==="min",K=fe?null:0,J=a.count,U=i[H],V=!1,q=function(Ve){return u.r2c(Ve,0,p)},re;for(f.isArrayOrTypedArray(c[_])&&Y!=="count"&&(re=c[_],V=Y==="avg",J=a[Y]),h=q(E.start),X=q(E.end)+(h-T.tickIncrement(h,E.size,!1,p))/1e6;h<X&&m.length<1e6&&(j=T.tickIncrement(h,E.size,!1,p),m.push((h+j)/2),l.push(K),O.push([]),F.push(h),ee&&D.push(1/(j-h)),V&&R.push(0),!(j<=h));)h=j;F.push(h),!P&&u.type==="date"&&(I={start:q(I.start),end:q(I.end),size:I.size}),d._fullLayout._roundFnOpts||(d._fullLayout._roundFnOpts={});var Z=c["_"+A+"bingroup"],Q={leftGap:1/0,rightGap:1/0};Z&&(d._fullLayout._roundFnOpts[Z]||(d._fullLayout._roundFnOpts[Z]=Q),Q=d._fullLayout._roundFnOpts[Z]);var ie=l.length,oe=!0,ne=Q.leftGap,se=Q.rightGap,_e={};for(h=0;h<S.length;h++){var ue=S[h];ae=f.findBin(ue,I),ae>=0&&ae<ie&&(z+=J(ae,h,l,re,R),oe&&O[ae].length&&ue!==S[O[ae][0]]&&(oe=!1),O[ae].push(h),_e[h]=ae,ne=Math.min(ne,ue-F[ae]),se=Math.min(se,F[ae+1]-ue))}Q.leftGap=ne,Q.rightGap=se;var ge;oe||(ge=function(Ve,Ae){return function(){var Ce=d._fullLayout._roundFnOpts[Z];return r(Ce.leftGap,Ce.rightGap,F,u,p)(Ve,Ae)}}),V&&(z=n(l,R)),U&&U(l,z,D),w.enabled&&g(l,w.direction,w.currentbin);var xe=Math.min(m.length,l.length),ye=[],be=0,Se=xe-1;for(h=0;h<xe;h++)if(l[h]){be=h;break}for(h=xe-1;h>=be;h--)if(l[h]){Se=h;break}for(h=be;h<=Se;h++)if(x(m[h])&&x(l[h])){var Re={p:m[h],s:l[h],b:0};w.enabled||(Re.pts=O[h],oe?Re.ph0=Re.ph1=O[h].length?S[O[h][0]]:m[h]:(c._computePh=!0,Re.ph0=ge(F[h]),Re.ph1=ge(F[h+1],!0))),ye.push(Re)}return ye.length===1&&(ye[0].width1=T.tickIncrement(ye[0].p,E.size,!1,p)-ye[0].p),e(ye,c),f.isArrayOrTypedArray(c.selectedpoints)&&f.tagSelected(ye,c,_e),ye}function s(d,c,m,l,y){var u=l+"bins",A=d._fullLayout,_=c["_"+l+"bingroup"],p=A._histogramBinOpts[_],w=A.barmode==="overlay",h,L,E,S,P,F,I,D=function(ue){return m.r2c(ue,0,S)},R=function(ue){return m.c2r(ue,0,S)},O=m.type==="date"?function(ue){return ue||ue===0?f.cleanDate(ue,null,S):null}:function(ue){return x(ue)?Number(ue):null};function z(ue,ge,xe){ge[ue+"Found"]?(ge[ue]=O(ge[ue]),ge[ue]===null&&(ge[ue]=xe[ue])):(F[ue]=ge[ue]=xe[ue],f.nestedProperty(L[0],u+"."+ue).set(xe[ue]))}if(c["_"+l+"autoBinFinished"])delete c["_"+l+"autoBinFinished"];else{L=p.traces;var H=[],Y=!0,ee=!1,j=!1;for(h=0;h<L.length;h++)if(E=L[h],E.visible){var X=p.dirs[h];P=E["_"+X+"pos0"]=m.makeCalcdata(E,X),H=f.concat(H,P),delete E["_"+l+"autoBinFinished"],c.visible===!0&&(Y?Y=!1:(delete E._autoBin,E["_"+l+"autoBinFinished"]=1),M.traceIs(E,"2dMap")&&(ee=!0),E.type==="histogram2dcontour"&&(j=!0))}S=L[0][l+"calendar"];var ae=T.autoBin(H,m,p.nbins,ee,S,p.sizeFound&&p.size),fe=L[0]._autoBin={};if(F=fe[p.dirs[0]]={},j&&(p.size||(ae.start=R(T.tickIncrement(D(ae.start),ae.size,!0,S))),p.end===void 0&&(ae.end=R(T.tickIncrement(D(ae.end),ae.size,!1,S)))),w&&!M.traceIs(c,"2dMap")&&ae._dataSpan===0&&m.type!=="category"&&m.type!=="multicategory"){if(y)return[ae,P,!0];ae=o(d,c,m,l,u)}I=E.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?ae.start=R(T.tickIncrement(D(ae.start),ae.size,!0,S)):ae.end=R(T.tickIncrement(D(ae.end),ae.size,!1,S))),p.size=ae.size,p.sizeFound||(F.size=ae.size,f.nestedProperty(L[0],u+".size").set(ae.size)),z("start",p,ae),z("end",p,ae)}P=c["_"+l+"pos0"],delete c["_"+l+"pos0"];var K=c._input[u]||{},J=f.extendFlat({},p),U=p.start,V=m.r2l(K.start),q=V!==void 0;if((p.startFound||q)&&V!==m.r2l(U)){var re=q?V:f.aggNums(Math.min,null,P),Z={type:m.type==="category"||m.type==="multicategory"?"linear":m.type,r2l:m.r2l,dtick:p.size,tick0:U,calendar:S,range:[re,T.tickIncrement(re,p.size,!1,S)].map(m.l2r)},Q=T.tickFirst(Z);Q>m.r2l(re)&&(Q=T.tickIncrement(Q,p.size,!0,S)),J.start=m.l2r(Q),q||f.nestedProperty(c,u+".start").set(J.start)}var ie=p.end,oe=m.r2l(K.end),ne=oe!==void 0;if((p.endFound||ne)&&oe!==m.r2l(ie)){var se=ne?oe:f.aggNums(Math.max,null,P);J.end=m.l2r(se),ne||f.nestedProperty(c,u+".start").set(J.end)}var _e="autobin"+l;return c._input[_e]===!1&&(c._input[u]=f.extendFlat({},c[u]||{}),delete c._input[_e],delete c[_e]),[J,P]}function o(d,c,m,l,y){var u=d._fullLayout,A=b(d,c),_=!1,p=1/0,w=[c],h,L,E;for(h=0;h<A.length;h++)if(L=A[h],L===c)_=!0;else if(!_)E=u._histogramBinOpts[L["_"+l+"bingroup"]],p=Math.min(p,E.size||L[y].size);else{var S=s(d,L,m,l,!0),P=S[0],F=S[2];L["_"+l+"autoBinFinished"]=1,L["_"+l+"pos0"]=S[1],F?w.push(L):p=Math.min(p,P.size)}var I=new Array(w.length);for(h=0;h<w.length;h++)for(var D=w[h]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[h]=D[R];break}for(isFinite(p)||(p=f.distinctVals(I).minDiff),h=0;h<w.length;h++){L=w[h];var O=L[l+"calendar"],z={start:m.c2r(I[h]-p/2,0,O),end:m.c2r(I[h]+p/2,0,O),size:p};L._input[y]=L[y]=z,E=u._histogramBinOpts[L["_"+l+"bingroup"]],E&&f.extendFlat(E,z)}return c[y]}function b(d,c){for(var m=c.xaxis,l=c.yaxis,y=c.orientation,u=[],A=d._fullData,_=0;_<A.length;_++){var p=A[_];p.type==="histogram"&&p.visible===!0&&p.orientation===y&&p.xaxis===m&&p.yaxis===l&&u.push(p)}return u}function g(d,c,m){var l,y,u;function A(p){u=d[p],d[p]/=2}function _(p){y=d[p],d[p]=u+y/2,u+=y}if(m==="half")if(c==="increasing")for(A(0),l=1;l<d.length;l++)_(l);else for(A(d.length-1),l=d.length-2;l>=0;l--)_(l);else if(c==="increasing"){for(l=1;l<d.length;l++)d[l]+=d[l-1];m==="exclude"&&(d.unshift(0),d.pop())}else{for(l=d.length-2;l>=0;l--)d[l]+=d[l+1];m==="exclude"&&(d.push(0),d.shift())}}B.exports={calc:v,calcAllAutoBins:s}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(t,B,G){B.exports={eventDataKeys:["binNumber"]}},{}],828:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axis_ids"),M=t("../../registry").traceIs,T=t("../bar/defaults").handleGroupingDefaults,e=x.nestedProperty,a=t("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];B.exports=function(v,s){var o=s._histogramBinOpts={},b=[],g={},d=[],c,m,l,y,u,A,_;function p(j,X){return x.coerce(c._input,c,c._module.attributes,j,X)}function w(j){return j.orientation==="v"?"x":"y"}function h(j,X){var ae=f.getFromTrace({_fullLayout:s},j,X);return ae.type}function L(j,X,ae){var fe=j.uid+"__"+ae;X||(X=fe);var K=h(j,ae),J=j[ae+"calendar"]||"",U=o[X],V=!0;U&&(K===U.axType&&J===U.calendar?(V=!1,U.traces.push(j),U.dirs.push(ae)):(X=fe,K!==U.axType&&x.warn(["Attempted to group the bins of trace",j.index,"set on a","type:"+K,"axis","with bins on","type:"+U.axType,"axis."].join(" ")),J!==U.calendar&&x.warn(["Attempted to group the bins of trace",j.index,"set with a",J,"calendar","with bins",U.calendar?"on a "+U.calendar+" calendar":"w/o a set calendar"].join(" ")))),V&&(o[X]={traces:[j],dirs:[ae],axType:K,calendar:j[ae+"calendar"]||""}),j["_"+ae+"bingroup"]=X}for(u=0;u<v.length;u++)c=v[u],M(c,"histogram")&&(b.push(c),delete c._xautoBinFinished,delete c._yautoBinFinished,M(c,"2dMap")||T(c._input,c,s,p));var E=s._alignmentOpts||{};for(u=0;u<b.length;u++){if(c=b[u],l="",!M(c,"2dMap")){if(y=w(c),s.barmode==="group"&&c.alignmentgroup){var S=c[y+"axis"],P=a(s,S)+c.orientation;(E[P]||{})[c.alignmentgroup]&&(l=P)}!l&&s.barmode!=="overlay"&&(l=a(s,c.xaxis)+a(s,c.yaxis)+w(c))}l?(g[l]||(g[l]=[]),g[l].push(c)):d.push(c)}for(l in g){if(m=g[l],m.length===1){d.push(m[0]);continue}var F=!1;for(m.length&&(c=m[0],F=p("bingroup")),l=F||l,u=0;u<m.length;u++){c=m[u];var I=c._input.bingroup;I&&I!==l&&x.warn(["Trace",c.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),c.bingroup=l,L(c,l,w(c))}}for(u=0;u<d.length;u++){c=d[u];var D=p("bingroup");if(M(c,"2dMap"))for(_=0;_<2;_++){y=n[_];var R=p(y+"bingroup",D?D+"__"+y:null);L(c,R,y)}else L(c,D,w(c))}for(l in o){var O=o[l];for(m=O.traces,A=0;A<i.length;A++){var z=i[A],H=z.name,Y,ee;if(!(H==="nbins"&&O.sizeFound)){for(u=0;u<m.length;u++){if(c=m[u],y=O.dirs[u],Y=z.aStr[y],e(c._input,Y).get()!==void 0){O[H]=p(Y),O[H+"Found"]=!0;break}ee=(c._autoBin||{})[y]||{},ee[H]&&e(c,Y).set(ee[H])}if(H==="start"||H==="end")for(;u<m.length;u++)c=m[u],c["_"+y+"bingroup"]&&(ee=(c._autoBin||{})[y]||{},p(Y,ee[H]));H==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(c=m[0],O[H]=p(Y))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../../components/color"),T=t("../bar/defaults").handleText,e=t("../bar/style_defaults"),a=t("./attributes");B.exports=function(n,r,v,s){function o(h,L){return f.coerce(n,r,a,h,L)}var b=o("x"),g=o("y"),d=o("cumulative.enabled");d&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var c=o("textposition");T(n,r,s,o,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var m=o("orientation",g&&!b?"h":"v"),l=m==="v"?"x":"y",y=m==="v"?"y":"x",u=b&&g?Math.min(f.minRowLength(b)&&f.minRowLength(g)):f.minRowLength(r[l]||[]);if(!u){r.visible=!1;return}r._length=u;var A=x.getComponentMethod("calendars","handleTraceDefaults");A(n,r,["x","y"],s);var _=r[y];_&&o("histfunc"),o("histnorm"),o("autobin"+l),e(n,r,o,v,s),f.coerceSelectionMarkerOpacity(r,o);var p=(r.marker.line||{}).color,w=x.getComponentMethod("errorbars","supplyDefaults");w(n,r,p||M.defaultLine,{axis:"y"}),w(n,r,p||M.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(t,B,G){B.exports=function(f,M,T,e,a){if(f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"zLabelVal"in M&&(f.z=M.zLabelVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),!(T.cumulative||{}).enabled){var i=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;f.pointNumbers=i,f.binNumber=f.pointNumber,delete f.pointNumber,delete f.pointIndex;var n;if(T._indexToPoints){n=[];for(var r=0;r<i.length;r++)n=n.concat(T._indexToPoints[i[r]])}else n=i;f.pointIndices=n}return f}},{}],831:[function(t,B,G){var x=t("../bar/hover").hoverPoints,f=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(T,e,a,i,n){var r=x(T,e,a,i,n);if(!!r){T=r[0];var v=T.cd[T.index],s=T.cd[0].trace;if(!s.cumulative.enabled){var o=s.orientation==="h"?"y":"x";T[o+"Label"]=f(T[o+"a"],[v.ph0,v.ph1],s[o+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(t,B,G){B.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(t,B,G){B.exports={percent:function(x,f){for(var M=x.length,T=100/f,e=0;e<M;e++)x[e]*=T},probability:function(x,f){for(var M=x.length,T=0;T<M;T++)x[T]/=f},density:function(x,f,M,T){var e=x.length;T=T||1;for(var a=0;a<e;a++)x[a]*=M[a]*T},"probability density":function(x,f,M,T){var e=x.length;T&&(f/=T);for(var a=0;a<e;a++)x[a]*=M[a]/f}}},{}],834:[function(t,B,G){var x=t("../histogram/attributes"),f=t("../histogram/bin_attributes"),M=t("../heatmap/attributes"),T=t("../../plots/attributes"),e=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../plots/template_attributes").texttemplateAttrs,n=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat;B.exports=r({x:x.x,y:x.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:x.histnorm,histfunc:x.histfunc,nbinsx:x.nbinsx,xbins:f("x"),nbinsy:x.nbinsy,ybins:f("y"),autobinx:x.autobinx,autobiny:x.autobiny,bingroup:r({},x.bingroup,{}),xbingroup:r({},x.bingroup,{}),ybingroup:r({},x.bingroup,{}),xgap:M.xgap,ygap:M.ygap,zsmooth:M.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:M.textfont,showlegend:r({},T.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../histogram/bin_functions"),T=t("../histogram/norm_functions"),e=t("../histogram/average"),a=t("../histogram/bin_label_vals"),i=t("../histogram/calc").calcAllAutoBins;B.exports=function(o,b){var g=f.getFromId(o,b.xaxis),d=f.getFromId(o,b.yaxis),c=b.xcalendar,m=b.ycalendar,l=function(Xe){return g.r2c(Xe,0,c)},y=function(Xe){return d.r2c(Xe,0,m)},u=function(Xe){return g.c2r(Xe,0,c)},A=function(Xe){return d.c2r(Xe,0,m)},_,p,w,h,L=i(o,b,g,"x"),E=L[0],S=L[1],P=i(o,b,d,"y"),F=P[0],I=P[1],D=b._length;S.length>D&&S.splice(D,S.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],O=[],z=[],H=typeof E.size=="string",Y=typeof F.size=="string",ee=[],j=[],X=H?ee:E,ae=Y?j:F,fe=0,K=[],J=[],U=b.histnorm,V=b.histfunc,q=U.indexOf("density")!==-1,re=V==="max"||V==="min",Z=re?null:0,Q=M.count,ie=T[U],oe=!1,ne=[],se=[],_e="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";_e&&V!=="count"&&(oe=V==="avg",Q=M[V]);var ue=E.size,ge=l(E.start),xe=l(E.end)+(ge-f.tickIncrement(ge,ue,!1,c))/1e6;for(_=ge;_<xe;_=f.tickIncrement(_,ue,!1,c))O.push(Z),ee.push(_),oe&&z.push(0);ee.push(_);var ye=O.length,be=(_-ge)/ye,Se=u(ge+be/2),Re=F.size,Ve=y(F.start),Ae=y(F.end)+(Ve-f.tickIncrement(Ve,Re,!1,m))/1e6;for(_=Ve;_<Ae;_=f.tickIncrement(_,Re,!1,m)){R.push(O.slice()),j.push(_);var Ce=new Array(ye);for(p=0;p<ye;p++)Ce[p]=[];J.push(Ce),oe&&K.push(z.slice())}j.push(_);var Ze=R.length,Ye=(_-Ve)/Ze,ze=A(Ve+Ye/2);q&&(ne=n(O.length,X,be,H),se=n(R.length,ae,Ye,Y)),!H&&g.type==="date"&&(X=r(l,X)),!Y&&d.type==="date"&&(ae=r(y,ae));var Ie=!0,Ge=!0,dt=new Array(ye),Rt=new Array(Ze),Qt=1/0,Bt=1/0,Ct=1/0,Kt=1/0;for(_=0;_<D;_++){var Ot=S[_],St=I[_];w=x.findBin(Ot,X),h=x.findBin(St,ae),w>=0&&w<ye&&h>=0&&h<Ze&&(fe+=Q(w,_,R[h],_e,K[h]),J[h][w].push(_),Ie&&(dt[w]===void 0?dt[w]=Ot:dt[w]!==Ot&&(Ie=!1)),Ge&&(Rt[h]===void 0?Rt[h]=St:Rt[h]!==St&&(Ge=!1)),Qt=Math.min(Qt,Ot-ee[w]),Bt=Math.min(Bt,ee[w+1]-Ot),Ct=Math.min(Ct,St-j[h]),Kt=Math.min(Kt,j[h+1]-St))}if(oe)for(h=0;h<Ze;h++)fe+=e(R[h],K[h]);if(ie)for(h=0;h<Ze;h++)ie(R[h],fe,ne,se[h]);return{x:S,xRanges:v(ee,Ie&&dt,Qt,Bt,g,c),x0:Se,dx:be,y:I,yRanges:v(j,Ge&&Rt,Ct,Kt,d,m),y0:ze,dy:Ye,z:R,pts:J}};function n(s,o,b,g){var d=new Array(s),c;if(g)for(c=0;c<s;c++)d[c]=1/(o[c+1]-o[c]);else{var m=1/b;for(c=0;c<s;c++)d[c]=m}return d}function r(s,o){return{start:s(o.start),end:s(o.end),size:o.size}}function v(s,o,b,g,d,c){var m,l=s.length-1,y=new Array(l),u=a(b,g,s,d,c);for(m=0;m<l;m++){var A=(o||[])[m];y[m]=A===void 0?[u(s[m]),u(s[m+1],!0)]:[A,A]}return y}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(t,B,G){var x=t("../../lib"),f=t("./sample_defaults"),M=t("../heatmap/style_defaults"),T=t("../../components/colorscale/defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");B.exports=function(n,r,v,s){function o(b,g){return x.coerce(n,r,a,b,g)}f(n,r,o,s),r.visible!==!1&&(M(n,r,o,s),T(n,r,s,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),e(o,s),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(t,B,G){var x=t("../heatmap/hover"),f=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(T,e,a,i,n){var r=x(T,e,a,i,n);if(!!r){T=r[0];var v=T.index,s=v[0],o=v[1],b=T.cd[0],g=b.trace,d=b.xRanges[o],c=b.yRanges[s];return T.xLabel=f(T.xa,[d[0],d[1]],g.xhoverformat),T.yLabel=f(T.ya,[c[0],c[1]],g.yhoverformat),r}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../heatmap/calc"),plot:t("../heatmap/plot"),layerName:"heatmaplayer",colorbar:t("../heatmap/colorbar"),style:t("../heatmap/style"),hoverPoints:t("./hover"),eventData:t("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(t,B,G){var x=t("../../registry"),f=t("../../lib");B.exports=function(T,e,a,i){var n=a("x"),r=a("y"),v=f.minRowLength(n),s=f.minRowLength(r);if(!v||!s){e.visible=!1;return}e._length=Math.min(v,s);var o=x.getComponentMethod("calendars","handleTraceDefaults");o(T,e,["x","y"],i);var b=a("z")||a("marker.color");b&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(t,B,G){var x=t("../histogram2d/attributes"),f=t("../contour/attributes"),M=t("../../components/colorscale/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../lib/extend").extendFlat;B.exports=e({x:x.x,y:x.y,z:x.z,marker:x.marker,histnorm:x.histnorm,histfunc:x.histfunc,nbinsx:x.nbinsx,xbins:x.xbins,nbinsy:x.nbinsy,ybins:x.ybins,autobinx:x.autobinx,autobiny:x.autobiny,bingroup:x.bingroup,xbingroup:x.xbingroup,ybingroup:x.ybingroup,autocontour:f.autocontour,ncontours:f.ncontours,contours:f.contours,line:{color:f.line.color,width:e({},f.line.width,{dflt:.5}),dash:f.line.dash,smoothing:f.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:x.hovertemplate,texttemplate:f.texttemplate,textfont:f.textfont},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(t,B,G){var x=t("../../lib"),f=t("../histogram2d/sample_defaults"),M=t("../contour/contours_defaults"),T=t("../contour/style_defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");B.exports=function(n,r,v,s){function o(g,d){return x.coerce(n,r,a,g,d)}function b(g){return x.coerce2(n,r,a,g)}f(n,r,o,s),r.visible!==!1&&(M(n,r,o,b),T(n,r,o,s),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&e(o,s))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../contour/calc"),plot:t("../contour/plot").plot,layerName:"contourlayer",style:t("../contour/style"),colorbar:t("../contour/colorbar"),hoverPoints:t("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("../treemap/attributes"),n=t("../treemap/constants"),r=t("../../lib/extend").extendFlat;B.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:a.marker.colors,line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:i.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:f({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:x({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(t,B,G){var x=t("../../plots/plots");G.name="icicle",G.plot=function(f,M,T,e){x.plotBasePlot(G.name,f,M,T,e)},G.clean=function(f,M,T,e){x.cleanBasePlot(G.name,f,M,T,e)}},{"../../plots/plots":628}],845:[function(t,B,G){var x=t("../sunburst/calc");G.calc=function(f,M){return x.calc(f,M)},G.crossTraceCalc=function(f){return x._runCrossTraceCalc("icicle",f)}},{"../sunburst/calc":1060}],846:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;B.exports=function(s,o,b,g){function d(w,h){return x.coerce(s,o,f,w,h)}var c=d("labels"),m=d("parents");if(!c||!c.length||!m||!m.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var y=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(y)?"text+label":"label"),d("hovertext"),d("hovertemplate");var u=d("pathbar.visible"),A="auto";e(s,o,g,d,A,{hasPathbar:u,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var _=d("marker.line.width");_&&d("marker.line.color",g.paper_bgcolor),d("marker.colors");var p=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;p&&r(s,o,g,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",p?1:.7),o._hovered={marker:{line:{width:2,color:M.contrast(g.paper_bgcolor)}}},u&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("../treemap/constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(b,g,d,c,m){var l=m.width,y=m.height,u=m.viewX,A=m.viewY,_=m.pathSlice,p=m.toMoveInsideSlice,w=m.strTransform,h=m.hasTransition,L=m.handleSlicesExit,E=m.makeUpdateSliceInterpolator,S=m.makeUpdateTextInterpolator,P=m.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,H=O.textposition.indexOf("right")!==-1,Y=O.textposition.indexOf("bottom")!==-1,ee=e(d,[l,y],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}),j=ee.descendants(),X=1/0,ae=-1/0;j.forEach(function(V){var q=V.depth;q>=O._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(X=Math.min(X,q),ae=Math.max(ae,q))}),c=c.data(j,n.getPtId),O._maxVisibleLayers=isFinite(ae)?ae-X+1:0,c.enter().append("g").classed("slice",!0),L(c,s,F,[l,y],_),c.order();var fe=null;if(h&&P){var K=n.getPtId(P);c.each(function(V){fe===null&&n.getPtId(V)===K&&(fe={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var J=function(){return fe||{x0:0,x1:l,y0:0,y1:y}},U=c;return h&&(U=U.transition().each("end",function(){var V=x.select(this);n.setSliceCursor(V,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(V){V._x0=u(V.x0),V._x1=u(V.x1),V._y0=A(V.y0),V._y1=A(V.y1),V._hoverX=u(V.x1-O.tiling.pad),V._hoverY=A(Y?V.y1-O.tiling.pad/2:V.y0+O.tiling.pad/2);var q=x.select(this),re=f.ensureSingle(q,"path","surface",function(oe){oe.style("pointer-events",I?"none":"all")});h?re.transition().attrTween("d",function(oe){var ne=E(oe,s,J(),[l,y],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(se){return _(ne(se))}}):re.attr("d",_),q.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),re.call(a,V,O,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":V._text=v(V,d,O,g,D)||"";var Z=f.ensureSingle(q,"g","slicetext"),Q=f.ensureSingle(Z,"text","",function(oe){oe.attr("data-notex",1)}),ie=f.ensureUniformFontSize(b,n.determineTextFont(O,V,D.font));Q.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",H?"end":z?"start":"middle").call(M.font,ie).call(T.convertToTspans,b),V.textBB=M.bBox(Q.node()),V.transform=p(V,{fontSize:ie.size}),V.transform.fontSize=ie.size,h?Q.transition().attrTween("transform",function(oe){var ne=S(oe,s,J(),[l,y]);return function(se){return w(ne(se))}}):Q.attr("transform",w(V))}),fe}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(t,B,G){B.exports={moduleType:"trace",name:"icicle",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(t,B,G){B.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return x.coerce(T,e,f,i,n)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(t,B,G){var x=t("d3-hierarchy"),f=t("../treemap/flip_tree");B.exports=function(T,e,a){var i=a.flipX,n=a.flipY,r=a.orientation==="h",v=a.maxDepth,s=e[0],o=e[1];v&&(s=(T.height+1)*e[0]/Math.min(T.height+1,v),o=(T.height+1)*e[1]/Math.min(T.height+1,v));var b=x.partition().padding(a.pad.inner).size(r?[e[1],s]:[e[0],o])(T);return(r||i||n)&&f(b,e,{swapXY:r,flipX:i,flipY:n}),b}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(t,B,G){var x=t("../treemap/draw"),f=t("./draw_descendants");B.exports=function(T,e,a,i){return x(T,e,a,i,{type:"icicle",drawDescendants:f})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._iciclelayer.selectAll(".trace");T(i,n,"icicle"),n.each(function(r){var v=x.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){x.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=M.castOption(r,o,"marker.line.color")||f.defaultLine,g=M.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(f.fill,v.color).call(f.stroke,b).style("opacity",s?r.leaf.opacity:null)}B.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(t,B,G){for(var x=t("../../plots/attributes"),f=t("../../plots/template_attributes").hovertemplateAttrs,M=t("../../lib/extend").extendFlat,T=t("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],i=[],n=0;n<e.length;n++){var r=T[e[n]];a.push("For the `"+e[n]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+e[n]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}B.exports=M({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:M({},x.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:f({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(t,B,G){var x=t("../../lib"),f=t("./constants"),M=t("fast-isnumeric"),T=t("../../plots/cartesian/axes"),e=t("../../lib").maxRowLength,a=t("./helpers").getImageSize;B.exports=function(s,o){var b,g;if(o._hasZ)b=o.z.length,g=e(o.z);else if(o._hasSource){var d=a(o.source);b=d.height,g=d.width}var c=T.getFromId(s,o.xaxis||"x"),m=T.getFromId(s,o.yaxis||"y"),l=c.d2c(o.x0)-o.dx/2,y=m.d2c(o.y0)-o.dy/2,u,A=[l,l+g*o.dx],_=[y,y+b*o.dy];if(c&&c.type==="log")for(u=0;u<g;u++)A.push(l+u*o.dx);if(m&&m.type==="log")for(u=0;u<b;u++)_.push(y+u*o.dy);o._extremes[c._id]=T.findExtremes(c,A),o._extremes[m._id]=T.findExtremes(m,_),o._scaler=r(o);var p={x0:l,y0:y,z:o.z,w:g,h:b};return[p]};function i(v,s,o,b){return function(g){return x.constrain((g-v)*s,o,b)}}function n(v,s){return function(o){return x.constrain(o,v,s)}}function r(v){var s=f.colormodel[v.colormodel],o=s.colormodel||v.colormodel,b=o.length;v._sArray=[];for(var g=0;g<b;g++)s.min[g]!==v.zmin[g]||s.max[g]!==v.zmax[g]?v._sArray.push(i(v.zmin[g],(s.max[g]-s.min[g])/(v.zmax[g]-v.zmin[g]),s.min[g],s.max[g])):v._sArray.push(n(s.min[g],s.max[g]));return function(d){for(var c=d.slice(0,b),m=0;m<b;m++){var l=c[m];if(!M(l))return!1;c[m]=v._sArray[m](l)}return c}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(t,B,G){B.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(x){return x.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(x){return x.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(x){return x.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(x){var f=x.slice(0,3);return f[1]=f[1]+"%",f[2]=f[2]+"%",f},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(x){var f=x.slice(0,4);return f[1]=f[1]+"%",f[2]=f[2]+"%",f},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("./constants"),T=t("../../snapshot/helpers").IMAGE_URL_PREFIX;B.exports=function(a,i){function n(s,o){return x.coerce(a,i,f,s,o)}n("source"),i.source&&!i.source.match(T)&&delete i.source,i._hasSource=!!i.source;var r=n("z");if(i._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!i._hasZ&&!i._hasSource){i.visible=!1;return}n("x0"),n("y0"),n("dx"),n("dy");var v;i._hasZ?(n("colormodel","rgb"),v=M.colormodel[i.colormodel],n("zmin",v.zminDflt||v.min),n("zmax",v.zmaxDflt||v.max)):i._hasSource&&(i.colormodel="rgba256",v=M.colormodel[i.colormodel],i.zmin=v.zminDflt,i.zmax=v.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),i._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(t,B,G){B.exports=function(f,M){return"xVal"in M&&(f.x=M.xVal),"yVal"in M&&(f.y=M.yVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f.color=M.color,f.colormodel=M.trace.colormodel,f.z||(f.z=M.color),f}},{}],859:[function(t,B,G){var x=t("probe-image-size/sync"),f=t("../../snapshot/helpers").IMAGE_URL_PREFIX,M=t("buffer/").Buffer;G.getImageSize=function(T){var e=T.replace(f,""),a=new M(e,"base64");return x(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(t,B,G){var x=t("../../components/fx"),f=t("../../lib"),M=t("./constants");B.exports=function(e,a,i){var n=e.cd[0],r=n.trace,v=e.xa,s=e.ya;if(!(x.inbox(a-n.x0,a-(n.x0+n.w*r.dx),0)>0||x.inbox(i-n.y0,i-(n.y0+n.h*r.dy),0)>0)){var o=Math.floor((a-n.x0)/r.dx),b=Math.floor(Math.abs(i-n.y0)/r.dy),g;if(r._hasZ?g=n.z[b][o]:r._hasSource&&(g=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,b,1,1).data),!!g){var d=n.hi||r.hoverinfo,c;if(d){var m=d.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(c=!0)}var l=M.colormodel[r.colormodel],y=l.colormodel||r.colormodel,u=y.length,A=r._scaler(g),_=l.suffix,p=[];(r.hovertemplate||c)&&(p.push("["+[A[0]+_[0],A[1]+_[1],A[2]+_[2]].join(", ")),u===4&&p.push(", "+A[3]+_[3]),p.push("]"),p=p.join(""),e.extraText=y.toUpperCase()+": "+p);var w;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[b])?w=r.hovertext[b][o]:Array.isArray(r.text)&&Array.isArray(r.text[b])&&(w=r.text[b][o]);var h=s.c2p(n.y0+(b+.5)*r.dy),L=n.x0+(o+.5)*r.dx,E=n.y0+(b+.5)*r.dy,S="["+g.slice(0,r.colormodel.length).join(", ")+"]";return[f.extendFlat(e,{index:[b,o],x0:v.c2p(n.x0+o*r.dx),x1:v.c2p(n.x0+(o+1)*r.dx),y0:h,y1:h,color:A,xVal:L,xLabelVal:L,yVal:E,yLabelVal:E,zLabelVal:S,text:w,hovertemplateLabels:{zLabel:S,colorLabel:p,"color[0]Label":A[0]+_[0],"color[1]Label":A[1]+_[1],"color[2]Label":A[2]+_[2],"color[3]Label":A[3]+_[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover"),eventData:t("./event_data"),moduleType:"trace",name:"image",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=f.strTranslate,T=t("../../constants/xmlns_namespaces"),e=t("./constants"),a=f.isIOS()||f.isSafari()||f.isIE();B.exports=function(n,r,v,s){var o=r.xaxis,b=r.yaxis,g=!(a||n._context._exportedPlot);f.makeTraceGroups(s,v,"im").each(function(d){var c=x.select(this),m=d[0],l=m.trace,y=(l.zsmooth==="fast"||l.zsmooth===!1&&g)&&!l._hasZ&&l._hasSource&&o.type==="linear"&&b.type==="linear";l._realImage=y;var u=m.z,A=m.x0,_=m.y0,p=m.w,w=m.h,h=l.dx,L=l.dy,E,S,P,F,I,D;for(D=0;E===void 0&&D<p;)E=o.c2p(A+D*h),D++;for(D=p;S===void 0&&D>0;)S=o.c2p(A+D*h),D--;for(D=0;F===void 0&&D<w;)F=b.c2p(_+D*L),D++;for(D=w;I===void 0&&D>0;)I=b.c2p(_+D*L),D--;if(S<E&&(P=S,S=E,E=P),I<F&&(P=F,F=I,I=P),!y){var R=.5;E=Math.max(-R*o._length,E),S=Math.min((1+R)*o._length,S),F=Math.max(-R*b._length,F),I=Math.min((1+R)*b._length,I)}var O=Math.round(S-E),z=Math.round(I-F),H=O<=0||z<=0;if(H){var Y=c.selectAll("image").data([]);Y.exit().remove();return}function ee(re){var Z=document.createElement("canvas");Z.width=O,Z.height=z;var Q=Z.getContext("2d",{willReadFrequently:!0}),ie=function(Re){return f.constrain(Math.round(o.c2p(A+Re*h)-E),0,O)},oe=function(Re){return f.constrain(Math.round(b.c2p(_+Re*L)-F),0,z)},ne=e.colormodel[l.colormodel],se=ne.colormodel||l.colormodel,_e=ne.fmt,ue;for(D=0;D<m.w;D++){var ge=ie(D),xe=ie(D+1);if(!(xe===ge||isNaN(xe)||isNaN(ge)))for(var ye=0;ye<m.h;ye++){var be=oe(ye),Se=oe(ye+1);Se===be||isNaN(Se)||isNaN(be)||!re(D,ye)||(ue=l._scaler(re(D,ye)),ue?Q.fillStyle=se+"("+_e(ue).join(",")+")":Q.fillStyle="rgba(0,0,0,0)",Q.fillRect(ge,be,xe-ge,Se-be))}}return Z}var j=c.selectAll("image").data([d]);j.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),j.exit().remove();var X=l.zsmooth===!1?e.pixelatedStyle:"";if(y){var ae=f.simpleMap(o.range,o.r2l),fe=f.simpleMap(b.range,b.r2l),K=ae[1]<ae[0],J=fe[1]>fe[0];if(K||J){var U=E+O/2,V=F+z/2;X+="transform:"+M(U+"px",V+"px")+"scale("+(K?-1:1)+","+(J?-1:1)+")"+M(-U+"px",-V+"px")+";"}}j.attr("style",X);var q=new Promise(function(re){if(l._hasZ)re();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===p&&l._canvas.el.height===w&&l._canvas.source===l.source)re();else{var Z=document.createElement("canvas");Z.width=p,Z.height=w;var Q=Z.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var ie=l._image;ie.onload=function(){Q.drawImage(ie,0,0),l._canvas={el:Z,source:l.source},re()},ie.setAttribute("src",l.source)}}).then(function(){var re,Z;if(l._hasZ)Z=ee(function(oe,ne){return u[ne][oe]}),re=Z.toDataURL("image/png");else if(l._hasSource)if(y)re=l.source;else{var Q=l._canvas.el.getContext("2d",{willReadFrequently:!0}),ie=Q.getImageData(0,0,p,w).data;Z=ee(function(oe,ne){var se=4*(ne*p+oe);return[ie[se],ie[se+1],ie[se+2],ie[se+3]]}),re=Z.toDataURL("image/png")}j.attr({"xlink:href":re,height:z,width:O,x:E,y:F})});n._promises.push(q)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(t,B,G){var x=t("@plotly/d3");B.exports=function(M){x.select(M).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(t,B,G){var x=t("../../lib/extend").extendFlat,f=t("../../lib/extend").extendDeep,M=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../components/color/attributes"),a=t("../../plots/domain").attributes,i=t("../../plots/cartesian/layout_attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../constants/delta.js"),v=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=T({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},b={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},g=n("step",f({},o,{range:b}));B.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:x({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:x({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:x({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:f({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:M({range:b,visible:x({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:x({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:T({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:x({},o.line.color,{}),width:x({},o.line.width,{dflt:1}),editType:"plot"},thickness:x({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(t,B,G){var x=t("../../plots/plots");G.name="indicator",G.plot=function(f,M,T,e){x.plotBasePlot(G.name,f,M,T,e)},G.clean=function(f,M,T,e){x.cleanBasePlot(G.name,f,M,T,e)}},{"../../plots/plots":628}],866:[function(t,B,G){function x(f,M){var T=[],e=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var a=M._lastValue,i=a;return M._hasDelta&&typeof M.delta.reference=="number"&&(i=M.delta.reference),T[0]={y:e,lastY:a,delta:e-i,relativeDelta:(e-i)/i},T}B.exports={calc:x}},{}],867:[function(t,B,G){B.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../plots/domain").defaults,T=t("../../plot_api/plot_template"),e=t("../../plots/array_container_defaults"),a=t("./constants.js"),i=t("../../plots/cartesian/tick_value_defaults"),n=t("../../plots/cartesian/tick_mark_defaults"),r=t("../../plots/cartesian/tick_label_defaults"),v=t("../../plots/cartesian/prefix_suffix_defaults");function s(b,g,d,c){function m(D,R){return x.coerce(b,g,f,D,R)}M(g,c,m),m("mode"),g._hasNumber=g.mode.indexOf("number")!==-1,g._hasDelta=g.mode.indexOf("delta")!==-1,g._hasGauge=g.mode.indexOf("gauge")!==-1;var l=m("value");g._range=[0,typeof l=="number"?1.5*l:1];var y=new Array(2),u;g._hasNumber&&(m("number.valueformat"),m("number.font.color",c.font.color),m("number.font.family",c.font.family),m("number.font.size"),g.number.font.size===void 0&&(g.number.font.size=a.defaultNumberFontSize,y[0]=!0),m("number.prefix"),m("number.suffix"),u=g.number.font.size);var A;g._hasDelta&&(m("delta.font.color",c.font.color),m("delta.font.family",c.font.family),m("delta.font.size"),g.delta.font.size===void 0&&(g.delta.font.size=(g._hasNumber?.5:1)*(u||a.defaultNumberFontSize),y[1]=!0),m("delta.reference",g.value),m("delta.relative"),m("delta.valueformat",g.delta.relative?"2%":""),m("delta.increasing.symbol"),m("delta.increasing.color"),m("delta.decreasing.symbol"),m("delta.decreasing.color"),m("delta.position"),m("delta.prefix"),m("delta.suffix"),A=g.delta.font.size),g._scaleNumbers=(!g._hasNumber||y[0])&&(!g._hasDelta||y[1])||!1,m("title.font.color",c.font.color),m("title.font.family",c.font.family),m("title.font.size",.25*(u||A||a.defaultNumberFontSize)),m("title.text");var _,p,w,h;function L(D,R){return x.coerce(_,p,f.gauge,D,R)}function E(D,R){return x.coerce(w,h,f.gauge.axis,D,R)}if(g._hasGauge){_=b.gauge,_||(_={}),p=T.newContainer(g,"gauge"),L("shape");var S=g._isBullet=g.gauge.shape==="bullet";S||m("title.align","center");var P=g._isAngular=g.gauge.shape==="angular";P||m("align","center"),L("bgcolor",c.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var F=a.valueThickness*(g.gauge.shape==="bullet"?.5:1);L("bar.thickness",F),e(_,p,{name:"steps",handleItemDefaults:o}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),w={},_&&(w=_.axis||{}),h=T.newContainer(p,"axis"),E("visible"),g._range=E("range",g._range);var I={outerTicks:!0};i(w,h,E,"linear"),v(w,h,E,"linear",I),r(w,h,E,"linear",I),n(w,h,E,I)}else m("title.align","center"),m("align","center"),g._isAngular=g._isBullet=!1;g._length=null}function o(b,g){function d(c,m){return x.coerce(b,g,f.gauge.steps,c,m)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}B.exports={supplyDefaults:s}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(t,B,G){B.exports={moduleType:"trace",name:"indicator",basePlotModule:t("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc").calc,plot:t("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-interpolate").interpolate,M=t("d3-interpolate").interpolateNumber,T=t("../../lib"),e=T.strScale,a=T.strTranslate,i=T.rad2deg,n=t("../../constants/alignment").MID_SHIFT,r=t("../../components/drawing"),v=t("./constants"),s=t("../../lib/svg_text_utils"),o=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/axis_defaults"),g=t("../../plots/cartesian/position_defaults"),d=t("../../plots/cartesian/layout_attributes"),c=t("../../components/color"),m={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},y=/[yzafpnmkMGTPEZY]/;function u(I){return I&&I.duration>0}B.exports=function(D,R,O,z){var H=D._fullLayout,Y;u(O)&&z&&(Y=z()),T.makeTraceGroups(H._indicatorlayer,R,"trace").each(function(ee){var j=ee[0],X=j.trace,ae=x.select(this),fe=X._hasGauge,K=X._isAngular,J=X._isBullet,U=X.domain,V={w:H._size.w*(U.x[1]-U.x[0]),h:H._size.h*(U.y[1]-U.y[0]),l:H._size.l+H._size.w*U.x[0],r:H._size.r+H._size.w*(1-U.x[1]),t:H._size.t+H._size.h*(1-U.y[1]),b:H._size.b+H._size.h*U.y[0]},q=V.l+V.w/2,re=V.t+V.h/2,Z=Math.min(V.w/2,V.h),Q=v.innerRadius*Z,ie,oe,ne,se=X.align||"center";if(oe=re,!fe)ie=V.l+l[se]*V.w,ne=function(Ae){return E(Ae,V.w,V.h)};else if(K&&(ie=q,oe=re+Z/2,ne=function(Ae){return S(Ae,.9*Q)}),J){var _e=v.bulletPadding,ue=1-v.bulletNumberDomainSize+_e;ie=V.l+(ue+(1-ue)*l[se])*V.w,ne=function(Ae){return E(Ae,(v.bulletNumberDomainSize-_e)*V.w,V.h)}}p(D,ae,ee,{numbersX:ie,numbersY:oe,numbersScaler:ne,transitionOpts:O,onComplete:Y});var ge,xe;fe&&(ge={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},xe={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var ye=ae.selectAll("g.angular").data(K?ee:[]);ye.exit().remove();var be=ae.selectAll("g.angularaxis").data(K?ee:[]);be.exit().remove(),K&&_(D,ae,ee,{radius:Z,innerRadius:Q,gauge:ye,layer:be,size:V,gaugeBg:ge,gaugeOutline:xe,transitionOpts:O,onComplete:Y});var Se=ae.selectAll("g.bullet").data(J?ee:[]);Se.exit().remove();var Re=ae.selectAll("g.bulletaxis").data(J?ee:[]);Re.exit().remove(),J&&A(D,ae,ee,{gauge:Se,layer:Re,size:V,gaugeBg:ge,gaugeOutline:xe,transitionOpts:O,onComplete:Y});var Ve=ae.selectAll("text.title").data(ee);Ve.exit().remove(),Ve.enter().append("text").classed("title",!0),Ve.attr("text-anchor",function(){return J?m.right:m[X.title.align]}).text(X.title.text).call(r.font,X.title.font).call(s.convertToTspans,D),Ve.attr("transform",function(){var Ae=V.l+V.w*l[X.title.align],Ce,Ze=v.titlePadding,Ye=r.bBox(Ve.node());if(fe){if(K)if(X.gauge.axis.visible){var ze=r.bBox(be.node());Ce=ze.top-Ze-Ye.bottom}else Ce=V.t+V.h/2-Z/2-Ye.bottom-Ze;J&&(Ce=oe-(Ye.top+Ye.bottom)/2,Ae=V.l-v.bulletPadding*V.w)}else Ce=X._numbersTop-Ze-Ye.bottom;return a(Ae,Ce)})})};function A(I,D,R,O){var z=R[0].trace,H=O.gauge,Y=O.layer,ee=O.gaugeBg,j=O.gaugeOutline,X=O.size,ae=z.domain,fe=O.transitionOpts,K=O.onComplete,J,U,V,q,re;H.enter().append("g").classed("bullet",!0),H.attr("transform",a(X.l,X.t)),Y.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Y.selectAll("g.xbulletaxistick,path,text").remove();var Z=X.h,Q=z.gauge.bar.thickness*Z,ie=ae.x[0],oe=ae.x[0]+(ae.x[1]-ae.x[0])*(z._hasNumber||z._hasDelta?1-v.bulletNumberDomainSize:1);J=L(I,z.gauge.axis),J._id="xbulletaxis",J.domain=[ie,oe],J.setScale(),U=o.calcTicks(J),V=o.makeTransTickFn(J),q=o.getTickSigns(J)[2],re=X.t+X.h,J.visible&&(o.drawTicks(I,J,{vals:J.ticks==="inside"?o.clipEnds(J,U):U,layer:Y,path:o.makeTickPath(J,re,q),transFn:V}),o.drawLabels(I,J,{vals:U,layer:Y,transFn:V,labelFns:o.makeLabelFns(J,re)}));function ne(be){be.attr("width",function(Se){return Math.max(0,J.c2p(Se.range[1])-J.c2p(Se.range[0]))}).attr("x",function(Se){return J.c2p(Se.range[0])}).attr("y",function(Se){return .5*(1-Se.thickness)*Z}).attr("height",function(Se){return Se.thickness*Z})}var se=[ee].concat(z.gauge.steps),_e=H.selectAll("g.bg-bullet").data(se);_e.enter().append("g").classed("bg-bullet",!0).append("rect"),_e.select("rect").call(ne).call(w),_e.exit().remove();var ue=H.selectAll("g.value-bullet").data([z.gauge.bar]);ue.enter().append("g").classed("value-bullet",!0).append("rect"),ue.select("rect").attr("height",Q).attr("y",(Z-Q)/2).call(w),u(fe)?ue.select("rect").transition().duration(fe.duration).ease(fe.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).attr("width",Math.max(0,J.c2p(Math.min(z.gauge.axis.range[1],R[0].y)))):ue.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,J.c2p(Math.min(z.gauge.axis.range[1],R[0].y))):0),ue.exit().remove();var ge=R.filter(function(){return z.gauge.threshold.value||z.gauge.threshold.value===0}),xe=H.selectAll("g.threshold-bullet").data(ge);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",J.c2p(z.gauge.threshold.value)).attr("x2",J.c2p(z.gauge.threshold.value)).attr("y1",(1-z.gauge.threshold.thickness)/2*Z).attr("y2",(1-(1-z.gauge.threshold.thickness)/2)*Z).call(c.stroke,z.gauge.threshold.line.color).style("stroke-width",z.gauge.threshold.line.width),xe.exit().remove();var ye=H.selectAll("g.gauge-outline").data([j]);ye.enter().append("g").classed("gauge-outline",!0).append("rect"),ye.select("rect").call(ne).call(w),ye.exit().remove()}function _(I,D,R,O){var z=R[0].trace,H=O.size,Y=O.radius,ee=O.innerRadius,j=O.gaugeBg,X=O.gaugeOutline,ae=[H.l+H.w/2,H.t+H.h/2+Y/2],fe=O.gauge,K=O.layer,J=O.transitionOpts,U=O.onComplete,V=Math.PI/2;function q(Ie){var Ge=z.gauge.axis.range[0],dt=z.gauge.axis.range[1],Rt=(Ie-Ge)/(dt-Ge)*Math.PI-V;return Rt<-V?-V:Rt>V?V:Rt}function re(Ie){return x.svg.arc().innerRadius((ee+Y)/2-Ie/2*(Y-ee)).outerRadius((ee+Y)/2+Ie/2*(Y-ee)).startAngle(-V)}function Z(Ie){Ie.attr("d",function(Ge){return re(Ge.thickness).startAngle(q(Ge.range[0])).endAngle(q(Ge.range[1]))()})}var Q,ie,oe,ne;fe.enter().append("g").classed("angular",!0),fe.attr("transform",a(ae[0],ae[1])),K.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),K.selectAll("g.xangularaxistick,path,text").remove(),Q=L(I,z.gauge.axis),Q.type="linear",Q.range=z.gauge.axis.range,Q._id="xangularaxis",Q.ticklabeloverflow="allow",Q.setScale();var se=function(Ie){return(Q.range[0]-Ie.x)/(Q.range[1]-Q.range[0])*Math.PI+Math.PI},_e={},ue=o.makeLabelFns(Q,0),ge=ue.labelStandoff;_e.xFn=function(Ie){var Ge=se(Ie);return Math.cos(Ge)*ge},_e.yFn=function(Ie){var Ge=se(Ie),dt=Math.sin(Ge)>0?.2:1;return-Math.sin(Ge)*(ge+Ie.fontSize*dt)+Math.abs(Math.cos(Ge))*(Ie.fontSize*n)},_e.anchorFn=function(Ie){var Ge=se(Ie),dt=Math.cos(Ge);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},_e.heightFn=function(Ie,Ge,dt){var Rt=se(Ie);return-.5*(1+Math.sin(Rt))*dt};var xe=function(Ie){return a(ae[0]+Y*Math.cos(Ie),ae[1]-Y*Math.sin(Ie))};oe=function(Ie){return xe(se(Ie))};var ye=function(Ie){var Ge=se(Ie);return xe(Ge)+"rotate("+-i(Ge)+")"};if(ie=o.calcTicks(Q),ne=o.getTickSigns(Q)[2],Q.visible){ne=Q.ticks==="inside"?-1:1;var be=(Q.linewidth||1)/2;o.drawTicks(I,Q,{vals:ie,layer:K,path:"M"+ne*be+",0h"+ne*Q.ticklen,transFn:ye}),o.drawLabels(I,Q,{vals:ie,layer:K,transFn:oe,labelFns:_e})}var Se=[j].concat(z.gauge.steps),Re=fe.selectAll("g.bg-arc").data(Se);Re.enter().append("g").classed("bg-arc",!0).append("path"),Re.select("path").call(Z).call(w),Re.exit().remove();var Ve=re(z.gauge.bar.thickness),Ae=fe.selectAll("g.value-arc").data([z.gauge.bar]);Ae.enter().append("g").classed("value-arc",!0).append("path");var Ce=Ae.select("path");u(J)?(Ce.transition().duration(J.duration).ease(J.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()}).attrTween("d",h(Ve,q(R[0].lastY),q(R[0].y))),z._lastValue=R[0].y):Ce.attr("d",typeof R[0].y=="number"?Ve.endAngle(q(R[0].y)):"M0,0Z"),Ce.call(w),Ae.exit().remove(),Se=[];var Ze=z.gauge.threshold.value;(Ze||Ze===0)&&Se.push({range:[Ze,Ze],color:z.gauge.threshold.color,line:{color:z.gauge.threshold.line.color,width:z.gauge.threshold.line.width},thickness:z.gauge.threshold.thickness});var Ye=fe.selectAll("g.threshold-arc").data(Se);Ye.enter().append("g").classed("threshold-arc",!0).append("path"),Ye.select("path").call(Z).call(w),Ye.exit().remove();var ze=fe.selectAll("g.gauge-outline").data([X]);ze.enter().append("g").classed("gauge-outline",!0).append("path"),ze.select("path").call(Z).call(w),ze.exit().remove()}function p(I,D,R,O){var z=R[0].trace,H=O.numbersX,Y=O.numbersY,ee=z.align||"center",j=m[ee],X=O.transitionOpts,ae=O.onComplete,fe=T.ensureSingle(D,"g","numbers"),K,J,U,V=[];z._hasNumber&&V.push("number"),z._hasDelta&&(V.push("delta"),z.delta.position==="left"&&V.reverse());var q=fe.selectAll("text").data(V);q.enter().append("text"),q.attr("text-anchor",function(){return j}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();function re(xe,ye,be,Se){if(xe.match("s")&&be>=0!=Se>=0&&!ye(be).slice(-1).match(y)&&!ye(Se).slice(-1).match(y)){var Re=xe.slice().replace("s","f").replace(/\d+/,function(Ae){return parseInt(Ae)-1}),Ve=L(I,{tickformat:Re});return function(Ae){return Math.abs(Ae)<1?o.tickText(Ve,Ae).text:ye(Ae)}}else return ye}function Z(){var xe=L(I,{tickformat:z.number.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var ye=function(Ae){return o.tickText(xe,Ae).text},be=z.number.suffix,Se=z.number.prefix,Re=fe.select("text.number");function Ve(){var Ae=typeof R[0].y=="number"?Se+ye(R[0].y)+be:"-";Re.text(Ae).call(r.font,z.number.font).call(s.convertToTspans,I)}return u(X)?Re.transition().duration(X.duration).ease(X.easing).each("end",function(){Ve(),ae&&ae()}).each("interrupt",function(){Ve(),ae&&ae()}).attrTween("text",function(){var Ae=x.select(this),Ce=M(R[0].lastY,R[0].y);z._lastValue=R[0].y;var Ze=re(z.number.valueformat,ye,R[0].lastY,R[0].y);return function(Ye){Ae.text(Se+Ze(Ce(Ye))+be)}}):Ve(),K=P(Se+ye(R[0].y)+be,z.number.font,j,I),Re}function Q(){var xe=L(I,{tickformat:z.delta.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var ye=function(Ye){return o.tickText(xe,Ye).text},be=z.delta.suffix,Se=z.delta.prefix,Re=function(Ye){var ze=z.delta.relative?Ye.relativeDelta:Ye.delta;return ze},Ve=function(Ye,ze){return Ye===0||typeof Ye!="number"||isNaN(Ye)?"-":(Ye>0?z.delta.increasing.symbol:z.delta.decreasing.symbol)+Se+ze(Ye)+be},Ae=function(Ye){return Ye.delta>=0?z.delta.increasing.color:z.delta.decreasing.color};z._deltaLastValue===void 0&&(z._deltaLastValue=Re(R[0]));var Ce=fe.select("text.delta");Ce.call(r.font,z.delta.font).call(c.fill,Ae({delta:z._deltaLastValue}));function Ze(){Ce.text(Ve(Re(R[0]),ye)).call(c.fill,Ae(R[0])).call(s.convertToTspans,I)}return u(X)?Ce.transition().duration(X.duration).ease(X.easing).tween("text",function(){var Ye=x.select(this),ze=Re(R[0]),Ie=z._deltaLastValue,Ge=re(z.delta.valueformat,ye,Ie,ze),dt=M(Ie,ze);return z._deltaLastValue=ze,function(Rt){Ye.text(Ve(dt(Rt),Ge)),Ye.call(c.fill,Ae({delta:dt(Rt)}))}}).each("end",function(){Ze(),ae&&ae()}).each("interrupt",function(){Ze(),ae&&ae()}):Ze(),J=P(Ve(Re(R[0]),ye),z.delta.font,j,I),Ce}var ie=z.mode+z.align,oe;if(z._hasDelta&&(oe=Q(),ie+=z.delta.position+z.delta.font.size+z.delta.font.family+z.delta.valueformat,ie+=z.delta.increasing.symbol+z.delta.decreasing.symbol,U=J),z._hasNumber&&(Z(),ie+=z.number.font.size+z.number.font.family+z.number.valueformat+z.number.suffix+z.number.prefix,U=K),z._hasDelta&&z._hasNumber){var ne=[(K.left+K.right)/2,(K.top+K.bottom)/2],se=[(J.left+J.right)/2,(J.top+J.bottom)/2],_e,ue,ge=.75*z.delta.font.size;z.delta.position==="left"&&(_e=F(z,"deltaPos",0,-1*(K.width*l[z.align]+J.width*(1-l[z.align])+ge),ie,Math.min),ue=ne[1]-se[1],U={width:K.width+J.width+ge,height:Math.max(K.height,J.height),left:J.left+_e,right:K.right,top:Math.min(K.top,J.top+ue),bottom:Math.max(K.bottom,J.bottom+ue)}),z.delta.position==="right"&&(_e=F(z,"deltaPos",0,K.width*(1-l[z.align])+J.width*l[z.align]+ge,ie,Math.max),ue=ne[1]-se[1],U={width:K.width+J.width+ge,height:Math.max(K.height,J.height),left:K.left,right:J.right+_e,top:Math.min(K.top,J.top+ue),bottom:Math.max(K.bottom,J.bottom+ue)}),z.delta.position==="bottom"&&(_e=null,ue=J.height,U={width:Math.max(K.width,J.width),height:K.height+J.height,left:Math.min(K.left,J.left),right:Math.max(K.right,J.right),top:K.bottom-K.height,bottom:K.bottom+J.height}),z.delta.position==="top"&&(_e=null,ue=K.top,U={width:Math.max(K.width,J.width),height:K.height+J.height,left:Math.min(K.left,J.left),right:Math.max(K.right,J.right),top:K.bottom-K.height-J.height,bottom:K.bottom}),oe.attr({dx:_e,dy:ue})}(z._hasNumber||z._hasDelta)&&fe.attr("transform",function(){var xe=O.numbersScaler(U);ie+=xe[2];var ye=F(z,"numbersScale",1,xe[0],ie,Math.min),be;z._scaleNumbers||(ye=1),z._isAngular?be=Y-ye*U.bottom:be=Y-ye*(U.top+U.bottom)/2,z._numbersTop=ye*U.top+be;var Se=U[ee];ee==="center"&&(Se=(U.left+U.right)/2);var Re=H-ye*Se;return Re=F(z,"numbersTranslate",0,Re,ie,Math.max),a(Re,be)+e(ye)})}function w(I){I.each(function(D){c.stroke(x.select(this),D.line.color)}).each(function(D){c.fill(x.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function h(I,D,R){return function(){var O=f(D,R);return function(z){return I.endAngle(O(z))()}}}function L(I,D,R){var O=I._fullLayout,z=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),H={type:"linear",_id:"x"+D._id},Y={letter:"x",font:O.font,noHover:!0,noTickson:!0};function ee(j,X){return T.coerce(z,H,d,j,X)}return b(z,H,ee,Y,O),g(z,H,ee,Y),H}function E(I,D,R){var O=Math.min(D/I.width,R/I.height);return[O,I,D+"x"+R]}function S(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=D/R;return[O,I,D]}function P(I,D,R,O){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),H=x.select(z);return H.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(s.convertToTspans,O).call(r.font,D),r.bBox(H.node())}function F(I,D,R,O,z,H){var Y="_cache"+D;I[Y]&&I[Y].key===z||(I[Y]={key:z,value:R});var ee=T.aggNums(H,null,[I[Y].value,O],2);return I[Y].value=ee,ee}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var v=B.exports=i(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:M(),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),valuehoverformat:f("value",1),showlegend:a({},e.showlegend,{dflt:!1})},x("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");v.flatshading.dflt=!0,v.lighting.facenormalsepsilon.dflt=0,v.x.editType=v.y.editType=v.z.editType=v.value.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(t,B,G){var x=t("../../components/colorscale/calc"),f=t("../streamtube/calc").processGrid,M=t("../streamtube/calc").filter;B.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=M(a.x,a._len),a._y=M(a.y,a._len),a._z=M(a.z,a._len),a._value=M(a.value,a._len);var i=f(a);a._gridFill=i.fill,a._Xs=i.Xs,a._Ys=i.Ys,a._Zs=i.Zs,a._len=i.len;for(var n=1/0,r=-1/0,v=0;v<a._len;v++){var s=a._value[v];n=Math.min(n,s),r=Math.max(r,s)}a._minValues=n,a._maxValues=r,a._vMin=a.isomin===void 0||a.isomin===null?n:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?r:a.isomax,x(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(t,B,G){var x=t("../../../stackgl_modules").gl_mesh3d,f=t("../../lib/gl_format_color").parseColorScale,M=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=function(o,b){for(var g=b.length-1;g>0;g--){var d=Math.min(b[g],b[g-1]),c=Math.max(b[g],b[g-1]);if(c>d&&d<o&&o<=c)return{id:g,distRatio:(c-o)/(c-d)}}return{id:0,distRatio:0}};function i(o,b,g){this.scene=o,this.uid=g,this.mesh=b,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(o){if(o.object===this.mesh){var b=o.data.index,g=this.data._meshX[b],d=this.data._meshY[b],c=this.data._meshZ[b],m=this.data._Ys.length,l=this.data._Zs.length,y=a(g,this.data._Xs).id,u=a(d,this.data._Ys).id,A=a(c,this.data._Zs).id,_=o.index=A+l*u+l*m*y;o.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[_]!==void 0?o.textLabel=p[_]:p&&(o.textLabel=p),!0}},n.update=function(o){var b=this.scene,g=b.fullSceneLayout;this.data=v(o);function d(u,A,_,p){return A.map(function(w){return u.d2l(w,0,p)*_})}var c=e(d(g.xaxis,o._meshX,b.dataScale[0],o.xcalendar),d(g.yaxis,o._meshY,b.dataScale[1],o.ycalendar),d(g.zaxis,o._meshZ,b.dataScale[2],o.zcalendar)),m=e(o._meshI,o._meshJ,o._meshK),l={positions:c,cells:m,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:M(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},y=T(o);l.vertexIntensity=o._meshIntensity,l.vertexIntensityBounds=[y.min,y.max],l.colormap=f(o),this.mesh.update(l)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(o){o._meshI=[],o._meshJ=[],o._meshK=[];var b=o.surface.show,g=o.spaceframe.show,d=o.surface.fill,c=o.spaceframe.fill,m=!1,l=!1,y=0,u,A,_=o._Xs,p=o._Ys,w=o._Zs,h=_.length,L=p.length,E=w.length,S=r.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Ot,St,Xe){switch(S){case 5:return Xe+E*St+E*L*Ot;case 4:return Xe+E*Ot+E*h*St;case 3:return St+L*Xe+L*E*Ot;case 2:return St+L*Ot+L*h*Xe;case 1:return Ot+h*Xe+h*E*St;default:return Ot+h*St+h*L*Xe}},F=o._minValues,I=o._maxValues,D=o._vMin,R=o._vMax,O,z,H,Y;function ee(Ot,St,Xe){for(var at=Y.length,We=A;We<at;We++)if(Ot===O[We]&&St===z[We]&&Xe===H[We])return We;return-1}function j(){A=u}function X(){O=[],z=[],H=[],Y=[],u=0,j()}function ae(Ot,St,Xe,at){return O.push(Ot),z.push(St),H.push(Xe),Y.push(at),u++,u-1}function fe(Ot,St,Xe){return o._meshI.push(Ot),o._meshJ.push(St),o._meshK.push(Xe),y++,y-1}function K(Ot,St,Xe){for(var at=[],We=0;We<Ot.length;We++)at[We]=(Ot[We]+St[We]+Xe[We])/3;return at}function J(Ot,St,Xe){for(var at=[],We=0;We<Ot.length;We++)at[We]=Ot[We]*(1-Xe)+Xe*St[We];return at}var U;function V(Ot){U=Ot}function q(Ot,St){var Xe=Ot[0],at=Ot[1],We=Ot[2],Ee=K(Xe,at,We),He=Math.sqrt(1-U),Ke=J(Ee,Xe,He),et=J(Ee,at,He),At=J(Ee,We,He),mt=St[0],Mt=St[1],Gt=St[2];return{xyzv:[[Xe,at,et],[et,Ke,Xe],[at,We,At],[At,et,at],[We,Xe,Ke],[Ke,At,We]],abc:[[mt,Mt,-1],[-1,-1,mt],[Mt,Gt,-1],[-1,-1,Mt],[Gt,mt,-1],[-1,-1,Gt]]}}function re(Ot,St){return Ot==="all"||Ot===null?!0:Ot.indexOf(St)>-1}function Z(Ot,St){return Ot===null?St:Ot}function Q(Ot,St,Xe){j();var at=[St],We=[Xe];if(U>=1)at=[St],We=[Xe];else if(U>0){var Ee=q(St,Xe);at=Ee.xyzv,We=Ee.abc}for(var He=0;He<at.length;He++){St=at[He],Xe=We[He];for(var Ke=[],et=0;et<3;et++){var At=St[et][0],mt=St[et][1],Mt=St[et][2],Gt=St[et][3],zt=Xe[et]>-1?Xe[et]:ee(At,mt,Mt);zt>-1?Ke[et]=zt:Ke[et]=ae(At,mt,Mt,Z(Ot,Gt))}fe(Ke[0],Ke[1],Ke[2])}}function ie(Ot,St,Xe){var at=function(We,Ee,He){Q(Ot,[St[We],St[Ee],St[He]],[Xe[We],Xe[Ee],Xe[He]])};at(0,1,2),at(2,3,0)}function oe(Ot,St,Xe){var at=function(We,Ee,He){Q(Ot,[St[We],St[Ee],St[He]],[Xe[We],Xe[Ee],Xe[He]])};at(0,1,2),at(3,0,1),at(2,3,0),at(1,2,3)}function ne(Ot,St,Xe,at){var We=Ot[3];We<Xe&&(We=Xe),We>at&&(We=at);for(var Ee=(Ot[3]-We)/(Ot[3]-St[3]+1e-9),He=[],Ke=0;Ke<4;Ke++)He[Ke]=(1-Ee)*Ot[Ke]+Ee*St[Ke];return He}function se(Ot,St,Xe){return Ot>=St&&Ot<=Xe}function _e(Ot){var St=.001*(R-D);return Ot>=D-St&&Ot<=R+St}function ue(Ot){for(var St=[],Xe=0;Xe<4;Xe++){var at=Ot[Xe];St.push([o._x[at],o._y[at],o._z[at],o._value[at]])}return St}var ge=3;function xe(Ot,St,Xe,at,We,Ee){Ee||(Ee=1),Xe=[-1,-1,-1];var He=!1,Ke=[se(St[0][3],at,We),se(St[1][3],at,We),se(St[2][3],at,We)];if(!Ke[0]&&!Ke[1]&&!Ke[2])return!1;var et=function(mt,Mt,Gt){return _e(Mt[0][3])&&_e(Mt[1][3])&&_e(Mt[2][3])?(Q(mt,Mt,Gt),!0):Ee<ge?xe(mt,Mt,Gt,D,R,++Ee):!1};if(Ke[0]&&Ke[1]&&Ke[2])return et(Ot,St,Xe)||He;var At=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(mt){if(Ke[mt[0]]&&Ke[mt[1]]&&!Ke[mt[2]]){var Mt=St[mt[0]],Gt=St[mt[1]],zt=St[mt[2]],Ht=ne(zt,Mt,at,We),Xt=ne(zt,Gt,at,We);He=et(Ot,[Xt,Ht,Mt],[-1,-1,Xe[mt[0]]])||He,He=et(Ot,[Mt,Gt,Xt],[Xe[mt[0]],Xe[mt[1]],-1])||He,At=!0}}),At||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(mt){if(Ke[mt[0]]&&!Ke[mt[1]]&&!Ke[mt[2]]){var Mt=St[mt[0]],Gt=St[mt[1]],zt=St[mt[2]],Ht=ne(Gt,Mt,at,We),Xt=ne(zt,Mt,at,We);He=et(Ot,[Xt,Ht,Mt],[-1,-1,Xe[mt[0]]])||He,At=!0}}),He}function ye(Ot,St,Xe,at){var We=!1,Ee=ue(St),He=[se(Ee[0][3],Xe,at),se(Ee[1][3],Xe,at),se(Ee[2][3],Xe,at),se(Ee[3][3],Xe,at)];if(!He[0]&&!He[1]&&!He[2]&&!He[3])return We;if(He[0]&&He[1]&&He[2]&&He[3])return l&&(We=oe(Ot,Ee,St)||We),We;var Ke=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(et){if(He[et[0]]&&He[et[1]]&&He[et[2]]&&!He[et[3]]){var At=Ee[et[0]],mt=Ee[et[1]],Mt=Ee[et[2]],Gt=Ee[et[3]];if(l)We=Q(Ot,[At,mt,Mt],[St[et[0]],St[et[1]],St[et[2]]])||We;else{var zt=ne(Gt,At,Xe,at),Ht=ne(Gt,mt,Xe,at),Xt=ne(Gt,Mt,Xe,at);We=Q(null,[zt,Ht,Xt],[-1,-1,-1])||We}Ke=!0}}),Ke||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(et){if(He[et[0]]&&He[et[1]]&&!He[et[2]]&&!He[et[3]]){var At=Ee[et[0]],mt=Ee[et[1]],Mt=Ee[et[2]],Gt=Ee[et[3]],zt=ne(Mt,At,Xe,at),Ht=ne(Mt,mt,Xe,at),Xt=ne(Gt,mt,Xe,at),Wt=ne(Gt,At,Xe,at);l?(We=Q(Ot,[At,Wt,zt],[St[et[0]],-1,-1])||We,We=Q(Ot,[mt,Ht,Xt],[St[et[1]],-1,-1])||We):We=ie(null,[zt,Ht,Xt,Wt],[-1,-1,-1,-1])||We,Ke=!0}}),Ke)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(et){if(He[et[0]]&&!He[et[1]]&&!He[et[2]]&&!He[et[3]]){var At=Ee[et[0]],mt=Ee[et[1]],Mt=Ee[et[2]],Gt=Ee[et[3]],zt=ne(mt,At,Xe,at),Ht=ne(Mt,At,Xe,at),Xt=ne(Gt,At,Xe,at);l?(We=Q(Ot,[At,zt,Ht],[St[et[0]],-1,-1])||We,We=Q(Ot,[At,Ht,Xt],[St[et[0]],-1,-1])||We,We=Q(Ot,[At,Xt,zt],[St[et[0]],-1,-1])||We):We=Q(null,[zt,Ht,Xt],[-1,-1,-1])||We,Ke=!0}}),We}function be(Ot,St,Xe,at,We,Ee,He,Ke,et,At,mt){var Mt=!1;return m&&(re(Ot,"A")&&(Mt=ye(null,[St,Xe,at,Ee],At,mt)||Mt),re(Ot,"B")&&(Mt=ye(null,[Xe,at,We,et],At,mt)||Mt),re(Ot,"C")&&(Mt=ye(null,[Xe,Ee,He,et],At,mt)||Mt),re(Ot,"D")&&(Mt=ye(null,[at,Ee,Ke,et],At,mt)||Mt),re(Ot,"E")&&(Mt=ye(null,[Xe,at,Ee,et],At,mt)||Mt)),l&&(Mt=ye(Ot,[Xe,at,Ee,et],At,mt)||Mt),Mt}function Se(Ot,St,Xe,at,We,Ee,He,Ke){return[Ke[0]===!0?!0:xe(Ot,ue([St,Xe,at]),[St,Xe,at],Ee,He),Ke[1]===!0?!0:xe(Ot,ue([at,We,St]),[at,We,St],Ee,He)]}function Re(Ot,St,Xe,at,We,Ee,He,Ke,et){return Ke?Se(Ot,St,Xe,We,at,Ee,He,et):Se(Ot,Xe,We,at,St,Ee,He,et)}function Ve(Ot,St,Xe,at,We,Ee,He){var Ke=!1,et,At,mt,Mt,Gt=function(){Ke=xe(Ot,[et,At,mt],[-1,-1,-1],We,Ee)||Ke,Ke=xe(Ot,[mt,Mt,et],[-1,-1,-1],We,Ee)||Ke},zt=He[0],Ht=He[1],Xt=He[2];return zt&&(et=J(ue([P(St,Xe-0,at-0)])[0],ue([P(St-1,Xe-0,at-0)])[0],zt),At=J(ue([P(St,Xe-0,at-1)])[0],ue([P(St-1,Xe-0,at-1)])[0],zt),mt=J(ue([P(St,Xe-1,at-1)])[0],ue([P(St-1,Xe-1,at-1)])[0],zt),Mt=J(ue([P(St,Xe-1,at-0)])[0],ue([P(St-1,Xe-1,at-0)])[0],zt),Gt()),Ht&&(et=J(ue([P(St-0,Xe,at-0)])[0],ue([P(St-0,Xe-1,at-0)])[0],Ht),At=J(ue([P(St-0,Xe,at-1)])[0],ue([P(St-0,Xe-1,at-1)])[0],Ht),mt=J(ue([P(St-1,Xe,at-1)])[0],ue([P(St-1,Xe-1,at-1)])[0],Ht),Mt=J(ue([P(St-1,Xe,at-0)])[0],ue([P(St-1,Xe-1,at-0)])[0],Ht),Gt()),Xt&&(et=J(ue([P(St-0,Xe-0,at)])[0],ue([P(St-0,Xe-0,at-1)])[0],Xt),At=J(ue([P(St-0,Xe-1,at)])[0],ue([P(St-0,Xe-1,at-1)])[0],Xt),mt=J(ue([P(St-1,Xe-1,at)])[0],ue([P(St-1,Xe-1,at-1)])[0],Xt),Mt=J(ue([P(St-1,Xe-0,at)])[0],ue([P(St-1,Xe-0,at-1)])[0],Xt),Gt()),Ke}function Ae(Ot,St,Xe,at,We,Ee,He,Ke,et,At,mt,Mt){var Gt=Ot;return Mt?(m&&Ot==="even"&&(Gt=null),be(Gt,St,Xe,at,We,Ee,He,Ke,et,At,mt)):(m&&Ot==="odd"&&(Gt=null),be(Gt,et,Ke,He,Ee,We,at,Xe,St,At,mt))}function Ce(Ot,St,Xe,at,We){for(var Ee=[],He=0,Ke=0;Ke<St.length;Ke++)for(var et=St[Ke],At=1;At<E;At++)for(var mt=1;mt<L;mt++)Ee.push(Re(Ot,P(et,mt-1,At-1),P(et,mt-1,At),P(et,mt,At-1),P(et,mt,At),Xe,at,(et+mt+At)%2,We&&We[He]?We[He]:[])),He++;return Ee}function Ze(Ot,St,Xe,at,We){for(var Ee=[],He=0,Ke=0;Ke<St.length;Ke++)for(var et=St[Ke],At=1;At<h;At++)for(var mt=1;mt<E;mt++)Ee.push(Re(Ot,P(At-1,et,mt-1),P(At,et,mt-1),P(At-1,et,mt),P(At,et,mt),Xe,at,(At+et+mt)%2,We&&We[He]?We[He]:[])),He++;return Ee}function Ye(Ot,St,Xe,at,We){for(var Ee=[],He=0,Ke=0;Ke<St.length;Ke++)for(var et=St[Ke],At=1;At<L;At++)for(var mt=1;mt<h;mt++)Ee.push(Re(Ot,P(mt-1,At-1,et),P(mt-1,At,et),P(mt,At-1,et),P(mt,At,et),Xe,at,(mt+At+et)%2,We&&We[He]?We[He]:[])),He++;return Ee}function ze(Ot,St,Xe){for(var at=1;at<E;at++)for(var We=1;We<L;We++)for(var Ee=1;Ee<h;Ee++)Ae(Ot,P(Ee-1,We-1,at-1),P(Ee-1,We-1,at),P(Ee-1,We,at-1),P(Ee-1,We,at),P(Ee,We-1,at-1),P(Ee,We-1,at),P(Ee,We,at-1),P(Ee,We,at),St,Xe,(Ee+We+at)%2)}function Ie(Ot,St,Xe){l=!0,ze(Ot,St,Xe),l=!1}function Ge(Ot,St,Xe){m=!0,ze(Ot,St,Xe),m=!1}function dt(Ot,St,Xe,at,We,Ee){for(var He=[],Ke=0,et=0;et<St.length;et++)for(var At=St[et],mt=1;mt<E;mt++)for(var Mt=1;Mt<L;Mt++)He.push(Ve(Ot,At,Mt,mt,Xe,at,We[et],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return He}function Rt(Ot,St,Xe,at,We,Ee){for(var He=[],Ke=0,et=0;et<St.length;et++)for(var At=St[et],mt=1;mt<h;mt++)for(var Mt=1;Mt<E;Mt++)He.push(Ve(Ot,mt,At,Mt,Xe,at,We[et],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return He}function Qt(Ot,St,Xe,at,We,Ee){for(var He=[],Ke=0,et=0;et<St.length;et++)for(var At=St[et],mt=1;mt<L;mt++)for(var Mt=1;Mt<h;Mt++)He.push(Ve(Ot,Mt,mt,At,Xe,at,We[et],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return He}function Bt(Ot,St){for(var Xe=[],at=Ot;at<St;at++)Xe.push(at);return Xe}function Ct(){for(var Ot=0;Ot<h;Ot++)for(var St=0;St<L;St++)for(var Xe=0;Xe<E;Xe++){var at=P(Ot,St,Xe);ae(o._x[at],o._y[at],o._z[at],o._value[at])}}function Kt(){X(),Ct();var Ot=null;if(g&&c&&(V(c),Ie(Ot,D,R)),b&&d){V(d);for(var St=o.surface.pattern,Xe=o.surface.count,at=0;at<Xe;at++){var We=Xe===1?.5:at/(Xe-1),Ee=(1-We)*D+We*R,He=Math.abs(Ee-F),Ke=Math.abs(Ee-I),et=He>Ke?[F,Ee]:[Ee,I];Ge(St,et[0],et[1])}}var At=[[Math.min(D,I),Math.max(D,I)],[Math.min(F,R),Math.max(F,R)]];["x","y","z"].forEach(function(mt){for(var Mt=[],Gt=0;Gt<At.length;Gt++){var zt=0,Ht=At[Gt][0],Xt=At[Gt][1],Wt=o.slices[mt];if(Wt.show&&Wt.fill){V(Wt.fill);var sr=[],Gr=[],cn=[];if(Wt.locations.length)for(var en=0;en<Wt.locations.length;en++){var st=a(Wt.locations[en],mt==="x"?_:mt==="y"?p:w);st.distRatio===0?sr.push(st.id):st.id>0&&(Gr.push(st.id),mt==="x"?cn.push([st.distRatio,0,0]):mt==="y"?cn.push([0,st.distRatio,0]):cn.push([0,0,st.distRatio]))}else mt==="x"?sr=Bt(1,h-1):mt==="y"?sr=Bt(1,L-1):sr=Bt(1,E-1);Gr.length>0&&(mt==="x"?Mt[zt]=dt(Ot,Gr,Ht,Xt,cn,Mt[zt]):mt==="y"?Mt[zt]=Rt(Ot,Gr,Ht,Xt,cn,Mt[zt]):Mt[zt]=Qt(Ot,Gr,Ht,Xt,cn,Mt[zt]),zt++),sr.length>0&&(mt==="x"?Mt[zt]=Ce(Ot,sr,Ht,Xt,Mt[zt]):mt==="y"?Mt[zt]=Ze(Ot,sr,Ht,Xt,Mt[zt]):Mt[zt]=Ye(Ot,sr,Ht,Xt,Mt[zt]),zt++)}var rr=o.caps[mt];rr.show&&rr.fill&&(V(rr.fill),mt==="x"?Mt[zt]=Ce(Ot,[0,h-1],Ht,Xt,Mt[zt]):mt==="y"?Mt[zt]=Ze(Ot,[0,L-1],Ht,Xt,Mt[zt]):Mt[zt]=Ye(Ot,[0,E-1],Ht,Xt,Mt[zt]),zt++)}}),y===0&&X(),o._meshX=O,o._meshY=z,o._meshZ=H,o._meshIntensity=Y,o._Xs=_,o._Ys=p,o._Zs=w}return Kt(),o}function s(o,b){var g=o.glplot.gl,d=x({gl:g}),c=new i(o,d,b.uid);return d._trace=c,c.update(b),o.glplot.add(d),c}B.exports={findNearestOnAxis:a,generateIsoMeshes:v,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(t,B,G){var x=t("../../lib"),f=t("../../registry"),M=t("./attributes"),T=t("../../components/colorscale/defaults");function e(i,n,r,v){function s(o,b){return x.coerce(i,n,M,o,b)}a(i,n,r,v,s)}function a(i,n,r,v,s){var o=s("isomin"),b=s("isomax");b!=null&&o!==void 0&&o!==null&&o>b&&(n.isomin=null,n.isomax=null);var g=s("x"),d=s("y"),c=s("z"),m=s("value");if(!g||!g.length||!d||!d.length||!c||!c.length||!m||!m.length){n.visible=!1;return}var l=f.getComponentMethod("calendars","handleTraceDefaults");l(i,n,["x","y","z"],v),s("valuehoverformat"),["x","y","z"].forEach(function(_){s(_+"hoverformat");var p="caps."+_,w=s(p+".show");w&&s(p+".fill");var h="slices."+_,L=s(h+".show");L&&(s(h+".fill"),s(h+".locations"))});var y=s("spaceframe.show");y&&s("spaceframe.fill");var u=s("surface.show");u&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var A=s("contour.show");A&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){s(_)}),T(i,n,v,s,{prefix:"",cLetter:"c"}),n._length=null}B.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../surface/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat;B.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"}),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},x("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(t,B,G){var x=t("../../components/colorscale/calc");B.exports=function(M,T){T.intensity&&x(M,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(t,B,G){var x=t("../../../stackgl_modules").gl_mesh3d,f=t("../../../stackgl_modules").delaunay_triangulate,M=t("../../../stackgl_modules").alpha_shape,T=t("../../../stackgl_modules").convex_hull,e=t("../../lib/gl_format_color").parseColorScale,a=t("../../lib/str2rgbarray"),i=t("../../components/colorscale").extractOpts,n=t("../../plots/gl3d/zip3");function r(m,l,y){this.scene=m,this.uid=y,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=r.prototype;v.handlePick=function(m){if(m.object===this.mesh){var l=m.index=m.data.index;m.data._cellCenter?m.traceCoordinate=m.data.dataCoordinate:m.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var y=this.data.hovertext||this.data.text;return Array.isArray(y)&&y[l]!==void 0?m.textLabel=y[l]:y&&(m.textLabel=y),!0}};function s(m){for(var l=[],y=m.length,u=0;u<y;u++)l[u]=a(m[u]);return l}function o(m,l,y,u){for(var A=[],_=l.length,p=0;p<_;p++)A[p]=m.d2l(l[p],0,u)*y;return A}function b(m){for(var l=[],y=m.length,u=0;u<y;u++)l[u]=Math.round(m[u]);return l}function g(m,l){for(var y=["x","y","z"].indexOf(m),u=[],A=l.length,_=0;_<A;_++)u[_]=[l[_][(y+1)%3],l[_][(y+2)%3]];return f(u)}function d(m,l){for(var y=m.length,u=0;u<y;u++)if(m[u]<=-.5||m[u]>=l-.5)return!1;return!0}v.update=function(m){var l=this.scene,y=l.fullSceneLayout;this.data=m;var u=m.x.length,A=n(o(y.xaxis,m.x,l.dataScale[0],m.xcalendar),o(y.yaxis,m.y,l.dataScale[1],m.ycalendar),o(y.zaxis,m.z,l.dataScale[2],m.zcalendar)),_;if(m.i&&m.j&&m.k){if(m.i.length!==m.j.length||m.j.length!==m.k.length||!d(m.i,u)||!d(m.j,u)||!d(m.k,u))return;_=n(b(m.i),b(m.j),b(m.k))}else m.alphahull===0?_=T(A):m.alphahull>0?_=M(m.alphahull,A):_=g(m.delaunayaxis,A);var p={positions:A,cells:_,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,contourEnable:m.contour.show,contourColor:a(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};if(m.intensity){var w=i(m);this.color="#fff";var h=m.intensitymode;p[h+"Intensity"]=m.intensity,p[h+"IntensityBounds"]=[w.min,w.max],p.colormap=e(m)}else m.vertexcolor?(this.color=m.vertexcolor[0],p.vertexColors=s(m.vertexcolor)):m.facecolor?(this.color=m.facecolor[0],p.cellColors=s(m.facecolor)):(this.color=m.color,p.meshColor=a(m.color));this.mesh.update(p)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(m,l){var y=m.glplot.gl,u=x({gl:y}),A=new r(m,u,l.uid);return u._trace=A,A.update(l),m.glplot.add(u),A}B.exports=c},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../../components/colorscale/defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(d,c){return f.coerce(a,i,T,d,c)}function s(d){var c=d.map(function(m){var l=v(m);return l&&f.isArrayOrTypedArray(l)?l:null});return c.every(function(m){return m&&m.length===c[0].length})&&c}var o=s(["x","y","z"]);if(!o){i.visible=!1;return}if(s(["i","j","k"]),i.i&&(!i.j||!i.k)||i.j&&(!i.k||!i.i)||i.k&&(!i.i||!i.j)){i.visible=!1;return}var b=x.getComponentMethod("calendars","handleTraceDefaults");b(a,i,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(d){v(d)});var g=v("contour.show");g&&(v("contour.color"),v("contour.width")),"intensity"in a?(v("intensity"),v("intensitymode"),M(a,i,r,v,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in a?v("facecolor"):"vertexcolor"in a?v("vertexcolor"):v("color",n)),v("text"),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat"),v("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(t,B,G){var x=t("../../lib").extendFlat,f=t("../scatter/attributes"),M=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/drawing/attributes").dash,e=t("../../components/fx/attributes"),a=t("../../constants/delta.js"),i=a.INCREASING.COLOR,n=a.DECREASING.COLOR,r=f.line;function v(s){return{line:{color:x({},r.color,{dflt:s}),width:r.width,dash:T,editType:"style"},editType:"style"}}B.exports={xperiod:f.xperiod,xperiod0:f.xperiod0,xperiodalignment:f.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:x({},r.width,{}),dash:x({},T,{}),editType:"style"},increasing:v(i),decreasing:v(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:x({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(t,B,G){var x=t("../../lib"),f=x._,M=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM;function a(v,s){var o=M.getFromId(v,s.xaxis),b=M.getFromId(v,s.yaxis),g=r(v,o,s),d=s._minDiff;s._minDiff=null;var c=s._origX;s._origX=null;var m=s._xcalc;s._xcalc=null;var l=n(v,s,c,m,b,i);return s._extremes[o._id]=M.findExtremes(o,m,{vpad:d/2}),l.length?(x.extendFlat(l[0].t,{wHover:d/2,tickLen:g}),l):[{t:{empty:!0}}]}function i(v,s,o,b){return{o:v,h:s,l:o,c:b}}function n(v,s,o,b,g,d){for(var c=g.makeCalcdata(s,"open"),m=g.makeCalcdata(s,"high"),l=g.makeCalcdata(s,"low"),y=g.makeCalcdata(s,"close"),u=Array.isArray(s.text),A=Array.isArray(s.hovertext),_=!0,p=null,w=!!s.xperiodalignment,h=[],L=0;L<b.length;L++){var E=b[L],S=c[L],P=m[L],F=l[L],I=y[L];if(E!==e&&S!==e&&P!==e&&F!==e&&I!==e){I===S?p!==null&&I!==p&&(_=I>p):_=I>S,p=I;var D=d(S,P,F,I);D.pos=E,D.yc=(S+I)/2,D.i=L,D.dir=_?"increasing":"decreasing",D.x=D.pos,D.y=[F,P],w&&(D.orig_p=o[L]),u&&(D.tx=s.text[L]),A&&(D.htx=s.hovertext[L]),h.push(D)}else h.push({pos:E,empty:!0})}return s._extremes[g._id]=M.findExtremes(g,x.concat(l,m),{padded:!0}),h.length&&(h[0].t={labels:{open:f(v,"open:")+" ",high:f(v,"high:")+" ",low:f(v,"low:")+" ",close:f(v,"close:")+" "}}),h}function r(v,s,o){var b=o._minDiff;if(!b){var g=v._fullData,d=[];b=1/0;var c;for(c=0;c<g.length;c++){var m=g[c];if(m.type==="ohlc"&&m.visible===!0&&m.xaxis===s._id){d.push(m);var l=s.makeCalcdata(m,"x");m._origX=l;var y=T(o,s,"x",l).vals;m._xcalc=y;var u=x.distinctVals(y).minDiff;u&&isFinite(u)&&(b=Math.min(b,u))}}for(b===1/0&&(b=1),c=0;c<d.length;c++)d[c]._minDiff=b}return b*o.tickwidth}B.exports={calc:a,calcCommon:n}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(t,B,G){var x=t("../../lib"),f=t("./ohlc_defaults"),M=t("../scatter/period_defaults"),T=t("./attributes");B.exports=function(i,n,r,v){function s(b,g){return x.coerce(i,n,T,b,g)}var o=f(i,n,s,v);if(!o){n.visible=!1;return}M(i,n,v,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(i,n,s,"increasing"),e(i,n,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),v._requestRangeslider[n.xaxis]=!0};function e(a,i,n,r){n(r+".line.color"),n(r+".line.width",i.line.width),n(r+".line.dash",i.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../lib"),M=t("../../components/fx"),T=t("../../components/color"),e=t("../../lib").fillText,a=t("../../constants/delta.js"),i={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function n(o,b,g,d){var c=o.cd,m=c[0].trace;return m.hoverlabel.split?v(o,b,g,d):s(o,b,g,d)}function r(o,b,g,d){var c=o.cd,m=o.xa,l=c[0].trace,y=c[0].t,u=l.type,A=u==="ohlc"?"l":"min",_=u==="ohlc"?"h":"max",p,w,h=y.bPos||0,L=function(ee){return ee.pos+h-b},E=y.bdPos||y.tickLen,S=y.wHover,P=Math.min(1,E/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));p=o.maxHoverDistance-P,w=o.maxSpikeDistance-P;function F(ee){var j=L(ee);return M.inbox(j-S,j+S,p)}function I(ee){var j=ee[A],X=ee[_];return j===X||M.inbox(j-g,X-g,p)}function D(ee){return(F(ee)+I(ee))/2}var R=M.getDistanceFunction(d,F,I,D);if(M.getClosest(c,R,o),o.index===!1)return null;var O=c[o.index];if(O.empty)return null;var z=O.dir,H=l[z],Y=H.line.color;return T.opacity(Y)&&H.line.width?o.color=Y:o.color=H.fillcolor,o.x0=m.c2p(O.pos+h-E,!0),o.x1=m.c2p(O.pos+h+E,!0),o.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,o.spikeDistance=D(O)*w/p,o.xSpike=m.c2p(O.pos,!0),o}function v(o,b,g,d){var c=o.cd,m=o.ya,l=c[0].trace,y=c[0].t,u=[],A=r(o,b,g,d);if(!A)return[];var _=A.index,p=c[_],w=p.hi||l.hoverinfo,h=w.split("+"),L=w==="all",E=L||h.indexOf("y")!==-1;if(!E)return[];for(var S=["high","open","close","low"],P={},F=0;F<S.length;F++){var I=S[F],D=l[I][A.index],R=m.c2p(D,!0),O;D in P?(O=P[D],O.yLabel+="<br>"+y.labels[I]+x.hoverLabelText(m,D,l.yhoverformat)):(O=f.extendFlat({},A),O.y0=O.y1=R,O.yLabelVal=D,O.yLabel=y.labels[I]+x.hoverLabelText(m,D,l.yhoverformat),O.name="",u.push(O),P[D]=O)}return u}function s(o,b,g,d){var c=o.cd,m=o.ya,l=c[0].trace,y=c[0].t,u=r(o,b,g,d);if(!u)return[];var A=u.index,_=c[A],p=u.index=_.i,w=_.dir;function h(D){return y.labels[D]+x.hoverLabelText(m,l[D][p],l.yhoverformat)}var L=_.hi||l.hoverinfo,E=L.split("+"),S=L==="all",P=S||E.indexOf("y")!==-1,F=S||E.indexOf("text")!==-1,I=P?[h("open"),h("high"),h("low"),h("close")+"  "+i[w]]:[];return F&&e(_,l,I),u.extraText=I.join("<br>"),u.y0=u.y1=m.c2p(_.yc,!0),[u]}B.exports={hoverPoints:n,hoverSplit:v,hoverOnPoints:s}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(t,B,G){B.exports={moduleType:"trace",name:"ohlc",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc").calc,plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(t,B,G){var x=t("../../registry"),f=t("../../lib");B.exports=function(T,e,a,i){var n=a("x"),r=a("open"),v=a("high"),s=a("low"),o=a("close");a("hoverlabel.split");var b=x.getComponentMethod("calendars","handleTraceDefaults");if(b(T,e,["x"],i),!!(r&&v&&s&&o)){var g=Math.min(r.length,v.length,s.length,o.length);return n&&(g=Math.min(g,f.minRowLength(n))),e._length=g,g}}},{"../../lib":515,"../../registry":647}],887:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib");B.exports=function(T,e,a,i){var n=e.yaxis,r=e.xaxis,v=!!r.rangebreaks;f.makeTraceGroups(i,a,"trace ohlc").each(function(s){var o=x.select(this),b=s[0],g=b.t,d=b.trace;if(d.visible!==!0||g.empty){o.remove();return}var c=g.tickLen,m=o.selectAll("path").data(f.identity);m.enter().append("path"),m.exit().remove(),m.attr("d",function(l){if(l.empty)return"M0,0Z";var y=r.c2p(l.pos-c,!0),u=r.c2p(l.pos+c,!0),A=v?(y+u)/2:r.c2p(l.pos,!0),_=n.c2p(l.o,!0),p=n.c2p(l.h,!0),w=n.c2p(l.l,!0),h=n.c2p(l.c,!0);return"M"+y+","+_+"H"+A+"M"+A+","+p+"V"+w+"M"+u+","+h+"H"+A})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(t,B,G){B.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,i=[],n,r=T[0].t.bPos||0;if(M===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++){var v=T[n];M.contains([e.c2p(v.pos+r),a.c2p(v.yc)],null,v.i,f)?(i.push({pointNumber:v.i,x:e.c2d(v.pos),y:a.c2d(v.yc)}),v.selected=1):v.selected=0}return i}},{}],889:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../../components/color");B.exports=function(e,a,i){var n=i||x.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var v=r[0].trace;x.select(this).selectAll("path").each(function(s){if(!s.empty){var o=v[s.dir].line;x.select(this).style("fill","none").call(M.stroke,o.color).call(f.dashLine,o.dash,o.width).style("opacity",v.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(t,B,G){var x=t("../../lib/extend").extendFlat,f=t("../../plots/attributes"),M=t("../../plots/font_attributes"),T=t("../../components/colorscale/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/domain").attributes,i=x({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});B.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:x({},f.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:M({editType:"calc"}),tickfont:M({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(t,B,G){var x=t("../../plots/get_data").getModuleCalcData,f=t("./plot"),M="parcats";G.name=M,G.plot=function(T,e,a,i){var n=x(T.calcdata,M);if(n.length){var r=n[0];f(T,r,a,i)}},G.clean=function(T,e,a,i){var n=i._has&&i._has("parcats"),r=e._has&&e._has("parcats");n&&!r&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(t,B,G){var x=t("../../lib/gup").wrap,f=t("../../components/colorscale/helpers").hasColorscale,M=t("../../components/colorscale/calc"),T=t("../../lib/filter_unique.js"),e=t("../../components/drawing"),a=t("../../lib"),i=t("fast-isnumeric");B.exports=function(y,u){var A=a.filterVisible(u.dimensions);if(A.length===0)return[];var _=A.map(function(K){var J;if(K.categoryorder==="trace")J=null;else if(K.categoryorder==="array")J=K.categoryarray;else{J=T(K.values);for(var U=!0,V=0;V<J.length;V++)if(!i(J[V])){U=!1;break}J.sort(U?a.sorterAsc:void 0),K.categoryorder==="category descending"&&(J=J.reverse())}return g(K.values,J)}),p,w,h;a.isArrayOrTypedArray(u.counts)?p=u.counts:p=[u.counts],d(A),A.forEach(function(K,J){c(K,_[J])});var L=u.line,E;L?(f(u,"line")&&M(y,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),E=e.tryColorscale(L)):E=a.identity;function S(K){var J,U;return a.isArrayOrTypedArray(L.color)?(J=L.color[K%L.color.length],U=J):J=L.color,{color:E(J),rawColor:U}}var P=A[0].values.length,F={},I=_.map(function(K){return K.inds});h=0;var D,R;for(D=0;D<P;D++){var O=[];for(R=0;R<I.length;R++)O.push(I[R][D]);w=p[D%p.length],h+=w;var z=S(D),H=O+"-"+z.rawColor;F[H]===void 0&&(F[H]=o(O,z.color,z.rawColor)),b(F[H],D,w)}var Y=A.map(function(K,J){return r(J,K._index,K._displayindex,K.label,h)});for(D=0;D<P;D++)for(w=p[D%p.length],R=0;R<Y.length;R++){var ee=Y[R].containerInd,j=_[R].inds[D],X=Y[R].categories;if(X[j]===void 0){var ae=u.dimensions[ee]._categoryarray[j],fe=u.dimensions[ee]._ticktext[j];X[j]=v(R,j,ae,fe)}s(X[j],D,w)}return x(n(Y,F,h))};function n(l,y,u){var A=l.map(function(_){return _.categories.length}).reduce(function(_,p){return Math.max(_,p)});return{dimensions:l,paths:y,trace:void 0,maxCats:A,count:u}}function r(l,y,u,A,_){return{dimensionInd:l,containerInd:y,displayInd:u,dimensionLabel:A,count:_,categories:[],dragX:null}}function v(l,y,u,A){return{dimensionInd:l,categoryInd:y,categoryValue:u,displayInd:y,categoryLabel:A,valueInds:[],count:0,dragY:null}}function s(l,y,u){l.valueInds.push(y),l.count+=u}function o(l,y,u){return{categoryInds:l,color:y,rawColor:u,valueInds:[],count:0}}function b(l,y,u){l.valueInds.push(y),l.count+=u}function g(l,y){y==null?y=[]:y=y.map(function(E){return E});var u={},A={},_=[];y.forEach(function(E,S){u[E]=0,A[E]=S});for(var p=0;p<l.length;p++){var w=l[p],h;u[w]===void 0?(u[w]=1,h=y.push(w)-1,A[w]=h):(u[w]++,h=A[w]),_.push(h)}var L=y.map(function(E){return u[E]});return{uniqueValues:y,uniqueCounts:L,inds:_}}function d(l){var y=l.map(function(A){return A.displayindex}),u;if(m(y))for(u=0;u<l.length;u++)l[u]._displayindex=l[u].displayindex;else for(u=0;u<l.length;u++)l[u]._displayindex=u}function c(l,y){l._categoryarray=y.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var u=l._ticktext.length;u<y.uniqueValues.length;u++)l._ticktext.push(y.uniqueValues[u])}function m(l){for(var y=new Array(l.length),u=0;u<l.length;u++){if(l[u]<0||l[u]>=l.length||y[l[u]]!==void 0)return!1;y[l[u]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/helpers").hasColorscale,M=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("./attributes"),i=t("../parcoords/merge_length");function n(v,s,o,b,g){g("line.shape"),g("line.hovertemplate");var d=g("line.color",b.colorway[0]);if(f(v,"line")&&x.isArrayOrTypedArray(d)){if(d.length)return g("line.colorscale"),M(v,s,b,g,{prefix:"line.",cLetter:"c"}),d.length;s.line.color=o}return 1/0}function r(v,s){function o(y,u){return x.coerce(v,s,a.dimensions,y,u)}var b=o("values"),g=o("visible");if(b&&b.length||(g=s.visible=!1),g){o("label"),o("displayindex",s._index);var d=v.categoryarray,c=Array.isArray(d)&&d.length>0,m;c&&(m="array");var l=o("categoryorder",m);l==="array"?(o("categoryarray"),o("ticktext")):(delete v.categoryarray,delete v.ticktext),!c&&l==="array"&&(s.categoryorder="trace")}}B.exports=function(s,o,b,g){function d(u,A){return x.coerce(s,o,a,u,A)}var c=e(s,o,{name:"dimensions",handleItemDefaults:r}),m=n(s,o,b,g,d);T(o,g,d),(!Array.isArray(c)||!c.length)&&(o.visible=!1),i(o,c,"values",m),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var l={family:g.font.family,size:Math.round(g.font.size),color:g.font.color};x.coerceFont(d,"labelfont",l);var y={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};x.coerceFont(d,"tickfont",y)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-interpolate").interpolateNumber,M=t("../../plot_api/plot_api"),T=t("../../components/fx"),e=t("../../lib"),a=e.strTranslate,i=t("../../components/drawing"),n=t("tinycolor2"),r=t("../../lib/svg_text_utils");function v(V,q,re,Z){var Q=q._context.staticPlot,ie=V.map(ae.bind(0,q,re)),oe=Z.selectAll("g.parcatslayer").data([null]);oe.enter().append("g").attr("class","parcatslayer").style("pointer-events",Q?"none":"all");var ne=oe.selectAll("g.trace.parcats").data(ie,s),se=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(Ce){return a(Ce.x,Ce.y)}),se.append("g").attr("class","paths");var _e=ne.select("g.paths"),ue=_e.selectAll("path.path").data(function(Ce){return Ce.paths},s);ue.attr("fill",function(Ce){return Ce.model.color});var ge=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.model.color}).attr("fill-opacity",0);y(ge),ue.attr("d",function(Ce){return Ce.svgD}),ge.empty()||ue.sort(b),ue.exit().remove(),ue.on("mouseover",g).on("mouseout",d).on("click",l),se.append("g").attr("class","dimensions");var xe=ne.select("g.dimensions"),ye=xe.selectAll("g.dimension").data(function(Ce){return Ce.dimensions},s);ye.enter().append("g").attr("class","dimension"),ye.attr("transform",function(Ce){return a(Ce.x,0)}),ye.exit().remove();var be=ye.selectAll("g.category").data(function(Ce){return Ce.categories},s),Se=be.enter().append("g").attr("class","category");be.attr("transform",function(Ce){return a(0,Ce.y)}),Se.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}),_(Se);var Re=be.selectAll("rect.bandrect").data(function(Ce){return Ce.bands},s);Re.each(function(){e.raiseToTop(this)}),Re.attr("fill",function(Ce){return Ce.color});var Ve=Re.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.color}).attr("fill-opacity",0);Re.attr("fill",function(Ce){return Ce.color}).attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}).attr("y",function(Ce){return Ce.y}).attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":Ce.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),w(Ve),Re.exit().remove(),Se.append("text").attr("class","catlabel").attr("pointer-events","none");var Ae=q._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Ce){return o(Ce)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ae)).style("fill","rgb(0, 0, 0)").attr("x",function(Ce){return o(Ce)?Ce.width+5:-5}).attr("y",function(Ce){return Ce.height/2}).text(function(Ce){return Ce.model.categoryLabel}).each(function(Ce){i.font(x.select(this),Ce.parcatsViewModel.categorylabelfont),r.convertToTspans(x.select(this),q)}),Se.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Ce){return Ce.width/2}).attr("y",-5).text(function(Ce,Ze){return Ze===0?Ce.parcatsViewModel.model.dimensions[Ce.model.dimensionInd].dimensionLabel:null}).each(function(Ce){i.font(x.select(this),Ce.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),be.exit().remove(),ye.call(x.behavior.drag().origin(function(Ce){return{x:Ce.x,y:0}}).on("dragstart",z).on("drag",H).on("dragend",Y)),ne.each(function(Ce){Ce.traceSelection=x.select(this),Ce.pathSelection=x.select(this).selectAll("g.paths").selectAll("path.path"),Ce.dimensionSelection=x.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}B.exports=function(V,q,re,Z){v(re,V,Z,q)};function s(V){return V.key}function o(V){var q=V.parcatsViewModel.dimensions.length,re=V.parcatsViewModel.dimensions[q-1].model.dimensionInd;return V.model.dimensionInd===re}function b(V,q){return V.model.rawColor>q.model.rawColor?1:V.model.rawColor<q.model.rawColor?-1:0}function g(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),u(x.select(this));var q=c(V),re=m(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:x.event,constraints:re}),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z=x.mouse(this)[0],Q=V.parcatsViewModel.graphDiv,ie=V.parcatsViewModel.trace,oe=Q._fullLayout,ne=oe._paperdiv.node().getBoundingClientRect(),se=V.parcatsViewModel.graphDiv.getBoundingClientRect(),_e,ue,ge;for(ge=0;ge<V.leftXs.length-1;ge++)if(V.leftXs[ge]+V.dimWidths[ge]-2<=Z&&Z<=V.leftXs[ge+1]+2){var xe=V.parcatsViewModel.dimensions[ge],ye=V.parcatsViewModel.dimensions[ge+1];_e=(xe.x+xe.width+ye.x)/2,ue=(V.topYs[ge]+V.topYs[ge+1]+V.height)/2;break}var be=V.parcatsViewModel.x+_e,Se=V.parcatsViewModel.y+ue,Re=n.mostReadable(V.model.color,["black","white"]),Ve=V.model.count,Ae=Ve/V.parcatsViewModel.model.count,Ce={countLabel:Ve,probabilityLabel:Ae.toFixed(3)},Ze=[];V.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ze.push(["Count:",Ce.countLabel].join(" ")),V.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ze.push(["P:",Ce.probabilityLabel].join(" "));var Ye=Ze.join("<br>"),ze=x.mouse(Q)[0];T.loneHover({trace:ie,x:be-ne.left+se.left,y:Se-ne.top+se.top,text:Ye,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Re,idealAlign:ze<be?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:Ce,eventData:[{data:ie._input,fullData:ie,count:Ve,probability:Ae}]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:Q})}}}function d(V){if(!V.parcatsViewModel.dragDimension&&(y(x.select(this)),T.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(b),V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var q=c(V),re=m(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:x.event,constraints:re})}}function c(V){for(var q=[],re=ee(V.parcatsViewModel),Z=0;Z<V.model.valueInds.length;Z++){var Q=V.model.valueInds[Z];q.push({curveNumber:re,pointNumber:Q})}return q}function m(V){for(var q={},re=V.parcatsViewModel.model.dimensions,Z=0;Z<re.length;Z++){var Q=re[Z],ie=Q.categories[V.model.categoryInds[Z]];q[Q.containerInd]=ie.categoryValue}return V.model.rawColor!==void 0&&(q.color=V.model.rawColor),q}function l(V){if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=c(V),re=m(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:x.event,constraints:re})}}function y(V){V.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(V){V.attr("fill-opacity",.8).attr("stroke",function(q){return n.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function A(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function _(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function p(V){V.attr("stroke","black").attr("stroke-width",1.5)}function w(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function h(V){var q=V.parcatsViewModel.pathSelection,re=V.categoryViewModel.model.dimensionInd,Z=V.categoryViewModel.model.categoryInd;return q.filter(function(Q){return Q.model.categoryInds[re]===Z&&Q.model.color===V.color})}function L(V){var q=x.select(V.parentNode).selectAll("rect.bandrect");q.each(function(re){var Z=h(re);u(Z),Z.each(function(){e.raiseToTop(this)})}),A(x.select(V.parentNode))}function E(V){var q=x.select(V).datum(),re=h(q);u(re),re.each(function(){e.raiseToTop(this)}),x.select(V.parentNode).selectAll("rect.bandrect").filter(function(Z){return Z.color===q.color}).each(function(){e.raiseToTop(this),p(x.select(this))})}function S(V,q,re){var Z=x.select(V).datum(),Q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,oe=x.select(V.parentNode).selectAll("rect.bandrect"),ne=[];oe.each(function(_e){var ue=h(_e);ue.each(function(ge){Array.prototype.push.apply(ne,c(ge))})});var se={};se[Q.dimensionInd]=Q.categoryValue,ie.emit(q,{points:ne,event:re,constraints:se})}function P(V,q,re){var Z=x.select(V).datum(),Q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,oe=h(Z),ne=[];oe.each(function(_e){Array.prototype.push.apply(ne,c(_e))});var se={};se[Q.dimensionInd]=Q.categoryValue,Z.rawColor!==void 0&&(se.color=Z.rawColor),ie.emit(q,{points:ne,event:re,constraints:se})}function F(V,q,re){V._fullLayout._calcInverseTransform(V);var Z=V._fullLayout._invScaleX,Q=V._fullLayout._invScaleY,ie=x.select(re.parentNode).select("rect.catrect"),oe=ie.node().getBoundingClientRect(),ne=ie.datum(),se=ne.parcatsViewModel,_e=se.model.dimensions[ne.model.dimensionInd],ue=se.trace,ge=oe.top+oe.height/2,xe,ye;se.dimensions.length>1&&_e.displayInd===se.dimensions.length-1?(xe=oe.left,ye="left"):(xe=oe.left+oe.width,ye="right");var be=ne.model.count,Se=ne.model.categoryLabel,Re=be/ne.parcatsViewModel.model.count,Ve={countLabel:be,categoryLabel:Se,probabilityLabel:Re.toFixed(3)},Ae=[];ne.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ae.push(["Count:",Ve.countLabel].join(" ")),ne.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ae.push(["P("+Ve.categoryLabel+"):",Ve.probabilityLabel].join(" "));var Ce=Ae.join("<br>");return{trace:ue,x:Z*(xe-q.left),y:Q*(ge-q.top),text:Ce,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ye,hovertemplate:ue.hovertemplate,hovertemplateLabels:Ve,eventData:[{data:ue._input,fullData:ue,count:be,category:Se,probability:Re}]}}function I(V,q,re){var Z=[];return x.select(re.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Q=this;Z.push(F(V,q,Q))}),Z}function D(V,q,re){V._fullLayout._calcInverseTransform(V);var Z=V._fullLayout._invScaleX,Q=V._fullLayout._invScaleY,ie=re.getBoundingClientRect(),oe=x.select(re).datum(),ne=oe.categoryViewModel,se=ne.parcatsViewModel,_e=se.model.dimensions[ne.model.dimensionInd],ue=se.trace,ge=ie.y+ie.height/2,xe,ye;se.dimensions.length>1&&_e.displayInd===se.dimensions.length-1?(xe=ie.left,ye="left"):(xe=ie.left+ie.width,ye="right");var be=ne.model.categoryLabel,Se=oe.parcatsViewModel.model.count,Re=0;oe.categoryViewModel.bands.forEach(function(Rt){Rt.color===oe.color&&(Re+=Rt.count)});var Ve=ne.model.count,Ae=0;se.pathSelection.each(function(Rt){Rt.model.color===oe.color&&(Ae+=Rt.model.count)});var Ce=Re/Se,Ze=Re/Ae,Ye=Re/Ve,ze={countLabel:Se,categoryLabel:be,probabilityLabel:Ce.toFixed(3)},Ie=[];ne.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ie.push(["Count:",ze.countLabel].join(" ")),ne.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ie.push("P(color \u2229 "+be+"): "+ze.probabilityLabel),Ie.push("P("+be+" | color): "+Ze.toFixed(3)),Ie.push("P(color | "+be+"): "+Ye.toFixed(3)));var Ge=Ie.join("<br>"),dt=n.mostReadable(oe.color,["black","white"]);return{trace:ue,x:Z*(xe-q.left),y:Q*(ge-q.top),text:Ge,color:oe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:ye,hovertemplate:ue.hovertemplate,hovertemplateLabels:ze,eventData:[{data:ue._input,fullData:ue,category:be,count:Se,probability:Ce,categorycount:Ve,colorcount:Ae,bandcolorcount:Re}]}}function R(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=x.mouse(this)[1];if(q<-1)return;var re=V.parcatsViewModel.graphDiv,Z=re._fullLayout,Q=Z._paperdiv.node().getBoundingClientRect(),ie=V.parcatsViewModel.hoveron,oe=this;if(ie==="color"?(E(oe),P(oe,"plotly_hover",x.event)):(L(oe),S(oe,"plotly_hover",x.event)),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ne;ie==="category"?ne=F(re,Q,oe):ie==="color"?ne=D(re,Q,oe):ie==="dimension"&&(ne=I(re,Q,oe)),ne&&T.loneHover(ne,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:re})}}}function O(V){var q=V.parcatsViewModel;if(!q.dragDimension&&(y(q.pathSelection),_(q.dimensionSelection.selectAll("g.category")),w(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(b),q.hoverinfoItems.indexOf("skip")===-1)){var re=V.parcatsViewModel.hoveron,Z=this;re==="color"?P(Z,"plotly_unhover",x.event):S(Z,"plotly_unhover",x.event)}}function z(V){V.parcatsViewModel.arrangement!=="fixed"&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,x.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var re=x.mouse(this)[0],Z=x.mouse(this)[1];-2<=re&&re<=q.width+2&&-2<=Z&&Z<=q.height+2&&(V.dragCategoryDisplayInd=q.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(Q){return Q.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),x.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<Z&&Z<=Q.y+Q.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,T.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function H(V){if(V.parcatsViewModel.arrangement!=="fixed"&&(V.dragHasMoved=!0,V.dragDimensionDisplayInd!==null)){var q=V.dragDimensionDisplayInd,re=q-1,Z=q+1,Q=V.parcatsViewModel.dimensions[q];if(V.dragCategoryDisplayInd!==null){var ie=Q.categories[V.dragCategoryDisplayInd];ie.model.dragY+=x.event.dy;var oe=ie.model.dragY,ne=ie.model.displayInd,se=Q.categories,_e=se[ne-1],ue=se[ne+1];_e!==void 0&&oe<_e.y+_e.height/2&&(ie.model.displayInd=_e.model.displayInd,_e.model.displayInd=ne),ue!==void 0&&oe+ie.height>ue.y+ue.height/2&&(ie.model.displayInd=ue.model.displayInd,ue.model.displayInd=ne),V.dragCategoryDisplayInd=ie.model.displayInd}if(V.dragCategoryDisplayInd===null||V.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=x.event.x;var ge=V.parcatsViewModel.dimensions[re],xe=V.parcatsViewModel.dimensions[Z];ge!==void 0&&Q.model.dragX<ge.x+ge.width&&(Q.model.displayInd=ge.model.displayInd,ge.model.displayInd=q),xe!==void 0&&Q.model.dragX+Q.width>xe.x&&(Q.model.displayInd=xe.model.displayInd,xe.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=Q.model.displayInd}J(V.parcatsViewModel),K(V.parcatsViewModel),X(V.parcatsViewModel),j(V.parcatsViewModel)}}function Y(V){if(V.parcatsViewModel.arrangement!=="fixed"&&V.dragDimensionDisplayInd!==null){x.select(this).selectAll("text").attr("font-weight","normal");var q={},re=ee(V.parcatsViewModel),Z=V.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),Q=V.initialDragDimensionDisplayInds.some(function(xe,ye){return xe!==Z[ye]});Q&&Z.forEach(function(xe,ye){var be=V.parcatsViewModel.model.dimensions[ye].containerInd;q["dimensions["+be+"].displayindex"]=xe});var ie=!1;if(V.dragCategoryDisplayInd!==null){var oe=V.model.categories.map(function(xe){return xe.displayInd});if(ie=V.initialDragCategoryDisplayInds.some(function(xe,ye){return xe!==oe[ye]}),ie){var ne=V.model.categories.slice().sort(function(xe,ye){return xe.displayInd-ye.displayInd}),se=ne.map(function(xe){return xe.categoryValue}),_e=ne.map(function(xe){return xe.categoryLabel});q["dimensions["+V.model.containerInd+"].categoryarray"]=[se],q["dimensions["+V.model.containerInd+"].ticktext"]=[_e],q["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!V.dragHasMoved&&V.potentialClickBand&&(V.parcatsViewModel.hoveron==="color"?P(V.potentialClickBand,"plotly_click",x.event.sourceEvent):S(V.potentialClickBand,"plotly_click",x.event.sourceEvent)),V.model.dragX=null,V.dragCategoryDisplayInd!==null){var ue=V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd];ue.model.dragY=null,V.dragCategoryDisplayInd=null}V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,J(V.parcatsViewModel),K(V.parcatsViewModel);var ge=x.transition().duration(300).ease("cubic-in-out");ge.each(function(){X(V.parcatsViewModel,!0),j(V.parcatsViewModel,!0)}).each("end",function(){(Q||ie)&&M.restyle(V.parcatsViewModel.graphDiv,q,[re])})}}function ee(V){for(var q,re=V.graphDiv._fullData,Z=0;Z<re.length;Z++)if(V.key===re[Z].uid){q=Z;break}return q}function j(V,q){q===void 0&&(q=!1);function re(Z){return q?Z.transition():Z}V.pathSelection.data(function(Z){return Z.paths},s),re(V.pathSelection).attr("d",function(Z){return Z.svgD})}function X(V,q){q===void 0&&(q=!1);function re(se){return q?se.transition():se}V.dimensionSelection.data(function(se){return se.dimensions},s);var Z=V.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},s);re(V.dimensionSelection).attr("transform",function(se){return a(se.x,0)}),re(Z).attr("transform",function(se){return a(0,se.y)});var Q=Z.select(".dimlabel");Q.text(function(se,_e){return _e===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null});var ie=Z.select(".catlabel");ie.attr("text-anchor",function(se){return o(se)?"start":"end"}).attr("x",function(se){return o(se)?se.width+5:-5}).each(function(se){var _e,ue;o(se)?(_e=se.width+5,ue="start"):(_e=-5,ue="end"),x.select(this).selectAll("tspan").attr("x",_e).attr("text-anchor",ue)});var oe=Z.selectAll("rect.bandrect").data(function(se){return se.bands},s),ne=oe.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);oe.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),w(ne),oe.each(function(){e.raiseToTop(this)}),oe.exit().remove()}function ae(V,q,re){var Z=re[0],Q=q.margin||{l:80,r:80,t:100,b:80},ie=Z.trace,oe=ie.domain,ne=q.width,se=q.height,_e=Math.floor(ne*(oe.x[1]-oe.x[0])),ue=Math.floor(se*(oe.y[1]-oe.y[0])),ge=oe.x[0]*ne+Q.l,xe=q.height-oe.y[1]*q.height+Q.t,ye=ie.line.shape,be;ie.hoverinfo==="all"?be=["count","probability"]:be=(ie.hoverinfo||"").split("+");var Se={trace:ie,key:ie.uid,model:Z,x:ge,y:xe,width:_e,height:ue,hoveron:ie.hoveron,hoverinfoItems:be,arrangement:ie.arrangement,bundlecolors:ie.bundlecolors,sortpaths:ie.sortpaths,labelfont:ie.labelfont,categorylabelfont:ie.tickfont,pathShape:ye,dragDimension:null,margin:Q,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&(J(Se),K(Se)),Se}function fe(V,q,re,Z,Q){var ie=[],oe=[],ne,se;for(se=0;se<re.length-1;se++)ne=f(re[se]+V[se],V[se+1]),ie.push(ne(Q)),oe.push(ne(1-Q));var _e="M "+V[0]+","+q[0];for(_e+="l"+re[0]+",0 ",se=1;se<re.length;se++)_e+="C"+ie[se-1]+","+q[se-1]+" "+oe[se-1]+","+q[se]+" "+V[se]+","+q[se],_e+="l"+re[se]+",0 ";for(_e+="l0,"+Z+" ",_e+="l -"+re[re.length-1]+",0 ",se=re.length-2;se>=0;se--)_e+="C"+oe[se]+","+(q[se+1]+Z)+" "+ie[se]+","+(q[se]+Z)+" "+(V[se]+re[se])+","+(q[se]+Z),_e+="l-"+re[se]+",0 ";return _e+="Z",_e}function K(V){var q=V.dimensions,re=V.model,Z=q.map(function(Ct){return Ct.categories.map(function(Kt){return Kt.y})}),Q=V.model.dimensions.map(function(Ct){return Ct.categories.map(function(Kt){return Kt.displayInd})}),ie=V.model.dimensions.map(function(Ct){return Ct.displayInd}),oe=V.dimensions.map(function(Ct){return Ct.model.dimensionInd}),ne=q.map(function(Ct){return Ct.x}),se=q.map(function(Ct){return Ct.width}),_e=[];for(var ue in re.paths)re.paths.hasOwnProperty(ue)&&_e.push(re.paths[ue]);function ge(Ct){var Kt=Ct.categoryInds.map(function(St,Xe){return Q[Xe][St]}),Ot=oe.map(function(St){return Kt[St]});return Ot}_e.sort(function(Ct,Kt){var Ot=ge(Ct),St=ge(Kt);return V.sortpaths==="backward"&&(Ot.reverse(),St.reverse()),Ot.push(Ct.valueInds[0]),St.push(Kt.valueInds[0]),V.bundlecolors&&(Ot.unshift(Ct.rawColor),St.unshift(Kt.rawColor)),Ot<St?-1:Ot>St?1:0});for(var xe=new Array(_e.length),ye=q[0].model.count,be=q[0].categories.map(function(Ct){return Ct.height}).reduce(function(Ct,Kt){return Ct+Kt}),Se=0;Se<_e.length;Se++){var Re=_e[Se],Ve;ye>0?Ve=be*(Re.count/ye):Ve=0;for(var Ae=new Array(Z.length),Ce=0;Ce<Re.categoryInds.length;Ce++){var Ze=Re.categoryInds[Ce],Ye=Q[Ce][Ze],ze=ie[Ce];Ae[ze]=Z[ze][Ye],Z[ze][Ye]+=Ve;var Ie=V.dimensions[ze].categories[Ye],Ge=Ie.bands.length,dt=Ie.bands[Ge-1];if(dt===void 0||Re.rawColor!==dt.rawColor){var Rt=dt===void 0?0:dt.y+dt.height;Ie.bands.push({key:Rt,color:Re.color,rawColor:Re.rawColor,height:Ve,width:Ie.width,count:Re.count,y:Rt,categoryViewModel:Ie,parcatsViewModel:V})}else{var Qt=Ie.bands[Ge-1];Qt.height+=Ve,Qt.count+=Re.count}}var Bt;V.pathShape==="hspline"?Bt=fe(ne,Ae,se,Ve,.5):Bt=fe(ne,Ae,se,Ve,0),xe[Se]={key:Re.valueInds[0],model:Re,height:Ve,leftXs:ne,topYs:Ae,dimWidths:se,svgD:Bt,parcatsViewModel:V}}V.paths=xe}function J(V){var q=V.model.dimensions.map(function(oe){return{displayInd:oe.displayInd,dimensionInd:oe.dimensionInd}});q.sort(function(oe,ne){return oe.displayInd-ne.displayInd});var re=[];for(var Z in q){var Q=q[Z].dimensionInd,ie=V.model.dimensions[Q];re.push(U(V,ie))}V.dimensions=re}function U(V,q){var re=40,Z=16,Q=V.model.dimensions.length,ie=q.displayInd,oe,ne,se;Q>1?oe=(V.width-2*re-Z)/(Q-1):oe=0,ne=re,se=ne+oe*ie;var _e=[],ue=V.model.maxCats,ge=q.categories.length,xe=8,ye=q.count,be=V.height-xe*(ue-1),Se,Re,Ve,Ae,Ce,Ze=(ue-ge)*xe/2,Ye=q.categories.map(function(ze){return{displayInd:ze.displayInd,categoryInd:ze.categoryInd}});for(Ye.sort(function(ze,Ie){return ze.displayInd-Ie.displayInd}),Ce=0;Ce<ge;Ce++)Ae=Ye[Ce].categoryInd,Re=q.categories[Ae],ye>0?Se=Re.count/ye*be:Se=0,Ve={key:Re.valueInds[0],model:Re,width:Z,height:Se,y:Re.dragY!==null?Re.dragY:Ze,bands:[],parcatsViewModel:V},Ze=Ze+Se+xe,_e.push(Ve);return{key:q.dimensionInd,x:q.dragX!==null?q.dragX:se,y:0,width:Z,model:q,categories:_e,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(t,B,G){var x=t("./parcats");B.exports=function(M,T,e,a){var i=M._fullLayout,n=i._paper,r=i._size;x(M,n,T,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},e,a)}},{"./parcats":895}],897:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../../plots/cartesian/layout_attributes"),M=t("../../plots/font_attributes"),T=t("../../plots/domain").attributes,e=t("../../lib/extend").extendFlat,a=t("../../plot_api/plot_template").templatedArray;B.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:M({editType:"plot"}),tickfont:M({editType:"plot"}),rangefont:M({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},f.tickvals,{editType:"plot"}),ticktext:e({},f.ticktext,{editType:"plot"}),tickformat:e({},f.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},x("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(t,B,G){var x=t("./constants"),f=t("@plotly/d3"),M=t("../../lib/gup").keyFun,T=t("../../lib/gup").repeat,e=t("../../lib").sorterAsc,a=t("../../lib").strTranslate,i=x.bar.snapRatio;function n(Y,ee){return Y*(1-i)+ee*i}var r=x.bar.snapClose;function v(Y,ee){return Y*(1-r)+ee*r}function s(Y,ee,j,X){if(o(j,X))return j;var ae=Y?-1:1,fe=0,K=ee.length-1;if(ae<0){var J=fe;fe=K,K=J}for(var U=ee[fe],V=U,q=fe;ae*q<ae*K;q+=ae){var re=q+ae,Z=ee[re];if(ae*j<ae*v(U,Z))return n(U,V);if(ae*j<ae*Z||re===K)return n(Z,U);V=U,U=Z}}function o(Y,ee){for(var j=0;j<ee.length;j++)if(Y>=ee[j][0]&&Y<=ee[j][1])return!0;return!1}function b(Y){Y.attr("x",-x.bar.captureWidth/2).attr("width",x.bar.captureWidth)}function g(Y){Y.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(Y){if(!Y.brush.filterSpecified)return"0,"+Y.height;for(var ee=c(Y.brush.filter.getConsolidated(),Y.height),j=[0],X,ae,fe,K=ee.length?ee[0][0]:null,J=0;J<ee.length;J++)X=ee[J],ae=X[1]-X[0],j.push(K),j.push(ae),fe=J+1,fe<ee.length&&(K=ee[fe][0]-X[1]);return j.push(Y.height),j}function c(Y,ee){return Y.map(function(j){return j.map(function(X){return Math.max(0,X*ee)}).sort(e)})}function m(Y,ee){var j=x.bar.handleHeight;if(!(ee>Y[1]+j||ee<Y[0]-j))return ee>=.9*Y[1]+.1*Y[0]?"n":ee<=.9*Y[0]+.1*Y[1]?"s":"ns"}function l(){f.select(document.body).style("cursor",null)}function y(Y){Y.attr("stroke-dasharray",d)}function u(Y,ee){var j=f.select(Y).selectAll(".highlight, .highlight-shadow"),X=ee?j.transition().duration(x.bar.snapDuration).each("end",ee):j;y(X)}function A(Y,ee){var j=Y.brush,X=j.filterSpecified,ae=NaN,fe={},K;if(X){var J=Y.height,U=j.filter.getConsolidated(),V=c(U,J),q=NaN,re=NaN,Z=NaN;for(K=0;K<=V.length;K++){var Q=V[K];if(Q&&Q[0]<=ee&&ee<=Q[1]){q=K;break}else if(re=K?K-1:NaN,Q&&Q[0]>ee){Z=K;break}}if(ae=q,isNaN(ae)&&(isNaN(re)||isNaN(Z)?ae=isNaN(re)?Z:re:ae=ee-V[re][1]<V[Z][0]-ee?re:Z),!isNaN(ae)){var ie=V[ae],oe=m(ie,ee);oe&&(fe.interval=U[ae],fe.intervalPix=ie,fe.region=oe)}}if(Y.ordinal&&!fe.region){var ne=Y.unitTickvals,se=Y.unitToPaddedPx.invert(ee);for(K=0;K<ne.length;K++){var _e=[ne[Math.max(K-1,0)]*.25+ne[K]*.75,ne[Math.min(K+1,ne.length-1)]*.25+ne[K]*.75];if(se>=_e[0]&&se<=_e[1]){fe.clickableOrdinalRange=_e;break}}}return fe}function _(Y,ee){f.event.sourceEvent.stopPropagation();var j=ee.height-f.mouse(Y)[1]-2*x.verticalPadding,X=ee.unitToPaddedPx.invert(j),ae=ee.brush,fe=A(ee,j),K=fe.interval,J=ae.svgBrush;if(J.wasDragged=!1,J.grabbingBar=fe.region==="ns",J.grabbingBar){var U=K.map(ee.unitToPaddedPx);J.grabPoint=j-U[0]-x.verticalPadding,J.barLength=U[1]-U[0]}J.clickableOrdinalRange=fe.clickableOrdinalRange,J.stayingIntervals=ee.multiselect&&ae.filterSpecified?ae.filter.getConsolidated():[],K&&(J.stayingIntervals=J.stayingIntervals.filter(function(V){return V[0]!==K[0]&&V[1]!==K[1]})),J.startExtent=fe.region?K[fe.region==="s"?1:0]:X,ee.parent.inBrushDrag=!0,J.brushStartCallback()}function p(Y,ee){f.event.sourceEvent.stopPropagation();var j=ee.height-f.mouse(Y)[1]-2*x.verticalPadding,X=ee.brush.svgBrush;X.wasDragged=!0,X._dragging=!0,X.grabbingBar?X.newExtent=[j-X.grabPoint,j+X.barLength-X.grabPoint].map(ee.unitToPaddedPx.invert):X.newExtent=[X.startExtent,ee.unitToPaddedPx.invert(j)].sort(e),ee.brush.filterSpecified=!0,X.extent=X.stayingIntervals.concat([X.newExtent]),X.brushCallback(ee),u(Y.parentNode)}function w(Y,ee){var j=ee.brush,X=j.filter,ae=j.svgBrush;ae._dragging||(h(Y,ee),p(Y,ee),ee.brush.svgBrush.wasDragged=!1),ae._dragging=!1;var fe=f.event;fe.sourceEvent.stopPropagation();var K=ae.grabbingBar;if(ae.grabbingBar=!1,ae.grabLocation=void 0,ee.parent.inBrushDrag=!1,l(),!ae.wasDragged){ae.wasDragged=void 0,ae.clickableOrdinalRange?j.filterSpecified&&ee.multiselect?ae.extent.push(ae.clickableOrdinalRange):(ae.extent=[ae.clickableOrdinalRange],j.filterSpecified=!0):K?(ae.extent=ae.stayingIntervals,ae.extent.length===0&&I(j)):I(j),ae.brushCallback(ee),u(Y.parentNode),ae.brushEndCallback(j.filterSpecified?X.getConsolidated():[]);return}var J=function(){X.set(X.getConsolidated())};if(ee.ordinal){var U=ee.unitTickvals;U[U.length-1]<U[0]&&U.reverse(),ae.newExtent=[s(0,U,ae.newExtent[0],ae.stayingIntervals),s(1,U,ae.newExtent[1],ae.stayingIntervals)];var V=ae.newExtent[1]>ae.newExtent[0];ae.extent=ae.stayingIntervals.concat(V?[ae.newExtent]:[]),ae.extent.length||I(j),ae.brushCallback(ee),V?u(Y.parentNode,J):(J(),u(Y.parentNode))}else J();ae.brushEndCallback(j.filterSpecified?X.getConsolidated():[])}function h(Y,ee){var j=ee.height-f.mouse(Y)[1]-2*x.verticalPadding,X=A(ee,j),ae="crosshair";X.clickableOrdinalRange?ae="pointer":X.region&&(ae=X.region+"-resize"),f.select(document.body).style("cursor",ae)}function L(Y){Y.on("mousemove",function(ee){f.event.preventDefault(),ee.parent.inBrushDrag||h(this,ee)}).on("mouseleave",function(ee){ee.parent.inBrushDrag||l()}).call(f.behavior.drag().on("dragstart",function(ee){_(this,ee)}).on("drag",function(ee){p(this,ee)}).on("dragend",function(ee){w(this,ee)}))}function E(Y,ee){return Y[0]-ee[0]}function S(Y,ee,j){var X=j._context.staticPlot,ae=Y.selectAll(".background").data(T);ae.enter().append("rect").classed("background",!0).call(b).call(g).style("pointer-events",X?"none":"auto").attr("transform",a(0,x.verticalPadding)),ae.call(L).attr("height",function(J){return J.height-x.verticalPadding});var fe=Y.selectAll(".highlight-shadow").data(T);fe.enter().append("line").classed("highlight-shadow",!0).attr("x",-x.bar.width/2).attr("stroke-width",x.bar.width+x.bar.strokeWidth).attr("stroke",ee).attr("opacity",x.bar.strokeOpacity).attr("stroke-linecap","butt"),fe.attr("y1",function(J){return J.height}).call(y);var K=Y.selectAll(".highlight").data(T);K.enter().append("line").classed("highlight",!0).attr("x",-x.bar.width/2).attr("stroke-width",x.bar.width-x.bar.strokeWidth).attr("stroke",x.bar.fillColor).attr("opacity",x.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(J){return J.height}).call(y)}function P(Y,ee,j){var X=Y.selectAll("."+x.cn.axisBrush).data(T,M);X.enter().append("g").classed(x.cn.axisBrush,!0),S(X,ee,j)}function F(Y){return Y.svgBrush.extent.map(function(ee){return ee.slice()})}function I(Y){Y.filterSpecified=!1,Y.svgBrush.extent=[[-1/0,1/0]]}function D(Y){return function(j){var X=j.brush,ae=F(X),fe=ae.slice();X.filter.set(fe),Y()}}function R(Y){for(var ee=Y.slice(),j=[],X,ae=ee.shift();ae;){for(X=ae.slice();(ae=ee.shift())&&ae[0]<=X[1];)X[1]=Math.max(X[1],ae[1]);j.push(X)}return j.length===1&&j[0][0]>j[0][1]&&(j=[]),j}function O(){var Y=[],ee,j;return{set:function(X){Y=X.map(function(ae){return ae.slice().sort(e)}).sort(E),Y.length===1&&Y[0][0]===-1/0&&Y[0][1]===1/0&&(Y=[[0,-1]]),ee=R(Y),j=Y.reduce(function(ae,fe){return[Math.min(ae[0],fe[0]),Math.max(ae[1],fe[1])]},[1/0,-1/0])},get:function(){return Y.slice()},getConsolidated:function(){return ee},getBounds:function(){return j}}}function z(Y,ee,j,X,ae,fe){var K=O();return K.set(j),{filter:K,filterSpecified:ee,svgBrush:{extent:[],brushStartCallback:X,brushCallback:D(ae),brushEndCallback:fe}}}function H(Y,ee){if(Array.isArray(Y[0])?(Y=Y.map(function(X){return X.sort(e)}),ee.multiselect?Y=R(Y.sort(E)):Y=[Y[0]]):Y=[Y.sort(e)],ee.tickvals){var j=ee.tickvals.slice().sort(e);if(Y=Y.map(function(X){var ae=[s(0,j,X[0],[]),s(1,j,X[1],[])];if(ae[1]>ae[0])return ae}).filter(function(X){return X}),!Y.length)return}return Y.length>1?Y:Y[0]}B.exports={makeBrush:z,ensureAxisBrush:P,cleanRanges:H}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../plots/get_data").getModuleCalcData,M=t("./plot"),T=t("../../constants/xmlns_namespaces");G.name="parcoords",G.plot=function(e){var a=f(e.calcdata,"parcoords")[0];a.length&&M(e,a)},G.clean=function(e,a,i,n){var r=n._has&&n._has("parcoords"),v=a._has&&a._has("parcoords");r&&!v&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},G.toSVG=function(e){var a=e._fullLayout._glimages,i=x.select(e).selectAll(".svg-container"),n=i.filter(function(v,s){return s===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var v=this,s=v.toDataURL("image/png"),o=a.append("svg:image");o.attr({xmlns:T.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:v.style.width,height:v.style.height})}n.each(r),window.setTimeout(function(){x.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(t,B,G){var x=t("../../lib").isArrayOrTypedArray,f=t("../../components/colorscale"),M=t("../../lib/gup").wrap;B.exports=function(a,i){var n,r;return f.hasColorscale(i,"line")&&x(i.line.color)?(n=i.line.color,r=f.extractOpts(i.line).colorscale,f.calc(a,i,{vals:n,containerStr:"line",cLetter:"c"})):(n=T(i._length),r=[[0,i.line.color],[1,i.line.color]]),M({lineColor:n,cscale:r})};function T(e){for(var a=new Array(e),i=0;i<e;i++)a[i]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(t,B,G){B.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/helpers").hasColorscale,M=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("../../plots/cartesian/axes"),i=t("./attributes"),n=t("./axisbrush"),r=t("./constants").maxDimensionCount,v=t("./merge_length");function s(b,g,d,c,m){var l=m("line.color",d);if(f(b,"line")&&x.isArrayOrTypedArray(l)){if(l.length)return m("line.colorscale"),M(b,g,c,m,{prefix:"line.",cLetter:"c"}),l.length;g.line.color=d}return 1/0}function o(b,g,d,c){function m(_,p){return x.coerce(b,g,i.dimensions,_,p)}var l=m("values"),y=m("visible");if(l&&l.length||(y=g.visible=!1),y){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var u=m("range");g._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},a.setConvert(g._ax,c.layout),m("multiselect");var A=m("constraintrange");A&&(g.constraintrange=n.cleanRanges(A,g))}}B.exports=function(g,d,c,m){function l(p,w){return x.coerce(g,d,i,p,w)}var y=g.dimensions;Array.isArray(y)&&y.length>r&&(x.log("parcoords traces support up to "+r+" dimensions at the moment"),y.splice(r));var u=e(g,d,{name:"dimensions",layout:m,handleItemDefaults:o}),A=s(g,d,c,m,l);T(d,m,l),(!Array.isArray(u)||!u.length)&&(d.visible=!1),v(d,u,"values",A);var _={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};x.coerceFont(l,"labelfont",_),x.coerceFont(l,"tickfont",_),x.coerceFont(l,"rangefont",_),l("labelangle"),l("labelside"),l("unselected.line.color"),l("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(t,B,G){var x=t("../../lib").isTypedArray;G.convertTypedArray=function(f){return x(f)?Array.prototype.slice.call(f):f},G.isOrdinal=function(f){return!!f.tickvals},G.isVisible=function(f){return f.visible||!("visible"in f)}},{"../../lib":515}],905:[function(t,B,G){var x=t("./base_index");x.plot=t("./plot"),B.exports=x},{"./base_index":899,"./plot":909}],906:[function(t,B,G){var x=t("glslify"),f=x([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),M=x([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=t("./constants").maxDimensionCount,e=t("../../lib"),a=1e-6,i=2048,n=new Uint8Array(4),r=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(h){h.read({x:0,y:0,width:1,height:1,data:n})}function o(h,L,E,S,P){var F=h._gl;F.enable(F.SCISSOR_TEST),F.scissor(L,E,S,P),h.clear({color:[0,0,0,0],depth:1})}function b(h,L,E,S,P,F){var I=F.key;function D(R){var O=Math.min(S,P-R*S);R===0&&(window.cancelAnimationFrame(E.currentRafs[I]),delete E.currentRafs[I],o(h,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!E.clearOnly&&(F.count=2*O,F.offset=2*R*S,L(F),R*S+O<P&&(E.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),E.drawCompleted=!1)}E.drawCompleted||(s(h),E.drawCompleted=!0),D(0)}function g(h){return Math.max(a,Math.min(1-a,h))}function d(h,L){for(var E=new Array(256),S=0;S<256;S++)E[S]=h(S/255).concat(L);return E}function c(h,L){return(h>>>8*L)%256/255}function m(h,L,E){for(var S=new Array(h*(T+4)),P=0,F=0;F<h;F++){for(var I=0;I<T;I++)S[P++]=I<L.length?L[I].paddedUnitValues[F]:.5;S[P++]=c(F,2),S[P++]=c(F,1),S[P++]=c(F,0),S[P++]=g(E[F])}return S}function l(h,L,E){for(var S=new Array(L*8),P=0,F=0;F<L;F++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=h*4+D,O=E[F*64+R];R===63&&I===0&&(O*=-1),S[P++]=O}return S}function y(h){var L="0"+h;return L.substr(L.length-2)}function u(h){return h<T?"p"+y(h+1)+"_"+y(h+4):"colors"}function A(h,L,E){for(var S=0;S<=T;S+=4)h[u(S)](l(S/4,L,E))}function _(h){for(var L={},E=0;E<=T;E+=4)L[u(E)]=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function p(h,L,E,S,P,F,I,D,R,O,z,H,Y,ee){for(var j=[[],[]],X=0;X<64;X++)j[0][X]=X===P?1:0,j[1][X]=X===F?1:0;I*=ee,D*=ee,R*=ee,O*=ee;var ae=h.lines.canvasOverdrag*ee,fe=h.domain,K=h.canvasWidth*ee,J=h.canvasHeight*ee,U=h.pad.l*ee,V=h.pad.b*ee,q=h.layoutHeight*ee,re=h.layoutWidth*ee,Z=h.deselectedLines.color,Q=h.deselectedLines.opacity,ie=e.extendFlat({key:z,resolution:[K,J],viewBoxPos:[I+ae,D],viewBoxSize:[R,O],i0:P,i1:F,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:H,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,Q!=="auto"?Z[3]*Q:Math.max(1/255,Math.pow(1/h.lines.color.length,1/3))],scissorX:(S===L?0:I+ae)+(U-ae)+re*fe.x[0],scissorWidth:(S===E?K-I+ae:R+.5)+(S===L?I+ae:0),scissorY:D+V+q*fe.y[0],scissorHeight:O,viewportX:U-ae+re*fe.x[0],viewportY:V+q*fe.y[0],viewportWidth:K,viewportHeight:J},Y);return ie}function w(h){var L=i-1,E=Math.max(0,Math.floor(h[0]*L),0),S=Math.min(L,Math.ceil(h[1]*L),L);return[Math.min(E,S),Math.max(E,S)]}B.exports=function(h,L){var E=L.context,S=L.pick,P=L.regl,F=P._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,z,H,Y,ee=_(P),j,X=P.texture(v),ae=[];K(L);var fe=P({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:f,frag:M,primitive:"lines",lineWidth:D,attributes:ee,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:X,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function K(Z){O=Z.model,z=Z.viewModel,H=z.dimensions.slice(),Y=H[0]?H[0].values.length:0;var Q=O.lines,ie=S?Q.color.map(function(ne,se){return se/Q.color.length}):Q.color,oe=m(Y,H,ie);A(ee,Y,oe),!E&&!S&&(X=P.texture(e.extendFlat({data:d(O.unitToColor,255)},v)))}function J(Z){var Q,ie,oe,ne=[[],[]];for(oe=0;oe<64;oe++){var se=!Z&&oe<H.length?H[oe].brush.filter.getBounds():[-1/0,1/0];ne[0][oe]=se[0],ne[1][oe]=se[1]}var _e=i*8,ue=new Array(_e);for(Q=0;Q<_e;Q++)ue[Q]=255;if(!Z)for(Q=0;Q<H.length;Q++){var ge=Q%8,xe=(Q-ge)/8,ye=Math.pow(2,ge),be=H[Q],Se=be.brush.filter.get();if(!(Se.length<2)){var Re=w(Se[0])[1];for(ie=1;ie<Se.length;ie++){var Ve=w(Se[ie]);for(oe=Re+1;oe<Ve[0];oe++)ue[oe*8+xe]&=~ye;Re=Math.max(Re,Ve[1])}}}var Ae={shape:[8,i],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ue};return j?j(Ae):j=P.texture(Ae),{maskTexture:j,maskHeight:i,loA:ne[0].slice(0,16),loB:ne[0].slice(16,32),loC:ne[0].slice(32,48),loD:ne[0].slice(48,64),hiA:ne[1].slice(0,16),hiB:ne[1].slice(16,32),hiC:ne[1].slice(32,48),hiD:ne[1].slice(48,64)}}function U(Z,Q,ie){var oe=Z.length,ne,se,_e,ue=1/0,ge=-1/0;for(ne=0;ne<oe;ne++)Z[ne].dim0.canvasX<ue&&(ue=Z[ne].dim0.canvasX,se=ne),Z[ne].dim1.canvasX>ge&&(ge=Z[ne].dim1.canvasX,_e=ne);oe===0&&o(P,0,0,O.canvasWidth,O.canvasHeight);var xe=J(E);for(ne=0;ne<oe;ne++){var ye=Z[ne],be=ye.dim0.crossfilterDimensionIndex,Se=ye.dim1.crossfilterDimensionIndex,Re=ye.canvasX,Ve=ye.canvasY,Ae=Re+ye.panelSizeX,Ce=ye.plotGlPixelRatio;if(Q||!ae[be]||ae[be][0]!==Re||ae[be][1]!==Ae){ae[be]=[Re,Ae];var Ze=p(O,se,_e,ne,be,Se,Re,Ve,ye.panelSizeX,ye.panelSizeY,ye.dim0.crossfilterDimensionIndex,E?0:S?2:1,xe,Ce);R.clearOnly=ie;var Ye=Q?O.lines.blockLineCount:Y;b(P,fe,R,Ye,Y,Ze)}}}function V(Z,Q){return P.read({x:Z,y:Q,width:1,height:1,data:r}),r}function q(Z,Q,ie,oe){var ne=new Uint8Array(4*ie*oe);return P.read({x:Z,y:Q,width:ie,height:oe,data:ne}),ne}function re(){h.style["pointer-events"]="none",X.destroy(),j&&j.destroy();for(var Z in ee)ee[Z].destroy()}return{render:U,readPixel:V,readPixels:q,destroy:re,update:K}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(t,B,G){B.exports=function(x,f,M,T){T||(T=1/0);var e,a;for(e=0;e<f.length;e++)a=f[e],a.visible&&(T=Math.min(T,a[M].length));for(T===1/0&&(T=0),x._length=T,e=0;e<f.length;e++)a=f[e],a.visible&&(a._length=T);return T}},{}],908:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=f.numberFormat,T=t("color-rgba"),e=t("../../plots/cartesian/axes"),a=f.strRotate,i=f.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/drawing"),v=t("../../components/colorscale"),s=t("../../lib/gup"),o=s.keyFun,b=s.repeat,g=s.unwrap,d=t("./helpers"),c=t("./constants"),m=t("./axisbrush"),l=t("./lines");function y(j,X,ae){return f.aggNums(j,null,X,ae)}function u(j,X){return _(y(Math.min,j,X),y(Math.max,j,X))}function A(j){var X=j.range;return X?_(X[0],X[1]):u(j.values,j._length)}function _(j,X){return(isNaN(j)||!isFinite(j))&&(j=0),(isNaN(X)||!isFinite(X))&&(X=0),j===X&&(j===0?(j-=1,X+=1):(j*=.9,X*=1.1)),[j,X]}function p(j,X){return X?function(ae,fe){var K=X[fe];return K==null?j(ae):K}:j}function w(j,X,ae,fe,K){var J=A(ae);return fe?x.scale.ordinal().domain(fe.map(p(M(ae.tickformat),K))).range(fe.map(function(U){var V=(U-J[0])/(J[1]-J[0]);return j-X+V*(2*X-j)})):x.scale.linear().domain(J).range([j-X,X])}function h(j,X){return x.scale.linear().range([X,j-X])}function L(j,X){return x.scale.linear().domain(A(j)).range([X,1-X])}function E(j){if(!!j.tickvals){var X=A(j);return x.scale.ordinal().domain(j.tickvals).range(j.tickvals.map(function(ae){return(ae-X[0])/(X[1]-X[0])}))}}function S(j){var X=j.map(function(J){return J[0]}),ae=j.map(function(J){var U=T(J[1]);return x.rgb("rgb("+U[0]+","+U[1]+","+U[2]+")")}),fe=function(J){return function(U){return U[J]}},K="rgb".split("").map(function(J){return x.scale.linear().clamp(!0).domain(X).range(ae.map(fe(J)))});return function(J){return K.map(function(U){return U(J)})}}function P(j){return j.dimensions.some(function(X){return X.brush.filterSpecified})}function F(j,X,ae){var fe=g(X),K=fe.trace,J=d.convertTypedArray(fe.lineColor),U=K.line,V={color:T(K.unselected.line.color),opacity:K.unselected.line.opacity},q=v.extractOpts(U),re=q.reversescale?v.flipScale(fe.cscale):fe.cscale,Z=K.domain,Q=K.dimensions,ie=j.width,oe=K.labelangle,ne=K.labelside,se=K.labelfont,_e=K.tickfont,ue=K.rangefont,ge=f.extendDeepNoArrays({},U,{color:J.map(x.scale.linear().domain(A({values:J,range:[q.min,q.max],_length:K._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),xe=Math.floor(ie*(Z.x[1]-Z.x[0])),ye=Math.floor(j.height*(Z.y[1]-Z.y[0])),be=j.margin||{l:80,r:80,t:100,b:80},Se=xe,Re=ye;return{key:ae,colCount:Q.filter(d.isVisible).length,dimensions:Q,tickDistance:c.tickDistance,unitToColor:S(re),lines:ge,deselectedLines:V,labelAngle:oe,labelSide:ne,labelFont:se,tickFont:_e,rangeFont:ue,layoutWidth:ie,layoutHeight:j.height,domain:Z,translateX:Z.x[0]*ie,translateY:j.height-Z.y[1]*j.height,pad:be,canvasWidth:Se*c.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:Re*c.canvasPixelRatio,width:Se,height:Re,canvasPixelRatio:c.canvasPixelRatio}}function I(j,X,ae){var fe=ae.width,K=ae.height,J=ae.dimensions,U=ae.canvasPixelRatio,V=function(ie){return fe*ie/Math.max(1,ae.colCount-1)},q=c.verticalPadding/K,re=h(K,c.verticalPadding),Z={key:ae.key,xScale:V,model:ae,inBrushDrag:!1},Q={};return Z.dimensions=J.filter(d.isVisible).map(function(ie,oe){var ne=L(ie,q),se=Q[ie.label];Q[ie.label]=(se||0)+1;var _e=ie.label+(se?"__"+se:""),ue=ie.constraintrange,ge=ue&&ue.length;ge&&!Array.isArray(ue[0])&&(ue=[ue]);var xe=ge?ue.map(function(ze){return ze.map(ne)}):[[-1/0,1/0]],ye=function(){var ze=Z;ze.focusLayer&&ze.focusLayer.render(ze.panels,!0);var Ie=P(ze);!j.contextShown()&&Ie?(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0),j.contextShown(!0)):j.contextShown()&&!Ie&&(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0,!0),j.contextShown(!1))},be=ie.values;be.length>ie._length&&(be=be.slice(0,ie._length));var Se=ie.tickvals,Re;function Ve(ze,Ie){return{val:ze,text:Re[Ie]}}function Ae(ze,Ie){return ze.val-Ie.val}if(Array.isArray(Se)&&Se.length){Re=ie.ticktext,!Array.isArray(Re)||!Re.length?Re=Se.map(M(ie.tickformat)):Re.length>Se.length?Re=Re.slice(0,Se.length):Se.length>Re.length&&(Se=Se.slice(0,Re.length));for(var Ce=1;Ce<Se.length;Ce++)if(Se[Ce]<Se[Ce-1]){for(var Ze=Se.map(Ve).sort(Ae),Ye=0;Ye<Se.length;Ye++)Se[Ye]=Ze[Ye].val,Re[Ye]=Ze[Ye].text;break}}else Se=void 0;return be=d.convertTypedArray(be),{key:_e,label:ie.label,tickFormat:ie.tickformat,tickvals:Se,ticktext:Re,ordinal:d.isOrdinal(ie),multiselect:ie.multiselect,xIndex:oe,crossfilterDimensionIndex:oe,visibleIndex:ie._index,height:K,values:be,paddedUnitValues:be.map(ne),unitTickvals:Se&&Se.map(ne),xScale:V,x:V(oe),canvasX:V(oe)*U,unitToPaddedPx:re,domainScale:w(K,c.verticalPadding,ie,Se,Re),ordinalScale:E(ie),parent:Z,model:ae,brush:m.makeBrush(j,ge,xe,function(){j.linePickActive(!1)},ye,function(ze){if(Z.focusLayer.render(Z.panels,!0),Z.pickLayer&&Z.pickLayer.render(Z.panels,!0),j.linePickActive(!0),X&&X.filterChanged){var Ie=ne.invert,Ge=ze.map(function(dt){return dt.map(Ie).sort(f.sorterAsc)}).sort(function(dt,Rt){return dt[0]-Rt[0]});X.filterChanged(Z.key,ie._index,Ge)}})}}),Z}function D(j){j.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var j=!0,X=!1;return{linePickActive:function(ae){return arguments.length?j=!!ae:j},contextShown:function(ae){return arguments.length?X=!!ae:X}}}function O(j,X){var ae=X==="top"?1:-1,fe=j*Math.PI/180,K=Math.sin(fe),J=Math.cos(fe);return{dir:ae,dx:K,dy:J,degrees:j}}function z(j,X,ae){for(var fe=X.panels||(X.panels=[]),K=j.data(),J=0;J<K.length-1;J++){var U=fe[J]||(fe[J]={}),V=K[J],q=K[J+1];U.dim0=V,U.dim1=q,U.canvasX=V.canvasX,U.panelSizeX=q.canvasX-V.canvasX,U.panelSizeY=X.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=ae}}function H(j){for(var X=0;X<j.length;X++)for(var ae=0;ae<j[X].length;ae++)for(var fe=j[X][ae].trace,K=fe.dimensions,J=0;J<K.length;J++){var U=K[J].values,V=K[J]._ax;V&&(V.range?V.range=_(V.range[0],V.range[1]):V.range=u(U,fe._length),V.dtick||(V.dtick=.01*(Math.abs(V.range[1]-V.range[0])||1)),V.tickformat=K[J].tickformat,e.calcTicks(V),V.cleanRange())}}function Y(j,X){return e.tickText(j._ax,X,!1).text}function ee(j,X){if(j.ordinal)return"";var ae=j.domainScale.domain(),fe=ae[X?ae.length-1:0];return Y(j.model.dimensions[j.visibleIndex],fe)}B.exports=function(X,ae,fe,K){var J=X._context.staticPlot,U=X._fullLayout,V=U._toppaper,q=U._glcontainer,re=X._context.plotGlPixelRatio,Z=X._fullLayout.paper_bgcolor;H(ae);var Q=R(),ie=ae.filter(function(Ye){return g(Ye).trace.visible}).map(F.bind(0,fe)).map(I.bind(0,Q,K));q.each(function(Ye,ze){return f.extendFlat(Ye,ie[ze])});var oe=q.selectAll(".gl-canvas").each(function(Ye){Ye.viewModel=ie[0],Ye.viewModel.plotGlPixelRatio=re,Ye.viewModel.paperColor=Z,Ye.model=Ye.viewModel?Ye.viewModel.model:null}),ne=null,se=oe.filter(function(Ye){return Ye.pick});se.style("pointer-events",J?"none":"auto").on("mousemove",function(Ye){if(Q.linePickActive()&&Ye.lineLayer&&K&&K.hover){var ze=x.event,Ie=this.width,Ge=this.height,dt=x.mouse(this),Rt=dt[0],Qt=dt[1];if(Rt<0||Qt<0||Rt>=Ie||Qt>=Ge)return;var Bt=Ye.lineLayer.readPixel(Rt,Ge-1-Qt),Ct=Bt[3]!==0,Kt=Ct?Bt[2]+256*(Bt[1]+256*Bt[0]):null,Ot={x:Rt,y:Qt,clientX:ze.clientX,clientY:ze.clientY,dataIndex:Ye.model.key,curveNumber:Kt};Kt!==ne&&(Ct?K.hover(Ot):K.unhover&&K.unhover(Ot),ne=Kt)}}),oe.style("opacity",function(Ye){return Ye.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var _e=V.selectAll("."+c.cn.parcoords).data(ie,o);_e.exit().remove(),_e.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),_e.attr("transform",function(Ye){return i(Ye.model.translateX,Ye.model.translateY)});var ue=_e.selectAll("."+c.cn.parcoordsControlView).data(b,o);ue.enter().append("g").classed(c.cn.parcoordsControlView,!0),ue.attr("transform",function(Ye){return i(Ye.model.pad.l,Ye.model.pad.t)});var ge=ue.selectAll("."+c.cn.yAxis).data(function(Ye){return Ye.dimensions},o);ge.enter().append("g").classed(c.cn.yAxis,!0),ue.each(function(Ye){z(ge,Ye,re)}),oe.each(function(Ye){if(Ye.viewModel){!Ye.lineLayer||K?Ye.lineLayer=l(this,Ye):Ye.lineLayer.update(Ye),(Ye.key||Ye.key===0)&&(Ye.viewModel[Ye.key]=Ye.lineLayer);var ze=!Ye.context||K;Ye.lineLayer.render(Ye.viewModel.panels,ze)}}),ge.attr("transform",function(Ye){return i(Ye.xScale(Ye.xIndex),0)}),ge.call(x.behavior.drag().origin(function(Ye){return Ye}).on("drag",function(Ye){var ze=Ye.parent;Q.linePickActive(!1),Ye.x=Math.max(-c.overdrag,Math.min(Ye.model.width+c.overdrag,x.event.x)),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,ge.sort(function(Ie,Ge){return Ie.x-Ge.x}).each(function(Ie,Ge){Ie.xIndex=Ge,Ie.x=Ye===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),z(ge,ze,re),ge.filter(function(Ie){return Math.abs(Ye.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return i(Ie.xScale(Ie.xIndex),0)}),x.select(this).attr("transform",i(Ye.x,0)),ge.each(function(Ie,Ge,dt){dt===Ye.parent.key&&(ze.dimensions[Ge]=Ie)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer.render&&ze.focusLayer.render(ze.panels)}).on("dragend",function(Ye){var ze=Ye.parent;Ye.x=Ye.xScale(Ye.xIndex),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,z(ge,ze,re),x.select(this).attr("transform",function(Ie){return i(Ie.x,0)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer&&ze.focusLayer.render(ze.panels),ze.pickLayer&&ze.pickLayer.render(ze.panels,!0),Q.linePickActive(!0),K&&K.axesMoved&&K.axesMoved(ze.key,ze.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),ge.exit().remove();var xe=ge.selectAll("."+c.cn.axisOverlays).data(b,o);xe.enter().append("g").classed(c.cn.axisOverlays,!0),xe.selectAll("."+c.cn.axis).remove();var ye=xe.selectAll("."+c.cn.axis).data(b,o);ye.enter().append("g").classed(c.cn.axis,!0),ye.each(function(Ye){var ze=Ye.model.height/Ye.model.tickDistance,Ie=Ye.domainScale,Ge=Ie.domain();x.select(this).call(x.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ze,Ye.tickFormat).tickValues(Ye.ordinal?Ge:null).tickFormat(function(dt){return d.isOrdinal(Ye)?dt:Y(Ye.model.dimensions[Ye.visibleIndex],dt)}).scale(Ie)),r.font(ye.selectAll("text"),Ye.model.tickFont)}),ye.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ye.selectAll("text").style("text-shadow",n.makeTextShadow(Z)).style("cursor","default");var be=xe.selectAll("."+c.cn.axisHeading).data(b,o);be.enter().append("g").classed(c.cn.axisHeading,!0);var Se=be.selectAll("."+c.cn.axisTitle).data(b,o);Se.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",J?"none":"auto"),Se.text(function(Ye){return Ye.label}).each(function(Ye){var ze=x.select(this);r.font(ze,Ye.model.labelFont),n.convertToTspans(ze,X)}).attr("transform",function(Ye){var ze=O(Ye.model.labelAngle,Ye.model.labelSide),Ie=c.axisTitleOffset;return(ze.dir>0?"":i(0,2*Ie+Ye.model.height))+a(ze.degrees)+i(-Ie*ze.dx,-Ie*ze.dy)}).attr("text-anchor",function(Ye){var ze=O(Ye.model.labelAngle,Ye.model.labelSide),Ie=Math.abs(ze.dx),Ge=Math.abs(ze.dy);return 2*Ie>Ge?ze.dir*ze.dx<0?"start":"end":"middle"});var Re=xe.selectAll("."+c.cn.axisExtent).data(b,o);Re.enter().append("g").classed(c.cn.axisExtent,!0);var Ve=Re.selectAll("."+c.cn.axisExtentTop).data(b,o);Ve.enter().append("g").classed(c.cn.axisExtentTop,!0),Ve.attr("transform",i(0,-c.axisExtentOffset));var Ae=Ve.selectAll("."+c.cn.axisExtentTopText).data(b,o);Ae.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(D),Ae.text(function(Ye){return ee(Ye,!0)}).each(function(Ye){r.font(x.select(this),Ye.model.rangeFont)});var Ce=Re.selectAll("."+c.cn.axisExtentBottom).data(b,o);Ce.enter().append("g").classed(c.cn.axisExtentBottom,!0),Ce.attr("transform",function(Ye){return i(0,Ye.model.height+c.axisExtentOffset)});var Ze=Ce.selectAll("."+c.cn.axisExtentBottomText).data(b,o);Ze.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ze.text(function(Ye){return ee(Ye,!1)}).each(function(Ye){r.font(x.select(this),Ye.model.rangeFont)}),m.ensureAxisBrush(xe,Z,X)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(t,B,i){var x=t("./parcoords"),f=t("../../lib/prepare_regl"),M=t("./helpers").isVisible,T={};function e(n,r,v){var s=r.indexOf(v),o=n.indexOf(s);return o===-1&&(o+=r.length),o}function a(n,r){return function(s,o){return e(n,r,s)-e(n,r,o)}}var i=B.exports=function(r,v){var s=r._fullLayout,o=f(r,[],T);if(!!o){var b={},g={},d={},c={},m=s._size;v.forEach(function(_,p){var w=_[0].trace;d[p]=w.index;var h=c[p]=w._fullInput.index;b[p]=r.data[h].dimensions,g[p]=r.data[h].dimensions.slice()});var l=function(_,p,w){var h=g[_][p],L=w.map(function(D){return D.slice()}),E="dimensions["+p+"].constraintrange",S=s._tracePreGUI[r._fullData[d[_]]._fullInput.uid];if(S[E]===void 0){var P=h.constraintrange;S[E]=P||null}var F=r._fullData[d[_]].dimensions[p];L.length?(L.length===1&&(L=L[0]),h.constraintrange=L,F.constraintrange=L.slice(),L=[L]):(delete h.constraintrange,delete F.constraintrange,L=null);var I={};I[E]=L,r.emit("plotly_restyle",[I,[c[_]]])},y=function(_){r.emit("plotly_hover",_)},u=function(_){r.emit("plotly_unhover",_)},A=function(_,p){var w=a(p,g[_].filter(M));b[_].sort(w),g[_].filter(function(h){return!M(h)}).sort(function(h){return g[_].indexOf(h)}).forEach(function(h){b[_].splice(b[_].indexOf(h),1),b[_].splice(g[_].indexOf(h),0,h)}),r.emit("plotly_restyle",[{dimensions:[b[_]]},[c[_]]])};x(r,v,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{filterChanged:l,hover:y,unhover:u,axesMoved:A})}};i.reglPrecompiled=T},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(t,B,G){var x=t("../../plots/attributes"),f=t("../../plots/domain").attributes,M=t("../../plots/font_attributes"),T=t("../../components/color/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../lib/extend").extendFlat,n=M({editType:"plot",arrayOk:!0,colorEditType:"plot"});B.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},x.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:f({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(t,B,G){var x=t("../../plots/plots");G.name="pie",G.plot=function(f,M,T,e){x.plotBasePlot(G.name,f,M,T,e)},G.clean=function(f,M,T,e){x.cleanBasePlot(G.name,f,M,T,e)}},{"../../plots/plots":628}],912:[function(t,B,G){var x=t("fast-isnumeric"),f=t("tinycolor2"),M=t("../../components/color"),T={};function e(r,v){var s=[],o=r._fullLayout,b=o.hiddenlabels||[],g=v.labels,d=v.marker.colors||[],c=v.values,m=v._length,l=v._hasValues&&m,y,u;if(v.dlabel)for(g=new Array(m),y=0;y<m;y++)g[y]=String(v.label0+y*v.dlabel);var A={},_=a(o["_"+v.type+"colormap"]),p=0,w=!1;for(y=0;y<m;y++){var h,L,E;if(l){if(h=c[y],!x(h))continue;h=+h}else h=1;L=g[y],(L===void 0||L==="")&&(L=y),L=String(L);var S=A[L];S===void 0?(A[L]=s.length,E=b.indexOf(L)!==-1,E||(p+=h),s.push({v:h,label:L,color:_(d[y],L),i:y,pts:[y],hidden:E})):(w=!0,u=s[S],u.v+=h,u.pts.push(y),u.hidden||(p+=h),u.color===!1&&d[y]&&(u.color=_(d[y],L)))}s=s.filter(function(F){return F.v>=0});var P=v.type==="funnelarea"?w:v.sort;return P&&s.sort(function(F,I){return I.v-F.v}),s[0]&&(s[0].vTotal=p),s}function a(r){return function(s,o){return!s||(s=f(s),!s.isValid())?!1:(s=M.addOpacity(s,s.getAlpha()),r[o]||(r[o]=s),s)}}function i(r,v){var s=(v||{}).type;s||(s="pie");var o=r._fullLayout,b=r.calcdata,g=o[s+"colorway"],d=o["_"+s+"colormap"];o["extend"+s+"colors"]&&(g=n(g,T));for(var c=0,m=0;m<b.length;m++){var l=b[m],y=l[0].trace.type;if(y===s)for(var u=0;u<l.length;u++){var A=l[u];A.color===!1&&(d[A.label]?A.color=d[A.label]:(d[A.label]=A.color=g[c%g.length],c++))}}}function n(r,v){var s,o=JSON.stringify(r),b=v[o];if(!b){for(b=r.slice(),s=0;s<r.length;s++)b.push(f(r[s]).lighten(20).toHexString());for(s=0;s<r.length;s++)b.push(f(r[s]).darken(20).toHexString());v[o]=b}return b}B.exports={calc:e,crossTraceCalc:i,makePullColorFn:a,generateExtendedColors:n}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("./attributes"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText;function a(n,r){var v=Array.isArray(n),s=f.isArrayOrTypedArray(r),o=Math.min(v?n.length:1/0,s?r.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var b,g=0;g<o;g++){var d=r[g];if(x(d)&&d>0){b=!0;break}}b||(o=0)}return{hasLabels:v,hasValues:s,len:o}}function i(n,r,v,s){function o(E,S){return f.coerce(n,r,M,E,S)}var b=o("labels"),g=o("values"),d=a(b,g),c=d.len;if(r._hasLabels=d.hasLabels,r._hasValues=d.hasValues,!r._hasLabels&&r._hasValues&&(o("label0"),o("dlabel")),!c){r.visible=!1;return}r._length=c;var m=o("marker.line.width");m&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var l=o("text"),y=o("texttemplate"),u;if(y||(u=o("textinfo",Array.isArray(l)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),y||u&&u!=="none"){var A=o("textposition");e(n,r,s,o,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(A)||A==="auto",p=_||A==="outside";p&&o("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&o("insidetextorientation")}T(r,s,o);var w=o("hole"),h=o("title.text");if(h){var L=o("title.position",w?"middle center":"top center");!w&&L==="middle center"&&(r.title.position="top center"),f.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}B.exports={handleLabelsAndValues:a,supplyDefaults:i}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(t,B,G){var x=t("../../components/fx/helpers").appendArrayMultiPointValues;B.exports=function(M,T){var e={curveNumber:T.index,pointNumbers:M.pts,data:T._input,fullData:T,label:M.label,color:M.color,value:M.v,percent:M.percent,text:M.text,bbox:M.bbox,v:M.v};return M.pts.length===1&&(e.pointNumber=e.i=M.pts[0]),x(e,T,M.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":403}],915:[function(t,B,G){var x=t("../../lib");function f(M){return M.indexOf("e")!==-1?M.replace(/[.]?0+e/,"e"):M.indexOf(".")!==-1?M.replace(/[.]?0+$/,""):M}G.formatPiePercent=function(T,e){var a=f((T*100).toPrecision(3));return x.numSeparate(a,e)+"%"},G.formatPieValue=function(T,e){var a=f(T.toPrecision(10));return x.numSeparate(a,e)},G.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var i=T[e[a]];if(i||i===0||i==="")return i}},G.castOption=function(T,e){if(Array.isArray(T))return G.getFirstFilled(T,e);if(T)return T},G.getRotationAngle=function(M){return(M==="auto"?0:M)*Math.PI/180}},{"../../lib":515}],916:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(t,B,G){B.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return x.coerce(T,e,f,i,n)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../plots/plots"),M=t("../../components/fx"),T=t("../../components/color"),e=t("../../components/drawing"),a=t("../../lib"),i=a.strScale,n=a.strTranslate,r=t("../../lib/svg_text_utils"),v=t("../bar/uniform_text"),s=v.recordMinTextSize,o=v.clearMinTextSize,b=t("../bar/constants").TEXTPAD,g=t("./helpers"),d=t("./event_data"),c=t("../../lib").isValidTextValue;function m(J,U){var V=J._context.staticPlot,q=J._fullLayout,re=q._size;o("pie",q),_(U,J),ee(U,re);var Z=a.makeTraceGroups(q._pielayer,U,"trace").each(function(Q){var ie=x.select(this),oe=Q[0],ne=oe.trace;X(Q),ie.attr("stroke-linejoin","round"),ie.each(function(){var se=x.select(this).selectAll("g.slice").data(Q);se.enter().append("g").classed("slice",!0),se.exit().remove();var _e=[[[],[]],[[],[]]],ue=!1;se.each(function(Ae,Ce){if(Ae.hidden){x.select(this).selectAll("path,g").remove();return}Ae.pointNumber=Ae.i,Ae.curveNumber=ne.index,_e[Ae.pxmid[1]<0?0:1][Ae.pxmid[0]<0?0:1].push(Ae);var Ze=oe.cx,Ye=oe.cy,ze=x.select(this),Ie=ze.selectAll("path.surface").data([Ae]);if(Ie.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),ze.call(y,J,Q),ne.pull){var Ge=+g.castOption(ne.pull,Ae.pts)||0;Ge>0&&(Ze+=Ge*Ae.pxmid[0],Ye+=Ge*Ae.pxmid[1])}Ae.cxFinal=Ze,Ae.cyFinal=Ye;function dt(St,Xe,at,We){var Ee=We*(Xe[0]-St[0]),He=We*(Xe[1]-St[1]);return"a"+We*oe.r+","+We*oe.r+" 0 "+Ae.largeArc+(at?" 1 ":" 0 ")+Ee+","+He}var Rt=ne.hole;if(Ae.v===oe.vTotal){var Qt="M"+(Ze+Ae.px0[0])+","+(Ye+Ae.px0[1])+dt(Ae.px0,Ae.pxmid,!0,1)+dt(Ae.pxmid,Ae.px0,!0,1)+"Z";Rt?Ie.attr("d","M"+(Ze+Rt*Ae.px0[0])+","+(Ye+Rt*Ae.px0[1])+dt(Ae.px0,Ae.pxmid,!1,Rt)+dt(Ae.pxmid,Ae.px0,!1,Rt)+"Z"+Qt):Ie.attr("d",Qt)}else{var Bt=dt(Ae.px0,Ae.px1,!0,1);if(Rt){var Ct=1-Rt;Ie.attr("d","M"+(Ze+Rt*Ae.px1[0])+","+(Ye+Rt*Ae.px1[1])+dt(Ae.px1,Ae.px0,!1,Rt)+"l"+Ct*Ae.px0[0]+","+Ct*Ae.px0[1]+Bt+"Z")}else Ie.attr("d","M"+Ze+","+Ye+"l"+Ae.px0[0]+","+Ae.px0[1]+Bt+"Z")}fe(J,Ae,oe);var Kt=g.castOption(ne.textposition,Ae.pts),Ot=ze.selectAll("g.slicetext").data(Ae.text&&Kt!=="none"?[0]:[]);Ot.enter().append("g").classed("slicetext",!0),Ot.exit().remove(),Ot.each(function(){var St=a.ensureSingle(x.select(this),"text","",function(At){At.attr("data-notex",1)}),Xe=a.ensureUniformFontSize(J,Kt==="outside"?u(ne,Ae,q.font):A(ne,Ae,q.font));St.text(Ae.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Xe).call(r.convertToTspans,J);var at=e.bBox(St.node()),We;if(Kt==="outside")We=I(at,Ae);else if(We=p(at,Ae,oe),Kt==="auto"&&We.scale<1){var Ee=a.ensureUniformFontSize(J,ne.outsidetextfont);St.call(e.font,Ee),at=e.bBox(St.node()),We=I(at,Ae)}var He=We.textPosAngle,Ke=He===void 0?Ae.pxmid:ae(oe.r,He);if(We.targetX=Ze+Ke[0]*We.rCenter+(We.x||0),We.targetY=Ye+Ke[1]*We.rCenter+(We.y||0),K(We,at),We.outside){var et=We.targetY;Ae.yLabelMin=et-at.height/2,Ae.yLabelMid=et,Ae.yLabelMax=et+at.height/2,Ae.labelExtraX=0,Ae.labelExtraY=0,ue=!0}We.fontSize=Xe.size,s(ne.type,We,q),Q[Ce].transform=We,a.setTransormAndDisplay(St,We)})});var ge=x.select(this).selectAll("g.titletext").data(ne.title.text?[0]:[]);if(ge.enter().append("g").classed("titletext",!0),ge.exit().remove(),ge.each(function(){var Ae=a.ensureSingle(x.select(this),"text","",function(Ye){Ye.attr("data-notex",1)}),Ce=ne.title.text;ne._meta&&(Ce=a.templateString(Ce,ne._meta)),Ae.text(Ce).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ne.title.font).call(r.convertToTspans,J);var Ze;ne.title.position==="middle center"?Ze=D(oe):Ze=R(oe,re),Ae.attr("transform",n(Ze.x,Ze.y)+i(Math.min(1,Ze.scale))+n(Ze.tx,Ze.ty))}),ue&&Y(_e,ne),l(se,ne),ue&&ne.automargin){var xe=e.bBox(ie.node()),ye=ne.domain,be=re.w*(ye.x[1]-ye.x[0]),Se=re.h*(ye.y[1]-ye.y[0]),Re=(.5*be-oe.r)/re.w,Ve=(.5*Se-oe.r)/re.h;f.autoMargin(J,"pie."+ne.uid+".automargin",{xl:ye.x[0]-Re,xr:ye.x[1]+Re,yb:ye.y[0]-Ve,yt:ye.y[1]+Ve,l:Math.max(oe.cx-oe.r-xe.left,0),r:Math.max(xe.right-(oe.cx+oe.r),0),b:Math.max(xe.bottom-(oe.cy+oe.r),0),t:Math.max(oe.cy-oe.r-xe.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var Q=x.select(this);Q.attr("dy")&&Q.attr("dy",Q.attr("dy"))})},0)}function l(J,U){J.each(function(V){var q=x.select(this);if(!V.labelExtraX&&!V.labelExtraY){q.select("path.textline").remove();return}var re=q.select("g.slicetext text");V.transform.targetX+=V.labelExtraX,V.transform.targetY+=V.labelExtraY,a.setTransormAndDisplay(re,V.transform);var Z=V.cxFinal+V.pxmid[0],Q=V.cyFinal+V.pxmid[1],ie="M"+Z+","+Q,oe=(V.yLabelMax-V.yLabelMin)*(V.pxmid[0]<0?-1:1)/4;if(V.labelExtraX){var ne=V.labelExtraX*V.pxmid[1]/V.pxmid[0],se=V.yLabelMid+V.labelExtraY-(V.cyFinal+V.pxmid[1]);Math.abs(ne)>Math.abs(se)?ie+="l"+se*V.pxmid[0]/V.pxmid[1]+","+se+"H"+(Z+V.labelExtraX+oe):ie+="l"+V.labelExtraX+","+ne+"v"+(se-ne)+"h"+oe}else ie+="V"+(V.yLabelMid+V.labelExtraY)+"h"+oe;a.ensureSingle(q,"path","textline").call(T.stroke,U.outsidetextfont.color).attr({"stroke-width":Math.min(2,U.outsidetextfont.size/8),d:ie,fill:"none"})})}function y(J,U,V){var q=V[0],re=q.cx,Z=q.cy,Q=q.trace,ie=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),J.on("mouseover",function(oe){var ne=U._fullLayout,se=U._fullData[Q.index];if(!(U._dragging||ne.hovermode===!1)){var _e=se.hoverinfo;if(Array.isArray(_e)&&(_e=M.castHoverinfo({hoverinfo:[g.castOption(_e,oe.pts)],_module:Q._module},ne,0)),_e==="all"&&(_e="label+text+value+percent+name"),se.hovertemplate||_e!=="none"&&_e!=="skip"&&_e){var ue=oe.rInscribed||0,ge=re+oe.pxmid[0]*(1-ue),xe=Z+oe.pxmid[1]*(1-ue),ye=ne.separators,be=[];if(_e&&_e.indexOf("label")!==-1&&be.push(oe.label),oe.text=g.castOption(se.hovertext||se.text,oe.pts),_e&&_e.indexOf("text")!==-1){var Se=oe.text;a.isValidTextValue(Se)&&be.push(Se)}oe.value=oe.v,oe.valueLabel=g.formatPieValue(oe.v,ye),_e&&_e.indexOf("value")!==-1&&be.push(oe.valueLabel),oe.percent=oe.v/q.vTotal,oe.percentLabel=g.formatPiePercent(oe.percent,ye),_e&&_e.indexOf("percent")!==-1&&be.push(oe.percentLabel);var Re=se.hoverlabel,Ve=Re.font,Ae=[];M.loneHover({trace:Q,x0:ge-ue*q.r,x1:ge+ue*q.r,y:xe,_x0:ie?re+oe.TL[0]:ge-ue*q.r,_x1:ie?re+oe.TR[0]:ge+ue*q.r,_y0:ie?Z+oe.TL[1]:xe-ue*q.r,_y1:ie?Z+oe.BL[1]:xe+ue*q.r,text:be.join("<br>"),name:se.hovertemplate||_e.indexOf("name")!==-1?se.name:void 0,idealAlign:oe.pxmid[0]<0?"left":"right",color:g.castOption(Re.bgcolor,oe.pts)||oe.color,borderColor:g.castOption(Re.bordercolor,oe.pts),fontFamily:g.castOption(Ve.family,oe.pts),fontSize:g.castOption(Ve.size,oe.pts),fontColor:g.castOption(Ve.color,oe.pts),nameLength:g.castOption(Re.namelength,oe.pts),textAlign:g.castOption(Re.align,oe.pts),hovertemplate:g.castOption(se.hovertemplate,oe.pts),hovertemplateLabels:oe,eventData:[d(oe,se)]},{container:ne._hoverlayer.node(),outerContainer:ne._paper.node(),gd:U,inOut_bbox:Ae}),oe.bbox=Ae[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,U.emit("plotly_hover",{points:[d(oe,se)],event:x.event})}}),J.on("mouseout",function(oe){var ne=U._fullLayout,se=U._fullData[Q.index],_e=x.select(this).datum();Q._hasHoverEvent&&(oe.originalEvent=x.event,U.emit("plotly_unhover",{points:[d(_e,se)],event:x.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(M.loneUnhover(ne._hoverlayer.node()),Q._hasHoverLabel=!1)}),J.on("click",function(oe){var ne=U._fullLayout,se=U._fullData[Q.index];U._dragging||ne.hovermode===!1||(U._hoverdata=[d(oe,se)],M.click(U,x.event))})}function u(J,U,V){var q=g.castOption(J.outsidetextfont.color,U.pts)||g.castOption(J.textfont.color,U.pts)||V.color,re=g.castOption(J.outsidetextfont.family,U.pts)||g.castOption(J.textfont.family,U.pts)||V.family,Z=g.castOption(J.outsidetextfont.size,U.pts)||g.castOption(J.textfont.size,U.pts)||V.size;return{color:q,family:re,size:Z}}function A(J,U,V){var q=g.castOption(J.insidetextfont.color,U.pts);!q&&J._input.textfont&&(q=g.castOption(J._input.textfont.color,U.pts));var re=g.castOption(J.insidetextfont.family,U.pts)||g.castOption(J.textfont.family,U.pts)||V.family,Z=g.castOption(J.insidetextfont.size,U.pts)||g.castOption(J.textfont.size,U.pts)||V.size;return{color:q||T.contrast(U.color),family:re,size:Z}}function _(J,U){for(var V,q,re=0;re<J.length;re++)if(V=J[re][0],q=V.trace,q.title.text){var Z=q.title.text;q._meta&&(Z=a.templateString(Z,q._meta));var Q=e.tester.append("text").attr("data-notex",1).text(Z).call(e.font,q.title.font).call(r.convertToTspans,U),ie=e.bBox(Q.node(),!0);V.titleBox={width:ie.width,height:ie.height},Q.remove()}}function p(J,U,V){var q=V.r||U.rpx1,re=U.rInscribed,Z=U.startangle===U.stopangle;if(Z)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var Q=U.ring,ie=Q===1&&Math.abs(U.startangle-U.stopangle)===Math.PI*2,oe=U.halfangle,ne=U.midangle,se=V.trace.insidetextorientation,_e=se==="horizontal",ue=se==="tangential",ge=se==="radial",xe=se==="auto",ye=[],be;if(!xe){var Se=function(ze,Ie){if(w(U,ze)){var Ge=Math.abs(ze-U.startangle),dt=Math.abs(ze-U.stopangle),Rt=Ge<dt?Ge:dt;Ie==="tan"?be=L(J,q,Q,Rt,0):be=h(J,q,Q,Rt,Math.PI/2),be.textPosAngle=ze,ye.push(be)}},Re;if(_e||ue){for(Re=4;Re>=-4;Re-=2)Se(Math.PI*Re,"tan");for(Re=4;Re>=-4;Re-=2)Se(Math.PI*(Re+1),"tan")}if(_e||ge){for(Re=4;Re>=-4;Re-=2)Se(Math.PI*(Re+1.5),"rad");for(Re=4;Re>=-4;Re-=2)Se(Math.PI*(Re+.5),"rad")}}if(ie||xe||_e){var Ve=Math.sqrt(J.width*J.width+J.height*J.height);if(be={scale:re*q*2/Ve,rCenter:1-re,rotate:0},be.textPosAngle=(U.startangle+U.stopangle)/2,be.scale>=1)return be;ye.push(be)}(xe||ge)&&(be=h(J,q,Q,oe,ne),be.textPosAngle=(U.startangle+U.stopangle)/2,ye.push(be)),(xe||ue)&&(be=L(J,q,Q,oe,ne),be.textPosAngle=(U.startangle+U.stopangle)/2,ye.push(be));for(var Ae=0,Ce=0,Ze=0;Ze<ye.length;Ze++){var Ye=ye[Ze].scale;if(Ce<Ye&&(Ce=Ye,Ae=Ze),!xe&&Ce>=1)break}return ye[Ae]}function w(J,U){var V=J.startangle,q=J.stopangle;return V>U&&U>q||V<U&&U<q}function h(J,U,V,q,re){U=Math.max(0,U-2*b);var Z=J.width/J.height,Q=P(Z,q,U,V);return{scale:Q*2/J.height,rCenter:E(Z,Q/U),rotate:S(re)}}function L(J,U,V,q,re){U=Math.max(0,U-2*b);var Z=J.height/J.width,Q=P(Z,q,U,V);return{scale:Q*2/J.width,rCenter:E(Z,Q/U),rotate:S(re+Math.PI/2)}}function E(J,U){return Math.cos(U)-J*U}function S(J){return(180/Math.PI*J+720)%180-90}function P(J,U,V,q){var re=J+1/(2*Math.tan(U));return V*Math.min(1/(Math.sqrt(re*re+.5)+re),q/(Math.sqrt(J*J+q/2)+J))}function F(J,U){return J.v===U.vTotal&&!U.trace.hole?1:Math.min(1/(1+1/Math.sin(J.halfangle)),J.ring/2)}function I(J,U){var V=U.pxmid[0],q=U.pxmid[1],re=J.width/2,Z=J.height/2;return V<0&&(re*=-1),q<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(Z)*(re>0?1:-1)/2,y:Z/(1+V*V/(q*q)),outside:!0}}function D(J){var U=Math.sqrt(J.titleBox.width*J.titleBox.width+J.titleBox.height*J.titleBox.height);return{x:J.cx,y:J.cy,scale:J.trace.hole*J.r*2/U,tx:0,ty:-J.titleBox.height/2+J.trace.title.font.size}}function R(J,U){var V=1,q=1,re,Z=J.trace,Q={x:J.cx,y:J.cy},ie={tx:0,ty:0};ie.ty+=Z.title.font.size,re=H(Z),Z.title.position.indexOf("top")!==-1?(Q.y-=(1+re)*J.r,ie.ty-=J.titleBox.height):Z.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+re)*J.r);var oe=O(J.r,J.trace.aspectratio),ne=U.w*(Z.domain.x[1]-Z.domain.x[0])/2;return Z.title.position.indexOf("left")!==-1?(ne=ne+oe,Q.x-=(1+re)*oe,ie.tx+=J.titleBox.width/2):Z.title.position.indexOf("center")!==-1?ne*=2:Z.title.position.indexOf("right")!==-1&&(ne=ne+oe,Q.x+=(1+re)*oe,ie.tx-=J.titleBox.width/2),V=ne/J.titleBox.width,q=z(J,U)/J.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(V,q),tx:ie.tx,ty:ie.ty}}function O(J,U){return J/(U===void 0?1:U)}function z(J,U){var V=J.trace,q=U.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(J.titleBox.height,q/2)}function H(J){var U=J.pull;if(!U)return 0;var V;if(Array.isArray(U))for(U=0,V=0;V<J.pull.length;V++)J.pull[V]>U&&(U=J.pull[V]);return U}function Y(J,U){var V,q,re,Z,Q,ie,oe,ne,se,_e,ue,ge,xe;function ye(Ve,Ae){return Ve.pxmid[1]-Ae.pxmid[1]}function be(Ve,Ae){return Ae.pxmid[1]-Ve.pxmid[1]}function Se(Ve,Ae){Ae||(Ae={});var Ce=Ae.labelExtraY+(q?Ae.yLabelMax:Ae.yLabelMin),Ze=q?Ve.yLabelMin:Ve.yLabelMax,Ye=q?Ve.yLabelMax:Ve.yLabelMin,ze=Ve.cyFinal+Q(Ve.px0[1],Ve.px1[1]),Ie=Ce-Ze,Ge,dt,Rt,Qt,Bt,Ct;if(Ie*oe>0&&(Ve.labelExtraY=Ie),!!Array.isArray(U.pull))for(dt=0;dt<_e.length;dt++)Rt=_e[dt],!(Rt===Ve||(g.castOption(U.pull,Ve.pts)||0)>=(g.castOption(U.pull,Rt.pts)||0))&&((Ve.pxmid[1]-Rt.pxmid[1])*oe>0?(Qt=Rt.cyFinal+Q(Rt.px0[1],Rt.px1[1]),Ie=Qt-Ze-Ve.labelExtraY,Ie*oe>0&&(Ve.labelExtraY+=Ie)):(Ye+Ve.labelExtraY-ze)*oe>0&&(Ge=3*ie*Math.abs(dt-_e.indexOf(Ve)),Bt=Rt.cxFinal+Z(Rt.px0[0],Rt.px1[0]),Ct=Bt+Ge-(Ve.cxFinal+Ve.pxmid[0])-Ve.labelExtraX,Ct*ie>0&&(Ve.labelExtraX+=Ct)))}for(q=0;q<2;q++)for(re=q?ye:be,Q=q?Math.max:Math.min,oe=q?1:-1,V=0;V<2;V++){for(Z=V?Math.max:Math.min,ie=V?1:-1,ne=J[q][V],ne.sort(re),se=J[1-q][V],_e=se.concat(ne),ge=[],ue=0;ue<ne.length;ue++)ne[ue].yLabelMid!==void 0&&ge.push(ne[ue]);for(xe=!1,ue=0;q&&ue<se.length;ue++)if(se[ue].yLabelMid!==void 0){xe=se[ue];break}for(ue=0;ue<ge.length;ue++){var Re=ue&&ge[ue-1];xe&&!ue&&(Re=xe),Se(ge[ue],Re)}}}function ee(J,U){for(var V=[],q=0;q<J.length;q++){var re=J[q][0],Z=re.trace,Q=Z.domain,ie=U.w*(Q.x[1]-Q.x[0]),oe=U.h*(Q.y[1]-Q.y[0]);Z.title.text&&Z.title.position!=="middle center"&&(oe-=z(re,U));var ne=ie/2,se=oe/2;Z.type==="funnelarea"&&!Z.scalegroup&&(se/=Z.aspectratio),re.r=Math.min(ne,se)/(1+H(Z)),re.cx=U.l+U.w*(Z.domain.x[1]+Z.domain.x[0])/2,re.cy=U.t+U.h*(1-Z.domain.y[0])-oe/2,Z.title.text&&Z.title.position.indexOf("bottom")!==-1&&(re.cy-=z(re,U)),Z.scalegroup&&V.indexOf(Z.scalegroup)===-1&&V.push(Z.scalegroup)}j(J,V)}function j(J,U){for(var V,q,re,Z=0;Z<U.length;Z++){var Q=1/0,ie=U[Z];for(q=0;q<J.length;q++)if(V=J[q][0],re=V.trace,re.scalegroup===ie){var oe;if(re.type==="pie")oe=V.r*V.r;else if(re.type==="funnelarea"){var ne,se;re.aspectratio>1?(ne=V.r,se=ne/re.aspectratio):(se=V.r,ne=se*re.aspectratio),ne*=(1+re.baseratio)/2,oe=ne*se}Q=Math.min(Q,oe/V.vTotal)}for(q=0;q<J.length;q++)if(V=J[q][0],re=V.trace,re.scalegroup===ie){var _e=Q*V.vTotal;re.type==="funnelarea"&&(_e/=(1+re.baseratio)/2,_e/=re.aspectratio),V.r=Math.sqrt(_e)}}}function X(J){var U=J[0],V=U.r,q=U.trace,re=g.getRotationAngle(q.rotation),Z=2*Math.PI/U.vTotal,Q="px0",ie="px1",oe,ne,se;if(q.direction==="counterclockwise"){for(oe=0;oe<J.length&&J[oe].hidden;oe++);if(oe===J.length)return;re+=Z*J[oe].v,Z*=-1,Q="px1",ie="px0"}for(se=ae(V,re),oe=0;oe<J.length;oe++)ne=J[oe],!ne.hidden&&(ne[Q]=se,ne.startangle=re,re+=Z*ne.v/2,ne.pxmid=ae(V,re),ne.midangle=re,re+=Z*ne.v/2,se=ae(V,re),ne.stopangle=re,ne[ie]=se,ne.largeArc=ne.v>U.vTotal/2?1:0,ne.halfangle=Math.PI*Math.min(ne.v/U.vTotal,.5),ne.ring=1-q.hole,ne.rInscribed=F(ne,U))}function ae(J,U){return[J*Math.sin(U),-J*Math.cos(U)]}function fe(J,U,V){var q=J._fullLayout,re=V.trace,Z=re.texttemplate,Q=re.textinfo;if(!Z&&Q&&Q!=="none"){var ie=Q.split("+"),oe=function(Ae){return ie.indexOf(Ae)!==-1},ne=oe("label"),se=oe("text"),_e=oe("value"),ue=oe("percent"),ge=q.separators,xe;if(xe=ne?[U.label]:[],se){var ye=g.getFirstFilled(re.text,U.pts);c(ye)&&xe.push(ye)}_e&&xe.push(g.formatPieValue(U.v,ge)),ue&&xe.push(g.formatPiePercent(U.v/V.vTotal,ge)),U.text=xe.join("<br>")}function be(Ae){return{label:Ae.label,value:Ae.v,valueLabel:g.formatPieValue(Ae.v,q.separators),percent:Ae.v/V.vTotal,percentLabel:g.formatPiePercent(Ae.v/V.vTotal,q.separators),color:Ae.color,text:Ae.text,customdata:a.castOption(re,Ae.i,"customdata")}}if(Z){var Se=a.castOption(re,U.i,"texttemplate");if(!Se)U.text="";else{var Re=be(U),Ve=g.getFirstFilled(re.text,U.pts);(c(Ve)||Ve==="")&&(Re.text=Ve),U.text=a.texttemplateString(Se,Re,J._fullLayout._d3locale,Re,re._meta||{})}}}function K(J,U){var V=J.rotate*Math.PI/180,q=Math.cos(V),re=Math.sin(V),Z=(U.left+U.right)/2,Q=(U.top+U.bottom)/2;J.textX=Z*q-Q*re,J.textY=Z*re+Q*q,J.noCenter=!0}B.exports={plot:m,formatSliceLabel:fe,transformInsideText:p,determineInsideTextFont:A,positionTitleOutside:R,prerenderTitles:_,layoutAreas:ee,attachFxHandlers:y,computeTransform:K}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(t,B,G){var x=t("@plotly/d3"),f=t("./style_one"),M=t("../bar/uniform_text").resizeText;B.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");M(e,a,"pie"),a.each(function(i){var n=i[0],r=n.trace,v=x.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){x.select(this).call(f,s,r)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(t,B,G){var x=t("../../components/color"),f=t("./helpers").castOption;B.exports=function(T,e,a){var i=a.marker.line,n=f(i.color,e.pts)||x.defaultLine,r=f(i.width,e.pts)||0;T.style("stroke-width",r).call(x.fill,e.color).call(x.stroke,n)}},{"../../components/color":367,"./helpers":915}],922:[function(t,B,G){var x=t("../scatter/attributes");B.exports={x:x.x,y:x.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:x.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(t,B,G){var x=t("../../../stackgl_modules").gl_pointcloud2d,f=t("../../lib/str2rgbarray"),M=t("../../plots/cartesian/autorange").findExtremes,T=t("../scatter/get_trace_color");function e(n,r){this.scene=n,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=x(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(n){var r=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},a.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=T(n,{})},a.updateFast=function(n){var r=this.xData=this.pickXData=n.x,v=this.yData=this.pickYData=n.y,s=this.pickXYData=n.xy,o=n.xbounds&&n.ybounds,b=n.indices,g,d,c,m=this.bounds,l,y,u;if(s){if(c=s,g=s.length>>>1,o)m[0]=n.xbounds[0],m[2]=n.xbounds[1],m[1]=n.ybounds[0],m[3]=n.ybounds[1];else for(u=0;u<g;u++)l=c[u*2],y=c[u*2+1],l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),y<m[1]&&(m[1]=y),y>m[3]&&(m[3]=y);if(b)d=b;else for(d=new Int32Array(g),u=0;u<g;u++)d[u]=u}else for(g=r.length,c=new Float32Array(2*g),d=new Int32Array(g),u=0;u<g;u++)l=r[u],y=v[u],d[u]=u,c[u*2]=l,c[u*2+1]=y,l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),y<m[1]&&(m[1]=y),y>m[3]&&(m[3]=y);this.idToIndex=d,this.pointcloudOptions.idToIndex=d,this.pointcloudOptions.positions=c;var A=f(n.marker.color),_=f(n.marker.border.color),p=n.opacity*n.marker.opacity;A[3]*=p,this.pointcloudOptions.color=A;var w=n.marker.blend;if(w===null){var h=100;w=r.length<h||v.length<h}this.pointcloudOptions.blend=w,_[3]*=p,this.pointcloudOptions.borderColor=_;var L=n.marker.sizemin,E=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=E,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,P=this.scene.yaxis,F=E/2||.5;n._extremes[S._id]=M(S,[m[0],m[2]],{ppad:F}),n._extremes[P._id]=M(P,[m[1],m[3]],{ppad:F})},a.dispose=function(){this.pointcloud.dispose()};function i(n,r){var v=new e(n,r.uid);return v.update(r),v}B.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(t,B,G){var x=t("../../lib"),f=t("./attributes");B.exports=function(T,e,a){function i(n,r){return x.coerce(T,e,f,n,r)}i("x"),i("y"),i("xbounds"),i("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),e._length=null}},{"../../lib":515,"./attributes":922}],925:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../scatter3d/calc"),plot:t("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(t,B,G){var x=t("../../plots/font_attributes"),f=t("../../plots/attributes"),M=t("../../components/color/attributes"),T=t("../../components/fx/attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,v=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,o=B.exports=s({hoverinfo:v({},f.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:x({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(t,B,G){var x=t("../../plot_api/edit_types").overrideAll,f=t("../../plots/get_data").getModuleCalcData,M=t("./plot"),T=t("../../components/fx/layout_attributes"),e=t("../../lib/setcursor"),a=t("../../components/dragelement"),i=t("../../components/selections").prepSelect,n=t("../../lib"),r=t("../../registry"),v="sankey";G.name=v,G.baseLayoutAttrOverrides=x({hoverlabel:T.hoverlabel},"plot","nested"),G.plot=function(o){var b=f(o.calcdata,v)[0];M(o,b),G.updateFx(o)},G.clean=function(o,b,g,d){var c=d._has&&d._has(v),m=b._has&&b._has(v);c&&!m&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},G.updateFx=function(o){for(var b=0;b<o._fullData.length;b++)s(o,b)};function s(o,b){var g=o._fullData[b],d=o._fullLayout,c=d.dragmode,m=d.dragmode==="pan"?"move":"crosshair",l=g._bgRect;if(!!l&&!(c==="pan"||c==="zoom")){e(l,m);var y={_id:"x",c2p:n.identity,_offset:g._sankey.translateX,_length:g._sankey.width},u={_id:"y",c2p:n.identity,_offset:g._sankey.translateY,_length:g._sankey.height},A={gd:o,element:l.node(),plotinfo:{id:b,xaxis:y,yaxis:u,fillRangeItems:n.noop},subplot:b,xaxes:[y],yaxes:[u],doneFnCompleted:function(_){var p=o._fullData[b],w,h=p.node.groups.slice(),L=[];function E(I){for(var D=p._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var S=0;S<_.length;S++){var P=E(_[S].pointNumber);if(!!P)if(P.group){for(var F=0;F<P.childrenNodes.length;F++)L.push(P.childrenNodes[F].pointNumber);h[P.pointNumber-p.node._count]=!1}else L.push(P.pointNumber)}w=h.filter(Boolean).concat([L]),r.call("_guiRestyle",o,{"node.groups":[w]},b)}};A.prepFn=function(_,p,w){i(_,p,w,A,c)},a.init(A)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(t,B,G){var x=t("strongly-connected-components"),f=t("../../lib"),M=t("../../lib/gup").wrap,T=f.isArrayOrTypedArray,e=f.isIndex,a=t("../../components/colorscale");function i(r){var v=r.node,s=r.link,o=[],b=T(s.color),g=T(s.customdata),d={},c={},m=s.colorscales.length,l;for(l=0;l<m;l++){var y=s.colorscales[l],u=a.extractScale(y,{cLetter:"c"}),A=a.makeColorScaleFunc(u);c[y.label]=A}var _=0;for(l=0;l<s.value.length;l++)s.source[l]>_&&(_=s.source[l]),s.target[l]>_&&(_=s.target[l]);var p=_+1;r.node._count=p;var w,h=r.node.groups,L={};for(l=0;l<h.length;l++){var E=h[l];for(w=0;w<E.length;w++){var S=E[w],P=p+l;L.hasOwnProperty(S)?f.warn("Node "+S+" is already part of a group."):L[S]=P}}var F={source:[],target:[]};for(l=0;l<s.value.length;l++){var I=s.value[l],D=s.source[l],R=s.target[l];if(!!(I>0&&e(D,p)&&e(R,p))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,d[D]=d[R]=!0;var O="";s.label&&s.label[l]&&(O=s.label[l]);var z=null;O&&c.hasOwnProperty(O)&&(z=c[O]),o.push({pointNumber:l,label:O,color:b?s.color[l]:s.color,customdata:g?s.customdata[l]:s.customdata,concentrationscale:z,source:D,target:R,value:+I}),F.source.push(D),F.target.push(R)}}var H=p+h.length,Y=T(v.color),ee=T(v.customdata),j=[];for(l=0;l<H;l++)if(!!d[l]){var X=v.label[l];j.push({group:l>p-1,childrenNodes:[],pointNumber:l,label:X,color:Y?v.color[l]:v.color,customdata:ee?v.customdata[l]:v.customdata})}var ae=!1;return n(H,F.source,F.target)&&(ae=!0),{circular:ae,links:o,nodes:j,groups:h,groupLookup:L}}function n(r,v,s){for(var o=f.init2dArray(r,0),b=0;b<Math.min(v.length,s.length);b++)if(f.isIndex(v[b],r)&&f.isIndex(s[b],r)){if(v[b]===s[b])return!0;o[v[b]].push(s[b])}var g=x(o);return g.components.some(function(d){return d.length>1})}B.exports=function(v,s){var o=i(s);return M({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(t,B,G){B.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../components/color"),T=t("tinycolor2"),e=t("../../plots/domain").defaults,a=t("../../components/fx/hoverlabel_defaults"),i=t("../../plot_api/plot_template"),n=t("../../plots/array_container_defaults");B.exports=function(s,o,b,g){function d(E,S){return x.coerce(s,o,f,E,S)}var c=x.extendDeep(g.hoverlabel,s.hoverlabel),m=s.node,l=i.newContainer(o,"node");function y(E,S){return x.coerce(m,l,f.node,E,S)}y("label"),y("groups"),y("x"),y("y"),y("pad"),y("thickness"),y("line.color"),y("line.width"),y("hoverinfo",s.hoverinfo),a(m,l,y,c),y("hovertemplate");var u=g.colorway,A=function(E){return u[E%u.length]};y("color",l.label.map(function(E,S){return M.addOpacity(A(S),.8)})),y("customdata");var _=s.link||{},p=i.newContainer(o,"link");function w(E,S){return x.coerce(_,p,f.link,E,S)}w("label"),w("arrowlen"),w("source"),w("target"),w("value"),w("line.color"),w("line.width"),w("hoverinfo",s.hoverinfo),a(_,p,w,c),w("hovertemplate");var h=T(g.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",x.repeat(h,p.value.length)),w("customdata"),n(_,p,{name:"colorscales",handleItemDefaults:r}),e(o,g,d),d("orientation"),d("valueformat"),d("valuesuffix");var L;l.x.length&&l.y.length&&(L="freeform"),d("arrangement",L),x.coerceFont(d,"textfont",x.extendFlat({},g.font)),o._length=null};function r(v,s){function o(b,g){return x.coerce(v,s,f.link.colorscales,b,g)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"sankey",basePlotModule:t("./base_plot"),selectPoints:t("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=f.numberFormat,T=t("./render"),e=t("../../components/fx"),a=t("../../components/color"),i=t("./constants").cn,n=f._;function r(u){return u!==""}function v(u,A){return u.filter(function(_){return _.key===A.traceId})}function s(u,A){x.select(u).select("path").style("fill-opacity",A),x.select(u).select("rect").style("fill-opacity",A)}function o(u){x.select(u).select("text.name").style("fill","black")}function b(u){return function(A){return u.node.sourceLinks.indexOf(A.link)!==-1||u.node.targetLinks.indexOf(A.link)!==-1}}function g(u){return function(A){return A.node.sourceLinks.indexOf(u.link)!==-1||A.node.targetLinks.indexOf(u.link)!==-1}}function d(u,A,_){A&&_&&v(_,A).selectAll("."+i.sankeyLink).filter(b(A)).call(m.bind(0,A,_,!1))}function c(u,A,_){A&&_&&v(_,A).selectAll("."+i.sankeyLink).filter(b(A)).call(l.bind(0,A,_,!1))}function m(u,A,_,p){var w=p.datum().link.label;p.style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),w&&v(A,u).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===w}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),_&&v(A,u).selectAll("."+i.sankeyNode).filter(g(u)).call(d)}function l(u,A,_,p){var w=p.datum().link.label;p.style("fill-opacity",function(h){return h.tinyColorAlpha}),w&&v(A,u).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===w}).style("fill-opacity",function(h){return h.tinyColorAlpha}),_&&v(A,u).selectAll(i.sankeyNode).filter(g(u)).call(c)}function y(u,A){var _=u.hoverlabel||{},p=f.nestedProperty(_,A).get();return Array.isArray(p)?!1:p}B.exports=function(A,_){for(var p=A._fullLayout,w=p._paper,h=p._size,L=0;L<A._fullData.length;L++)if(!!A._fullData[L].visible&&A._fullData[L].type===i.sankey&&!A._fullData[L]._viewInitial){var E=A._fullData[L].node;A._fullData[L]._viewInitial={node:{groups:E.groups.slice(),x:E.x.slice(),y:E.y.slice()}}}var S=function(ae,fe){var K=fe.link;K.originalEvent=x.event,A._hoverdata=[K],e.click(A,{target:!0})},P=function(ae,fe,K){A._fullLayout.hovermode!==!1&&(x.select(ae).call(m.bind(0,fe,K,!0)),fe.link.trace.link.hoverinfo!=="skip"&&(fe.link.fullData=fe.link.trace,A.emit("plotly_hover",{event:x.event,points:[fe.link]})))},F=n(A,"source:")+" ",I=n(A,"target:")+" ",D=n(A,"concentration:")+" ",R=n(A,"incoming flow count:")+" ",O=n(A,"outgoing flow count:")+" ",z=function(ae,fe){if(A._fullLayout.hovermode===!1)return;var K=fe.link.trace.link;if(K.hoverinfo==="none"||K.hoverinfo==="skip")return;var J=[];function U(oe){var ne,se;oe.circular?(ne=(oe.circularPathData.leftInnerExtent+oe.circularPathData.rightInnerExtent)/2,se=oe.circularPathData.verticalFullExtent):(ne=(oe.source.x1+oe.target.x0)/2,se=(oe.y0+oe.y1)/2);var _e=[ne,se];return oe.trace.orientation==="v"&&_e.reverse(),_e[0]+=fe.parent.translateX,_e[1]+=fe.parent.translateY,_e}for(var V=0,q=0;q<fe.flow.links.length;q++){var re=fe.flow.links[q];if(!(A._fullLayout.hovermode==="closest"&&fe.link.pointNumber!==re.pointNumber)){fe.link.pointNumber===re.pointNumber&&(V=q),re.fullData=re.trace,K=fe.link.trace.link;var Z=U(re),Q={valueLabel:M(fe.valueFormat)(re.value)+fe.valueSuffix};J.push({x:Z[0],y:Z[1],name:Q.valueLabel,text:[re.label||"",F+re.source.label,I+re.target.label,re.concentrationscale?D+M("%0.2f")(re.flow.labelConcentration):""].filter(r).join("<br>"),color:y(K,"bgcolor")||a.addOpacity(re.color,1),borderColor:y(K,"bordercolor"),fontFamily:y(K,"font.family"),fontSize:y(K,"font.size"),fontColor:y(K,"font.color"),nameLength:y(K,"namelength"),textAlign:y(K,"align"),idealAlign:x.event.x<Z[0]?"right":"left",hovertemplate:K.hovertemplate,hovertemplateLabels:Q,eventData:[re]})}}var ie=e.loneHover(J,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:A,anchorIndex:V});ie.each(function(){var oe=this;fe.link.concentrationscale||s(oe,.65),o(oe)})},H=function(ae,fe,K){A._fullLayout.hovermode!==!1&&(x.select(ae).call(l.bind(0,fe,K,!0)),fe.link.trace.link.hoverinfo!=="skip"&&(fe.link.fullData=fe.link.trace,A.emit("plotly_unhover",{event:x.event,points:[fe.link]})),e.loneUnhover(p._hoverlayer.node()))},Y=function(ae,fe,K){var J=fe.node;J.originalEvent=x.event,A._hoverdata=[J],x.select(ae).call(c,fe,K),e.click(A,{target:!0})},ee=function(ae,fe,K){A._fullLayout.hovermode!==!1&&(x.select(ae).call(d,fe,K),fe.node.trace.node.hoverinfo!=="skip"&&(fe.node.fullData=fe.node.trace,A.emit("plotly_hover",{event:x.event,points:[fe.node]})))},j=function(ae,fe){if(A._fullLayout.hovermode!==!1){var K=fe.node.trace.node;if(!(K.hoverinfo==="none"||K.hoverinfo==="skip")){var J=x.select(ae).select("."+i.nodeRect),U=A._fullLayout._paperdiv.node().getBoundingClientRect(),V=J.node().getBoundingClientRect(),q=V.left-2-U.left,re=V.right+2-U.left,Z=V.top+V.height/4-U.top,Q={valueLabel:M(fe.valueFormat)(fe.node.value)+fe.valueSuffix};fe.node.fullData=fe.node.trace,A._fullLayout._calcInverseTransform(A);var ie=A._fullLayout._invScaleX,oe=A._fullLayout._invScaleY,ne=e.loneHover({x0:ie*q,x1:ie*re,y:oe*Z,name:M(fe.valueFormat)(fe.node.value)+fe.valueSuffix,text:[fe.node.label,R+fe.node.targetLinks.length,O+fe.node.sourceLinks.length].filter(r).join("<br>"),color:y(K,"bgcolor")||fe.tinyColorHue,borderColor:y(K,"bordercolor"),fontFamily:y(K,"font.family"),fontSize:y(K,"font.size"),fontColor:y(K,"font.color"),nameLength:y(K,"namelength"),textAlign:y(K,"align"),idealAlign:"left",hovertemplate:K.hovertemplate,hovertemplateLabels:Q,eventData:[fe.node]},{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:A});s(ne,.85),o(ne)}}},X=function(ae,fe,K){A._fullLayout.hovermode!==!1&&(x.select(ae).call(c,fe,K),fe.node.trace.node.hoverinfo!=="skip"&&(fe.node.fullData=fe.node.trace,A.emit("plotly_unhover",{event:x.event,points:[fe.node]})),e.loneUnhover(p._hoverlayer.node()))};T(A,w,_,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:P,follow:z,unhover:H,select:S},nodeEvents:{hover:ee,follow:j,unhover:X,select:Y}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(t,B,G){var x=t("d3-force"),f=t("d3-interpolate").interpolateNumber,M=t("@plotly/d3"),T=t("@plotly/d3-sankey"),e=t("@plotly/d3-sankey-circular"),a=t("./constants"),i=t("tinycolor2"),n=t("../../components/color"),r=t("../../components/drawing"),v=t("../../lib"),s=v.strTranslate,o=v.strRotate,b=t("../../lib/gup"),g=b.keyFun,d=b.repeat,c=b.unwrap,m=t("../../lib/svg_text_utils"),l=t("../../registry"),y=t("../../constants/alignment"),u=y.CAP_SHIFT,A=y.LINE_SPACING,_=3;function p(U,V,q){var re=c(V),Z=re.trace,Q=Z.domain,ie=Z.orientation==="h",oe=Z.node.pad,ne=Z.node.thickness,se=U.width*(Q.x[1]-Q.x[0]),_e=U.height*(Q.y[1]-Q.y[0]),ue=re._nodes,ge=re._links,xe=re.circular,ye;xe?ye=e.sankeyCircular().circularLinkGap(0):ye=T.sankey(),ye.iterations(a.sankeyIterations).size(ie?[se,_e]:[_e,se]).nodeWidth(ne).nodePadding(oe).nodeId(function(Bt){return Bt.pointNumber}).nodes(ue).links(ge);var be=ye();ye.nodePadding()<oe&&v.warn("node.pad was reduced to ",ye.nodePadding()," to fit within the figure.");var Se,Re,Ve;for(var Ae in re._groupLookup){var Ce=parseInt(re._groupLookup[Ae]),Ze;for(Se=0;Se<be.nodes.length;Se++)if(be.nodes[Se].pointNumber===Ce){Ze=be.nodes[Se];break}if(!!Ze){var Ye={pointNumber:parseInt(Ae),x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};be.nodes.unshift(Ye),Ze.childrenNodes.unshift(Ye)}}function ze(){for(Se=0;Se<be.nodes.length;Se++){var Bt=be.nodes[Se],Ct={},Kt,Ot;for(Re=0;Re<Bt.targetLinks.length;Re++)Ot=Bt.targetLinks[Re],Kt=Ot.source.pointNumber+":"+Ot.target.pointNumber,Ct.hasOwnProperty(Kt)||(Ct[Kt]=[]),Ct[Kt].push(Ot);var St=Object.keys(Ct);for(Re=0;Re<St.length;Re++){Kt=St[Re];var Xe=Ct[Kt],at=0,We={};for(Ve=0;Ve<Xe.length;Ve++)Ot=Xe[Ve],We[Ot.label]||(We[Ot.label]=0),We[Ot.label]+=Ot.value,at+=Ot.value;for(Ve=0;Ve<Xe.length;Ve++)Ot=Xe[Ve],Ot.flow={value:at,labelConcentration:We[Ot.label]/at,concentration:Ot.value/at,links:Xe},Ot.concentrationscale&&(Ot.color=i(Ot.concentrationscale(Ot.flow.labelConcentration)))}var Ee=0;for(Re=0;Re<Bt.sourceLinks.length;Re++)Ee+=Bt.sourceLinks[Re].value;for(Re=0;Re<Bt.sourceLinks.length;Re++)Ot=Bt.sourceLinks[Re],Ot.concentrationOut=Ot.value/Ee;var He=0;for(Re=0;Re<Bt.targetLinks.length;Re++)He+=Bt.targetLinks[Re].value;for(Re=0;Re<Bt.targetLinks.length;Re++)Ot=Bt.targetLinks[Re],Ot.concenrationIn=Ot.value/He}}ze();function Ie(Bt){Bt.forEach(function(Ct){var Kt,Ot,St=0,Xe=Ct.length,at;for(Ct.sort(function(We,Ee){return We.y0-Ee.y0}),at=0;at<Xe;++at)Kt=Ct[at],Kt.y0>=St||(Ot=St-Kt.y0,Ot>1e-6&&(Kt.y0+=Ot,Kt.y1+=Ot)),St=Kt.y1+oe})}function Ge(Bt){var Ct=Bt.map(function(Ee,He){return{x0:Ee.x0,index:He}}).sort(function(Ee,He){return Ee.x0-He.x0}),Kt=[],Ot=-1,St,Xe=-1/0,at;for(Se=0;Se<Ct.length;Se++){var We=Bt[Ct[Se].index];We.x0>Xe+ne&&(Ot+=1,St=We.x0),Xe=We.x0,Kt[Ot]||(Kt[Ot]=[]),Kt[Ot].push(We),at=St-We.x0,We.x0+=at,We.x1+=at}return Kt}if(Z.node.x.length&&Z.node.y.length){for(Se=0;Se<Math.min(Z.node.x.length,Z.node.y.length,be.nodes.length);Se++)if(Z.node.x[Se]&&Z.node.y[Se]){var dt=[Z.node.x[Se]*se,Z.node.y[Se]*_e];be.nodes[Se].x0=dt[0]-ne/2,be.nodes[Se].x1=dt[0]+ne/2;var Rt=be.nodes[Se].y1-be.nodes[Se].y0;be.nodes[Se].y0=dt[1]-Rt/2,be.nodes[Se].y1=dt[1]+Rt/2}if(Z.arrangement==="snap"){ue=be.nodes;var Qt=Ge(ue);Ie(Qt)}ye.update(be)}return{circular:xe,key:q,trace:Z,guid:v.randstr(),horizontal:ie,width:se,height:_e,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,linkArrowLength:Z.link.arrowlen,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:Q.x[0]*U.width+U.margin.l,translateY:U.height-Q.y[1]*U.height+U.margin.t,dragParallel:ie?_e:se,dragPerpendicular:ie?se:_e,arrangement:Z.arrangement,sankey:ye,graph:be,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(U,V,q){var re=i(V.color),Z=V.source.label+"|"+V.target.label,Q=Z+"__"+q;return V.trace=U.trace,V.curveNumber=U.trace.index,{circular:U.circular,key:Q,traceId:U.key,pointNumber:V.pointNumber,link:V,tinyColorHue:n.tinyRGB(re),tinyColorAlpha:re.getAlpha(),linkPath:L,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:V.flow}}function h(U,V){var q="",re=U.width/2,Z=U.circularPathData;return U.circularLinkType==="top"?q="M "+(Z.targetX-V)+" "+(Z.targetY+re)+" L"+(Z.rightInnerExtent-V)+" "+(Z.targetY+re)+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightSmallArcRadius+re)+" 0 0 1 "+(Z.rightFullExtent-re-V)+" "+(Z.targetY-Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-re-V)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightLargeArcRadius+re)+" 0 0 1 "+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent-re)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent-re)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftLargeArcRadius+re)+" 0 0 1 "+(Z.leftFullExtent+re)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+re)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftSmallArcRadius+re)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.sourceY+re)+"L"+Z.sourceX+" "+(Z.sourceY+re)+"L"+Z.sourceX+" "+(Z.sourceY-re)+"L"+Z.leftInnerExtent+" "+(Z.sourceY-re)+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftSmallArcRadius-re)+" 0 0 0 "+(Z.leftFullExtent-re)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-re)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftLargeArcRadius-re)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent+re)+"L"+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent+re)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightLargeArcRadius-re)+" 0 0 0 "+(Z.rightFullExtent+re-V)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+re-V)+" "+(Z.targetY-Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightSmallArcRadius-re)+" 0 0 0 "+(Z.rightInnerExtent-V)+" "+(Z.targetY-re)+"L"+(Z.targetX-V)+" "+(Z.targetY-re)+(V>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z":q="M "+(Z.targetX-V)+" "+(Z.targetY-re)+" L"+(Z.rightInnerExtent-V)+" "+(Z.targetY-re)+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightSmallArcRadius+re)+" 0 0 0 "+(Z.rightFullExtent-re-V)+" "+(Z.targetY+Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-re-V)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightLargeArcRadius+re)+" 0 0 0 "+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent+re)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent+re)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftLargeArcRadius+re)+" 0 0 0 "+(Z.leftFullExtent+re)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+re)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftSmallArcRadius+re)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.sourceY-re)+"L"+Z.sourceX+" "+(Z.sourceY-re)+"L"+Z.sourceX+" "+(Z.sourceY+re)+"L"+Z.leftInnerExtent+" "+(Z.sourceY+re)+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftSmallArcRadius-re)+" 0 0 1 "+(Z.leftFullExtent-re)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-re)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftLargeArcRadius-re)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent-re)+"L"+(Z.rightInnerExtent-V)+" "+(Z.verticalFullExtent-re)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightLargeArcRadius-re)+" 0 0 1 "+(Z.rightFullExtent+re-V)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+re-V)+" "+(Z.targetY+Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightSmallArcRadius-re)+" 0 0 1 "+(Z.rightInnerExtent-V)+" "+(Z.targetY+re)+"L"+(Z.targetX-V)+" "+(Z.targetY+re)+(V>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z",q}function L(){var U=.5;function V(q){var re=q.linkArrowLength;if(q.link.circular)return h(q.link,re);var Z=Math.abs((q.link.target.x0-q.link.source.x1)/2);re>Z&&(re=Z);var Q=q.link.source.x1,ie=q.link.target.x0-re,oe=f(Q,ie),ne=oe(U),se=oe(1-U),_e=q.link.y0-q.link.width/2,ue=q.link.y0+q.link.width/2,ge=q.link.y1-q.link.width/2,xe=q.link.y1+q.link.width/2,ye="M"+Q+","+_e,be="C"+ne+","+_e+" "+se+","+ge+" "+ie+","+ge,Se="C"+se+","+xe+" "+ne+","+ue+" "+Q+","+ue,Re=re>0?"L"+(ie+re)+","+(ge+q.link.width/2):"";return Re+="L"+ie+","+xe,ye+be+Re+Se+"Z"}return V}function E(U,V){var q=i(V.color),re=a.nodePadAcross,Z=U.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var Q=V.dx,ie=Math.max(.5,V.dy),oe="node_"+V.pointNumber;return V.group&&(oe=v.randstr()),V.trace=U.trace,V.curveNumber=U.trace.index,{index:V.pointNumber,key:oe,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:U.key,trace:U.trace,node:V,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Q),visibleHeight:ie,zoneX:-re,zoneY:-Z,zoneWidth:Q+2*re,zoneHeight:ie+2*Z,labelY:U.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:n.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,oe].join("_"),interactionState:U.interactionState,figure:U}}function S(U){U.attr("transform",function(V){return s(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function P(U){U.call(S)}function F(U,V){U.call(P),V.attr("d",L())}function I(U){U.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function D(U){return U.link.width>1||U.linkLineWidth>0}function R(U){var V=s(U.translateX,U.translateY);return V+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(U,V,q){U.on(".basic",null).on("mouseover.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.hover(this,re,V),re.interactionState.hovered=[this,re])}).on("mousemove.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.follow(this,re),re.interactionState.hovered=[this,re])}).on("mouseout.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.unhover(this,re,V),re.interactionState.hovered=!1)}).on("click.basic",function(re){re.interactionState.hovered&&(q.unhover(this,re,V),re.interactionState.hovered=!1),!re.interactionState.dragInProgress&&!re.partOfGroup&&q.select(this,re,V)})}function z(U,V,q,re){var Z=M.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(v.ensureSingle(re._fullLayout._infolayer,"g","dragcover",function(oe){re._fullLayout._dragCover=oe}),v.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,ae(Q.node),Q.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var ie=Q.traceId+"|"+Q.key;Q.forceLayouts[ie]?Q.forceLayouts[ie].alpha(1):H(U,ie,Q),Y(U,V,Q,ie,re)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var ie=M.event.x,oe=M.event.y;Q.arrangement==="snap"?(Q.node.x0=ie-Q.visibleWidth/2,Q.node.x1=ie+Q.visibleWidth/2,Q.node.y0=oe-Q.visibleHeight/2,Q.node.y1=oe+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=ie-Q.visibleWidth/2,Q.node.x1=ie+Q.visibleWidth/2),oe=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,oe)),Q.node.y0=oe-Q.visibleHeight/2,Q.node.y1=oe+Q.visibleHeight/2),ae(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),F(U.filter(fe(Q)),V))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var ie=0;ie<Q.node.childrenNodes.length;ie++)Q.node.childrenNodes[ie].x=Q.node.x,Q.node.childrenNodes[ie].y=Q.node.y;Q.arrangement!=="snap"&&j(Q,re)}});U.on(".drag",null).call(Z)}function H(U,V,q,re){K(q.graph.nodes);var Z=q.graph.nodes.filter(function(Q){return Q.originalX===q.node.originalX}).filter(function(Q){return!Q.partOfGroup});q.forceLayouts[V]=x.forceSimulation(Z).alphaDecay(0).force("collide",x.forceCollide().radius(function(Q){return Q.dy/2+q.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",ee(U,V,Z,q)).stop()}function Y(U,V,q,re,Z){window.requestAnimationFrame(function Q(){var ie;for(ie=0;ie<a.forceTicksPerFrame;ie++)q.forceLayouts[re].tick();var oe=q.graph.nodes;if(J(oe),q.sankey.update(q.graph),F(U.filter(fe(q)),V),q.forceLayouts[re].alpha()>0)window.requestAnimationFrame(Q);else{var ne=q.node.originalX;q.node.x0=ne-q.visibleWidth/2,q.node.x1=ne+q.visibleWidth/2,j(q,Z)}})}function ee(U,V,q,re){return function(){for(var Q=0,ie=0;ie<q.length;ie++){var oe=q[ie];oe===re.interactionState.dragInProgress?(oe.x=oe.lastDraggedX,oe.y=oe.lastDraggedY):(oe.vx=(oe.originalX-oe.x)/a.forceTicksPerFrame,oe.y=Math.min(re.size-oe.dy/2,Math.max(oe.dy/2,oe.y))),Q=Math.max(Q,Math.abs(oe.vx),Math.abs(oe.vy))}!re.interactionState.dragInProgress&&Q<.1&&re.forceLayouts[V].alpha()>0&&re.forceLayouts[V].alpha(0)}}function j(U,V){for(var q=[],re=[],Z=0;Z<U.graph.nodes.length;Z++){var Q=(U.graph.nodes[Z].x0+U.graph.nodes[Z].x1)/2,ie=(U.graph.nodes[Z].y0+U.graph.nodes[Z].y1)/2;q.push(Q/U.figure.width),re.push(ie/U.figure.height)}l.call("_guiRestyle",V,{"node.x":[q],"node.y":[re]},U.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function X(U){var V=[],q;for(q=0;q<U.length;q++)U[q].originalX=(U[q].x0+U[q].x1)/2,U[q].originalY=(U[q].y0+U[q].y1)/2,V.indexOf(U[q].originalX)===-1&&V.push(U[q].originalX);for(V.sort(function(re,Z){return re-Z}),q=0;q<U.length;q++)U[q].originalLayerIndex=V.indexOf(U[q].originalX),U[q].originalLayer=U[q].originalLayerIndex/(V.length-1)}function ae(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function fe(U){return function(V){return V.node.originalX===U.node.originalX}}function K(U){for(var V=0;V<U.length;V++)U[V].y=(U[V].y0+U[V].y1)/2,U[V].x=(U[V].x0+U[V].x1)/2}function J(U){for(var V=0;V<U.length;V++)U[V].y0=U[V].y-U[V].dy/2,U[V].y1=U[V].y0+U[V].dy,U[V].x0=U[V].x-U[V].dx/2,U[V].x1=U[V].x0+U[V].dx}B.exports=function(U,V,q,re,Z){var Q=U._context.staticPlot,ie=!1;v.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){ie=!0});var oe=U._fullLayout._dragCover,ne=q.filter(function(Se){return c(Se).trace.visible}).map(p.bind(null,re)),se=V.selectAll("."+a.cn.sankey).data(ne,g);se.exit().remove(),se.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",R),se.each(function(Se,Re){U._fullData[Re]._sankey=Se;var Ve="bgsankey-"+Se.trace.uid+"-"+Re;v.ensureSingle(U._fullLayout._draggers,"rect",Ve),U._fullData[Re]._bgRect=M.select("."+Ve),U._fullData[Re]._bgRect.style("pointer-events",Q?"none":"all").attr("width",Se.width).attr("height",Se.height).attr("x",Se.translateX).attr("y",Se.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(a.ease).duration(a.duration).attr("transform",R);var _e=se.selectAll("."+a.cn.sankeyLinks).data(d,g);_e.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var ue=_e.selectAll("."+a.cn.sankeyLink).data(function(Se){var Re=Se.graph.links;return Re.filter(function(Ve){return Ve.value}).map(w.bind(null,Se))},g);ue.enter().append("path").classed(a.cn.sankeyLink,!0).call(O,se,Z.linkEvents),ue.style("stroke",function(Se){return D(Se)?n.tinyRGB(i(Se.linkLineColor)):Se.tinyColorHue}).style("stroke-opacity",function(Se){return D(Se)?n.opacity(Se.linkLineColor):Se.tinyColorAlpha}).style("fill",function(Se){return Se.tinyColorHue}).style("fill-opacity",function(Se){return Se.tinyColorAlpha}).style("stroke-width",function(Se){return D(Se)?Se.linkLineWidth:1}).attr("d",L()),ue.style("opacity",function(){return U._context.staticPlot||ie||oe?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),ue.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ge=se.selectAll("."+a.cn.sankeyNodeSet).data(d,g);ge.enter().append("g").classed(a.cn.sankeyNodeSet,!0),ge.style("cursor",function(Se){switch(Se.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var xe=ge.selectAll("."+a.cn.sankeyNode).data(function(Se){var Re=Se.graph.nodes;return X(Re),Re.map(E.bind(null,Se))},g);xe.enter().append("g").classed(a.cn.sankeyNode,!0).call(S).style("opacity",function(Se){return(U._context.staticPlot||ie)&&!Se.partOfGroup?1:0}),xe.call(O,se,Z.nodeEvents).call(z,ue,Z,U),xe.transition().ease(a.ease).duration(a.duration).call(S).style("opacity",function(Se){return Se.partOfGroup?0:1}),xe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ye=xe.selectAll("."+a.cn.nodeRect).data(d);ye.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),ye.style("stroke-width",function(Se){return Se.nodeLineWidth}).style("stroke",function(Se){return n.tinyRGB(i(Se.nodeLineColor))}).style("stroke-opacity",function(Se){return n.opacity(Se.nodeLineColor)}).style("fill",function(Se){return Se.tinyColorHue}).style("fill-opacity",function(Se){return Se.tinyColorAlpha}),ye.transition().ease(a.ease).duration(a.duration).call(I);var be=xe.selectAll("."+a.cn.nodeLabel).data(d);be.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(Se){return Se.node.label}).each(function(Se){var Re=M.select(this);r.font(Re,Se.textFont),m.convertToTspans(Re,U)}).style("text-shadow",m.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(Se){return Se.horizontal&&Se.left?"end":"start"}).attr("transform",function(Se){var Re=M.select(this),Ve=m.lineCount(Re),Ae=Se.textFont.size*((Ve-1)*A-u),Ce=Se.nodeLineWidth/2+_,Ze=((Se.horizontal?Se.visibleHeight:Se.visibleWidth)-Ae)/2;Se.horizontal&&(Se.left?Ce=-Ce:Ce+=Se.visibleWidth);var Ye=Se.horizontal?"":"scale(-1,1)"+o(90);return s(Se.horizontal?Ce:Ze,Se.horizontal?Ze:Ce)+Ye}),be.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(t,B,G){B.exports=function(f,M){for(var T=f.cd,e=[],a=T[0].trace,i=a._sankey.graph.nodes,n=0;n<i.length;n++){var r=i[n];if(!r.partOfGroup){var v=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];a.orientation==="v"&&v.reverse(),M&&M.contains(v,!1,n,f)&&e.push({pointNumber:r.pointNumber})}}return e}},{}],935:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;x.mergeArray(T.text,M,"tx"),x.mergeArray(T.texttemplate,M,"txt"),x.mergeArray(T.hovertext,M,"htx"),x.mergeArray(T.customdata,M,"data"),x.mergeArray(T.textposition,M,"tp"),T.textfont&&(x.mergeArrayCastPositive(T.textfont.size,M,"ts"),x.mergeArray(T.textfont.color,M,"tc"),x.mergeArray(T.textfont.family,M,"tf"));var a=T.marker;if(a){x.mergeArrayCastPositive(a.size,M,"ms"),x.mergeArrayCastPositive(a.opacity,M,"mo"),x.mergeArray(a.symbol,M,"mx"),x.mergeArray(a.angle,M,"ma"),x.mergeArray(a.standoff,M,"mf"),x.mergeArray(a.color,M,"mc");var i=a.line;a.line&&(x.mergeArray(i.color,M,"mlc"),x.mergeArrayCastPositive(i.width,M,"mlw"));var n=a.gradient;n&&n.type!=="none"&&(x.mergeArray(n.type,M,"mgt"),x.mergeArray(n.color,M,"mgc"))}}},{"../../lib":515}],936:[function(t,B,G){var x=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/font_attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../components/drawing/attributes").pattern,n=t("../../components/drawing"),r=t("./constants"),v=t("../../lib/extend").extendFlat;function s(g){return{valType:"any",dflt:0,editType:"calc"}}function o(g){return{valType:"any",editType:"calc"}}function b(g){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:b(),yperiodalignment:b(),xhoverformat:x("x"),yhoverformat:x("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:f({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:M({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},a,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:v({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM,a=t("./subtypes"),i=t("./colorscale_calc"),n=t("./arrays_to_calcdata"),r=t("./calc_selection");function v(c,m){var l=c._fullLayout,y=m._xA=M.getFromId(c,m.xaxis||"x","x"),u=m._yA=M.getFromId(c,m.yaxis||"y","y"),A=y.makeCalcdata(m,"x"),_=u.makeCalcdata(m,"y"),p=T(m,y,"x",A),w=T(m,u,"y",_),h=p.vals,L=w.vals,E=m._length,S=new Array(E),P=m.ids,F=d(m,l,y,u),I=!1,D,R,O,z,H,Y;b(l,m);var ee="x",j="y",X;if(F)f.pushUnique(F.traceIndices,m._expandedIndex),D=F.orientation==="v",D?(j="s",X="x"):(ee="s",X="y"),H=F.stackgaps==="interpolate";else{var ae=o(m,E);s(c,m,y,u,h,L,ae)}var fe=!!m.xperiodalignment,K=!!m.yperiodalignment;for(R=0;R<E;R++){var J=S[R]={},U=x(h[R]),V=x(L[R]);U&&V?(J[ee]=h[R],J[j]=L[R],fe&&(J.orig_x=A[R],J.xEnd=p.ends[R],J.xStart=p.starts[R]),K&&(J.orig_y=_[R],J.yEnd=w.ends[R],J.yStart=w.starts[R])):F&&(D?U:V)?(J[X]=D?h[R]:L[R],J.gap=!0,H?(J.s=e,I=!0):J.s=0):J[ee]=J[j]=e,P&&(J.id=String(P[R]))}if(n(S,m),i(c,m),r(S,m),F){for(R=0;R<S.length;)S[R][X]===e?S.splice(R,1):R++;if(f.sort(S,function(Q,ie){return Q[X]-ie[X]||Q.i-ie.i}),I){for(R=0;R<S.length-1&&S[R].gap;)R++;for(Y=S[R].s,Y||(Y=S[R].s=0),O=0;O<R;O++)S[O].s=Y;for(z=S.length-1;z>R&&S[z].gap;)z--;for(Y=S[z].s,O=S.length-1;O>z;O--)S[O].s=Y;for(;R<z;)if(R++,S[R].gap){for(O=R+1;S[O].gap;)O++;for(var q=S[R-1][X],re=S[R-1].s,Z=(S[O].s-re)/(S[O][X]-q);R<O;)S[R].s=re+(S[R][X]-q)*Z,R++}}}return S}function s(c,m,l,y,u,A,_){var p=m._length,w=c._fullLayout,h=l._id,L=y._id,E=w._firstScatter[g(m)]===m.uid,S=(d(m,w,l,y)||{}).orientation,P=m.fill;l._minDtick=0,y._minDtick=0;var F={padded:!0},I={padded:!0};_&&(F.ppad=I.ppad=_);var D=p<2||u[0]!==u[p-1]||A[0]!==A[p-1];D&&(P==="tozerox"||P==="tonextx"&&(E||S==="h"))?F.tozero=!0:!(m.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!a.hasMarkers(m)&&!a.hasText(m))&&(F.padded=!1,F.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(E||S==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),h&&(m._extremes[h]=M.findExtremes(l,u,F)),L&&(m._extremes[L]=M.findExtremes(y,A,I))}function o(c,m){if(!!a.hasMarkers(c)){var l=c.marker,y=1.6*(c.marker.sizeref||1),u;if(c.marker.sizemode==="area"?u=function(h){return Math.max(Math.sqrt((h||0)/y),3)}:u=function(h){return Math.max((h||0)/y,3)},f.isArrayOrTypedArray(l.size)){var A={type:"linear"};M.setConvert(A);for(var _=A.makeCalcdata(c.marker,"size"),p=new Array(m),w=0;w<m;w++)p[w]=u(_[w]);return p}else return u(l.size)}}function b(c,m){var l=g(m),y=c._firstScatter;y[l]||(y[l]=m.uid)}function g(c){var m=c.stackgroup;return c.xaxis+c.yaxis+c.type+(m?"-"+m:"")}function d(c,m,l,y){var u=c.stackgroup;if(!!u){var A=m._scatterStackOpts[l._id+y._id][u],_=A.orientation==="v"?y:l;if(_.type==="linear"||_.type==="log")return A}}B.exports={calc:v,calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:b,getStackOpts:d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){x.isArrayOrTypedArray(T.selectedpoints)&&x.tagSelected(M,T)}},{"../../lib":515}],939:[function(t,B,G){var x=t("../../components/colorscale/helpers").hasColorscale,f=t("../../components/colorscale/calc"),M=t("./subtypes");B.exports=function(e,a){M.hasLines(a)&&x(a,"line")&&f(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),M.hasMarkers(a)&&(x(a,"marker")&&f(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),x(a,"marker.line")&&f(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(t,B,G){B.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(t,B,G){var x=t("./calc");B.exports=function(e,a){var i=a.xaxis,n=a.yaxis,r=i._id+n._id,v=e._fullLayout._scatterStackOpts[r];if(!!v){var s=e.calcdata,o,b,g,d,c,m,l,y,u,A,_,p,w,h,L;for(var E in v){A=v[E];var S=A.traceIndices;if(!!S.length){for(_=A.stackgaps==="interpolate",p=A.groupnorm,A.orientation==="v"?(w="x",h="y"):(w="y",h="x"),L=new Array(S.length),o=0;o<L.length;o++)L[o]=!1;m=s[S[0]];var P=new Array(m.length);for(o=0;o<m.length;o++)P[o]=m[o][w];for(o=1;o<S.length;o++){for(c=s[S[o]],b=g=0;b<c.length;b++){for(l=c[b][w];l>P[g]&&g<P.length;g++)f(c,b,P[g],o,L,_,w),b++;if(l!==P[g]){for(d=0;d<o;d++)f(s[S[d]],g,l,d,L,_,w);P.splice(g,0,l)}g++}for(;g<P.length;g++)f(c,b,P[g],o,L,_,w),b++}var F=P.length;for(b=0;b<m.length;b++){for(y=m[b][h]=m[b].s,o=1;o<S.length;o++)c=s[S[o]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=F,y+=c[b].s,c[b][h]=y;if(p)for(u=(p==="fraction"?y:y/100)||1,o=0;o<S.length;o++){var I=s[S[o]][b];I[h]/=u,I.sNorm=I.s/u}}for(o=0;o<S.length;o++){c=s[S[o]];var D=c[0].trace,R=x.calcMarkerSize(D,D._rawLength),O=Array.isArray(R);if(R&&L[o]||O){var z=R;for(R=new Array(F),b=0;b<F;b++)R[b]=c[b].gap?0:O?z[c[b].i]:z}var H=new Array(F),Y=new Array(F);for(b=0;b<F;b++)H[b]=c[b].x,Y[b]=c[b].y;x.calcAxisExpansion(e,D,i,n,H,Y,R),c[0].t.orientation=A.orientation}}}}};function f(T,e,a,i,n,r,v){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[v]=a,T.splice(e,0,s),e&&a===T[e-1][v]){var o=T[e-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else r&&(s.s=M(T,e,a,v));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function M(T,e,a,i){var n=T[e-1],r=T[e+1];return r?n?n.s+(r.s-n.s)*(a-n[i])/(r[i]-n[i]):r.s:n.s}},{"./calc":937}],942:[function(t,B,G){B.exports=function(f){for(var M=0;M<f.length;M++){var T=f[M];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=M-1;a>=0;a--){var i=f[a];if(i.type==="scatter"&&i.xaxis===T.xaxis&&i.yaxis===T.yaxis){i.opacity=void 0;break}}}}}},{}],943:[function(t,B,G){var x=t("../../lib"),f=t("../../registry"),M=t("./attributes"),T=t("./constants"),e=t("./subtypes"),a=t("./xy_defaults"),i=t("./period_defaults"),n=t("./stack_defaults"),r=t("./marker_defaults"),v=t("./line_defaults"),s=t("./line_shape_defaults"),o=t("./text_defaults"),b=t("./fillcolor_defaults"),g=t("../../lib").coercePattern;B.exports=function(c,m,l,y){function u(S,P){return x.coerce(c,m,M,S,P)}var A=a(c,m,y,u);if(A||(m.visible=!1),!!m.visible){i(c,m,y,u),u("xhoverformat"),u("yhoverformat");var _=n(c,m,y,u),p=!_&&A<T.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("mode",p),e.hasLines(m)&&(v(c,m,l,y,u,{backoff:!0}),s(c,m,u),u("connectgaps"),u("line.simplify")),e.hasMarkers(m)&&r(c,m,l,y,u,{gradient:!0}),e.hasText(m)&&(u("texttemplate"),o(c,m,y,u));var w=[];(e.hasMarkers(m)||e.hasText(m))&&(u("cliponaxis"),u("marker.maxdisplayed"),w.push("points")),u("fill",_?_.fillDflt:"none"),m.fill!=="none"&&(b(c,m,l,u),e.hasLines(m)||s(c,m,u),g(u,"fillpattern",m.fillcolor,!1));var h=(m.line||{}).color,L=(m.marker||{}).color;(m.fill==="tonext"||m.fill==="toself")&&w.push("fills"),u("hoveron",w.join("+")||"points"),m.hoveron!=="fills"&&u("hovertemplate");var E=f.getComponentMethod("errorbars","supplyDefaults");E(c,m,h||L||l,{axis:"y"}),E(c,m,h||L||l,{axis:"x",inherit:"y"}),x.coerceSelectionMarkerOpacity(m,u)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(t,B,G){var x=t("../../components/color"),f=t("../../lib").isArrayOrTypedArray;B.exports=function(T,e,a,i){var n=!1;if(e.marker){var r=e.marker.color,v=(e.marker.line||{}).color;r&&!f(r)?n=r:v&&!f(v)&&(n=v)}i("fillcolor",x.addOpacity((e.line||{}).color||n||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(t,B,G){var x=t("../../plots/cartesian/axes");B.exports=function(M,T,e){var a={},i={_fullLayout:e},n=x.getFromTrace(i,T,"x"),r=x.getFromTrace(i,T,"y");return a.xLabel=x.tickText(n,n.c2l(M.x),!0).text,a.yLabel=x.tickText(r,r.c2l(M.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(t,B,G){var x=t("../../components/color"),f=t("./subtypes");B.exports=function(T,e){var a,i;if(T.mode==="lines")return a=T.line.color,a&&x.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var n=e.mcc||(T.marker||{}).color,r=e.mlcc||((T.marker||{}).line||{}).color;return i=n&&x.opacity(n)?n:r&&x.opacity(r)&&(e.mlw||((T.marker||{}).line||{}).width)?r:"",i?x.opacity(i)<.3?x.addOpacity(i,.3):i:(a=(T.line||{}).color,a&&x.opacity(a)&&f.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(t,B,G){var x=t("../../lib"),f=t("../../components/fx"),M=t("../../registry"),T=t("./get_trace_color"),e=t("../../components/color"),a=x.fillText;B.exports=function(n,r,v,s){var o=n.cd,b=o[0].trace,g=n.xa,d=n.ya,c=g.c2p(r),m=d.c2p(v),l=[c,m],y=b.hoveron||"",u=b.mode.indexOf("markers")!==-1?3:.5,A=!!b.xperiodalignment,_=!!b.yperiodalignment;if(y.indexOf("points")!==-1){var p=function(ne){if(A){var se=g.c2p(ne.xStart),_e=g.c2p(ne.xEnd);return c>=Math.min(se,_e)&&c<=Math.max(se,_e)?0:1/0}var ue=Math.max(3,ne.mrc||0),ge=1-1/ue,xe=Math.abs(g.c2p(ne.x)-c);return xe<ue?ge*xe/ue:xe-ue+ge},w=function(ne){if(_){var se=d.c2p(ne.yStart),_e=d.c2p(ne.yEnd);return m>=Math.min(se,_e)&&m<=Math.max(se,_e)?0:1/0}var ue=Math.max(3,ne.mrc||0),ge=1-1/ue,xe=Math.abs(d.c2p(ne.y)-m);return xe<ue?ge*xe/ue:xe-ue+ge},h=function(ne){var se=Math.max(u,ne.mrc||0),_e=g.c2p(ne.x)-c,ue=d.c2p(ne.y)-m;return Math.max(Math.sqrt(_e*_e+ue*ue)-se,1-u/se)},L=f.getDistanceFunction(s,p,w,h);if(f.getClosest(o,L,n),n.index!==!1){var E=o[n.index],S=g.c2p(E.x,!0),P=d.c2p(E.y,!0),F=E.mrc||1;n.index=E.i;var I=o[0].t.orientation,D=I&&(E.sNorm||E.s),R=I==="h"?D:E.orig_x!==void 0?E.orig_x:E.x,O=I==="v"?D:E.orig_y!==void 0?E.orig_y:E.y;return x.extendFlat(n,{color:T(b,E),x0:S-F,x1:S+F,xLabelVal:R,y0:P-F,y1:P+F,yLabelVal:O,spikeDistance:h(E),hovertemplate:b.hovertemplate}),a(E,b,n),M.getComponentMethod("errorbars","hoverInfo")(E,b,n),[n]}}if(y.indexOf("fills")!==-1&&b._polygons){var z=b._polygons,H=[],Y=!1,ee=1/0,j=-1/0,X=1/0,ae=-1/0,fe,K,J,U,V,q,re,Z,Q;for(fe=0;fe<z.length;fe++)J=z[fe],J.contains(l)&&(Y=!Y,H.push(J),X=Math.min(X,J.ymin),ae=Math.max(ae,J.ymax));if(Y){X=Math.max(X,0),ae=Math.min(ae,d._length);var ie=(X+ae)/2;for(fe=0;fe<H.length;fe++)for(U=H[fe].pts,K=1;K<U.length;K++)Z=U[K-1][1],Q=U[K][1],Z>ie!=Q>=ie&&(q=U[K-1][0],re=U[K][0],Q-Z&&(V=q+(re-q)*(ie-Z)/(Q-Z),ee=Math.min(ee,V),j=Math.max(j,V)));ee=Math.max(ee,0),j=Math.min(j,g._length);var oe=e.defaultLine;return e.opacity(b.fillcolor)?oe=b.fillcolor:e.opacity((b.line||{}).color)&&(oe=b.line.color),x.extendFlat(n,{distance:n.maxHoverDistance,x0:ee,x1:j,y0:ie,y1:ie,color:oe,hovertemplate:!1}),delete n.index,b.text&&!Array.isArray(b.text)?n.text=String(b.text):n.text=b.name,[n]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(t,B,G){var x=t("./subtypes");B.exports={hasLines:x.hasLines,hasMarkers:x.hasMarkers,hasText:x.hasText,isBubble:x.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(t,B,G){var x=t("../../lib").isArrayOrTypedArray,f=t("../../components/colorscale/helpers").hasColorscale,M=t("../../components/colorscale/defaults");B.exports=function(e,a,i,n,r,v){v||(v={});var s=(e.marker||{}).color;if(r("line.color",i),f(e,"line"))M(e,a,n,r,{prefix:"line.",cLetter:"c"});else{var o=(x(s)?!1:s)||i;r("line.color",o)}r("line.width"),v.noDash||r("line.dash"),v.backoff&&r("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(t,B,G){var x=t("../../components/drawing"),f=t("../../constants/numerical"),M=f.BADNUM,T=f.LOG_CLIP,e=T+.5,a=T-.5,i=t("../../lib"),n=i.segmentsIntersect,r=i.constrain,v=t("./constants");B.exports=function(o,b){var g=b.trace||{},d=b.xaxis,c=b.yaxis,m=d.type==="log",l=c.type==="log",y=d._length,u=c._length,A=b.backoff,_=g.marker,p=b.connectGaps,w=b.baseTolerance,h=b.shape,L=h==="linear",E=g.fill&&g.fill!=="none",S=[],P=v.minTolerance,F=o.length,I=new Array(F),D=0,R,O,z,H,Y,ee,j,X,ae,fe,K,J,U,V,q,re;function Z(Mt){var Gt=o[Mt];if(!Gt)return!1;var zt=b.linearized?d.l2p(Gt.x):d.c2p(Gt.x),Ht=b.linearized?c.l2p(Gt.y):c.c2p(Gt.y);if(zt===M){if(m&&(zt=d.c2p(Gt.x,!0)),zt===M)return!1;l&&Ht===M&&(zt*=Math.abs(d._m*u*(d._m>0?e:a)/(c._m*y*(c._m>0?e:a)))),zt*=1e3}if(Ht===M){if(l&&(Ht=c.c2p(Gt.y,!0)),Ht===M)return!1;Ht*=1e3}return[zt,Ht]}function Q(Mt,Gt,zt,Ht){var Xt=zt-Mt,Wt=Ht-Gt,sr=.5-Mt,Gr=.5-Gt,cn=Xt*Xt+Wt*Wt,en=Xt*sr+Wt*Gr;if(en>0&&en<cn){var st=sr*Wt-Gr*Xt;if(st*st<cn)return!0}}var ie,oe;function ne(Mt,Gt){var zt=Mt[0]/y,Ht=Mt[1]/u,Xt=Math.max(0,-zt,zt-1,-Ht,Ht-1);return Xt&&ie!==void 0&&Q(zt,Ht,ie,oe)&&(Xt=0),Xt&&Gt&&Q(zt,Ht,Gt[0]/y,Gt[1]/u)&&(Xt=0),(1+v.toleranceGrowth*Xt)*w}function se(Mt,Gt){var zt=Mt[0]-Gt[0],Ht=Mt[1]-Gt[1];return Math.sqrt(zt*zt+Ht*Ht)}var _e=v.maxScreensAway,ue=-y*_e,ge=y*(1+_e),xe=-u*_e,ye=u*(1+_e),be=[[ue,xe,ge,xe],[ge,xe,ge,ye],[ge,ye,ue,ye],[ue,ye,ue,xe]],Se,Re,Ve,Ae,Ce,Ze;function Ye(Mt,Gt){for(var zt=[],Ht=0,Xt=0;Xt<4;Xt++){var Wt=be[Xt],sr=n(Mt[0],Mt[1],Gt[0],Gt[1],Wt[0],Wt[1],Wt[2],Wt[3]);sr&&(!Ht||Math.abs(sr.x-zt[0][0])>1||Math.abs(sr.y-zt[0][1])>1)&&(sr=[sr.x,sr.y],Ht&&se(sr,Mt)<se(zt[0],Mt)?zt.unshift(sr):zt.push(sr),Ht++)}return zt}function ze(Mt){if(Mt[0]<ue||Mt[0]>ge||Mt[1]<xe||Mt[1]>ye)return[r(Mt[0],ue,ge),r(Mt[1],xe,ye)]}function Ie(Mt,Gt){if(Mt[0]===Gt[0]&&(Mt[0]===ue||Mt[0]===ge)||Mt[1]===Gt[1]&&(Mt[1]===xe||Mt[1]===ye))return!0}function Ge(Mt,Gt){var zt=[],Ht=ze(Mt),Xt=ze(Gt);return Ht&&Xt&&Ie(Ht,Xt)||(Ht&&zt.push(Ht),Xt&&zt.push(Xt)),zt}function dt(Mt,Gt,zt){return function(Ht,Xt){var Wt=ze(Ht),sr=ze(Xt),Gr=[];if(Wt&&sr&&Ie(Wt,sr))return Gr;Wt&&Gr.push(Wt),sr&&Gr.push(sr);var cn=2*i.constrain((Ht[Mt]+Xt[Mt])/2,Gt,zt)-((Wt||Ht)[Mt]+(sr||Xt)[Mt]);if(cn){var en;Wt&&sr?en=cn>0==Wt[Mt]>sr[Mt]?Wt:sr:en=Wt||sr,en[Mt]+=cn}return Gr}}var Rt;h==="linear"||h==="spline"?Rt=Ye:h==="hv"||h==="vh"?Rt=Ge:h==="hvh"?Rt=dt(0,ue,ge):h==="vhv"&&(Rt=dt(1,xe,ye));function Qt(Mt,Gt){var zt=Gt[0]-Mt[0],Ht=(Gt[1]-Mt[1])/zt,Xt=(Mt[1]*Gt[0]-Gt[1]*Mt[0])/zt;return Xt>0?[Ht>0?ue:ge,ye]:[Ht>0?ge:ue,xe]}function Bt(Mt){var Gt=Mt[0],zt=Mt[1],Ht=Gt===I[D-1][0],Xt=zt===I[D-1][1];if(!(Ht&&Xt))if(D>1){var Wt=Gt===I[D-2][0],sr=zt===I[D-2][1];Ht&&(Gt===ue||Gt===ge)&&Wt?sr?D--:I[D-1]=Mt:Xt&&(zt===xe||zt===ye)&&sr?Wt?D--:I[D-1]=Mt:I[D++]=Mt}else I[D++]=Mt}function Ct(Mt){I[D-1][0]!==Mt[0]&&I[D-1][1]!==Mt[1]&&Bt([Ve,Ae]),Bt(Mt),Ce=null,Ve=Ae=0}var Kt=i.isArrayOrTypedArray(_);function Ot(Mt){if(Mt&&A&&(Mt.i=R,Mt.d=o,Mt.trace=g,Mt.marker=Kt?_[Mt.i]:_,Mt.backoff=A),ie=Mt[0]/y,oe=Mt[1]/u,Se=Mt[0]<ue?ue:Mt[0]>ge?ge:0,Re=Mt[1]<xe?xe:Mt[1]>ye?ye:0,Se||Re){if(!D)I[D++]=[Se||Mt[0],Re||Mt[1]];else if(Ce){var Gt=Rt(Ce,Mt);Gt.length>1&&(Ct(Gt[0]),I[D++]=Gt[1])}else Ze=Rt(I[D-1],Mt)[0],I[D++]=Ze;var zt=I[D-1];Se&&Re&&(zt[0]!==Se||zt[1]!==Re)?(Ce&&(Ve!==Se&&Ae!==Re?Bt(Ve&&Ae?Qt(Ce,Mt):[Ve||Se,Ae||Re]):Ve&&Ae&&Bt([Ve,Ae])),Bt([Se,Re])):Ve-Se&&Ae-Re&&Bt([Se||Ve,Re||Ae]),Ce=Mt,Ve=Se,Ae=Re}else Ce&&Ct(Rt(Ce,Mt)[0]),I[D++]=Mt}for(R=0;R<F;R++)if(O=Z(R),!!O){for(D=0,Ce=null,Ot(O),R++;R<F;R++){if(H=Z(R),!H){if(p)continue;break}if(!L||!b.simplify){Ot(H);continue}var St=Z(R+1);if(fe=se(H,O),!(!(E&&(D===0||D===F-1))&&fe<ne(H,St)*P)){for(X=[(H[0]-O[0])/fe,(H[1]-O[1])/fe],Y=O,K=fe,J=V=q=0,j=!1,z=H,R++;R<o.length;R++){if(ee=St,St=Z(R+1),!ee){if(p)continue;break}if(ae=[ee[0]-O[0],ee[1]-O[1]],re=ae[0]*X[1]-ae[1]*X[0],V=Math.min(V,re),q=Math.max(q,re),q-V>ne(ee,St))break;z=ee,U=ae[0]*X[0]+ae[1]*X[1],U>K?(K=U,H=ee,j=!1):U<J&&(J=U,Y=ee,j=!0)}if(j?(Ot(H),z!==Y&&Ot(Y)):(Y!==O&&Ot(Y),z!==H&&Ot(H)),Ot(z),R>=o.length||!ee)break;Ot(ee),O=ee}}Ce&&Bt([Ve||Ce[0],Ae||Ce[1]]),S.push(I.slice(0,D))}var Xe=h.slice(h.length-1);if(A&&Xe!=="h"&&Xe!=="v"){for(var at=!1,We=-1,Ee=[],He=0;He<S.length;He++)for(var Ke=0;Ke<S[He].length-1;Ke++){var et=S[He][Ke],At=S[He][Ke+1],mt=x.applyBackoff(At,et);(mt[0]!==At[0]||mt[1]!==At[1])&&(at=!0),Ee[We+1]||(We++,Ee[We]=[et,[mt[0],mt[1]]])}return at?Ee:S}return S}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(t,B,G){B.exports=function(f,M,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],952:[function(t,B,G){var x={tonextx:1,tonexty:1,tonext:1};B.exports=function(M,T,e){var a,i,n,r,v,s={},o=!1,b=-1,g=0,d=-1;for(i=0;i<e.length;i++)a=e[i][0].trace,n=a.stackgroup||"",n?n in s?v=s[n]:(v=s[n]=g,g++):a.fill in x&&d>=0?v=d:(v=d=g,g++),v<b&&(o=!0),a._groupIndex=b=v;var c=e.slice();o&&c.sort(function(l,y){var u=l[0].trace,A=y[0].trace;return u._groupIndex-A._groupIndex||u.index-A.index});var m={};for(i=0;i<c.length;i++)a=c[i][0].trace,n=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in x&&(r=m[n],a._prevtrace=r||null,r&&(r._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),m[n]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return c}},{}],953:[function(t,B,G){var x=t("fast-isnumeric");B.exports=function(M,T){T||(T=2);var e=M.marker,a=e.sizeref||1,i=e.sizemin||0,n=e.sizemode==="area"?function(r){return Math.sqrt(r/a)}:function(r){return r/a};return function(r){var v=n(r/T);return x(v)&&v>0?Math.max(v,i):0}}},{"fast-isnumeric":190}],954:[function(t,B,G){B.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(t,B,G){var x=t("../../components/color"),f=t("../../components/colorscale/helpers").hasColorscale,M=t("../../components/colorscale/defaults"),T=t("./subtypes");B.exports=function(a,i,n,r,v,s){var o=T.isBubble(a),b=(a.line||{}).color,g;if(s=s||{},b&&(n=b),v("marker.symbol"),v("marker.opacity",o?.7:1),v("marker.size"),s.noAngle||(v("marker.angle"),s.noAngleRef||v("marker.angleref"),s.noStandOff||v("marker.standoff")),v("marker.color",n),f(a,"marker")&&M(a,i,r,v,{prefix:"marker.",cLetter:"c"}),s.noSelect||(v("selected.marker.color"),v("unselected.marker.color"),v("selected.marker.size"),v("unselected.marker.size")),s.noLine||(b&&!Array.isArray(b)&&i.marker.color!==b?g=b:o?g=x.background:g=x.defaultLine,v("marker.line.color",g),f(a,"marker.line")&&M(a,i,r,v,{prefix:"marker.line.",cLetter:"c"}),v("marker.line.width",o?1:0)),o&&(v("marker.sizeref"),v("marker.sizemin"),v("marker.sizemode")),s.gradient){var d=v("marker.gradient.type");d!=="none"&&v("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(t,B,G){var x=t("../../lib").dateTick0,f=t("../../constants/numerical"),M=f.ONEWEEK;function T(e,a){return e%M===0?x(a,1):x(a,0)}B.exports=function(a,i,n,r,v){if(v||(v={x:!0,y:!0}),v.x){var s=r("xperiod");s&&(r("xperiod0",T(s,i.xcalendar)),r("xperiodalignment"))}if(v.y){var o=r("yperiod");o&&(r("yperiod0",T(o,i.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../lib"),T=M.ensureSingle,e=M.identity,a=t("../../components/drawing"),i=t("./subtypes"),n=t("./line_points"),r=t("./link_traces"),v=t("../../lib/polygon").tester;B.exports=function(d,c,m,l,y,u){var A,_,p=!y,w=!!y&&y.duration>0,h=r(d,c,m);if(A=l.selectAll("g.trace").data(h,function(E){return E[0].trace.uid}),A.enter().append("g").attr("class",function(E){return"trace scatter trace"+E[0].trace.uid}).style("stroke-miterlimit",2),A.order(),s(d,A,c),w){u&&(_=u());var L=x.transition().duration(y.duration).ease(y.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});L.each(function(){l.selectAll("g.trace").each(function(E,S){o(d,S,c,E,h,this,y)})})}else A.each(function(E,S){o(d,S,c,E,h,this,y)});p&&A.exit().remove(),l.selectAll("path:not([d])").remove()};function s(g,d,c){d.each(function(m){var l=T(x.select(this),"g","fills");a.setClipUrl(l,c.layerClipId,g);var y=m[0].trace,u=[];y._ownfill&&u.push("_ownFill"),y._nexttrace&&u.push("_nextFill");var A=l.selectAll("g").data(u,e);A.enter().append("g"),A.exit().each(function(_){y[_]=null}).remove(),A.order().each(function(_){y[_]=T(x.select(this),"path","js-fill")})})}function o(g,d,c,m,l,y,u){var A;b(g,d,c,m,l);var _=!!u&&u.duration>0;function p(Ve){return _?Ve.transition():Ve}var w=c.xaxis,h=c.yaxis,L=m[0].trace,E=L.line,S=x.select(y),P=T(S,"g","errorbars"),F=T(S,"g","lines"),I=T(S,"g","points"),D=T(S,"g","text");if(f.getComponentMethod("errorbars","plot")(g,P,c,u),L.visible!==!0)return;p(S).style("opacity",L.opacity);var R,O,z=L.fill.charAt(L.fill.length-1);z!=="x"&&z!=="y"&&(z=""),m[0][c.isRangePlot?"nodeRangePlot3":"node3"]=S;var H="",Y=[],ee=L._prevtrace;ee&&(H=ee._prevRevpath||"",O=ee._nextFill,Y=ee._polygons);var j,X,ae="",fe="",K,J,U,V,q,re,Z,Q=[],ie=M.noop;if(R=L._ownFill,i.hasLines(L)||L.fill!=="none"){for(O&&O.datum(m),["hv","vh","hvh","vhv"].indexOf(E.shape)!==-1?(K=a.steps(E.shape),J=a.steps(E.shape.split("").reverse().join(""))):E.shape==="spline"?K=J=function(Ve){var Ae=Ve[Ve.length-1];return Ve.length>1&&Ve[0][0]===Ae[0]&&Ve[0][1]===Ae[1]?a.smoothclosed(Ve.slice(1),E.smoothing):a.smoothopen(Ve,E.smoothing)}:K=J=function(Ve){return"M"+Ve.join("L")},U=function(Ve){return J(Ve.reverse())},Q=n(m,{xaxis:w,yaxis:h,trace:L,connectGaps:L.connectgaps,baseTolerance:Math.max(E.width||1,3)/4,shape:E.shape,backoff:E.backoff,simplify:E.simplify,fill:L.fill}),Z=L._polygons=new Array(Q.length),A=0;A<Q.length;A++)L._polygons[A]=v(Q[A]);Q.length&&(V=Q[0][0],q=Q[Q.length-1],re=q[q.length-1]),ie=function(Ve){return function(Ae){if(j=K(Ae),X=U(Ae),ae?z?(ae+="L"+j.substr(1),fe=X+("L"+fe.substr(1))):(ae+="Z"+j,fe=X+"Z"+fe):(ae=j,fe=X),i.hasLines(L)&&Ae.length>1){var Ce=x.select(this);if(Ce.datum(m),Ve)p(Ce.style("opacity",0).attr("d",j).call(a.lineGroupStyle)).style("opacity",1);else{var Ze=p(Ce);Ze.attr("d",j),a.singleLineStyle(m,Ze)}}}}}var oe=F.selectAll(".js-line").data(Q);p(oe.exit()).style("opacity",0).remove(),oe.each(ie(!1)),oe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ie(!0)),a.setClipUrl(oe,c.layerClipId,g);function ne(Ve){p(Ve).attr("d","M0,0Z")}Q.length?(R?(R.datum(m),V&&re&&(z?(z==="y"?V[1]=re[1]=h.c2p(0,!0):z==="x"&&(V[0]=re[0]=w.c2p(0,!0)),p(R).attr("d","M"+re+"L"+V+"L"+ae.substr(1)).call(a.singleFillStyle,g)):p(R).attr("d",ae+"Z").call(a.singleFillStyle,g))):O&&(L.fill.substr(0,6)==="tonext"&&ae&&H?(L.fill==="tonext"?p(O).attr("d",ae+"Z"+H+"Z").call(a.singleFillStyle,g):p(O).attr("d",ae+"L"+H.substr(1)+"Z").call(a.singleFillStyle,g),L._polygons=L._polygons.concat(Y)):(ne(O),L._polygons=null)),L._prevRevpath=fe,L._prevPolygons=Z):(R?ne(R):O&&ne(O),L._polygons=L._prevRevpath=L._prevPolygons=null);function se(Ve){return Ve.filter(function(Ae){return!Ae.gap&&Ae.vis})}function _e(Ve){return Ve.filter(function(Ae){return Ae.vis})}function ue(Ve){return Ve.filter(function(Ae){return!Ae.gap})}function ge(Ve){return Ve.id}function xe(Ve){if(Ve.ids)return ge}function ye(){return!1}function be(Ve,Ae,Ce){var Ze,Ye,ze,Ie=Ce[0].trace,Ge=i.hasMarkers(Ie),dt=i.hasText(Ie),Rt=xe(Ie),Qt=ye,Bt=ye;if(Ge||dt){var Ct=e,Kt=Ie.stackgroup,Ot=Kt&&g._fullLayout._scatterStackOpts[w._id+h._id][Kt].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?Ct=Ot?_e:se:Kt&&!Ot&&(Ct=ue),Ge&&(Qt=Ct),dt&&(Bt=Ct)}Ye=Ve.selectAll("path.point"),Ze=Ye.data(Qt,Rt);var St=Ze.enter().append("path").classed("point",!0);_&&St.call(a.pointStyle,Ie,g).call(a.translatePoints,w,h).style("opacity",0).transition().style("opacity",1),Ze.order();var Xe;Ge&&(Xe=a.makePointStyleFns(Ie)),Ze.each(function(at){var We=x.select(this),Ee=p(We);ze=a.translatePoint(at,Ee,w,h),ze?(a.singlePointStyle(at,Ee,Ie,Xe,g),c.layerClipId&&a.hideOutsideRangePoint(at,Ee,w,h,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&We.classed("plotly-customdata",at.data!==null&&at.data!==void 0)):Ee.remove()}),_?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),Ye=Ae.selectAll("g"),Ze=Ye.data(Bt,Rt),Ze.enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(at){var We=x.select(this),Ee=p(We.select("text"));ze=a.translatePoint(at,Ee,w,h),ze?c.layerClipId&&a.hideOutsideRangePoint(at,We,w,h,Ie.xcalendar,Ie.ycalendar):We.remove()}),Ze.selectAll("text").call(a.textPointStyle,Ie,g).each(function(at){var We=w.c2p(at.x),Ee=h.c2p(at.y);x.select(this).selectAll("tspan.line").each(function(){p(x.select(this)).attr({x:We,y:Ee})})}),Ze.exit().remove()}I.datum(m),D.datum(m),be(I,D,m);var Se=L.cliponaxis===!1,Re=Se?null:c.layerClipId;a.setClipUrl(I,Re,g),a.setClipUrl(D,Re,g)}function b(g,d,c,m,l){var y=c.xaxis,u=c.yaxis,A=x.extent(M.simpleMap(y.range,y.r2c)),_=x.extent(M.simpleMap(u.range,u.r2c)),p=m[0].trace;if(!!i.hasMarkers(p)){var w=p.marker.maxdisplayed;if(w!==0){var h=m.filter(function(P){return P.x>=A[0]&&P.x<=A[1]&&P.y>=_[0]&&P.y<=_[1]}),L=Math.ceil(h.length/w),E=0;l.forEach(function(P,F){var I=P[0].trace;i.hasMarkers(I)&&I.marker.maxdisplayed>0&&F<d&&E++});var S=Math.round(E*L/3+Math.floor(E/3)*L/7.1);m.forEach(function(P){delete P.vis}),h.forEach(function(P,F){Math.round((F+S)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(t,B,G){var x=t("./subtypes");B.exports=function(M,T){var e=M.cd,a=M.xaxis,i=M.yaxis,n=[],r=e[0].trace,v,s,o,b,g=!x.hasMarkers(r)&&!x.hasText(r);if(g)return[];if(T===!1)for(v=0;v<e.length;v++)e[v].selected=0;else for(v=0;v<e.length;v++)s=e[v],o=a.c2p(s.x),b=i.c2p(s.y),s.i!==null&&T.contains([o,b],!1,v,M)?(n.push({pointNumber:s.i,x:a.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0;return n}},{"./subtypes":961}],959:[function(t,B,G){var x=["orientation","groupnorm","stackgaps"];B.exports=function(M,T,e,a){var i=e._scatterStackOpts,n=a("stackgroup");if(n){var r=T.xaxis+T.yaxis,v=i[r];v||(v=i[r]={});var s=v[n],o=!1;s?s.traces.push(T):(s=v[n]={traceIndices:[],traces:[T]},o=!0);for(var b={orientation:T.x&&!T.y?"h":"v"},g=0;g<x.length;g++){var d=x[g],c=d+"Found";if(!s[c]){var m=M[d]!==void 0,l=d==="orientation";if((m||o)&&(s[d]=a(d,b[d]),l&&(s.fillDflt=s[d]==="h"?"tonextx":"tonexty"),m&&(s[c]=!0,!o&&(delete s.traces[0][d],l))))for(var y=0;y<s.traces.length-1;y++){var u=s.traces[y];u._input.fill!==u.fill&&(u.fill=s.fillDflt)}}}return s}}},{}],960:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../../registry");function T(n){var r=x.select(n).selectAll("g.trace.scatter");r.style("opacity",function(v){return v[0].trace.opacity}),r.selectAll("g.points").each(function(v){var s=x.select(this),o=v.trace||v[0].trace;e(s,o,n)}),r.selectAll("g.text").each(function(v){var s=x.select(this),o=v.trace||v[0].trace;a(s,o,n)}),r.selectAll("g.trace path.js-line").call(f.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(f.fillGroupStyle,n),M.getComponentMethod("errorbars","style")(r)}function e(n,r,v){f.pointStyle(n.selectAll("path.point"),r,v)}function a(n,r,v){f.textPointStyle(n.selectAll("text"),r,v)}function i(n,r,v){var s=r[0].trace;s.selectedpoints?(f.selectedPointStyle(v.selectAll("path.point"),s),f.selectedTextStyle(v.selectAll("text"),s)):(e(v,s,n),a(v,s,n))}B.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:i}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(t,B,G){var x=t("../../lib");B.exports={hasLines:function(f){return f.visible&&f.mode&&f.mode.indexOf("lines")!==-1},hasMarkers:function(f){return f.visible&&(f.mode&&f.mode.indexOf("markers")!==-1||f.type==="splom")},hasText:function(f){return f.visible&&f.mode&&f.mode.indexOf("text")!==-1},isBubble:function(f){return x.isPlainObject(f.marker)&&x.isArrayOrTypedArray(f.marker.size)}}},{"../../lib":515}],962:[function(t,B,G){var x=t("../../lib");B.exports=function(f,M,T,e,a){a=a||{},e("textposition"),x.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(t,B,G){var x=t("../../lib"),f=t("../../registry");B.exports=function(T,e,a,i){var n=i("x"),r=i("y"),v,s=f.getComponentMethod("calendars","handleTraceDefaults");if(s(T,e,["x","y"],a),n){var o=x.minRowLength(n);r?v=Math.min(o,x.minRowLength(r)):(v=o,i("y0"),i("dy"))}else{if(!r)return 0;v=x.minRowLength(r),i("x0"),i("dx")}return e._length=v,v}},{"../../lib":515,"../../registry":647}],964:[function(t,B,G){var x=t("../scatter/attributes"),f=t("../../components/colorscale/attributes"),M=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../plots/attributes"),i=t("../../constants/gl3d_dashes"),n=t("../../constants/gl3d_markers"),r=t("../../lib/extend").extendFlat,v=t("../../plot_api/edit_types").overrideAll,s=t("../../lib/sort_object_keys"),o=x.line,b=x.marker,g=b.line,d=r({width:o.width,dash:{valType:"enumerated",values:s(i),dflt:"solid"}},f("line"));function c(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var m=B.exports=v({x:x.x,y:x.y,z:{valType:"data_array"},text:r({},x.text,{}),texttemplate:e({},{}),hovertext:r({},x.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),mode:r({},x.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:c(),y:c(),z:c()},connectgaps:x.connectgaps,line:d,marker:r({symbol:{valType:"enumerated",values:s(n),dflt:"circle",arrayOk:!0},size:r({},b.size,{dflt:8}),sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:r({},b.opacity,{arrayOk:!1}),colorbar:b.colorbar,line:r({width:r({},g.width,{arrayOk:!1})},f("marker.line"))},f("marker")),textposition:r({},x.textposition,{dflt:"top center"}),textfont:{color:x.textfont.color,size:x.textfont.size,family:r({},x.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:r({},a.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(t,B,G){var x=t("../scatter/arrays_to_calcdata"),f=t("../scatter/colorscale_calc");B.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return x(a,e),f(T,e),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(t,B,G){var x=t("../../registry");function f(e,a,i,n){if(!a||!a.visible)return null;for(var r=x.getComponentMethod("errorbars","makeComputeError")(a),v=new Array(e.length),s=0;s<e.length;s++){var o=r(+e[s],s);if(n.type==="log"){var b=n.c2l(e[s]),g=e[s]-o[0],d=e[s]+o[1];if(v[s]=[(n.c2l(g,!0)-b)*i,(n.c2l(d,!0)-b)*i],g>0){var c=n.c2l(g);n._lowerLogErrorBound||(n._lowerLogErrorBound=c),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,c)}}else v[s]=[-o[0]*i,o[1]*i]}return v}function M(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,i){var n=[f(e.x,e.error_x,a[0],i.xaxis),f(e.y,e.error_y,a[1],i.yaxis),f(e.z,e.error_z,a[2],i.zaxis)],r=M(n);if(r===0)return null;for(var v=new Array(r),s=0;s<r;s++){for(var o=[[0,0,0],[0,0,0]],b=0;b<3;b++)if(n[b])for(var g=0;g<2;g++)o[g][b]=n[b][s][g];v[s]=o}return v}B.exports=T},{"../../registry":647}],967:[function(t,B,G){var x=t("../../../stackgl_modules").gl_line3d,f=t("../../../stackgl_modules").gl_scatter3d,M=t("../../../stackgl_modules").gl_error3d,T=t("../../../stackgl_modules").gl_mesh3d,e=t("../../../stackgl_modules").delaunay_triangulate,a=t("../../lib"),i=t("../../lib/str2rgbarray"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/make_bubble_size_func"),v=t("../../constants/gl3d_dashes"),s=t("../../constants/gl3d_markers"),o=t("../../plots/cartesian/axes"),b=t("../../components/fx/helpers").appendArrayPointValue,g=t("./calc_errors");function d(P,F){this.scene=P,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=d.prototype;c.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var F=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(P.textLabel=this.textLabels[F]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function m(P,F,I){var D=(I+1)%3,R=(I+2)%3,O=[],z=[],H;for(H=0;H<P.length;++H){var Y=P[H];isNaN(Y[D])||!isFinite(Y[D])||isNaN(Y[R])||!isFinite(Y[R])||(O.push([Y[D],Y[R]]),z.push(H))}var ee=e(O);for(H=0;H<ee.length;++H)for(var j=ee[H],X=0;X<j.length;++X)j[X]=z[j[X]];return{positions:P,cells:ee,meshColor:F}}function l(P){for(var F=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var O=P[R];O&&O.copy_zstyle!==!1&&P[2].visible!==!1&&(O=P[2]),!(!O||!O.visible)&&(F[R]=O.width/2,I[R]=i(O.color),D[R]=O.thickness)}return{capSize:F,color:I,lineWidth:D}}function y(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function u(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function A(P){var F=0,I=0,D=[F,I];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[F,I],P[R]&&(D[R][0]=y(P[R]),D[R][1]=u(P[R]));else D[0]=y(P),D[1]=u(P);return D}function _(P,F){return F(P*4)}function p(P){return s[P]}function w(P,F,I,D,R){var O=null;if(a.isArrayOrTypedArray(P)){O=[];for(var z=0;z<F;z++)P[z]===void 0?O[z]=D:O[z]=I(P[z],R)}else O=I(P,a.identity);return O}function h(P,F){var I=[],D=P.fullSceneLayout,R=P.dataScale,O=D.xaxis,z=D.yaxis,H=D.zaxis,Y=F.marker,ee=F.line,j=F.x||[],X=F.y||[],ae=F.z||[],fe=j.length,K=F.xcalendar,J=F.ycalendar,U=F.zcalendar,V,q,re,Z,Q,ie;for(Q=0;Q<fe;Q++)V=O.d2l(j[Q],0,K)*R[0],q=z.d2l(X[Q],0,J)*R[1],re=H.d2l(ae[Q],0,U)*R[2],I[Q]=[V,q,re];if(Array.isArray(F.text))ie=F.text;else if(F.text!==void 0)for(ie=new Array(fe),Q=0;Q<fe;Q++)ie[Q]=F.text;function oe(Ye,ze){var Ie=D[Ye];return o.tickText(Ie,Ie.d2l(ze),!0).text}var ne=F.texttemplate;if(ne){var se=P.fullLayout,_e=se._d3locale,ue=Array.isArray(ne),ge=ue?Math.min(ne.length,fe):fe,xe=ue?function(Ye){return ne[Ye]}:function(){return ne};for(ie=new Array(ge),Q=0;Q<ge;Q++){var ye={x:j[Q],y:X[Q],z:ae[Q]},be={xLabel:oe("xaxis",j[Q]),yLabel:oe("yaxis",X[Q]),zLabel:oe("zaxis",ae[Q])},Se={};b(Se,F,Q);var Re=F._meta||{};ie[Q]=a.texttemplateString(xe(Q),be,_e,Se,ye,Re)}}if(Z={position:I,mode:F.mode,text:ie},"line"in F&&(Z.lineColor=n(ee,1,fe),Z.lineWidth=ee.width,Z.lineDashes=ee.dash),"marker"in F){var Ve=r(F);Z.scatterColor=n(Y,1,fe),Z.scatterSize=w(Y.size,fe,_,20,Ve),Z.scatterMarker=w(Y.symbol,fe,p,"\u25CF"),Z.scatterLineWidth=Y.line.width,Z.scatterLineColor=n(Y.line,1,fe),Z.scatterAngle=0}"textposition"in F&&(Z.textOffset=A(F.textposition),Z.textColor=n(F.textfont,1,fe),Z.textSize=w(F.textfont.size,fe,a.identity,12),Z.textFont=F.textfont.family,Z.textAngle=0);var Ae=["x","y","z"];for(Z.project=[!1,!1,!1],Z.projectScale=[1,1,1],Z.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Ce=F.projection[Ae[Q]];(Z.project[Q]=Ce.show)&&(Z.projectOpacity[Q]=Ce.opacity,Z.projectScale[Q]=Ce.scale)}Z.errorBounds=g(F,R,D);var Ze=l([F.error_x,F.error_y,F.error_z]);return Z.errorColor=Ze.color,Z.errorLineWidth=Ze.lineWidth,Z.errorCapSize=Ze.capSize,Z.delaunayAxis=F.surfaceaxis,Z.delaunayColor=i(F.surfacecolor),Z}function L(P){if(a.isArrayOrTypedArray(P)){var F=P[0];return a.isArrayOrTypedArray(F)&&(P=F),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function E(P){return a.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}c.update=function(P){var F=this.scene.glplot.gl,I,D,R,O,z=v.solid;this.data=P;var H=h(this.scene,P);"mode"in H&&(this.mode=H.mode),"lineDashes"in H&&H.lineDashes in v&&(z=v[H.lineDashes]),this.color=E(H.scatterColor)||E(H.lineColor),this.dataPoints=H.position,I={gl:this.scene.glplot.gl,position:H.position,color:H.lineColor,lineWidth:H.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=x(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Y=P.opacity;if(P.marker&&P.marker.opacity&&(Y*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:H.position,color:H.scatterColor,size:H.scatterSize,glyph:H.scatterMarker,opacity:Y,orthographic:!0,lineWidth:H.scatterLineWidth,lineColor:H.scatterLineColor,project:H.project,projectScale:H.projectScale,projectOpacity:H.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=f(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:H.position,glyph:H.text,color:H.textColor,size:H.textSize,angle:H.textAngle,alignment:H.textOffset,font:H.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=f(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:H.position,color:H.errorColor,error:H.errorBounds,lineWidth:H.errorLineWidth,capSize:H.errorCapSize,opacity:P.opacity},this.errorBars?H.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):H.errorBounds&&(this.errorBars=M(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),H.delaunayAxis>=0){var ee=m(H.position,H.delaunayColor,H.delaunayAxis);ee.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(ee):(ee.gl=F,this.delaunayMesh=T(ee),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function S(P,F){var I=new d(P,F.uid);return I.update(F),I}B.exports=S},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("./attributes");B.exports=function(v,s,o,b){function g(_,p){return f.coerce(v,s,i,_,p)}var d=n(v,s,g,b);if(!d){s.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),g("mode"),M.hasLines(s)&&(g("connectgaps"),e(v,s,o,b,g)),M.hasMarkers(s)&&T(v,s,o,b,g,{noSelect:!0,noAngle:!0}),M.hasText(s)&&(g("texttemplate"),a(v,s,b,g,{noSelect:!0}));var c=(s.line||{}).color,m=(s.marker||{}).color;g("surfaceaxis")>=0&&g("surfacecolor",c||m);for(var l=["x","y","z"],y=0;y<3;++y){var u="projection."+l[y];g(u+".show")&&(g(u+".opacity"),g(u+".scale"))}var A=x.getComponentMethod("errorbars","supplyDefaults");A(v,s,c||m||o,{axis:"z"}),A(v,s,c||m||o,{axis:"y",inherit:"z"}),A(v,s,c||m||o,{axis:"x",inherit:"z"})};function n(r,v,s,o){var b=0,g=s("x"),d=s("y"),c=s("z"),m=x.getComponentMethod("calendars","handleTraceDefaults");return m(r,v,["x","y","z"],o),g&&d&&c&&(b=Math.min(g.length,d.length,c.length),v._length=v._xlength=v._ylength=v._zlength=b),b}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(t,B,G){B.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(t,B,G){var x=t("../scatter/attributes"),f=t("../../plots/attributes"),M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../lib/extend").extendFlat,i=x.marker,n=x.line,r=i.line;B.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},x.mode,{dflt:"markers"}),text:a({},x.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},x.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:x.connectgaps,fill:a({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,angle:i.angle,angleref:i.angleref,standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:r.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:x.textfont,textposition:x.textposition,selected:x.selected,unselected:x.unselected,hoverinfo:a({},f.hoverinfo,{flags:["a","b","text","name"]}),hoveron:x.hoveron,hovertemplate:M()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../scatter/colorscale_calc"),M=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=t("../carpet/lookup_carpetid");B.exports=function(n,r){var v=r._carpetTrace=a(n,r);if(!(!v||!v.visible||v.visible==="legendonly")){var s;r.xaxis=v.xaxis,r.yaxis=v.yaxis;var o=r._length,b=new Array(o),g,d,c=!1;for(s=0;s<o;s++)if(g=r.a[s],d=r.b[s],x(g)&&x(d)){var m=v.ab2xy(+g,+d,!0),l=v.isVisible(+g,+d);l||(c=!0),b[s]={x:m[0],y:m[1],a:g,b:d,vis:l}}else b[s]={x:!1,y:!1};return r._needsCull=c,b[0].carpet=v,b[0].trace=r,e(r,o),f(n,r),M(b,r),T(b,r),b}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/constants"),M=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");B.exports=function(s,o,b,g){function d(_,p){return x.coerce(s,o,r,_,p)}d("carpet"),o.xaxis="x",o.yaxis="y";var c=d("a"),m=d("b"),l=Math.min(c.length,m.length);if(!l){o.visible=!1;return}o._length=l,d("text"),d("texttemplate"),d("hovertext");var y=l<f.PTS_LINESONLY?"lines+markers":"lines";d("mode",y),M.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),M.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),M.hasText(o)&&i(s,o,g,d);var u=[];(M.hasMarkers(o)||M.hasText(o))&&(d("marker.maxdisplayed"),u.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),M.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&u.push("fills");var A=d("hoveron",u.join("+")||"points");A!=="fills"&&d("hovertemplate"),x.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(t,B,G){B.exports=function(f,M,T,e,a){var i=e[a];return f.a=i.a,f.b=i.b,f.y=i.y,f}},{}],974:[function(t,B,G){B.exports=function(f,M){var T={},e=M._carpet,a=e.ab2ij([f.a,f.b]),i=Math.floor(a[0]),n=a[0]-i,r=Math.floor(a[1]),v=a[1]-r,s=e.evalxy([],i,r,n,v);return T.yLabel=s[1].toFixed(3),T}},{}],975:[function(t,B,G){var x=t("../scatter/hover"),f=t("../../lib").fillText;B.exports=function(T,e,a,i){var n=x(T,e,a,i);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var v=1-r.y0/T.ya._length,s=T.xa._length,o=s*v/2,b=s-o;return r.x0=Math.max(Math.min(r.x0,b),o),r.x1=Math.max(Math.min(r.x1,b),o),n}var g=r.cd[r.index];r.a=g.a,r.b=g.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var d=r.trace,c=d._carpet,m=d._module.formatLabels(g,d);r.yLabel=m.yLabel,delete r.text;var l=[];function y(_,p){var w;_.labelprefix&&_.labelprefix.length>0?w=_.labelprefix.replace(/ = $/,""):w=_._hovertitle,l.push(w+": "+p.toFixed(3)+_.labelsuffix)}if(!d.hovertemplate){var u=g.hi||d.hoverinfo,A=u.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&y(c.aaxis,g.a),A.indexOf("b")!==-1&&y(c.baxis,g.b),l.push("y: "+r.yLabel),A.indexOf("text")!==-1&&f(g,d,l),r.extraText=l.join("<br>")}return n}},{"../../lib":515,"../scatter/hover":947}],976:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:t("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(t,B,G){var x=t("../scatter/plot"),f=t("../../plots/cartesian/axes"),M=t("../../components/drawing");B.exports=function(e,a,i,n){var r,v,s,o=i[0][0].carpet,b=f.getFromId(e,o.xaxis||"x"),g=f.getFromId(e,o.yaxis||"y"),d={xaxis:b,yaxis:g,plot:a.plot};for(r=0;r<i.length;r++)v=i[r][0].trace,v._xA=b,v._yA=g;for(x(e,d,i,n),r=0;r<i.length;r++)v=i[r][0].trace,s=n.selectAll("g.trace"+v.uid+" .js-line"),M.setClipUrl(s,i[r][0].carpet._clipPathId,e)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=t("../../plot_api/edit_types").overrideAll,r=M.marker,v=M.line,s=r.line;B.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},M.mode,{dflt:"markers"}),text:i({},M.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},M.hovertext,{}),textfont:M.textfont,textposition:M.textposition,line:{color:v.color,width:v.width,dash:a},connectgaps:M.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:i({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:M.fillcolor,selected:M.selected,unselected:M.unselected,hoverinfo:i({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:x()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../constants/numerical").BADNUM,M=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../../lib")._;function i(n){return n&&typeof n=="string"}B.exports=function(r,v){var s=Array.isArray(v.locations),o=s?v.locations.length:v._length,b=new Array(o),g;v.geojson?g=function(u){return i(u)||x(u)}:g=i;for(var d=0;d<o;d++){var c=b[d]={};if(s){var m=v.locations[d];c.loc=g(m)?m:null}else{var l=v.lon[d],y=v.lat[d];x(l)&&x(y)?c.lonlat=[+l,+y]:c.lonlat=[f,f]}}return T(b,v),M(r,v),e(b,v),o&&(b[0].t={labels:{lat:a(r,"lat:")+" ",lon:a(r,"lon:")+" "}}),b}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/subtypes"),M=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");B.exports=function(r,v,s,o){function b(A,_){return x.coerce(r,v,i,A,_)}var g=b("locations"),d;if(g&&g.length){var c=b("geojson"),m;(typeof c=="string"&&c!==""||x.isPlainObject(c))&&(m="geojson-id");var l=b("locationmode",m);l==="geojson-id"&&b("featureidkey"),d=g.length}else{var y=b("lon")||[],u=b("lat")||[];d=Math.min(y.length,u.length)}if(!d){v.visible=!1;return}v._length=d,b("text"),b("hovertext"),b("hovertemplate"),b("mode"),f.hasLines(v)&&(T(r,v,s,o,b),b("connectgaps")),f.hasMarkers(v)&&M(r,v,s,o,b,{gradient:!0}),f.hasText(v)&&(b("texttemplate"),e(r,v,o,b)),b("fill"),v.fill!=="none"&&a(r,v,s,b),x.coerceSelectionMarkerOpacity(v,b)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(t,B,G){B.exports=function(f,M,T,e,a){f.lon=M.lon,f.lat=M.lat,f.location=M.loc?M.loc:null;var i=e[a];return i.fIn&&i.fIn.properties&&(f.properties=i.fIn.properties),f}},{}],982:[function(t,B,G){var x=t("../../plots/cartesian/axes");B.exports=function(M,T,e){var a={},i=e[T.geo]._subplot,n=i.mockAxis,r=M.lonlat;return a.lonLabel=x.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=x.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(t,B,G){var x=t("../../components/fx"),f=t("../../constants/numerical").BADNUM,M=t("../scatter/get_trace_color"),T=t("../../lib").fillText,e=t("./attributes");B.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.xa,g=n.ya,d=n.subplot,c=d.projection.isLonLatOverEdges,m=d.project;function l(h){var L=h.lonlat;if(L[0]===f||c(L))return 1/0;var E=m(L),S=m([r,v]),P=Math.abs(E[0]-S[0]),F=Math.abs(E[1]-S[1]),I=Math.max(3,h.mrc||0);return Math.max(Math.sqrt(P*P+F*F)-I,1-3/I)}if(x.getClosest(s,l,n),n.index!==!1){var y=s[n.index],u=y.lonlat,A=[b.c2p(u),g.c2p(u)],_=y.mrc||1;n.x0=A[0]-_,n.x1=A[0]+_,n.y0=A[1]-_,n.y1=A[1]+_,n.loc=y.loc,n.lon=u[0],n.lat=u[1];var p={};p[o.geo]={_subplot:d};var w=o._module.formatLabels(y,o,p);return n.lonLabel=w.lonLabel,n.latLabel=w.latLabel,n.color=M(o,y),n.extraText=a(o,y,n,s[0].t.labels),n.hovertemplate=o.hovertemplate,[n]}};function a(i,n,r,v){if(i.hovertemplate)return;var s=n.hi||i.hoverinfo,o=s==="all"?e.hoverinfo.flags:s.split("+"),b=o.indexOf("location")!==-1&&Array.isArray(i.locations),g=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,c=o.indexOf("text")!==-1,m=[];function l(y){return y+"\xB0"}return b?m.push(n.loc):g&&d?m.push("("+l(r.latLabel)+", "+l(r.lonLabel)+")"):g?m.push(v.lon+l(r.lonLabel)):d&&m.push(v.lat+l(r.latLabel)),c&&T(n,i,m),m.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:t("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../lib/topojson_utils").getTopojsonFeatures,T=t("../../lib/geojson_utils"),e=t("../../lib/geo_location_utils"),a=t("../../plots/cartesian/autorange").findExtremes,i=t("../../constants/numerical").BADNUM,n=t("../scatter/calc").calcMarkerSize,r=t("../scatter/subtypes"),v=t("./style");function s(b,g,d){var c=g.layers.frontplot.select(".scatterlayer"),m=f.makeTraceGroups(c,d,"trace scattergeo");function l(y,u){y.lonlat[0]===i&&x.select(u).remove()}m.selectAll("*").remove(),m.each(function(y){var u=x.select(this),A=y[0].trace;if(r.hasLines(A)||A.fill!=="none"){var _=T.calcTraceToLineCoords(y),p=A.fill!=="none"?T.makePolygon(_):T.makeLine(_);u.selectAll("path.js-line").data([{geojson:p,trace:A}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(A)&&u.selectAll("path.point").data(f.identity).enter().append("path").classed("point",!0).each(function(w){l(w,this)}),r.hasText(A)&&u.selectAll("g").data(f.identity).enter().append("g").append("text").each(function(w){l(w,this)}),v(b,y)})}function o(b,g){var d=b[0].trace,c=g[d.geo],m=c._subplot,l=d._length,y,u;if(Array.isArray(d.locations)){var A=d.locationmode,_=A==="geojson-id"?e.extractTraceFeature(b):M(d,m.topojson);for(y=0;y<l;y++){u=b[y];var p=A==="geojson-id"?u.fOut:e.locationToFeature(A,u.loc,_);u.lonlat=p?p.properties.ct:[i,i]}}var w={padded:!0},h,L;if(c.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var E=e.computeBbox(e.getTraceGeojson(d));h=[E[0],E[2]],L=[E[1],E[3]]}else{for(h=new Array(l),L=new Array(l),y=0;y<l;y++)u=b[y],h[y]=u.lonlat[0],L[y]=u.lonlat[1];w.ppad=n(d,l)}d._extremes.lon=a(c.lonaxis._ax,h,w),d._extremes.lat=a(c.lataxis._ax,L,w)}B.exports={calcGeoJSON:o,plot:s}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(t,B,G){var x=t("../scatter/subtypes"),f=t("../../constants/numerical").BADNUM;B.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s,o,b,g,d,c=!x.hasMarkers(v)&&!x.hasText(v);if(c)return[];if(e===!1)for(d=0;d<a.length;d++)a[d].selected=0;else for(d=0;d<a.length;d++)s=a[d],o=s.lonlat,o[0]!==f&&(b=i.c2p(o),g=n.c2p(o),e.contains([b,g],null,d,T)?(r.push({pointNumber:d,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0);return r}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../../components/color"),T=t("../scatter/style"),e=T.stylePoints,a=T.styleText;B.exports=function(r,v){v&&i(r,v)};function i(n,r){var v=r[0].trace,s=r[0].node3;s.style("opacity",r[0].trace.opacity),e(s,v,n),a(s,v,n),s.selectAll("path.js-line").style("fill","none").each(function(o){var b=x.select(this),g=o.trace,d=g.line||{};b.call(M.stroke,d.color).call(f.dashLine,d.dash||"",d.width||0),g.fill!=="none"&&b.call(M.fill,g.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(t,B,G){var x=t("../../plots/attributes"),f=t("../scatter/attributes"),M=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/colorscale/attributes"),e=t("../../lib/sort_object_keys"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll,n=t("./constants").DASHES,r=f.line,v=f.marker,s=v.line,o=B.exports=i({x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:f.text,hovertext:f.hovertext,textposition:f.textposition,textfont:f.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(n),dflt:"solid"}},marker:a({},T("marker"),{symbol:v.symbol,angle:v.angle,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:a({},T("marker.line"),{width:s.width})}),connectgaps:f.connectgaps,fill:a({},f.fill,{dflt:"none"}),fillcolor:f.fillcolor,selected:{marker:f.selected.marker,textfont:f.selected.textfont},unselected:{marker:f.unselected.marker,textfont:f.unselected.textfont},opacity:x.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=f.hovertemplate,o.texttemplate=f.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(t,B,G){var x=t("./hover");B.exports={moduleType:"trace",name:"scattergl",basePlotModule:t("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../scatter/cross_trace_defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:x.hoverPoints,selectPoints:t("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(t,B,G){var x=t("@plotly/point-cluster"),f=t("../../lib"),M=t("../../plots/cartesian/axis_ids"),T=t("../../plots/cartesian/autorange").findExtremes,e=t("../../plots/cartesian/align_period"),a=t("../scatter/calc"),i=a.calcMarkerSize,n=a.calcAxisExpansion,r=a.setFirstScatter,v=t("../scatter/colorscale_calc"),s=t("./convert"),o=t("./scene_update"),b=t("../../constants/numerical").BADNUM,g=t("./constants").TOO_MANY_POINTS;B.exports=function(l,y){var u=l._fullLayout,A=y._xA=M.getFromId(l,y.xaxis,"x"),_=y._yA=M.getFromId(l,y.yaxis,"y"),p=u._plots[y.xaxis+y.yaxis],w=y._length,h=w>=g,L=w*2,E={},S,P=A.makeCalcdata(y,"x"),F=_.makeCalcdata(y,"y"),I=e(y,A,"x",P),D=e(y,_,"y",F),R=I.vals,O=D.vals;y._x=R,y._y=O,y.xperiodalignment&&(y._origX=P,y._xStarts=I.starts,y._xEnds=I.ends),y.yperiodalignment&&(y._origY=F,y._yStarts=D.starts,y._yEnds=D.ends);var z=new Array(L),H=new Array(w);for(S=0;S<w;S++)z[S*2]=R[S]===b?NaN:R[S],z[S*2+1]=O[S]===b?NaN:O[S],H[S]=S;if(A.type==="log")for(S=0;S<L;S+=2)z[S]=A.c2l(z[S]);if(_.type==="log")for(S=1;S<L;S+=2)z[S]=_.c2l(z[S]);h&&A.type!=="log"&&_.type!=="log"?E.tree=x(z):E.ids=H,v(l,y);var Y=c(l,p,y,z,R,O),ee=o(l,p);r(u,y);var j;return h?Y.marker&&(j=Y.marker.sizeAvg||Math.max(Y.marker.size,3)):j=i(y,w),n(l,y,A,_,R,O,j),Y.errorX&&d(y,A,Y.errorX),Y.errorY&&d(y,_,Y.errorY),Y.fill&&!ee.fill2d&&(ee.fill2d=!0),Y.marker&&!ee.scatter2d&&(ee.scatter2d=!0),Y.line&&!ee.line2d&&(ee.line2d=!0),(Y.errorX||Y.errorY)&&!ee.error2d&&(ee.error2d=!0),Y.text&&!ee.glText&&(ee.glText=!0),Y.marker&&(Y.marker.snap=w),ee.lineOptions.push(Y.line),ee.errorXOptions.push(Y.errorX),ee.errorYOptions.push(Y.errorY),ee.fillOptions.push(Y.fill),ee.markerOptions.push(Y.marker),ee.markerSelectedOptions.push(Y.markerSel),ee.markerUnselectedOptions.push(Y.markerUnsel),ee.textOptions.push(Y.text),ee.textSelectedOptions.push(Y.textSel),ee.textUnselectedOptions.push(Y.textUnsel),ee.selectBatch.push([]),ee.unselectBatch.push([]),E._scene=ee,E.index=ee.count,E.x=R,E.y=O,E.positions=z,ee.count++,[{x:!1,y:!1,t:E,trace:y}]};function d(m,l,y){var u=m._extremes[l._id],A=T(l,y._bnds,{padded:!0});u.min=u.min.concat(A.min),u.max=u.max.concat(A.max)}function c(m,l,y,u,A,_){var p=s.style(m,y);if(p.marker&&(p.marker.positions=u),p.line&&u.length>1&&f.extendFlat(p.line,s.linePositions(m,y,u)),p.errorX||p.errorY){var w=s.errorBarPositions(m,y,u,A,_);p.errorX&&f.extendFlat(p.errorX,w.x),p.errorY&&f.extendFlat(p.errorY,w.y)}return p.text&&(f.extendFlat(p.text,{positions:u},s.textPosition(m,y,p.text,p.marker)),f.extendFlat(p.textSel,{positions:u},s.textPosition(m,y,p.text,p.markerSel)),f.extendFlat(p.textUnsel,{positions:u},s.textPosition(m,y,p.text,p.markerUnsel))),p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(t,B,G){var x=20;B.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:x,SYMBOL_STROKE:x/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(t,B,G){var x=t("fast-isnumeric"),f=t("svg-path-sdf"),M=t("color-normalize"),T=t("../../registry"),e=t("../../lib"),a=t("../../components/drawing"),i=t("../../plots/cartesian/axis_ids"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/subtypes"),v=t("../scatter/make_bubble_size_func"),s=t("./helpers"),o=t("./constants"),b=t("../../constants/interactions").DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=t("../../components/fx/helpers").appendArrayPointValue;function c(I,D){var R,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(D.visible!==!0)return O;if(r.hasText(D)&&(O.text=m(I,D),O.textSel=u(I,D,D.selected),O.textUnsel=u(I,D,D.unselected)),r.hasMarkers(D)&&(O.marker=l(I,D),O.markerSel=y(I,D,D.selected),O.markerUnsel=y(I,D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var H=D.marker.opacity;for(O.markerUnsel.opacity=new Array(H.length),R=0;R<H.length;R++)O.markerUnsel.opacity[R]=b*H[R]}if(r.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var Y=(o.DASHES[D.line.dash]||[1]).slice();for(R=0;R<Y.length;++R)Y[R]*=D.line.width*z;O.line.dashes=Y}return D.error_x&&D.error_x.visible&&(O.errorX=A(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(O.errorY=A(D,D.error_y,z)),!!D.fill&&D.fill!=="none"&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O}function m(I,D){var R=I._fullLayout,O=D._length,z=D.textfont,H=D.textposition,Y=Array.isArray(H)?H:[H],ee=z.color,j=z.size,X=z.family,ae={},fe,K=I._context.plotGlPixelRatio,J=D.texttemplate;if(J){ae.text=[];var U=R._d3locale,V=Array.isArray(J),q=V?Math.min(J.length,O):O,re=V?function(_e){return J[_e]}:function(){return J};for(fe=0;fe<q;fe++){var Z={i:fe},Q=D._module.formatLabels(Z,D,R),ie={};d(ie,D,fe);var oe=D._meta||{};ae.text.push(e.texttemplateString(re(fe),Q,U,ie,Z,oe))}}else Array.isArray(D.text)&&D.text.length<O?ae.text=D.text.slice():ae.text=D.text;if(Array.isArray(ae.text))for(fe=ae.text.length;fe<O;fe++)ae.text[fe]="";for(ae.opacity=D.opacity,ae.font={},ae.align=[],ae.baseline=[],fe=0;fe<Y.length;fe++){var ne=Y[fe].split(/\s+/);switch(ne[1]){case"left":ae.align.push("right");break;case"right":ae.align.push("left");break;default:ae.align.push(ne[1])}switch(ne[0]){case"top":ae.baseline.push("bottom");break;case"bottom":ae.baseline.push("top");break;default:ae.baseline.push(ne[0])}}if(Array.isArray(ee))for(ae.color=new Array(O),fe=0;fe<O;fe++)ae.color[fe]=ee[fe];else ae.color=ee;if(e.isArrayOrTypedArray(j)||Array.isArray(X))for(ae.font=new Array(O),fe=0;fe<O;fe++){var se=ae.font[fe]={};se.size=(e.isTypedArray(j)?j[fe]:Array.isArray(j)?x(j[fe])?j[fe]:0:j)*K,se.family=Array.isArray(X)?X[fe]:X}else ae.font={size:j*K,family:X};return ae}function l(I,D){var R=D._length,O=D.marker,z={},H,Y=e.isArrayOrTypedArray(O.symbol),ee=e.isArrayOrTypedArray(O.angle),j=e.isArrayOrTypedArray(O.color),X=e.isArrayOrTypedArray(O.line.color),ae=e.isArrayOrTypedArray(O.opacity),fe=e.isArrayOrTypedArray(O.size),K=e.isArrayOrTypedArray(O.line.width),J;if(Y||(J=s.isOpenSymbol(O.symbol)),Y||j||X||ae||ee){z.symbols=new Array(R),z.angles=new Array(R),z.colors=new Array(R),z.borderColors=new Array(R);var U=O.symbol,V=O.angle,q=n(O,O.opacity,R),re=n(O.line,O.opacity,R);if(!Array.isArray(re[0])){var Z=re;for(re=Array(R),H=0;H<R;H++)re[H]=Z}if(!Array.isArray(q[0])){var Q=q;for(q=Array(R),H=0;H<R;H++)q[H]=Q}if(!Array.isArray(U)){var ie=U;for(U=Array(R),H=0;H<R;H++)U[H]=ie}if(!Array.isArray(V)){var oe=V;for(V=Array(R),H=0;H<R;H++)V[H]=oe}for(z.symbols=U,z.angles=V,z.colors=q,z.borderColors=re,H=0;H<R;H++)Y&&(J=s.isOpenSymbol(O.symbol[H])),J&&(re[H]=q[H].slice(),q[H]=q[H].slice(),q[H][3]=0);for(z.opacity=D.opacity,z.markers=new Array(R),H=0;H<R;H++)z.markers[H]=E({mx:z.symbols[H],ma:z.angles[H]},D)}else J?(z.color=M(O.color,"uint8"),z.color[3]=0,z.borderColor=M(O.color,"uint8")):(z.color=M(O.color,"uint8"),z.borderColor=M(O.line.color,"uint8")),z.opacity=D.opacity*O.opacity,z.marker=E({mx:O.symbol,ma:O.angle},D);var ne=1,se=v(D,ne),_e;if(fe||K){var ue=z.sizes=new Array(R),ge=z.borderSizes=new Array(R),xe=0,ye;if(fe){for(H=0;H<R;H++)ue[H]=se(O.size[H]),xe+=ue[H];ye=xe/R}else for(_e=se(O.size),H=0;H<R;H++)ue[H]=_e;if(K)for(H=0;H<R;H++)ge[H]=O.line.width[H];else for(_e=O.line.width,H=0;H<R;H++)ge[H]=_e;z.sizeAvg=ye}else z.size=se(O&&O.size||10),z.borderSizes=se(O.line.width);return z}function y(I,D,R){var O=D.marker,z={};return R&&(R.marker&&R.marker.symbol?z=l(I,e.extendFlat({},O,R.marker)):R.marker&&(R.marker.size&&(z.size=R.marker.size),R.marker.color&&(z.colors=R.marker.color),R.marker.opacity!==void 0&&(z.opacity=R.marker.opacity))),z}function u(I,D,R){var O={};if(!R)return O;if(R.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(z.textfont,R.textfont),O=m(I,z)}return O}function A(I,D,R){var O={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(O=I.error_y),O}var _=o.SYMBOL_SDF_SIZE,p=o.SYMBOL_SIZE,w=o.SYMBOL_STROKE,h={},L=a.symbolFuncs[0](p*.05);function E(I,D){var R=I.mx;if(R==="circle")return null;var O,z,H=a.symbolNumber(R),Y=a.symbolFuncs[H%100],ee=!!a.symbolNoDot[H%100],j=!!a.symbolNoFill[H%100],X=s.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),h[R])return h[R];var ae=a.getMarkerAngle(I,D);return X&&!ee?O=Y(p*1.1,ae)+L:O=Y(p,ae),z=f(O,{w:_,h:_,viewBox:[-p,-p,p,p],stroke:j?w:-w}),h[R]=z,z||null}function S(I,D,R){var O=R.length,z=O/2,H,Y;if(r.hasLines(D)&&z)if(D.line.shape==="hv"){for(H=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?H.push(NaN,NaN,NaN,NaN):(H.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?H.push(R[Y*2+2],R[Y*2+1]):H.push(NaN,NaN));H.push(R[O-2],R[O-1])}else if(D.line.shape==="hvh"){for(H=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?H.push(R[Y*2],R[Y*2+1]):H.push(NaN,NaN),H.push(NaN,NaN);else{var ee=(R[Y*2]+R[Y*2+2])/2;H.push(R[Y*2],R[Y*2+1],ee,R[Y*2+1],ee,R[Y*2+3])}H.push(R[O-2],R[O-1])}else if(D.line.shape==="vhv"){for(H=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?H.push(R[Y*2],R[Y*2+1]):H.push(NaN,NaN),H.push(NaN,NaN);else{var j=(R[Y*2+1]+R[Y*2+3])/2;H.push(R[Y*2],R[Y*2+1],R[Y*2],j,R[Y*2+2],j)}H.push(R[O-2],R[O-1])}else if(D.line.shape==="vh"){for(H=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?H.push(NaN,NaN,NaN,NaN):(H.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?H.push(R[Y*2],R[Y*2+3]):H.push(NaN,NaN));H.push(R[O-2],R[O-1])}else H=R;var X=!1;for(Y=0;Y<H.length;Y++)if(isNaN(H[Y])){X=!0;break}var ae=X||H.length>o.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(X&&D.connectgaps){var fe=H[0],K=H[1];for(Y=0;Y<H.length;Y+=2)isNaN(H[Y])||isNaN(H[Y+1])?(H[Y]=fe,H[Y+1]=K):(fe=H[Y],K=H[Y+1])}return{join:ae,positions:H}}function P(I,D,R,O,z){var H=T.getComponentMethod("errorbars","makeComputeError"),Y=i.getFromId(I,D.xaxis,"x"),ee=i.getFromId(I,D.yaxis,"y"),j=R.length/2,X={};function ae(fe,K){var J=K._id.charAt(0),U=D["error_"+J];if(U&&U.visible&&(K.type==="linear"||K.type==="log")){for(var V=H(U),q={x:0,y:1}[J],re={x:[0,1,2,3],y:[2,3,0,1]}[J],Z=new Float64Array(4*j),Q=1/0,ie=-1/0,oe=0,ne=0;oe<j;oe++,ne+=4){var se=fe[oe];if(x(se)){var _e=R[oe*2+q],ue=V(se,oe),ge=ue[0],xe=ue[1];if(x(ge)&&x(xe)){var ye=se-ge,be=se+xe;Z[ne+re[0]]=_e-K.c2l(ye),Z[ne+re[1]]=K.c2l(be)-_e,Z[ne+re[2]]=0,Z[ne+re[3]]=0,Q=Math.min(Q,se-ge),ie=Math.max(ie,se+xe)}}}X[J]={positions:R,errors:Z,_bnds:[Q,ie]}}}return ae(O,Y),ae(z,ee),X}function F(I,D,R,O){var z=D._length,H={},Y;if(r.hasMarkers(D)){var ee=R.font,j=R.align,X=R.baseline;for(H.offset=new Array(z),Y=0;Y<z;Y++){var ae=O.sizes?O.sizes[Y]:O.size,fe=Array.isArray(ee)?ee[Y].size:ee.size,K=Array.isArray(j)?j.length>1?j[Y]:j[0]:j,J=Array.isArray(X)?X.length>1?X[Y]:X[0]:X,U=g[K],V=g[J],q=ae?ae/.8+1:0,re=-V*q-V*.5;H.offset[Y]=[U*q/fe,re/fe]}}return H}B.exports={style:c,markerStyle:l,markerSelection:y,linePositions:S,errorBarPositions:P,textPosition:F}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(t,B,G){var x=t("../../lib"),f=t("../../registry"),M=t("./helpers"),T=t("./attributes"),e=t("../scatter/constants"),a=t("../scatter/subtypes"),i=t("../scatter/xy_defaults"),n=t("../scatter/period_defaults"),r=t("../scatter/marker_defaults"),v=t("../scatter/line_defaults"),s=t("../scatter/fillcolor_defaults"),o=t("../scatter/text_defaults");B.exports=function(g,d,c,m){function l(L,E){return x.coerce(g,d,T,L,E)}var y=g.marker?M.isOpenSymbol(g.marker.symbol):!1,u=a.isBubble(g),A=i(g,d,m,l);if(!A){d.visible=!1;return}n(g,d,m,l),l("xhoverformat"),l("yhoverformat");var _=A<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",_),a.hasLines(d)&&(l("connectgaps"),v(g,d,c,m,l),l("line.shape")),a.hasMarkers(d)&&(r(g,d,c,m,l,{noAngleRef:!0,noStandOff:!0}),l("marker.line.width",y||u?1:0)),a.hasText(d)&&(l("texttemplate"),o(g,d,m,l));var p=(d.line||{}).color,w=(d.marker||{}).color;l("fill"),d.fill!=="none"&&s(g,d,c,l);var h=f.getComponentMethod("errorbars","supplyDefaults");h(g,d,p||w||c,{axis:"y"}),h(g,d,p||w||c,{axis:"x",inherit:"y"}),x.coerceSelectionMarkerOpacity(d,l)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],i=a.trace,n=a.t,r=n._scene,v=n.index,s=r.selectBatch[v],o=r.unselectBatch[v],b=r.textOptions[v],g=r.textSelectedOptions[v]||{},d=r.textUnselectedOptions[v]||{},c=x.extendFlat({},b),m,l;if(s.length||o.length){var y=g.color,u=d.color,A=b.color,_=Array.isArray(A);for(c.color=new Array(i._length),m=0;m<s.length;m++)l=s[m],c.color[l]=y||(_?A[l]:A);for(m=0;m<o.length;m++){l=o[m];var p=_?A[l]:A;c.color[l]=u||(y?p:f.addOpacity(p,M))}}r.glText[v].update(c)}B.exports={styleTextSelection:T}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(t,B,G){var x=t("../scatter/format_labels");B.exports=function(M,T,e){var a=M.i;return"x"in M||(M.x=T._x[a]),"y"in M||(M.y=T._y[a]),x(M,T,e)}},{"../scatter/format_labels":945}],996:[function(t,B,G){var x=t("./constants");G.isOpenSymbol=function(f){return typeof f=="string"?x.OPEN_RE.test(f):f%200>100},G.isDotSymbol=function(f){return typeof f=="string"?x.DOT_RE.test(f):f>200}},{"./constants":991}],997:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../scatter/get_trace_color");function T(a,i,n,r){var v=a.cd,s=v[0].t,o=v[0].trace,b=a.xa,g=a.ya,d=s.x,c=s.y,m=b.c2p(i),l=g.c2p(n),y=a.distance,u;if(s.tree){var A=b.p2c(m-y),_=b.p2c(m+y),p=g.p2c(l-y),w=g.p2c(l+y);r==="x"?u=s.tree.range(Math.min(A,_),Math.min(g._rl[0],g._rl[1]),Math.max(A,_),Math.max(g._rl[0],g._rl[1])):u=s.tree.range(Math.min(A,_),Math.min(p,w),Math.max(A,_),Math.max(p,w))}else u=s.ids;var h,L,E,S,P,F,I,D,R,O=y;if(r==="x"){var z=!!o.xperiodalignment,H=!!o.yperiodalignment;for(P=0;P<u.length;P++){if(h=u[P],E=d[h],F=Math.abs(b.c2p(E)-m),z){var Y=b.c2p(o._xStarts[h]),ee=b.c2p(o._xEnds[h]);F=m>=Math.min(Y,ee)&&m<=Math.max(Y,ee)?0:1/0}if(F<O){if(O=F,S=c[h],I=g.c2p(S)-l,H){var j=g.c2p(o._yStarts[h]),X=g.c2p(o._yEnds[h]);I=l>=Math.min(j,X)&&l<=Math.max(j,X)?0:1/0}R=Math.sqrt(F*F+I*I),L=u[P]}}}else for(P=u.length-1;P>-1;P--)h=u[P],E=d[h],S=c[h],F=b.c2p(E)-m,I=g.c2p(S)-l,D=Math.sqrt(F*F+I*I),D<O&&(O=R=D,L=h);return a.index=L,a.distance=O,a.dxy=R,L===void 0?[a]:[e(a,d,c,o)]}function e(a,i,n,r){var v=a.xa,s=a.ya,o=a.distance,b=a.dxy,g=a.index,d={pointNumber:g,x:i[g],y:n[g]};d.tx=Array.isArray(r.text)?r.text[g]:r.text,d.htx=Array.isArray(r.hovertext)?r.hovertext[g]:r.hovertext,d.data=Array.isArray(r.customdata)?r.customdata[g]:r.customdata,d.tp=Array.isArray(r.textposition)?r.textposition[g]:r.textposition;var c=r.textfont;c&&(d.ts=f.isArrayOrTypedArray(c.size)?c.size[g]:c.size,d.tc=Array.isArray(c.color)?c.color[g]:c.color,d.tf=Array.isArray(c.family)?c.family[g]:c.family);var m=r.marker;m&&(d.ms=f.isArrayOrTypedArray(m.size)?m.size[g]:m.size,d.mo=f.isArrayOrTypedArray(m.opacity)?m.opacity[g]:m.opacity,d.mx=f.isArrayOrTypedArray(m.symbol)?m.symbol[g]:m.symbol,d.ma=f.isArrayOrTypedArray(m.angle)?m.angle[g]:m.angle,d.mc=f.isArrayOrTypedArray(m.color)?m.color[g]:m.color);var l=m&&m.line;l&&(d.mlc=Array.isArray(l.color)?l.color[g]:l.color,d.mlw=f.isArrayOrTypedArray(l.width)?l.width[g]:l.width);var y=m&&m.gradient;y&&y.type!=="none"&&(d.mgt=Array.isArray(y.type)?y.type[g]:y.type,d.mgc=Array.isArray(y.color)?y.color[g]:y.color);var u=v.c2p(d.x,!0),A=s.c2p(d.y,!0),_=d.mrc||1,p=r.hoverlabel;p&&(d.hbg=Array.isArray(p.bgcolor)?p.bgcolor[g]:p.bgcolor,d.hbc=Array.isArray(p.bordercolor)?p.bordercolor[g]:p.bordercolor,d.hts=f.isArrayOrTypedArray(p.font.size)?p.font.size[g]:p.font.size,d.htc=Array.isArray(p.font.color)?p.font.color[g]:p.font.color,d.htf=Array.isArray(p.font.family)?p.font.family[g]:p.font.family,d.hnl=f.isArrayOrTypedArray(p.namelength)?p.namelength[g]:p.namelength);var w=r.hoverinfo;w&&(d.hi=Array.isArray(w)?w[g]:w);var h=r.hovertemplate;h&&(d.ht=Array.isArray(h)?h[g]:h);var L={};L[a.index]=d;var E=r._origX,S=r._origY,P=f.extendFlat({},a,{color:M(r,d),x0:u-_,x1:u+_,xLabelVal:E?E[g]:d.x,y0:A-_,y1:A+_,yLabelVal:S?S[g]:d.y,cd:L,distance:o,spikeDistance:b,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:r.text&&(P.text=r.text),f.fillText(d,r,P),x.getComponentMethod("errorbars","hoverInfo")(d,r,P),P}B.exports={hoverPoints:T,calcHover:e}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(t,B,G){arguments[4][905][0].apply(G,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(t,B,b){var x=t("regl-scatter2d"),f=t("regl-line2d"),M=t("regl-error2d"),T=t("gl-text"),e=t("../../lib"),a=t("../../components/dragelement/helpers").selectMode,i=t("../../lib/prepare_regl"),n=t("../scatter/subtypes"),r=t("../scatter/link_traces"),v=t("./edit_style").styleTextSelection,s={};function o(g,d,c,m){var l=g._size,y=g.width*m,u=g.height*m,A=l.l*m,_=l.b*m,p=l.r*m,w=l.t*m,h=l.w*m,L=l.h*m;return[A+d.domain[0]*h,_+c.domain[0]*L,y-p-(1-d.domain[1])*h,u-w-(1-c.domain[1])*L]}var b=B.exports=function(d,c,m){if(!!m.length){var l=d._fullLayout,y=c._scene,u=c.xaxis,A=c.yaxis,_,p;if(!!y){var w=i(d,["ANGLE_instanced_arrays","OES_element_index_uint"],s);if(!w){y.init();return}var h=y.count,L=l._glcanvas.data()[0].regl;if(r(d,c,m),y.dirty){if(y.error2d===!0&&(y.error2d=M(L)),y.line2d===!0&&(y.line2d=f(L)),y.scatter2d===!0&&(y.scatter2d=x(L)),y.fill2d===!0&&(y.fill2d=f(L)),y.glText===!0)for(y.glText=new Array(h),_=0;_<h;_++)y.glText[_]=new T(L);if(y.glText){if(h>y.glText.length){var E=h-y.glText.length;for(_=0;_<E;_++)y.glText.push(new T(L))}else if(h<y.glText.length){var S=y.glText.length-h,P=y.glText.splice(h,S);P.forEach(function(Z){Z.destroy()})}for(_=0;_<h;_++)y.glText[_].update(y.textOptions[_])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(Z){if(Z&&Z.positions){for(var Q=Z.positions,ie=0;ie<Q.length&&(isNaN(Q[ie])||isNaN(Q[ie+1]));)ie+=2;for(var oe=Q.length-2;oe>ie&&(isNaN(Q[oe])||isNaN(Q[oe+1]));)oe-=2;Z.positions=Q.slice(ie,oe+2)}return Z}),y.line2d.update(y.lineOptions)),y.error2d){var F=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(F)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=e.repeat(null,h),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(Z,Q){var ie=m[Q];if(!(!Z||!ie||!ie[0]||!ie[0].trace)){var oe=ie[0],ne=oe.trace,se=oe.t,_e=y.lineOptions[Q],ue,ge,xe=[];ne._ownfill&&xe.push(Q),ne._nexttrace&&xe.push(Q+1),xe.length&&(y.fillOrder[Q]=xe);var ye=[],be=_e&&_e.positions||se.positions,Se,Re;if(ne.fill==="tozeroy"){for(Se=0;Se<be.length&&isNaN(be[Se+1]);)Se+=2;for(Re=be.length-2;Re>Se&&isNaN(be[Re+1]);)Re-=2;be[Se+1]!==0&&(ye=[be[Se],0]),ye=ye.concat(be.slice(Se,Re+2)),be[Re+1]!==0&&(ye=ye.concat([be[Re],0]))}else if(ne.fill==="tozerox"){for(Se=0;Se<be.length&&isNaN(be[Se]);)Se+=2;for(Re=be.length-2;Re>Se&&isNaN(be[Re]);)Re-=2;be[Se]!==0&&(ye=[0,be[Se+1]]),ye=ye.concat(be.slice(Se,Re+2)),be[Re]!==0&&(ye=ye.concat([0,be[Re+1]]))}else if(ne.fill==="toself"||ne.fill==="tonext"){for(ye=[],ue=0,Z.splitNull=!0,ge=0;ge<be.length;ge+=2)(isNaN(be[ge])||isNaN(be[ge+1]))&&(ye=ye.concat(be.slice(ue,ge)),ye.push(be[ue],be[ue+1]),ye.push(null,null),ue=ge+2);ye=ye.concat(be.slice(ue)),ue&&ye.push(be[ue],be[ue+1])}else{var Ve=ne._nexttrace;if(Ve){var Ae=y.lineOptions[Q+1];if(Ae){var Ce=Ae.positions;if(ne.fill==="tonexty"){for(ye=be.slice(),Q=Math.floor(Ce.length/2);Q--;){var Ze=Ce[Q*2],Ye=Ce[Q*2+1];isNaN(Ze)||isNaN(Ye)||ye.push(Ze,Ye)}Z.fill=Ve.fillcolor}}}}if(ne._prevtrace&&ne._prevtrace.fill==="tonext"){var ze=y.lineOptions[Q-1].positions,Ie=ye.length/2;ue=Ie;var Ge=[ue];for(ge=0;ge<ze.length;ge+=2)(isNaN(ze[ge])||isNaN(ze[ge+1]))&&(Ge.push(ge/2+Ie+1),ue=ge+2);ye=ye.concat(ze),Z.hole=Ge}return Z.fillmode=ne.fill,Z.opacity=ne.opacity,Z.positions=ye,Z}}),y.fill2d.update(y.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(_=0;_<h;_++){var O=m[_][0],z=O.trace,H=O.t,Y=H.index,ee=z._length,j=H.x,X=H.y;if(z.selectedpoints||D||R){if(D||(D=!0),z.selectedpoints){var ae=y.selectBatch[Y]=e.selIndices2selPoints(z),fe={};for(p=0;p<ae.length;p++)fe[ae[p]]=1;var K=[];for(p=0;p<ee;p++)fe[p]||K.push(p);y.unselectBatch[Y]=K}var J=H.xpx=new Array(ee),U=H.ypx=new Array(ee);for(p=0;p<ee;p++)J[p]=u.c2p(j[p]),U[p]=A.c2p(X[p])}else H.xpx=H.ypx=null}if(D){if(y.select2d||(y.select2d=x(l._glcanvas.data()[1].regl)),y.scatter2d){var V=new Array(h);for(_=0;_<h;_++)V[_]=y.selectBatch[_].length||y.unselectBatch[_].length?y.markerUnselectedOptions[_]:{};y.scatter2d.update(V)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&m.forEach(function(Z){var Q=((Z||[])[0]||{}).trace||{};n.hasText(Q)&&v(Z)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var q={viewport:o(l,u,A,d._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(A._rl||A.range)[0],(u._rl||u.range)[1],(A._rl||A.range)[1]]},re=e.repeat(q,y.count);y.fill2d&&y.fill2d.update(re),y.line2d&&y.line2d.update(re),y.error2d&&y.error2d.update(re.concat(re)),y.scatter2d&&y.scatter2d.update(re),y.select2d&&y.select2d.update(re),y.glText&&y.glText.forEach(function(Z){Z.update(q)})}}};b.reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){x.extendFlat(e,i,a)},e.init(),e.update=function(r){var v=x.repeat(r,e.count);if(e.fill2d&&e.fill2d.update(v),e.scatter2d&&e.scatter2d.update(v),e.line2d&&e.line2d.update(v),e.error2d&&e.error2d.update(v.concat(v)),e.select2d&&e.select2d.update(v),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(r)},e.draw=function(){for(var r=e.count,v=e.fill2d,s=e.error2d,o=e.line2d,b=e.scatter2d,g=e.glText,d=e.select2d,c=e.selectBatch,m=e.unselectBatch,l=0;l<r;l++){if(v&&e.fillOrder[l]&&v.draw(e.fillOrder[l]),o&&e.lineOptions[l]&&o.draw(l),s&&(e.errorXOptions[l]&&s.draw(l),e.errorYOptions[l]&&s.draw(l+r)),b&&e.markerOptions[l])if(m[l].length){var y=x.repeat([],e.count);y[l]=m[l],b.draw(y)}else c[l].length||b.draw(l);g[l]&&e.textOptions[l]&&g[l].render()}d&&d.draw(c),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(r){r.destroy&&r.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||x.extendFlat(e,a),e}},{"../../lib":515}],1001:[function(t,B,G){var x=t("../scatter/subtypes"),f=t("./edit_style").styleTextSelection;B.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s=a[0].t,o=v._length,b=s.x,g=s.y,d=s._scene,c=s.index;if(!d)return r;var m=x.hasText(v),l=x.hasMarkers(v),y=!l&&!m;if(v.visible!==!0||y)return r;var u=[],A=[];if(e!==!1&&!e.degenerate)for(var _=0;_<o;_++)e.contains([s.xpx[_],s.ypx[_]],!1,_,T)?(u.push(_),r.push({pointNumber:_,x:i.c2d(b[_]),y:n.c2d(g[_])})):A.push(_);if(l){var p=d.scatter2d;if(!u.length&&!A.length){var w=new Array(d.count);w[c]=d.markerOptions[c],p.update.apply(p,w)}else if(!d.selectBatch[c].length&&!d.unselectBatch[c].length){var h=new Array(d.count);h[c]=d.markerUnselectedOptions[c],p.update.apply(p,h)}}return d.selectBatch[c]=u,d.unselectBatch[c]=A,m&&f(a),r}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../scattergeo/attributes"),T=t("../scatter/attributes"),e=t("../../plots/mapbox/layout_attributes"),a=t("../../plots/attributes"),i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat,r=t("../../plot_api/edit_types").overrideAll,v=t("../../plots/mapbox/layout_attributes"),s=M.line,o=M.marker;B.exports=r({lon:M.lon,lat:M.lat,cluster:{enabled:{valType:"boolean"},maxzoom:n({},v.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:n({},o.opacity,{dflt:1})},mode:n({},T.mode,{dflt:"markers"}),text:n({},T.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},T.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:T.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},i("marker")),fill:M.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:n({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:x()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../lib"),M=t("../../constants/numerical").BADNUM,T=t("../../lib/geojson_utils"),e=t("../../components/colorscale"),a=t("../../components/drawing"),i=t("../scatter/make_bubble_size_func"),n=t("../scatter/subtypes"),r=t("../../plots/mapbox/convert_text_opts"),v=t("../../components/fx/helpers").appendArrayPointValue,s=t("../../lib/svg_text_utils").NEWLINES,o=t("../../lib/svg_text_utils").BR_TAG_ALL;B.exports=function(A,_){var p=_[0].trace,w=p.visible===!0&&p._length!==0,h=p.fill!=="none",L=n.hasLines(p),E=n.hasMarkers(p),S=n.hasText(p),P=E&&p.marker.symbol==="circle",F=E&&p.marker.symbol!=="circle",I=p.cluster&&p.cluster.enabled,D=b("fill"),R=b("line"),O=b("circle"),z=b("symbol"),H={fill:D,line:R,circle:O,symbol:z};if(!w)return H;var Y;if((h||L)&&(Y=T.calcTraceToLineCoords(_)),h&&(D.geojson=T.makePolygon(Y),D.layout.visibility="visible",f.extendFlat(D.paint,{"fill-color":p.fillcolor})),L&&(R.geojson=T.makeLine(Y),R.layout.visibility="visible",f.extendFlat(R.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),P){var ee=g(_);O.geojson=ee.geojson,O.layout.visibility="visible",I&&(O.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":y(p.cluster.color,p.cluster.step),"circle-radius":y(p.cluster.size,p.cluster.step),"circle-opacity":y(p.cluster.opacity,p.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),f.extendFlat(O.paint,{"circle-color":ee.mcc,"circle-radius":ee.mrc,"circle-opacity":ee.mo})}if(P&&I&&(O.filter=["!",["has","point_count"]]),(F||S)&&(z.geojson=d(_,A),f.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(f.extendFlat(z.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&f.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=p.marker.allowoverlap,f.extendFlat(z.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),S)){var j=(p.marker||{}).size,X=r(p.textposition,j);f.extendFlat(z.layout,{"text-size":p.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),f.extendFlat(z.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return H};function b(u){return{type:u,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function g(u){var A=u[0].trace,_=A.marker,p=A.selectedpoints,w=f.isArrayOrTypedArray(_.color),h=f.isArrayOrTypedArray(_.size),L=f.isArrayOrTypedArray(_.opacity),E;function S(j){return A.opacity*j}function P(j){return j/2}var F;w&&(e.hasColorscale(A,"marker")?F=e.makeColorScaleFuncFromTrace(_):F=f.identity);var I;h&&(I=i(A));var D;L&&(D=function(j){var X=x(j)?+f.constrain(j,0,1):0;return S(X)});var R=[];for(E=0;E<u.length;E++){var O=u[E],z=O.lonlat;if(!l(z)){var H={};F&&(H.mcc=O.mcc=F(O.mc)),I&&(H.mrc=O.mrc=I(O.ms)),D&&(H.mo=D(O.mo)),p&&(H.selected=O.selected||0),R.push({type:"Feature",id:E+1,geometry:{type:"Point",coordinates:z},properties:H})}}var Y;if(p)for(Y=a.makeSelectedPointStyleFns(A),E=0;E<R.length;E++){var ee=R[E].properties;Y.selectedOpacityFn&&(ee.mo=S(Y.selectedOpacityFn(ee))),Y.selectedColorFn&&(ee.mcc=Y.selectedColorFn(ee)),Y.selectedSizeFn&&(ee.mrc=Y.selectedSizeFn(ee))}return{geojson:{type:"FeatureCollection",features:R},mcc:w||Y&&Y.selectedColorFn?{type:"identity",property:"mcc"}:_.color,mrc:h||Y&&Y.selectedSizeFn?{type:"identity",property:"mrc"}:P(_.size),mo:L||Y&&Y.selectedOpacityFn?{type:"identity",property:"mo"}:S(_.opacity)}}function d(u,A){for(var _=A._fullLayout,p=u[0].trace,w=p.marker||{},h=w.symbol,L=w.angle,E=h!=="circle"?c(h):m,S=L!=="auto"?c(L,!0):m,P=n.hasText(p)?c(p.text):m,F=[],I=0;I<u.length;I++){var D=u[I];if(!l(D.lonlat)){var R=p.texttemplate,O;if(R){var z=Array.isArray(R)?R[I]||"":R,H=p._module.formatLabels(D,p,_),Y={};v(Y,p,D.i);var ee=p._meta||{};O=f.texttemplateString(z,H,_._d3locale,Y,D,ee)}else O=P(I);O&&(O=O.replace(s,"").replace(o,`
`)),F.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:E(I),angle:S(I),text:O}})}}return{type:"FeatureCollection",features:F}}function c(u,A){return f.isArrayOrTypedArray(u)?A?function(_){return x(u[_])?+u[_]:0}:function(_){return u[_]}:u?function(){return u}:m}function m(){return""}function l(u){return u[0]===M}function y(u,A){var _;if(f.isArrayOrTypedArray(u)&&f.isArrayOrTypedArray(A)){_=["step",["get","point_count"],u[0]];for(var p=1;p<u.length;p++)_.push(A[p-1],u[p])}else _=u;return _}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/subtypes"),M=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");B.exports=function(v,s,o,b){function g(w,h){return x.coerce(v,s,i,w,h)}function d(w,h){return x.coerce2(v,s,i,w,h)}var c=n(v,s,g);if(!c){s.visible=!1;return}if(g("text"),g("texttemplate"),g("hovertext"),g("hovertemplate"),g("mode"),g("below"),f.hasLines(s)&&(T(v,s,o,b,g,{noDash:!0}),g("connectgaps")),f.hasMarkers(s)){M(v,s,o,b,g,{noLine:!0,noAngle:!0}),g("marker.allowoverlap"),g("marker.angle");var m=s.marker;m.symbol!=="circle"&&(x.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),x.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))}var l=d("cluster.maxzoom"),y=d("cluster.step"),u=d("cluster.color",s.marker&&s.marker.color||o),A=d("cluster.size"),_=d("cluster.opacity"),p=l!==!1||y!==!1||u!==!1||A!==!1||_!==!1;g("cluster.enabled",p),f.hasText(s)&&e(v,s,b,g,{noSelect:!0}),g("fill"),s.fill!=="none"&&a(v,s,o,g),x.coerceSelectionMarkerOpacity(s,g)};function n(r,v,s){var o=s("lon")||[],b=s("lat")||[],g=Math.min(o.length,b.length);return v._length=g,g}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(t,B,G){B.exports=function(f,M){return f.lon=M.lon,f.lat=M.lat,f}},{}],1006:[function(t,B,G){var x=t("../../plots/cartesian/axes");B.exports=function(M,T,e){var a={},i=e[T.subplot]._subplot,n=i.mockAxis,r=M.lonlat;return a.lonLabel=x.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=x.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(t,B,G){var x=t("../../components/fx"),f=t("../../lib"),M=t("../scatter/get_trace_color"),T=f.fillText,e=t("../../constants/numerical").BADNUM,a=t("../../plots/mapbox/constants").traceLayerPrefix;function i(r,v,s){var o=r.cd,b=o[0].trace,g=r.xa,d=r.ya,c=r.subplot,m=[],l=a+b.uid+"-circle",y=b.cluster&&b.cluster.enabled;if(y){var u=c.map.queryRenderedFeatures(null,{layers:[l]});m=u.map(function(R){return R.id})}var A=v>=0?Math.floor((v+180)/360):Math.ceil((v-180)/360),_=A*360,p=v-_;function w(R){var O=R.lonlat;if(O[0]===e||y&&m.indexOf(R.i+1)===-1)return 1/0;var z=f.modHalf(O[0],360),H=O[1],Y=c.project([z,H]),ee=Y.x-g.c2p([p,H]),j=Y.y-d.c2p([z,s]),X=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(ee*ee+j*j)-X,1-3/X)}if(x.getClosest(o,w,r),r.index!==!1){var h=o[r.index],L=h.lonlat,E=[f.modHalf(L[0],360)+_,L[1]],S=g.c2p(E),P=d.c2p(E),F=h.mrc||1;r.x0=S-F,r.x1=S+F,r.y0=P-F,r.y1=P+F;var I={};I[b.subplot]={_subplot:c};var D=b._module.formatLabels(h,b,I);return r.lonLabel=D.lonLabel,r.latLabel=D.latLabel,r.color=M(b,h),r.extraText=n(b,h,o[0].t.labels),r.hovertemplate=b.hovertemplate,[r]}}function n(r,v,s){if(r.hovertemplate)return;var o=v.hi||r.hoverinfo,b=o.split("+"),g=b.indexOf("all")!==-1,d=b.indexOf("lon")!==-1,c=b.indexOf("lat")!==-1,m=v.lonlat,l=[];function y(u){return u+"\xB0"}return g||d&&c?l.push("("+y(m[1])+", "+y(m[0])+")"):d?l.push(s.lon+y(m[0])):c&&l.push(s.lat+y(m[1])),(g||b.indexOf("text")!==-1)&&T(v,r,l),l.join("<br>")}B.exports={hoverPoints:i,getExtraText:n}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("../scattergeo/calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),styleOnSelect:function(x,f){if(f){var M=f[0].trace;M._glTrace.update(f)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(t,B,G){var x=t("../../lib"),f=t("./convert"),M=t("../../plots/mapbox/constants").traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(i,n,r){this.type="scattermapbox",this.subplot=i,this.uid=n,this.clusterEnabled=r,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:M+n+"-fill",line:M+n+"-line",circle:M+n+"-circle",symbol:M+n+"-symbol",cluster:M+n+"-cluster",clusterCount:M+n+"-cluster-count"},this.below=null}var a=e.prototype;a.addSource=function(i,n,r){var v={type:"geojson",data:n.geojson};r&&r.enabled&&x.extendFlat(v,{cluster:!0,clusterMaxZoom:r.maxzoom}),this.subplot.map.addSource(this.sourceIds[i],v)},a.setSourceData=function(i,n){this.subplot.map.getSource(this.sourceIds[i]).setData(n.geojson)},a.addLayer=function(i,n,r){var v={type:n.type,id:this.layerIds[i],source:this.sourceIds[i],layout:n.layout,paint:n.paint};n.filter&&(v.filter=n.filter),this.subplot.addLayer(v,r)},a.update=function(n){var r=n[0].trace,v=this.subplot,s=v.map,o=f(v.gd,n),b=v.belowLookup["trace-"+this.uid],g,d,c,m=!!(r.cluster&&r.cluster.enabled),l=!!this.clusterEnabled;if(b!==this.below){var y=T.nonCluster;for(g=y.length-1;g>=0;g--)d=y[g],s.removeLayer(this.layerIds[d]);for(g=0;g<y.length;g++)d=y[g],c=o[d],this.addLayer(d,c,b);this.below=b}else if(m&&!l){for(g=T.nonCluster.length-1;g>=0;g--)d=T.nonCluster[g],s.removeLayer(this.layerIds[d]),s.removeSource(this.sourceIds[d]);for(this.addSource("circle",o.circle,r.cluster),g=0;g<T.cluster.length;g++)d=T.cluster[g],c=o[d],this.addLayer(d,c,b);this.clusterEnabled=m}else if(!m&&l){for(g=0;g<T.cluster.length;g++)d=T.cluster[g],s.removeLayer(this.layerIds[d]);for(s.removeSource(this.sourceIds.circle),g=0;g<T.nonCluster.length;g++)d=T.nonCluster[g],c=o[d],this.addSource(d,c,r.cluster),this.addLayer(d,c,b);this.clusterEnabled=m}n[0].trace._glTrace=this},a.dispose=function(){for(var n=this.subplot.map,r=this.clusterEnabled?T.cluster:T.nonCluster,v=r.length-1;v>=0;v--){var s=r[v];n.removeLayer(this.layerIds[s]),n.removeSource(this.sourceIds[s])}},B.exports=function(n,r){var v=r[0].trace,s=v.cluster&&v.cluster.enabled,o=new e(n,v.uid,s),b=f(n.gd,r),g=o.below=n.belowLookup["trace-"+v.uid],d,c,m;if(s)for(o.addSource("circle",b.circle,v.cluster),d=0;d<T.cluster.length;d++)c=T.cluster[d],m=b[c],o.addLayer(c,m,g);else for(d=0;d<T.nonCluster.length;d++)c=T.nonCluster[d],m=b[c],o.addSource(c,m,v.cluster),o.addLayer(c,m,g);return r[0].trace._glTrace=o,o}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/subtypes"),M=t("../../constants/numerical").BADNUM;B.exports=function(e,a){var i=e.cd,n=e.xaxis,r=e.yaxis,v=[],s=i[0].trace,o;if(!f.hasMarkers(s))return[];if(a===!1)for(o=0;o<i.length;o++)i[o].selected=0;else for(o=0;o<i.length;o++){var b=i[o],g=b.lonlat;if(g[0]!==M){var d=[x.modHalf(g[0],360),g[1]],c=[n.c2p(d),r.c2p(d)];a.contains(c,null,o,e)?(v.push({pointNumber:o,lon:g[0],lat:g[1]}),b.selected=1):b.selected=0}}return v}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;B.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:f({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:x(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../constants/numerical").BADNUM,M=t("../../plots/cartesian/axes"),T=t("../scatter/colorscale_calc"),e=t("../scatter/arrays_to_calcdata"),a=t("../scatter/calc_selection"),i=t("../scatter/calc").calcMarkerSize;B.exports=function(r,v){for(var s=r._fullLayout,o=v.subplot,b=s[o].radialaxis,g=s[o].angularaxis,d=b.makeCalcdata(v,"r"),c=g.makeCalcdata(v,"theta"),m=v._length,l=new Array(m),y=0;y<m;y++){var u=d[y],A=c[y],_=l[y]={};x(u)&&x(A)?(_.r=u,_.theta=A):_.r=f}var p=i(v,m);return v._extremes.x=M.findExtremes(b,d,{ppad:p}),T(r,v),e(l,v),a(l,v),l}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/subtypes"),M=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");function v(o,b,g,d){function c(y,u){return x.coerce(o,b,r,y,u)}var m=s(o,b,d,c);if(!m){b.visible=!1;return}c("thetaunit"),c("mode",m<n?"lines+markers":"lines"),c("text"),c("hovertext"),b.hoveron!=="fills"&&c("hovertemplate"),f.hasLines(b)&&(T(o,b,g,d,c,{backoff:!0}),e(o,b,c),c("connectgaps")),f.hasMarkers(b)&&M(o,b,g,d,c,{gradient:!0}),f.hasText(b)&&(c("texttemplate"),a(o,b,d,c));var l=[];(f.hasMarkers(b)||f.hasText(b))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),b.fill!=="none"&&(i(o,b,g,c),f.hasLines(b)||e(o,b,c)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),x.coerceSelectionMarkerOpacity(b,c)}function s(o,b,g,d){var c=d("r"),m=d("theta"),l;if(c)m?l=Math.min(c.length,m.length):(l=c.length,d("theta0"),d("dtheta"));else{if(!m)return 0;l=b.theta.length,d("r0"),d("dr")}return b._length=l,l}B.exports={handleRThetaDefaults:s,supplyDefaults:v}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes");B.exports=function(T,e,a){var i={},n=a[e.subplot]._subplot,r,v;n?(r=n.radialAxis,v=n.angularAxis):(n=a[e.subplot],r=n.radialaxis,v=n.angularaxis);var s=r.c2l(T.r);i.rLabel=f.tickText(r,s,!0).text;var o=v.thetaunit==="degrees"?x.rad2deg(T.theta):T.theta;return i.thetaLabel=f.tickText(v,o,!0).text,i}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(t,B,G){var x=t("../scatter/hover");function f(T,e,a,i){var n=x(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,M(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function M(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="r",r._hovertitle="\u03B8";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var o=T.hi||e.hoverinfo,b=[];function g(c,m){b.push(c._hovertitle+": "+m)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["r","theta","text"]),d.indexOf("r")!==-1&&g(n,i.rLabel),d.indexOf("theta")!==-1&&g(r,i.thetaLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}B.exports={hoverPoints:f,makeHoverPointText:M}},{"../scatter/hover":947}],1016:[function(t,B,G){B.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(t,B,G){var x=t("../scatter/plot"),f=t("../../constants/numerical").BADNUM;B.exports=function(T,e,a){for(var i=e.layers.frontplot.select("g.scatterlayer"),n=e.xaxis,r=e.yaxis,v={xaxis:n,yaxis:r,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},s=e.radialAxis,o=e.angularAxis,b=0;b<a.length;b++)for(var g=a[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=n,g[0].trace._yA=r);var c=g[d],m=c.r;if(m===f)c.x=c.y=f;else{var l=s.c2g(m),y=o.c2g(c.theta);c.x=l*Math.cos(y),c.y=l*Math.sin(y)}}x(T,v,a,i)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(t,B,G){var x=t("../scatterpolar/attributes"),f=t("../scattergl/attributes"),M=t("../../plots/template_attributes").texttemplateAttrs;B.exports={mode:x.mode,r:x.r,theta:x.theta,r0:x.r0,dr:x.dr,theta0:x.theta0,dtheta:x.dtheta,thetaunit:x.thetaunit,text:x.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,hovertemplate:x.hovertemplate,line:f.line,connectgaps:f.connectgaps,marker:f.marker,fill:f.fill,fillcolor:f.fillcolor,textposition:f.textposition,textfont:f.textfont,hoverinfo:x.hoverinfo,selected:x.selected,unselected:x.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(t,B,G){B.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(t,B,G){var x=t("../scatter/colorscale_calc"),f=t("../scatter/calc").calcMarkerSize,M=t("../scattergl/convert"),T=t("../../plots/cartesian/axes"),e=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(i,n){var r=i._fullLayout,v=n.subplot,s=r[v].radialaxis,o=r[v].angularaxis,b=n._r=s.makeCalcdata(n,"r"),g=n._theta=o.makeCalcdata(n,"theta"),d=n._length,c={};d<b.length&&(b=b.slice(0,d)),d<g.length&&(g=g.slice(0,d)),c.r=b,c.theta=g,x(i,n);var m=c.opts=M.style(i,n),l;return d<e?l=f(n,d):m.marker&&(l=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),n._extremes.x=T.findExtremes(s,b,{ppad:l}),[{x:!1,y:!1,t:c,trace:n}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/subtypes"),M=t("../scatterpolar/defaults").handleRThetaDefaults,T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");B.exports=function(s,o,b,g){function d(m,l){return x.coerce(s,o,r,m,l)}var c=M(s,o,g,d);if(!c){o.visible=!1;return}d("thetaunit"),d("mode",c<n?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),f.hasLines(o)&&(e(s,o,b,g,d),d("connectgaps")),f.hasMarkers(o)&&T(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0}),f.hasText(o)&&(d("texttemplate"),a(s,o,g,d)),d("fill"),o.fill!=="none"&&i(s,o,b,d),x.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(t,B,G){var x=t("../scatterpolar/format_labels");B.exports=function(M,T,e){var a=M.i;return"r"in M||(M.r=T._r[a]),"theta"in M||(M.theta=T._theta[a]),x(M,T,e)}},{"../scatterpolar/format_labels":1014}],1023:[function(t,B,G){var x=t("../scattergl/hover"),f=t("../scatterpolar/hover").makeHoverPointText;function M(T,e,a,i){var n=T.cd,r=n[0].t,v=r.r,s=r.theta,o=x.hoverPoints(T,e,a,i);if(!(!o||o[0].index===!1)){var b=o[0];if(b.index===void 0)return o;var g=T.subplot,d=b.cd[b.index],c=b.trace;if(d.r=v[b.index],d.theta=s[b.index],!!g.isPtInside(d))return b.xLabelVal=void 0,b.yLabelVal=void 0,f(d,c,g,b),o}}B.exports={hoverPoints:M}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(t,B,G){arguments[4][905][0].apply(G,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(t,B,G){var x=t("@plotly/point-cluster"),f=t("fast-isnumeric"),M=t("../scattergl/plot"),T=t("../scattergl/scene_update"),e=t("../scattergl/convert"),a=t("../../lib"),i=t("../scattergl/constants").TOO_MANY_POINTS,n={};B.exports=function(v,s,o){if(!!o.length){var b=s.radialAxis,g=s.angularAxis,d=T(v,s);return o.forEach(function(c){if(!(!c||!c[0]||!c[0].trace)){var m=c[0],l=m.trace,y=m.t,u=l._length,A=y.r,_=y.theta,p=y.opts,w,h=A.slice(),L=_.slice();for(w=0;w<A.length;w++)s.isPtInside({r:A[w],theta:_[w]})||(h[w]=NaN,L[w]=NaN);var E=new Array(u*2),S=Array(u),P=Array(u);for(w=0;w<u;w++){var F=h[w],I,D;if(f(F)){var R=b.c2g(F),O=g.c2g(L[w],l.thetaunit);I=R*Math.cos(O),D=R*Math.sin(O)}else I=D=NaN;S[w]=E[w*2]=I,P[w]=E[w*2+1]=D}y.tree=x(E),p.marker&&u>=i&&(p.marker.cluster=y.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=E),p.line&&E.length>1&&a.extendFlat(p.line,e.linePositions(v,l,E)),p.text&&(a.extendFlat(p.text,{positions:E},e.textPosition(v,l,p.text,p.marker)),a.extendFlat(p.textSel,{positions:E},e.textPosition(v,l,p.text,p.markerSel)),a.extendFlat(p.textUnsel,{positions:E},e.textPosition(v,l,p.text,p.markerUnsel))),p.fill&&!d.fill2d&&(d.fill2d=!0),p.marker&&!d.scatter2d&&(d.scatter2d=!0),p.line&&!d.line2d&&(d.line2d=!0),p.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(p.line),d.fillOptions.push(p.fill),d.markerOptions.push(p.marker),d.markerSelectedOptions.push(p.markerSel),d.markerUnselectedOptions.push(p.markerUnsel),d.textOptions.push(p.text),d.textSelectedOptions.push(p.textSel),d.textUnselectedOptions.push(p.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),y.x=S,y.y=P,y.rawx=S,y.rawy=P,y.r=A,y.theta=_,y.positions=E,y._scene=d,y.index=d.count,d.count++}}),M(v,s,o)}},B.exports.reglPrecompiled=n},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;B.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:f({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:x(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../../constants/numerical").BADNUM,M=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../scatter/calc").calcMarkerSize;B.exports=function(n,r){for(var v=n._fullLayout,s=r.subplot,o=v[s].realaxis,b=v[s].imaginaryaxis,g=o.makeCalcdata(r,"real"),d=b.makeCalcdata(r,"imag"),c=r._length,m=new Array(c),l=0;l<c;l++){var y=g[l],u=d[l],A=m[l]={};x(y)&&x(u)?(A.real=y,A.imag=u):A.real=f}return a(r,c),M(n,r),T(m,r),e(m,r),m}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/subtypes"),M=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");B.exports=function(o,b,g,d){function c(y,u){return x.coerce(o,b,r,y,u)}var m=v(o,b,d,c);if(!m){b.visible=!1;return}c("mode",m<n?"lines+markers":"lines"),c("text"),c("hovertext"),b.hoveron!=="fills"&&c("hovertemplate"),f.hasLines(b)&&(T(o,b,g,d,c,{backoff:!0}),e(o,b,c),c("connectgaps")),f.hasMarkers(b)&&M(o,b,g,d,c,{gradient:!0}),f.hasText(b)&&(c("texttemplate"),a(o,b,d,c));var l=[];(f.hasMarkers(b)||f.hasText(b))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),b.fill!=="none"&&(i(o,b,g,c),f.hasLines(b)||e(o,b,c)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),x.coerceSelectionMarkerOpacity(b,c)};function v(s,o,b,g){var d=g("real"),c=g("imag"),m;return d&&c&&(m=Math.min(d.length,c.length)),o._length=m,m}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(t,B,G){var x=t("../../plots/cartesian/axes");B.exports=function(M,T,e){var a={},i=e[T.subplot]._subplot;return a.realLabel=x.tickText(i.radialAxis,M.real,!0).text,a.imagLabel=x.tickText(i.angularAxis,M.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(t,B,G){var x=t("../scatter/hover");function f(T,e,a,i){var n=x(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,M(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function M(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="real",r._hovertitle="imag";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var o=T.hi||e.hoverinfo,b=[];function g(c,m){b.push(c._hovertitle+": "+m)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["real","imag","text"]),d.indexOf("real")!==-1&&g(n,i.realLabel),d.indexOf("imag")!==-1&&g(r,i.imagLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}B.exports={hoverPoints:f,makeHoverPointText:M}},{"../scatter/hover":947}],1031:[function(t,B,G){B.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(t,B,G){var x=t("../scatter/plot"),f=t("../../constants/numerical").BADNUM,M=t("../../plots/smith/helpers"),T=M.smith;B.exports=function(a,i,n){for(var r=i.layers.frontplot.select("g.scatterlayer"),v=i.xaxis,s=i.yaxis,o={xaxis:v,yaxis:s,plot:i.framework,layerClipId:i._hasClipOnAxisFalse?i.clipIds.forTraces:null},b=0;b<n.length;b++)for(var g=n[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=v,g[0].trace._yA=s);var c=g[d],m=c.real;if(m===f)c.x=c.y=f;else{var l=T([m,c.imag]);c.x=l[0],c.y=l[1]}}x(a,o,n,r)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=M.marker,r=M.line,v=n.line;B.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},M.mode,{dflt:"markers"}),text:i({},M.text,{}),texttemplate:f({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},M.hovertext,{}),line:{color:r.color,width:r.width,dash:a,backoff:r.backoff,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:M.connectgaps,cliponaxis:M.cliponaxis,fill:i({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:i({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:n.angleref,standoff:n.standoff,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:i({width:v.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:i({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:M.hoveron,hovertemplate:x()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(t,B,G){var x=t("fast-isnumeric"),f=t("../scatter/colorscale_calc"),M=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};B.exports=function(r,v){var s=r._fullLayout[v.subplot],o=s.sum,b=v.sum||o,g={a:v.a,b:v.b,c:v.c},d,c,m,l,y,u;for(d=0;d<a.length;d++)if(m=a[d],!g[m]){for(y=g[i[m][0]],u=g[i[m][1]],l=new Array(y.length),c=0;c<y.length;c++)l[c]=b-y[c]-u[c];g[m]=l}var A=v._length,_=new Array(A),p,w,h,L,E,S;for(d=0;d<A;d++)p=g.a[d],w=g.b[d],h=g.c[d],x(p)&&x(w)&&x(h)?(p=+p,w=+w,h=+h,L=o/(p+w+h),L!==1&&(p*=L,w*=L,h*=L),S=p,E=h-w,_[d]={x:E,y:S,a:p,b:w,c:h}):_[d]={x:!1,y:!1};return e(v,A),f(r,v),M(_,v),T(_,v),_}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/constants"),M=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");B.exports=function(s,o,b,g){function d(_,p){return x.coerce(s,o,r,_,p)}var c=d("a"),m=d("b"),l=d("c"),y;if(c?(y=c.length,m?(y=Math.min(y,m.length),l&&(y=Math.min(y,l.length))):l?y=Math.min(y,l.length):y=0):m&&l&&(y=Math.min(m.length,l.length)),!y){o.visible=!1;return}o._length=y,d("sum"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate");var u=y<f.PTS_LINESONLY?"lines+markers":"lines";d("mode",u),M.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),M.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),M.hasText(o)&&(d("texttemplate"),i(s,o,g,d));var A=[];(M.hasMarkers(o)||M.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),A.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),M.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&A.push("fills"),d("hoveron",A.join("+")||"points"),x.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(t,B,G){B.exports=function(f,M,T,e,a){if(M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),e[a]){var i=e[a];f.a=i.a,f.b=i.b,f.c=i.c}else f.a=M.a,f.b=M.b,f.c=M.c;return f}},{}],1037:[function(t,B,G){var x=t("../../plots/cartesian/axes");B.exports=function(M,T,e){var a={},i=e[T.subplot]._subplot;return a.aLabel=x.tickText(i.aaxis,M.a,!0).text,a.bLabel=x.tickText(i.baxis,M.b,!0).text,a.cLabel=x.tickText(i.caxis,M.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(t,B,G){var x=t("../scatter/hover");B.exports=function(M,T,e,a){var i=x(M,T,e,a);if(!i||i[0].index===!1)return;var n=i[0];if(n.index===void 0){var r=1-n.y0/M.ya._length,v=M.xa._length,s=v*r/2,o=v-s;return n.x0=Math.max(Math.min(n.x0,o),s),n.x1=Math.max(Math.min(n.x1,o),s),i}var b=n.cd[n.index],g=n.trace,d=n.subplot;n.a=b.a,n.b=b.b,n.c=b.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var c={};c[g.subplot]={_subplot:d};var m=g._module.formatLabels(b,g,c);n.aLabel=m.aLabel,n.bLabel=m.bLabel,n.cLabel=m.cLabel;var l=b.hi||g.hoverinfo,y=[];function u(_,p){y.push(_._hovertitle+": "+p)}if(!g.hovertemplate){var A=l.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&u(d.aaxis,n.aLabel),A.indexOf("b")!==-1&&u(d.baxis,n.bLabel),A.indexOf("c")!==-1&&u(d.caxis,n.cLabel)}return n.extraText=y.join("<br>"),n.hovertemplate=g.hovertemplate,i}},{"../scatter/hover":947}],1039:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:t("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(t,B,G){var x=t("../scatter/plot");B.exports=function(M,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();for(var i=T.xaxis,n=T.yaxis,r={xaxis:i,yaxis:n,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},v=T.layers.frontplot.select("g.scatterlayer"),s=0;s<e.length;s++){var o=e[s];o.length&&(o[0].trace._xA=i,o[0].trace._yA=n)}x(M,r,e,v)}},{"../scatter/plot":957}],1041:[function(t,B,G){var x=t("../scatter/attributes"),f=t("../../components/colorscale/attributes"),M=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../scattergl/attributes"),a=t("../../plots/cartesian/constants").idRegex,i=t("../../plot_api/plot_template").templatedArray,n=t("../../lib/extend").extendFlat,r=x.marker,v=r.line,s=n(f("marker.line",{editTypeOverride:"calc"}),{width:n({},v.width,{editType:"calc"}),editType:"calc"}),o=n(f("marker"),{symbol:r.symbol,angle:r.angle,size:n({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function b(g){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[g],editType:"plot"}}}B.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},e.text,{}),hovertext:n({},e.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),marker:o,xaxes:b("x"),yaxes:b("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(t,B,G){var x=t("../../registry"),f=t("../../components/grid");B.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},x.register(f)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(t,B,G){var x=t("regl-line2d"),f=t("../../registry"),M=t("../../lib/prepare_regl"),T=t("../../plots/get_data").getModuleCalcData,e=t("../../plots/cartesian"),a=t("../../plots/cartesian/axis_ids").getFromId,i=t("../../plots/cartesian/axes").shouldShowZeroLine,n="splom",r={};function v(c){var m=c._fullLayout,l=f.getModule(n),y=T(c.calcdata,l)[0],u=M(c,["ANGLE_instanced_arrays","OES_element_index_uint"],r);!u||(m._hasOnlyLargeSploms&&b(c),l.plot(c,{},y))}function s(c){var m=c.calcdata,l=c._fullLayout;l._hasOnlyLargeSploms&&b(c);for(var y=0;y<m.length;y++){var u=m[y][0],A=u.trace,_=l._splomScenes[A.uid];A.type==="splom"&&_&&_.matrix&&o(c,A,_)}}function o(c,m,l){for(var y=l.matrixOptions.data.length,u=m._visibleDims,A=l.viewOpts.ranges=new Array(y),_=0;_<u.length;_++){var p=u[_],w=A[_]=new Array(4),h=a(c,m._diag[p][0]);h&&(w[0]=h.r2l(h.range[0]),w[2]=h.r2l(h.range[1]));var L=a(c,m._diag[p][1]);L&&(w[1]=L.r2l(L.range[0]),w[3]=L.r2l(L.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:A},{ranges:A}):l.matrix.update({ranges:A})}function b(c){var m=c._fullLayout,l=m._glcanvas.data()[0].regl,y=m._splomGrid;y||(y=m._splomGrid=x(l)),y.update(g(c))}function g(c){var m=c._context.plotGlPixelRatio,l=c._fullLayout,y=l._size,u=[0,0,l.width*m,l.height*m],A={},_;function p(ee,j,X,ae,fe,K){X*=m,ae*=m,fe*=m,K*=m;var J=j[ee+"color"],U=j[ee+"width"],V=String(J+U);V in A?A[V].data.push(NaN,NaN,X,ae,fe,K):A[V]={data:[X,ae,fe,K],join:"rect",thickness:U*m,color:J,viewport:u,range:u,overlay:!1}}for(_ in l._splomSubplots){var w=l._plots[_],h=w.xaxis,L=w.yaxis,E=h._gridVals,S=L._gridVals,P=h._offset,F=h._length,I=L._length,D=y.b+L.domain[0]*y.h,R=-L._m,O=-R*L.r2l(L.range[0],L.calendar),z,H;if(h.showgrid)for(_=0;_<E.length;_++)z=P+h.l2p(E[_].x),p("grid",h,z,D,z,D+I);if(L.showgrid)for(_=0;_<S.length;_++)H=D+O+R*S[_].x,p("grid",L,P,H,P+F,H);i(c,h,L)&&(z=P+h.l2p(0),p("zeroline",h,z,D,z,D+I)),i(c,L,h)&&(H=D+O+0,p("zeroline",L,P,H,P+F,H))}var Y=[];for(_ in A)Y.push(A[_]);return Y}function d(c,m,l,y){var u={},A;if(y._splomScenes){for(A=0;A<c.length;A++){var _=c[A];_.type==="splom"&&(u[_.uid]=1)}for(A=0;A<l.length;A++){var p=l[A];if(!u[p.uid]){var w=y._splomScenes[p.uid];w&&w.destroy&&w.destroy(),y._splomScenes[p.uid]=null,delete y._splomScenes[p.uid]}}}Object.keys(y._splomScenes||{}).length===0&&delete y._splomScenes,y._splomGrid&&!m._hasOnlyLargeSploms&&y._hasOnlyLargeSploms&&(y._splomGrid.destroy(),y._splomGrid=null,delete y._splomGrid),e.clean(c,m,l,y)}B.exports={name:n,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:v,drag:s,updateGrid:b,clean:d,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:r}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axis_ids"),M=t("../scatter/calc").calcMarkerSize,T=t("../scatter/calc").calcAxisExpansion,e=t("../scatter/colorscale_calc"),a=t("../scattergl/convert").markerSelection,i=t("../scattergl/convert").markerStyle,n=t("./scene_update"),r=t("../../constants/numerical").BADNUM,v=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(o,b){var g=b.dimensions,d=b._length,c={},m=c.cdata=[],l=c.data=[],y=b._visibleDims=[],u,A,_,p,w;function h(F,I){for(var D=F.makeCalcdata({v:I.values,vcalendar:b.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===r?NaN:D[R];m.push(D),l.push(F.type==="log"?x.simpleMap(D,F.c2l):D)}for(u=0;u<g.length;u++)if(_=g[u],_.visible){if(p=f.getFromId(o,b._diag[u][0]),w=f.getFromId(o,b._diag[u][1]),p&&w&&p.type!==w.type){x.log("Skipping splom dimension "+u+" with conflicting axis types");continue}p?(h(p,_),w&&w.type==="category"&&(w._categories=p._categories.slice())):h(w,_),y.push(u)}e(o,b),x.extendFlat(c,i(o,b));var L=m.length,E=L*d>v,S;for(E?S=c.sizeAvg||Math.max(c.size,3):S=M(b,d),A=0;A<y.length;A++)u=y[A],_=g[u],p=f.getFromId(o,b._diag[u][0])||{},w=f.getFromId(o,b._diag[u][1])||{},T(o,b,p,w,m[A],m[A],S);var P=n(o,b);return P.matrix||(P.matrix=!0),P.matrixOptions=c,P.selectedOptions=a(o,b,b.selected),P.unselectedOptions=a(o,b,b.unselected),[{x:!1,y:!1,t:{},trace:b}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/array_container_defaults"),M=t("./attributes"),T=t("../scatter/subtypes"),e=t("../scatter/marker_defaults"),a=t("../parcoords/merge_length"),i=t("../scattergl/helpers").isOpenSymbol;B.exports=function(s,o,b,g){function d(p,w){return x.coerce(s,o,M,p,w)}var c=f(s,o,{name:"dimensions",handleItemDefaults:n}),m=d("diagonal.visible"),l=d("showupperhalf"),y=d("showlowerhalf"),u=a(o,c,"values");if(!u||!m&&!l&&!y){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0});var A=i(o.marker.symbol),_=T.isBubble(o);d("marker.line.width",A||_?1:0),r(s,o,g,d),x.coerceSelectionMarkerOpacity(o,d)};function n(v,s){function o(g,d){return x.coerce(v,s,M.dimensions,g,d)}o("label");var b=o("values");b&&b.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}function r(v,s,o,b){var g=s.dimensions,d=g.length,c=s.showupperhalf,m=s.showlowerhalf,l=s.diagonal.visible,y,u,A=new Array(d),_=new Array(d);for(y=0;y<d;y++){var p=y?y+1:"";A[y]="x"+p,_[y]="y"+p}var w=b("xaxes",A),h=b("yaxes",_),L=s._diag=new Array(d);s._xaxes={},s._yaxes={};var E=[],S=[];function P(ee,j,X,ae){if(!!ee){var fe=ee.charAt(0),K=o._splomAxes[fe];if(s["_"+fe+"axes"][ee]=1,ae.push(ee),!(ee in K)){var J=K[ee]={};X&&(J.label=X.label||"",X.visible&&X.axis&&(X.axis.type&&(J.type=X.axis.type),X.axis.matches&&(J.matches=j)))}}}var F=!l&&!m,I=!l&&!c;for(s._axesDim={},y=0;y<d;y++){var D=g[y],R=y===0,O=y===d-1,z=R&&F||O&&I?void 0:w[y],H=R&&I||O&&F?void 0:h[y];P(z,H,D,E),P(H,z,D,S),L[y]=[z,H],s._axesDim[z]=y,s._axesDim[H]=y}for(y=0;y<E.length;y++)for(u=0;u<S.length;u++){var Y=E[y]+S[u];(y>u&&c||y<u&&m||y===u&&(l||!m||!c))&&(o._splomSubplots[Y]=1)}(!m||!l&&c&&m)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(t,B,G){var x=t("../../lib"),f=t("../scatter/colorscale_calc"),M=t("../scattergl/convert").markerStyle;B.exports=function(e,a){var i=a.trace,n=e._fullLayout._splomScenes[i.uid];if(n){f(e,i),x.extendFlat(n.matrixOptions,M(e,i));var r=x.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(r,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(t,B,G){G.getDimIndex=function(f,M){for(var T=M._id,e=T.charAt(0),a={x:0,y:1}[e],i=f._visibleDims,n=0;n<i.length;n++){var r=i[n];if(f._diag[r][a]===T)return n}return!1}},{}],1048:[function(t,B,G){var x=t("./helpers"),f=t("../scattergl/hover").calcHover;function M(T,e,a){var i=T.cd,n=i[0].trace,r=T.scene,v=r.matrixOptions.cdata,s=T.xa,o=T.ya,b=s.c2p(e),g=o.c2p(a),d=T.distance,c=x.getDimIndex(n,s),m=x.getDimIndex(n,o);if(c===!1||m===!1)return[T];for(var l=v[c],y=v[m],u,A,_=d,p=0;p<l.length;p++){var w=l[p],h=y[p],L=s.c2p(w)-b,E=o.c2p(h)-g,S=Math.sqrt(L*L+E*E);S<_&&(_=A=S,u=p)}return T.index=u,T.distance=_,T.dxy=A,u===void 0?[T]:[f(T,l,y,n)]}B.exports={hoverPoints:M}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(t,B,G){var x=t("./base_index");x.basePlotModule=t("./base_plot"),B.exports=x},{"./base_index":1042,"./base_plot":1043}],1050:[function(t,B,G){var x=t("regl-splom"),f=t("../../lib"),M=t("../../plots/cartesian/axis_ids"),T=t("../../components/dragelement/helpers").selectMode;B.exports=function(i,n,r){if(!!r.length)for(var v=0;v<r.length;v++)e(i,r[v][0])};function e(a,i){var n=a._fullLayout,r=n._size,v=i.trace,s=i.t,o=n._splomScenes[v.uid],b=o.matrixOptions,g=b.cdata,d=n._glcanvas.data()[0].regl,c=n.dragmode,m,l,y,u,A;if(g.length!==0){b.lower=v.showupperhalf,b.upper=v.showlowerhalf,b.diagonal=v.diagonal.visible;var _=v._visibleDims,p=g.length,w=o.viewOpts={};for(w.ranges=new Array(p),w.domains=new Array(p),A=0;A<_.length;A++){y=_[A];var h=w.ranges[A]=new Array(4),L=w.domains[A]=new Array(4);m=M.getFromId(a,v._diag[y][0]),m&&(h[0]=m._rl[0],h[2]=m._rl[1],L[0]=m.domain[0],L[2]=m.domain[1]),l=M.getFromId(a,v._diag[y][1]),l&&(h[1]=l._rl[0],h[3]=l._rl[1],L[1]=l.domain[0],L[3]=l.domain[1])}var E=a._context.plotGlPixelRatio,S=r.l*E,P=r.b*E,F=r.w*E,I=r.h*E;w.viewport=[S,P,F+S,I+P],o.matrix===!0&&(o.matrix=x(d));var D=n.clickmode.indexOf("select")>-1,R=T(c)||!!v.selectedpoints||D,O=!0;if(R){var z=v._length;if(v.selectedpoints){o.selectBatch=v.selectedpoints;var H=v.selectedpoints,Y={};for(y=0;y<H.length;y++)Y[H[y]]=!0;var ee=[];for(y=0;y<z;y++)Y[y]||ee.push(y);o.unselectBatch=ee}var j=s.xpx=new Array(p),X=s.ypx=new Array(p);for(A=0;A<_.length;A++){if(y=_[A],m=M.getFromId(a,v._diag[y][0]),m)for(j[A]=new Array(z),u=0;u<z;u++)j[A][u]=m.c2p(g[A][u]);if(l=M.getFromId(a,v._diag[y][1]),l)for(X[A]=new Array(z),u=0;u<z;u++)X[A][u]=l.c2p(g[A][u])}if(o.selectBatch.length||o.unselectBatch.length){var ae=f.extendFlat({},b,o.unselectedOptions,w),fe=f.extendFlat({},b,o.selectedOptions,w);o.matrix.update(ae,fe),O=!1}}else s.xpx=s.ypx=null;if(O){var K=f.extendFlat({},b,w);o.matrix.update(K,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(t,B,G){var x=t("../../lib");B.exports=function(M,T){var e=M._fullLayout,a=T.uid,i=e._splomScenes;i||(i=e._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},v=i[T.uid];return v||(v=i[a]=x.extendFlat({},n,r),v.draw=function(){v.matrix&&v.matrix.draw&&(v.selectBatch.length||v.unselectBatch.length?v.matrix.draw(v.unselectBatch,v.selectBatch):v.matrix.draw()),v.dirty=!1},v.destroy=function(){v.matrix&&v.matrix.destroy&&v.matrix.destroy(),v.matrixOptions=null,v.selectBatch=null,v.unselectBatch=null,v=null}),v.dirty||x.extendFlat(v,n),v}},{"../../lib":515}],1052:[function(t,B,G){var x=t("../../lib"),f=x.pushUnique,M=t("../scatter/subtypes"),T=t("./helpers");B.exports=function(a,i){var n=a.cd,r=n[0].trace,v=n[0].t,s=a.scene,o=s.matrixOptions.cdata,b=a.xaxis,g=a.yaxis,d=[];if(!s)return d;var c=!M.hasMarkers(r)&&!M.hasText(r);if(r.visible!==!0||c)return d;var m=T.getDimIndex(r,b),l=T.getDimIndex(r,g);if(m===!1||l===!1)return d;var y=v.xpx[m],u=v.ypx[l],A=o[m],_=o[l],p=(a.scene.selectBatch||[]).slice(),w=[];if(i!==!1&&!i.degenerate)for(var h=0;h<A.length;h++)i.contains([y[h],u[h]],null,h,a)?(d.push({pointNumber:h,x:A[h],y:_[h]}),f(p,h)):p.indexOf(h)!==-1?f(p,h):w.push(h);var L=s.matrixOptions;return!p.length&&!w.length?s.matrix.update(L,null):!s.selectBatch.length&&!s.unselectBatch.length&&s.matrix.update(s.unselectedOptions,x.extendFlat({},L,s.selectedOptions,s.viewOpts)),s.selectBatch=p,s.unselectBatch=w,d}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:f("u",1),vhoverformat:f("v",1),whoverformat:f("w",1),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,x("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,B.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/calc");function M(i,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=a(n.u,n._len),n._v=a(n.v,n._len),n._w=a(n.w,n._len),n._x=a(n.x,n._len),n._y=a(n.y,n._len),n._z=a(n.z,n._len);var r=T(n);n._gridFill=r.fill,n._Xs=r.Xs,n._Ys=r.Ys,n._Zs=r.Zs,n._len=r.len;var v=0,s,o,b;n.starts&&(s=a(n.starts.x||[]),o=a(n.starts.y||[]),b=a(n.starts.z||[]),v=Math.min(s.length,o.length,b.length)),n._startsX=s||[],n._startsY=o||[],n._startsZ=b||[];var g=0,d=1/0,c;for(c=0;c<n._len;c++){var m=n._u[c],l=n._v[c],y=n._w[c],u=Math.sqrt(m*m+l*l+y*y);g=Math.max(g,u),d=Math.min(d,u)}for(f(i,n,{vals:[d,g],containerStr:"",cLetter:"c"}),c=0;c<v;c++){var A=s[c];r.xMax=Math.max(r.xMax,A),r.xMin=Math.min(r.xMin,A);var _=o[c];r.yMax=Math.max(r.yMax,_),r.yMin=Math.min(r.yMin,_);var p=b[c];r.zMax=Math.max(r.zMax,p),r.zMin=Math.min(r.zMin,p)}n._slen=v,n._normMax=g,n._xbnds=[r.xMin,r.xMax],n._ybnds=[r.yMin,r.yMax],n._zbnds=[r.zMin,r.zMax]}function T(i){var n=i._x,r=i._y,v=i._z,s=i._len,o,b,g,d=-1/0,c=1/0,m=-1/0,l=1/0,y=-1/0,u=1/0,A="",_,p,w,h,L,E,S,P,F;for(s&&(h=n[0],E=r[0],P=v[0]),s>1&&(L=n[s-1],S=r[s-1],F=v[s-1]),o=0;o<s;o++)d=Math.max(d,n[o]),c=Math.min(c,n[o]),m=Math.max(m,r[o]),l=Math.min(l,r[o]),y=Math.max(y,v[o]),u=Math.min(u,v[o]),!_&&n[o]!==h&&(_=!0,A+="x"),!p&&r[o]!==E&&(p=!0,A+="y"),!w&&v[o]!==P&&(w=!0,A+="z");_||(A+="x"),p||(A+="y"),w||(A+="z");var I=e(i._x),D=e(i._y),R=e(i._z);A=A.replace("x",(h>L?"-":"+")+"x"),A=A.replace("y",(E>S?"-":"+")+"y"),A=A.replace("z",(P>F?"-":"+")+"z");var O=function(){s=0,I=[],D=[],R=[]};(!s||s<I.length*D.length*R.length)&&O();var z=function(ne){return ne==="x"?n:ne==="y"?r:v},H=function(ne){return ne==="x"?I:ne==="y"?D:R},Y=function(ne){return ne[s-1]<ne[0]?-1:1},ee=z(A[1]),j=z(A[3]),X=z(A[5]),ae=H(A[1]).length,fe=H(A[3]).length,K=H(A[5]).length,J=!1,U=function(ne,se,_e){return ae*(fe*ne+se)+_e},V=Y(z(A[1])),q=Y(z(A[3])),re=Y(z(A[5]));for(o=0;o<K-1;o++){for(b=0;b<fe-1;b++){for(g=0;g<ae-1;g++){var Z=U(o,b,g),Q=U(o,b,g+1),ie=U(o,b+1,g),oe=U(o+1,b,g);if((!(ee[Z]*V<ee[Q]*V)||!(j[Z]*q<j[ie]*q)||!(X[Z]*re<X[oe]*re))&&(J=!0),J)break}if(J)break}if(J)break}return J&&(x.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:c,yMin:l,zMin:u,xMax:d,yMax:m,zMax:y,Xs:I,Ys:D,Zs:R,len:s,fill:A}}function e(i){return x.distinctVals(i).vals}function a(i,n){if(n===void 0&&(n=i.length),x.isTypedArray(i))return i.subarray(0,n);for(var r=[],v=0;v<n;v++)r[v]=+i[v];return r}B.exports={calc:M,filter:a,processGrid:T}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(t,B,G){var x=t("../../../stackgl_modules").gl_streamtube3d,f=x.createTubeMesh,M=t("../../lib"),T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function n(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(g){var d=this.scene.fullSceneLayout,c=this.scene.dataScale;function m(u,A){var _=d[A],p=c[i[A]];return _.l2c(u)/p}if(g.object===this.mesh){var l=g.data.position,y=g.data.velocity;return g.traceCoordinate=[m(l[0],"xaxis"),m(l[1],"yaxis"),m(l[2],"zaxis"),m(y[0],"xaxis"),m(y[1],"yaxis"),m(y[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence],g.textLabel=this.data.hovertext||this.data.text,!0}};function v(g){var d=g.length,c;return d>2?c=g.slice(1,d-1):d===2?c=[(g[0]+g[1])/2]:c=g,c}function s(g){var d=g.length;return d===1?[.5,.5]:[g[1]-g[0],g[d-1]-g[d-2]]}function o(g,d){var c=g.fullSceneLayout,m=g.dataScale,l=d._len,y={};function u(fe,K){var J=c[K],U=m[i[K]];return M.simpleMap(fe,function(V){return J.d2l(V)*U})}if(y.vectors=a(u(d._u,"xaxis"),u(d._v,"yaxis"),u(d._w,"zaxis"),l),!l)return{positions:[],cells:[]};var A=u(d._Xs,"xaxis"),_=u(d._Ys,"yaxis"),p=u(d._Zs,"zaxis");y.meshgrid=[A,_,p],y.gridFill=d._gridFill;var w=d._slen;if(w)y.startingPositions=a(u(d._startsX,"xaxis"),u(d._startsY,"yaxis"),u(d._startsZ,"zaxis"));else{for(var h=_[0],L=v(A),E=v(p),S=new Array(L.length*E.length),P=0,F=0;F<L.length;F++)for(var I=0;I<E.length;I++)S[P++]=[L[F],h,E[I]];y.startingPositions=S}y.colormap=T(d),y.tubeSize=d.sizeref,y.maxLength=d.maxdisplayed;var D=u(d._xbnds,"xaxis"),R=u(d._ybnds,"yaxis"),O=u(d._zbnds,"zaxis"),z=s(A),H=s(_),Y=s(p),ee=[[D[0]-z[0],R[0]-H[0],O[0]-Y[0]],[D[1]+z[1],R[1]+H[1],O[1]+Y[1]]],j=x(y,ee),X=e(d);j.vertexIntensityBounds=[X.min/d._normMax,X.max/d._normMax];var ae=d.lightposition;return j.lightPosition=[ae.x,ae.y,ae.z],j.ambient=d.lighting.ambient,j.diffuse=d.lighting.diffuse,j.specular=d.lighting.specular,j.roughness=d.lighting.roughness,j.fresnel=d.lighting.fresnel,j.opacity=d.opacity,d._pad=j.tubeScale*d.sizeref*2,j}r.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var c=g.glplot.gl,m=o(g,d),l=f(c,m),y=new n(g,d.uid);return y.mesh=l,y.data=d,l._trace=y,g.glplot.add(l),y}B.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(t,B,G){var x=t("../../lib"),f=t("../../components/colorscale/defaults"),M=t("./attributes");B.exports=function(e,a,i,n){function r(c,m){return x.coerce(e,a,M,c,m)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),f(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(t,B,G){B.exports={moduleType:"trace",name:"streamtube",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc").calc,plot:t("./convert"),eventData:function(x,f){return x.tubex=x.x,x.tubey=x.y,x.tubez=x.z,x.tubeu=f.traceCoordinate[3],x.tubev=f.traceCoordinate[4],x.tubew=f.traceCoordinate[5],x.norm=f.traceCoordinate[6],x.divergence=f.traceCoordinate[7],delete x.x,delete x.y,delete x.z,x},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(t,B,G){var x=t("../../plots/attributes"),f=t("../../plots/template_attributes").hovertemplateAttrs,M=t("../../plots/template_attributes").texttemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/domain").attributes,a=t("../pie/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},a.marker.line.color,{dflt:null}),width:n({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:M({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:n({},x.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:f({},{keys:i.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:n({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(t,B,G){var x=t("../../plots/plots");G.name="sunburst",G.plot=function(f,M,T,e){x.plotBasePlot(G.name,f,M,T,e)},G.clean=function(f,M,T,e){x.cleanBasePlot(G.name,f,M,T,e)}},{"../../plots/plots":628}],1060:[function(t,B,G){var x=t("d3-hierarchy"),f=t("fast-isnumeric"),M=t("../../lib"),T=t("../../components/colorscale").makeColorScaleFuncFromTrace,e=t("../pie/calc").makePullColorFn,a=t("../pie/calc").generateExtendedColors,i=t("../../components/colorscale").calc,n=t("../../constants/numerical").ALMOST_EQUAL,r={},v={},s={};G.calc=function(b,g){var d=b._fullLayout,c=g.ids,m=M.isArrayOrTypedArray(c),l=g.labels,y=g.parents,u=g.values,A=M.isArrayOrTypedArray(u),_=[],p={},w={},h=function(V,q){p[V]?p[V].push(q):p[V]=[q],w[q]=1},L=function(V){return V||typeof V=="number"},E=function(V){return!A||f(u[V])&&u[V]>=0},S,P,F;m?(S=Math.min(c.length,y.length),P=function(V){return L(c[V])&&E(V)},F=function(V){return String(c[V])}):(S=Math.min(l.length,y.length),P=function(V){return L(l[V])&&E(V)},F=function(V){return String(l[V])}),A&&(S=Math.min(S,u.length));for(var I=0;I<S;I++)if(P(I)){var D=F(I),R=L(y[I])?String(y[I]):"",O={i:I,id:D,pid:R,label:L(l[I])?String(l[I]):""};A&&(O.v=+u[I]),_.push(O),h(R,D)}if(p[""]){if(p[""].length>1){for(var Y=M.randstr(),ee=0;ee<_.length;ee++)_[ee].pid===""&&(_[ee].pid=Y);_.unshift({hasMultipleRoots:!0,id:Y,pid:"",label:""})}}else{var z=[],H;for(H in p)w[H]||z.push(H);if(z.length===1)H=z[0],_.unshift({hasImpliedRoot:!0,id:H,pid:"",label:H});else return M.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",z.join(", ")].join(" "))}var j;try{j=x.stratify().id(function(V){return V.id}).parentId(function(V){return V.pid})(_)}catch(V){return M.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",V.message].join(" "))}var X=x.hierarchy(j),ae=!1;if(A)switch(g.branchvalues){case"remainder":X.sum(function(V){return V.data.v});break;case"total":X.each(function(V){var q=V.data.data,re=q.v;if(V.children){var Z=V.children.reduce(function(Q,ie){return Q+ie.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(re=Z),re<Z*n)return ae=!0,M.warn(["Total value for node",V.data.data.id,"of",g.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,Z].join(" "))}V.value=re});break}else o(X,g,{branches:g.count.indexOf("branches")!==-1,leaves:g.count.indexOf("leaves")!==-1});if(!ae){g.sort&&X.sort(function(V,q){return q.value-V.value});var fe,K,J=g.marker.colors||[],U=!!J.length;return g._hasColorscale?(U||(J=A?g.values:g._values),i(b,g,{vals:J,containerStr:"marker",cLetter:"c"}),K=T(g.marker)):fe=e(d["_"+g.type+"colormap"]),X.each(function(V){var q=V.data.data;q.color=g._hasColorscale?K(J[q.i]):fe(J[q.i],q.id)}),_[0].hierarchy=X,_}},G._runCrossTraceCalc=function(b,g){var d=g._fullLayout,c=g.calcdata,m=d[b+"colorway"],l=d["_"+b+"colormap"];d["extend"+b+"colors"]&&(m=a(m,b==="icicle"?s:b==="treemap"?v:r));var y=0,u;function A(h){var L=h.data.data,E=L.id;L.color===!1&&(l[E]?L.color=l[E]:h.parent?h.parent.parent?L.color=h.parent.data.data.color:(l[E]=L.color=m[y%m.length],y++):L.color=u)}for(var _=0;_<c.length;_++){var p=c[_],w=p[0];w.trace.type===b&&w.hierarchy&&(u=w.trace.root.color,w.hierarchy.each(A))}},G.crossTraceCalc=function(b){return G._runCrossTraceCalc("sunburst",b)};function o(b,g,d){var c=0,m=b.children;if(m){for(var l=m.length,y=0;y<l;y++)c+=o(m[y],g,d);d.branches&&c++}else d.leaves&&c++;return b.value=b.data.data.value=c,g._values||(g._values=[]),g._values[b.data.data.i]=c,c}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(t,B,G){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../../components/colorscale"),a=e.hasColorscale,i=e.handleDefaults;B.exports=function(r,v,s,o){function b(A,_){return x.coerce(r,v,f,A,_)}var g=b("labels"),d=b("parents");if(!g||!g.length||!d||!d.length){v.visible=!1;return}var c=b("values");c&&c.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var m=b("marker.line.width");m&&b("marker.line.color",o.paper_bgcolor),b("marker.colors");var l=v._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;l&&i(r,v,o,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",l?1:.7);var y=b("text");b("texttemplate"),v.texttemplate||b("textinfo",Array.isArray(y)?"text+label":"label"),b("hovertext"),b("hovertemplate");var u="auto";T(r,v,o,b,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("insidetextorientation"),b("sort"),b("rotation"),b("root.color"),M(v,o,b),v._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../registry"),M=t("../../components/fx/helpers").appendArrayPointValue,T=t("../../components/fx"),e=t("../../lib"),a=t("../../lib/events"),i=t("./helpers"),n=t("../pie/helpers"),r=n.formatPieValue;B.exports=function(o,b,g,d,c){var m=d[0],l=m.trace,y=m.hierarchy,u=l.type==="sunburst",A=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var _=function(h){var L=g._fullLayout;if(!(g._dragging||L.hovermode===!1)){var E=g._fullData[l.index],S=h.data.data,P=S.i,F=i.isHierarchyRoot(h),I=i.getParent(y,h),D=i.getValue(h),R=function(Q){return e.castOption(E,P,Q)},O=R("hovertemplate"),z=T.castHoverinfo(E,L,P),H=L.separators,Y;if(O||z&&z!=="none"&&z!=="skip"){var ee,j;u&&(ee=m.cx+h.pxmid[0]*(1-h.rInscribed),j=m.cy+h.pxmid[1]*(1-h.rInscribed)),A&&(ee=h._hoverX,j=h._hoverY);var X={},ae=[],fe=[],K=function(Q){return ae.indexOf(Q)!==-1};z&&(ae=z==="all"?E._module.attributes.hoverinfo.flags:z.split("+")),X.label=S.label,K("label")&&X.label&&fe.push(X.label),S.hasOwnProperty("v")&&(X.value=S.v,X.valueLabel=r(X.value,H),K("value")&&fe.push(X.valueLabel)),X.currentPath=h.currentPath=i.getPath(h.data),K("current path")&&!F&&fe.push(X.currentPath);var J,U=[],V=function(){U.indexOf(J)===-1&&(fe.push(J),U.push(J))};X.percentParent=h.percentParent=D/i.getValue(I),X.parent=h.parentString=i.getPtLabel(I),K("percent parent")&&(J=i.formatPercent(X.percentParent,H)+" of "+X.parent,V()),X.percentEntry=h.percentEntry=D/i.getValue(b),X.entry=h.entry=i.getPtLabel(b),K("percent entry")&&!F&&!h.onPathbar&&(J=i.formatPercent(X.percentEntry,H)+" of "+X.entry,V()),X.percentRoot=h.percentRoot=D/i.getValue(y),X.root=h.root=i.getPtLabel(y),K("percent root")&&!F&&(J=i.formatPercent(X.percentRoot,H)+" of "+X.root,V()),X.text=R("hovertext")||R("text"),K("text")&&(J=X.text,e.isValidTextValue(J)&&fe.push(J)),Y=[v(h,E,c.eventDataKeys)];var q={trace:E,y:j,_x0:h._x0,_x1:h._x1,_y0:h._y0,_y1:h._y1,text:fe.join("<br>"),name:O||K("name")?E.name:void 0,color:R("hoverlabel.bgcolor")||S.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:X,eventData:Y};u&&(q.x0=ee-h.rInscribed*h.rpx1,q.x1=ee+h.rInscribed*h.rpx1,q.idealAlign=h.pxmid[0]<0?"left":"right"),A&&(q.x=ee,q.idealAlign=ee<0?"left":"right");var re=[];T.loneHover(q,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:g,inOut_bbox:re}),Y[0].bbox=re[0],l._hasHoverLabel=!0}if(A){var Z=o.select("path.surface");c.styleOne(Z,h,E,{hovered:!0})}l._hasHoverEvent=!0,g.emit("plotly_hover",{points:Y||[v(h,E,c.eventDataKeys)],event:x.event})}},p=function(h){var L=g._fullLayout,E=g._fullData[l.index],S=x.select(this).datum();if(l._hasHoverEvent&&(h.originalEvent=x.event,g.emit("plotly_unhover",{points:[v(S,E,c.eventDataKeys)],event:x.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(L._hoverlayer.node()),l._hasHoverLabel=!1),A){var P=o.select("path.surface");c.styleOne(P,S,E,{hovered:!1})}},w=function(h){var L=g._fullLayout,E=g._fullData[l.index],S=u&&(i.isHierarchyRoot(h)||i.isLeaf(h)),P=i.getPtId(h),F=i.isEntry(h)?i.findEntryWithChild(y,P):i.findEntryWithLevel(y,P),I=i.getPtId(F),D={points:[v(h,E,c.eventDataKeys)],event:x.event};S||(D.nextLevel=I);var R=a.triggerHandler(g,"plotly_"+l.type+"click",D);if(R!==!1&&L.hovermode&&(g._hoverdata=[v(h,E,c.eventDataKeys)],T.click(g,x.event)),!S&&R!==!1&&!g._dragging&&!g._transitioning){f.call("_storeDirectGUIEdit",E,L._tracePreGUI[E.uid],{level:E.level});var O={data:[{level:I}],traces:[l.index]},z={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(L._hoverlayer.node()),f.call("animate",g,O,z)}};o.on("mouseover",_),o.on("mouseout",p),o.on("click",w)};function v(s,o,b){for(var g=s.data.data,d={curveNumber:o.index,pointNumber:g.i,data:o._input,fullData:o},c=0;c<b.length;c++){var m=b[c];m in s&&(d[m]=s[m])}return"parentString"in s&&!i.isHierarchyRoot(s)&&(d.parent=s.parentString),M(d,o,g.i),d}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../../lib/setcursor"),T=t("../pie/helpers");G.findEntryWithLevel=function(n,r){var v;return r&&n.eachAfter(function(s){if(G.getPtId(s)===r)return v=s.copy()}),v||n},G.findEntryWithChild=function(n,r){var v;return n.eachAfter(function(s){for(var o=s.children||[],b=0;b<o.length;b++){var g=o[b];if(G.getPtId(g)===r)return v=s.copy()}}),v||n},G.isEntry=function(n){return!n.parent},G.isLeaf=function(n){return!n.children},G.getPtId=function(n){return n.data.data.id},G.getPtLabel=function(n){return n.data.data.label},G.getValue=function(n){return n.value},G.isHierarchyRoot=function(n){return i(n)===""},G.setSliceCursor=function(n,r,v){var s=v.isTransitioning;if(!s){var o=n.datum();s=v.hideOnRoot&&G.isHierarchyRoot(o)||v.hideOnLeaves&&G.isLeaf(o)}M(n,s?null:"pointer")};function e(n,r,v){return{color:G.getOutsideTextFontKey("color",n,r,v),family:G.getOutsideTextFontKey("family",n,r,v),size:G.getOutsideTextFontKey("size",n,r,v)}}function a(n,r,v,s){var o=(s||{}).onPathbar,b=r.data.data,g=b.i,d=x.castOption(n,g,(o?"pathbar.textfont":"insidetextfont")+".color");return!d&&n._input.textfont&&(d=x.castOption(n._input,g,"textfont.color")),{color:d||f.contrast(b.color),family:G.getInsideTextFontKey("family",n,r,v,s),size:G.getInsideTextFontKey("size",n,r,v,s)}}G.getInsideTextFontKey=function(n,r,v,s,o){var b=(o||{}).onPathbar,g=b?"pathbar.textfont":"insidetextfont",d=v.data.data.i;return x.castOption(r,d,g+"."+n)||x.castOption(r,d,"textfont."+n)||s.size},G.getOutsideTextFontKey=function(n,r,v,s){var o=v.data.data.i;return x.castOption(r,o,"outsidetextfont."+n)||x.castOption(r,o,"textfont."+n)||s.size},G.isOutsideText=function(n,r){return!n._hasColorscale&&G.isHierarchyRoot(r)},G.determineTextFont=function(n,r,v,s){return G.isOutsideText(n,r)?e(n,r,v):a(n,r,v,s)},G.hasTransition=function(n){return!!(n&&n.duration>0)},G.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},G.isHeader=function(n,r){return!(G.isLeaf(n)||n.depth===r._maxDepth-1)};function i(n){return n.data.data.pid}G.getParent=function(n,r){return G.findEntryWithLevel(n,i(r))},G.listPath=function(n,r){var v=n.parent;if(!v)return[];var s=r?[v.data[r]]:[v];return G.listPath(v,r).concat(s)},G.getPath=function(n){return G.listPath(n,"label").join("/")+"/"},G.formatValue=T.formatPieValue,G.formatPercent=function(n,r){var v=x.formatPercent(n,0);return v==="0%"&&(v=T.formatPiePercent(n,r)),v}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(t,B,G){B.exports={moduleType:"trace",name:"sunburst",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(t,B,G){B.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return x.coerce(T,e,f,i,n)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-hierarchy"),M=t("d3-interpolate").interpolate,T=t("../../components/drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../bar/uniform_text"),n=i.recordMinTextSize,r=i.clearMinTextSize,v=t("../pie/plot"),s=t("../pie/helpers").getRotationAngle,o=v.computeTransform,b=v.transformInsideText,g=t("./style").styleOne,d=t("../bar/style").resizeText,c=t("./fx"),m=t("./constants"),l=t("./helpers");G.plot=function(w,h,L,E){var S=w._fullLayout,P=S._sunburstlayer,F,I,D=!L,R=!S.uniformtext.mode&&l.hasTransition(L);if(r("sunburst",S),F=P.selectAll("g.trace.sunburst").data(h,function(z){return z[0].trace.uid}),F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),R){E&&(I=E());var O=x.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){P.selectAll("g.trace").each(function(z){y(w,z,this,L)})})}else F.each(function(z){y(w,z,this,L)}),S.uniformtext.mode&&d(w,S._sunburstlayer.selectAll(".trace"),"sunburst");D&&F.exit().remove()};function y(w,h,L,E){var S=w._context.staticPlot,P=w._fullLayout,F=!P.uniformtext.mode&&l.hasTransition(E),I=x.select(L),D=I.selectAll("g.slice"),R=h[0],O=R.trace,z=R.hierarchy,H=l.findEntryWithLevel(z,O.level),Y=l.getMaxDepth(O),ee=P._size,j=O.domain,X=ee.w*(j.x[1]-j.x[0]),ae=ee.h*(j.y[1]-j.y[0]),fe=.5*Math.min(X,ae),K=R.cx=ee.l+ee.w*(j.x[1]+j.x[0])/2,J=R.cy=ee.t+ee.h*(1-j.y[0])-ae/2;if(!H)return D.remove();var U=null,V={};F&&D.each(function(Ce){V[l.getPtId(Ce)]={rpx0:Ce.rpx0,rpx1:Ce.rpx1,x0:Ce.x0,x1:Ce.x1,transform:Ce.transform},!U&&l.isEntry(Ce)&&(U=Ce)});var q=u(H).descendants(),re=H.height+1,Z=0,Q=Y;R.hasMultipleRoots&&l.isHierarchyRoot(H)&&(q=q.slice(1),re-=1,Z=1,Q+=1),q=q.filter(function(Ce){return Ce.y1<=Q});var ie=s(O.rotation);ie&&q.forEach(function(Ce){Ce.x0+=ie,Ce.x1+=ie});var oe=Math.min(re,Y),ne=function(Ce){return(Ce-Z)/oe*fe},se=function(Ce,Ze){return[Ce*Math.cos(Ze),-Ce*Math.sin(Ze)]},_e=function(Ce){return e.pathAnnulus(Ce.rpx0,Ce.rpx1,Ce.x0,Ce.x1,K,J)},ue=function(Ce){return K+_(Ce)[0]*(Ce.transform.rCenter||0)+(Ce.transform.x||0)},ge=function(Ce){return J+_(Ce)[1]*(Ce.transform.rCenter||0)+(Ce.transform.y||0)};D=D.data(q,l.getPtId),D.enter().append("g").classed("slice",!0),F?D.exit().transition().each(function(){var Ce=x.select(this),Ze=Ce.select("path.surface");Ze.transition().attrTween("d",function(ze){var Ie=Se(ze);return function(Ge){return _e(Ie(Ge))}});var Ye=Ce.select("g.slicetext");Ye.attr("opacity",0)}).remove():D.exit().remove(),D.order();var xe=null;if(F&&U){var ye=l.getPtId(U);D.each(function(Ce){xe===null&&l.getPtId(Ce)===ye&&(xe=Ce.x1)})}var be=D;F&&(be=be.transition().each("end",function(){var Ce=x.select(this);l.setSliceCursor(Ce,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),be.each(function(Ce){var Ze=x.select(this),Ye=e.ensureSingle(Ze,"path","surface",function(Qt){Qt.style("pointer-events",S?"none":"all")});Ce.rpx0=ne(Ce.y0),Ce.rpx1=ne(Ce.y1),Ce.xmid=(Ce.x0+Ce.x1)/2,Ce.pxmid=se(Ce.rpx1,Ce.xmid),Ce.midangle=-(Ce.xmid-Math.PI/2),Ce.startangle=-(Ce.x0-Math.PI/2),Ce.stopangle=-(Ce.x1-Math.PI/2),Ce.halfangle=.5*Math.min(e.angleDelta(Ce.x0,Ce.x1)||Math.PI,Math.PI),Ce.ring=1-Ce.rpx0/Ce.rpx1,Ce.rInscribed=A(Ce),F?Ye.transition().attrTween("d",function(Qt){var Bt=Re(Qt);return function(Ct){return _e(Bt(Ct))}}):Ye.attr("d",_e),Ze.call(c,H,w,h,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),Ye.call(g,Ce,O);var ze=e.ensureSingle(Ze,"g","slicetext"),Ie=e.ensureSingle(ze,"text","",function(Qt){Qt.attr("data-notex",1)}),Ge=e.ensureUniformFontSize(w,l.determineTextFont(O,Ce,P.font));Ie.text(G.formatSliceLabel(Ce,H,O,h,P)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ge).call(a.convertToTspans,w);var dt=T.bBox(Ie.node());Ce.transform=b(dt,Ce,R),Ce.transform.targetX=ue(Ce),Ce.transform.targetY=ge(Ce);var Rt=function(Qt,Bt){var Ct=Qt.transform;return o(Ct,Bt),Ct.fontSize=Ge.size,n(O.type,Ct,P),e.getTextTransform(Ct)};F?Ie.transition().attrTween("transform",function(Qt){var Bt=Ve(Qt);return function(Ct){return Rt(Bt(Ct),dt)}}):Ie.attr("transform",Rt(Ce,dt))});function Se(Ce){var Ze=l.getPtId(Ce),Ye=V[Ze],ze=V[l.getPtId(H)],Ie;if(ze){var Ge=(Ce.x1>ze.x1?2*Math.PI:0)+ie;Ie=Ce.rpx1<ze.rpx1?{x0:Ce.x0,x1:Ce.x1,rpx0:0,rpx1:0}:{x0:Ge,x1:Ge,rpx0:Ce.rpx0,rpx1:Ce.rpx1}}else{var dt,Rt=l.getPtId(Ce.parent);D.each(function(Ot){if(l.getPtId(Ot)===Rt)return dt=Ot});var Qt=dt.children,Bt;Qt.forEach(function(Ot,St){if(l.getPtId(Ot)===Ze)return Bt=St});var Ct=Qt.length,Kt=M(dt.x0,dt.x1);Ie={rpx0:fe,rpx1:fe,x0:Kt(Bt/Ct),x1:Kt((Bt+1)/Ct)}}return M(Ye,Ie)}function Re(Ce){var Ze=V[l.getPtId(Ce)],Ye,ze={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(Ze)Ye=Ze;else if(U)if(Ce.parent)if(xe){var Ie=(Ce.x1>xe?2*Math.PI:0)+ie;Ye={x0:Ie,x1:Ie}}else Ye={rpx0:fe,rpx1:fe},e.extendFlat(Ye,Ae(Ce));else Ye={rpx0:0,rpx1:0};else Ye={x0:ie,x1:ie};return M(Ye,ze)}function Ve(Ce){var Ze=V[l.getPtId(Ce)],Ye,ze=Ce.transform;if(Ze)Ye=Ze;else if(Ye={rpx1:Ce.rpx1,transform:{textPosAngle:ze.textPosAngle,scale:0,rotate:ze.rotate,rCenter:ze.rCenter,x:ze.x,y:ze.y}},U)if(Ce.parent)if(xe){var Ie=Ce.x1>xe?2*Math.PI:0;Ye.x0=Ye.x1=Ie}else e.extendFlat(Ye,Ae(Ce));else Ye.x0=Ye.x1=ie;else Ye.x0=Ye.x1=ie;var Ge=M(Ye.transform.textPosAngle,Ce.transform.textPosAngle),dt=M(Ye.rpx1,Ce.rpx1),Rt=M(Ye.x0,Ce.x0),Qt=M(Ye.x1,Ce.x1),Bt=M(Ye.transform.scale,ze.scale),Ct=M(Ye.transform.rotate,ze.rotate),Kt=ze.rCenter===0?3:Ye.transform.rCenter===0?1/3:1,Ot=M(Ye.transform.rCenter,ze.rCenter),St=function(Xe){return Ot(Math.pow(Xe,Kt))};return function(Xe){var at=dt(Xe),We=Rt(Xe),Ee=Qt(Xe),He=St(Xe),Ke=se(at,(We+Ee)/2),et=Ge(Xe),At={pxmid:Ke,rpx1:at,transform:{textPosAngle:et,rCenter:He,x:ze.x,y:ze.y}};return n(O.type,ze,P),{transform:{targetX:ue(At),targetY:ge(At),scale:Bt(Xe),rotate:Ct(Xe),rCenter:He}}}}function Ae(Ce){var Ze=Ce.parent,Ye=V[l.getPtId(Ze)],ze={};if(Ye){var Ie=Ze.children,Ge=Ie.indexOf(Ce),dt=Ie.length,Rt=M(Ye.x0,Ye.x1);ze.x0=Rt(Ge/dt),ze.x1=Rt(Ge/dt)}else ze.x0=ze.x1=0;return ze}}function u(w){return f.partition().size([2*Math.PI,w.height+1])(w)}G.formatSliceLabel=function(w,h,L,E,S){var P=L.texttemplate,F=L.textinfo;if(!P&&(!F||F==="none"))return"";var I=S.separators,D=E[0],R=w.data.data,O=D.hierarchy,z=l.isHierarchyRoot(w),H=l.getParent(O,w),Y=l.getValue(w);if(!P){var ee=F.split("+"),j=function(Z){return ee.indexOf(Z)!==-1},X=[],ae;if(j("label")&&R.label&&X.push(R.label),R.hasOwnProperty("v")&&j("value")&&X.push(l.formatValue(R.v,I)),!z){j("current path")&&X.push(l.getPath(w.data));var fe=0;j("percent parent")&&fe++,j("percent entry")&&fe++,j("percent root")&&fe++;var K=fe>1;if(fe){var J,U=function(Z){ae=l.formatPercent(J,I),K&&(ae+=" of "+Z),X.push(ae)};j("percent parent")&&!z&&(J=Y/l.getValue(H),U("parent")),j("percent entry")&&(J=Y/l.getValue(h),U("entry")),j("percent root")&&(J=Y/l.getValue(O),U("root"))}}return j("text")&&(ae=e.castOption(L,R.i,"text"),e.isValidTextValue(ae)&&X.push(ae)),X.join("<br>")}var V=e.castOption(L,R.i,"texttemplate");if(!V)return"";var q={};R.label&&(q.label=R.label),R.hasOwnProperty("v")&&(q.value=R.v,q.valueLabel=l.formatValue(R.v,I)),q.currentPath=l.getPath(w.data),z||(q.percentParent=Y/l.getValue(H),q.percentParentLabel=l.formatPercent(q.percentParent,I),q.parent=l.getPtLabel(H)),q.percentEntry=Y/l.getValue(h),q.percentEntryLabel=l.formatPercent(q.percentEntry,I),q.entry=l.getPtLabel(h),q.percentRoot=Y/l.getValue(O),q.percentRootLabel=l.formatPercent(q.percentRoot,I),q.root=l.getPtLabel(O),R.hasOwnProperty("color")&&(q.color=R.color);var re=e.castOption(L,R.i,"text");return(e.isValidTextValue(re)||re==="")&&(q.text=re),q.customdata=e.castOption(L,R.i,"customdata"),e.texttemplateString(V,q,S._d3locale,q,L._meta||{})};function A(w){return w.rpx0===0&&e.isFullCircle([w.x0,w.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(w.halfangle)),w.ring/2))}function _(w){return p(w.rpx1,w.transform.textPosAngle)}function p(w,h){return[w*Math.sin(h),-w*Math.cos(h)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._sunburstlayer.selectAll(".trace");T(i,n,"sunburst"),n.each(function(r){var v=x.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){x.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=M.castOption(r,o,"marker.line.color")||f.defaultLine,g=M.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(f.fill,v.color).call(f.stroke,b).style("opacity",s?r.leaf.opacity:null)}B.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(t,B,G){var x=t("../../components/color"),f=t("../../components/colorscale/attributes"),M=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{valType:"boolean",dflt:!1}}function r(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:x.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:x.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var v=B.exports=i(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},f("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},f.zauto,{}),zmin:a({},f.zmin,{}),zmax:a({},f.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(t,B,G){var x=t("../../components/colorscale/calc");B.exports=function(M,T){T.surfacecolor?x(M,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):x(M,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(t,B,G){var x=t("../../../stackgl_modules").gl_surface3d,f=t("../../../stackgl_modules").ndarray,M=t("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=t("../heatmap/interp2d"),e=t("../heatmap/find_empties"),a=t("../../lib").isArrayOrTypedArray,i=t("../../lib/gl_format_color").parseColorScale,n=t("../../lib/str2rgbarray"),r=t("../../components/colorscale").extractOpts;function v(E,S,P){this.scene=E,this.uid=P,this.surface=S,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=v.prototype;s.getXat=function(E,S,P,F){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[S][E]:this.data.x[E]:E;return P===void 0?I:F.d2l(I,0,P)},s.getYat=function(E,S,P,F){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[S][E]:this.data.y[S]:S;return P===void 0?I:F.d2l(I,0,P)},s.getZat=function(E,S,P,F){var I=this.data.z[S][E];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[S][E]),P===void 0?I:F.d2l(I,0,P)},s.handlePick=function(E){if(E.object===this.surface){var S=(E.data.index[0]-1)/this.dataScaleX-1,P=(E.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(S),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);E.index=[F,I],E.traceCoordinate=[this.getXat(F,I),this.getYat(F,I),this.getZat(F,I)],E.dataCoordinate=[this.getXat(F,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=E.dataCoordinate[D];R!=null&&(E.dataCoordinate[D]*=this.scene.dataScale[D])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][F]!==void 0?E.textLabel=O[I][F]:O?E.textLabel=O:E.textLabel="",E.data.dataCoordinate=E.dataCoordinate.slice(),this.surface.highlight(E.data),this.scene.glplot.spikes.position=E.dataCoordinate,!0}};function o(E){var S=E[0].rgb,P=E[E.length-1].rgb;return S[0]===P[0]&&S[1]===P[1]&&S[2]===P[2]&&S[3]===P[3]}var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(E,S){if(E<S)return 0;for(var P=0;Math.floor(E%S)===0;)E/=S,P++;return P}function d(E){for(var S=[],P=0;P<b.length;P++){var F=b[P];S.push(g(E,F))}return S}function c(E){for(var S=d(E),P=E,F=0;F<b.length;F++)if(S[F]>0){P=b[F];break}return P}function m(E,S){if(!(E<1||S<1)){for(var P=d(E),F=d(S),I=1,D=0;D<b.length;D++)I*=Math.pow(b[D],Math.max(P[D],F[D]));return I}}function l(E){if(E.length!==0){for(var S=1,P=0;P<E.length;P++)S=m(S,E[P]);return S}}s.calcXnums=function(E){var S,P=[];for(S=1;S<E;S++){var F=this.getXat(S-1,0),I=this.getXat(S,0);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[S-1]=Math.abs(I-F):P[S-1]=0}var D=0;for(S=1;S<E;S++)D+=P[S-1];for(S=1;S<E;S++)P[S-1]===0?P[S-1]=1:P[S-1]=Math.round(D/P[S-1]);return P},s.calcYnums=function(E){var S,P=[];for(S=1;S<E;S++){var F=this.getYat(0,S-1),I=this.getYat(0,S);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[S-1]=Math.abs(I-F):P[S-1]=0}var D=0;for(S=1;S<E;S++)D+=P[S-1];for(S=1;S<E;S++)P[S-1]===0?P[S-1]=1:P[S-1]=Math.round(D/P[S-1]);return P};var y=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=y[9],A=y[13];s.estimateScale=function(E,S){for(var P=S===0?this.calcXnums(E):this.calcYnums(E),F=1+l(P);F<u;)F*=2;for(;F>A;)F--,F/=c(F),F++,F<u&&(F=A);var I=Math.round(F/E);return I>1?I:1};function _(E,S,P){var F=P[8]+P[2]*S[0]+P[5]*S[1];return E[0]=(P[6]+P[0]*S[0]+P[3]*S[1])/F,E[1]=(P[7]+P[1]*S[0]+P[4]*S[1])/F,E}function p(E,S,P){return w(E,S,_,P),E}function w(E,S,P,F){for(var I=[0,0],D=E.shape[0],R=E.shape[1],O=0;O<D;O++)for(var z=0;z<R;z++)P(I,[O,z],F),E.set(O,z,M(S,I[0],I[1]));return E}s.refineCoords=function(E){for(var S=this.dataScaleX,P=this.dataScaleY,F=E[0].shape[0],I=E[0].shape[1],D=Math.floor(E[0].shape[0]*S+1)|0,R=Math.floor(E[0].shape[1]*P+1)|0,O=1+F+1,z=1+I+1,H=f(new Float32Array(O*z),[O,z]),Y=[1/S,0,0,0,1/P,0,0,0,1],ee=0;ee<E.length;++ee){this.surface.padField(H,E[ee]);var j=f(new Float32Array(D*R),[D,R]);p(j,H,Y),E[ee]=j}};function h(E,S){for(var P=!1,F=0;F<E.length;F++)if(S===E[F]){P=!0;break}P===!1&&E.push(S)}s.setContourLevels=function(){var E=[[],[],[]],S=[!1,!1,!1],P=!1,F,I,D;for(F=0;F<3;++F)if(this.showContour[F]&&(P=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(S[F]=!0,I=this.contourStart[F];I<this.contourEnd[F];I+=this.contourSize[F])D=I*this.scene.dataScale[F],h(E[F],D);if(P){var R=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(R[F]=S[F]?E[F]:this.scene.contourLevels[F]);this.surface.update({levels:R})}},s.update=function(E){var S=this.scene,P=S.fullSceneLayout,F=this.surface,I=i(E),D=S.dataScale,R=E.z[0].length,O=E._ylength,z=S.contourLevels;this.data=E;var H,Y,ee,j,X=[];for(H=0;H<3;H++)for(X[H]=[],Y=0;Y<R;Y++)X[H][Y]=[];for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)X[0][Y][ee]=this.getXat(Y,ee,E.xcalendar,P.xaxis),X[1][Y][ee]=this.getYat(Y,ee,E.ycalendar,P.yaxis),X[2][Y][ee]=this.getZat(Y,ee,E.zcalendar,P.zaxis);if(E.connectgaps)for(E._emptypoints=e(X[2]),T(X[2],E._emptypoints),E._interpolatedZ=[],Y=0;Y<R;Y++)for(E._interpolatedZ[Y]=[],ee=0;ee<O;ee++)E._interpolatedZ[Y][ee]=X[2][Y][ee];for(H=0;H<3;H++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[H][Y][ee],j==null?X[H][Y][ee]=NaN:j=X[H][Y][ee]*=D[H];for(H=0;H<3;H++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[H][Y][ee],j!=null&&(this.minValues[H]>j&&(this.minValues[H]=j),this.maxValues[H]<j&&(this.maxValues[H]=j));for(H=0;H<3;H++)this.objectOffset[H]=.5*(this.minValues[H]+this.maxValues[H]);for(H=0;H<3;H++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[H][Y][ee],j!=null&&(X[H][Y][ee]-=this.objectOffset[H]);var ae=[f(new Float32Array(R*O),[R,O]),f(new Float32Array(R*O),[R,O]),f(new Float32Array(R*O),[R,O])];for(H=0;H<3;H++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)ae[H].set(Y,ee,X[H][Y][ee]);X=[];var fe={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!E.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:E.opacityscale,opacity:E.opacity},K=r(E);if(fe.intensityBounds=[K.min,K.max],E.surfacecolor){var J=f(new Float32Array(R*O),[R,O]);for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)J.set(Y,ee,E.surfacecolor[ee][Y]);ae.push(J)}else fe.intensityBounds[0]*=D[2],fe.intensityBounds[1]*=D[2];(A<ae[0].shape[0]||A<ae[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(ae[0].shape[0],0),this.dataScaleY=this.estimateScale(ae[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(ae)),E.surfacecolor&&(fe.intensity=ae.pop());var U=[!0,!0,!0],V=["x","y","z"];for(H=0;H<3;++H){var q=E.contours[V[H]];U[H]=q.highlight,fe.showContour[H]=q.show||q.highlight,fe.showContour[H]&&(fe.contourProject[H]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[H]=!0,fe.levels[H]=z[H],F.highlightColor[H]=fe.contourColor[H]=n(q.color),q.usecolormap?F.highlightTint[H]=fe.contourTint[H]=0:F.highlightTint[H]=fe.contourTint[H]=1,fe.contourWidth[H]=q.width,this.contourStart[H]=q.start,this.contourEnd[H]=q.end,this.contourSize[H]=q.size):(this.showContour[H]=!1,this.contourStart[H]=null,this.contourEnd[H]=null,this.contourSize[H]=0),q.highlight&&(fe.dynamicColor[H]=n(q.highlightcolor),fe.dynamicWidth[H]=q.highlightwidth))}o(I)&&(fe.vertexColor=!0),fe.objectOffset=this.objectOffset,fe.coords=ae,F.update(fe),F.visible=E.visible,F.enableDynamic=U,F.enableHighlight=U,F.snapToData=!0,"lighting"in E&&(F.ambientLight=E.lighting.ambient,F.diffuseLight=E.lighting.diffuse,F.specularLight=E.lighting.specular,F.roughness=E.lighting.roughness,F.fresnel=E.lighting.fresnel),"lightposition"in E&&(F.lightPosition=[E.lightposition.x,E.lightposition.y,E.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(E,S){var P=E.glplot.gl,F=x({gl:P}),I=new v(E,F,S.uid);return F._trace=I,I.update(S),E.glplot.add(F),I}B.exports=L},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(t,B,G){var x=t("../../registry"),f=t("../../lib"),M=t("../../components/colorscale/defaults"),T=t("./attributes"),e=.1;function a(s,o){for(var b=[],g=32,d=0;d<g;d++){var c=d/(g-1),m=o+(1-o)*(1-Math.pow(Math.sin(s*c*Math.PI),2));b.push([c,Math.max(0,Math.min(1,m))])}return b}function i(s){var o=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var b=0;b<s.length;b++){var g=s[b];if(g.length!==2||+g[0]<o)return!1;o=+g[0]}return!0}function n(s,o,b,g){var d,c;function m(E,S){return f.coerce(s,o,T,E,S)}var l=m("x"),y=m("y"),u=m("z");if(!u||!u.length||(l?l.length<1:!1)||(y?y.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(l)&&f.isArrayOrTypedArray(l[0])?u.length:u[0].length,o._ylength=u.length;var A=x.getComponentMethod("calendars","handleTraceDefaults");A(s,o,["x","y","z"],g),m("text"),m("hovertext"),m("hovertemplate"),m("xhoverformat"),m("yhoverformat"),m("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(E){m(E)});var _=m("surfacecolor"),p=["x","y","z"];for(d=0;d<3;++d){var w="contours."+p[d],h=m(w+".show"),L=m(w+".highlight");if(h||L)for(c=0;c<3;++c)m(w+".project."+p[c]);h&&(m(w+".color"),m(w+".width"),m(w+".usecolormap")),L&&(m(w+".highlightcolor"),m(w+".highlightwidth")),m(w+".start"),m(w+".end"),m(w+".size")}_||(v(s,"zmin","cmin"),v(s,"zmax","cmax"),v(s,"zauto","cauto")),M(s,o,g,m,{prefix:"",cLetter:"c"}),r(s,o,g,m),o._length=null}function r(s,o,b,g){var d=g("opacityscale");d==="max"?o.opacityscale=[[0,e],[1,1]]:d==="min"?o.opacityscale=[[0,1],[1,e]]:d==="extremes"?o.opacityscale=a(1,e):i(d)||(o.opacityscale=void 0)}function v(s,o,b){o in s&&!(b in s)&&(s[b]=s[o])}B.exports={supplyDefaults:n,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),moduleType:"trace",name:"surface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(t,B,G){var x=t("../../components/annotations/attributes"),f=t("../../lib/extend").extendFlat,M=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=B.exports=M({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:f({},x.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:f({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:f({},x.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:f({},T({arrayOk:!0}))}},"calc","from-root");i.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(t,B,G){var x=t("../../plots/get_data").getModuleCalcData,f=t("./plot"),M="table";G.name=M,G.plot=function(T){var e=x(T.calcdata,M)[0];e.length&&f(T,e)},G.clean=function(T,e,a,i){var n=i._has&&i._has(M),r=e._has&&e._has(M);n&&!r&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(t,B,G){var x=t("../../lib/gup").wrap;B.exports=function(){return x({})}},{"../../lib/gup":512}],1078:[function(t,B,G){B.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(t,B,G){var x=t("./constants"),f=t("../../lib/extend").extendFlat,M=t("fast-isnumeric");B.exports=function(b,g){var d=a(g.cells.values),c=function(Y){return Y.slice(g.header.values.length,Y.length)},m=a(g.header.values);m.length&&!m[0].length&&(m[0]=[""],m=a(m));var l=m.concat(c(d).map(function(){return i((m[0]||[""]).length)})),y=g.domain,u=Math.floor(b._fullLayout._size.w*(y.x[1]-y.x[0])),A=Math.floor(b._fullLayout._size.h*(y.y[1]-y.y[0])),_=g.header.values.length?l[0].map(function(){return g.header.height}):[x.emptyHeaderHeight],p=d.length?d[0].map(function(){return g.cells.height}):[],w=_.reduce(e,0),h=A-w,L=h+x.uplift,E=v(p,L),S=v(_,w),P=r(S,[]),F=r(E,P),I={},D=g._fullInput.columnorder.concat(c(d.map(function(Y,ee){return ee}))),R=l.map(function(Y,ee){var j=Array.isArray(g.columnwidth)?g.columnwidth[Math.min(ee,g.columnwidth.length-1)]:g.columnwidth;return M(j)?Number(j):1}),O=R.reduce(e,0);R=R.map(function(Y){return Y/O*u});var z=Math.max(T(g.header.line.width),T(g.cells.line.width)),H={key:g.uid+b._context.staticPlot,translateX:y.x[0]*b._fullLayout._size.w,translateY:b._fullLayout._size.h*(1-y.y[1]),size:b._fullLayout._size,width:u,maxLineWidth:z,height:A,columnOrder:D,groupHeight:A,rowBlocks:F,headerRowBlocks:P,scrollY:0,cells:f({},g.cells,{values:d}),headerCells:f({},g.header,{values:l}),gdColumns:l.map(function(Y){return Y[0]}),gdColumnsOriginalOrder:l.map(function(Y){return Y[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(Y,ee){var j=I[Y];I[Y]=(j||0)+1;var X=Y+"__"+I[Y];return{key:X,label:Y,specIndex:ee,xIndex:D[ee],xScale:n,x:void 0,calcdata:void 0,columnWidth:R[ee]}})};return H.columns.forEach(function(Y){Y.calcdata=H,Y.x=n(Y)}),H};function T(o){if(Array.isArray(o)){for(var b=0,g=0;g<o.length;g++)b=Math.max(b,T(o[g]));return b}return o}function e(o,b){return o+b}function a(o){var b=o.slice(),g=1/0,d=0,c;for(c=0;c<b.length;c++)Array.isArray(b[c])||(b[c]=[b[c]]),g=Math.min(g,b[c].length),d=Math.max(d,b[c].length);if(g!==d)for(c=0;c<b.length;c++){var m=d-b[c].length;m&&(b[c]=b[c].concat(i(m)))}return b}function i(o){for(var b=new Array(o),g=0;g<o;g++)b[g]="";return b}function n(o){return o.calcdata.columns.reduce(function(b,g){return g.xIndex<o.xIndex?b+g.columnWidth:b},0)}function r(o,b){var g=Object.keys(o);return g.map(function(d){return f({},o[d],{auxiliaryBlocks:b})})}function v(o,b){for(var g={},d,c=0,m=0,l=s(),y=0,u=0,A=0;A<o.length;A++)d=o[A],l.rows.push({rowIndex:A,rowHeight:d}),m+=d,(m>=b||A===o.length-1)&&(g[c]=l,l.key=u++,l.firstRowIndex=y,l.lastRowIndex=A,l=s(),c+=m,y=A+1,m=0);return g}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(t,B,G){var x=t("../../lib/extend").extendFlat;G.splitToPanels=function(M){var T=[0,0],e=x({},M,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:M.calcdata.headerCells.values[M.specIndex],rowBlocks:M.calcdata.headerRowBlocks,calcdata:x({},M.calcdata,{cells:M.calcdata.headerCells})}),a=x({},M,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),i=x({},M,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks});return[a,i,e]},G.splitToCells=function(M){var T=f(M);return(M.values||[]).slice(T[0],T[1]).map(function(e,a){var i=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+i,key:T[0]+a,column:M,calcdata:M.calcdata,page:M.page,rowBlocks:M.rowBlocks,value:e}})};function f(M){var T=M.rowBlocks[M.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":505}],1081:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../plots/domain").defaults;function T(e,a){for(var i=e.columnorder||[],n=e.header.values.length,r=i.slice(0,n),v=r.slice().sort(function(b,g){return b-g}),s=r.map(function(b){return v.indexOf(b)}),o=s.length;o<n;o++)s.push(o);a("columnorder",s)}B.exports=function(a,i,n,r){function v(s,o){return x.coerce(a,i,f,s,o)}M(i,r,v),v("columnwidth"),v("header.values"),v("header.format"),v("header.align"),v("header.prefix"),v("header.suffix"),v("header.height"),v("header.line.width"),v("header.line.color"),v("header.fill.color"),x.coerceFont(v,"header.font",x.extendFlat({},r.font)),T(i,v),v("cells.values"),v("cells.format"),v("cells.align"),v("cells.prefix"),v("cells.suffix"),v("cells.height"),v("cells.line.width"),v("cells.line.color"),v("cells.fill.color"),x.coerceFont(v,"cells.font",x.extendFlat({},r.font)),i._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"table",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(t,B,G){var x=t("./constants"),f=t("@plotly/d3"),M=t("../../lib"),T=M.numberFormat,e=t("../../lib/gup"),a=t("../../components/drawing"),i=t("../../lib/svg_text_utils"),n=t("../../lib").raiseToTop,r=t("../../lib").strTranslate,v=t("../../lib").cancelTransition,s=t("./data_preparation_helper"),o=t("./data_split_helpers"),b=t("../../components/color");B.exports=function(ie,oe){var ne=!ie._context.staticPlot,se=ie._fullLayout._paper.selectAll("."+x.cn.table).data(oe.map(function(ze){var Ie=e.unwrap(ze),Ge=Ie.trace;return s(ie,Ge)}),e.keyFun);se.exit().remove(),se.enter().append("g").classed(x.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),se.attr("width",function(ze){return ze.width+ze.size.l+ze.size.r}).attr("height",function(ze){return ze.height+ze.size.t+ze.size.b}).attr("transform",function(ze){return r(ze.translateX,ze.translateY)});var _e=se.selectAll("."+x.cn.tableControlView).data(e.repeat,e.keyFun),ue=_e.enter().append("g").classed(x.cn.tableControlView,!0).style("box-sizing","content-box");if(ne){var ge="onwheel"in document?"wheel":"mousewheel";ue.on("mousemove",function(ze){_e.filter(function(Ie){return ze===Ie}).call(l,ie)}).on(ge,function(ze){if(!ze.scrollbarState.wheeling){ze.scrollbarState.wheeling=!0;var Ie=ze.scrollY+f.event.deltaY,Ge=j(ie,_e,null,Ie)(ze);Ge||(f.event.stopPropagation(),f.event.preventDefault()),ze.scrollbarState.wheeling=!1}}).call(l,ie,!0)}_e.attr("transform",function(ze){return r(ze.size.l,ze.size.t)});var xe=_e.selectAll("."+x.cn.scrollBackground).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(x.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(ze){return ze.width}).attr("height",function(ze){return ze.height}),_e.each(function(ze){a.setClipUrl(f.select(this),d(ie,ze),ie)});var ye=_e.selectAll("."+x.cn.yColumn).data(function(ze){return ze.columns},e.keyFun);ye.enter().append("g").classed(x.cn.yColumn,!0),ye.exit().remove(),ye.attr("transform",function(ze){return r(ze.x,0)}),ne&&ye.call(f.behavior.drag().origin(function(ze){var Ie=f.select(this);return R(Ie,ze,-x.uplift),n(this),ze.calcdata.columnDragInProgress=!0,l(_e.filter(function(Ge){return ze.calcdata.key===Ge.key}),ie),ze}).on("drag",function(ze){var Ie=f.select(this),Ge=function(Qt){return(ze===Qt?f.event.x:Qt.x)+Qt.columnWidth/2};ze.x=Math.max(-x.overdrag,Math.min(ze.calcdata.width+x.overdrag-ze.columnWidth,f.event.x));var dt=m(ye).filter(function(Qt){return Qt.calcdata.key===ze.calcdata.key}),Rt=dt.sort(function(Qt,Bt){return Ge(Qt)-Ge(Bt)});Rt.forEach(function(Qt,Bt){Qt.xIndex=Bt,Qt.x=ze===Qt?Qt.x:Qt.xScale(Qt)}),ye.filter(function(Qt){return ze!==Qt}).transition().ease(x.transitionEase).duration(x.transitionDuration).attr("transform",function(Qt){return r(Qt.x,0)}),Ie.call(v).attr("transform",r(ze.x,-x.uplift))}).on("dragend",function(ze){var Ie=f.select(this),Ge=ze.calcdata;ze.x=ze.xScale(ze),ze.calcdata.columnDragInProgress=!1,R(Ie,ze,0),I(ie,Ge,Ge.columns.map(function(dt){return dt.xIndex}))})),ye.each(function(ze){a.setClipUrl(f.select(this),c(ie,ze),ie)});var be=ye.selectAll("."+x.cn.columnBlock).data(o.splitToPanels,e.keyFun);be.enter().append("g").classed(x.cn.columnBlock,!0).attr("id",function(ze){return ze.key}),be.style("cursor",function(ze){return ze.dragHandle?"ew-resize":ze.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Se=be.filter(z),Re=be.filter(O);ne&&Re.call(f.behavior.drag().origin(function(ze){return f.event.stopPropagation(),ze}).on("drag",j(ie,_e,-1)).on("dragend",function(){})),y(ie,_e,Se,be),y(ie,_e,Re,be);var Ve=_e.selectAll("."+x.cn.scrollAreaClip).data(e.repeat,e.keyFun);Ve.enter().append("clipPath").classed(x.cn.scrollAreaClip,!0).attr("id",function(ze){return d(ie,ze)});var Ae=Ve.selectAll("."+x.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);Ae.enter().append("rect").classed(x.cn.scrollAreaClipRect,!0).attr("x",-x.overdrag).attr("y",-x.uplift).attr("fill","none"),Ae.attr("width",function(ze){return ze.width+2*x.overdrag}).attr("height",function(ze){return ze.height+x.uplift});var Ce=ye.selectAll("."+x.cn.columnBoundary).data(e.repeat,e.keyFun);Ce.enter().append("g").classed(x.cn.columnBoundary,!0);var Ze=ye.selectAll("."+x.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ze.enter().append("clipPath").classed(x.cn.columnBoundaryClippath,!0),Ze.attr("id",function(ze){return c(ie,ze)});var Ye=Ze.selectAll("."+x.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Ye.enter().append("rect").classed(x.cn.columnBoundaryRect,!0).attr("fill","none"),Ye.attr("width",function(ze){return ze.columnWidth+2*g(ze)}).attr("height",function(ze){return ze.calcdata.height+2*g(ze)+x.uplift}).attr("x",function(ze){return-g(ze)}).attr("y",function(ze){return-g(ze)}),ee(null,Re,_e)};function g(Q){return Math.ceil(Q.calcdata.maxLineWidth/2)}function d(Q,ie){return"clip"+Q._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function c(Q,ie){return"clip"+Q._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function m(Q){return[].concat.apply([],Q.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function l(Q,ie,oe){function ne(ye){var be=ye.rowBlocks;return U(be,be.length-1)+(be.length?V(be[be.length-1],1/0):1)}var se=Q.selectAll("."+x.cn.scrollbarKit).data(e.repeat,e.keyFun);se.enter().append("g").classed(x.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),se.each(function(ye){var be=ye.scrollbarState;be.totalHeight=ne(ye),be.scrollableAreaHeight=ye.groupHeight-H(ye),be.currentlyVisibleHeight=Math.min(be.totalHeight,be.scrollableAreaHeight),be.ratio=be.currentlyVisibleHeight/be.totalHeight,be.barLength=Math.max(be.ratio*be.currentlyVisibleHeight,x.goldenRatio*x.scrollbarWidth),be.barWiggleRoom=be.currentlyVisibleHeight-be.barLength,be.wiggleRoom=Math.max(0,be.totalHeight-be.scrollableAreaHeight),be.topY=be.barWiggleRoom===0?0:ye.scrollY/be.wiggleRoom*be.barWiggleRoom,be.bottomY=be.topY+be.barLength,be.dragMultiplier=be.wiggleRoom/be.barWiggleRoom}).attr("transform",function(ye){var be=ye.width+x.scrollbarWidth/2+x.scrollbarOffset;return r(be,H(ye))});var _e=se.selectAll("."+x.cn.scrollbar).data(e.repeat,e.keyFun);_e.enter().append("g").classed(x.cn.scrollbar,!0);var ue=_e.selectAll("."+x.cn.scrollbarSlider).data(e.repeat,e.keyFun);ue.enter().append("g").classed(x.cn.scrollbarSlider,!0),ue.attr("transform",function(ye){return r(0,ye.scrollbarState.topY||0)});var ge=ue.selectAll("."+x.cn.scrollbarGlyph).data(e.repeat,e.keyFun);ge.enter().append("line").classed(x.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",x.scrollbarWidth).attr("stroke-linecap","round").attr("y1",x.scrollbarWidth/2),ge.attr("y2",function(ye){return ye.scrollbarState.barLength-x.scrollbarWidth/2}).attr("stroke-opacity",function(ye){return ye.columnDragInProgress||!ye.scrollbarState.barWiggleRoom||oe?0:.4}),ge.transition().delay(0).duration(0),ge.transition().delay(x.scrollbarHideDelay).duration(x.scrollbarHideDuration).attr("stroke-opacity",0);var xe=_e.selectAll("."+x.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);xe.enter().append("line").classed(x.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",x.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ye){var be=f.event.y,Se=this.getBoundingClientRect(),Re=ye.scrollbarState,Ve=be-Se.top,Ae=f.scale.linear().domain([0,Re.scrollableAreaHeight]).range([0,Re.totalHeight]).clamp(!0);Re.topY<=Ve&&Ve<=Re.bottomY||j(ie,Q,null,Ae(Ve-Re.barLength/2))(ye)}).call(f.behavior.drag().origin(function(ye){return f.event.stopPropagation(),ye.scrollbarState.scrollbarScrollInProgress=!0,ye}).on("drag",j(ie,Q)).on("dragend",function(){})),xe.attr("y2",function(ye){return ye.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(ge.remove(),xe.remove())}function y(Q,ie,oe,ne){var se=u(oe),_e=A(se);h(_e);var ue=_(_e);E(ue);var ge=w(_e),xe=p(ge);L(xe),S(xe,ie,ne,Q),J(_e)}function u(Q){var ie=Q.selectAll("."+x.cn.columnCells).data(e.repeat,e.keyFun);return ie.enter().append("g").classed(x.cn.columnCells,!0),ie.exit().remove(),ie}function A(Q){var ie=Q.selectAll("."+x.cn.columnCell).data(o.splitToCells,function(oe){return oe.keyWithinBlock});return ie.enter().append("g").classed(x.cn.columnCell,!0),ie.exit().remove(),ie}function _(Q){var ie=Q.selectAll("."+x.cn.cellRect).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("rect").classed(x.cn.cellRect,!0),ie}function p(Q){var ie=Q.selectAll("."+x.cn.cellText).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("text").classed(x.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){f.event.stopPropagation()}),ie}function w(Q){var ie=Q.selectAll("."+x.cn.cellTextHolder).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("g").classed(x.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}function h(Q){Q.each(function(ie,oe){var ne=ie.calcdata.cells.font,se=ie.column.specIndex,_e={size:D(ne.size,se,oe),color:D(ne.color,se,oe),family:D(ne.family,se,oe)};ie.rowNumber=ie.key,ie.align=D(ie.calcdata.cells.align,se,oe),ie.cellBorderWidth=D(ie.calcdata.cells.line.width,se,oe),ie.font=_e})}function L(Q){Q.each(function(ie){a.font(f.select(this),ie.font)})}function E(Q){Q.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var oe=f.select(this);b.stroke(oe,D(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),b.fill(oe,D(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}function S(Q,ie,oe,ne){Q.text(function(se){var _e=se.column.specIndex,ue=se.rowNumber,ge=se.value,xe=typeof ge=="string",ye=xe&&ge.match(/<br>/i),be=!xe||ye;se.mayHaveMarkup=xe&&ge.match(/[<&>]/);var Se=P(ge);se.latex=Se;var Re=Se?"":D(se.calcdata.cells.prefix,_e,ue)||"",Ve=Se?"":D(se.calcdata.cells.suffix,_e,ue)||"",Ae=Se?null:D(se.calcdata.cells.format,_e,ue)||null,Ce=Re+(Ae?T(Ae)(se.value):se.value)+Ve,Ze;se.wrappingNeeded=!se.wrapped&&!be&&!Se&&(Ze=F(Ce)),se.cellHeightMayIncrease=ye||Se||se.mayHaveMarkup||(Ze===void 0?F(Ce):Ze),se.needsConvertToTspans=se.mayHaveMarkup||se.wrappingNeeded||se.latex;var Ye;if(se.wrappingNeeded){var ze=x.wrapSplitCharacter===" "?Ce.replace(/<a href=/ig,"<a_href="):Ce,Ie=ze.split(x.wrapSplitCharacter),Ge=x.wrapSplitCharacter===" "?Ie.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Ie;se.fragments=Ge.map(function(dt){return{text:dt,width:null}}),se.fragments.push({fragment:x.wrapSpacer,width:null}),Ye=Ge.join(x.lineBreaker)+x.lineBreaker+x.wrapSpacer}else delete se.fragments,Ye=Ce;return Ye}).attr("dy",function(se){return se.needsConvertToTspans?0:"0.75em"}).each(function(se){var _e=this,ue=f.select(_e),ge=se.wrappingNeeded?ae:fe;se.needsConvertToTspans?i.convertToTspans(ue,ne,ge(oe,_e,ie,ne,se)):f.select(_e.parentNode).attr("transform",function(xe){return r(K(xe),x.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function P(Q){return typeof Q=="string"&&Q.match(x.latexCheck)}function F(Q){return Q.indexOf(x.wrapSplitCharacter)!==-1}function I(Q,ie,oe){var ne=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(se,_e){return oe[ne.indexOf(se)]-oe[ne.indexOf(_e)]}),ie.columnorder=oe,Q.emit("plotly_restyle")}function D(Q,ie,oe){if(Array.isArray(Q)){var ne=Q[Math.min(ie,Q.length-1)];return Array.isArray(ne)?ne[Math.min(oe,ne.length-1)]:ne}else return Q}function R(Q,ie,oe){Q.transition().ease(x.releaseTransitionEase).duration(x.releaseTransitionDuration).attr("transform",r(ie.x,oe))}function O(Q){return Q.type==="cells"}function z(Q){return Q.type==="header"}function H(Q){var ie=Q.rowBlocks.length?Q.rowBlocks[0].auxiliaryBlocks:[];return ie.reduce(function(oe,ne){return oe+V(ne,1/0)},0)}function Y(Q,ie,oe){for(var ne=[],se=0,_e=0;_e<Q.length;_e++){for(var ue=Q[_e],ge=ue.rows,xe=0,ye=0;ye<ge.length;ye++)xe+=ge[ye].rowHeight;ue.allRowsHeight=xe;var be=se+xe,Se=ie,Re=Se+oe;Se<be&&Re>se&&ne.push(_e),se+=xe}return ne}function ee(Q,ie,oe){var ne=m(ie)[0];if(ne!==void 0){var se=ne.rowBlocks,_e=ne.calcdata,ue=U(se,se.length),ge=ne.calcdata.groupHeight-H(ne),xe=_e.scrollY=Math.max(0,Math.min(ue-ge,_e.scrollY)),ye=Y(se,xe,ge);ye.length===1&&(ye[0]===se.length-1?ye.unshift(ye[0]-1):ye.push(ye[0]+1)),ye[0]%2&&ye.reverse(),ie.each(function(be,Se){be.page=ye[Se],be.scrollY=xe}),ie.attr("transform",function(be){var Se=U(be.rowBlocks,be.page)-be.scrollY;return r(0,Se)}),Q&&(X(Q,oe,ie,ye,ne.prevPages,ne,0),X(Q,oe,ie,ye,ne.prevPages,ne,1),l(oe,Q))}}function j(Q,ie,oe,ne){return function(_e){var ue=_e.calcdata?_e.calcdata:_e,ge=ie.filter(function(Se){return ue.key===Se.key}),xe=oe||ue.scrollbarState.dragMultiplier,ye=ue.scrollY;ue.scrollY=ne===void 0?ue.scrollY+xe*f.event.dy:ne;var be=ge.selectAll("."+x.cn.yColumn).selectAll("."+x.cn.columnBlock).filter(O);return ee(Q,be,ge),ue.scrollY===ye}}function X(Q,ie,oe,ne,se,_e,ue){var ge=ne[ue]!==se[ue];ge&&(clearTimeout(_e.currentRepaint[ue]),_e.currentRepaint[ue]=setTimeout(function(){var xe=oe.filter(function(ye,be){return be===ue&&ne[be]!==se[be]});y(Q,ie,xe,oe),se[ue]=ne[ue]}))}function ae(Q,ie,oe,ne){return function(){var _e=f.select(ie.parentNode);_e.each(function(ue){var ge=ue.fragments;_e.selectAll("tspan.line").each(function(Ce,Ze){ge[Ze].width=this.getComputedTextLength()});var xe=ge[ge.length-1].width,ye=ge.slice(0,-1),be=[],Se,Re,Ve=0,Ae=ue.column.columnWidth-2*x.cellPad;for(ue.value="";ye.length;)Se=ye.shift(),Re=Se.width+xe,Ve+Re>Ae&&(ue.value+=be.join(x.wrapSpacer)+x.lineBreaker,be=[],Ve=0),be.push(Se.text),Ve+=Re;Ve&&(ue.value+=be.join(x.wrapSpacer)),ue.wrapped=!0}),_e.selectAll("tspan.line").remove(),S(_e.select("."+x.cn.cellText),oe,Q,ne),f.select(ie.parentNode.parentNode).call(J)}}function fe(Q,ie,oe,ne,se){return function(){if(!se.settledY){var ue=f.select(ie.parentNode),ge=re(se),xe=se.key-ge.firstRowIndex,ye=ge.rows[xe].rowHeight,be=se.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*x.cellPad:ye,Se=Math.max(be,ye),Re=Se-ge.rows[xe].rowHeight;Re&&(ge.rows[xe].rowHeight=Se,Q.selectAll("."+x.cn.columnCell).call(J),ee(null,Q.filter(O),0),l(oe,ne,!0)),ue.attr("transform",function(){var Ve=this,Ae=Ve.parentNode,Ce=Ae.getBoundingClientRect(),Ze=f.select(Ve.parentNode).select("."+x.cn.cellRect).node().getBoundingClientRect(),Ye=Ve.transform.baseVal.consolidate(),ze=Ze.top-Ce.top+(Ye?Ye.matrix.f:x.cellPad);return r(K(se,f.select(Ve.parentNode).select("."+x.cn.cellTextHolder).node().getBoundingClientRect().width),ze)}),se.settledY=!0}}}function K(Q,ie){switch(Q.align){case"left":return x.cellPad;case"right":return Q.column.columnWidth-(ie||0)-x.cellPad;case"center":return(Q.column.columnWidth-(ie||0))/2;default:return x.cellPad}}function J(Q){Q.attr("transform",function(ie){var oe=ie.rowBlocks[0].auxiliaryBlocks.reduce(function(ue,ge){return ue+V(ge,1/0)},0),ne=re(ie),se=V(ne,ie.key),_e=se+oe;return r(0,_e)}).selectAll("."+x.cn.cellRect).attr("height",function(ie){return Z(re(ie),ie.key).rowHeight})}function U(Q,ie){for(var oe=0,ne=ie-1;ne>=0;ne--)oe+=q(Q[ne]);return oe}function V(Q,ie){for(var oe=0,ne=0;ne<Q.rows.length&&Q.rows[ne].rowIndex<ie;ne++)oe+=Q.rows[ne].rowHeight;return oe}function q(Q){var ie=Q.allRowsHeight;if(ie!==void 0)return ie;for(var oe=0,ne=0;ne<Q.rows.length;ne++)oe+=Q.rows[ne].rowHeight;return Q.allRowsHeight=oe,oe}function re(Q){return Q.rowBlocks[Q.page]}function Z(Q,ie){return Q.rows[ie-Q.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(t,B,G){var x=t("../../plots/template_attributes").hovertemplateAttrs,f=t("../../plots/template_attributes").texttemplateAttrs,M=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:f({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:x({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(t,B,G){var x=t("../../plots/plots");G.name="treemap",G.plot=function(f,M,T,e){x.plotBasePlot(G.name,f,M,T,e)},G.clean=function(f,M,T,e){x.cleanBasePlot(G.name,f,M,T,e)}},{"../../plots/plots":628}],1086:[function(t,B,G){var x=t("../sunburst/calc");G.calc=function(f,M){return x.calc(f,M)},G.crossTraceCalc=function(f){return x._runCrossTraceCalc("treemap",f)}},{"../sunburst/calc":1060}],1087:[function(t,B,G){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;B.exports=function(s,o,b,g){function d(S,P){return x.coerce(s,o,f,S,P)}var c=d("labels"),m=d("parents");if(!c||!c.length||!m||!m.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth");var y=d("tiling.packing");y==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var u=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(u)?"text+label":"label"),d("hovertext"),d("hovertemplate");var A=d("pathbar.visible"),_="auto";e(s,o,g,d,_,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var p=o.textposition.indexOf("bottom")!==-1,w=d("marker.line.width");w&&d("marker.line.color",g.paper_bgcolor);var h=d("marker.colors"),L=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;L?r(s,o,g,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(h||[]).length);var E=o.textfont.size*2;d("marker.pad.t",p?E/4:E),d("marker.pad.l",E/4),d("marker.pad.r",E/4),d("marker.pad.b",p?E:E/4),o._hovered={marker:{line:{width:2,color:M.contrast(g.paper_bgcolor)}}},A&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(t,B,G){var x=t("@plotly/d3"),f=t("../sunburst/helpers"),M=t("../bar/uniform_text"),T=M.clearMinTextSize,e=t("../bar/style").resizeText,a=t("./plot_one");B.exports=function(n,r,v,s,o){var b=o.type,g=o.drawDescendants,d=n._fullLayout,c=d["_"+b+"layer"],m,l,y=!v;if(T(b,d),m=c.selectAll("g.trace."+b).data(r,function(A){return A[0].trace.uid}),m.enter().append("g").classed("trace",!0).classed(b,!0),m.order(),!d.uniformtext.mode&&f.hasTransition(v)){s&&(l=s());var u=x.transition().duration(v.duration).ease(v.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});u.each(function(){c.selectAll("g.trace").each(function(A){a(n,A,this,v,g)})})}else m.each(function(A){a(n,A,this,v,g)}),d.uniformtext.mode&&e(n,c.selectAll(".trace"),b);y&&m.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=!0;B.exports=function(o,b,g,d,c){var m=c.barDifY,l=c.width,y=c.height,u=c.viewX,A=c.viewY,_=c.pathSlice,p=c.toMoveInsideSlice,w=c.strTransform,h=c.hasTransition,L=c.handleSlicesExit,E=c.makeUpdateSliceInterpolator,S=c.makeUpdateTextInterpolator,P={},F=o._context.staticPlot,I=o._fullLayout,D=b[0],R=D.trace,O=D.hierarchy,z=l/R._entryDepth,H=n.listPath(g.data,"id"),Y=e(O.copy(),[l,y],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();Y=Y.filter(function(j){var X=H.indexOf(j.data.id);return X===-1?!1:(j.x0=z*X,j.x1=z*(X+1),j.y0=m,j.y1=m+y,j.onPathbar=!0,!0)}),Y.reverse(),d=d.data(Y,n.getPtId),d.enter().append("g").classed("pathbar",!0),L(d,v,P,[l,y],_),d.order();var ee=d;h&&(ee=ee.transition().each("end",function(){var j=x.select(this);n.setSliceCursor(j,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(j){j._x0=u(j.x0),j._x1=u(j.x1),j._y0=A(j.y0),j._y1=A(j.y1),j._hoverX=u(j.x1-Math.min(l,y)/2),j._hoverY=A(j.y1-y/2);var X=x.select(this),ae=f.ensureSingle(X,"path","surface",function(U){U.style("pointer-events",F?"none":"all")});h?ae.transition().attrTween("d",function(U){var V=E(U,v,P,[l,y]);return function(q){return _(V(q))}}):ae.attr("d",_),X.call(r,g,o,b,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),ae.call(a,j,R,{hovered:!1}),j._text=(n.getPtLabel(j)||"").split("<br>").join(" ")||"";var fe=f.ensureSingle(X,"g","slicetext"),K=f.ensureSingle(fe,"text","",function(U){U.attr("data-notex",1)}),J=f.ensureUniformFontSize(o,n.determineTextFont(R,j,I.font,{onPathbar:!0}));K.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(M.font,J).call(T.convertToTspans,o),j.textBB=M.bBox(K.node()),j.transform=p(j,{fontSize:J.size,onPathbar:!0}),j.transform.fontSize=J.size,h?K.transition().attrTween("transform",function(U){var V=S(U,v,P,[l,y]);return function(q){return w(V(q))}}):K.attr("transform",w(j))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(b,g,d,c,m){var l=m.width,y=m.height,u=m.viewX,A=m.viewY,_=m.pathSlice,p=m.toMoveInsideSlice,w=m.strTransform,h=m.hasTransition,L=m.handleSlicesExit,E=m.makeUpdateSliceInterpolator,S=m.makeUpdateTextInterpolator,P=m.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,H=O.textposition.indexOf("right")!==-1,Y=O.textposition.indexOf("bottom")!==-1,ee=!Y&&!O.marker.pad.t||Y&&!O.marker.pad.b,j=e(d,[l,y],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}),X=j.descendants(),ae=1/0,fe=-1/0;X.forEach(function(q){var re=q.depth;re>=O._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(ae=Math.min(ae,re),fe=Math.max(fe,re))}),c=c.data(X,n.getPtId),O._maxVisibleLayers=isFinite(fe)?fe-ae+1:0,c.enter().append("g").classed("slice",!0),L(c,s,F,[l,y],_),c.order();var K=null;if(h&&P){var J=n.getPtId(P);c.each(function(q){K===null&&n.getPtId(q)===J&&(K={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var U=function(){return K||{x0:0,x1:l,y0:0,y1:y}},V=c;return h&&(V=V.transition().each("end",function(){var q=x.select(this);n.setSliceCursor(q,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(q){var re=n.isHeader(q,O);q._x0=u(q.x0),q._x1=u(q.x1),q._y0=A(q.y0),q._y1=A(q.y1),q._hoverX=u(q.x1-O.marker.pad.r),q._hoverY=A(Y?q.y1-O.marker.pad.b/2:q.y0+O.marker.pad.t/2);var Z=x.select(this),Q=f.ensureSingle(Z,"path","surface",function(se){se.style("pointer-events",I?"none":"all")});h?Q.transition().attrTween("d",function(se){var _e=E(se,s,U(),[l,y]);return function(ue){return _(_e(ue))}}):Q.attr("d",_),Z.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),Q.call(a,q,O,{hovered:!1}),q.x0===q.x1||q.y0===q.y1?q._text="":re?q._text=ee?"":n.getPtLabel(q)||"":q._text=v(q,d,O,g,D)||"";var ie=f.ensureSingle(Z,"g","slicetext"),oe=f.ensureSingle(ie,"text","",function(se){se.attr("data-notex",1)}),ne=f.ensureUniformFontSize(b,n.determineTextFont(O,q,D.font));oe.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",H?"end":z||re?"start":"middle").call(M.font,ne).call(T.convertToTspans,b),q.textBB=M.bBox(oe.node()),q.transform=p(q,{fontSize:ne.size,isHeader:re}),q.transform.fontSize=ne.size,h?oe.transition().attrTween("transform",function(se){var _e=S(se,s,U(),[l,y]);return function(ue){return w(_e(ue))}}):oe.attr("transform",w(q))}),K}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(t,B,G){B.exports=function x(f,M,T){var e;T.swapXY&&(e=f.x0,f.x0=f.y0,f.y0=e,e=f.x1,f.x1=f.y1,f.y1=e),T.flipX&&(e=f.x0,f.x0=M[0]-f.x1,f.x1=M[0]-e),T.flipY&&(e=f.y0,f.y0=M[1]-f.y1,f.y1=M[1]-e);var a=f.children;if(a)for(var i=0;i<a.length;i++)x(a[i],M,T)}},{}],1093:[function(t,B,G){B.exports={moduleType:"trace",name:"treemap",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(t,B,G){B.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return x.coerce(T,e,f,i,n)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(t,B,G){var x=t("d3-hierarchy"),f=t("./flip_tree");B.exports=function(e,a,i){var n=i.flipX,r=i.flipY,v=i.packing==="dice-slice",s=i.pad[r?"bottom":"top"],o=i.pad[n?"right":"left"],b=i.pad[n?"left":"right"],g=i.pad[r?"top":"bottom"],d;v&&(d=o,o=s,s=d,d=b,b=g,g=d);var c=x.treemap().tile(M(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(o).paddingRight(b).paddingTop(s).paddingBottom(g).size(v?[a[1],a[0]]:a)(e);return(v||n||r)&&f(c,a,{swapXY:v,flipX:n,flipY:r}),c};function M(T,e){switch(T){case"squarify":return x.treemapSquarify.ratio(e);case"binary":return x.treemapBinary;case"dice":return x.treemapDice;case"slice":return x.treemapSlice;default:return x.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(t,B,G){var x=t("./draw"),f=t("./draw_descendants");B.exports=function(T,e,a,i){return x(T,e,a,i,{type:"treemap",drawDescendants:f})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(t,B,G){var x=t("@plotly/d3"),f=t("d3-interpolate").interpolate,M=t("../sunburst/helpers"),T=t("../../lib"),e=t("../bar/constants").TEXTPAD,a=t("../bar/plot"),i=a.toMoveInsideBar,n=t("../bar/uniform_text"),r=n.recordMinTextSize,v=t("./constants"),s=t("./draw_ancestors");function o(b){return M.isHierarchyRoot(b)?"":M.getPtId(b)}B.exports=function(g,d,c,m,l){var y=g._fullLayout,u=d[0],A=u.trace,_=A.type,p=_==="icicle",w=u.hierarchy,h=M.findEntryWithLevel(w,A.level),L=x.select(c),E=L.selectAll("g.pathbar"),S=L.selectAll("g.slice");if(!h){E.remove(),S.remove();return}var P=M.isHierarchyRoot(h),F=!y.uniformtext.mode&&M.hasTransition(m),I=M.getMaxDepth(A),D=function(Ge){return Ge.data.depth-h.data.depth<I},R=y._size,O=A.domain,z=R.w*(O.x[1]-O.x[0]),H=R.h*(O.y[1]-O.y[0]),Y=z,ee=A.pathbar.thickness,j=A.marker.line.width+v.gapWithPathbar,X=A.pathbar.visible?A.pathbar.side.indexOf("bottom")>-1?H+j:-(ee+j):0,ae={x0:Y,x1:Y,y0:X,y1:X+ee},fe=function(Ge,dt,Rt){var Qt=A.tiling.pad,Bt=function(St){return St-Qt<=dt.x0},Ct=function(St){return St+Qt>=dt.x1},Kt=function(St){return St-Qt<=dt.y0},Ot=function(St){return St+Qt>=dt.y1};return Ge.x0===dt.x0&&Ge.x1===dt.x1&&Ge.y0===dt.y0&&Ge.y1===dt.y1?{x0:Ge.x0,x1:Ge.x1,y0:Ge.y0,y1:Ge.y1}:{x0:Bt(Ge.x0-Qt)?0:Ct(Ge.x0-Qt)?Rt[0]:Ge.x0,x1:Bt(Ge.x1+Qt)?0:Ct(Ge.x1+Qt)?Rt[0]:Ge.x1,y0:Kt(Ge.y0-Qt)?0:Ot(Ge.y0-Qt)?Rt[1]:Ge.y0,y1:Kt(Ge.y1+Qt)?0:Ot(Ge.y1+Qt)?Rt[1]:Ge.y1}},K=null,J={},U={},V=null,q=function(Ge,dt){return dt?J[o(Ge)]:U[o(Ge)]},re=function(Ge,dt,Rt,Qt){if(dt)return J[o(w)]||ae;var Bt=U[A.level]||Rt;return D(Ge)?fe(Ge,Bt,Qt):{}};u.hasMultipleRoots&&P&&I++,A._maxDepth=I,A._backgroundColor=y.paper_bgcolor,A._entryDepth=h.data.depth,A._atRootLevel=P;var Z=-z/2+R.l+R.w*(O.x[1]+O.x[0])/2,Q=-H/2+R.t+R.h*(1-(O.y[1]+O.y[0])/2),ie=function(Ge){return Z+Ge},oe=function(Ge){return Q+Ge},ne=oe(0),se=ie(0),_e=function(Ge){return se+Ge},ue=function(Ge){return ne+Ge};function ge(Ge,dt){return Ge+","+dt}var xe=_e(0),ye=function(Ge){Ge.x=Math.max(xe,Ge.x)},be=A.pathbar.edgeshape,Se=function(Ge){var dt=_e(Math.max(Math.min(Ge.x0,Ge.x0),0)),Rt=_e(Math.min(Math.max(Ge.x1,Ge.x1),Y)),Qt=ue(Ge.y0),Bt=ue(Ge.y1),Ct=ee/2,Kt={},Ot={};Kt.x=dt,Ot.x=Rt,Kt.y=Ot.y=(Qt+Bt)/2;var St={x:dt,y:Qt},Xe={x:Rt,y:Qt},at={x:Rt,y:Bt},We={x:dt,y:Bt};return be===">"?(St.x-=Ct,Xe.x-=Ct,at.x-=Ct,We.x-=Ct):be==="/"?(at.x-=Ct,We.x-=Ct,Kt.x-=Ct/2,Ot.x-=Ct/2):be==="\\"?(St.x-=Ct,Xe.x-=Ct,Kt.x-=Ct/2,Ot.x-=Ct/2):be==="<"&&(Kt.x-=Ct,Ot.x-=Ct),ye(St),ye(We),ye(Kt),ye(Xe),ye(at),ye(Ot),"M"+ge(St.x,St.y)+"L"+ge(Xe.x,Xe.y)+"L"+ge(Ot.x,Ot.y)+"L"+ge(at.x,at.y)+"L"+ge(We.x,We.y)+"L"+ge(Kt.x,Kt.y)+"Z"},Re=function(Ge){var dt=ie(Ge.x0),Rt=ie(Ge.x1),Qt=oe(Ge.y0),Bt=oe(Ge.y1),Ct=Rt-dt,Kt=Bt-Qt;if(!Ct||!Kt)return"";var Ot=0,St=Ct>2*Ot&&Kt>2*Ot?Ot:0,Xe=function(at,We){return St?"a"+ge(St,St)+" 0 0 1 "+ge(at,We):""};return"M"+ge(dt,Qt+St)+Xe(St,-St)+"L"+ge(Rt-St,Qt)+Xe(St,St)+"L"+ge(Rt,Bt-St)+Xe(-St,St)+"L"+ge(dt+St,Bt)+Xe(-St,-St)+"Z"},Ve=function(Ge,dt){var Rt=Ge.x0,Qt=Ge.x1,Bt=Ge.y0,Ct=Ge.y1,Kt=Ge.textBB,Ot=function(Mt){return A.textposition.indexOf(Mt)!==-1},St=Ot("bottom"),Xe=Ot("top")||dt.isHeader&&!St,at=Xe?"start":St?"end":"middle",We=Ot("right"),Ee=Ot("left")||dt.onPathbar,He=Ee?-1:We?1:0,Ke=A[p?"tiling":"marker"].pad;if(dt.isHeader){if(Rt+=(p?Ke:Ke.l)-e,Qt-=(p?Ke:Ke.r)-e,Rt>=Qt){var et=(Rt+Qt)/2;Rt=et,Qt=et}var At;St?(At=Ct-(p?Ke:Ke.b),Bt<At&&At<Ct&&(Bt=At)):(At=Bt+(p?Ke:Ke.t),Bt<At&&At<Ct&&(Ct=At))}var mt=i(Rt,Qt,Bt,Ct,Kt,{isHorizontal:!1,constrained:!0,angle:0,anchor:at,leftToRight:He});return mt.fontSize=dt.fontSize,mt.targetX=ie(mt.targetX),mt.targetY=oe(mt.targetY),isNaN(mt.targetX)||isNaN(mt.targetY)?{}:(Rt!==Qt&&Bt!==Ct&&r(A.type,mt,y),{scale:mt.scale,rotate:mt.rotate,textX:mt.textX,textY:mt.textY,anchorX:mt.anchorX,anchorY:mt.anchorY,targetX:mt.targetX,targetY:mt.targetY})},Ae=function(Ge,dt){for(var Rt,Qt=0,Bt=Ge;!Rt&&Qt<I;)Qt++,Bt=Bt.parent,Bt?Rt=q(Bt,dt):Qt=I;return Rt||{}},Ce=function(Ge,dt,Rt,Qt){var Bt=q(Ge,dt),Ct;if(dt)Ct=ae;else{var Kt=q(h,dt);Kt?Ct=fe(Ge,Kt,Qt):Ct={}}return f(Bt,Ct)},Ze=function(Ge,dt,Rt,Qt,Bt){var Ct=q(Ge,dt),Kt;if(Ct)Kt=Ct;else if(dt)Kt=ae;else if(K)if(Ge.parent){var Ot=V||Rt;Ot&&!dt?Kt=fe(Ge,Ot,Qt):(Kt={},T.extendFlat(Kt,Ae(Ge,dt)))}else Kt=T.extendFlat({},Ge),p&&(Bt.orientation==="h"?Bt.flipX?Kt.x0=Ge.x1:Kt.x1=0:Bt.flipY?Kt.y0=Ge.y1:Kt.y1=0);else Kt={};return f(Kt,{x0:Ge.x0,x1:Ge.x1,y0:Ge.y0,y1:Ge.y1})},Ye=function(Ge,dt,Rt,Qt){var Bt=q(Ge,dt),Ct={},Kt=re(Ge,dt,Rt,Qt);T.extendFlat(Ct,{transform:Ve({x0:Kt.x0,x1:Kt.x1,y0:Kt.y0,y1:Kt.y1,textBB:Ge.textBB,_text:Ge._text},{isHeader:M.isHeader(Ge,A)})}),Bt?Ct=Bt:Ge.parent&&T.extendFlat(Ct,Ae(Ge,dt));var Ot=Ge.transform;return Ge.x0!==Ge.x1&&Ge.y0!==Ge.y1&&r(A.type,Ot,y),f(Ct,{transform:{scale:Ot.scale,rotate:Ot.rotate,textX:Ot.textX,textY:Ot.textY,anchorX:Ot.anchorX,anchorY:Ot.anchorY,targetX:Ot.targetX,targetY:Ot.targetY}})},ze=function(Ge,dt,Rt,Qt,Bt){var Ct=Qt[0],Kt=Qt[1];F?Ge.exit().transition().each(function(){var Ot=x.select(this),St=Ot.select("path.surface");St.transition().attrTween("d",function(at){var We=Ce(at,dt,Rt,[Ct,Kt]);return function(Ee){return Bt(We(Ee))}});var Xe=Ot.select("g.slicetext");Xe.attr("opacity",0)}).remove():Ge.exit().remove()},Ie=function(Ge){var dt=Ge.transform;return Ge.x0!==Ge.x1&&Ge.y0!==Ge.y1&&r(A.type,dt,y),T.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};F&&(E.each(function(Ge){J[o(Ge)]={x0:Ge.x0,x1:Ge.x1,y0:Ge.y0,y1:Ge.y1},Ge.transform&&(J[o(Ge)].transform={textX:Ge.transform.textX,textY:Ge.transform.textY,anchorX:Ge.transform.anchorX,anchorY:Ge.transform.anchorY,targetX:Ge.transform.targetX,targetY:Ge.transform.targetY,scale:Ge.transform.scale,rotate:Ge.transform.rotate})}),S.each(function(Ge){U[o(Ge)]={x0:Ge.x0,x1:Ge.x1,y0:Ge.y0,y1:Ge.y1},Ge.transform&&(U[o(Ge)].transform={textX:Ge.transform.textX,textY:Ge.transform.textY,anchorX:Ge.transform.anchorX,anchorY:Ge.transform.anchorY,targetX:Ge.transform.targetX,targetY:Ge.transform.targetY,scale:Ge.transform.scale,rotate:Ge.transform.rotate}),!K&&M.isEntry(Ge)&&(K=Ge)})),V=l(g,d,h,S,{width:z,height:H,viewX:ie,viewY:oe,pathSlice:Re,toMoveInsideSlice:Ve,prevEntry:K,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:Ye,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}),A.pathbar.visible?s(g,d,h,E,{barDifY:X,width:Y,height:ee,viewX:_e,viewY:ue,pathSlice:Se,toMoveInsideSlice:Ve,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:Ye,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}):E.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../../lib"),T=t("../sunburst/helpers"),e=t("../bar/uniform_text").resizeText;function a(n){var r=n._fullLayout._treemaplayer.selectAll(".trace");e(n,r,"treemap"),r.each(function(v){var s=x.select(this),o=v[0],b=o.trace;s.style("opacity",b.opacity),s.selectAll("path.surface").each(function(g){x.select(this).call(i,g,b,{hovered:!1})})})}function i(n,r,v,s){var o=(s||{}).hovered,b=r.data.data,g=b.i,d,c,m=b.color,l=T.isHierarchyRoot(r),y=1;if(o)d=v._hovered.marker.line.color,c=v._hovered.marker.line.width;else if(l&&m===v.root.color)y=100,d="rgba(0,0,0,0)",c=0;else if(d=M.castOption(v,g,"marker.line.color")||f.defaultLine,c=M.castOption(v,g,"marker.line.width")||0,!v._hasColorscale&&!r.onPathbar){var u=v.marker.depthfade;if(u){var A=f.combine(f.addOpacity(v._backgroundColor,.75),m),_;if(u===!0){var p=T.getMaxDepth(v);isFinite(p)?T.isLeaf(r)?_=0:_=v._maxVisibleLayers-(r.data.depth-v._entryDepth):_=r.data.height+1}else _=r.data.depth-v._entryDepth,v._atRootLevel||_++;if(_>0)for(var w=0;w<_;w++){var h=.5*w/_;m=f.combine(f.addOpacity(A,h),m)}}}n.style("stroke-width",c).call(f.fill,m).call(f.stroke,d).style("opacity",y)}B.exports={style:a,styleOne:i}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(t,B,G){var x=t("../box/attributes"),f=t("../../lib/extend").extendFlat,M=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat;B.exports={y:x.y,x:x.x,x0:x.x0,y0:x.y0,xhoverformat:M("x"),yhoverformat:M("y"),name:f({},x.name,{}),orientation:f({},x.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:x.fillcolor,points:f({},x.boxpoints,{}),jitter:f({},x.jitter,{}),pointpos:f({},x.pointpos,{}),width:f({},x.width,{}),marker:x.marker,text:x.text,hovertext:x.hovertext,hovertemplate:x.hovertemplate,quartilemethod:x.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:x.selected,unselected:x.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(t,B,G){var x=t("../../lib"),f=t("../../plots/cartesian/axes"),M=t("../box/calc"),T=t("./helpers"),e=t("../../constants/numerical").BADNUM;B.exports=function(v,s){var o=M(v,s);if(o[0].t.empty)return o;for(var b=v._fullLayout,g=f.getFromId(v,s[s.orientation==="h"?"xaxis":"yaxis"]),d=1/0,c=-1/0,m=0,l=0,y=0;y<o.length;y++){var u=o[y],A=u.pts.map(T.extractVal),_=u.bandwidth=i(s,u,A),p=u.span=n(s,u,g,_);if(u.min===u.max&&_===0)p=u.span=[u.min,u.max],u.density=[{v:1,t:p[0]}],u.bandwidth=_,m=Math.max(m,1);else{var w=p[1]-p[0],h=Math.ceil(w/(_/3)),L=w/h;if(!isFinite(L)||!isFinite(h))return x.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var E=T.makeKDE(u,s,A);u.density=new Array(h);for(var S=0,P=p[0];P<p[1]+L/2;S++,P+=L){var F=E(P);u.density[S]={v:F,t:P},m=Math.max(m,F)}}l=Math.max(l,A.length),d=Math.min(d,p[0]),c=Math.max(c,p[1])}var I=f.findExtremes(g,[d,c],{padded:!0});if(s._extremes[g._id]=I,s.width)o[0].t.maxKDE=m;else{var D=b._violinScaleGroupStats,R=s.scalegroup,O=D[R];O?(O.maxKDE=Math.max(O.maxKDE,m),O.maxCount=Math.max(O.maxCount,l)):D[R]={maxKDE:m,maxCount:l}}return o[0].t.labels.kde=x._(v,"kde:"),o};function a(r,v,s){var o=Math.min(v,s/1.349);return 1.059*o*Math.pow(r,-.2)}function i(r,v,s){var o=v.max-v.min;if(!o)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,o/1e4);var b=s.length,g=x.stdev(s,b-1,v.mean);return Math.max(a(b,g,v.q3-v.q1),o/100)}function n(r,v,s,o){var b=r.spanmode,g=r.span||[],d=[v.min,v.max],c=[v.min-2*o,v.max+2*o],m;function l(u){var A=g[u],_=s.type==="multicategory"?s.r2c(A):s.d2c(A,0,r[v.valLetter+"calendar"]);return _===e?c[u]:_}b==="soft"?m=c:b==="hard"?m=d:m=[l(0),l(1)];var y={type:"linear",range:m};return f.setConvert(y),y.cleanRange(),m}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(t,B,G){var x=t("../box/cross_trace_calc").setPositionOffset,f=["v","h"];B.exports=function(T,e){for(var a=T.calcdata,i=e.xaxis,n=e.yaxis,r=0;r<f.length;r++){for(var v=f[r],s=v==="h"?n:i,o=[],b=0;b<a.length;b++){var g=a[b],d=g[0].t,c=g[0].trace;c.visible===!0&&c.type==="violin"&&!d.empty&&c.orientation===v&&c.xaxis===i._id&&c.yaxis===n._id&&o.push(b)}x("violin",T,o,s)}}},{"../box/cross_trace_calc":684}],1103:[function(t,B,G){var x=t("../../lib"),f=t("../../components/color"),M=t("../box/defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(L,E){return x.coerce(a,i,T,L,E)}function s(L,E){return x.coerce2(a,i,T,L,E)}if(M.handleSampleDefaults(a,i,v,r),i.visible!==!1){v("bandwidth"),v("side");var o=v("width");o||(v("scalegroup",i.name),v("scalemode"));var b=v("span"),g;Array.isArray(b)&&(g="manual"),v("spanmode",g);var d=v("line.color",(a.marker||{}).color||n),c=v("line.width"),m=v("fillcolor",f.addOpacity(i.line.color,.5));M.handlePointsDefaults(a,i,v,{prefix:""});var l=s("box.width"),y=s("box.fillcolor",m),u=s("box.line.color",d),A=s("box.line.width",c),_=v("box.visible",Boolean(l||y||u||A));_||(i.box={visible:!1});var p=s("meanline.color",d),w=s("meanline.width",c),h=v("meanline.visible",Boolean(p||w));h||(i.meanline={visible:!1}),v("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(t,B,G){var x=t("../../lib"),f={gaussian:function(M){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*M*M)}};G.makeKDE=function(M,T,e){var a=e.length,i=f.gaussian,n=M.bandwidth,r=1/(a*n);return function(v){for(var s=0,o=0;o<a;o++)s+=i((v-e[o])/n);return r*s}},G.getPositionOnKdePath=function(M,T,e){var a,i;T.orientation==="h"?(a="y",i="x"):(a="x",i="y");var n=x.findPointOnPath(M.path,e,i,{pathLength:M.pathLength}),r=M.posCenterPx,v=n[a],s=T.side==="both"?2*r-v:r;return[v,s]},G.getKdeValue=function(M,T,e){var a=M.pts.map(G.extractVal),i=G.makeKDE(M,T,a);return i(e)/M.posDensityScale},G.extractVal=function(M){return M.v}},{"../../lib":515}],1105:[function(t,B,G){var x=t("../../components/color"),f=t("../../lib"),M=t("../../plots/cartesian/axes"),T=t("../box/hover"),e=t("./helpers");B.exports=function(i,n,r,v,s){s||(s={});var o=s.hoverLayer,b=i.cd,g=b[0].trace,d=g.hoveron,c=d.indexOf("violins")!==-1,m=d.indexOf("kde")!==-1,l=[],y,u;if(c||m){var A=T.hoverOnBoxes(i,n,r,v);if(m&&A.length>0){var _=i.xa,p=i.ya,w,h,L,E,S;g.orientation==="h"?(S=n,w="y",L=p,h="x",E=_):(S=r,w="x",L=_,h="y",E=p);var P=b[i.index];if(S>=P.span[0]&&S<=P.span[1]){var F=f.extendFlat({},i),I=E.c2p(S,!0),D=e.getKdeValue(P,g,S),R=e.getPositionOnKdePath(P,g,I),O=L._offset,z=L._length;F[w+"0"]=R[0],F[w+"1"]=R[1],F[h+"0"]=F[h+"1"]=I,F[h+"Label"]=h+": "+M.hoverLabelText(E,S,g[h+"hoverformat"])+", "+b[0].t.labels.kde+" "+D.toFixed(3);for(var H=0,Y=0;Y<A.length;Y++)if(A[Y].attr==="med"){H=Y;break}F.spikeDistance=A[H].spikeDistance;var ee=w+"Spike";F[ee]=A[H][ee],A[H].spikeDistance=void 0,A[H][ee]=void 0,F.hovertemplate=!1,l.push(F),u={},u[w+"1"]=f.constrain(O+R[0],O,O+z),u[w+"2"]=f.constrain(O+R[1],O,O+z),u[h+"1"]=u[h+"2"]=E._offset+I}}c&&(l=l.concat(A))}d.indexOf("points")!==-1&&(y=T.hoverOnPoints(i,n,r));var j=o.selectAll(".violinline-"+g.uid).data(u?[0]:[]);return j.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(u).call(x.stroke,i.color),v==="closest"?y?[y]:l:(y&&l.push(y),l)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(t,B,G){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../box/select"),moduleType:"trace",name:"violin",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(t,B,G){var x=t("../box/layout_attributes"),f=t("../../lib").extendFlat;B.exports={violinmode:f({},x.boxmode,{}),violingap:f({},x.boxgap,{}),violingroupgap:f({},x.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes"),M=t("../box/layout_defaults");B.exports=function(e,a,i){function n(r,v){return x.coerce(e,a,f,r,v)}M._supply(e,a,i,n,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../box/plot"),e=t("../scatter/line_points"),a=t("./helpers");B.exports=function(n,r,v,s){var o=n._fullLayout,b=r.xaxis,g=r.yaxis;function d(c,m){var l=e(c,{xaxis:b,yaxis:g,trace:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M.smoothopen(l[0],1)}f.makeTraceGroups(s,v,"trace violins").each(function(c){var m=x.select(this),l=c[0],y=l.t,u=l.trace;if(u.visible!==!0||y.empty){m.remove();return}var A=y.bPos,_=y.bdPos,p=r[y.valLetter+"axis"],w=r[y.posLetter+"axis"],h=u.side==="both",L=h||u.side==="positive",E=h||u.side==="negative",S=m.selectAll("path.violin").data(f.identity);S.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),S.exit().remove(),S.each(function(H){var Y=x.select(this),ee=H.density,j=ee.length,X=w.c2l(H.pos+A,!0),ae=w.l2p(X),fe;if(u.width)fe=y.maxKDE/_;else{var K=o._violinScaleGroupStats[u.scalegroup];fe=u.scalemode==="count"?K.maxKDE/_*(K.maxCount/H.pts.length):K.maxKDE/_}var J,U,V,q,re,Z,Q;if(L){for(Z=new Array(j),q=0;q<j;q++)Q=Z[q]={},Q[y.posLetter]=X+ee[q].v/fe,Q[y.valLetter]=p.c2l(ee[q].t,!0);J=d(Z,u)}if(E){for(Z=new Array(j),re=0,q=j-1;re<j;re++,q--)Q=Z[re]={},Q[y.posLetter]=X-ee[q].v/fe,Q[y.valLetter]=p.c2l(ee[q].t,!0);U=d(Z,u)}if(h)V=J+"L"+U.substr(1)+"Z";else{var ie=[ae,p.c2p(ee[0].t)],oe=[ae,p.c2p(ee[j-1].t)];u.orientation==="h"&&(ie.reverse(),oe.reverse()),L?V="M"+ie+"L"+J.substr(1)+"L"+oe:V="M"+oe+"L"+U.substr(1)+"L"+ie}Y.attr("d",V),H.posCenterPx=ae,H.posDensityScale=fe*_,H.path=Y.node(),H.pathLength=H.path.getTotalLength()/(h?2:1)});var P=u.box,F=P.width,I=(P.line||{}).width,D,R;h?(D=_*F,R=0):L?(D=[0,_*F/2],R=I*{x:1,y:-1}[y.posLetter]):(D=[_*F/2,0],R=I*{x:-1,y:1}[y.posLetter]),T.plotBoxAndWhiskers(m,{pos:w,val:p},u,{bPos:A,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(m,{pos:w,val:p},u,{bPos:A,bdPos:D,bPosPxOffset:R});var O;!u.box.visible&&u.meanline.visible&&(O=f.identity);var z=m.selectAll("path.meanline").data(O||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(H){var Y=p.c2p(H.mean,!0),ee=a.getPositionOnKdePath(H,u,Y);x.select(this).attr("d",u.orientation==="h"?"M"+Y+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+Y+"H"+ee[1])}),T.plotPoints(m,{x:b,y:g},u,y)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/color"),M=t("../scatter/style").stylePoints;B.exports=function(e){var a=x.select(e).selectAll("g.trace.violins");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var n=i[0].trace,r=x.select(this),v=n.box||{},s=v.line||{},o=n.meanline||{},b=o.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(f.stroke,n.line.color).call(f.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",s.width+"px").call(f.stroke,s.color).call(f.fill,v.fillcolor);var g={"stroke-width":b+"px","stroke-dasharray":2*b+"px,"+b+"px"};r.selectAll("path.mean").style(g).call(f.stroke,o.color),r.selectAll("path.meanline").style(g).call(f.stroke,o.color),M(r,n,e)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(t,B,G){var x=t("../../components/colorscale/attributes"),f=t("../isosurface/attributes"),M=t("../surface/attributes"),T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,i=B.exports=a(e({x:f.x,y:f.y,z:f.z,value:f.value,isomin:f.isomin,isomax:f.isomax,surface:f.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:f.slices,caps:f.caps,text:f.text,hovertext:f.hovertext,xhoverformat:f.xhoverformat,yhoverformat:f.yhoverformat,zhoverformat:f.zhoverformat,valuehoverformat:f.valuehoverformat,hovertemplate:f.hovertemplate},x("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:f.colorbar,opacity:f.opacity,opacityscale:M.opacityscale,lightposition:f.lightposition,lighting:f.lighting,flatshading:f.flatshading,contour:f.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(t,B,G){var x=t("../../../stackgl_modules").gl_mesh3d,f=t("../../lib/gl_format_color").parseColorScale,M=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=t("../isosurface/convert").findNearestOnAxis,i=t("../isosurface/convert").generateIsoMeshes;function n(s,o,b){this.scene=s,this.uid=b,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,b=this.data._meshX[o],g=this.data._meshY[o],d=this.data._meshZ[o],c=this.data._Ys.length,m=this.data._Zs.length,l=a(b,this.data._Xs).id,y=a(g,this.data._Ys).id,u=a(d,this.data._Zs).id,A=s.index=u+m*y+m*c*l;s.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[A]!==void 0?s.textLabel=_[A]:_&&(s.textLabel=_),!0}},r.update=function(s){var o=this.scene,b=o.fullSceneLayout;this.data=i(s);function g(y,u,A,_){return u.map(function(p){return y.d2l(p,0,_)*A})}var d=e(g(b.xaxis,s._meshX,o.dataScale[0],s.xcalendar),g(b.yaxis,s._meshY,o.dataScale[1],s.ycalendar),g(b.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),c=e(s._meshI,s._meshJ,s._meshK),m={positions:d,cells:c,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:M(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},l=T(s);m.vertexIntensity=s._meshIntensity,m.vertexIntensityBounds=[l.min,l.max],m.colormap=f(s),this.mesh.update(m)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(s,o){var b=s.glplot.gl,g=x({gl:b}),d=new n(s,g,o.uid);return g._trace=d,d.update(o),s.glplot.add(g),d}B.exports=v},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(t,B,G){var x=t("../../lib"),f=t("./attributes"),M=t("../isosurface/defaults").supplyIsoDefaults,T=t("../surface/defaults").opacityscaleDefaults;B.exports=function(a,i,n,r){function v(s,o){return x.coerce(a,i,f,s,o)}M(a,i,n,r,v),T(a,i,r,v)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(t,B,G){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"volume",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(t,B,G){var x=t("../bar/attributes"),f=t("../scatter/attributes").line,M=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");function v(s){return{marker:{color:n({},x.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},x.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},x.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}B.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:x.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},M.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:x.text,textposition:x.textposition,insidetextanchor:x.insidetextanchor,textangle:x.textangle,textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:x.orientation,offset:x.offset,width:x.width,increasing:v(),decreasing:v(),totals:v(),connector:{line:{color:n({},f.color,{dflt:r.defaultLine}),width:n({},f.width,{editType:"plot"}),dash:f.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(t,B,G){var x=t("../../plots/cartesian/axes"),f=t("../../plots/cartesian/align_period"),M=t("../../lib").mergeArray,T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;function a(n){return n==="a"||n==="absolute"}function i(n){return n==="t"||n==="total"}B.exports=function(r,v){var s=x.getFromId(r,v.xaxis||"x"),o=x.getFromId(r,v.yaxis||"y"),b,g,d,c,m,l;v.orientation==="h"?(b=s.makeCalcdata(v,"x"),d=o.makeCalcdata(v,"y"),c=f(v,o,"y",d),m=!!v.yperiodalignment,l="y"):(b=o.makeCalcdata(v,"y"),d=s.makeCalcdata(v,"x"),c=f(v,s,"x",d),m=!!v.xperiodalignment,l="x"),g=c.vals;for(var y=Math.min(g.length,b.length),u=new Array(y),A=0,_,p=!1,w=0;w<y;w++){var h=b[w]||0,L=!1;(b[w]!==e||i(v.measure[w])||a(v.measure[w]))&&w+1<y&&(b[w+1]!==e||i(v.measure[w+1])||a(v.measure[w+1]))&&(L=!0);var E=u[w]={i:w,p:g[w],s:h,rawS:h,cNext:L};a(v.measure[w])?(A=E.s,E.isSum=!0,E.dir="totals",E.s=A):i(v.measure[w])?(E.isSum=!0,E.dir="totals",E.s=A):(E.isSum=!1,E.dir=E.rawS<0?"decreasing":"increasing",_=E.s,E.s=A+_,A+=_),E.dir==="totals"&&(p=!0),m&&(u[w].orig_p=d[w],u[w][l+"End"]=c.ends[w],u[w][l+"Start"]=c.starts[w]),v.ids&&(E.id=String(v.ids[w])),E.v=(v.base||0)+A}return u.length&&(u[0].hasTotals=p),M(v.text,u,"tx"),M(v.hovertext,u,"htx"),T(u,v),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(t,B,G){B.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(t,B,G){var x=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(M,T){var e=M._fullLayout,a=M._fullData,i=M.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g];d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="waterfall"&&(b=i[g],d.orientation==="h"?o.push(b):s.push(b),v.push(b))}var c={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(x(M,n,r,s,c),x(M,r,n,o,c),g=0;g<v.length;g++){b=v[g];for(var m=0;m<b.length;m++){var l=b[m];l.isSum===!1&&(l.s0+=m===0?0:b[m-1].s),m+1<b.length&&(b[m].nextP0=b[m+1].p0,b[m].nextS0=b[m+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(t,B,G){var x=t("../../lib"),f=t("../bar/defaults").handleGroupingDefaults,M=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color"),n=t("../../constants/delta.js"),r=n.INCREASING.COLOR,v=n.DECREASING.COLOR,s="#4499FF";function o(d,c,m){d(c+".marker.color",m),d(c+".marker.line.color",i.defaultLine),d(c+".marker.line.width")}function b(d,c,m,l){function y(w,h){return x.coerce(d,c,a,w,h)}var u=T(d,c,l,y);if(!u){c.visible=!1;return}e(d,c,l,y),y("xhoverformat"),y("yhoverformat"),y("measure"),y("orientation",c.x&&!c.y?"h":"v"),y("base"),y("offset"),y("width"),y("text"),y("hovertext"),y("hovertemplate");var A=y("textposition");M(d,c,l,y,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c.textposition!=="none"&&(y("texttemplate"),c.texttemplate||y("textinfo")),o(y,"increasing",r),o(y,"decreasing",v),o(y,"totals",s);var _=y("connector.visible");if(_){y("connector.mode");var p=y("connector.line.width");p&&(y("connector.line.color"),y("connector.line.dash"))}}function g(d,c){var m,l;function y(A){return x.coerce(l._input,l,a,A)}if(c.waterfallmode==="group")for(var u=0;u<d.length;u++)l=d[u],m=l._input,f(m,l,c,y)}B.exports={supplyDefaults:b,crossTraceDefaults:g}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(t,B,G){B.exports=function(f,M){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"initial"in M&&(f.initial=M.initial),"delta"in M&&(f.delta=M.delta),"final"in M&&(f.final=M.final),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],1121:[function(t,B,G){var x=t("../../plots/cartesian/axes").hoverLabelText,f=t("../../components/color").opacity,M=t("../bar/hover").hoverOnBars,T=t("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};B.exports=function(n,r,v,s,o){var b=M(n,r,v,s,o);if(!b)return;var g=b.cd,d=g[0].trace,c=d.orientation==="h",m=c?"x":"y",l=c?n.xa:n.ya;function y(P){return x(l,P,d[m+"hoverformat"])}var u=b.index,A=g[u],_=A.isSum?A.b+A.s:A.rawS;if(!A.isSum){b.initial=A.b+A.s-_,b.delta=_,b.final=b.initial+b.delta;var p=y(Math.abs(b.delta));b.deltaLabel=_<0?"("+p+")":p,b.finalLabel=y(b.final),b.initialLabel=y(b.initial)}var w=A.hi||d.hoverinfo,h=[];if(w&&w!=="none"&&w!=="skip"){var L=w==="all",E=w.split("+"),S=function(P){return L||E.indexOf(P)!==-1};A.isSum||(S("final")&&(c?!S("x"):!S("y"))&&h.push(b.finalLabel),S("delta")&&(_<0?h.push(b.deltaLabel+" "+e.decreasing):h.push(b.deltaLabel+" "+e.increasing)),S("initial")&&h.push("Initial: "+b.initialLabel))}return h.length&&(b.extraText=h.join("<br>")),b.color=a(d,A),[b]};function a(i,n){var r=i[n.dir].marker,v=r.color,s=r.line.color,o=r.line.width;if(f(v))return v;if(f(s)&&o)return s}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(t,B,G){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(t,B,G){B.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(t,B,G){var x=t("../../lib"),f=t("./layout_attributes");B.exports=function(M,T,e){var a=!1;function i(v,s){return x.coerce(M,T,f,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="waterfall"){a=!0;break}}a&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../lib"),M=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;B.exports=function(v,s,o,b){var g=v._fullLayout;a("waterfall",g),e.plot(v,s,o,b,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap}),i(v,s,o,b)};function i(r,v,s,o){var b=v.xaxis,g=v.yaxis;f.makeTraceGroups(o,s,"trace bars").each(function(d){var c=x.select(this),m=d[0].trace,l=f.ensureSingle(c,"g","lines");if(!m.connector||!m.connector.visible){l.remove();return}var y=m.orientation==="h",u=m.connector.mode,A=l.selectAll("g.line").data(f.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var _=A.size();A.each(function(p,w){if(!(w!==_-1&&!p.cNext)){var h=n(p,b,g,y),L=h[0],E=h[1],S="";L[0]!==T&&E[0]!==T&&L[1]!==T&&E[1]!==T&&(u==="spanning"&&!p.isSum&&w>0&&(y?S+="M"+L[0]+","+E[1]+"V"+E[0]:S+="M"+L[1]+","+E[0]+"H"+L[0]),u!=="between"&&(p.isSum||w<_-1)&&(y?S+="M"+L[1]+","+E[0]+"V"+E[1]:S+="M"+L[0]+","+E[1]+"H"+L[1]),L[2]!==T&&E[2]!==T&&(y?S+="M"+L[1]+","+E[1]+"V"+E[2]:S+="M"+L[1]+","+E[1]+"H"+L[2])),S===""&&(S="M0,0Z"),f.ensureSingle(x.select(this),"path").attr("d",S).call(M.setClipUrl,v.layerClipId,r)}})})}function n(r,v,s,o){var b=[],g=[],d=o?v:s,c=o?s:v;return b[0]=d.c2p(r.s0,!0),g[0]=c.c2p(r.p0,!0),b[1]=d.c2p(r.s1,!0),g[1]=c.c2p(r.p1,!0),b[2]=d.c2p(r.nextS0,!0),g[2]=c.c2p(r.nextP0,!0),o?[b,g]:[g,b]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(t,B,G){var x=t("@plotly/d3"),f=t("../../components/drawing"),M=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||x.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");a(r,o,"waterfall"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=x.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(c){if(!c.isBlank){var m=d[c.dir].marker;x.select(this).call(M.fill,m.color).call(M.stroke,m.line.color).call(f.dashLine,m.line.dash,m.line.width).style("opacity",d.selectedpoints&&!c.selected?T:1)}}),i(g,d,r),g.selectAll(".lines").each(function(){var c=d.connector.line;f.lineGroupStyle(x.select(this).selectAll("path"),c.width,c.color,c.dash)})})}B.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(t,B,G){var x=t("../plots/cartesian/axes"),f=t("../lib"),M=t("../plot_api/plot_schema"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/numerical").BADNUM;G.moduleType="transform",G.name="aggregate";var a=G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;G.supplyDefaults=function(b,g){var d={},c;function m(P,F){return f.coerce(b,d,a,P,F)}var l=m("enabled");if(!l)return d;var y=M.findArrayAttributes(g),u={};for(c=0;c<y.length;c++)u[y[c]]=1;var A=m("groups");if(!Array.isArray(A)){if(!u[A])return d.enabled=!1,d;u[A]=0}var _=b.aggregations||[],p=d.aggregations=new Array(_.length),w;function h(P,F){return f.coerce(_[c],w,i,P,F)}for(c=0;c<_.length;c++){w={_index:c};var L=h("target"),E=h("func"),S=h("enabled");S&&L&&(u[L]||E==="count"&&u[L]===void 0)?(E==="stddev"&&h("funcmode"),u[L]=0,p[c]=w):p[c]={enabled:!1,_index:c}}for(c=0;c<y.length;c++)u[y[c]]&&p.push({target:y[c],func:i.func.dflt,enabled:!0,_index:-1});return d},G.calcTransform=function(b,g,d){if(!!d.enabled){var c=d.groups,m=f.getTargetArray(g,{target:c});if(!!m){var l,y,u,A,_={},p={},w=[],h=T(g.transforms,d),L=m.length;for(g._length&&(L=Math.min(L,g._length)),l=0;l<L;l++)y=m[l],u=_[y],u===void 0?(_[y]=w.length,A=[l],w.push(A),p[_[y]]=h(l)):(w[u].push(l),p[_[y]]=(p[_[y]]||[]).concat(h(l)));d._indexToPoints=p;var E=d.aggregations;for(l=0;l<E.length;l++)n(b,g,w,E[l]);typeof c=="string"&&n(b,g,w,{target:c,func:"first",enabled:!0}),g._length=w.length}}};function n(b,g,d,c){if(!!c.enabled){for(var m=c.target,l=f.nestedProperty(g,m),y=l.get(),u=x.getDataConversions(b,g,m,y),A=r(c,u),_=new Array(d.length),p=0;p<d.length;p++)_[p]=A(y,d[p]);l.set(_),c.func==="count"&&f.pushUnique(g._arrayAttrs,m)}}function r(b,g){var d=b.func,c=g.d2c,m=g.c2d;switch(d){case"count":return v;case"first":return s;case"last":return o;case"sum":return function(l,y){for(var u=0,A=0;A<y.length;A++){var _=c(l[y[A]]);_!==e&&(u+=_)}return m(u)};case"avg":return function(l,y){for(var u=0,A=0,_=0;_<y.length;_++){var p=c(l[y[_]]);p!==e&&(u+=p,A++)}return A?m(u/A):e};case"min":return function(l,y){for(var u=1/0,A=0;A<y.length;A++){var _=c(l[y[A]]);_!==e&&(u=Math.min(u,_))}return u===1/0?e:m(u)};case"max":return function(l,y){for(var u=-1/0,A=0;A<y.length;A++){var _=c(l[y[A]]);_!==e&&(u=Math.max(u,_))}return u===-1/0?e:m(u)};case"range":return function(l,y){for(var u=1/0,A=-1/0,_=0;_<y.length;_++){var p=c(l[y[_]]);p!==e&&(u=Math.min(u,p),A=Math.max(A,p))}return A===-1/0||u===1/0?e:m(A-u)};case"change":return function(l,y){var u=c(l[y[0]]),A=c(l[y[y.length-1]]);return u===e||A===e?e:m(A-u)};case"median":return function(l,y){for(var u=[],A=0;A<y.length;A++){var _=c(l[y[A]]);_!==e&&u.push(_)}if(!u.length)return e;u.sort(f.sorterAsc);var p=(u.length-1)/2;return m((u[Math.floor(p)]+u[Math.ceil(p)])/2)};case"mode":return function(l,y){for(var u={},A=0,_=e,p=0;p<y.length;p++){var w=c(l[y[p]]);if(w!==e){var h=u[w]=(u[w]||0)+1;h>A&&(A=h,_=w)}}return A?m(_):e};case"rms":return function(l,y){for(var u=0,A=0,_=0;_<y.length;_++){var p=c(l[y[_]]);p!==e&&(u+=p*p,A++)}return A?m(Math.sqrt(u/A)):e};case"stddev":return function(l,y){var u=0,A=0,_=1,p=e,w;for(w=0;w<y.length&&p===e;w++)p=c(l[y[w]]);if(p===e)return e;for(;w<y.length;w++){var h=c(l[y[w]]);if(h!==e){var L=h-p;u+=L,A+=L*L,_++}}var E=b.funcmode==="sample"?_-1:_;return E?Math.sqrt((A-u*u/_)/E):0}}}function v(b,g){return g.length}function s(b,g){return b[g[0]]}function o(b,g){return b[g[g.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(t,B,G){var x=t("../lib"),f=t("../registry"),M=t("../plots/cartesian/axes"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/filter_ops"),a=e.COMPARISON_OPS,i=e.INTERVAL_OPS,n=e.SET_OPS;G.moduleType="transform",G.name="filter",G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(i).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},G.supplyDefaults=function(v){var s={};function o(c,m){return x.coerce(v,s,G.attributes,c,m)}var b=o("enabled");if(b){var g=o("target");if(x.isArrayOrTypedArray(g)&&g.length===0)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var d=f.getComponentMethod("calendars","handleDefaults");d(v,s,"valuecalendar",null),d(v,s,"targetcalendar",null)}return s},G.calcTransform=function(v,s,o){if(!o.enabled)return;var b=x.getTargetArray(s,o);if(!b)return;var g=o.target,d=b.length;s._length&&(d=Math.min(d,s._length));var c=o.targetcalendar,m=s._arrayAttrs,l=o.preservegaps;if(typeof g=="string"){var y=x.nestedProperty(s,g+"calendar").get();y&&(c=y)}var u=M.getDataToCoordFunc(v,s,g,b),A=r(o,u,c),_={},p={},w=0;function h(I,D){for(var R=0;R<m.length;R++){var O=x.nestedProperty(s,m[R]);I(O,D)}}var L,E;l?(L=function(I){_[I.astr]=x.extendDeep([],I.get()),I.set(new Array(d))},E=function(I,D){var R=_[I.astr][D];I.get()[D]=R}):(L=function(I){_[I.astr]=x.extendDeep([],I.get()),I.set([])},E=function(I,D){var R=_[I.astr][D];I.get().push(R)}),h(L);for(var S=T(s.transforms,o),P=0;P<d;P++){var F=A(b[P]);F?(h(E,P),p[w++]=S(P)):l&&w++}o._indexToPoints=p,s._length=w};function r(v,s,o){var b=v.operation,g=v.value,d=Array.isArray(g);function c(u){return u.indexOf(b)!==-1}var m=function(u){return s(u,0,v.valuecalendar)},l=function(u){return s(u,0,o)},y;switch(c(a)?y=m(d?g[0]:g):c(i)?y=d?[m(g[0]),m(g[1])]:[m(g),m(g)]:c(n)&&(y=d?g.map(m):[m(g)]),b){case"=":return function(u){return l(u)===y};case"!=":return function(u){return l(u)!==y};case"<":return function(u){return l(u)<y};case"<=":return function(u){return l(u)<=y};case">":return function(u){return l(u)>y};case">=":return function(u){return l(u)>=y};case"[]":return function(u){var A=l(u);return A>=y[0]&&A<=y[1]};case"()":return function(u){var A=l(u);return A>y[0]&&A<y[1]};case"[)":return function(u){var A=l(u);return A>=y[0]&&A<y[1]};case"(]":return function(u){var A=l(u);return A>y[0]&&A<=y[1]};case"][":return function(u){var A=l(u);return A<=y[0]||A>=y[1]};case")(":return function(u){var A=l(u);return A<y[0]||A>y[1]};case"](":return function(u){var A=l(u);return A<=y[0]||A>y[1]};case")[":return function(u){var A=l(u);return A<y[0]||A>=y[1]};case"{}":return function(u){return y.indexOf(l(u))!==-1};case"}{":return function(u){return y.indexOf(l(u))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(t,B,G){var x=t("../lib"),f=t("../plot_api/plot_schema"),M=t("../plots/plots"),T=t("./helpers").pointsAccessorFunction;G.moduleType="transform",G.name="groupby",G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},G.supplyDefaults=function(a,i,n){var r,v={};function s(m,l){return x.coerce(a,v,G.attributes,m,l)}var o=s("enabled");if(!o)return v;s("groups"),s("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var b=a.styles,g=v.styles=[];if(b)for(r=0;r<b.length;r++){var d=g[r]={};x.coerce(b[r],g[r],G.attributes.styles,"target");var c=x.coerce(b[r],g[r],G.attributes.styles,"value");x.isPlainObject(c)?d.value=x.extendDeep({},c):c&&delete d.value}return v},G.transform=function(a,i){var n,r,v,s=[];for(r=0;r<a.length;r++)for(n=e(a[r],i),v=0;v<n.length;v++)s.push(n[v]);return s};function e(a,i){var n,r,v,s,o,b,g,d,c,m,l=i.transform,y=i.transformIndex,u=a.transforms[y].groups,A=T(a.transforms,l);if(!x.isArrayOrTypedArray(u)||u.length===0)return[a];var _=x.filterUnique(u),p=new Array(_.length),w=u.length,h=f.findArrayAttributes(a),L=l.styles||[],E={};for(n=0;n<L.length;n++)E[L[n].target]=L[n].value;l.styles&&(m=x.keyedContainer(l,"styles","target","value.name"));var S={},P={};for(n=0;n<_.length;n++){b=_[n],S[b]=n,P[b]=0,g=p[n]=x.extendDeepNoArrays({},a),g._group=b,g.transforms[y]._indexToPoints={};var F=null;for(m&&(F=m.get(b)),F||F===""?g.name=F:g.name=x.templateString(l.nameformat,{trace:a.name,group:b}),d=g.transforms,g.transforms=[],r=0;r<d.length;r++)g.transforms[r]=x.extendDeepNoArrays({},d[r]);for(r=0;r<h.length;r++)x.nestedProperty(g,h[r]).set([])}for(v=0;v<h.length;v++){for(s=h[v],r=0,c=[];r<_.length;r++)c[r]=x.nestedProperty(p[r],s).get();for(o=x.nestedProperty(a,s).get(),r=0;r<w;r++)c[S[u[r]]].push(o[r])}for(r=0;r<w;r++){g=p[S[u[r]]];var I=g.transforms[y]._indexToPoints;I[P[u[r]]]=A(r),P[u[r]]++}for(n=0;n<_.length;n++)b=_[n],g=p[n],M.clearExpandedTraceDefaultColors(g),g=x.extendDeepNoArrays(g,E[b]||{});return p}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(t,B,G){G.pointsAccessorFunction=function(x,f){for(var M,T,e=0;e<x.length&&(M=x[e],M!==f);e++)!M._indexToPoints||M.enabled===!1||(T=M._indexToPoints);var a=T?function(i){return T[i]}:function(i){return[i]};return a}},{}],1131:[function(t,B,G){var x=t("../lib"),f=t("../plots/cartesian/axes"),M=t("./helpers").pointsAccessorFunction,T=t("../constants/numerical").BADNUM;G.moduleType="transform",G.name="sort",G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},G.supplyDefaults=function(i){var n={};function r(s,o){return x.coerce(i,n,G.attributes,s,o)}var v=r("enabled");return v&&(r("target"),r("order")),n},G.calcTransform=function(i,n,r){if(!!r.enabled){var v=x.getTargetArray(n,r);if(!!v){var s=r.target,o=v.length;n._length&&(o=Math.min(o,n._length));var b=n._arrayAttrs,g=f.getDataToCoordFunc(i,n,s,v),d=e(r,v,g,o),c=M(n.transforms,r),m={},l,y;for(l=0;l<b.length;l++){var u=x.nestedProperty(n,b[l]),A=u.get(),_=new Array(o);for(y=0;y<o;y++)_[y]=A[d[y]];u.set(_)}for(y=0;y<o;y++)m[y]=c(d[y]);r._indexToPoints=m,n._length=o}}};function e(i,n,r,v){var s=new Array(v),o=new Array(v),b;for(b=0;b<v;b++)s[b]={v:n[b],i:b};for(s.sort(a(i,r)),b=0;b<v;b++)o[b]=s[b].i;return o}function a(i,n){switch(i.order){case"ascending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:s-o};case"descending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:o-s}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(t,B,G){G.version="2.16.2"},{}],1133:[function(t,B,G){(function(x){(function(){(function(f){if(typeof G=="object"&&typeof B<"u")B.exports=f();else{var M;typeof window<"u"?M=window:typeof x<"u"?M=x:typeof self<"u"?M=self:M=this,M.stackgl=f()}})(function(){return function(){function f(M,T,e){function a(r,v){if(!T[r]){if(!M[r]){var s=typeof t=="function"&&t;if(!v&&s)return s(r,!0);if(i)return i(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var b=T[r]={exports:{}};M[r][0].call(b.exports,function(g){var d=M[r][1][g];return a(d||g)},b,b.exports,f,M,T,e)}return T[r].exports}for(var i=typeof t=="function"&&t,n=0;n<e.length;n++)a(e[n]);return a}return f}()({1:[function(f,M,T){T.byteLength=o,T.toByteArray=g,T.fromByteArray=m;for(var e=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,v=n.length;r<v;++r)e[r]=n[r],a[n.charCodeAt(r)]=r;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function s(l){var y=l.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=l.indexOf("=");u===-1&&(u=y);var A=u===y?0:4-u%4;return[u,A]}function o(l){var y=s(l),u=y[0],A=y[1];return(u+A)*3/4-A}function b(l,y,u){return(y+u)*3/4-u}function g(l){var y,u=s(l),A=u[0],_=u[1],p=new i(b(l,A,_)),w=0,h=_>0?A-4:A,L;for(L=0;L<h;L+=4)y=a[l.charCodeAt(L)]<<18|a[l.charCodeAt(L+1)]<<12|a[l.charCodeAt(L+2)]<<6|a[l.charCodeAt(L+3)],p[w++]=y>>16&255,p[w++]=y>>8&255,p[w++]=y&255;return _===2&&(y=a[l.charCodeAt(L)]<<2|a[l.charCodeAt(L+1)]>>4,p[w++]=y&255),_===1&&(y=a[l.charCodeAt(L)]<<10|a[l.charCodeAt(L+1)]<<4|a[l.charCodeAt(L+2)]>>2,p[w++]=y>>8&255,p[w++]=y&255),p}function d(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function c(l,y,u){for(var A,_=[],p=y;p<u;p+=3)A=(l[p]<<16&16711680)+(l[p+1]<<8&65280)+(l[p+2]&255),_.push(d(A));return _.join("")}function m(l){for(var y,u=l.length,A=u%3,_=[],p=16383,w=0,h=u-A;w<h;w+=p)_.push(c(l,w,w+p>h?h:w+p));return A===1?(y=l[u-1],_.push(e[y>>2]+e[y<<4&63]+"==")):A===2&&(y=(l[u-2]<<8)+l[u-1],_.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),_.join("")}},{}],2:[function(f,M,T){},{}],3:[function(f,M,T){(function(e){(function(){var a=f("base64-js"),i=f("ieee754");T.Buffer=s,T.SlowBuffer=A,T.INSPECT_MAX_BYTES=50;var n=2147483647;T.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=r(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var ue=new Uint8Array(1);return ue.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ue.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function v(ue){if(ue>n)throw new RangeError('The value "'+ue+'" is invalid for option "size"');var ge=new Uint8Array(ue);return ge.__proto__=s.prototype,ge}function s(ue,ge,xe){if(typeof ue=="number"){if(typeof ge=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(ue)}return o(ue,ge,xe)}typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function o(ue,ge,xe){if(typeof ue=="string")return c(ue,ge);if(ArrayBuffer.isView(ue))return m(ue);if(ue==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(se(ue,ArrayBuffer)||ue&&se(ue.buffer,ArrayBuffer))return l(ue,ge,xe);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=ue.valueOf&&ue.valueOf();if(ye!=null&&ye!==ue)return s.from(ye,ge,xe);var be=y(ue);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return s.from(ue[Symbol.toPrimitive]("string"),ge,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}s.from=function(ue,ge,xe){return o(ue,ge,xe)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function b(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function g(ue,ge,xe){return b(ue),ue<=0?v(ue):ge!==void 0?typeof xe=="string"?v(ue).fill(ge,xe):v(ue).fill(ge):v(ue)}s.alloc=function(ue,ge,xe){return g(ue,ge,xe)};function d(ue){return b(ue),v(ue<0?0:u(ue)|0)}s.allocUnsafe=function(ue){return d(ue)},s.allocUnsafeSlow=function(ue){return d(ue)};function c(ue,ge){if((typeof ge!="string"||ge==="")&&(ge="utf8"),!s.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);var xe=_(ue,ge)|0,ye=v(xe),be=ye.write(ue,ge);return be!==xe&&(ye=ye.slice(0,be)),ye}function m(ue){for(var ge=ue.length<0?0:u(ue.length)|0,xe=v(ge),ye=0;ye<ge;ye+=1)xe[ye]=ue[ye]&255;return xe}function l(ue,ge,xe){if(ge<0||ue.byteLength<ge)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<ge+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return ge===void 0&&xe===void 0?ye=new Uint8Array(ue):xe===void 0?ye=new Uint8Array(ue,ge):ye=new Uint8Array(ue,ge,xe),ye.__proto__=s.prototype,ye}function y(ue){if(s.isBuffer(ue)){var ge=u(ue.length)|0,xe=v(ge);return xe.length===0||ue.copy(xe,0,0,ge),xe}if(ue.length!==void 0)return typeof ue.length!="number"||_e(ue.length)?v(0):m(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return m(ue.data)}function u(ue){if(ue>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return ue|0}function A(ue){return+ue!=ue&&(ue=0),s.alloc(+ue)}s.isBuffer=function(ge){return ge!=null&&ge._isBuffer===!0&&ge!==s.prototype},s.compare=function(ge,xe){if(se(ge,Uint8Array)&&(ge=s.from(ge,ge.offset,ge.byteLength)),se(xe,Uint8Array)&&(xe=s.from(xe,xe.offset,xe.byteLength)),!s.isBuffer(ge)||!s.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ge===xe)return 0;for(var ye=ge.length,be=xe.length,Se=0,Re=Math.min(ye,be);Se<Re;++Se)if(ge[Se]!==xe[Se]){ye=ge[Se],be=xe[Se];break}return ye<be?-1:be<ye?1:0},s.isEncoding=function(ge){switch(String(ge).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(ge,xe){if(!Array.isArray(ge))throw new TypeError('"list" argument must be an Array of Buffers');if(ge.length===0)return s.alloc(0);var ye;if(xe===void 0)for(xe=0,ye=0;ye<ge.length;++ye)xe+=ge[ye].length;var be=s.allocUnsafe(xe),Se=0;for(ye=0;ye<ge.length;++ye){var Re=ge[ye];if(se(Re,Uint8Array)&&(Re=s.from(Re)),!s.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(be,Se),Se+=Re.length}return be};function _(ue,ge){if(s.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||se(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);var xe=ue.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&xe===0)return 0;for(var be=!1;;)switch(ge){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return Z(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return oe(ue).length;default:if(be)return ye?-1:Z(ue).length;ge=(""+ge).toLowerCase(),be=!0}}s.byteLength=_;function p(ue,ge,xe){var ye=!1;if((ge===void 0||ge<0)&&(ge=0),ge>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,ge>>>=0,xe<=ge))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return j(this,ge,xe);case"utf8":case"utf-8":return O(this,ge,xe);case"ascii":return Y(this,ge,xe);case"latin1":case"binary":return ee(this,ge,xe);case"base64":return R(this,ge,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,ge,xe);default:if(ye)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),ye=!0}}s.prototype._isBuffer=!0;function w(ue,ge,xe){var ye=ue[ge];ue[ge]=ue[xe],ue[xe]=ye}s.prototype.swap16=function(){var ge=this.length;if(ge%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<ge;xe+=2)w(this,xe,xe+1);return this},s.prototype.swap32=function(){var ge=this.length;if(ge%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<ge;xe+=4)w(this,xe,xe+3),w(this,xe+1,xe+2);return this},s.prototype.swap64=function(){var ge=this.length;if(ge%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<ge;xe+=8)w(this,xe,xe+7),w(this,xe+1,xe+6),w(this,xe+2,xe+5),w(this,xe+3,xe+4);return this},s.prototype.toString=function(){var ge=this.length;return ge===0?"":arguments.length===0?O(this,0,ge):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(ge){if(!s.isBuffer(ge))throw new TypeError("Argument must be a Buffer");return this===ge?!0:s.compare(this,ge)===0},s.prototype.inspect=function(){var ge="",xe=T.INSPECT_MAX_BYTES;return ge=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(ge+=" ... "),"<Buffer "+ge+">"},s.prototype.compare=function(ge,xe,ye,be,Se){if(se(ge,Uint8Array)&&(ge=s.from(ge,ge.offset,ge.byteLength)),!s.isBuffer(ge))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ge);if(xe===void 0&&(xe=0),ye===void 0&&(ye=ge?ge.length:0),be===void 0&&(be=0),Se===void 0&&(Se=this.length),xe<0||ye>ge.length||be<0||Se>this.length)throw new RangeError("out of range index");if(be>=Se&&xe>=ye)return 0;if(be>=Se)return-1;if(xe>=ye)return 1;if(xe>>>=0,ye>>>=0,be>>>=0,Se>>>=0,this===ge)return 0;for(var Re=Se-be,Ve=ye-xe,Ae=Math.min(Re,Ve),Ce=this.slice(be,Se),Ze=ge.slice(xe,ye),Ye=0;Ye<Ae;++Ye)if(Ce[Ye]!==Ze[Ye]){Re=Ce[Ye],Ve=Ze[Ye];break}return Re<Ve?-1:Ve<Re?1:0};function h(ue,ge,xe,ye,be){if(ue.length===0)return-1;if(typeof xe=="string"?(ye=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,_e(xe)&&(xe=be?0:ue.length-1),xe<0&&(xe=ue.length+xe),xe>=ue.length){if(be)return-1;xe=ue.length-1}else if(xe<0)if(be)xe=0;else return-1;if(typeof ge=="string"&&(ge=s.from(ge,ye)),s.isBuffer(ge))return ge.length===0?-1:L(ue,ge,xe,ye,be);if(typeof ge=="number")return ge=ge&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(ue,ge,xe):Uint8Array.prototype.lastIndexOf.call(ue,ge,xe):L(ue,[ge],xe,ye,be);throw new TypeError("val must be string, number or Buffer")}function L(ue,ge,xe,ye,be){var Se=1,Re=ue.length,Ve=ge.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(ue.length<2||ge.length<2)return-1;Se=2,Re/=2,Ve/=2,xe/=2}function Ae(Ie,Ge){return Se===1?Ie[Ge]:Ie.readUInt16BE(Ge*Se)}var Ce;if(be){var Ze=-1;for(Ce=xe;Ce<Re;Ce++)if(Ae(ue,Ce)===Ae(ge,Ze===-1?0:Ce-Ze)){if(Ze===-1&&(Ze=Ce),Ce-Ze+1===Ve)return Ze*Se}else Ze!==-1&&(Ce-=Ce-Ze),Ze=-1}else for(xe+Ve>Re&&(xe=Re-Ve),Ce=xe;Ce>=0;Ce--){for(var Ye=!0,ze=0;ze<Ve;ze++)if(Ae(ue,Ce+ze)!==Ae(ge,ze)){Ye=!1;break}if(Ye)return Ce}return-1}s.prototype.includes=function(ge,xe,ye){return this.indexOf(ge,xe,ye)!==-1},s.prototype.indexOf=function(ge,xe,ye){return h(this,ge,xe,ye,!0)},s.prototype.lastIndexOf=function(ge,xe,ye){return h(this,ge,xe,ye,!1)};function E(ue,ge,xe,ye){xe=Number(xe)||0;var be=ue.length-xe;ye?(ye=Number(ye),ye>be&&(ye=be)):ye=be;var Se=ge.length;ye>Se/2&&(ye=Se/2);for(var Re=0;Re<ye;++Re){var Ve=parseInt(ge.substr(Re*2,2),16);if(_e(Ve))return Re;ue[xe+Re]=Ve}return Re}function S(ue,ge,xe,ye){return ne(Z(ge,ue.length-xe),ue,xe,ye)}function P(ue,ge,xe,ye){return ne(Q(ge),ue,xe,ye)}function F(ue,ge,xe,ye){return P(ue,ge,xe,ye)}function I(ue,ge,xe,ye){return ne(oe(ge),ue,xe,ye)}function D(ue,ge,xe,ye){return ne(ie(ge,ue.length-xe),ue,xe,ye)}s.prototype.write=function(ge,xe,ye,be){if(xe===void 0)be="utf8",ye=this.length,xe=0;else if(ye===void 0&&typeof xe=="string")be=xe,ye=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(ye)?(ye=ye>>>0,be===void 0&&(be="utf8")):(be=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Se=this.length-xe;if((ye===void 0||ye>Se)&&(ye=Se),ge.length>0&&(ye<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var Re=!1;;)switch(be){case"hex":return E(this,ge,xe,ye);case"utf8":case"utf-8":return S(this,ge,xe,ye);case"ascii":return P(this,ge,xe,ye);case"latin1":case"binary":return F(this,ge,xe,ye);case"base64":return I(this,ge,xe,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,ge,xe,ye);default:if(Re)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),Re=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(ue,ge,xe){return ge===0&&xe===ue.length?a.fromByteArray(ue):a.fromByteArray(ue.slice(ge,xe))}function O(ue,ge,xe){xe=Math.min(ue.length,xe);for(var ye=[],be=ge;be<xe;){var Se=ue[be],Re=null,Ve=Se>239?4:Se>223?3:Se>191?2:1;if(be+Ve<=xe){var Ae,Ce,Ze,Ye;switch(Ve){case 1:Se<128&&(Re=Se);break;case 2:Ae=ue[be+1],(Ae&192)===128&&(Ye=(Se&31)<<6|Ae&63,Ye>127&&(Re=Ye));break;case 3:Ae=ue[be+1],Ce=ue[be+2],(Ae&192)===128&&(Ce&192)===128&&(Ye=(Se&15)<<12|(Ae&63)<<6|Ce&63,Ye>2047&&(Ye<55296||Ye>57343)&&(Re=Ye));break;case 4:Ae=ue[be+1],Ce=ue[be+2],Ze=ue[be+3],(Ae&192)===128&&(Ce&192)===128&&(Ze&192)===128&&(Ye=(Se&15)<<18|(Ae&63)<<12|(Ce&63)<<6|Ze&63,Ye>65535&&Ye<1114112&&(Re=Ye))}}Re===null?(Re=65533,Ve=1):Re>65535&&(Re-=65536,ye.push(Re>>>10&1023|55296),Re=56320|Re&1023),ye.push(Re),be+=Ve}return H(ye)}var z=4096;function H(ue){var ge=ue.length;if(ge<=z)return String.fromCharCode.apply(String,ue);for(var xe="",ye=0;ye<ge;)xe+=String.fromCharCode.apply(String,ue.slice(ye,ye+=z));return xe}function Y(ue,ge,xe){var ye="";xe=Math.min(ue.length,xe);for(var be=ge;be<xe;++be)ye+=String.fromCharCode(ue[be]&127);return ye}function ee(ue,ge,xe){var ye="";xe=Math.min(ue.length,xe);for(var be=ge;be<xe;++be)ye+=String.fromCharCode(ue[be]);return ye}function j(ue,ge,xe){var ye=ue.length;(!ge||ge<0)&&(ge=0),(!xe||xe<0||xe>ye)&&(xe=ye);for(var be="",Se=ge;Se<xe;++Se)be+=re(ue[Se]);return be}function X(ue,ge,xe){for(var ye=ue.slice(ge,xe),be="",Se=0;Se<ye.length;Se+=2)be+=String.fromCharCode(ye[Se]+ye[Se+1]*256);return be}s.prototype.slice=function(ge,xe){var ye=this.length;ge=~~ge,xe=xe===void 0?ye:~~xe,ge<0?(ge+=ye,ge<0&&(ge=0)):ge>ye&&(ge=ye),xe<0?(xe+=ye,xe<0&&(xe=0)):xe>ye&&(xe=ye),xe<ge&&(xe=ge);var be=this.subarray(ge,xe);return be.__proto__=s.prototype,be};function ae(ue,ge,xe){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+ge>xe)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(ge,xe,ye){ge=ge>>>0,xe=xe>>>0,ye||ae(ge,xe,this.length);for(var be=this[ge],Se=1,Re=0;++Re<xe&&(Se*=256);)be+=this[ge+Re]*Se;return be},s.prototype.readUIntBE=function(ge,xe,ye){ge=ge>>>0,xe=xe>>>0,ye||ae(ge,xe,this.length);for(var be=this[ge+--xe],Se=1;xe>0&&(Se*=256);)be+=this[ge+--xe]*Se;return be},s.prototype.readUInt8=function(ge,xe){return ge=ge>>>0,xe||ae(ge,1,this.length),this[ge]},s.prototype.readUInt16LE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,2,this.length),this[ge]|this[ge+1]<<8},s.prototype.readUInt16BE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,2,this.length),this[ge]<<8|this[ge+1]},s.prototype.readUInt32LE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,4,this.length),(this[ge]|this[ge+1]<<8|this[ge+2]<<16)+this[ge+3]*16777216},s.prototype.readUInt32BE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,4,this.length),this[ge]*16777216+(this[ge+1]<<16|this[ge+2]<<8|this[ge+3])},s.prototype.readIntLE=function(ge,xe,ye){ge=ge>>>0,xe=xe>>>0,ye||ae(ge,xe,this.length);for(var be=this[ge],Se=1,Re=0;++Re<xe&&(Se*=256);)be+=this[ge+Re]*Se;return Se*=128,be>=Se&&(be-=Math.pow(2,8*xe)),be},s.prototype.readIntBE=function(ge,xe,ye){ge=ge>>>0,xe=xe>>>0,ye||ae(ge,xe,this.length);for(var be=xe,Se=1,Re=this[ge+--be];be>0&&(Se*=256);)Re+=this[ge+--be]*Se;return Se*=128,Re>=Se&&(Re-=Math.pow(2,8*xe)),Re},s.prototype.readInt8=function(ge,xe){return ge=ge>>>0,xe||ae(ge,1,this.length),this[ge]&128?(255-this[ge]+1)*-1:this[ge]},s.prototype.readInt16LE=function(ge,xe){ge=ge>>>0,xe||ae(ge,2,this.length);var ye=this[ge]|this[ge+1]<<8;return ye&32768?ye|4294901760:ye},s.prototype.readInt16BE=function(ge,xe){ge=ge>>>0,xe||ae(ge,2,this.length);var ye=this[ge+1]|this[ge]<<8;return ye&32768?ye|4294901760:ye},s.prototype.readInt32LE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,4,this.length),this[ge]|this[ge+1]<<8|this[ge+2]<<16|this[ge+3]<<24},s.prototype.readInt32BE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,4,this.length),this[ge]<<24|this[ge+1]<<16|this[ge+2]<<8|this[ge+3]},s.prototype.readFloatLE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,4,this.length),i.read(this,ge,!0,23,4)},s.prototype.readFloatBE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,4,this.length),i.read(this,ge,!1,23,4)},s.prototype.readDoubleLE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,8,this.length),i.read(this,ge,!0,52,8)},s.prototype.readDoubleBE=function(ge,xe){return ge=ge>>>0,xe||ae(ge,8,this.length),i.read(this,ge,!1,52,8)};function fe(ue,ge,xe,ye,be,Se){if(!s.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(ge>be||ge<Se)throw new RangeError('"value" argument is out of bounds');if(xe+ye>ue.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(ge,xe,ye,be){if(ge=+ge,xe=xe>>>0,ye=ye>>>0,!be){var Se=Math.pow(2,8*ye)-1;fe(this,ge,xe,ye,Se,0)}var Re=1,Ve=0;for(this[xe]=ge&255;++Ve<ye&&(Re*=256);)this[xe+Ve]=ge/Re&255;return xe+ye},s.prototype.writeUIntBE=function(ge,xe,ye,be){if(ge=+ge,xe=xe>>>0,ye=ye>>>0,!be){var Se=Math.pow(2,8*ye)-1;fe(this,ge,xe,ye,Se,0)}var Re=ye-1,Ve=1;for(this[xe+Re]=ge&255;--Re>=0&&(Ve*=256);)this[xe+Re]=ge/Ve&255;return xe+ye},s.prototype.writeUInt8=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,1,255,0),this[xe]=ge&255,xe+1},s.prototype.writeUInt16LE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,2,65535,0),this[xe]=ge&255,this[xe+1]=ge>>>8,xe+2},s.prototype.writeUInt16BE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,2,65535,0),this[xe]=ge>>>8,this[xe+1]=ge&255,xe+2},s.prototype.writeUInt32LE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,4,4294967295,0),this[xe+3]=ge>>>24,this[xe+2]=ge>>>16,this[xe+1]=ge>>>8,this[xe]=ge&255,xe+4},s.prototype.writeUInt32BE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,4,4294967295,0),this[xe]=ge>>>24,this[xe+1]=ge>>>16,this[xe+2]=ge>>>8,this[xe+3]=ge&255,xe+4},s.prototype.writeIntLE=function(ge,xe,ye,be){if(ge=+ge,xe=xe>>>0,!be){var Se=Math.pow(2,8*ye-1);fe(this,ge,xe,ye,Se-1,-Se)}var Re=0,Ve=1,Ae=0;for(this[xe]=ge&255;++Re<ye&&(Ve*=256);)ge<0&&Ae===0&&this[xe+Re-1]!==0&&(Ae=1),this[xe+Re]=(ge/Ve>>0)-Ae&255;return xe+ye},s.prototype.writeIntBE=function(ge,xe,ye,be){if(ge=+ge,xe=xe>>>0,!be){var Se=Math.pow(2,8*ye-1);fe(this,ge,xe,ye,Se-1,-Se)}var Re=ye-1,Ve=1,Ae=0;for(this[xe+Re]=ge&255;--Re>=0&&(Ve*=256);)ge<0&&Ae===0&&this[xe+Re+1]!==0&&(Ae=1),this[xe+Re]=(ge/Ve>>0)-Ae&255;return xe+ye},s.prototype.writeInt8=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,1,127,-128),ge<0&&(ge=255+ge+1),this[xe]=ge&255,xe+1},s.prototype.writeInt16LE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,2,32767,-32768),this[xe]=ge&255,this[xe+1]=ge>>>8,xe+2},s.prototype.writeInt16BE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,2,32767,-32768),this[xe]=ge>>>8,this[xe+1]=ge&255,xe+2},s.prototype.writeInt32LE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,4,2147483647,-2147483648),this[xe]=ge&255,this[xe+1]=ge>>>8,this[xe+2]=ge>>>16,this[xe+3]=ge>>>24,xe+4},s.prototype.writeInt32BE=function(ge,xe,ye){return ge=+ge,xe=xe>>>0,ye||fe(this,ge,xe,4,2147483647,-2147483648),ge<0&&(ge=4294967295+ge+1),this[xe]=ge>>>24,this[xe+1]=ge>>>16,this[xe+2]=ge>>>8,this[xe+3]=ge&255,xe+4};function K(ue,ge,xe,ye,be,Se){if(xe+ye>ue.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function J(ue,ge,xe,ye,be){return ge=+ge,xe=xe>>>0,be||K(ue,ge,xe,4),i.write(ue,ge,xe,ye,23,4),xe+4}s.prototype.writeFloatLE=function(ge,xe,ye){return J(this,ge,xe,!0,ye)},s.prototype.writeFloatBE=function(ge,xe,ye){return J(this,ge,xe,!1,ye)};function U(ue,ge,xe,ye,be){return ge=+ge,xe=xe>>>0,be||K(ue,ge,xe,8),i.write(ue,ge,xe,ye,52,8),xe+8}s.prototype.writeDoubleLE=function(ge,xe,ye){return U(this,ge,xe,!0,ye)},s.prototype.writeDoubleBE=function(ge,xe,ye){return U(this,ge,xe,!1,ye)},s.prototype.copy=function(ge,xe,ye,be){if(!s.isBuffer(ge))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!be&&be!==0&&(be=this.length),xe>=ge.length&&(xe=ge.length),xe||(xe=0),be>0&&be<ye&&(be=ye),be===ye||ge.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),ge.length-xe<be-ye&&(be=ge.length-xe+ye);var Se=be-ye;if(this===ge&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,ye,be);else if(this===ge&&ye<xe&&xe<be)for(var Re=Se-1;Re>=0;--Re)ge[Re+xe]=this[Re+ye];else Uint8Array.prototype.set.call(ge,this.subarray(ye,be),xe);return Se},s.prototype.fill=function(ge,xe,ye,be){if(typeof ge=="string"){if(typeof xe=="string"?(be=xe,xe=0,ye=this.length):typeof ye=="string"&&(be=ye,ye=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!s.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(ge.length===1){var Se=ge.charCodeAt(0);(be==="utf8"&&Se<128||be==="latin1")&&(ge=Se)}}else typeof ge=="number"&&(ge=ge&255);if(xe<0||this.length<xe||this.length<ye)throw new RangeError("Out of range index");if(ye<=xe)return this;xe=xe>>>0,ye=ye===void 0?this.length:ye>>>0,ge||(ge=0);var Re;if(typeof ge=="number")for(Re=xe;Re<ye;++Re)this[Re]=ge;else{var Ve=s.isBuffer(ge)?ge:s.from(ge,be),Ae=Ve.length;if(Ae===0)throw new TypeError('The value "'+ge+'" is invalid for argument "value"');for(Re=0;Re<ye-xe;++Re)this[Re+xe]=Ve[Re%Ae]}return this};var V=/[^+/0-9A-Za-z-_]/g;function q(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(V,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function re(ue){return ue<16?"0"+ue.toString(16):ue.toString(16)}function Z(ue,ge){ge=ge||1/0;for(var xe,ye=ue.length,be=null,Se=[],Re=0;Re<ye;++Re){if(xe=ue.charCodeAt(Re),xe>55295&&xe<57344){if(!be){if(xe>56319){(ge-=3)>-1&&Se.push(239,191,189);continue}else if(Re+1===ye){(ge-=3)>-1&&Se.push(239,191,189);continue}be=xe;continue}if(xe<56320){(ge-=3)>-1&&Se.push(239,191,189),be=xe;continue}xe=(be-55296<<10|xe-56320)+65536}else be&&(ge-=3)>-1&&Se.push(239,191,189);if(be=null,xe<128){if((ge-=1)<0)break;Se.push(xe)}else if(xe<2048){if((ge-=2)<0)break;Se.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((ge-=3)<0)break;Se.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((ge-=4)<0)break;Se.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return Se}function Q(ue){for(var ge=[],xe=0;xe<ue.length;++xe)ge.push(ue.charCodeAt(xe)&255);return ge}function ie(ue,ge){for(var xe,ye,be,Se=[],Re=0;Re<ue.length&&!((ge-=2)<0);++Re)xe=ue.charCodeAt(Re),ye=xe>>8,be=xe%256,Se.push(be),Se.push(ye);return Se}function oe(ue){return a.toByteArray(q(ue))}function ne(ue,ge,xe,ye){for(var be=0;be<ye&&!(be+xe>=ge.length||be>=ue.length);++be)ge[be+xe]=ue[be];return be}function se(ue,ge){return ue instanceof ge||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===ge.name}function _e(ue){return ue!==ue}}).call(this)}).call(this,f("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(f,M,T){T.read=function(e,a,i,n,r){var v,s,o=r*8-n-1,b=(1<<o)-1,g=b>>1,d=-7,c=i?r-1:0,m=i?-1:1,l=e[a+c];for(c+=m,v=l&(1<<-d)-1,l>>=-d,d+=o;d>0;v=v*256+e[a+c],c+=m,d-=8);for(s=v&(1<<-d)-1,v>>=-d,d+=n;d>0;s=s*256+e[a+c],c+=m,d-=8);if(v===0)v=1-g;else{if(v===b)return s?NaN:(l?-1:1)*(1/0);s=s+Math.pow(2,n),v=v-g}return(l?-1:1)*s*Math.pow(2,v-n)},T.write=function(e,a,i,n,r,v){var s,o,b,g=v*8-r-1,d=(1<<g)-1,c=d>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:v-1,y=n?1:-1,u=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,s=d):(s=Math.floor(Math.log(a)/Math.LN2),a*(b=Math.pow(2,-s))<1&&(s--,b*=2),s+c>=1?a+=m/b:a+=m*Math.pow(2,1-c),a*b>=2&&(s++,b/=2),s+c>=d?(o=0,s=d):s+c>=1?(o=(a*b-1)*Math.pow(2,r),s=s+c):(o=a*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;e[i+l]=o&255,l+=y,o/=256,r-=8);for(s=s<<r|o,g+=r;g>0;e[i+l]=s&255,l+=y,s/=256,g-=8);e[i+l-y]|=u*128}},{}],5:[function(f,M,T){var e=M.exports={},a,i;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=r}catch{i=r}})();function v(u){if(a===setTimeout)return setTimeout(u,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(u,0);try{return a(u,0)}catch{try{return a.call(null,u,0)}catch{return a.call(this,u,0)}}}function s(u){if(i===clearTimeout)return clearTimeout(u);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(u);try{return i(u)}catch{try{return i.call(null,u)}catch{return i.call(this,u)}}}var o=[],b=!1,g,d=-1;function c(){!b||!g||(b=!1,g.length?o=g.concat(o):d=-1,o.length&&m())}function m(){if(!b){var u=v(c);b=!0;for(var A=o.length;A;){for(g=o,o=[];++d<A;)g&&g[d].run();d=-1,A=o.length}g=null,b=!1,s(u)}}e.nextTick=function(u){var A=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)A[_-1]=arguments[_];o.push(new l(u,A)),o.length===1&&!b&&v(m)};function l(u,A){this.fun=u,this.array=A}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function y(){}e.on=y,e.addListener=y,e.once=y,e.off=y,e.removeListener=y,e.removeAllListeners=y,e.emit=y,e.prependListener=y,e.prependOnceListener=y,e.listeners=function(u){return[]},e.binding=function(u){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(u){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(f,M,T){M.exports={alpha_shape:f("alpha-shape"),convex_hull:f("convex-hull"),delaunay_triangulate:f("delaunay-triangulate"),gl_cone3d:f("gl-cone3d"),gl_error3d:f("gl-error3d"),gl_heatmap2d:f("gl-heatmap2d"),gl_line3d:f("gl-line3d"),gl_mesh3d:f("gl-mesh3d"),gl_plot2d:f("gl-plot2d"),gl_plot3d:f("gl-plot3d"),gl_pointcloud2d:f("gl-pointcloud2d"),gl_scatter3d:f("gl-scatter3d"),gl_select_box:f("gl-select-box"),gl_spikes2d:f("gl-spikes2d"),gl_streamtube3d:f("gl-streamtube3d"),gl_surface3d:f("gl-surface3d"),ndarray:f("ndarray"),ndarray_linear_interpolate:f("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(f,M,T){M.exports=v;var e=f("turntable-camera-controller"),a=f("orbit-camera-controller"),i=f("matrix-camera-controller");function n(s,o){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(b){return s[b]}),this._mode=o,this._active=s[o],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=n.prototype;r.flush=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].flush(s)},r.idle=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].idle(s)},r.lookAt=function(s,o,b,g){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].lookAt(s,o,b,g)},r.rotate=function(s,o,b,g){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].rotate(s,o,b,g)},r.pan=function(s,o,b,g){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].pan(s,o,b,g)},r.translate=function(s,o,b,g){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].translate(s,o,b,g)},r.setMatrix=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setMatrix(s,o)},r.setDistanceLimits=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistanceLimits(s,o)},r.setDistance=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistance(s,o)},r.recalcMatrix=function(s){this._active.recalcMatrix(s)},r.getDistance=function(s){return this._active.getDistance(s)},r.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},r.lastT=function(){return this._active.lastT()},r.setMode=function(s){if(s!==this._mode){var o=this._controllerNames.indexOf(s);if(!(o<0)){var b=this._active,g=this._controllerList[o],d=Math.max(b.lastT(),g.lastT());b.recalcMatrix(d),g.setMatrix(d,b.computedMatrix),this._active=g,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function v(s){s=s||{};var o=s.eye||[0,0,1],b=s.center||[0,0,0],g=s.up||[0,1,0],d=s.distanceLimits||[0,1/0],c=s.mode||"turntable",m=e(),l=a(),y=i();return m.setDistanceLimits(d[0],d[1]),m.lookAt(0,o,b,g),l.setDistanceLimits(d[0],d[1]),l.lookAt(0,o,b,g),y.setDistanceLimits(d[0],d[1]),y.lookAt(0,o,b,g),new n({turntable:m,orbit:l,matrix:y},c)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(f,M,T){var e=typeof WeakMap>"u"?f("weak-map"):WeakMap,a=f("gl-buffer"),i=f("gl-vao"),n=new e;function r(v){var s=n.get(v),o=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!o||!v.isBuffer(o)){var b=a(v,new Float32Array([-1,-1,-1,4,4,-1]));s=i(v,[{buffer:b,type:v.FLOAT,size:2}]),s._triangleBuffer=b,n.set(v,s)}s.bind(),v.drawArrays(v.TRIANGLES,0,3),s.unbind()}M.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(f,M,T){var e=f("pad-left");M.exports=a;function a(i,n,r){n=typeof n=="number"?n:1,r=r||": ";var v=i.split(/\r?\n/),s=String(v.length+n-1).length;return v.map(function(o,b){var g=b+n,d=String(g).length,c=e(g,s-d);return c+r+o}).join(`
`)}},{"pad-left":264}],10:[function(f,M,T){M.exports=i;var e=f("robust-orientation");function a(n,r){for(var v=new Array(r+1),s=0;s<n.length;++s)v[s]=n[s];for(var s=0;s<=n.length;++s){for(var o=n.length;o<=r;++o){for(var b=new Array(r),g=0;g<r;++g)b[g]=Math.pow(o+1-s,g);v[o]=b}var d=e.apply(void 0,v);if(d)return!0}return!1}function i(n){var r=n.length;if(r===0)return[];if(r===1)return[0];for(var v=n[0].length,s=[n[0]],o=[0],b=1;b<r;++b){if(s.push(n[b]),!a(s,v)){s.pop();continue}if(o.push(b),o.length===v+1)return o}return o}},{"robust-orientation":284}],11:[function(f,M,T){M.exports=i;var e=f("delaunay-triangulate"),a=f("circumradius");function i(n,r){return e(r).filter(function(v){for(var s=new Array(v.length),o=0;o<v.length;++o)s[o]=r[v[o]];return a(s)*n<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(f,M,T){M.exports=i;var e=f("alpha-complex"),a=f("simplicial-complex-boundary");function i(n,r){return a(e(n,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(f,M,T){M.exports=function(a){return atob(a)}},{}],14:[function(f,M,T){M.exports=i;var e=f("robust-linear-solve");function a(n){for(var r=0,v=0;v<n.length;++v)r+=n[v];return r}function i(n,r){for(var v=r.length,s=new Array(v+1),o=0;o<v;++o){for(var b=new Array(v+1),g=0;g<=v;++g)b[g]=n[g][o];s[o]=b}s[v]=new Array(v+1);for(var o=0;o<=v;++o)s[v][o]=1;for(var d=new Array(v+1),o=0;o<v;++o)d[o]=r[o];d[v]=1;var c=e(s,d),m=a(c[v+1]);m===0&&(m=1);for(var l=new Array(v+1),o=0;o<=v;++o)l[o]=a(c[o])/m;return l}},{"robust-linear-solve":283}],15:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(i,n){return e(i[0].mul(n[1]).add(n[0].mul(i[1])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(f,M,T){M.exports=e;function e(a,i){return a[0].mul(i[1]).cmp(i[0].mul(a[1]))}},{}],17:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(i,n){return e(i[0].mul(n[1]),i[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(f,M,T){var e=f("./is-rat"),a=f("./lib/is-bn"),i=f("./lib/num-to-bn"),n=f("./lib/str-to-bn"),r=f("./lib/rationalize"),v=f("./div");M.exports=s;function s(o,b){if(e(o))return b?v(o,s(b)):[o[0].clone(),o[1].clone()];var g=0,d,c;if(a(o))d=o.clone();else if(typeof o=="string")d=n(o);else{if(o===0)return[i(0),i(1)];if(o===Math.floor(o))d=i(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),g-=256;d=i(o)}}if(e(b))d.mul(b[1]),c=b[0].clone();else if(a(b))c=b.clone();else if(typeof b=="string")c=n(b);else if(!b)c=i(1);else if(b===Math.floor(b))c=i(b);else{for(;b!==Math.floor(b);)b=b*Math.pow(2,256),g+=256;c=i(b)}return g>0?d=d.ushln(g):g<0&&(c=c.ushln(-g)),r(d,c)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(f,M,T){var e=f("./lib/is-bn");M.exports=a;function a(i){return Array.isArray(i)&&i.length===2&&e(i[0])&&e(i[1])}},{"./lib/is-bn":23}],20:[function(f,M,T){var e=f("bn.js");M.exports=a;function a(i){return i.cmp(new e(0))}},{"bn.js":33}],21:[function(f,M,T){var e=f("./bn-sign");M.exports=a;function a(i){var n=i.length,r=i.words,v=0;if(n===1)v=r[0];else if(n===2)v=r[0]+r[1]*67108864;else for(var s=0;s<n;s++){var o=r[s];v+=o*Math.pow(67108864,s)}return e(i)*v}},{"./bn-sign":20}],22:[function(f,M,T){var e=f("double-bits"),a=f("bit-twiddle").countTrailingZeros;M.exports=i;function i(n){var r=a(e.lo(n));if(r<32)return r;var v=a(e.hi(n));return v>20?52:v+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(f,M,T){f("bn.js"),M.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(f,M,T){var e=f("bn.js"),a=f("double-bits");M.exports=i;function i(n){var r=a.exponent(n);return r<52?new e(n):new e(n*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(f,M,T){var e=f("./num-to-bn"),a=f("./bn-sign");M.exports=i;function i(n,r){var v=a(n),s=a(r);if(v===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(n=n.neg(),r=r.neg());var o=n.gcd(r);return o.cmpn(1)?[n.div(o),r.div(o)]:[n,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(f,M,T){var e=f("bn.js");M.exports=a;function a(i){return new e(i)}},{"bn.js":33}],27:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(i,n){return e(i[0].mul(n[0]),i[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(f,M,T){var e=f("./lib/bn-sign");M.exports=a;function a(i){return e(i[0])*e(i[1])}},{"./lib/bn-sign":20}],29:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(i,n){return e(i[0].mul(n[1]).sub(i[1].mul(n[0])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(f,M,T){var e=f("./lib/bn-to-num"),a=f("./lib/ctz");M.exports=i;function i(n){var r=n[0],v=n[1];if(r.cmpn(0)===0)return 0;var s=r.abs().divmod(v.abs()),o=s.div,b=e(o),g=s.mod,d=r.negative!==v.negative?-1:1;if(g.cmpn(0)===0)return d*b;if(b){var c=a(b)+4,m=e(g.ushln(c).divRound(v));return d*(b+m*Math.pow(2,-c))}else{var l=v.bitLength()-g.bitLength()+53,m=e(g.ushln(l).divRound(v));return l<1023?d*m*Math.pow(2,-l):(m*=Math.pow(2,-1023),d*m*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(f,M,T){function e(s,o,b,g,d){for(var c=d+1;g<=d;){var m=g+d>>>1,l=s[m],y=b!==void 0?b(l,o):l-o;y>=0?(c=m,d=m-1):g=m+1}return c}function a(s,o,b,g,d){for(var c=d+1;g<=d;){var m=g+d>>>1,l=s[m],y=b!==void 0?b(l,o):l-o;y>0?(c=m,d=m-1):g=m+1}return c}function i(s,o,b,g,d){for(var c=g-1;g<=d;){var m=g+d>>>1,l=s[m],y=b!==void 0?b(l,o):l-o;y<0?(c=m,g=m+1):d=m-1}return c}function n(s,o,b,g,d){for(var c=g-1;g<=d;){var m=g+d>>>1,l=s[m],y=b!==void 0?b(l,o):l-o;y<=0?(c=m,g=m+1):d=m-1}return c}function r(s,o,b,g,d){for(;g<=d;){var c=g+d>>>1,m=s[c],l=b!==void 0?b(m,o):m-o;if(l===0)return c;l<=0?g=c+1:d=c-1}return-1}function v(s,o,b,g,d,c){return typeof b=="function"?c(s,o,b,g===void 0?0:g|0,d===void 0?s.length-1:d|0):c(s,o,void 0,b===void 0?0:b|0,g===void 0?s.length-1:g|0)}M.exports={ge:function(s,o,b,g,d){return v(s,o,b,g,d,e)},gt:function(s,o,b,g,d){return v(s,o,b,g,d,a)},lt:function(s,o,b,g,d){return v(s,o,b,g,d,i)},le:function(s,o,b,g,d){return v(s,o,b,g,d,n)},eq:function(s,o,b,g,d){return v(s,o,b,g,d,r)}}},{}],32:[function(f,M,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(n){return(n>0)-(n<0)},T.abs=function(n){var r=n>>e-1;return(n^r)-r},T.min=function(n,r){return r^(n^r)&-(n<r)},T.max=function(n,r){return n^(n^r)&-(n<r)},T.isPow2=function(n){return!(n&n-1)&&!!n},T.log2=function(n){var r,v;return r=(n>65535)<<4,n>>>=r,v=(n>255)<<3,n>>>=v,r|=v,v=(n>15)<<2,n>>>=v,r|=v,v=(n>3)<<1,n>>>=v,r|=v,r|n>>1},T.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},T.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function a(n){var r=32;return n&=-n,n&&r--,n&65535&&(r-=16),n&16711935&&(r-=8),n&252645135&&(r-=4),n&858993459&&(r-=2),n&1431655765&&(r-=1),r}T.countTrailingZeros=a,T.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},T.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},T.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var v=r,s=r,o=7;for(v>>>=1;v;v>>>=1)s<<=1,s|=v&1,--o;n[r]=s<<o&255}})(i),T.reverse=function(n){return i[n&255]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},T.interleave2=function(n,r){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1},T.deinterleave2=function(n,r){return n=n>>>r&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},T.interleave3=function(n,r,v){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n|=r<<1,v&=1023,v=(v|v<<16)&4278190335,v=(v|v<<8)&251719695,v=(v|v<<4)&3272356035,v=(v|v<<2)&1227133513,n|v<<2},T.deinterleave3=function(n,r){return n=n>>>r&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},T.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>a(n)+1}},{}],33:[function(f,M,T){(function(e,a){function i(I,D){if(!I)throw new Error(D||"Assertion failed")}function n(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function r(I,D,R){if(r.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=r:a.BN=r,r.BN=r,r.wordSize=26;var v;try{typeof window<"u"&&typeof window.Buffer<"u"?v=window.Buffer:v=f("buffer").Buffer}catch{}r.isBN=function(D){return D instanceof r?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===r.wordSize&&Array.isArray(D.words)},r.max=function(D,R){return D.cmp(R)>0?D:R},r.min=function(D,R){return D.cmp(R)<0?D:R},r.prototype._init=function(D,R,O){if(typeof D=="number")return this._initNumber(D,R,O);if(typeof D=="object")return this._initArray(D,R,O);R==="hex"&&(R=16),i(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var z=0;D[0]==="-"&&(z++,this.negative=1),z<D.length&&(R===16?this._parseHex(D,z,O):(this._parseBase(D,R,z),O==="le"&&this._initArray(this.toArray(),R,O)))},r.prototype._initNumber=function(D,R,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(i(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},r.prototype._initArray=function(D,R,O){if(i(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var H,Y,ee=0;if(O==="be")for(z=D.length-1,H=0;z>=0;z-=3)Y=D[z]|D[z-1]<<8|D[z-2]<<16,this.words[H]|=Y<<ee&67108863,this.words[H+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,H++);else if(O==="le")for(z=0,H=0;z<D.length;z+=3)Y=D[z]|D[z+1]<<8|D[z+2]<<16,this.words[H]|=Y<<ee&67108863,this.words[H+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,H++);return this.strip()};function s(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function o(I,D,R){var O=s(I,R);return R-1>=D&&(O|=s(I,R-1)<<4),O}r.prototype._parseHex=function(D,R,O){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var H=0,Y=0,ee;if(O==="be")for(z=D.length-1;z>=R;z-=2)ee=o(D,R,z)<<H,this.words[Y]|=ee&67108863,H>=18?(H-=18,Y+=1,this.words[Y]|=ee>>>26):H+=8;else{var j=D.length-R;for(z=j%2===0?R+1:R;z<D.length;z+=2)ee=o(D,R,z)<<H,this.words[Y]|=ee&67108863,H>=18?(H-=18,Y+=1,this.words[Y]|=ee>>>26):H+=8}this.strip()};function b(I,D,R,O){for(var z=0,H=Math.min(I.length,R),Y=D;Y<H;Y++){var ee=I.charCodeAt(Y)-48;z*=O,ee>=49?z+=ee-49+10:ee>=17?z+=ee-17+10:z+=ee}return z}r.prototype._parseBase=function(D,R,O){this.words=[0],this.length=1;for(var z=0,H=1;H<=67108863;H*=R)z++;z--,H=H/R|0;for(var Y=D.length-O,ee=Y%z,j=Math.min(Y,Y-ee)+O,X=0,ae=O;ae<j;ae+=z)X=b(D,ae,ae+z,R),this.imuln(H),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(ee!==0){var fe=1;for(X=b(D,ae,D.length,R),ae=0;ae<ee;ae++)fe*=R;this.imuln(fe),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},r.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},r.prototype.clone=function(){var D=new r(null);return this.copy(D),D},r.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(D,R){D=D||10,R=R|0||1;var O;if(D===16||D==="hex"){O="";for(var z=0,H=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],j=((ee<<z|H)&16777215).toString(16);H=ee>>>24-z&16777215,H!==0||Y!==this.length-1?O=g[6-j.length]+j+O:O=j+O,z+=2,z>=26&&(z-=26,Y--)}for(H!==0&&(O=H.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(D===(D|0)&&D>=2&&D<=36){var X=d[D],ae=c[D];O="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var K=fe.modn(ae).toString(D);fe=fe.idivn(ae),fe.isZero()?O=K+O:O=g[X-K.length]+K+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(D,R){return i(typeof v<"u"),this.toArrayLike(v,D,R)},r.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},r.prototype.toArrayLike=function(D,R,O){var z=this.byteLength(),H=O||Math.max(1,z);i(z<=H,"byte array longer than desired length"),i(H>0,"Requested array length <= 0"),this.strip();var Y=R==="le",ee=new D(H),j,X,ae=this.clone();if(Y){for(X=0;!ae.isZero();X++)j=ae.andln(255),ae.iushrn(8),ee[X]=j;for(;X<H;X++)ee[X]=0}else{for(X=0;X<H-z;X++)ee[X]=0;for(X=0;!ae.isZero();X++)j=ae.andln(255),ae.iushrn(8),ee[H-X-1]=j}return ee},Math.clz32?r.prototype._countBits=function(D){return 32-Math.clz32(D)}:r.prototype._countBits=function(D){var R=D,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},r.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,O=0;return(R&8191)===0&&(O+=13,R>>>=13),(R&127)===0&&(O+=7,R>>>=7),(R&15)===0&&(O+=4,R>>>=4),(R&3)===0&&(O+=2,R>>>=2),(R&1)===0&&O++,O},r.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function m(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var O=R/26|0,z=R%26;D[R]=(I.words[O]&1<<z)>>>z}return D}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(D+=O,O!==26)break}return D},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},r.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},r.prototype.ior=function(D){return i((this.negative|D.negative)===0),this.iuor(D)},r.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},r.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},r.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=R.length,this.strip()},r.prototype.iand=function(D){return i((this.negative|D.negative)===0),this.iuand(D)},r.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},r.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},r.prototype.iuxor=function(D){var R,O;this.length>D.length?(R=this,O=D):(R=D,O=this);for(var z=0;z<O.length;z++)this.words[z]=R.words[z]^O.words[z];if(this!==R)for(;z<R.length;z++)this.words[z]=R.words[z];return this.length=R.length,this.strip()},r.prototype.ixor=function(D){return i((this.negative|D.negative)===0),this.iuxor(D)},r.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},r.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},r.prototype.inotn=function(D){i(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,O=D%26;this._expand(R),O>0&&R--;for(var z=0;z<R;z++)this.words[z]=~this.words[z]&67108863;return O>0&&(this.words[z]=~this.words[z]&67108863>>26-O),this.strip()},r.prototype.notn=function(D){return this.clone().inotn(D)},r.prototype.setn=function(D,R){i(typeof D=="number"&&D>=0);var O=D/26|0,z=D%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<z:this.words[O]=this.words[O]&~(1<<z),this.strip()},r.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var O,z;this.length>D.length?(O=this,z=D):(O=D,z=this);for(var H=0,Y=0;Y<z.length;Y++)R=(O.words[Y]|0)+(z.words[Y]|0)+H,this.words[Y]=R&67108863,H=R>>>26;for(;H!==0&&Y<O.length;Y++)R=(O.words[Y]|0)+H,this.words[Y]=R&67108863,H=R>>>26;if(this.length=O.length,H!==0)this.words[this.length]=H,this.length++;else if(O!==this)for(;Y<O.length;Y++)this.words[Y]=O.words[Y];return this},r.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},r.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var O=this.cmp(D);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,H;O>0?(z=this,H=D):(z=D,H=this);for(var Y=0,ee=0;ee<H.length;ee++)R=(z.words[ee]|0)-(H.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;for(;Y!==0&&ee<z.length;ee++)R=(z.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;if(Y===0&&ee<z.length&&z!==this)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=Math.max(this.length,ee),z!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var O=I.length+D.length|0;R.length=O,O=O-1|0;var z=I.words[0]|0,H=D.words[0]|0,Y=z*H,ee=Y&67108863,j=Y/67108864|0;R.words[0]=ee;for(var X=1;X<O;X++){for(var ae=j>>>26,fe=j&67108863,K=Math.min(X,D.length-1),J=Math.max(0,X-I.length+1);J<=K;J++){var U=X-J|0;z=I.words[U]|0,H=D.words[J]|0,Y=z*H+fe,ae+=Y/67108864|0,fe=Y&67108863}R.words[X]=fe|0,j=ae|0}return j!==0?R.words[X]=j|0:R.length--,R.strip()}var y=function(D,R,O){var z=D.words,H=R.words,Y=O.words,ee=0,j,X,ae,fe=z[0]|0,K=fe&8191,J=fe>>>13,U=z[1]|0,V=U&8191,q=U>>>13,re=z[2]|0,Z=re&8191,Q=re>>>13,ie=z[3]|0,oe=ie&8191,ne=ie>>>13,se=z[4]|0,_e=se&8191,ue=se>>>13,ge=z[5]|0,xe=ge&8191,ye=ge>>>13,be=z[6]|0,Se=be&8191,Re=be>>>13,Ve=z[7]|0,Ae=Ve&8191,Ce=Ve>>>13,Ze=z[8]|0,Ye=Ze&8191,ze=Ze>>>13,Ie=z[9]|0,Ge=Ie&8191,dt=Ie>>>13,Rt=H[0]|0,Qt=Rt&8191,Bt=Rt>>>13,Ct=H[1]|0,Kt=Ct&8191,Ot=Ct>>>13,St=H[2]|0,Xe=St&8191,at=St>>>13,We=H[3]|0,Ee=We&8191,He=We>>>13,Ke=H[4]|0,et=Ke&8191,At=Ke>>>13,mt=H[5]|0,Mt=mt&8191,Gt=mt>>>13,zt=H[6]|0,Ht=zt&8191,Xt=zt>>>13,Wt=H[7]|0,sr=Wt&8191,Gr=Wt>>>13,cn=H[8]|0,en=cn&8191,st=cn>>>13,rr=H[9]|0,er=rr&8191,jt=rr>>>13;O.negative=D.negative^R.negative,O.length=19,j=Math.imul(K,Qt),X=Math.imul(K,Bt),X=X+Math.imul(J,Qt)|0,ae=Math.imul(J,Bt);var Mr=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,j=Math.imul(V,Qt),X=Math.imul(V,Bt),X=X+Math.imul(q,Qt)|0,ae=Math.imul(q,Bt),j=j+Math.imul(K,Kt)|0,X=X+Math.imul(K,Ot)|0,X=X+Math.imul(J,Kt)|0,ae=ae+Math.imul(J,Ot)|0;var it=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(it>>>26)|0,it&=67108863,j=Math.imul(Z,Qt),X=Math.imul(Z,Bt),X=X+Math.imul(Q,Qt)|0,ae=Math.imul(Q,Bt),j=j+Math.imul(V,Kt)|0,X=X+Math.imul(V,Ot)|0,X=X+Math.imul(q,Kt)|0,ae=ae+Math.imul(q,Ot)|0,j=j+Math.imul(K,Xe)|0,X=X+Math.imul(K,at)|0,X=X+Math.imul(J,Xe)|0,ae=ae+Math.imul(J,at)|0;var Qe=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,j=Math.imul(oe,Qt),X=Math.imul(oe,Bt),X=X+Math.imul(ne,Qt)|0,ae=Math.imul(ne,Bt),j=j+Math.imul(Z,Kt)|0,X=X+Math.imul(Z,Ot)|0,X=X+Math.imul(Q,Kt)|0,ae=ae+Math.imul(Q,Ot)|0,j=j+Math.imul(V,Xe)|0,X=X+Math.imul(V,at)|0,X=X+Math.imul(q,Xe)|0,ae=ae+Math.imul(q,at)|0,j=j+Math.imul(K,Ee)|0,X=X+Math.imul(K,He)|0,X=X+Math.imul(J,Ee)|0,ae=ae+Math.imul(J,He)|0;var ft=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ft>>>26)|0,ft&=67108863,j=Math.imul(_e,Qt),X=Math.imul(_e,Bt),X=X+Math.imul(ue,Qt)|0,ae=Math.imul(ue,Bt),j=j+Math.imul(oe,Kt)|0,X=X+Math.imul(oe,Ot)|0,X=X+Math.imul(ne,Kt)|0,ae=ae+Math.imul(ne,Ot)|0,j=j+Math.imul(Z,Xe)|0,X=X+Math.imul(Z,at)|0,X=X+Math.imul(Q,Xe)|0,ae=ae+Math.imul(Q,at)|0,j=j+Math.imul(V,Ee)|0,X=X+Math.imul(V,He)|0,X=X+Math.imul(q,Ee)|0,ae=ae+Math.imul(q,He)|0,j=j+Math.imul(K,et)|0,X=X+Math.imul(K,At)|0,X=X+Math.imul(J,et)|0,ae=ae+Math.imul(J,At)|0;var ct=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ct>>>26)|0,ct&=67108863,j=Math.imul(xe,Qt),X=Math.imul(xe,Bt),X=X+Math.imul(ye,Qt)|0,ae=Math.imul(ye,Bt),j=j+Math.imul(_e,Kt)|0,X=X+Math.imul(_e,Ot)|0,X=X+Math.imul(ue,Kt)|0,ae=ae+Math.imul(ue,Ot)|0,j=j+Math.imul(oe,Xe)|0,X=X+Math.imul(oe,at)|0,X=X+Math.imul(ne,Xe)|0,ae=ae+Math.imul(ne,at)|0,j=j+Math.imul(Z,Ee)|0,X=X+Math.imul(Z,He)|0,X=X+Math.imul(Q,Ee)|0,ae=ae+Math.imul(Q,He)|0,j=j+Math.imul(V,et)|0,X=X+Math.imul(V,At)|0,X=X+Math.imul(q,et)|0,ae=ae+Math.imul(q,At)|0,j=j+Math.imul(K,Mt)|0,X=X+Math.imul(K,Gt)|0,X=X+Math.imul(J,Mt)|0,ae=ae+Math.imul(J,Gt)|0;var Et=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Et>>>26)|0,Et&=67108863,j=Math.imul(Se,Qt),X=Math.imul(Se,Bt),X=X+Math.imul(Re,Qt)|0,ae=Math.imul(Re,Bt),j=j+Math.imul(xe,Kt)|0,X=X+Math.imul(xe,Ot)|0,X=X+Math.imul(ye,Kt)|0,ae=ae+Math.imul(ye,Ot)|0,j=j+Math.imul(_e,Xe)|0,X=X+Math.imul(_e,at)|0,X=X+Math.imul(ue,Xe)|0,ae=ae+Math.imul(ue,at)|0,j=j+Math.imul(oe,Ee)|0,X=X+Math.imul(oe,He)|0,X=X+Math.imul(ne,Ee)|0,ae=ae+Math.imul(ne,He)|0,j=j+Math.imul(Z,et)|0,X=X+Math.imul(Z,At)|0,X=X+Math.imul(Q,et)|0,ae=ae+Math.imul(Q,At)|0,j=j+Math.imul(V,Mt)|0,X=X+Math.imul(V,Gt)|0,X=X+Math.imul(q,Mt)|0,ae=ae+Math.imul(q,Gt)|0,j=j+Math.imul(K,Ht)|0,X=X+Math.imul(K,Xt)|0,X=X+Math.imul(J,Ht)|0,ae=ae+Math.imul(J,Xt)|0;var Nt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,j=Math.imul(Ae,Qt),X=Math.imul(Ae,Bt),X=X+Math.imul(Ce,Qt)|0,ae=Math.imul(Ce,Bt),j=j+Math.imul(Se,Kt)|0,X=X+Math.imul(Se,Ot)|0,X=X+Math.imul(Re,Kt)|0,ae=ae+Math.imul(Re,Ot)|0,j=j+Math.imul(xe,Xe)|0,X=X+Math.imul(xe,at)|0,X=X+Math.imul(ye,Xe)|0,ae=ae+Math.imul(ye,at)|0,j=j+Math.imul(_e,Ee)|0,X=X+Math.imul(_e,He)|0,X=X+Math.imul(ue,Ee)|0,ae=ae+Math.imul(ue,He)|0,j=j+Math.imul(oe,et)|0,X=X+Math.imul(oe,At)|0,X=X+Math.imul(ne,et)|0,ae=ae+Math.imul(ne,At)|0,j=j+Math.imul(Z,Mt)|0,X=X+Math.imul(Z,Gt)|0,X=X+Math.imul(Q,Mt)|0,ae=ae+Math.imul(Q,Gt)|0,j=j+Math.imul(V,Ht)|0,X=X+Math.imul(V,Xt)|0,X=X+Math.imul(q,Ht)|0,ae=ae+Math.imul(q,Xt)|0,j=j+Math.imul(K,sr)|0,X=X+Math.imul(K,Gr)|0,X=X+Math.imul(J,sr)|0,ae=ae+Math.imul(J,Gr)|0;var Pe=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,j=Math.imul(Ye,Qt),X=Math.imul(Ye,Bt),X=X+Math.imul(ze,Qt)|0,ae=Math.imul(ze,Bt),j=j+Math.imul(Ae,Kt)|0,X=X+Math.imul(Ae,Ot)|0,X=X+Math.imul(Ce,Kt)|0,ae=ae+Math.imul(Ce,Ot)|0,j=j+Math.imul(Se,Xe)|0,X=X+Math.imul(Se,at)|0,X=X+Math.imul(Re,Xe)|0,ae=ae+Math.imul(Re,at)|0,j=j+Math.imul(xe,Ee)|0,X=X+Math.imul(xe,He)|0,X=X+Math.imul(ye,Ee)|0,ae=ae+Math.imul(ye,He)|0,j=j+Math.imul(_e,et)|0,X=X+Math.imul(_e,At)|0,X=X+Math.imul(ue,et)|0,ae=ae+Math.imul(ue,At)|0,j=j+Math.imul(oe,Mt)|0,X=X+Math.imul(oe,Gt)|0,X=X+Math.imul(ne,Mt)|0,ae=ae+Math.imul(ne,Gt)|0,j=j+Math.imul(Z,Ht)|0,X=X+Math.imul(Z,Xt)|0,X=X+Math.imul(Q,Ht)|0,ae=ae+Math.imul(Q,Xt)|0,j=j+Math.imul(V,sr)|0,X=X+Math.imul(V,Gr)|0,X=X+Math.imul(q,sr)|0,ae=ae+Math.imul(q,Gr)|0,j=j+Math.imul(K,en)|0,X=X+Math.imul(K,st)|0,X=X+Math.imul(J,en)|0,ae=ae+Math.imul(J,st)|0;var Le=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Le>>>26)|0,Le&=67108863,j=Math.imul(Ge,Qt),X=Math.imul(Ge,Bt),X=X+Math.imul(dt,Qt)|0,ae=Math.imul(dt,Bt),j=j+Math.imul(Ye,Kt)|0,X=X+Math.imul(Ye,Ot)|0,X=X+Math.imul(ze,Kt)|0,ae=ae+Math.imul(ze,Ot)|0,j=j+Math.imul(Ae,Xe)|0,X=X+Math.imul(Ae,at)|0,X=X+Math.imul(Ce,Xe)|0,ae=ae+Math.imul(Ce,at)|0,j=j+Math.imul(Se,Ee)|0,X=X+Math.imul(Se,He)|0,X=X+Math.imul(Re,Ee)|0,ae=ae+Math.imul(Re,He)|0,j=j+Math.imul(xe,et)|0,X=X+Math.imul(xe,At)|0,X=X+Math.imul(ye,et)|0,ae=ae+Math.imul(ye,At)|0,j=j+Math.imul(_e,Mt)|0,X=X+Math.imul(_e,Gt)|0,X=X+Math.imul(ue,Mt)|0,ae=ae+Math.imul(ue,Gt)|0,j=j+Math.imul(oe,Ht)|0,X=X+Math.imul(oe,Xt)|0,X=X+Math.imul(ne,Ht)|0,ae=ae+Math.imul(ne,Xt)|0,j=j+Math.imul(Z,sr)|0,X=X+Math.imul(Z,Gr)|0,X=X+Math.imul(Q,sr)|0,ae=ae+Math.imul(Q,Gr)|0,j=j+Math.imul(V,en)|0,X=X+Math.imul(V,st)|0,X=X+Math.imul(q,en)|0,ae=ae+Math.imul(q,st)|0,j=j+Math.imul(K,er)|0,X=X+Math.imul(K,jt)|0,X=X+Math.imul(J,er)|0,ae=ae+Math.imul(J,jt)|0;var ot=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ot>>>26)|0,ot&=67108863,j=Math.imul(Ge,Kt),X=Math.imul(Ge,Ot),X=X+Math.imul(dt,Kt)|0,ae=Math.imul(dt,Ot),j=j+Math.imul(Ye,Xe)|0,X=X+Math.imul(Ye,at)|0,X=X+Math.imul(ze,Xe)|0,ae=ae+Math.imul(ze,at)|0,j=j+Math.imul(Ae,Ee)|0,X=X+Math.imul(Ae,He)|0,X=X+Math.imul(Ce,Ee)|0,ae=ae+Math.imul(Ce,He)|0,j=j+Math.imul(Se,et)|0,X=X+Math.imul(Se,At)|0,X=X+Math.imul(Re,et)|0,ae=ae+Math.imul(Re,At)|0,j=j+Math.imul(xe,Mt)|0,X=X+Math.imul(xe,Gt)|0,X=X+Math.imul(ye,Mt)|0,ae=ae+Math.imul(ye,Gt)|0,j=j+Math.imul(_e,Ht)|0,X=X+Math.imul(_e,Xt)|0,X=X+Math.imul(ue,Ht)|0,ae=ae+Math.imul(ue,Xt)|0,j=j+Math.imul(oe,sr)|0,X=X+Math.imul(oe,Gr)|0,X=X+Math.imul(ne,sr)|0,ae=ae+Math.imul(ne,Gr)|0,j=j+Math.imul(Z,en)|0,X=X+Math.imul(Z,st)|0,X=X+Math.imul(Q,en)|0,ae=ae+Math.imul(Q,st)|0,j=j+Math.imul(V,er)|0,X=X+Math.imul(V,jt)|0,X=X+Math.imul(q,er)|0,ae=ae+Math.imul(q,jt)|0;var ut=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ut>>>26)|0,ut&=67108863,j=Math.imul(Ge,Xe),X=Math.imul(Ge,at),X=X+Math.imul(dt,Xe)|0,ae=Math.imul(dt,at),j=j+Math.imul(Ye,Ee)|0,X=X+Math.imul(Ye,He)|0,X=X+Math.imul(ze,Ee)|0,ae=ae+Math.imul(ze,He)|0,j=j+Math.imul(Ae,et)|0,X=X+Math.imul(Ae,At)|0,X=X+Math.imul(Ce,et)|0,ae=ae+Math.imul(Ce,At)|0,j=j+Math.imul(Se,Mt)|0,X=X+Math.imul(Se,Gt)|0,X=X+Math.imul(Re,Mt)|0,ae=ae+Math.imul(Re,Gt)|0,j=j+Math.imul(xe,Ht)|0,X=X+Math.imul(xe,Xt)|0,X=X+Math.imul(ye,Ht)|0,ae=ae+Math.imul(ye,Xt)|0,j=j+Math.imul(_e,sr)|0,X=X+Math.imul(_e,Gr)|0,X=X+Math.imul(ue,sr)|0,ae=ae+Math.imul(ue,Gr)|0,j=j+Math.imul(oe,en)|0,X=X+Math.imul(oe,st)|0,X=X+Math.imul(ne,en)|0,ae=ae+Math.imul(ne,st)|0,j=j+Math.imul(Z,er)|0,X=X+Math.imul(Z,jt)|0,X=X+Math.imul(Q,er)|0,ae=ae+Math.imul(Q,jt)|0;var pt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(pt>>>26)|0,pt&=67108863,j=Math.imul(Ge,Ee),X=Math.imul(Ge,He),X=X+Math.imul(dt,Ee)|0,ae=Math.imul(dt,He),j=j+Math.imul(Ye,et)|0,X=X+Math.imul(Ye,At)|0,X=X+Math.imul(ze,et)|0,ae=ae+Math.imul(ze,At)|0,j=j+Math.imul(Ae,Mt)|0,X=X+Math.imul(Ae,Gt)|0,X=X+Math.imul(Ce,Mt)|0,ae=ae+Math.imul(Ce,Gt)|0,j=j+Math.imul(Se,Ht)|0,X=X+Math.imul(Se,Xt)|0,X=X+Math.imul(Re,Ht)|0,ae=ae+Math.imul(Re,Xt)|0,j=j+Math.imul(xe,sr)|0,X=X+Math.imul(xe,Gr)|0,X=X+Math.imul(ye,sr)|0,ae=ae+Math.imul(ye,Gr)|0,j=j+Math.imul(_e,en)|0,X=X+Math.imul(_e,st)|0,X=X+Math.imul(ue,en)|0,ae=ae+Math.imul(ue,st)|0,j=j+Math.imul(oe,er)|0,X=X+Math.imul(oe,jt)|0,X=X+Math.imul(ne,er)|0,ae=ae+Math.imul(ne,jt)|0;var Pt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,j=Math.imul(Ge,et),X=Math.imul(Ge,At),X=X+Math.imul(dt,et)|0,ae=Math.imul(dt,At),j=j+Math.imul(Ye,Mt)|0,X=X+Math.imul(Ye,Gt)|0,X=X+Math.imul(ze,Mt)|0,ae=ae+Math.imul(ze,Gt)|0,j=j+Math.imul(Ae,Ht)|0,X=X+Math.imul(Ae,Xt)|0,X=X+Math.imul(Ce,Ht)|0,ae=ae+Math.imul(Ce,Xt)|0,j=j+Math.imul(Se,sr)|0,X=X+Math.imul(Se,Gr)|0,X=X+Math.imul(Re,sr)|0,ae=ae+Math.imul(Re,Gr)|0,j=j+Math.imul(xe,en)|0,X=X+Math.imul(xe,st)|0,X=X+Math.imul(ye,en)|0,ae=ae+Math.imul(ye,st)|0,j=j+Math.imul(_e,er)|0,X=X+Math.imul(_e,jt)|0,X=X+Math.imul(ue,er)|0,ae=ae+Math.imul(ue,jt)|0;var xt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(xt>>>26)|0,xt&=67108863,j=Math.imul(Ge,Mt),X=Math.imul(Ge,Gt),X=X+Math.imul(dt,Mt)|0,ae=Math.imul(dt,Gt),j=j+Math.imul(Ye,Ht)|0,X=X+Math.imul(Ye,Xt)|0,X=X+Math.imul(ze,Ht)|0,ae=ae+Math.imul(ze,Xt)|0,j=j+Math.imul(Ae,sr)|0,X=X+Math.imul(Ae,Gr)|0,X=X+Math.imul(Ce,sr)|0,ae=ae+Math.imul(Ce,Gr)|0,j=j+Math.imul(Se,en)|0,X=X+Math.imul(Se,st)|0,X=X+Math.imul(Re,en)|0,ae=ae+Math.imul(Re,st)|0,j=j+Math.imul(xe,er)|0,X=X+Math.imul(xe,jt)|0,X=X+Math.imul(ye,er)|0,ae=ae+Math.imul(ye,jt)|0;var Lt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,j=Math.imul(Ge,Ht),X=Math.imul(Ge,Xt),X=X+Math.imul(dt,Ht)|0,ae=Math.imul(dt,Xt),j=j+Math.imul(Ye,sr)|0,X=X+Math.imul(Ye,Gr)|0,X=X+Math.imul(ze,sr)|0,ae=ae+Math.imul(ze,Gr)|0,j=j+Math.imul(Ae,en)|0,X=X+Math.imul(Ae,st)|0,X=X+Math.imul(Ce,en)|0,ae=ae+Math.imul(Ce,st)|0,j=j+Math.imul(Se,er)|0,X=X+Math.imul(Se,jt)|0,X=X+Math.imul(Re,er)|0,ae=ae+Math.imul(Re,jt)|0;var Zt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,j=Math.imul(Ge,sr),X=Math.imul(Ge,Gr),X=X+Math.imul(dt,sr)|0,ae=Math.imul(dt,Gr),j=j+Math.imul(Ye,en)|0,X=X+Math.imul(Ye,st)|0,X=X+Math.imul(ze,en)|0,ae=ae+Math.imul(ze,st)|0,j=j+Math.imul(Ae,er)|0,X=X+Math.imul(Ae,jt)|0,X=X+Math.imul(Ce,er)|0,ae=ae+Math.imul(Ce,jt)|0;var ur=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ur>>>26)|0,ur&=67108863,j=Math.imul(Ge,en),X=Math.imul(Ge,st),X=X+Math.imul(dt,en)|0,ae=Math.imul(dt,st),j=j+Math.imul(Ye,er)|0,X=X+Math.imul(Ye,jt)|0,X=X+Math.imul(ze,er)|0,ae=ae+Math.imul(ze,jt)|0;var Pr=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,j=Math.imul(Ge,er),X=Math.imul(Ge,jt),X=X+Math.imul(dt,er)|0,ae=Math.imul(dt,jt);var Ar=(ee+j|0)+((X&8191)<<13)|0;return ee=(ae+(X>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Y[0]=Mr,Y[1]=it,Y[2]=Qe,Y[3]=ft,Y[4]=ct,Y[5]=Et,Y[6]=Nt,Y[7]=Pe,Y[8]=Le,Y[9]=ot,Y[10]=ut,Y[11]=pt,Y[12]=Pt,Y[13]=xt,Y[14]=Lt,Y[15]=Zt,Y[16]=ur,Y[17]=Pr,Y[18]=Ar,ee!==0&&(Y[19]=ee,O.length++),O};Math.imul||(y=l);function u(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var O=0,z=0,H=0;H<R.length-1;H++){var Y=z;z=0;for(var ee=O&67108863,j=Math.min(H,D.length-1),X=Math.max(0,H-I.length+1);X<=j;X++){var ae=H-X,fe=I.words[ae]|0,K=D.words[X]|0,J=fe*K,U=J&67108863;Y=Y+(J/67108864|0)|0,U=U+ee|0,ee=U&67108863,Y=Y+(U>>>26)|0,z+=Y>>>26,Y&=67108863}R.words[H]=ee,O=Y,Y=z}return O!==0?R.words[H]=O:R.length--,R.strip()}function A(I,D,R){var O=new _;return O.mulp(I,D,R)}r.prototype.mulTo=function(D,R){var O,z=this.length+D.length;return this.length===10&&D.length===10?O=y(this,D,R):z<63?O=l(this,D,R):z<1024?O=u(this,D,R):O=A(this,D,R),O};function _(I,D){this.x=I,this.y=D}_.prototype.makeRBT=function(D){for(var R=new Array(D),O=r.prototype._countBits(D)-1,z=0;z<D;z++)R[z]=this.revBin(z,O,D);return R},_.prototype.revBin=function(D,R,O){if(D===0||D===O-1)return D;for(var z=0,H=0;H<R;H++)z|=(D&1)<<R-H-1,D>>=1;return z},_.prototype.permute=function(D,R,O,z,H,Y){for(var ee=0;ee<Y;ee++)z[ee]=R[D[ee]],H[ee]=O[D[ee]]},_.prototype.transform=function(D,R,O,z,H,Y){this.permute(Y,D,R,O,z,H);for(var ee=1;ee<H;ee<<=1)for(var j=ee<<1,X=Math.cos(2*Math.PI/j),ae=Math.sin(2*Math.PI/j),fe=0;fe<H;fe+=j)for(var K=X,J=ae,U=0;U<ee;U++){var V=O[fe+U],q=z[fe+U],re=O[fe+U+ee],Z=z[fe+U+ee],Q=K*re-J*Z;Z=K*Z+J*re,re=Q,O[fe+U]=V+re,z[fe+U]=q+Z,O[fe+U+ee]=V-re,z[fe+U+ee]=q-Z,U!==j&&(Q=X*K-ae*J,J=X*J+ae*K,K=Q)}},_.prototype.guessLen13b=function(D,R){var O=Math.max(R,D)|1,z=O&1,H=0;for(O=O/2|0;O;O=O>>>1)H++;return 1<<H+1+z},_.prototype.conjugate=function(D,R,O){if(!(O<=1))for(var z=0;z<O/2;z++){var H=D[z];D[z]=D[O-z-1],D[O-z-1]=H,H=R[z],R[z]=-R[O-z-1],R[O-z-1]=-H}},_.prototype.normalize13b=function(D,R){for(var O=0,z=0;z<R/2;z++){var H=Math.round(D[2*z+1]/R)*8192+Math.round(D[2*z]/R)+O;D[z]=H&67108863,H<67108864?O=0:O=H/67108864|0}return D},_.prototype.convert13b=function(D,R,O,z){for(var H=0,Y=0;Y<R;Y++)H=H+(D[Y]|0),O[2*Y]=H&8191,H=H>>>13,O[2*Y+1]=H&8191,H=H>>>13;for(Y=2*R;Y<z;++Y)O[Y]=0;i(H===0),i((H&-8192)===0)},_.prototype.stub=function(D){for(var R=new Array(D),O=0;O<D;O++)R[O]=0;return R},_.prototype.mulp=function(D,R,O){var z=2*this.guessLen13b(D.length,R.length),H=this.makeRBT(z),Y=this.stub(z),ee=new Array(z),j=new Array(z),X=new Array(z),ae=new Array(z),fe=new Array(z),K=new Array(z),J=O.words;J.length=z,this.convert13b(D.words,D.length,ee,z),this.convert13b(R.words,R.length,ae,z),this.transform(ee,Y,j,X,z,H),this.transform(ae,Y,fe,K,z,H);for(var U=0;U<z;U++){var V=j[U]*fe[U]-X[U]*K[U];X[U]=j[U]*K[U]+X[U]*fe[U],j[U]=V}return this.conjugate(j,X,z),this.transform(j,X,J,Y,z,H),this.conjugate(J,Y,z),this.normalize13b(J,z),O.negative=D.negative^R.negative,O.length=D.length+R.length,O.strip()},r.prototype.mul=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},r.prototype.mulf=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),A(this,D,R)},r.prototype.imul=function(D){return this.clone().mulTo(D,this)},r.prototype.imuln=function(D){i(typeof D=="number"),i(D<67108864);for(var R=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*D,H=(z&67108863)+(R&67108863);R>>=26,R+=z/67108864|0,R+=H>>>26,this.words[O]=H&67108863}return R!==0&&(this.words[O]=R,this.length++),this},r.prototype.muln=function(D){return this.clone().imuln(D)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(D){var R=m(D);if(R.length===0)return new r(1);for(var O=this,z=0;z<R.length&&R[z]===0;z++,O=O.sqr());if(++z<R.length)for(var H=O.sqr();z<R.length;z++,H=H.sqr())R[z]!==0&&(O=O.mul(H));return O},r.prototype.iushln=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=67108863>>>26-R<<26-R,H;if(R!==0){var Y=0;for(H=0;H<this.length;H++){var ee=this.words[H]&z,j=(this.words[H]|0)-ee<<R;this.words[H]=j|Y,Y=ee>>>26-R}Y&&(this.words[H]=Y,this.length++)}if(O!==0){for(H=this.length-1;H>=0;H--)this.words[H+O]=this.words[H];for(H=0;H<O;H++)this.words[H]=0;this.length+=O}return this.strip()},r.prototype.ishln=function(D){return i(this.negative===0),this.iushln(D)},r.prototype.iushrn=function(D,R,O){i(typeof D=="number"&&D>=0);var z;R?z=(R-R%26)/26:z=0;var H=D%26,Y=Math.min((D-H)/26,this.length),ee=67108863^67108863>>>H<<H,j=O;if(z-=Y,z=Math.max(0,z),j){for(var X=0;X<Y;X++)j.words[X]=this.words[X];j.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,X=0;X<this.length;X++)this.words[X]=this.words[X+Y];else this.words[0]=0,this.length=1;var ae=0;for(X=this.length-1;X>=0&&(ae!==0||X>=z);X--){var fe=this.words[X]|0;this.words[X]=ae<<26-H|fe>>>H,ae=fe&ee}return j&&ae!==0&&(j.words[j.length++]=ae),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(D,R,O){return i(this.negative===0),this.iushrn(D,R,O)},r.prototype.shln=function(D){return this.clone().ishln(D)},r.prototype.ushln=function(D){return this.clone().iushln(D)},r.prototype.shrn=function(D){return this.clone().ishrn(D)},r.prototype.ushrn=function(D){return this.clone().iushrn(D)},r.prototype.testn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return!1;var H=this.words[O];return!!(H&z)},r.prototype.imaskn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var z=67108863^67108863>>>R<<R;this.words[this.length-1]&=z}return this.strip()},r.prototype.maskn=function(D){return this.clone().imaskn(D)},r.prototype.iaddn=function(D){return i(typeof D=="number"),i(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},r.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},r.prototype.isubn=function(D){if(i(typeof D=="number"),i(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},r.prototype.addn=function(D){return this.clone().iaddn(D)},r.prototype.subn=function(D){return this.clone().isubn(D)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(D,R,O){var z=D.length+O,H;this._expand(z);var Y,ee=0;for(H=0;H<D.length;H++){Y=(this.words[H+O]|0)+ee;var j=(D.words[H]|0)*R;Y-=j&67108863,ee=(Y>>26)-(j/67108864|0),this.words[H+O]=Y&67108863}for(;H<this.length-O;H++)Y=(this.words[H+O]|0)+ee,ee=Y>>26,this.words[H+O]=Y&67108863;if(ee===0)return this.strip();for(i(ee===-1),ee=0,H=0;H<this.length;H++)Y=-(this.words[H]|0)+ee,ee=Y>>26,this.words[H]=Y&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(D,R){var O=this.length-D.length,z=this.clone(),H=D,Y=H.words[H.length-1]|0,ee=this._countBits(Y);O=26-ee,O!==0&&(H=H.ushln(O),z.iushln(O),Y=H.words[H.length-1]|0);var j=z.length-H.length,X;if(R!=="mod"){X=new r(null),X.length=j+1,X.words=new Array(X.length);for(var ae=0;ae<X.length;ae++)X.words[ae]=0}var fe=z.clone()._ishlnsubmul(H,1,j);fe.negative===0&&(z=fe,X&&(X.words[j]=1));for(var K=j-1;K>=0;K--){var J=(z.words[H.length+K]|0)*67108864+(z.words[H.length+K-1]|0);for(J=Math.min(J/Y|0,67108863),z._ishlnsubmul(H,J,K);z.negative!==0;)J--,z.negative=0,z._ishlnsubmul(H,1,K),z.isZero()||(z.negative^=1);X&&(X.words[K]=J)}return X&&X.strip(),z.strip(),R!=="div"&&O!==0&&z.iushrn(O),{div:X||null,mod:z}},r.prototype.divmod=function(D,R,O){if(i(!D.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var z,H,Y;return this.negative!==0&&D.negative===0?(Y=this.neg().divmod(D,R),R!=="mod"&&(z=Y.div.neg()),R!=="div"&&(H=Y.mod.neg(),O&&H.negative!==0&&H.iadd(D)),{div:z,mod:H}):this.negative===0&&D.negative!==0?(Y=this.divmod(D.neg(),R),R!=="mod"&&(z=Y.div.neg()),{div:z,mod:Y.mod}):(this.negative&D.negative)!==0?(Y=this.neg().divmod(D.neg(),R),R!=="div"&&(H=Y.mod.neg(),O&&H.negative!==0&&H.isub(D)),{div:Y.div,mod:H}):D.length>this.length||this.cmp(D)<0?{div:new r(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new r(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new r(this.modn(D.words[0]))}:this._wordDiv(D,R)},r.prototype.div=function(D){return this.divmod(D,"div",!1).div},r.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},r.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},r.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(D):R.mod,z=D.ushrn(1),H=D.andln(1),Y=O.cmp(z);return Y<0||H===1&&Y===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},r.prototype.modn=function(D){i(D<=67108863);for(var R=(1<<26)%D,O=0,z=this.length-1;z>=0;z--)O=(R*O+(this.words[z]|0))%D;return O},r.prototype.idivn=function(D){i(D<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+R*67108864;this.words[O]=z/D|0,R=z%D}return this.strip()},r.prototype.divn=function(D){return this.clone().idivn(D)},r.prototype.egcd=function(D){i(D.negative===0),i(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),H=new r(0),Y=new r(0),ee=new r(1),j=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++j;for(var X=O.clone(),ae=R.clone();!R.isZero();){for(var fe=0,K=1;(R.words[0]&K)===0&&fe<26;++fe,K<<=1);if(fe>0)for(R.iushrn(fe);fe-- >0;)(z.isOdd()||H.isOdd())&&(z.iadd(X),H.isub(ae)),z.iushrn(1),H.iushrn(1);for(var J=0,U=1;(O.words[0]&U)===0&&J<26;++J,U<<=1);if(J>0)for(O.iushrn(J);J-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd(X),ee.isub(ae)),Y.iushrn(1),ee.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(Y),H.isub(ee)):(O.isub(R),Y.isub(z),ee.isub(H))}return{a:Y,b:ee,gcd:O.iushln(j)}},r.prototype._invmp=function(D){i(D.negative===0),i(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),H=new r(0),Y=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var ee=0,j=1;(R.words[0]&j)===0&&ee<26;++ee,j<<=1);if(ee>0)for(R.iushrn(ee);ee-- >0;)z.isOdd()&&z.iadd(Y),z.iushrn(1);for(var X=0,ae=1;(O.words[0]&ae)===0&&X<26;++X,ae<<=1);if(X>0)for(O.iushrn(X);X-- >0;)H.isOdd()&&H.iadd(Y),H.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(H)):(O.isub(R),H.isub(z))}var fe;return R.cmpn(1)===0?fe=z:fe=H,fe.cmpn(0)<0&&fe.iadd(D),fe},r.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),O=D.clone();R.negative=0,O.negative=0;for(var z=0;R.isEven()&&O.isEven();z++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var H=R.cmp(O);if(H<0){var Y=R;R=O,O=Y}else if(H===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(z)},r.prototype.invm=function(D){return this.egcd(D).a.umod(D)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(D){return this.words[0]&D},r.prototype.bincn=function(D){i(typeof D=="number");var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=z,this;for(var H=z,Y=O;H!==0&&Y<this.length;Y++){var ee=this.words[Y]|0;ee+=H,H=ee>>>26,ee&=67108863,this.words[Y]=ee}return H!==0&&(this.words[Y]=H,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(D=-D),i(D<=67108863,"Number is too big");var z=this.words[0]|0;O=z===D?0:z<D?-1:1}return this.negative!==0?-O|0:O},r.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},r.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var z=this.words[O]|0,H=D.words[O]|0;if(z!==H){z<H?R=-1:z>H&&(R=1);break}}return R},r.prototype.gtn=function(D){return this.cmpn(D)===1},r.prototype.gt=function(D){return this.cmp(D)===1},r.prototype.gten=function(D){return this.cmpn(D)>=0},r.prototype.gte=function(D){return this.cmp(D)>=0},r.prototype.ltn=function(D){return this.cmpn(D)===-1},r.prototype.lt=function(D){return this.cmp(D)===-1},r.prototype.lten=function(D){return this.cmpn(D)<=0},r.prototype.lte=function(D){return this.cmp(D)<=0},r.prototype.eqn=function(D){return this.cmpn(D)===0},r.prototype.eq=function(D){return this.cmp(D)===0},r.red=function(D){return new P(D)},r.prototype.toRed=function(D){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(D){return this.red=D,this},r.prototype.forceRed=function(D){return i(!this.red,"Already a number in reduction context"),this._forceRed(D)},r.prototype.redAdd=function(D){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},r.prototype.redIAdd=function(D){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},r.prototype.redSub=function(D){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},r.prototype.redISub=function(D){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},r.prototype.redShl=function(D){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},r.prototype.redMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},r.prototype.redIMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(D){return i(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var p={k256:null,p224:null,p192:null,p25519:null};function w(I,D){this.name=I,this.p=new r(D,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var D=new r(null);return D.words=new Array(Math.ceil(this.n/13)),D},w.prototype.ireduce=function(D){var R=D,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var z=O<this.n?-1:R.ucmp(this.p);return z===0?(R.words[0]=0,R.length=1):z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},w.prototype.split=function(D,R){D.iushrn(this.n,0,R)},w.prototype.imulK=function(D){return D.imul(this.k)};function h(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(h,w),h.prototype.split=function(D,R){for(var O=4194303,z=Math.min(D.length,9),H=0;H<z;H++)R.words[H]=D.words[H];if(R.length=z,D.length<=9){D.words[0]=0,D.length=1;return}var Y=D.words[9];for(R.words[R.length++]=Y&O,H=10;H<D.length;H++){var ee=D.words[H]|0;D.words[H-10]=(ee&O)<<4|Y>>>22,Y=ee}Y>>>=22,D.words[H-10]=Y,Y===0&&D.length>10?D.length-=10:D.length-=9},h.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,O=0;O<D.length;O++){var z=D.words[O]|0;R+=z*977,D.words[O]=R&67108863,R=z*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,w);function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(E,w);function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(S,w),S.prototype.imulK=function(D){for(var R=0,O=0;O<D.length;O++){var z=(D.words[O]|0)*19+R,H=z&67108863;z>>>=26,D.words[O]=H,R=z}return R!==0&&(D.words[D.length++]=R),D},r._prime=function(D){if(p[D])return p[D];var R;if(D==="k256")R=new h;else if(D==="p224")R=new L;else if(D==="p192")R=new E;else if(D==="p25519")R=new S;else throw new Error("Unknown prime "+D);return p[D]=R,R};function P(I){if(typeof I=="string"){var D=r._prime(I);this.m=D.p,this.prime=D}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(D){i(D.negative===0,"red works only with positives"),i(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){i((D.negative|R.negative)===0,"red works only with positives"),i(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var O=D.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var O=D.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},P.prototype.sub=function(D,R){this._verify2(D,R);var O=D.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var O=D.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(i(R%2===1),R===3){var O=this.m.add(new r(1)).iushrn(2);return this.pow(D,O)}for(var z=this.m.subn(1),H=0;!z.isZero()&&z.andln(1)===0;)H++,z.iushrn(1);i(!z.isZero());var Y=new r(1).toRed(this),ee=Y.redNeg(),j=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new r(2*X*X).toRed(this);this.pow(X,j).cmp(ee)!==0;)X.redIAdd(ee);for(var ae=this.pow(X,z),fe=this.pow(D,z.addn(1).iushrn(1)),K=this.pow(D,z),J=H;K.cmp(Y)!==0;){for(var U=K,V=0;U.cmp(Y)!==0;V++)U=U.redSqr();i(V<J);var q=this.pow(ae,new r(1).iushln(J-V-1));fe=fe.redMul(q),ae=q.redSqr(),K=K.redMul(ae),J=V}return fe},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new r(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var O=4,z=new Array(1<<O);z[0]=new r(1).toRed(this),z[1]=D;for(var H=2;H<z.length;H++)z[H]=this.mul(z[H-1],D);var Y=z[0],ee=0,j=0,X=R.bitLength()%26;for(X===0&&(X=26),H=R.length-1;H>=0;H--){for(var ae=R.words[H],fe=X-1;fe>=0;fe--){var K=ae>>fe&1;if(Y!==z[0]&&(Y=this.sqr(Y)),K===0&&ee===0){j=0;continue}ee<<=1,ee|=K,j++,!(j!==O&&(H!==0||fe!==0))&&(Y=this.mul(Y,z[ee]),j=0,ee=0)}X=26}return Y},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},r.mont=function(D){return new F(D)};function F(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(F,P),F.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},F.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},F.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=O.isub(z).iushrn(this.shift),Y=H;return H.cmp(this.m)>=0?Y=H.isub(this.m):H.cmpn(0)<0&&(Y=H.iadd(this.m)),Y._forceRed(this)},F.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new r(0)._forceRed(this);var O=D.mul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=O.isub(z).iushrn(this.shift),Y=H;return H.cmp(this.m)>=0?Y=H.isub(this.m):H.cmpn(0)<0&&(Y=H.iadd(this.m)),Y._forceRed(this)},F.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof M>"u"||M,this)},{buffer:2}],34:[function(f,M,T){M.exports=e;function e(a){var i,n,r,v=a.length,s=0;for(i=0;i<v;++i)s+=a[i].length;var o=new Array(s),b=0;for(i=0;i<v;++i){var g=a[i],d=g.length;for(n=0;n<d;++n){var c=o[b++]=new Array(d-1),m=0;for(r=0;r<d;++r)r!==n&&(c[m++]=g[r]);if(n&1){var l=c[1];c[1]=c[0],c[0]=l}}}return o}},{}],35:[function(f,M,T){M.exports=d;var e=f("typedarray-pool"),a=f("./lib/sweep"),i=f("./lib/intersect");function n(c,m){for(var l=0;l<c;++l)if(!(m[l]<=m[l+c]))return!0;return!1}function r(c,m,l,y){for(var u=0,A=0,_=0,p=c.length;_<p;++_){var w=c[_];if(!n(m,w)){for(var h=0;h<2*m;++h)l[u++]=w[h];y[A++]=_}}return A}function v(c,m,l,y){var u=c.length,A=m.length;if(!(u<=0||A<=0)){var _=c[0].length>>>1;if(!(_<=0)){var p,w=e.mallocDouble(2*_*u),h=e.mallocInt32(u);if(u=r(c,_,w,h),u>0){if(_===1&&y)a.init(u),p=a.sweepComplete(_,l,0,u,w,h,0,u,w,h);else{var L=e.mallocDouble(2*_*A),E=e.mallocInt32(A);A=r(m,_,L,E),A>0&&(a.init(u+A),_===1?p=a.sweepBipartite(_,l,0,u,w,h,0,A,L,E):p=i(_,l,y,u,w,h,A,L,E),e.free(L),e.free(E))}e.free(w),e.free(h)}return p}}}var s;function o(c,m){s.push([c,m])}function b(c){return s=[],v(c,c,o,!0),s}function g(c,m){return s=[],v(c,m,o,!1),s}function d(c,m,l){switch(arguments.length){case 1:return b(c);case 2:return typeof m=="function"?v(c,c,m,!0):g(c,m);case 3:return v(c,m,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(f,M,T){function e(){function n(s,o,b,g,d,c,m,l,y,u,A){for(var _=2*s,p=g,w=_*g;p<d;++p,w+=_){var h=c[o+w],L=c[o+w+s],E=m[p];e:for(var S=l,P=_*l;S<y;++S,P+=_){var F=u[o+P],I=u[o+P+s],D=A[S];if(!(I<h||L<F)){for(var R=o+1;R<s;++R){var O=c[R+w],z=c[R+s+w],H=u[R+P],Y=u[R+s+P];if(z<H||Y<O)continue e}var ee=b(E,D);if(ee!==void 0)return ee}}}}function r(s,o,b,g,d,c,m,l,y,u,A){for(var _=2*s,p=l,w=_*l;p<y;++p,w+=_){var h=u[o+w],L=u[o+w+s],E=A[p];e:for(var S=g,P=_*g;S<d;++S,P+=_){var F=c[o+P],I=c[o+P+s],D=m[S];if(!(L<F||I<h)){for(var R=o+1;R<s;++R){var O=c[R+P],z=c[R+s+P],H=u[R+w],Y=u[R+s+w];if(z<H||Y<O)continue e}var ee=b(D,E);if(ee!==void 0)return ee}}}}function v(s,o,b,g,d,c,m,l,y,u,A){return d-g>y-l?n(s,o,b,g,d,c,m,l,y,u,A):r(s,o,b,g,d,c,m,l,y,u,A)}return v}function a(){function n(b,g,d,c,m,l,y,u,A,_,p){for(var w=2*b,h=c,L=w*c;h<m;++h,L+=w){var E=l[g+L],S=l[g+L+b],P=y[h];e:for(var F=u,I=w*u;F<A;++F,I+=w){var D=_[g+I],R=p[F];if(!(D<=E||S<D)){for(var O=g+1;O<b;++O){var z=l[O+L],H=l[O+b+L],Y=_[O+I],ee=_[O+b+I];if(H<Y||ee<z)continue e}var j=d(R,P);if(j!==void 0)return j}}}}function r(b,g,d,c,m,l,y,u,A,_,p){for(var w=2*b,h=c,L=w*c;h<m;++h,L+=w){var E=l[g+L],S=l[g+L+b],P=y[h];e:for(var F=u,I=w*u;F<A;++F,I+=w){var D=_[g+I],R=p[F];if(!(D<E||S<D)){for(var O=g+1;O<b;++O){var z=l[O+L],H=l[O+b+L],Y=_[O+I],ee=_[O+b+I];if(H<Y||ee<z)continue e}var j=d(P,R);if(j!==void 0)return j}}}}function v(b,g,d,c,m,l,y,u,A,_,p){for(var w=2*b,h=u,L=w*u;h<A;++h,L+=w){var E=_[g+L],S=p[h];e:for(var P=c,F=w*c;P<m;++P,F+=w){var I=l[g+F],D=l[g+F+b],R=y[P];if(!(E<=I||D<E)){for(var O=g+1;O<b;++O){var z=l[O+F],H=l[O+b+F],Y=_[O+L],ee=_[O+b+L];if(H<Y||ee<z)continue e}var j=d(S,R);if(j!==void 0)return j}}}}function s(b,g,d,c,m,l,y,u,A,_,p){for(var w=2*b,h=u,L=w*u;h<A;++h,L+=w){var E=_[g+L],S=p[h];e:for(var P=c,F=w*c;P<m;++P,F+=w){var I=l[g+F],D=l[g+F+b],R=y[P];if(!(E<I||D<E)){for(var O=g+1;O<b;++O){var z=l[O+F],H=l[O+b+F],Y=_[O+L],ee=_[O+b+L];if(H<Y||ee<z)continue e}var j=d(R,S);if(j!==void 0)return j}}}}function o(b,g,d,c,m,l,y,u,A,_,p,w){return l-m>_-A?c?n(b,g,d,m,l,y,u,A,_,p,w):r(b,g,d,m,l,y,u,A,_,p,w):c?v(b,g,d,m,l,y,u,A,_,p,w):s(b,g,d,m,l,y,u,A,_,p,w)}return o}function i(n){return n?e():a()}T.partial=i(!1),T.full=i(!0)},{}],37:[function(f,M,T){M.exports=I;var e=f("typedarray-pool"),a=f("bit-twiddle"),i=f("./brute"),n=i.partial,r=i.full,v=f("./sweep"),s=f("./median"),o=f("./partition"),b=128,g=1<<22,d=1<<22,c=o("!(lo>=p0)&&!(p1>=hi)"),m=o("lo===p0"),l=o("lo<p0"),y=o("hi<=p0"),u=o("lo<=p0&&p0<=hi"),A=o("lo<p0&&p0<=hi"),_=6,p=2,w=1024,h=e.mallocInt32(w),L=e.mallocDouble(w);function E(D,R){var O=8*a.log2(R+1)*(D+1)|0,z=a.nextPow2(_*O);h.length<z&&(e.free(h),h=e.mallocInt32(z));var H=a.nextPow2(p*O);L.length<H&&(e.free(L),L=e.mallocDouble(H))}function S(D,R,O,z,H,Y,ee,j,X){var ae=_*D;h[ae]=R,h[ae+1]=O,h[ae+2]=z,h[ae+3]=H,h[ae+4]=Y,h[ae+5]=ee;var fe=p*D;L[fe]=j,L[fe+1]=X}function P(D,R,O,z,H,Y,ee,j,X,ae,fe){var K=2*D,J=X*K,U=ae[J+R];e:for(var V=H,q=H*K;V<Y;++V,q+=K){var re=ee[q+R],Z=ee[q+R+D];if(!(U<re||Z<U)&&!(z&&U===re)){for(var Q=j[V],ie=R+1;ie<D;++ie){var re=ee[q+ie],Z=ee[q+ie+D],oe=ae[J+ie],ne=ae[J+ie+D];if(Z<oe||ne<re)continue e}var se;if(z?se=O(fe,Q):se=O(Q,fe),se!==void 0)return se}}}function F(D,R,O,z,H,Y,ee,j,X,ae){var fe=2*D,K=j*fe,J=X[K+R];e:for(var U=z,V=z*fe;U<H;++U,V+=fe){var q=ee[U];if(q!==ae){var re=Y[V+R],Z=Y[V+R+D];if(!(J<re||Z<J)){for(var Q=R+1;Q<D;++Q){var re=Y[V+Q],Z=Y[V+Q+D],ie=X[K+Q],oe=X[K+Q+D];if(Z<ie||oe<re)continue e}var ne=O(q,ae);if(ne!==void 0)return ne}}}}function I(D,R,O,z,H,Y,ee,j,X){E(D,z+ee);var ae=0,fe=2*D,K;for(S(ae++,0,0,z,0,ee,O?16:0,-1/0,1/0),O||S(ae++,0,0,ee,0,z,1,-1/0,1/0);ae>0;){ae-=1;var J=ae*_,U=h[J],V=h[J+1],q=h[J+2],re=h[J+3],Z=h[J+4],Q=h[J+5],ie=ae*p,oe=L[ie],ne=L[ie+1],se=Q&1,_e=!!(Q&16),ue=H,ge=Y,xe=j,ye=X;if(se&&(ue=j,ge=X,xe=H,ye=Y),!(Q&2&&(q=l(D,U,V,q,ue,ge,ne),V>=q))&&!(Q&4&&(V=y(D,U,V,q,ue,ge,oe),V>=q))){var be=q-V,Se=Z-re;if(_e){if(D*be*(be+Se)<d){if(K=v.scanComplete(D,U,R,V,q,ue,ge,re,Z,xe,ye),K!==void 0)return K;continue}}else if(D*Math.min(be,Se)<b){if(K=n(D,U,R,se,V,q,ue,ge,re,Z,xe,ye),K!==void 0)return K;continue}else if(D*be*Se<g){if(K=v.scanBipartite(D,U,R,se,V,q,ue,ge,re,Z,xe,ye),K!==void 0)return K;continue}var Re=c(D,U,V,q,ue,ge,oe,ne);if(V<Re)if(D*(Re-V)<b){if(K=r(D,U+1,R,V,Re,ue,ge,re,Z,xe,ye),K!==void 0)return K}else if(U===D-2){if(se?K=v.sweepBipartite(D,R,re,Z,xe,ye,V,Re,ue,ge):K=v.sweepBipartite(D,R,V,Re,ue,ge,re,Z,xe,ye),K!==void 0)return K}else S(ae++,U+1,V,Re,re,Z,se,-1/0,1/0),S(ae++,U+1,re,Z,V,Re,se^1,-1/0,1/0);if(Re<q){var Ve=s(D,U,re,Z,xe,ye),Ae=xe[fe*Ve+U],Ce=m(D,U,Ve,Z,xe,ye,Ae);if(Ce<Z&&S(ae++,U,Re,q,Ce,Z,(se|4)+(_e?16:0),Ae,ne),re<Ve&&S(ae++,U,Re,q,re,Ve,(se|2)+(_e?16:0),oe,Ae),Ve+1===Ce){if(_e?K=F(D,U,R,Re,q,ue,ge,Ve,xe,ye[Ve]):K=P(D,U,R,se,Re,q,ue,ge,Ve,xe,ye[Ve]),K!==void 0)return K}else if(Ve<Ce){var Ze;if(_e){if(Ze=u(D,U,Re,q,ue,ge,Ae),Re<Ze){var Ye=m(D,U,Re,Ze,ue,ge,Ae);if(U===D-2){if(Re<Ye&&(K=v.sweepComplete(D,R,Re,Ye,ue,ge,Ve,Ce,xe,ye),K!==void 0)||Ye<Ze&&(K=v.sweepBipartite(D,R,Ye,Ze,ue,ge,Ve,Ce,xe,ye),K!==void 0))return K}else Re<Ye&&S(ae++,U+1,Re,Ye,Ve,Ce,16,-1/0,1/0),Ye<Ze&&(S(ae++,U+1,Ye,Ze,Ve,Ce,0,-1/0,1/0),S(ae++,U+1,Ve,Ce,Ye,Ze,1,-1/0,1/0))}}else se?Ze=A(D,U,Re,q,ue,ge,Ae):Ze=u(D,U,Re,q,ue,ge,Ae),Re<Ze&&(U===D-2?se?K=v.sweepBipartite(D,R,Ve,Ce,xe,ye,Re,Ze,ue,ge):K=v.sweepBipartite(D,R,Re,Ze,ue,ge,Ve,Ce,xe,ye):(S(ae++,U+1,Re,Ze,Ve,Ce,se,-1/0,1/0),S(ae++,U+1,Ve,Ce,Re,Ze,se^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(f,M,T){M.exports=r;var e=f("./partition"),a=e("lo<p0"),i=8;function n(v,s,o,b,g,d){for(var c=2*v,m=c*(o+1)+s,l=o+1;l<b;++l,m+=c)for(var y=g[m],u=l,A=c*(l-1);u>o&&g[A+s]>y;--u,A-=c){for(var _=A,p=A+c,w=0;w<c;++w,++_,++p){var h=g[_];g[_]=g[p],g[p]=h}var L=d[u];d[u]=d[u-1],d[u-1]=L}}function r(v,s,o,b,g,d){if(b<=o+1)return o;for(var c=o,m=b,l=b+o>>>1,y=2*v,u=l,A=g[y*l+s];c<m;){if(m-c<i){n(v,s,c,m,g,d),A=g[y*l+s];break}var _=m-c,p=Math.random()*_+c|0,w=g[y*p+s],h=Math.random()*_+c|0,L=g[y*h+s],E=Math.random()*_+c|0,S=g[y*E+s];w<=L?S>=L?(u=h,A=L):w>=S?(u=p,A=w):(u=E,A=S):L>=S?(u=h,A=L):S>=w?(u=p,A=w):(u=E,A=S);for(var I=y*(m-1),D=y*u,P=0;P<y;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[m-1];d[m-1]=d[u],d[u]=R,u=a(v,s,c,m-1,g,d,A);for(var I=y*(m-1),D=y*u,P=0;P<y;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[m-1];if(d[m-1]=d[u],d[u]=R,l<u){for(m=u-1;c<m&&g[y*(m-1)+s]===A;)m-=1;m+=1}else if(u<l)for(c=u+1;c<m&&g[y*c+s]===A;)c+=1;else break}return a(v,s,o,l,g,d,g[y*l+s])}},{"./partition":39}],39:[function(f,M,T){M.exports=a;var e={"lo===p0":i,"lo<p0":n,"lo<=p0":r,"hi<=p0":v,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":b};function a(g){return e[g]}function i(g,d,c,m,l,y,u){for(var A=2*g,_=A*c,p=_,w=c,h=d,L=g+d,E=c;m>E;++E,_+=A){var S=l[_+h];if(S===u)if(w===E)w+=1,p+=A;else{for(var P=0;A>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=y[E];y[E]=y[w],y[w++]=I}}return w}function n(g,d,c,m,l,y,u){for(var A=2*g,_=A*c,p=_,w=c,h=d,L=g+d,E=c;m>E;++E,_+=A){var S=l[_+h];if(S<u)if(w===E)w+=1,p+=A;else{for(var P=0;A>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=y[E];y[E]=y[w],y[w++]=I}}return w}function r(g,d,c,m,l,y,u){for(var A=2*g,_=A*c,p=_,w=c,h=d,L=g+d,E=c;m>E;++E,_+=A){var S=l[_+L];if(S<=u)if(w===E)w+=1,p+=A;else{for(var P=0;A>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=y[E];y[E]=y[w],y[w++]=I}}return w}function v(g,d,c,m,l,y,u){for(var A=2*g,_=A*c,p=_,w=c,h=d,L=g+d,E=c;m>E;++E,_+=A){var S=l[_+L];if(S<=u)if(w===E)w+=1,p+=A;else{for(var P=0;A>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=y[E];y[E]=y[w],y[w++]=I}}return w}function s(g,d,c,m,l,y,u){for(var A=2*g,_=A*c,p=_,w=c,h=d,L=g+d,E=c;m>E;++E,_+=A){var S=l[_+h],P=l[_+L];if(S<=u&&u<=P)if(w===E)w+=1,p+=A;else{for(var F=0;A>F;++F){var I=l[_+F];l[_+F]=l[p],l[p++]=I}var D=y[E];y[E]=y[w],y[w++]=D}}return w}function o(g,d,c,m,l,y,u){for(var A=2*g,_=A*c,p=_,w=c,h=d,L=g+d,E=c;m>E;++E,_+=A){var S=l[_+h],P=l[_+L];if(S<u&&u<=P)if(w===E)w+=1,p+=A;else{for(var F=0;A>F;++F){var I=l[_+F];l[_+F]=l[p],l[p++]=I}var D=y[E];y[E]=y[w],y[w++]=D}}return w}function b(g,d,c,m,l,y,u,A){for(var _=2*g,p=_*c,w=p,h=c,L=d,E=g+d,S=c;m>S;++S,p+=_){var P=l[p+L],F=l[p+E];if(!(P>=u)&&!(A>=F))if(h===S)h+=1,w+=_;else{for(var I=0;_>I;++I){var D=l[p+I];l[p+I]=l[w],l[w++]=D}var R=y[S];y[S]=y[h],y[h++]=R}}return h}},{}],40:[function(f,M,T){M.exports=a;var e=32;function a(d,c){c<=4*e?i(0,c-1,d):g(0,c-1,d)}function i(d,c,m){for(var l=2*(d+1),y=d+1;y<=c;++y){for(var u=m[l++],A=m[l++],_=y,p=l-2;_-- >d;){var w=m[p-2],h=m[p-1];if(w<u)break;if(w===u&&h<A)break;m[p]=w,m[p+1]=h,p-=2}m[p]=u,m[p+1]=A}}function n(d,c,m){d*=2,c*=2;var l=m[d],y=m[d+1];m[d]=m[c],m[d+1]=m[c+1],m[c]=l,m[c+1]=y}function r(d,c,m){d*=2,c*=2,m[d]=m[c],m[d+1]=m[c+1]}function v(d,c,m,l){d*=2,c*=2,m*=2;var y=l[d],u=l[d+1];l[d]=l[c],l[d+1]=l[c+1],l[c]=l[m],l[c+1]=l[m+1],l[m]=y,l[m+1]=u}function s(d,c,m,l,y){d*=2,c*=2,y[d]=y[c],y[c]=m,y[d+1]=y[c+1],y[c+1]=l}function o(d,c,m){d*=2,c*=2;var l=m[d],y=m[c];return l<y?!1:l===y?m[d+1]>m[c+1]:!0}function b(d,c,m,l){d*=2;var y=l[d];return y<c?!0:y===c?l[d+1]<m:!1}function g(d,c,m){var l=(c-d+1)/6|0,y=d+l,u=c-l,A=d+c>>1,_=A-l,p=A+l,w=y,h=_,L=A,E=p,S=u,P=d+1,F=c-1,I=0;o(w,h,m)&&(I=w,w=h,h=I),o(E,S,m)&&(I=E,E=S,S=I),o(w,L,m)&&(I=w,w=L,L=I),o(h,L,m)&&(I=h,h=L,L=I),o(w,E,m)&&(I=w,w=E,E=I),o(L,E,m)&&(I=L,L=E,E=I),o(h,S,m)&&(I=h,h=S,S=I),o(h,L,m)&&(I=h,h=L,L=I),o(E,S,m)&&(I=E,E=S,S=I);for(var D=m[2*h],R=m[2*h+1],O=m[2*E],z=m[2*E+1],H=2*w,Y=2*L,ee=2*S,j=2*y,X=2*A,ae=2*u,fe=0;fe<2;++fe){var K=m[H+fe],J=m[Y+fe],U=m[ee+fe];m[j+fe]=K,m[X+fe]=J,m[ae+fe]=U}r(_,d,m),r(p,c,m);for(var V=P;V<=F;++V)if(b(V,D,R,m))V!==P&&n(V,P,m),++P;else if(!b(V,O,z,m))for(;;)if(b(F,O,z,m)){b(F,D,R,m)?(v(V,P,F,m),++P,--F):(n(V,F,m),--F);break}else{if(--F<V)break;continue}s(d,P-1,D,R,m),s(c,F+1,O,z,m),P-2-d<=e?i(d,P-2,m):g(d,P-2,m),c-(F+2)<=e?i(F+2,c,m):g(F+2,c,m),F-P<=e?i(P,F,m):g(P,F,m)}},{}],41:[function(f,M,T){M.exports={init:m,sweepBipartite:u,sweepComplete:A,scanBipartite:_,scanComplete:p};var e=f("typedarray-pool"),a=f("bit-twiddle"),i=f("./sort"),n=1<<28,r=1024,v=e.mallocInt32(r),s=e.mallocInt32(r),o=e.mallocInt32(r),b=e.mallocInt32(r),g=e.mallocInt32(r),d=e.mallocInt32(r),c=e.mallocDouble(r*8);function m(w){var h=a.nextPow2(w);v.length<h&&(e.free(v),v=e.mallocInt32(h)),s.length<h&&(e.free(s),s=e.mallocInt32(h)),o.length<h&&(e.free(o),o=e.mallocInt32(h)),b.length<h&&(e.free(b),b=e.mallocInt32(h)),g.length<h&&(e.free(g),g=e.mallocInt32(h)),d.length<h&&(e.free(d),d=e.mallocInt32(h));var L=8*h;c.length<L&&(e.free(c),c=e.mallocDouble(L))}function l(w,h,L,E){var S=h[E],P=w[L-1];w[S]=P,h[P]=S}function y(w,h,L,E){w[L]=E,h[E]=L}function u(w,h,L,E,S,P,F,I,D,R){for(var O=0,z=2*w,H=w-1,Y=z-1,ee=L;ee<E;++ee){var j=P[ee],X=z*ee;c[O++]=S[X+H],c[O++]=-(j+1),c[O++]=S[X+Y],c[O++]=j}for(var ee=F;ee<I;++ee){var j=R[ee]+n,ae=z*ee;c[O++]=D[ae+H],c[O++]=-j,c[O++]=D[ae+Y],c[O++]=j}var fe=O>>>1;i(c,fe);for(var K=0,J=0,ee=0;ee<fe;++ee){var U=c[2*ee+1]|0;if(U>=n)U=U-n|0,l(o,b,J--,U);else if(U>=0)l(v,s,K--,U);else if(U<=-n){U=-U-n|0;for(var V=0;V<K;++V){var q=h(v[V],U);if(q!==void 0)return q}y(o,b,J++,U)}else{U=-U-1|0;for(var V=0;V<J;++V){var q=h(U,o[V]);if(q!==void 0)return q}y(v,s,K++,U)}}}function A(w,h,L,E,S,P,F,I,D,R){for(var O=0,z=2*w,H=w-1,Y=z-1,ee=L;ee<E;++ee){var j=P[ee]+1<<1,X=z*ee;c[O++]=S[X+H],c[O++]=-j,c[O++]=S[X+Y],c[O++]=j}for(var ee=F;ee<I;++ee){var j=R[ee]+1<<1,ae=z*ee;c[O++]=D[ae+H],c[O++]=-j|1,c[O++]=D[ae+Y],c[O++]=j|1}var fe=O>>>1;i(c,fe);for(var K=0,J=0,U=0,ee=0;ee<fe;++ee){var V=c[2*ee+1]|0,q=V&1;if(ee<fe-1&&V>>1===c[2*ee+3]>>1&&(q=2,ee+=1),V<0){for(var re=-(V>>1)-1,Z=0;Z<U;++Z){var Q=h(g[Z],re);if(Q!==void 0)return Q}if(q!==0)for(var Z=0;Z<K;++Z){var Q=h(v[Z],re);if(Q!==void 0)return Q}if(q!==1)for(var Z=0;Z<J;++Z){var Q=h(o[Z],re);if(Q!==void 0)return Q}q===0?y(v,s,K++,re):q===1?y(o,b,J++,re):q===2&&y(g,d,U++,re)}else{var re=(V>>1)-1;q===0?l(v,s,K--,re):q===1?l(o,b,J--,re):q===2&&l(g,d,U--,re)}}}function _(w,h,L,E,S,P,F,I,D,R,O,z){var H=0,Y=2*w,ee=h,j=h+w,X=1,ae=1;E?ae=n:X=n;for(var fe=S;fe<P;++fe){var K=fe+X,J=Y*fe;c[H++]=F[J+ee],c[H++]=-K,c[H++]=F[J+j],c[H++]=K}for(var fe=D;fe<R;++fe){var K=fe+ae,U=Y*fe;c[H++]=O[U+ee],c[H++]=-K}var V=H>>>1;i(c,V);for(var q=0,fe=0;fe<V;++fe){var re=c[2*fe+1]|0;if(re<0){var K=-re,Z=!1;if(K>=n?(Z=!E,K-=n):(Z=!!E,K-=1),Z)y(v,s,q++,K);else{var Q=z[K],ie=Y*K,oe=O[ie+h+1],ne=O[ie+h+1+w];e:for(var se=0;se<q;++se){var _e=v[se],ue=Y*_e;if(!(ne<F[ue+h+1]||F[ue+h+1+w]<oe)){for(var ge=h+2;ge<w;++ge)if(O[ie+ge+w]<F[ue+ge]||F[ue+ge+w]<O[ie+ge])continue e;var xe=I[_e],ye;if(E?ye=L(Q,xe):ye=L(xe,Q),ye!==void 0)return ye}}}}else l(v,s,q--,re-X)}}function p(w,h,L,E,S,P,F,I,D,R,O){for(var z=0,H=2*w,Y=h,ee=h+w,j=E;j<S;++j){var X=j+n,ae=H*j;c[z++]=P[ae+Y],c[z++]=-X,c[z++]=P[ae+ee],c[z++]=X}for(var j=I;j<D;++j){var X=j+1,fe=H*j;c[z++]=R[fe+Y],c[z++]=-X}var K=z>>>1;i(c,K);for(var J=0,j=0;j<K;++j){var U=c[2*j+1]|0;if(U<0){var X=-U;if(X>=n)v[J++]=X-n;else{X-=1;var V=O[X],q=H*X,re=R[q+h+1],Z=R[q+h+1+w];e:for(var Q=0;Q<J;++Q){var ie=v[Q],oe=F[ie];if(oe===V)break;var ne=H*ie;if(!(Z<P[ne+h+1]||P[ne+h+1+w]<re)){for(var se=h+2;se<w;++se)if(R[q+se+w]<P[ne+se]||P[ne+se+w]<R[q+se])continue e;var _e=L(oe,V);if(_e!==void 0)return _e}}}}else{for(var X=U-n,Q=J-1;Q>=0;--Q)if(v[Q]===X){for(var se=Q+1;se<J;++se)v[se-1]=v[se];break}--J}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(f,M,T){var e=f("./lib/monotone"),a=f("./lib/triangulation"),i=f("./lib/delaunay"),n=f("./lib/filter");M.exports=b;function r(g){return[Math.min(g[0],g[1]),Math.max(g[0],g[1])]}function v(g,d){return g[0]-d[0]||g[1]-d[1]}function s(g){return g.map(r).sort(v)}function o(g,d,c){return d in g?g[d]:c}function b(g,d,c){Array.isArray(d)?(c=c||{},d=d||[]):(c=d||{},d=[]);var m=!!o(c,"delaunay",!0),l=!!o(c,"interior",!0),y=!!o(c,"exterior",!0),u=!!o(c,"infinity",!1);if(!l&&!y||g.length===0)return[];var A=e(g,d);if(m||l!==y||u){for(var _=a(g.length,s(d)),p=0;p<A.length;++p){var w=A[p];_.addTriangle(w[0],w[1],w[2])}return m&&i(g,_),y?l?u?n(_,0,u):_.cells():n(_,1,u):n(_,-1)}else return A}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(f,M,T){var e=f("robust-in-sphere")[4];f("binary-search-bounds"),M.exports=i;function a(n,r,v,s,o,b){var g=r.opposite(s,o);if(!(g<0)){if(o<s){var d=s;s=o,o=d,d=b,b=g,g=d}r.isConstraint(s,o)||e(n[s],n[o],n[b],n[g])<0&&v.push(s,o)}}function i(n,r){for(var v=[],s=n.length,o=r.stars,b=0;b<s;++b)for(var g=o[b],d=1;d<g.length;d+=2){var c=g[d];if(!(c<b)&&!r.isConstraint(b,c)){for(var m=g[d-1],l=-1,y=1;y<g.length;y+=2)if(g[y-1]===c){l=g[y];break}l<0||e(n[b],n[c],n[m],n[l])<0&&v.push(b,c)}}for(;v.length>0;){for(var c=v.pop(),b=v.pop(),m=-1,l=-1,g=o[b],u=1;u<g.length;u+=2){var A=g[u-1],_=g[u];A===c?l=_:_===c&&(m=A)}m<0||l<0||e(n[b],n[c],n[m],n[l])>=0||(r.flip(b,c),a(n,r,v,m,b,l),a(n,r,v,b,l,m),a(n,r,v,l,c,m),a(n,r,v,c,m,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(f,M,T){var e=f("binary-search-bounds");M.exports=s;function a(o,b,g,d,c,m,l){this.cells=o,this.neighbor=b,this.flags=d,this.constraint=g,this.active=c,this.next=m,this.boundary=l}var i=a.prototype;function n(o,b){return o[0]-b[0]||o[1]-b[1]||o[2]-b[2]}i.locate=function(){var o=[0,0,0];return function(b,g,d){var c=b,m=g,l=d;return g<d?g<b&&(c=g,m=d,l=b):d<b&&(c=d,m=b,l=g),c<0?-1:(o[0]=c,o[1]=m,o[2]=l,e.eq(this.cells,o,n))}}();function r(o,b){for(var g=o.cells(),d=g.length,c=0;c<d;++c){var m=g[c],l=m[0],y=m[1],u=m[2];y<u?y<l&&(m[0]=y,m[1]=u,m[2]=l):u<l&&(m[0]=u,m[1]=l,m[2]=y)}g.sort(n);for(var A=new Array(d),c=0;c<A.length;++c)A[c]=0;var _=[],p=[],w=new Array(3*d),h=new Array(3*d),L=null;b&&(L=[]);for(var E=new a(g,w,h,A,_,p,L),c=0;c<d;++c)for(var m=g[c],S=0;S<3;++S){var l=m[S],y=m[(S+1)%3],P=w[3*c+S]=E.locate(y,l,o.opposite(y,l)),F=h[3*c+S]=o.isConstraint(l,y);P<0&&(F?p.push(c):(_.push(c),A[c]=1),b&&L.push([y,l,-1]))}return E}function v(o,b,g){for(var d=0,c=0;c<o.length;++c)b[c]===g&&(o[d++]=o[c]);return o.length=d,o}function s(o,b,g){var d=r(o,g);if(b===0)return g?d.cells.concat(d.boundary):d.cells;for(var c=1,m=d.active,l=d.next,y=d.flags,u=d.cells,A=d.constraint,_=d.neighbor;m.length>0||l.length>0;){for(;m.length>0;){var p=m.pop();if(y[p]!==-c){y[p]=c,u[p];for(var w=0;w<3;++w){var h=_[3*p+w];h>=0&&y[h]===0&&(A[3*p+w]?l.push(h):(m.push(h),y[h]=c))}}}var L=l;l=m,m=L,l.length=0,c=-c}var E=v(u,y,b);return g?E.concat(d.boundary):E}},{"binary-search-bounds":31}],45:[function(f,M,T){var e=f("binary-search-bounds"),a=f("robust-orientation")[3],i=0,n=1,r=2;M.exports=l;function v(y,u,A,_,p){this.a=y,this.b=u,this.idx=A,this.lowerIds=_,this.upperIds=p}function s(y,u,A,_){this.a=y,this.b=u,this.type=A,this.idx=_}function o(y,u){var A=y.a[0]-u.a[0]||y.a[1]-u.a[1]||y.type-u.type;return A||y.type!==i&&(A=a(y.a,y.b,u.b),A)?A:y.idx-u.idx}function b(y,u){return a(y.a,y.b,u)}function g(y,u,A,_,p){for(var w=e.lt(u,_,b),h=e.gt(u,_,b),L=w;L<h;++L){for(var E=u[L],S=E.lowerIds,F=S.length;F>1&&a(A[S[F-2]],A[S[F-1]],_)>0;)y.push([S[F-1],S[F-2],p]),F-=1;S.length=F,S.push(p);for(var P=E.upperIds,F=P.length;F>1&&a(A[P[F-2]],A[P[F-1]],_)<0;)y.push([P[F-2],P[F-1],p]),F-=1;P.length=F,P.push(p)}}function d(y,u){var A;return y.a[0]<u.a[0]?A=a(y.a,y.b,u.a):A=a(u.b,u.a,y.a),A||(u.b[0]<y.b[0]?A=a(y.a,y.b,u.b):A=a(u.b,u.a,y.b),A||y.idx-u.idx)}function c(y,u,A){var _=e.le(y,A,d),p=y[_],w=p.upperIds,h=w[w.length-1];p.upperIds=[h],y.splice(_+1,0,new v(A.a,A.b,A.idx,[h],w))}function m(y,u,A){var _=A.a;A.a=A.b,A.b=_;var p=e.eq(y,A,d),w=y[p],h=y[p-1];h.upperIds=w.upperIds,y.splice(p,1)}function l(y,u){for(var A=y.length,_=u.length,p=[],w=0;w<A;++w)p.push(new s(y[w],null,i,w));for(var w=0;w<_;++w){var h=u[w],L=y[h[0]],E=y[h[1]];L[0]<E[0]?p.push(new s(L,E,r,w),new s(E,L,n,w)):L[0]>E[0]&&p.push(new s(E,L,r,w),new s(L,E,n,w))}p.sort(o);for(var S=p[0].a[0]-(1+Math.abs(p[0].a[0]))*Math.pow(2,-52),P=[new v([S,1],[S,0],-1,[],[])],F=[],w=0,I=p.length;w<I;++w){var D=p[w],R=D.type;R===i?g(F,P,y,D.a,D.idx):R===r?c(P,y,D):m(P,y,D)}return F}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(f,M,T){var e=f("binary-search-bounds");M.exports=r;function a(v,s){this.stars=v,this.edges=s}var i=a.prototype;function n(v,s,o){for(var b=1,g=v.length;b<g;b+=2)if(v[b-1]===s&&v[b]===o){v[b-1]=v[g-2],v[b]=v[g-1],v.length=g-2;return}}i.isConstraint=function(){var v=[0,0];function s(o,b){return o[0]-b[0]||o[1]-b[1]}return function(o,b){return v[0]=Math.min(o,b),v[1]=Math.max(o,b),e.eq(this.edges,v,s)>=0}}(),i.removeTriangle=function(v,s,o){var b=this.stars;n(b[v],s,o),n(b[s],o,v),n(b[o],v,s)},i.addTriangle=function(v,s,o){var b=this.stars;b[v].push(s,o),b[s].push(o,v),b[o].push(v,s)},i.opposite=function(v,s){for(var o=this.stars[s],b=1,g=o.length;b<g;b+=2)if(o[b]===v)return o[b-1];return-1},i.flip=function(v,s){var o=this.opposite(v,s),b=this.opposite(s,v);this.removeTriangle(v,s,o),this.removeTriangle(s,v,b),this.addTriangle(v,b,o),this.addTriangle(s,o,b)},i.edges=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,c=g.length;d<c;d+=2)s.push([g[d],g[d+1]]);return s},i.cells=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,c=g.length;d<c;d+=2){var m=g[d],l=g[d+1];o<Math.min(m,l)&&s.push([o,m,l])}return s};function r(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=[];return new a(o,s)}},{"binary-search-bounds":31}],47:[function(f,M,T){M.exports=e;function e(a){for(var i=1,n=1;n<a.length;++n)for(var r=0;r<n;++r)if(a[n]<a[r])i=-i;else if(a[r]===a[n])return 0;return i}},{}],48:[function(f,M,T){var e=f("dup"),a=f("robust-linear-solve");function i(v,s){for(var o=0,b=v.length,g=0;g<b;++g)o+=v[g]*s[g];return o}function n(v){var s=v.length;if(s===0)return[];v[0].length;var o=e([v.length+1,v.length+1],1),b=e([v.length+1],1);o[s][s]=0;for(var g=0;g<s;++g){for(var d=0;d<=g;++d)o[d][g]=o[g][d]=2*i(v[g],v[d]);b[g]=i(v[g],v[g])}for(var c=a(o,b),m=0,l=c[s+1],g=0;g<l.length;++g)m+=l[g];for(var y=new Array(s),g=0;g<s;++g){for(var l=c[g],u=0,d=0;d<l.length;++d)u+=l[d];y[g]=u/m}return y}function r(v){if(v.length===0)return[];for(var s=v[0].length,o=e([s]),b=n(v),g=0;g<v.length;++g)for(var d=0;d<s;++d)o[d]+=v[g][d]*b[g];return o}r.barycenetric=n,M.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(f,M,T){M.exports=a;var e=f("circumcenter");function a(i){for(var n=e(i),r=0,v=0;v<i.length;++v)for(var s=i[v],o=0;o<n.length;++o)r+=Math.pow(s[o]-n[o],2);return Math.sqrt(r/i.length)}},{circumcenter:48}],50:[function(f,M,T){M.exports=L;var e=f("union-find"),a=f("box-intersect"),i=f("robust-segment-intersect"),n=f("big-rat"),r=f("big-rat/cmp"),v=f("big-rat/to-float"),s=f("rat-vec"),o=f("nextafter"),b=f("./lib/rat-seg-intersect");function g(E){var S=v(E);return[o(S,-1/0),o(S,1/0)]}function d(E,S){for(var P=new Array(S.length),F=0;F<S.length;++F){var I=S[F],D=E[I[0]],R=E[I[1]];P[F]=[o(Math.min(D[0],R[0]),-1/0),o(Math.min(D[1],R[1]),-1/0),o(Math.max(D[0],R[0]),1/0),o(Math.max(D[1],R[1]),1/0)]}return P}function c(E){for(var S=new Array(E.length),P=0;P<E.length;++P){var F=E[P];S[P]=[o(F[0],-1/0),o(F[1],-1/0),o(F[0],1/0),o(F[1],1/0)]}return S}function m(E,S,P){var F=[];return a(P,function(I,D){var R=S[I],O=S[D];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var z=E[R[0]],H=E[R[1]],Y=E[O[0]],ee=E[O[1]];i(z,H,Y,ee)&&F.push([I,D])}}),F}function l(E,S,P,F){var I=[];return a(P,F,function(D,R){var O=S[D];if(!(O[0]===R||O[1]===R)){var z=E[R],H=E[O[0]],Y=E[O[1]];i(H,Y,z,z)&&I.push([D,R])}}),I}function y(E,S,P,F,I){var D,R,O=E.map(function(ie){return[n(ie[0]),n(ie[1])]});for(D=0;D<P.length;++D){var z=P[D];R=z[0];var H=z[1],Y=S[R],ee=S[H],j=b(s(E[Y[0]]),s(E[Y[1]]),s(E[ee[0]]),s(E[ee[1]]));if(!!j){var X=E.length;E.push([v(j[0]),v(j[1])]),O.push(j),F.push([R,X],[H,X])}}for(F.sort(function(ie,oe){if(ie[0]!==oe[0])return ie[0]-oe[0];var ne=O[ie[1]],se=O[oe[1]];return r(ne[0],se[0])||r(ne[1],se[1])}),D=F.length-1;D>=0;--D){var ae=F[D];R=ae[0];var fe=S[R],K=fe[0],J=fe[1],U=E[K],V=E[J];if((U[0]-V[0]||U[1]-V[1])<0){var q=K;K=J,J=q}fe[0]=K;var re=fe[1]=ae[1],Z;for(I&&(Z=fe[2]);D>0&&F[D-1][0]===R;){var ae=F[--D],Q=ae[1];I?S.push([re,Q,Z]):S.push([re,Q]),re=Q}I?S.push([re,J,Z]):S.push([re,J])}return O}function u(E,S,P){for(var F=S.length,I=new e(F),D=[],R=0;R<S.length;++R){var O=S[R],z=g(O[0]),H=g(O[1]);D.push([o(z[0],-1/0),o(H[0],-1/0),o(z[1],1/0),o(H[1],1/0)])}a(D,function(ae,fe){I.link(ae,fe)});for(var Y=!0,ee=new Array(F),R=0;R<F;++R){var j=I.find(R);j!==R&&(Y=!1,E[j]=[Math.min(E[R][0],E[j][0]),Math.min(E[R][1],E[j][1])])}if(Y)return null;for(var X=0,R=0;R<F;++R){var j=I.find(R);j===R?(ee[R]=X,E[X++]=E[R]):ee[R]=-1}E.length=X;for(var R=0;R<F;++R)ee[R]<0&&(ee[R]=ee[I.find(R)]);return ee}function A(E,S){return E[0]-S[0]||E[1]-S[1]}function _(E,S){var P=E[0]-S[0]||E[1]-S[1];return P||(E[2]<S[2]?-1:E[2]>S[2]?1:0)}function p(E,S,P){if(E.length!==0){if(S)for(var F=0;F<E.length;++F){var I=E[F],D=S[I[0]],R=S[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var F=0;F<E.length;++F){var I=E[F],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}P?E.sort(_):E.sort(A);for(var O=1,F=1;F<E.length;++F){var z=E[F-1],H=E[F];H[0]===z[0]&&H[1]===z[1]&&(!P||H[2]===z[2])||(E[O++]=H)}E.length=O}}function w(E,S,P){var F=u(E,[],c(E));return p(S,F,P),!!F}function h(E,S,P){var F=d(E,S),I=m(E,S,F),D=c(E),R=l(E,S,F,D),O=y(E,S,I,R,P),z=u(E,O);return p(S,z,P),z?!0:I.length>0||R.length>0}function L(E,S,P){var F;if(P){F=S;for(var I=new Array(S.length),D=0;D<S.length;++D){var R=S[D];I[D]=[R[0],R[1],P[D]]}S=I}for(var O=w(E,S,!!P);h(E,S,!!P);)O=!0;if(!!P&&O){F.length=0,P.length=0;for(var D=0;D<S.length;++D){var R=S[D];F.push([R[0],R[1]]),P.push(R[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(f,M,T){M.exports=b;var e=f("big-rat/mul"),a=f("big-rat/div"),i=f("big-rat/sub"),n=f("big-rat/sign"),r=f("rat-vec/sub"),v=f("rat-vec/add"),s=f("rat-vec/muls");function o(g,d){return i(e(g[0],d[1]),e(g[1],d[0]))}function b(g,d,c,m){var l=r(d,g),y=r(m,c),u=o(l,y);if(n(u)===0)return null;var A=r(g,c),_=o(y,A),p=a(_,u),w=s(l,p),h=v(g,w);return h}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(f,M,T){M.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(f,M,T){var e=f("./colorScale"),a=f("lerp");M.exports=i;function i(s){var o,b,g,d,c,m,l,y,p,u,A;if(s||(s={}),y=(s.nshades||72)-1,l=s.format||"hex",m=s.colormap,m||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!e[m])throw Error(m+" not a supported colorscale");c=e[m]}else if(Array.isArray(m))c=m.slice();else throw Error("unsupported colormap option",m);if(c.length>y+1)throw new Error(m+" map requires nshades to be at least size "+c.length);Array.isArray(s.alpha)?s.alpha.length!==2?u=[1,1]:u=s.alpha.slice():typeof s.alpha=="number"?u=[s.alpha,s.alpha]:u=[1,1],o=c.map(function(L){return Math.round(L.index*y)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var _=c.map(function(L,E){var S=c[E].index,P=c[E].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=u[0]+(u[1]-u[0])*S),P}),p=[];for(A=0;A<o.length-1;++A){d=o[A+1]-o[A],b=_[A],g=_[A+1];for(var w=0;w<d;w++){var h=w/d;p.push([Math.round(a(b[0],g[0],h)),Math.round(a(b[1],g[1],h)),Math.round(a(b[2],g[2],h)),a(b[3],g[3],h)])}}return p.push(c[c.length-1].rgb.concat(u[1])),l==="hex"?p=p.map(r):l==="rgbaString"?p=p.map(v):l==="float"&&(p=p.map(n)),p}function n(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function r(s){for(var o,b="#",g=0;g<3;++g)o=s[g],o=o.toString(16),b+=("00"+o).substr(o.length);return b}function v(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(f,M,T){M.exports=s;var e=f("robust-orientation"),a=f("signum"),i=f("two-sum"),n=f("robust-product"),r=f("robust-sum");function v(o,b,g){var d=i(o[0],-b[0]),c=i(o[1],-b[1]),m=i(g[0],-b[0]),l=i(g[1],-b[1]),y=r(n(d,m),n(c,l));return y[y.length-1]>=0}function s(o,b,g,d){var c=e(b,g,d);if(c===0){var m=a(e(o,b,g)),l=a(e(o,b,d));if(m===l){if(m===0){var y=v(o,b,g),u=v(o,b,d);return y===u?0:y?1:-1}return 0}else{if(l===0)return m>0||v(o,b,d)?-1:1;if(m===0)return l>0||v(o,b,g)?1:-1}return a(l-m)}var A=e(o,b,g);if(A>0)return c>0&&e(o,b,d)>0?1:-1;if(A<0)return c>0||e(o,b,d)>0?1:-1;var _=e(o,b,d);return _>0||v(o,b,g)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(f,M,T){M.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(f,M,T){M.exports=i;var e=Math.min;function a(n,r){return n-r}function i(n,r){var v=n.length,s=n.length-r.length;if(s)return s;switch(v){case 0:return 0;case 1:return n[0]-r[0];case 2:return n[0]+n[1]-r[0]-r[1]||e(n[0],n[1])-e(r[0],r[1]);case 3:var o=n[0]+n[1],b=r[0]+r[1];if(s=o+n[2]-(b+r[2]),s)return s;var g=e(n[0],n[1]),d=e(r[0],r[1]);return e(g,n[2])-e(d,r[2])||e(g+n[2],o)-e(d+r[2],b);case 4:var c=n[0],m=n[1],l=n[2],y=n[3],u=r[0],A=r[1],_=r[2],p=r[3];return c+m+l+y-(u+A+_+p)||e(c,m,l,y)-e(u,A,_,p,u)||e(c+m,c+l,c+y,m+l,m+y,l+y)-e(u+A,u+_,u+p,A+_,A+p,_+p)||e(c+m+l,c+m+y,c+l+y,m+l+y)-e(u+A+_,u+A+p,u+_+p,A+_+p);default:for(var w=n.slice().sort(a),h=r.slice().sort(a),L=0;L<v;++L)if(s=w[L]-h[L],s)return s;return 0}}},{}],57:[function(f,M,T){var e=f("compare-cell"),a=f("cell-orientation");M.exports=i;function i(n,r){return e(n,r)||a(n)-a(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(f,M,T){var e=f("./lib/ch1d"),a=f("./lib/ch2d"),i=f("./lib/chnd");M.exports=n;function n(r){var v=r.length;if(v===0)return[];if(v===1)return[[0]];var s=r[0].length;return s===0?[]:s===1?e(r):s===2?a(r):i(r,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(f,M,T){M.exports=e;function e(a){for(var i=0,n=0,r=1;r<a.length;++r)a[r][0]<a[i][0]&&(i=r),a[r][0]>a[n][0]&&(n=r);return i<n?[[i],[n]]:i>n?[[n],[i]]:[[i]]}},{}],60:[function(f,M,T){M.exports=a;var e=f("monotone-convex-hull-2d");function a(i){var n=e(i),r=n.length;if(r<=2)return[];for(var v=new Array(r),s=n[r-1],o=0;o<r;++o){var b=n[o];v[o]=[s,b],s=b}return v}},{"monotone-convex-hull-2d":246}],61:[function(f,M,T){M.exports=r;var e=f("incremental-convex-hull"),a=f("affine-hull");function i(v,s){for(var o=v.length,b=new Array(o),g=0;g<s.length;++g)b[g]=v[s[g]];for(var d=s.length,g=0;g<o;++g)s.indexOf(g)<0&&(b[d++]=v[g]);return b}function n(v,s){for(var o=v.length,b=s.length,g=0;g<o;++g)for(var d=v[g],c=0;c<d.length;++c){var m=d[c];if(m<b)d[c]=s[m];else{m=m-b;for(var l=0;l<b;++l)m>=s[l]&&(m+=1);d[c]=m}}return v}function r(v,s){try{return e(v,!0)}catch{var o=a(v);if(o.length<=s)return[];var b=i(v,o),g=e(b,!0);return n(g,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(f,M,T){function e(i,n,r,v,s,o){var b=6*s*s-6*s,g=3*s*s-4*s+1,d=-6*s*s+6*s,c=3*s*s-2*s;if(i.length){o||(o=new Array(i.length));for(var m=i.length-1;m>=0;--m)o[m]=b*i[m]+g*n[m]+d*r[m]+c*v[m];return o}return b*i+g*n+d*r[m]+c*v}function a(i,n,r,v,s,o){var b=s-1,g=s*s,d=b*b,c=(1+2*s)*d,m=s*d,l=g*(3-2*s),y=g*b;if(i.length){o||(o=new Array(i.length));for(var u=i.length-1;u>=0;--u)o[u]=c*i[u]+m*n[u]+l*r[u]+y*v[u];return o}return c*i+m*n+l*r+y*v}M.exports=a,M.exports.derivative=e},{}],63:[function(f,M,T){var e=f("incremental-convex-hull"),a=f("uniq");M.exports=v;function i(s,o){this.point=s,this.index=o}function n(s,o){for(var b=s.point,g=o.point,d=b.length,c=0;c<d;++c){var m=g[c]-b[c];if(m)return m}return 0}function r(s,o,b){if(s===1)return b?[[-1,0]]:[];var g=o.map(function(y,u){return[y[0],u]});g.sort(function(y,u){return y[0]-u[0]});for(var d=new Array(s-1),c=1;c<s;++c){var m=g[c-1],l=g[c];d[c-1]=[m[1],l[1]]}return b&&d.push([-1,d[0][1]],[d[s-1][1],-1]),d}function v(s,o){var b=s.length;if(b===0)return[];var g=s[0].length;if(g<1)return[];if(g===1)return r(b,s,o);for(var d=new Array(b),c=1,m=0;m<b;++m){for(var l=s[m],y=new Array(g+1),u=0,A=0;A<g;++A){var _=l[A];y[A]=_,u+=_*_}y[g]=u,d[m]=new i(y,m),c=Math.max(u,c)}a(d,n),b=d.length;for(var p=new Array(b+g+1),w=new Array(b+g+1),h=(g+1)*(g+1)*c,L=new Array(g+1),m=0;m<=g;++m)L[m]=0;L[g]=h,p[0]=L.slice(),w[0]=-1;for(var m=0;m<=g;++m){var y=L.slice();y[m]=1,p[m+1]=y,w[m+1]=-1}for(var m=0;m<b;++m){var E=d[m];p[m+g+1]=E.point,w[m+g+1]=E.index}var S=e(p,!1);if(o?S=S.filter(function(P){for(var F=0,I=0;I<=g;++I){var D=w[P[I]];if(D<0&&++F>=2)return!1;P[I]=D}return!0}):S=S.filter(function(P){for(var F=0;F<=g;++F){var I=w[P[F]];if(I<0)return!1;P[F]=I}return!0}),g&1)for(var m=0;m<S.length;++m){var E=S[m],y=E[0];E[0]=E[1],E[1]=y}return S}},{"incremental-convex-hull":233,uniq:310}],64:[function(f,M,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,a=!0,n[1]===1072693248){let y=function(_,p){return n[0]=_,n[1]=p,i[0]},u=function(_){return i[0]=_,n[0]},A=function(_){return i[0]=_,n[1]};var v=y,s=u,o=A;M.exports=function(p){return i[0]=p,[n[0],n[1]]},M.exports.pack=y,M.exports.lo=u,M.exports.hi=A}else if(n[0]===1072693248){let y=function(_,p){return n[1]=_,n[0]=p,i[0]},u=function(_){return i[0]=_,n[1]},A=function(_){return i[0]=_,n[0]};var b=y,g=u,d=A;M.exports=function(p){return i[0]=p,[n[1],n[0]]},M.exports.pack=y,M.exports.lo=u,M.exports.hi=A}else a=!1}if(!a){let y=function(_,p){return r.writeUInt32LE(_,0,!0),r.writeUInt32LE(p,4,!0),r.readDoubleLE(0,!0)},u=function(_){return r.writeDoubleLE(_,0,!0),r.readUInt32LE(0,!0)},A=function(_){return r.writeDoubleLE(_,0,!0),r.readUInt32LE(4,!0)};var c=y,m=u,l=A,r=new e(8);M.exports=function(p){return r.writeDoubleLE(p,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},M.exports.pack=y,M.exports.lo=u,M.exports.hi=A}M.exports.sign=function(y){return M.exports.hi(y)>>>31},M.exports.exponent=function(y){var u=M.exports.hi(y);return(u<<1>>>21)-1023},M.exports.fraction=function(y){var u=M.exports.lo(y),A=M.exports.hi(y),_=A&(1<<20)-1;return A&2146435072&&(_+=1<<20),[u,_]},M.exports.denormalized=function(y){var u=M.exports.hi(y);return!(u&2146435072)}}).call(this)}).call(this,f("buffer").Buffer)},{buffer:3}],65:[function(f,M,T){function e(n,r,v){var s=n[v]|0;if(s<=0)return[];var o=new Array(s),b;if(v===n.length-1)for(b=0;b<s;++b)o[b]=r;else for(b=0;b<s;++b)o[b]=e(n,r,v+1);return o}function a(n,r){var v,s;for(v=new Array(n),s=0;s<n;++s)v[s]=r;return v}function i(n,r){switch(typeof r>"u"&&(r=0),typeof n){case"number":if(n>0)return a(n|0,r);break;case"object":if(typeof n.length=="number")return e(n,r,0);break}return[]}M.exports=i},{}],66:[function(f,M,T){M.exports=a;var e=f("uniq");function a(i,n){var r=i.length;if(typeof n!="number"){n=0;for(var v=0;v<r;++v){var s=i[v];n=Math.max(n,s[0],s[1])}n=(n|0)+1}n=n|0;for(var o=new Array(n),v=0;v<n;++v)o[v]=[];for(var v=0;v<r;++v){var s=i[v];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var b=0;b<n;++b)e(o[b],function(g,d){return g-d});return o}},{uniq:310}],67:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i||0,v=n||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[r*a[12]+a[8],r*a[13]+a[9],r*a[14]+a[10],r*a[15]+a[11]],[v*a[12]-a[8],v*a[13]-a[9],v*a[14]-a[10],v*a[15]-a[11]]]}},{}],68:[function(f,M,T){M.exports=s;var e=f("cubic-hermite"),a=f("binary-search-bounds");function i(o,b,g){return Math.min(b,Math.max(o,g))}function n(o,b,g){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=o.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[g],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var r=n.prototype;r.flush=function(o){var b=a.gt(this._time,o)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},r.curve=function(o){var b=this._time,g=b.length,d=a.le(b,o),c=this._scratch[0],m=this._state,l=this._velocity,y=this.dimension,u=this.bounds;if(d<0)for(var A=y-1,_=0;_<y;++_,--A)c[_]=m[A];else if(d>=g-1)for(var A=m.length-1,p=o-b[g-1],_=0;_<y;++_,--A)c[_]=m[A]+p*l[A];else{for(var A=y*(d+1)-1,w=b[d],h=b[d+1],L=h-w||1,E=this._scratch[1],S=this._scratch[2],P=this._scratch[3],F=this._scratch[4],I=!0,_=0;_<y;++_,--A)E[_]=m[A],P[_]=l[A]*L,S[_]=m[A+y],F[_]=l[A+y]*L,I=I&&E[_]===S[_]&&P[_]===F[_]&&P[_]===0;if(I)for(var _=0;_<y;++_)c[_]=E[_];else e(E,P,S,F,(o-w)/L,c)}for(var D=u[0],R=u[1],_=0;_<y;++_)c[_]=i(D[_],R[_],c[_]);return c},r.dcurve=function(o){var b=this._time,g=b.length,d=a.le(b,o),c=this._scratch[0],m=this._state,l=this._velocity,y=this.dimension;if(d>=g-1){var u=m.length-1;o-b[g-1];for(var A=0;A<y;++A,--u)c[A]=l[u]}else{for(var u=y*(d+1)-1,_=b[d],p=b[d+1],w=p-_||1,h=this._scratch[1],L=this._scratch[2],E=this._scratch[3],S=this._scratch[4],P=!0,A=0;A<y;++A,--u)h[A]=m[u],E[A]=l[u]*w,L[A]=m[u+y],S[A]=l[u+y]*w,P=P&&h[A]===L[A]&&E[A]===S[A]&&E[A]===0;if(P)for(var A=0;A<y;++A)c[A]=0;else{e.derivative(h,E,L,S,(o-_)/w,c);for(var A=0;A<y;++A)c[A]/=w}}return c},r.lastT=function(){var o=this._time;return o[o.length-1]},r.stable=function(){for(var o=this._velocity,b=o.length,g=this.dimension-1;g>=0;--g)if(o[--b])return!1;return!0},r.jump=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,c=this._velocity,m=d.length-this.dimension,l=this.bounds,y=l[0],u=l[1];this._time.push(b,o);for(var A=0;A<2;++A)for(var _=0;_<g;++_)d.push(d[m++]),c.push(0);this._time.push(o);for(var _=g;_>0;--_)d.push(i(y[_-1],u[_-1],arguments[_])),c.push(0)}},r.push=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,c=this._velocity,m=d.length-this.dimension,l=o-b,y=this.bounds,u=y[0],A=y[1],_=l>1e-6?1/l:0;this._time.push(o);for(var p=g;p>0;--p){var w=i(u[p-1],A[p-1],arguments[p]);d.push(w),c.push((w-d[m++])*_)}}},r.set=function(o){var b=this.dimension;if(!(o<this.lastT()||arguments.length!==b+1)){var g=this._state,d=this._velocity,c=this.bounds,m=c[0],l=c[1];this._time.push(o);for(var y=b;y>0;--y)g.push(i(m[y-1],l[y-1],arguments[y])),d.push(0)}},r.move=function(o){var b=this.lastT(),g=this.dimension;if(!(o<=b||arguments.length!==g+1)){var d=this._state,c=this._velocity,m=d.length-this.dimension,l=this.bounds,y=l[0],u=l[1],A=o-b,_=A>1e-6?1/A:0;this._time.push(o);for(var p=g;p>0;--p){var w=arguments[p];d.push(i(y[p-1],u[p-1],d[m++]+w)),c.push(w*_)}}},r.idle=function(o){var b=this.lastT();if(!(o<b)){var g=this.dimension,d=this._state,c=this._velocity,m=d.length-g,l=this.bounds,y=l[0],u=l[1],A=o-b;this._time.push(o);for(var _=g-1;_>=0;--_)d.push(i(y[_],u[_],d[m]+A*c[m])),c.push(0),m+=1}};function v(o){for(var b=new Array(o),g=0;g<o;++g)b[g]=0;return b}function s(o,b,g){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if(typeof o=="number"){var d=v(o);return new n(d,d,0)}else return new n(o,v(o.length),0);case 2:if(typeof b=="number"){var d=v(o.length);return new n(o,d,+b)}else g=0;case 3:if(o.length!==b.length)throw new Error("state and velocity lengths must match");return new n(o,b,g)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(f,M,T){M.exports=A;var e=0,a=1;function i(_,p,w,h,L,E){this._color=_,this.key=p,this.value=w,this.left=h,this.right=L,this._count=E}function n(_){return new i(_._color,_.key,_.value,_.left,_.right,_._count)}function r(_,p){return new i(_,p.key,p.value,p.left,p.right,p._count)}function v(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function s(_,p){this._compare=_,this.root=p}var o=s.prototype;Object.defineProperty(o,"keys",{get:function(){var _=[];return this.forEach(function(p,w){_.push(p)}),_}}),Object.defineProperty(o,"values",{get:function(){var _=[];return this.forEach(function(p,w){_.push(w)}),_}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(_,p){for(var w=this._compare,h=this.root,L=[],E=[];h;){var S=w(_,h.key);L.push(h),E.push(S),S<=0?h=h.left:h=h.right}L.push(new i(e,_,p,null,null,1));for(var P=L.length-2;P>=0;--P){var h=L[P];E[P]<=0?L[P]=new i(h._color,h.key,h.value,L[P+1],h.right,h._count+1):L[P]=new i(h._color,h.key,h.value,h.left,L[P+1],h._count+1)}for(var P=L.length-1;P>1;--P){var F=L[P-1],h=L[P];if(F._color===a||h._color===a)break;var I=L[P-2];if(I.left===F)if(F.left===h){var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.left=F.right,F._color=a,F.right=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.left===I?R.left=F:R.right=F}break}}else{var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(F.right=h.left,I._color=e,I.left=h.right,h._color=a,h.left=F,h.right=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.left===I?R.left=h:R.right=h}break}}else if(F.right===h){var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.right=F.left,F._color=a,F.left=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.right===I?R.right=F:R.left=F}break}}else{var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(F.left=h.right,I._color=e,I.right=h.left,h._color=a,h.right=F,h.left=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.right===I?R.right=h:R.left=h}break}}}return L[0]._color=a,new s(w,L[0])};function b(_,p){if(p.left){var w=b(_,p.left);if(w)return w}var w=_(p.key,p.value);if(w)return w;if(p.right)return b(_,p.right)}function g(_,p,w,h){var L=p(_,h.key);if(L<=0){if(h.left){var E=g(_,p,w,h.left);if(E)return E}var E=w(h.key,h.value);if(E)return E}if(h.right)return g(_,p,w,h.right)}function d(_,p,w,h,L){var E=w(_,L.key),S=w(p,L.key),P;if(E<=0&&(L.left&&(P=d(_,p,w,h,L.left),P)||S>0&&(P=h(L.key,L.value),P)))return P;if(S>0&&L.right)return d(_,p,w,h,L.right)}o.forEach=function(p,w,h){if(!!this.root)switch(arguments.length){case 1:return b(p,this.root);case 2:return g(w,this._compare,p,this.root);case 3:return this._compare(w,h)>=0?void 0:d(w,h,this._compare,p,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var _=[],p=this.root;p;)_.push(p),p=p.left;return new c(this,_)}}),Object.defineProperty(o,"end",{get:function(){for(var _=[],p=this.root;p;)_.push(p),p=p.right;return new c(this,_)}}),o.at=function(_){if(_<0)return new c(this,[]);for(var p=this.root,w=[];;){if(w.push(p),p.left){if(_<p.left._count){p=p.left;continue}_-=p.left._count}if(!_)return new c(this,w);if(_-=1,p.right){if(_>=p.right._count)break;p=p.right}else break}return new c(this,[])},o.ge=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var E=p(_,w.key);h.push(w),E<=0&&(L=h.length),E<=0?w=w.left:w=w.right}return h.length=L,new c(this,h)},o.gt=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var E=p(_,w.key);h.push(w),E<0&&(L=h.length),E<0?w=w.left:w=w.right}return h.length=L,new c(this,h)},o.lt=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var E=p(_,w.key);h.push(w),E>0&&(L=h.length),E<=0?w=w.left:w=w.right}return h.length=L,new c(this,h)},o.le=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var E=p(_,w.key);h.push(w),E>=0&&(L=h.length),E<0?w=w.left:w=w.right}return h.length=L,new c(this,h)},o.find=function(_){for(var p=this._compare,w=this.root,h=[];w;){var L=p(_,w.key);if(h.push(w),L===0)return new c(this,h);L<=0?w=w.left:w=w.right}return new c(this,[])},o.remove=function(_){var p=this.find(_);return p?p.remove():this},o.get=function(_){for(var p=this._compare,w=this.root;w;){var h=p(_,w.key);if(h===0)return w.value;h<=0?w=w.left:w=w.right}};function c(_,p){this.tree=_,this._stack=p}var m=c.prototype;Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new c(this.tree,this._stack.slice())};function l(_,p){_.key=p.key,_.value=p.value,_.left=p.left,_.right=p.right,_._color=p._color,_._count=p._count}function y(_){for(var p,w,h,L,E=_.length-1;E>=0;--E){if(p=_[E],E===0){p._color=a;return}if(w=_[E-1],w.left===p){if(h=w.right,h.right&&h.right._color===e){if(h=w.right=n(h),L=h.right=n(h.right),w.right=h.left,h.left=w,h.right=L,h._color=w._color,p._color=a,w._color=a,L._color=a,v(w),v(h),E>1){var S=_[E-2];S.left===w?S.left=h:S.right=h}_[E-1]=h;return}else if(h.left&&h.left._color===e){if(h=w.right=n(h),L=h.left=n(h.left),w.right=L.left,h.left=L.right,L.left=w,L.right=h,L._color=w._color,w._color=a,h._color=a,p._color=a,v(w),v(h),v(L),E>1){var S=_[E-2];S.left===w?S.left=L:S.right=L}_[E-1]=L;return}if(h._color===a)if(w._color===e){w._color=a,w.right=r(e,h);return}else{w.right=r(e,h);continue}else{if(h=n(h),w.right=h.left,h.left=w,h._color=w._color,w._color=e,v(w),v(h),E>1){var S=_[E-2];S.left===w?S.left=h:S.right=h}_[E-1]=h,_[E]=w,E+1<_.length?_[E+1]=p:_.push(p),E=E+2}}else{if(h=w.left,h.left&&h.left._color===e){if(h=w.left=n(h),L=h.left=n(h.left),w.left=h.right,h.right=w,h.left=L,h._color=w._color,p._color=a,w._color=a,L._color=a,v(w),v(h),E>1){var S=_[E-2];S.right===w?S.right=h:S.left=h}_[E-1]=h;return}else if(h.right&&h.right._color===e){if(h=w.left=n(h),L=h.right=n(h.right),w.left=L.right,h.right=L.left,L.right=w,L.left=h,L._color=w._color,w._color=a,h._color=a,p._color=a,v(w),v(h),v(L),E>1){var S=_[E-2];S.right===w?S.right=L:S.left=L}_[E-1]=L;return}if(h._color===a)if(w._color===e){w._color=a,w.left=r(e,h);return}else{w.left=r(e,h);continue}else{if(h=n(h),w.left=h.right,h.right=w,h._color=w._color,w._color=e,v(w),v(h),E>1){var S=_[E-2];S.right===w?S.right=h:S.left=h}_[E-1]=h,_[E]=w,E+1<_.length?_[E+1]=p:_.push(p),E=E+2}}}}m.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var p=new Array(_.length),w=_[_.length-1];p[p.length-1]=new i(w._color,w.key,w.value,w.left,w.right,w._count);for(var h=_.length-2;h>=0;--h){var w=_[h];w.left===_[h+1]?p[h]=new i(w._color,w.key,w.value,p[h+1],w.right,w._count):p[h]=new i(w._color,w.key,w.value,w.left,p[h+1],w._count)}if(w=p[p.length-1],w.left&&w.right){var L=p.length;for(w=w.left;w.right;)p.push(w),w=w.right;var E=p[L-1];p.push(new i(w._color,E.key,E.value,w.left,w.right,w._count)),p[L-1].key=w.key,p[L-1].value=w.value;for(var h=p.length-2;h>=L;--h)w=p[h],p[h]=new i(w._color,w.key,w.value,w.left,p[h+1],w._count);p[L-1].left=p[L]}if(w=p[p.length-1],w._color===e){var S=p[p.length-2];S.left===w?S.left=null:S.right===w&&(S.right=null),p.pop();for(var h=0;h<p.length;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else if(w.left||w.right){w.left?l(w,w.left):w.right&&l(w,w.right),w._color=a;for(var h=0;h<p.length-1;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else{if(p.length===1)return new s(this.tree._compare,null);for(var h=0;h<p.length;++h)p[h]._count--;var P=p[p.length-2];y(p),P.left===w?P.left=null:P.right=null}return new s(this.tree._compare,p[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var _=0,p=this._stack;if(p.length===0){var w=this.tree.root;return w?w._count:0}else p[p.length-1].left&&(_=p[p.length-1].left._count);for(var h=p.length-2;h>=0;--h)p[h+1]===p[h].right&&(++_,p[h].left&&(_+=p[h].left._count));return _},enumerable:!0}),m.next=function(){var _=this._stack;if(_.length!==0){var p=_[_.length-1];if(p.right)for(p=p.right;p;)_.push(p),p=p.left;else for(_.pop();_.length>0&&_[_.length-1].right===p;)p=_[_.length-1],_.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var p=_.length-1;p>0;--p)if(_[p-1].left===_[p])return!0;return!1}}),m.update=function(_){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var w=new Array(p.length),h=p[p.length-1];w[w.length-1]=new i(h._color,h.key,_,h.left,h.right,h._count);for(var L=p.length-2;L>=0;--L)h=p[L],h.left===p[L+1]?w[L]=new i(h._color,h.key,h.value,w[L+1],h.right,h._count):w[L]=new i(h._color,h.key,h.value,h.left,w[L+1],h._count);return new s(this.tree._compare,w[0])},m.prev=function(){var _=this._stack;if(_.length!==0){var p=_[_.length-1];if(p.left)for(p=p.left;p;)_.push(p),p=p.right;else for(_.pop();_.length>0&&_[_.length-1].left===p;)p=_[_.length-1],_.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var p=_.length-1;p>0;--p)if(_[p-1].right===_[p])return!0;return!1}});function u(_,p){return _<p?-1:_>p?1:0}function A(_){return new s(_||u,null)}},{}],70:[function(f,M,T){M.exports=p;var e=f("./lib/text.js"),a=f("./lib/lines.js"),i=f("./lib/background.js"),n=f("./lib/cube.js"),r=f("./lib/ticks.js"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(w,h){return w[0]=h[0],w[1]=h[1],w[2]=h[2],w}function o(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(w)}var b=o.prototype;b.update=function(w){w=w||{};function h(Y,ee,j){if(j in w){var X=w[j],ae=this[j],fe;(Y?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[j]=fe=[ee(X[0]),ee(X[1]),ee(X[2])]:this[j]=fe=[ee(X),ee(X),ee(X)];for(var K=0;K<3;++K)if(fe[K]!==ae[K])return!0}return!1}var L=h.bind(this,!1,Number),E=h.bind(this,!1,Boolean),S=h.bind(this,!1,String),P=h.bind(this,!0,function(Y){if(Array.isArray(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),F,I=!1,D=!1;if("bounds"in w)for(var R=w.bounds,O=0;O<2;++O)for(var z=0;z<3;++z)R[O][z]!==this.bounds[O][z]&&(D=!0),this.bounds[O][z]=R[O][z];if("ticks"in w){F=w.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(F=r.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)F[O].sort(function(ee,j){return ee.x-j.x});r.equal(F,this.ticks)?I=!1:this.ticks=F}E("tickEnable"),S("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var H=S("labels");S("labelFont")&&(H=!0),E("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),E("lineEnable"),E("lineMirror"),L("lineWidth"),P("lineColor"),E("lineTickEnable"),E("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),E("gridEnable"),L("gridWidth"),P("gridColor"),E("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),E("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(H||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new g,new g,new g];function c(w,h,L,E,S){for(var P=w.primalOffset,F=w.primalMinor,I=w.mirrorOffset,D=w.mirrorMinor,R=E[h],O=0;O<3;++O)if(h!==O){var z=P,H=I,Y=F,ee=D;R&1<<O&&(z=I,H=P,Y=D,ee=F),z[O]=L[0][O],H[O]=L[1][O],S[O]>0?(Y[O]=-1,ee[O]=0):(Y[O]=0,ee[O]=1)}}var m=[0,0,0],l={model:v,view:v,projection:v,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(w){};var y=0,u=[0,0,0],A=[0,0,0],_=[0,0,0];b.draw=function(w){w=w||l;for(var ae=this.gl,h=w.model||v,L=w.view||v,E=w.projection||v,S=this.bounds,P=w._ortho||!1,F=n(h,L,E,S,P),I=F.cubeEdges,D=F.axis,R=L[12],O=L[13],z=L[14],H=L[15],Y=P?2:1,ee=Y*this.pixelRatio*(E[3]*R+E[7]*O+E[11]*z+E[15]*H)/ae.drawingBufferHeight,j=0;j<3;++j)this.lastCubeProps.cubeEdges[j]=I[j],this.lastCubeProps.axis[j]=D[j];for(var X=d,j=0;j<3;++j)c(d[j],j,this.bounds,I,D);for(var ae=this.gl,fe=m,j=0;j<3;++j)this.backgroundEnable[j]?fe[j]=D[j]:fe[j]=0;this._background.draw(h,L,E,S,fe,this.backgroundColor),this._lines.bind(h,L,E,this);for(var j=0;j<3;++j){var K=[0,0,0];D[j]>0?K[j]=S[1][j]:K[j]=S[0][j];for(var J=0;J<2;++J){var U=(j+1+J)%3,V=(j+1+(J^1))%3;this.gridEnable[U]&&this._lines.drawGrid(U,V,this.bounds,K,this.gridColor[U],this.gridWidth[U]*this.pixelRatio)}for(var J=0;J<2;++J){var U=(j+1+J)%3,V=(j+1+(J^1))%3;this.zeroEnable[V]&&Math.min(S[0][V],S[1][V])<=0&&Math.max(S[0][V],S[1][V])>=0&&this._lines.drawZero(U,V,this.bounds,K,this.zeroLineColor[V],this.zeroLineWidth[V]*this.pixelRatio)}}for(var j=0;j<3;++j){this.lineEnable[j]&&this._lines.drawAxisLine(j,this.bounds,X[j].primalOffset,this.lineColor[j],this.lineWidth[j]*this.pixelRatio),this.lineMirror[j]&&this._lines.drawAxisLine(j,this.bounds,X[j].mirrorOffset,this.lineColor[j],this.lineWidth[j]*this.pixelRatio);for(var q=s(u,X[j].primalMinor),re=s(A,X[j].mirrorMinor),Z=this.lineTickLength,J=0;J<3;++J){var Q=ee/h[5*J];q[J]*=Z[J]*Q,re[J]*=Z[J]*Q}this.lineTickEnable[j]&&this._lines.drawAxisTicks(j,X[j].primalOffset,q,this.lineTickColor[j],this.lineTickWidth[j]*this.pixelRatio),this.lineTickMirror[j]&&this._lines.drawAxisTicks(j,X[j].mirrorOffset,re,this.lineTickColor[j],this.lineTickWidth[j]*this.pixelRatio)}this._lines.unbind(),this._text.bind(h,L,E,this.pixelRatio);var ie,oe=.5,ne,se;function _e(Se){se=[0,0,0],se[Se]=1}function ue(Se,Re,Ve){var Ae=(Se+1)%3,Ce=(Se+2)%3,Ze=Re[Ae],Ye=Re[Ce],ze=Ve[Ae],Ie=Ve[Ce];if(Ze>0&&Ie>0){_e(Ae);return}else if(Ze>0&&Ie<0){_e(Ae);return}else if(Ze<0&&Ie>0){_e(Ae);return}else if(Ze<0&&Ie<0){_e(Ae);return}else if(Ye>0&&ze>0){_e(Ce);return}else if(Ye>0&&ze<0){_e(Ce);return}else if(Ye<0&&ze>0){_e(Ce);return}else if(Ye<0&&ze<0){_e(Ce);return}}for(var j=0;j<3;++j){for(var ge=X[j].primalMinor,xe=X[j].mirrorMinor,ye=s(_,X[j].primalOffset),J=0;J<3;++J)this.lineTickEnable[j]&&(ye[J]+=ee*ge[J]*Math.max(this.lineTickLength[J],0)/h[5*J]);var be=[0,0,0];if(be[j]=1,this.tickEnable[j]){this.tickAngle[j]===-3600?(this.tickAngle[j]=0,this.tickAlign[j]="auto"):this.tickAlign[j]=-1,ne=1,ie=[this.tickAlign[j],oe,ne],ie[0]==="auto"?ie[0]=y:ie[0]=parseInt(""+ie[0]),se=[0,0,0],ue(j,ge,xe);for(var J=0;J<3;++J)ye[J]+=ee*ge[J]*this.tickPad[J]/h[5*J];this._text.drawTicks(j,this.tickSize[j],this.tickAngle[j],ye,this.tickColor[j],be,se,ie)}if(this.labelEnable[j]){ne=0,se=[0,0,0],this.labels[j].length>4&&(_e(j),ne=1),ie=[this.labelAlign[j],oe,ne],ie[0]==="auto"?ie[0]=y:ie[0]=parseInt(""+ie[0]);for(var J=0;J<3;++J)ye[J]+=ee*ge[J]*this.labelPad[J]/h[5*J];ye[j]+=.5*(S[0][j]+S[1][j]),this._text.drawLabel(j,this.labelSize[j],this.labelAngle[j],ye,this.labelColor[j],[0,0,0],se,ie)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function p(w,h){var L=new o(w);return L.update(h),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(f,M,T){M.exports=v;var e=f("gl-buffer"),a=f("gl-vao"),i=f("./shaders").bg;function n(s,o,b,g){this.gl=s,this.buffer=o,this.vao=b,this.shader=g}var r=n.prototype;r.draw=function(s,o,b,g,d,c){for(var m=!1,l=0;l<3;++l)m=m||d[l];if(!!m){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:o,projection:b,bounds:g,enable:d,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function v(s){for(var o=[],b=[],g=0,d=0;d<3;++d)for(var c=(d+1)%3,m=(d+2)%3,l=[0,0,0],y=[0,0,0],u=-1;u<=1;u+=2){b.push(g,g+2,g+1,g+1,g+2,g+3),l[d]=u,y[d]=u;for(var A=-1;A<=1;A+=2){l[c]=A;for(var _=-1;_<=1;_+=2)l[m]=_,o.push(l[0],l[1],l[2],y[0],y[1],y[2]),g+=1}var p=c;c=m,m=p}var w=e(s,new Float32Array(o)),h=e(s,new Uint16Array(b),s.ELEMENT_ARRAY_BUFFER),L=a(s,[{buffer:w,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:s.FLOAT,size:3,offset:12,stride:24}],h),E=i(s);return E.attributes.position.location=0,E.attributes.normal.location=1,new n(s,w,L,E)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(f,M,T){M.exports=u;var e=f("bit-twiddle"),a=f("gl-mat4/multiply"),i=f("split-polygon"),n=f("robust-orientation"),r=new Array(16),v=new Array(8),s=new Array(8),o=new Array(3),b=[0,0,0];(function(){for(var A=0;A<8;++A)v[A]=[1,1,1,1],s[A]=[1,1,1]})();function g(A,_,p){for(var w=0;w<4;++w){A[w]=p[12+w];for(var h=0;h<3;++h)A[w]+=_[h]*p[4*h+w]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function c(A){for(var _=0;_<d.length;++_)if(A=i.positive(A,d[_]),A.length<3)return 0;for(var p=A[0],w=p[0]/p[3],h=p[1]/p[3],L=0,_=1;_+1<A.length;++_){var E=A[_],S=A[_+1],P=E[0]/E[3],F=E[1]/E[3],I=S[0]/S[3],D=S[1]/S[3],R=P-w,O=F-h,z=I-w,H=D-h;L+=Math.abs(R*H-O*z)}return L}var m=[1,1,1],l=[0,0,0],y={cubeEdges:m,axis:l};function u(A,_,p,w,h){a(r,_,A),a(r,p,r);for(var L=0,E=0;E<2;++E){o[2]=w[E][2];for(var S=0;S<2;++S){o[1]=w[S][1];for(var P=0;P<2;++P)o[0]=w[P][0],g(v[L],o,r),L+=1}}for(var F=-1,E=0;E<8;++E){for(var I=v[E][3],D=0;D<3;++D)s[E][D]=v[E][D]/I;h&&(s[E][2]*=-1),I<0&&(F<0||s[E][2]<s[F][2])&&(F=E)}if(F<0){F=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,z=(R+1)%3,H=-1,Y=-1,ee=0;ee<2;++ee){var j=ee<<R,X=j+(ee<<O)+(1-ee<<z),ae=j+(1-ee<<O)+(ee<<z);n(s[j],s[X],s[ae],b)<0||(ee?H=1:Y=1)}if(H<0||Y<0){Y>H&&(F|=1<<R);continue}for(var ee=0;ee<2;++ee){var j=ee<<R,X=j+(ee<<O)+(1-ee<<z),ae=j+(1-ee<<O)+(ee<<z),fe=c([v[j],v[X],v[ae],v[j+(1<<O)+(1<<z)]]);ee?H=fe:Y=fe}if(Y>H){F|=1<<R;continue}}}for(var K=7^F,J=-1,E=0;E<8;++E)E===F||E===K||(J<0||s[J][1]>s[E][1])&&(J=E);for(var U=-1,E=0;E<3;++E){var V=J^1<<E;if(!(V===F||V===K)){U<0&&(U=V);var z=s[V];z[0]<s[U][0]&&(U=V)}}for(var q=-1,E=0;E<3;++E){var V=J^1<<E;if(!(V===F||V===K||V===U)){q<0&&(q=V);var z=s[V];z[0]>s[q][0]&&(q=V)}}var re=m;re[0]=re[1]=re[2]=0,re[e.log2(U^J)]=J&U,re[e.log2(J^q)]=J&q;var Z=q^7;Z===F||Z===K?(Z=U^7,re[e.log2(q^Z)]=Z&q):re[e.log2(U^Z)]=Z&U;for(var Q=l,ie=F,R=0;R<3;++R)ie&1<<R?Q[R]=-1:Q[R]=1;return y}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(f,M,T){M.exports=m;var e=f("gl-buffer"),a=f("gl-vao"),i=f("./shaders").line,n=[0,0,0],r=[0,0,0],v=[0,0,0],s=[0,0,0],o=[1,1];function b(l){return l[0]=l[1]=l[2]=0,l}function g(l,y){return l[0]=y[0],l[1]=y[1],l[2]=y[2],l}function d(l,y,u,A,_,p,w,h){this.gl=l,this.vertBuffer=y,this.vao=u,this.shader=A,this.tickCount=_,this.tickOffset=p,this.gridCount=w,this.gridOffset=h}var c=d.prototype;c.bind=function(l,y,u){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=y,this.shader.uniforms.projection=u,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},c.unbind=function(){this.vao.unbind()},c.drawAxisLine=function(l,y,u,A,_){var p=b(r);this.shader.uniforms.majorAxis=r,p[l]=y[1][l]-y[0][l],this.shader.uniforms.minorAxis=p;var w=g(s,u);w[l]+=y[0][l],this.shader.uniforms.offset=w,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=A;var h=b(v);h[(l+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=b(v);h[(l+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},c.drawAxisTicks=function(l,y,u,A,_){if(!!this.tickCount[l]){var p=b(n);p[l]=1,this.shader.uniforms.majorAxis=p,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=u,this.shader.uniforms.color=A,this.shader.uniforms.lineWidth=_;var w=b(v);w[l]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},c.drawGrid=function(l,y,u,A,_,p){if(!!this.gridCount[l]){var w=b(r);w[y]=u[1][y]-u[0][y],this.shader.uniforms.minorAxis=w;var h=g(s,A);h[y]+=u[0][y],this.shader.uniforms.offset=h;var L=b(n);L[l]=1,this.shader.uniforms.majorAxis=L;var E=b(v);E[l]=1,this.shader.uniforms.screenAxis=E,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},c.drawZero=function(l,y,u,A,_,p){var w=b(r);this.shader.uniforms.majorAxis=w,w[l]=u[1][l]-u[0][l],this.shader.uniforms.minorAxis=w;var h=g(s,A);h[l]+=u[0][l],this.shader.uniforms.offset=h;var L=b(v);L[y]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},c.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function m(l,y,u){var A=[],_=[0,0,0],p=[0,0,0],w=[0,0,0],h=[0,0,0];A.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var P=A.length/3|0,E=0;E<u[L].length;++E){var S=+u[L][E].x;A.push(S,0,1,S,1,1,S,0,-1,S,0,-1,S,1,1,S,1,-1)}var I=A.length/3|0;_[L]=P,p[L]=I-P;for(var P=A.length/3|0,F=0;F<u[L].length;++F){var S=+u[L][F].x;A.push(S,0,1,S,1,1,S,0,-1,S,0,-1,S,1,1,S,1,-1)}var I=A.length/3|0;w[L]=P,h[L]=I-P}var D=e(l,new Float32Array(A)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),O=i(l);return O.attributes.position.location=0,new d(l,D,R,O,p,_,h,w)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(b){return a(b,i,n,null,[{name:"position",type:"vec3"}])};var r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(b){return a(b,r,v,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(b){return a(b,s,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(f,M,T){(function(e){(function(){M.exports=m;var a=f("gl-buffer"),i=f("gl-vao"),n=f("vectorize-text"),r=f("./shaders").text,v=window||e.global||{},s=v.__TEXT_CACHE||{};v.__TEXT_CACHE={};var o=3;function b(l,y,u,A){this.gl=l,this.shader=y,this.buffer=u,this.vao=A,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var g=b.prototype,d=[0,0];g.bind=function(l,y,u,A){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=l,_.view=y,_.projection=u,_.pixelScale=A,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},g.unbind=function(){this.vao.unbind()},g.update=function(l,y,u,A,_){var p=[];function w(R,O,z,H,Y,ee){var j=s[z];j||(j=s[z]={});var X=j[O];X||(X=j[O]=c(O,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:Y,styletags:ee}));for(var ae=(H||12)/12,fe=X.positions,K=X.cells,J=0,U=K.length;J<U;++J)for(var V=K[J],q=2;q>=0;--q){var re=fe[V[q]];p.push(ae*re[0],-ae*re[1],R)}}for(var h=[0,0,0],L=[0,0,0],E=[0,0,0],S=[0,0,0],P=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){E[I]=p.length/o|0,w(.5*(l[0][I]+l[1][I]),y[I],u[I],12,P,F),S[I]=(p.length/o|0)-E[I],h[I]=p.length/o|0;for(var D=0;D<A[I].length;++D)!A[I][D].text||w(A[I][D].x,A[I][D].text,A[I][D].font||_,A[I][D].fontSize||12,P,F);L[I]=(p.length/o|0)-h[I]}this.buffer.update(p),this.tickOffset=h,this.tickCount=L,this.labelOffset=E,this.labelCount=S},g.drawTicks=function(l,y,u,A,_,p,w,h){!this.tickCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=y,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},g.drawLabel=function(l,y,u,A,_,p,w,h){!this.labelCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=y,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function c(l,y){try{return n(l,y)}catch(u){return console.warn('error vectorizing text:"'+l+'" error:',u),{cells:[],positions:[]}}}function m(l,y,u,A,_,p){var w=a(l),h=i(l,[{buffer:w,size:3}]),L=r(l);L.attributes.position.location=0;var E=new b(l,L,w,h);return E.update(y,u,A,_,p),E}}).call(this)}).call(this,f("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(f,M,T){T.create=a,T.equal=i;function e(n,r){var v=n+"",s=v.indexOf("."),o=0;s>=0&&(o=v.length-s-1);var b=Math.pow(10,o),g=Math.round(n*r*b),d=g+"";if(d.indexOf("e")>=0)return d;var c=g/b,m=g%b;g<0?(c=-Math.ceil(c)|0,m=-m|0):(c=Math.floor(c)|0,m=m|0);var l=""+c;if(g<0&&(l="-"+l),o){for(var y=""+m;y.length<o;)y="0"+y;return l+"."+y}else return l}function a(n,r){for(var v=[],s=0;s<3;++s){var o=[];.5*(n[0][s]+n[1][s]);for(var b=0;b*r[s]<=n[1][s];++b)o.push({x:b*r[s],text:e(r[s],b)});for(var b=-1;b*r[s]>=n[0][s];--b)o.push({x:b*r[s],text:e(r[s],b)});v.push(o)}return v}function i(n,r){for(var v=0;v<3;++v){if(n[v].length!==r[v].length)return!1;for(var s=0;s<n[v].length;++s){var o=n[v][s],b=r[v][s];if(o.x!==b.x||o.text!==b.text||o.font!==b.font||o.fontColor!==b.fontColor||o.fontSize!==b.fontSize||o.dx!==b.dx||o.dy!==b.dy)return!1}}return!0}},{}],77:[function(f,M,T){M.exports=y;var e=f("extract-frustum-planes"),a=f("split-polygon"),i=f("./lib/cube.js"),n=f("gl-mat4/multiply"),r=f("gl-mat4/transpose"),v=f("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function b(u,A,_){this.lo=u,this.hi=A,this.pixelsPerDataUnit=_}var g=[0,0,0,1],d=[0,0,0,1];function c(u,A,_,p,w){for(var h=0;h<3;++h){for(var L=g,E=d,S=0;S<3;++S)E[S]=L[S]=_[S];E[3]=L[3]=1,E[h]+=1,v(E,E,A),E[3]<0&&(u[h]=1/0),L[h]-=1,v(L,L,A),L[3]<0&&(u[h]=1/0);var P=(L[0]/L[3]-E[0]/E[3])*p,F=(L[1]/L[3]-E[1]/E[3])*w;u[h]=.25*Math.sqrt(P*P+F*F)}return u}var m=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],l=[0,0,0];function y(u,A,_,p,F){var h=A.model||s,L=A.view||s,E=A.projection||s,S=A._ortho||!1,P=u.bounds,F=F||i(h,L,E,P,S),I=F.axis;n(o,L,h),n(o,E,o);for(var D=m,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var O=e(r(o,o));r(o,o);for(var z=0;z<3;++z){var H=(z+1)%3,Y=(z+2)%3,ee=l;e:for(var R=0;R<2;++R){var j=[];if(I[z]<0!=!!R){ee[z]=P[R][z];for(var X=0;X<2;++X){ee[H]=P[X^R][H];for(var ae=0;ae<2;++ae)ee[Y]=P[ae^X^R][Y],j.push(ee.slice())}for(var fe=S?5:4,X=fe;X===fe;++X){if(j.length===0)continue e;j=a.positive(j,O[X])}for(var X=0;X<j.length;++X)for(var Y=j[X],K=c(l,o,Y,_,p),ae=0;ae<3;++ae)D[ae].lo=Math.min(D[ae].lo,Y[ae]),D[ae].hi=Math.max(D[ae].hi,Y[ae]),ae!==z&&(D[ae].pixelsPerDataUnit=Math.min(D[ae].pixelsPerDataUnit,Math.abs(K[ae])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(f,M,T){var e=f("typedarray-pool"),a=f("ndarray-ops"),i=f("ndarray"),n=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(d,c,m,l,y){this.gl=d,this.type=c,this.handle=m,this.length=l,this.usage=y}var v=r.prototype;v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(d,c,m,l,y,u){var A=y.length*y.BYTES_PER_ELEMENT;if(u<0)return d.bufferData(c,y,l),A;if(A+u>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(c,u,y),m}function o(d,c){for(var m=e.malloc(d.length,c),l=d.length,y=0;y<l;++y)m[y]=d[y];return m}function b(d,c){for(var m=1,l=c.length-1;l>=0;--l){if(c[l]!==m)return!1;m*=d[l]}return!0}v.update=function(d,c){if(typeof c!="number"&&(c=-1),this.bind(),typeof d=="object"&&typeof d.shape<"u"){var m=d.dtype;if(n.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&m!=="uint16"?m="uint32":m="uint16"}if(m===d.dtype&&b(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,d.data,c):this.length=s(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),c);else{var y=e.malloc(d.size,m),u=i(y,d.shape);a.assign(u,d),c<0?this.length=s(this.gl,this.type,this.length,this.usage,y,c):this.length=s(this.gl,this.type,this.length,this.usage,y.subarray(0,d.size),c),e.free(y)}}else if(Array.isArray(d)){var A;this.type===this.gl.ELEMENT_ARRAY_BUFFER?A=o(d,"uint16"):A=o(d,"float32"),c<0?this.length=s(this.gl,this.type,this.length,this.usage,A,c):this.length=s(this.gl,this.type,this.length,this.usage,A.subarray(0,d.length),c),e.free(A)}else if(typeof d=="object"&&typeof d.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,d,c);else if(typeof d=="number"||d===void 0){if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function g(d,c,m,l){if(m=m||d.ARRAY_BUFFER,l=l||d.DYNAMIC_DRAW,m!==d.ARRAY_BUFFER&&m!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==d.DYNAMIC_DRAW&&l!==d.STATIC_DRAW&&l!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=d.createBuffer(),u=new r(d,m,y,0,l);return u.update(c),u}M.exports=g},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(f,M,T){var e=f("gl-vec3");M.exports=function(i,n){var r=i.positions,v=i.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var o=0,b=1/0,g=-1/0,d=1/0,c=-1/0,m=1/0,l=-1/0,y=null,u=null,A=[],_=1/0,p=!1,w=0;w<r.length;w++){var h=r[w];b=Math.min(h[0],b),g=Math.max(h[0],g),d=Math.min(h[1],d),c=Math.max(h[1],c),m=Math.min(h[2],m),l=Math.max(h[2],l);var L=v[w];if(e.length(L)>o&&(o=e.length(L)),w){var E=2*e.distance(y,h)/(e.length(u)+e.length(L));E?(_=Math.min(_,E),p=!1):p=!0}p||(y=h,u=L),A.push(L)}var S=[b,d,m],P=[g,c,l];n&&(n[0]=S,n[1]=P),o===0&&(o=1);var F=1/o;isFinite(_)||(_=1),s.vectorScale=_;var I=i.coneSize||.5;i.absoluteConeSize&&(I=i.absoluteConeSize*F),s.coneScale=I;for(var w=0,D=0;w<r.length;w++)for(var h=r[w],R=h[0],O=h[1],z=h[2],H=A[w],Y=e.length(H)*F,ee=0,j=8;ee<j;ee++){s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.vectors.push(H),s.vectors.push(H),s.vectors.push(H),s.vectors.push(H),s.vectors.push(H),s.vectors.push(H),s.vertexIntensity.push(Y,Y,Y),s.vertexIntensity.push(Y,Y,Y);var X=s.positions.length;s.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return s};var a=f("./lib/shaders");M.exports.createMesh=f("./create_mesh"),M.exports.createConeMesh=function(i,n){return M.exports.createMesh(i,n,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),i=f("gl-vao"),n=f("gl-texture2d"),r=f("gl-mat4/multiply"),v=f("gl-mat4/invert"),s=f("ndarray"),o=f("colormap"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(A,_,p,w,h,L,E,S,P,F,I){this.gl=A,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=p,this.pickShader=w,this.trianglePositions=h,this.triangleVectors=L,this.triangleColors=S,this.triangleUVs=P,this.triangleIds=E,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var d=g.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(A){this.pickId=A};function c(A){for(var _=o({colormap:A,nshades:256,format:"rgba"}),p=new Uint8Array(256*4),w=0;w<256;++w){for(var h=_[w],L=0;L<3;++L)p[4*w+L]=h[L];p[4*w+3]=h[3]*255}return s(p,[256,256,4],[4,0,1])}function m(A){for(var _=A.length,p=new Array(_),w=0;w<_;++w)p[w]=A[w][2];return p}d.update=function(A){A=A||{};var _=this.gl;this.dirty=!0,"lightPosition"in A&&(this.lightPosition=A.lightPosition),"opacity"in A&&(this.opacity=A.opacity),"ambient"in A&&(this.ambientLight=A.ambient),"diffuse"in A&&(this.diffuseLight=A.diffuse),"specular"in A&&(this.specularLight=A.specular),"roughness"in A&&(this.roughness=A.roughness),"fresnel"in A&&(this.fresnel=A.fresnel),A.tubeScale!==void 0&&(this.tubeScale=A.tubeScale),A.vectorScale!==void 0&&(this.vectorScale=A.vectorScale),A.coneScale!==void 0&&(this.coneScale=A.coneScale),A.coneOffset!==void 0&&(this.coneOffset=A.coneOffset),A.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(c(A.colormap)),this.texture.generateMipmap());var p=A.cells,w=A.positions,h=A.vectors;if(!w||!p||!h)return;var L=[],E=[],S=[],P=[],F=[];this.cells=p,this.positions=w,this.vectors=h;var I=A.meshColor||[1,1,1,1],D=A.vertexIntensity,R=1/0,O=-1/0;if(D)if(A.vertexIntensityBounds)R=+A.vertexIntensityBounds[0],O=+A.vertexIntensityBounds[1];else for(var z=0;z<D.length;++z){var H=D[z];R=Math.min(R,H),O=Math.max(O,H)}else for(var z=0;z<w.length;++z){var H=w[z][2];R=Math.min(R,H),O=Math.max(O,H)}D?this.intensity=D:this.intensity=m(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var z=0;z<w.length;++z)for(var Y=w[z],ee=0;ee<3;++ee)isNaN(Y[ee])||!isFinite(Y[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var j=0;e:for(var z=0;z<p.length;++z){var X=p[z];switch(X.length){case 3:for(var ee=0;ee<3;++ee)for(var ae=X[ee],Y=w[ae],fe=0;fe<3;++fe)if(isNaN(Y[fe])||!isFinite(Y[fe]))continue e;for(var ee=0;ee<3;++ee){var ae=X[2-ee],Y=w[ae];L.push(Y[0],Y[1],Y[2],Y[3]);var K=h[ae];E.push(K[0],K[1],K[2],K[3]||0);var J=I;J.length===3?S.push(J[0],J[1],J[2],1):S.push(J[0],J[1],J[2],J[3]);var U;D?U=[(D[ae]-R)/(O-R),0]:U=[(Y[2]-R)/(O-R),0],P.push(U[0],U[1]),F.push(z)}j+=1;break}}this.triangleCount=j,this.trianglePositions.update(L),this.triangleVectors.update(E),this.triangleColors.update(S),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(F))},d.drawTransparent=d.draw=function(A){A=A||{};for(var _=this.gl,p=A.model||b,w=A.view||b,h=A.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)L[0][E]=Math.max(L[0][E],this.clipBounds[0][E]),L[1][E]=Math.min(L[1][E],this.clipBounds[1][E]);var S={model:p,view:w,projection:h,inverseModel:b.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};S.inverseModel=v(S.inverseModel,S.model),_.disable(_.CULL_FACE),this.texture.bind(0);var P=new Array(16);r(P,S.view,S.model),r(P,S.projection,P),v(P,P);for(var E=0;E<3;++E)S.eyePosition[E]=P[12+E]/P[15];for(var F=P[15],E=0;E<3;++E)F+=this.lightPosition[E]*P[4*E+3];for(var E=0;E<3;++E){for(var I=P[12+E],D=0;D<3;++D)I+=P[4*D+E]*this.lightPosition[D];S.lightPosition[E]=I/F}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=S,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(A){A=A||{};for(var _=this.gl,p=A.model||b,w=A.view||b,h=A.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)L[0][E]=Math.max(L[0][E],this.clipBounds[0][E]),L[1][E]=Math.min(L[1][E],this.clipBounds[1][E]);this._model=[].slice.call(p),this._view=[].slice.call(w),this._projection=[].slice.call(h),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var S={model:p,view:w,projection:h,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=S,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(A){if(!A||A.id!==this.pickId)return null;var _=A.value[0]+256*A.value[1]+65536*A.value[2],p=this.cells[_],w=this.positions[p[1]].slice(0,3),h={position:w,dataCoordinate:w,index:Math.floor(p[1]/48)};return this.traceType==="cone"?h.index=Math.floor(p[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[p[1]],h.velocity=this.vectors[p[1]].slice(0,3),h.divergence=this.vectors[p[1]][3],h.index=_),h},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(A,_){var p=e(A,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return p.attributes.position.location=0,p.attributes.color.location=2,p.attributes.uv.location=3,p.attributes.vector.location=4,p}function y(A,_){var p=e(A,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return p.attributes.position.location=0,p.attributes.id.location=1,p.attributes.vector.location=4,p}function u(A,_,p){var w=p.shaders;arguments.length===1&&(_=A,A=_.gl);var h=l(A,w),L=y(A,w),E=n(A,s(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=A.LINEAR_MIPMAP_LINEAR,E.magFilter=A.LINEAR;var S=a(A),P=a(A),F=a(A),I=a(A),D=a(A),R=i(A,[{buffer:S,type:A.FLOAT,size:4},{buffer:D,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:A.FLOAT,size:4},{buffer:I,type:A.FLOAT,size:2},{buffer:P,type:A.FLOAT,size:4}]),O=new g(A,E,h,L,S,P,D,F,I,R,p.traceType||"cone");return O.update(_),O}M.exports=u},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(f,M,T){M.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(f,M,T){var e=f("./1.0/numbers");M.exports=function(i){return e[i]}},{"./1.0/numbers":82}],84:[function(f,M,T){M.exports=g;var e=f("gl-buffer"),a=f("gl-vao"),i=f("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,c,m,l){this.gl=d,this.shader=l,this.buffer=c,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=r.prototype;v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(d){var c=this.gl,m=this.shader.uniforms;this.shader.bind();var l=m.view=d.view||n,y=m.projection=d.projection||n;m.model=d.model||n,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var u=l[12],A=l[13],_=l[14],p=l[15],w=d._ortho||!1,h=w?2:1,L=h*this.pixelRatio*(y[3]*u+y[7]*A+y[11]*_+y[15]*p)/c.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)c.lineWidth(this.lineWidth[E]*this.pixelRatio),m.capSize=this.capSize[E]*L,this.lineCount[E]&&c.drawArrays(c.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};function s(d,c){for(var m=0;m<3;++m)d[0][m]=Math.min(d[0][m],c[m]),d[1][m]=Math.max(d[1][m],c[m])}var o=function(){for(var d=new Array(3),c=0;c<3;++c){for(var m=[],l=1;l<=2;++l)for(var y=-1;y<=1;y+=2){var u=(l+c)%3,A=[0,0,0];A[u]=y,m.push(A)}d[c]=m}return d}();function b(d,c,m,l){for(var y=o[l],u=0;u<y.length;++u){var A=y[u];d.push(c[0],c[1],c[2],m[0],m[1],m[2],m[3],A[0],A[1],A[2])}return y.length}v.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var c=d.color||[[0,0,0],[0,0,0],[0,0,0]],m=d.position,l=d.error;if(Array.isArray(c[0])||(c=[c,c,c]),m&&l){var y=[],u=m.length,A=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=A;e:for(var p=0;p<u;++p){for(var w=m[p],h=0;h<3;++h)if(isNaN(w[h])||!isFinite(w[h]))continue e;var L=l[p],E=c[_];if(Array.isArray(E[0])&&(E=c[p]),E.length===3?E=[E[0],E[1],E[2],1]:E.length===4&&(E=[E[0],E[1],E[2],E[3]],!this.hasAlpha&&E[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][_])||isNaN(L[1][_]))){if(L[0][_]<0){var S=w.slice();S[_]+=L[0][_],y.push(w[0],w[1],w[2],E[0],E[1],E[2],E[3],0,0,0,S[0],S[1],S[2],E[0],E[1],E[2],E[3],0,0,0),s(this.bounds,S),A+=2+b(y,S,E,_)}if(L[1][_]>0){var S=w.slice();S[_]+=L[1][_],y.push(w[0],w[1],w[2],E[0],E[1],E[2],E[3],0,0,0,S[0],S[1],S[2],E[0],E[1],E[2],E[3],0,0,0),s(this.bounds,S),A+=2+b(y,S,E,_)}}}this.lineCount[_]=A-this.lineOffset[_]}this.buffer.update(y)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function g(d){var c=d.gl,m=e(c),l=a(c,[{buffer:m,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:c.FLOAT,size:3,offset:28,stride:40}]),y=i(c);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var u=new r(c,m,l,y);return u.update(d),u}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);M.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(f,M,T){var e=f("gl-texture2d");M.exports=A;var a=null,i,n,r,v;function s(_){var p=_.getParameter(_.FRAMEBUFFER_BINDING),w=_.getParameter(_.RENDERBUFFER_BINDING),h=_.getParameter(_.TEXTURE_BINDING_2D);return[p,w,h]}function o(_,p){_.bindFramebuffer(_.FRAMEBUFFER,p[0]),_.bindRenderbuffer(_.RENDERBUFFER,p[1]),_.bindTexture(_.TEXTURE_2D,p[2])}function b(_,p){var w=_.getParameter(p.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(w+1);for(var h=0;h<=w;++h){for(var L=new Array(w),E=0;E<h;++E)L[E]=_.COLOR_ATTACHMENT0+E;for(var E=h;E<w;++E)L[E]=_.NONE;a[h]=L}}function g(_){switch(_){case i:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case v:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(_,p,w,h,L,E){if(!h)return null;var S=e(_,p,w,L,h);return S.magFilter=_.NEAREST,S.minFilter=_.NEAREST,S.mipSamples=1,S.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,E,_.TEXTURE_2D,S.handle,0),S}function c(_,p,w,h,L){var E=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,E),_.renderbufferStorage(_.RENDERBUFFER,h,p,w),_.framebufferRenderbuffer(_.FRAMEBUFFER,L,_.RENDERBUFFER,E),E}function m(_){var p=s(_.gl),w=_.gl,h=_.handle=w.createFramebuffer(),L=_._shape[0],E=_._shape[1],S=_.color.length,P=_._ext,F=_._useStencil,I=_._useDepth,D=_._colorType;w.bindFramebuffer(w.FRAMEBUFFER,h);for(var R=0;R<S;++R)_.color[R]=d(w,L,E,D,w.RGBA,w.COLOR_ATTACHMENT0+R);S===0?(_._color_rb=c(w,L,E,w.RGBA4,w.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(a[0])):S>1&&P.drawBuffersWEBGL(a[S]);var O=w.getExtension("WEBGL_depth_texture");O?F?_.depth=d(w,L,E,O.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):I&&(_.depth=d(w,L,E,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):I&&F?_._depth_rb=c(w,L,E,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):I?_._depth_rb=c(w,L,E,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):F&&(_._depth_rb=c(w,L,E,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));var z=w.checkFramebufferStatus(w.FRAMEBUFFER);if(z!==w.FRAMEBUFFER_COMPLETE){_._destroyed=!0,w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(w.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var R=0;R<_.color.length;++R)_.color[R].dispose(),_.color[R]=null;_._color_rb&&(w.deleteRenderbuffer(_._color_rb),_._color_rb=null),o(w,p),g(z)}o(w,p)}function l(_,p,w,h,L,E,S,P){this.gl=_,this._shape=[p|0,w|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var F=0;F<L;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=h,this._useDepth=E,this._useStencil=S;var I=this,D=[p|0,w|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,m(this)}var y=l.prototype;function u(_,p,w){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===p&&_._shape[1]===w)){var h=_.gl,L=h.getParameter(h.MAX_RENDERBUFFER_SIZE);if(p<0||p>L||w<0||w>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=p,_._shape[1]=w;for(var E=s(h),S=0;S<_.color.length;++S)_.color[S].shape=_._shape;_._color_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,_._color_rb),h.renderbufferStorage(h.RENDERBUFFER,h.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&h.renderbufferStorage(h.RENDERBUFFER,h.STENCIL_INDEX,_._shape[0],_._shape[1])),h.bindFramebuffer(h.FRAMEBUFFER,_.handle);var P=h.checkFramebufferStatus(h.FRAMEBUFFER);P!==h.FRAMEBUFFER_COMPLETE&&(_.dispose(),o(h,E),g(P)),o(h,E)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var p=_[0]|0,w=_[1]|0;return u(this,p,w),[p,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,u(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,u(this,this._shape[0],_),_},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var p=0;p<this.color.length;++p)this.color[p].dispose(),this.color[p]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function A(_,p,w,h){i||(i=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,v=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=_.getExtension("WEBGL_draw_buffers");if(!a&&L&&b(_,L),Array.isArray(p)&&(h=w,w=p[1]|0,p=p[0]|0),typeof p!="number")throw new Error("gl-fbo: Missing shape parameter");var E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(p<0||p>E||w<0||w>E)throw new Error("gl-fbo: Parameters are too large for FBO");h=h||{};var S=1;if("color"in h){if(S=Math.max(h.color|0,0),S<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(S>1)if(L){if(S>_.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+S+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=_.UNSIGNED_BYTE,F=_.getExtension("OES_texture_float");if(h.float&&S>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else h.preferFloat&&S>0&&F&&(P=_.FLOAT);var I=!0;"depth"in h&&(I=!!h.depth);var D=!1;return"stencil"in h&&(D=!!h.stencil),new l(_,p,w,P,S,I,D,L)}},{"gl-texture2d":146}],87:[function(f,M,T){var e=f("sprintf-js").sprintf,a=f("gl-constants/lookup"),i=f("glsl-shader-name"),n=f("add-line-numbers");M.exports=r;function r(v,s,o){var b=i(s)||"of unknown name (see npm glsl-shader-name)",g="unknown type";o!==void 0&&(g=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var d=e(`Error compiling %s shader %s:
`,g,b),c=e("%s%s",d,v),m=v.split(`
`),l={},y=0;y<m.length;y++){var u=m[y];if(!(u===""||u==="\0")){var A=parseInt(u.split(":")[2]);if(isNaN(A))throw new Error(e("Could not parse error: %s",u));l[A]=u}}for(var _=n(s).split(`
`),y=0;y<_.length;y++)if(!(!l[y+3]&&!l[y+2]&&!l[y+1])){var p=_[y];if(d+=p+`
`,l[y+1]){var w=l[y+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=e(`^^^ %s

`,w)}}return{long:d.trim(),short:c.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(f,M,T){M.exports=g;var e=f("binary-search-bounds"),a=f("iota-array"),i=f("typedarray-pool"),n=f("gl-shader"),r=f("gl-buffer"),v=f("./lib/shaders");function s(d,c,m,l,y,u,A){this.plot=d,this.shader=c,this.pickShader=m,this.positionBuffer=l,this.weightBuffer=y,this.colorBuffer=u,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=s.prototype,b=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,m=this.shader,l=this.bounds,y=this.numVertices;if(!(y<=0)){var u=c.gl,A=c.dataBox,_=l[2]-l[0],p=l[3]-l[1],w=A[2]-A[0],h=A[3]-A[1];d[0]=2*_/w,d[4]=2*p/h,d[6]=2*(l[0]-A[0])/w-1,d[7]=2*(l[1]-A[1])/h-1,m.bind();var L=m.uniforms;L.viewTransform=d,L.shape=this.shape;var E=m.attributes;this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(u.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),E.color.pointer(u.UNSIGNED_BYTE,!0),u.drawArrays(u.TRIANGLES,0,y)}}}(),o.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(m){var l=this.plot,y=this.pickShader,u=this.bounds,A=this.numVertices;if(!(A<=0)){var _=l.gl,p=l.dataBox,w=u[2]-u[0],h=u[3]-u[1],L=p[2]-p[0],E=p[3]-p[1];d[0]=2*w/L,d[4]=2*h/E,d[6]=2*(u[0]-p[0])/L-1,d[7]=2*(u[1]-p[1])/E-1;for(var S=0;S<4;++S)c[S]=m>>S*8&255;this.pickOffset=m,y.bind();var P=y.uniforms;P.viewTransform=d,P.pickOffset=c,P.shape=this.shape;var F=y.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,A),m+this.shape[0]*this.shape[1]}}}(),o.pick=function(d,c,m){var l=this.pickOffset,y=this.shape[0]*this.shape[1];if(m<l||m>=l+y)return null;var u=m-l,A=this.xData,_=this.yData;return{object:this,pointId:u,dataCoord:[A[u%this.shape[0]],_[u/this.shape[0]|0]]}},o.update=function(d){d=d||{};var c=d.shape||[0,0],m=d.x||a(c[0]),l=d.y||a(c[1]),y=d.z||new Float32Array(c[0]*c[1]),u=d.zsmooth!==!1;this.xData=m,this.yData=l;var A=d.colorLevels||[0],_=d.colorValues||[0,0,0,1],p=A.length,w=this.bounds,h,L,E,S;u?(h=w[0]=m[0],L=w[1]=l[0],E=w[2]=m[m.length-1],S=w[3]=l[l.length-1]):(h=w[0]=m[0]+(m[1]-m[0])/2,L=w[1]=l[0]+(l[1]-l[0])/2,E=w[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,S=w[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var P=1/(E-h),F=1/(S-L),I=c[0],D=c[1];this.shape=[I,D];var R=(u?(I-1)*(D-1):I*D)*(b.length>>>1);this.numVertices=R;for(var O=i.mallocUint8(R*4),z=i.mallocFloat32(R*2),H=i.mallocUint8(R*2),Y=i.mallocUint32(R),ee=0,j=u?I-1:I,X=u?D-1:D,ae=0;ae<X;++ae){var fe,K;u?(fe=F*(l[ae]-L),K=F*(l[ae+1]-L)):(fe=ae<D-1?F*(l[ae]-(l[ae+1]-l[ae])/2-L):F*(l[ae]-(l[ae]-l[ae-1])/2-L),K=ae<D-1?F*(l[ae]+(l[ae+1]-l[ae])/2-L):F*(l[ae]+(l[ae]-l[ae-1])/2-L));for(var J=0;J<j;++J){var U,V;u?(U=P*(m[J]-h),V=P*(m[J+1]-h)):(U=J<I-1?P*(m[J]-(m[J+1]-m[J])/2-h):P*(m[J]-(m[J]-m[J-1])/2-h),V=J<I-1?P*(m[J]+(m[J+1]-m[J])/2-h):P*(m[J]+(m[J]-m[J-1])/2-h));for(var q=0;q<b.length;q+=2){var re=b[q],Z=b[q+1],Q=u?(ae+Z)*I+(J+re):ae*I+J,ie=y[Q],oe=e.le(A,ie),ne,se,_e,ue;if(oe<0)ne=_[0],se=_[1],_e=_[2],ue=_[3];else if(oe===p-1)ne=_[4*p-4],se=_[4*p-3],_e=_[4*p-2],ue=_[4*p-1];else{var ge=(ie-A[oe])/(A[oe+1]-A[oe]),xe=1-ge,ye=4*oe,be=4*(oe+1);ne=xe*_[ye]+ge*_[be],se=xe*_[ye+1]+ge*_[be+1],_e=xe*_[ye+2]+ge*_[be+2],ue=xe*_[ye+3]+ge*_[be+3]}O[4*ee]=255*ne,O[4*ee+1]=255*se,O[4*ee+2]=255*_e,O[4*ee+3]=255*ue,z[2*ee]=U*.5+V*.5,z[2*ee+1]=fe*.5+K*.5,H[2*ee]=re,H[2*ee+1]=Z,Y[ee]=ae*I+J,ee+=1}}}this.positionBuffer.update(z),this.weightBuffer.update(H),this.colorBuffer.update(O),this.idBuffer.update(Y),i.free(z),i.free(O),i.free(H),i.free(Y)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function g(d,c){var m=d.gl,l=n(m,v.vertex,v.fragment),y=n(m,v.pickVertex,v.pickFragment),u=r(m),A=r(m),_=r(m),p=r(m),w=new s(d,l,y,u,A,_,p);return w.update(c),d.addObject(w),w}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(f,M,T){var e=f("glslify");M.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(s){return a(s,i,n,null,v)},T.createPickShader=function(s){return a(s,i,r,null,v)}},{"gl-shader":132,glslify:231}],91:[function(f,M,T){M.exports=_;var e=f("gl-buffer"),a=f("gl-vao"),i=f("gl-texture2d"),n=new Uint8Array(4),r=new Float32Array(n.buffer);function v(p,w,h,L){return n[0]=L,n[1]=h,n[2]=w,n[3]=p,r[0]}var s=f("binary-search-bounds"),o=f("ndarray"),b=f("./lib/shaders"),g=b.createShader,d=b.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(p,w){for(var h=0,L=0;L<3;++L){var E=p[L]-w[L];h+=E*E}return Math.sqrt(h)}function l(p){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],h=0;h<3;++h)w[0][h]=Math.max(p[0][h],w[0][h]),w[1][h]=Math.min(p[1][h],w[1][h]);return w}function y(p,w,h,L){this.arcLength=p,this.position=w,this.index=h,this.dataCoordinate=L}function u(p,w,h,L,E,S){this.gl=p,this.shader=w,this.pickShader=h,this.buffer=L,this.vao=E,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=S,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var A=u.prototype;A.isTransparent=function(){return this.hasAlpha},A.isOpaque=function(){return!this.hasAlpha},A.pickSlots=1,A.setPickBase=function(p){this.pickId=p},A.drawTransparent=A.draw=function(p){if(!!this.vertexCount){var w=this.gl,h=this.shader,L=this.vao;h.bind(),h.uniforms={model:p.model||c,view:p.view||c,projection:p.projection||c,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},A.drawPick=function(p){if(!!this.vertexCount){var w=this.gl,h=this.pickShader,L=this.vao;h.bind(),h.uniforms={model:p.model||c,view:p.view||c,projection:p.projection||c,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},A.update=function(p){var w,h;this.dirty=!0;var L=!!p.connectGaps;"dashScale"in p&&(this.dashScale=p.dashScale),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var E=[],S=[],P=[],F=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=p.position||p.positions;if(R){var O=p.color||p.colors||[0,0,0,1],z=p.lineWidth||1,H=!1;e:for(w=1;w<R.length;++w){var Y=R[w-1],ee=R[w];for(S.push(F),P.push(Y.slice()),h=0;h<3;++h){if(isNaN(Y[h])||isNaN(ee[h])||!isFinite(Y[h])||!isFinite(ee[h])){if(!L&&E.length>0){for(var j=0;j<24;++j)E.push(E[E.length-12]);I+=2,H=!0}continue e}D[0][h]=Math.min(D[0][h],Y[h],ee[h]),D[1][h]=Math.max(D[1][h],Y[h],ee[h])}var X,ae;Array.isArray(O[0])?(X=O.length>w-1?O[w-1]:O.length>0?O[O.length-1]:[0,0,0,1],ae=O.length>w?O[w]:O.length>0?O[O.length-1]:[0,0,0,1]):X=ae=O,X.length===3&&(X=[X[0],X[1],X[2],1]),ae.length===3&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var fe;Array.isArray(z)?fe=z.length>w-1?z[w-1]:z.length>0?z[z.length-1]:[0,0,0,1]:fe=z;var K=F;if(F+=m(Y,ee),H){for(h=0;h<2;++h)E.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,fe,X[0],X[1],X[2],X[3]);I+=2,H=!1}E.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,fe,X[0],X[1],X[2],X[3],Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,-fe,X[0],X[1],X[2],X[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,-fe,ae[0],ae[1],ae[2],ae[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,fe,ae[0],ae[1],ae[2],ae[3]),I+=4}}if(this.buffer.update(E),S.push(F),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=S,"dashes"in p){var J=p.dashes,U=J.slice();for(U.unshift(0),w=1;w<U.length;++w)U[w]=U[w-1]+U[w];var V=o(new Array(256*4),[256,1,4]);for(w=0;w<256;++w){for(h=0;h<4;++h)V.set(w,0,h,0);s.le(U,U[U.length-1]*w/255)&1?V.set(w,0,0,0):V.set(w,0,0,255)}this.texture.setPixels(V)}},A.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},A.pick=function(p){if(!p||p.id!==this.pickId)return null;var w=v(p.value[0],p.value[1],p.value[2],0),h=s.le(this.arcLength,w);if(h<0)return null;if(h===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),h);for(var L=this.points[h],E=this.points[Math.min(h+1,this.points.length-1)],S=(w-this.arcLength[h])/(this.arcLength[h+1]-this.arcLength[h]),P=1-S,F=[0,0,0],I=0;I<3;++I)F[I]=P*L[I]+S*E[I];var D=Math.min(S<.5?h:h+1,this.points.length-1);return new y(w,F,D,this.points[D])};function _(p){var w=p.gl||p.scene&&p.scene.gl,h=g(w);h.attributes.position.location=0,h.attributes.nextPosition.location=1,h.attributes.arcLength.location=2,h.attributes.lineWidth.location=3,h.attributes.color.location=4;var L=d(w);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var E=e(w),S=a(w,[{buffer:E,size:3,offset:0,stride:48},{buffer:E,size:3,offset:12,stride:48},{buffer:E,size:1,offset:24,stride:48},{buffer:E,size:1,offset:28,stride:48},{buffer:E,size:4,offset:32,stride:48}]),P=o(new Array(256*4),[256,1,4]),F=0;F<256*4;++F)P.data[F]=255;var I=i(w,P);I.wrap=w.REPEAT;var D=new u(w,h,L,E,S,I);return D.update(p),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(f,M,T){M.exports=e;function e(a){var i=new Float32Array(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],93:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(f,M,T){M.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3],s=a[4],o=a[5],b=a[6],g=a[7],d=a[8],c=a[9],m=a[10],l=a[11],y=a[12],u=a[13],A=a[14],_=a[15],p=i*o-n*s,w=i*b-r*s,h=i*g-v*s,L=n*b-r*o,E=n*g-v*o,S=r*g-v*b,P=d*u-c*y,F=d*A-m*y,I=d*_-l*y,D=c*A-m*u,R=c*_-l*u,O=m*_-l*A;return p*O-w*R+h*D+L*I-E*F+S*P}},{}],95:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n+n,b=r+r,g=v+v,d=n*o,c=r*o,m=r*b,l=v*o,y=v*b,u=v*g,A=s*o,_=s*b,p=s*g;return a[0]=1-m-u,a[1]=c+p,a[2]=l-_,a[3]=0,a[4]=c-p,a[5]=1-d-u,a[6]=y+A,a[7]=0,a[8]=l+_,a[9]=y-A,a[10]=1-d-m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=r+r,g=v+v,d=s+s,c=r*b,m=r*g,l=r*d,y=v*g,u=v*d,A=s*d,_=o*b,p=o*g,w=o*d;return a[0]=1-(y+A),a[1]=m+w,a[2]=l-p,a[3]=0,a[4]=m-w,a[5]=1-(c+A),a[6]=u+_,a[7]=0,a[8]=l+p,a[9]=u-_,a[10]=1-(c+y),a[11]=0,a[12]=n[0],a[13]=n[1],a[14]=n[2],a[15]=1,a}},{}],97:[function(f,M,T){M.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=i[4],b=i[5],g=i[6],d=i[7],c=i[8],m=i[9],l=i[10],y=i[11],u=i[12],A=i[13],_=i[14],p=i[15],w=n*b-r*o,h=n*g-v*o,L=n*d-s*o,E=r*g-v*b,S=r*d-s*b,P=v*d-s*g,F=c*A-m*u,I=c*_-l*u,D=c*p-y*u,R=m*_-l*A,O=m*p-y*A,z=l*p-y*_,H=w*z-h*O+L*R+E*D-S*I+P*F;return H?(H=1/H,a[0]=(b*z-g*O+d*R)*H,a[1]=(v*O-r*z-s*R)*H,a[2]=(A*P-_*S+p*E)*H,a[3]=(l*S-m*P-y*E)*H,a[4]=(g*D-o*z-d*I)*H,a[5]=(n*z-v*D+s*I)*H,a[6]=(_*L-u*P-p*h)*H,a[7]=(c*P-l*L+y*h)*H,a[8]=(o*O-b*D+d*F)*H,a[9]=(r*D-n*O-s*F)*H,a[10]=(u*S-A*L+p*w)*H,a[11]=(m*L-c*S-y*w)*H,a[12]=(b*I-o*R-g*F)*H,a[13]=(n*R-r*I+v*F)*H,a[14]=(A*h-u*E-_*w)*H,a[15]=(c*E-m*h+l*w)*H,a):null}},{}],99:[function(f,M,T){var e=f("./identity");M.exports=a;function a(i,n,r,v){var s,o,b,g,d,c,m,l,y,u,A=n[0],_=n[1],p=n[2],w=v[0],h=v[1],L=v[2],E=r[0],S=r[1],P=r[2];return Math.abs(A-E)<1e-6&&Math.abs(_-S)<1e-6&&Math.abs(p-P)<1e-6?e(i):(m=A-E,l=_-S,y=p-P,u=1/Math.sqrt(m*m+l*l+y*y),m*=u,l*=u,y*=u,s=h*y-L*l,o=L*m-w*y,b=w*l-h*m,u=Math.sqrt(s*s+o*o+b*b),u?(u=1/u,s*=u,o*=u,b*=u):(s=0,o=0,b=0),g=l*b-y*o,d=y*s-m*b,c=m*o-l*s,u=Math.sqrt(g*g+d*d+c*c),u?(u=1/u,g*=u,d*=u,c*=u):(g=0,d=0,c=0),i[0]=s,i[1]=g,i[2]=m,i[3]=0,i[4]=o,i[5]=d,i[6]=l,i[7]=0,i[8]=b,i[9]=c,i[10]=y,i[11]=0,i[12]=-(s*A+o*_+b*p),i[13]=-(g*A+d*_+c*p),i[14]=-(m*A+l*_+y*p),i[15]=1,i)}},{"./identity":97}],100:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=i[4],g=i[5],d=i[6],c=i[7],m=i[8],l=i[9],y=i[10],u=i[11],A=i[12],_=i[13],p=i[14],w=i[15],h=n[0],L=n[1],E=n[2],S=n[3];return a[0]=h*r+L*b+E*m+S*A,a[1]=h*v+L*g+E*l+S*_,a[2]=h*s+L*d+E*y+S*p,a[3]=h*o+L*c+E*u+S*w,h=n[4],L=n[5],E=n[6],S=n[7],a[4]=h*r+L*b+E*m+S*A,a[5]=h*v+L*g+E*l+S*_,a[6]=h*s+L*d+E*y+S*p,a[7]=h*o+L*c+E*u+S*w,h=n[8],L=n[9],E=n[10],S=n[11],a[8]=h*r+L*b+E*m+S*A,a[9]=h*v+L*g+E*l+S*_,a[10]=h*s+L*d+E*y+S*p,a[11]=h*o+L*c+E*u+S*w,h=n[12],L=n[13],E=n[14],S=n[15],a[12]=h*r+L*b+E*m+S*A,a[13]=h*v+L*g+E*l+S*_,a[14]=h*s+L*d+E*y+S*p,a[15]=h*o+L*c+E*u+S*w,a}},{}],101:[function(f,M,T){M.exports=e;function e(a,i,n,r,v,s,o){var b=1/(i-n),g=1/(r-v),d=1/(s-o);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*d,a[11]=0,a[12]=(i+n)*b,a[13]=(v+r)*g,a[14]=(o+s)*d,a[15]=1,a}},{}],102:[function(f,M,T){M.exports=e;function e(a,i,n,r,v){var s=1/Math.tan(i/2),o=1/(r-v);return a[0]=s/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(v+r)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*v*r*o,a[15]=0,a}},{}],103:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=r[0],s=r[1],o=r[2],b=Math.sqrt(v*v+s*s+o*o),g,d,c,m,l,y,u,A,_,p,w,h,L,E,S,P,F,I,D,R,O,z,H,Y;return Math.abs(b)<1e-6?null:(b=1/b,v*=b,s*=b,o*=b,g=Math.sin(n),d=Math.cos(n),c=1-d,m=i[0],l=i[1],y=i[2],u=i[3],A=i[4],_=i[5],p=i[6],w=i[7],h=i[8],L=i[9],E=i[10],S=i[11],P=v*v*c+d,F=s*v*c+o*g,I=o*v*c-s*g,D=v*s*c-o*g,R=s*s*c+d,O=o*s*c+v*g,z=v*o*c+s*g,H=s*o*c-v*g,Y=o*o*c+d,a[0]=m*P+A*F+h*I,a[1]=l*P+_*F+L*I,a[2]=y*P+p*F+E*I,a[3]=u*P+w*F+S*I,a[4]=m*D+A*R+h*O,a[5]=l*D+_*R+L*O,a[6]=y*D+p*R+E*O,a[7]=u*D+w*R+S*O,a[8]=m*z+A*H+h*Y,a[9]=l*z+_*H+L*Y,a[10]=y*z+p*H+E*Y,a[11]=u*z+w*H+S*Y,i!==a&&(a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a)}},{}],104:[function(f,M,T){M.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[4],o=i[5],b=i[6],g=i[7],d=i[8],c=i[9],m=i[10],l=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=s*v+d*r,a[5]=o*v+c*r,a[6]=b*v+m*r,a[7]=g*v+l*r,a[8]=d*v-s*r,a[9]=c*v-o*r,a[10]=m*v-b*r,a[11]=l*v-g*r,a}},{}],105:[function(f,M,T){M.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[8],c=i[9],m=i[10],l=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v-d*r,a[1]=o*v-c*r,a[2]=b*v-m*r,a[3]=g*v-l*r,a[8]=s*r+d*v,a[9]=o*r+c*v,a[10]=b*r+m*v,a[11]=g*r+l*v,a}},{}],106:[function(f,M,T){M.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[4],c=i[5],m=i[6],l=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v+d*r,a[1]=o*v+c*r,a[2]=b*v+m*r,a[3]=g*v+l*r,a[4]=d*v-s*r,a[5]=c*v-o*r,a[6]=m*v-b*r,a[7]=l*v-g*r,a}},{}],107:[function(f,M,T){M.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2];return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a[4]=i[4]*v,a[5]=i[5]*v,a[6]=i[6]*v,a[7]=i[7]*v,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,a[11]=i[11]*s,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],108:[function(f,M,T){M.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2],o,b,g,d,c,m,l,y,u,A,_,p;return i===a?(a[12]=i[0]*r+i[4]*v+i[8]*s+i[12],a[13]=i[1]*r+i[5]*v+i[9]*s+i[13],a[14]=i[2]*r+i[6]*v+i[10]*s+i[14],a[15]=i[3]*r+i[7]*v+i[11]*s+i[15]):(o=i[0],b=i[1],g=i[2],d=i[3],c=i[4],m=i[5],l=i[6],y=i[7],u=i[8],A=i[9],_=i[10],p=i[11],a[0]=o,a[1]=b,a[2]=g,a[3]=d,a[4]=c,a[5]=m,a[6]=l,a[7]=y,a[8]=u,a[9]=A,a[10]=_,a[11]=p,a[12]=o*r+c*v+u*s+i[12],a[13]=b*r+m*v+A*s+i[13],a[14]=g*r+l*v+_*s+i[14],a[15]=d*r+y*v+p*s+i[15]),a}},{}],109:[function(f,M,T){M.exports=e;function e(a,i){if(a===i){var n=i[1],r=i[2],v=i[3],s=i[6],o=i[7],b=i[11];a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=n,a[6]=i[9],a[7]=i[13],a[8]=r,a[9]=s,a[11]=i[14],a[12]=v,a[13]=o,a[14]=b}else a[0]=i[0],a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=i[1],a[5]=i[5],a[6]=i[9],a[7]=i[13],a[8]=i[2],a[9]=i[6],a[10]=i[10],a[11]=i[14],a[12]=i[3],a[13]=i[7],a[14]=i[11],a[15]=i[15];return a}},{}],110:[function(f,M,T){var e=f("barycentric"),a=f("polytope-closest-point/lib/closest_point_2d.js");M.exports=s;function i(o,b){for(var g=[0,0,0,0],d=0;d<4;++d)for(var c=0;c<4;++c)g[c]+=o[4*d+c]*b[d];return g}function n(o,b,g,d,c){for(var m=i(d,i(g,i(b,[o[0],o[1],o[2],1]))),l=0;l<3;++l)m[l]/=m[3];return[.5*c[0]*(1+m[0]),.5*c[1]*(1-m[1])]}function r(o,b){if(o.length===2){for(var g=0,d=0,c=0;c<2;++c)g+=Math.pow(b[c]-o[0][c],2),d+=Math.pow(b[c]-o[1][c],2);return g=Math.sqrt(g),d=Math.sqrt(d),g+d<1e-6?[1,0]:[d/(g+d),g/(d+g)]}else if(o.length===3){var m=[0,0];return a(o[0],o[1],o[2],b,m),e(o,m)}return[]}function v(o,b){for(var g=[0,0,0],d=0;d<o.length;++d)for(var c=o[d],m=b[d],l=0;l<3;++l)g[l]+=m*c[l];return g}function s(o,b,g,d,c,m){if(o.length===1)return[0,o[0].slice()];for(var l=new Array(o.length),y=0;y<o.length;++y)l[y]=n(o[y],g,d,c,m);for(var u=0,A=1/0,y=0;y<l.length;++y){for(var _=0,p=0;p<2;++p)_+=Math.pow(l[y][p]-b[p],2);_<A&&(A=_,u=y)}for(var w=r(l,b),h=0,y=0;y<3;++y){if(w[y]<-.001||w[y]>1.0001)return null;h+=w[y]}return Math.abs(h-1)>.001?null:[u,v(o,w),w]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),v=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),c=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:v,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:o,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:g,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:d,fragment:c,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(f,M,T){var e=1e-6,a=1e-6,i=f("gl-shader"),n=f("gl-buffer"),r=f("gl-vao"),v=f("gl-texture2d"),s=f("normals"),o=f("gl-mat4/multiply"),b=f("gl-mat4/invert"),g=f("ndarray"),d=f("colormap"),c=f("simplicial-complex-contour"),m=f("typedarray-pool"),l=f("./lib/shaders"),y=f("./lib/closest-point"),u=l.meshShader,A=l.wireShader,_=l.pointShader,p=l.pickShader,w=l.pointPickShader,h=l.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function E(j,X,ae,fe,K,J,U,V,q,re,Z,Q,ie,oe,ne,se,_e,ue,ge,xe,ye,be,Se,Re,Ve,Ae,Ce){this.gl=j,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=ae,this.lineShader=fe,this.pointShader=K,this.pickShader=J,this.pointPickShader=U,this.contourShader=V,this.trianglePositions=q,this.triangleColors=Z,this.triangleNormals=ie,this.triangleUVs=Q,this.triangleIds=re,this.triangleVAO=oe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ne,this.edgeColors=_e,this.edgeUVs=ue,this.edgeIds=se,this.edgeVAO=ge,this.edgeCount=0,this.pointPositions=xe,this.pointColors=be,this.pointUVs=Se,this.pointSizes=Re,this.pointIds=ye,this.pointVAO=Ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Ce,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var S=E.prototype;S.isOpaque=function(){return!this.hasAlpha},S.isTransparent=function(){return this.hasAlpha},S.pickSlots=1,S.setPickBase=function(j){this.pickId=j};function P(j,X){if(!X||!X.length)return 1;for(var ae=0;ae<X.length;++ae){if(X.length<2)return 1;if(X[ae][0]===j)return X[ae][1];if(X[ae][0]>j&&ae>0){var fe=(X[ae][0]-j)/(X[ae][0]-X[ae-1][0]);return X[ae][1]*(1-fe)+fe*X[ae-1][1]}}return 1}function F(j,X){for(var ae=d({colormap:j,nshades:256,format:"rgba"}),fe=new Uint8Array(256*4),K=0;K<256;++K){for(var J=ae[K],U=0;U<3;++U)fe[4*K+U]=J[U];X?fe[4*K+3]=255*P(K/255,X):fe[4*K+3]=255*J[3]}return g(fe,[256,256,4],[4,0,1])}function I(j){for(var X=j.length,ae=new Array(X),fe=0;fe<X;++fe)ae[fe]=j[fe][2];return ae}S.highlight=function(j){if(!j||!this.contourEnable){this.contourCount=0;return}for(var X=c(this.cells,this.intensity,j.intensity),ae=X.cells,fe=X.vertexIds,K=X.vertexWeights,J=ae.length,U=m.mallocFloat32(2*3*J),V=0,q=0;q<J;++q)for(var re=ae[q],Z=0;Z<2;++Z){var Q=re[0];re.length===2&&(Q=re[Z]);for(var ie=fe[Q][0],oe=fe[Q][1],ne=K[Q],se=1-ne,_e=this.positions[ie],ue=this.positions[oe],ge=0;ge<3;++ge)U[V++]=ne*_e[ge]+se*ue[ge]}this.contourCount=V/3|0,this.contourPositions.update(U.subarray(0,V)),m.free(U)},S.update=function(j){j=j||{};var X=this.gl;this.dirty=!0,"contourEnable"in j&&(this.contourEnable=j.contourEnable),"contourColor"in j&&(this.contourColor=j.contourColor),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"lightPosition"in j&&(this.lightPosition=j.lightPosition),this.hasAlpha=!1,"opacity"in j&&(this.opacity=j.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in j&&(this.opacityscale=j.opacityscale,this.hasAlpha=!0),"ambient"in j&&(this.ambientLight=j.ambient),"diffuse"in j&&(this.diffuseLight=j.diffuse),"specular"in j&&(this.specularLight=j.specular),"roughness"in j&&(this.roughness=j.roughness),"fresnel"in j&&(this.fresnel=j.fresnel),j.texture?(this.texture.dispose(),this.texture=v(X,j.texture)):j.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(F(j.colormap,this.opacityscale)),this.texture.generateMipmap());var ae=j.cells,fe=j.positions;if(!fe||!ae)return;var K=[],J=[],U=[],V=[],q=[],re=[],Z=[],Q=[],ie=[],oe=[],ne=[],se=[],_e=[],ue=[];this.cells=ae,this.positions=fe;var ge=j.vertexNormals,xe=j.cellNormals,ye=j.vertexNormalsEpsilon===void 0?e:j.vertexNormalsEpsilon,be=j.faceNormalsEpsilon===void 0?a:j.faceNormalsEpsilon;j.useFacetNormals&&!xe&&(xe=s.faceNormals(ae,fe,be)),!xe&&!ge&&(ge=s.vertexNormals(ae,fe,ye));var Se=j.vertexColors,Re=j.cellColors,Ve=j.meshColor||[1,1,1,1],Ae=j.vertexUVs,Ce=j.vertexIntensity,Ze=j.cellUVs,Ye=j.cellIntensity,ze=1/0,Ie=-1/0;if(!Ae&&!Ze)if(Ce)if(j.vertexIntensityBounds)ze=+j.vertexIntensityBounds[0],Ie=+j.vertexIntensityBounds[1];else for(var Ge=0;Ge<Ce.length;++Ge){var dt=Ce[Ge];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}else if(Ye)if(j.cellIntensityBounds)ze=+j.cellIntensityBounds[0],Ie=+j.cellIntensityBounds[1];else for(var Ge=0;Ge<Ye.length;++Ge){var dt=Ye[Ge];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}else for(var Ge=0;Ge<fe.length;++Ge){var dt=fe[Ge][2];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}Ce?this.intensity=Ce:Ye?this.intensity=Ye:this.intensity=I(fe),this.pickVertex=!(Ye||Re);var Rt=j.pointSizes,Qt=j.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ge=0;Ge<fe.length;++Ge)for(var Bt=fe[Ge],Ct=0;Ct<3;++Ct)isNaN(Bt[Ct])||!isFinite(Bt[Ct])||(this.bounds[0][Ct]=Math.min(this.bounds[0][Ct],Bt[Ct]),this.bounds[1][Ct]=Math.max(this.bounds[1][Ct],Bt[Ct]));var Kt=0,Ot=0,St=0;e:for(var Ge=0;Ge<ae.length;++Ge){var Xe=ae[Ge];switch(Xe.length){case 1:for(var at=Xe[0],Bt=fe[at],Ct=0;Ct<3;++Ct)if(isNaN(Bt[Ct])||!isFinite(Bt[Ct]))continue e;oe.push(Bt[0],Bt[1],Bt[2]);var We;Se?We=Se[at]:Re?We=Re[Ge]:We=Ve,this.opacityscale&&Ce?J.push(We[0],We[1],We[2],this.opacity*P((Ce[at]-ze)/(Ie-ze),this.opacityscale)):We.length===3?ne.push(We[0],We[1],We[2],this.opacity):(ne.push(We[0],We[1],We[2],We[3]*this.opacity),We[3]<1&&(this.hasAlpha=!0));var Ee;Ae?Ee=Ae[at]:Ce?Ee=[(Ce[at]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ge]:Ye?Ee=[(Ye[Ge]-ze)/(Ie-ze),0]:Ee=[(Bt[2]-ze)/(Ie-ze),0],se.push(Ee[0],Ee[1]),Rt?_e.push(Rt[at]):_e.push(Qt),ue.push(Ge),St+=1;break;case 2:for(var Ct=0;Ct<2;++Ct)for(var at=Xe[Ct],Bt=fe[at],He=0;He<3;++He)if(isNaN(Bt[He])||!isFinite(Bt[He]))continue e;for(var Ct=0;Ct<2;++Ct){var at=Xe[Ct],Bt=fe[at];re.push(Bt[0],Bt[1],Bt[2]);var We;Se?We=Se[at]:Re?We=Re[Ge]:We=Ve,this.opacityscale&&Ce?J.push(We[0],We[1],We[2],this.opacity*P((Ce[at]-ze)/(Ie-ze),this.opacityscale)):We.length===3?Z.push(We[0],We[1],We[2],this.opacity):(Z.push(We[0],We[1],We[2],We[3]*this.opacity),We[3]<1&&(this.hasAlpha=!0));var Ee;Ae?Ee=Ae[at]:Ce?Ee=[(Ce[at]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ge]:Ye?Ee=[(Ye[Ge]-ze)/(Ie-ze),0]:Ee=[(Bt[2]-ze)/(Ie-ze),0],Q.push(Ee[0],Ee[1]),ie.push(Ge)}Ot+=1;break;case 3:for(var Ct=0;Ct<3;++Ct)for(var at=Xe[Ct],Bt=fe[at],He=0;He<3;++He)if(isNaN(Bt[He])||!isFinite(Bt[He]))continue e;for(var Ct=0;Ct<3;++Ct){var at=Xe[2-Ct],Bt=fe[at];K.push(Bt[0],Bt[1],Bt[2]);var We;Se?We=Se[at]:Re?We=Re[Ge]:We=Ve,We?this.opacityscale&&Ce?J.push(We[0],We[1],We[2],this.opacity*P((Ce[at]-ze)/(Ie-ze),this.opacityscale)):We.length===3?J.push(We[0],We[1],We[2],this.opacity):(J.push(We[0],We[1],We[2],We[3]*this.opacity),We[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1);var Ee;Ae?Ee=Ae[at]:Ce?Ee=[(Ce[at]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ge]:Ye?Ee=[(Ye[Ge]-ze)/(Ie-ze),0]:Ee=[(Bt[2]-ze)/(Ie-ze),0],V.push(Ee[0],Ee[1]);var Ke;ge?Ke=ge[at]:Ke=xe[Ge],U.push(Ke[0],Ke[1],Ke[2]),q.push(Ge)}Kt+=1;break}}this.pointCount=St,this.edgeCount=Ot,this.triangleCount=Kt,this.pointPositions.update(oe),this.pointColors.update(ne),this.pointUVs.update(se),this.pointSizes.update(_e),this.pointIds.update(new Uint32Array(ue)),this.edgePositions.update(re),this.edgeColors.update(Z),this.edgeUVs.update(Q),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(K),this.triangleColors.update(J),this.triangleUVs.update(V),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(q))},S.drawTransparent=S.draw=function(j){j=j||{};for(var X=this.gl,ae=j.model||L,fe=j.view||L,K=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)J[0][U]=Math.max(J[0][U],this.clipBounds[0][U]),J[1][U]=Math.min(J[1][U],this.clipBounds[1][U]);var V={model:ae,view:fe,projection:K,inverseModel:L.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};V.inverseModel=b(V.inverseModel,V.model),X.disable(X.CULL_FACE),this.texture.bind(0);var q=new Array(16);o(q,V.view,V.model),o(q,V.projection,q),b(q,q);for(var U=0;U<3;++U)V.eyePosition[U]=q[12+U]/q[15];for(var re=q[15],U=0;U<3;++U)re+=this.lightPosition[U]*q[4*U+3];for(var U=0;U<3;++U){for(var Z=q[12+U],Q=0;Q<3;++Q)Z+=q[4*Q+U]*this.lightPosition[Q];V.lightPosition[U]=Z/re}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=V,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=V,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=V,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=V,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},S.drawPick=function(j){j=j||{};for(var X=this.gl,ae=j.model||L,fe=j.view||L,K=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)J[0][U]=Math.max(J[0][U],this.clipBounds[0][U]),J[1][U]=Math.min(J[1][U],this.clipBounds[1][U]);this._model=[].slice.call(ae),this._view=[].slice.call(fe),this._projection=[].slice.call(K),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var V={model:ae,view:fe,projection:K,clipBounds:J,pickId:this.pickId/255},q=this.pickShader;if(q.bind(),q.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var q=this.pointPickShader;q.bind(),q.uniforms=V,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},S.pick=function(j){if(!j||j.id!==this.pickId)return null;for(var X=j.value[0]+256*j.value[1]+65536*j.value[2],ae=this.cells[X],fe=this.positions,K=new Array(ae.length),J=0;J<ae.length;++J)K[J]=fe[ae[J]];var U=j.coord[0],V=j.coord[1];if(!this.pickVertex){var q=this.positions[ae[0]],re=this.positions[ae[1]],Z=this.positions[ae[2]],Q=[(q[0]+re[0]+Z[0])/3,(q[1]+re[1]+Z[1])/3,(q[2]+re[2]+Z[2])/3];return{_cellCenter:!0,position:[U,V],index:X,cell:ae,cellId:X,intensity:this.intensity[X],dataCoordinate:Q}}var ie=y(K,[U*this.pixelRatio,this._resolution[1]-V*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var oe=ie[2],ne=0,J=0;J<ae.length;++J)ne+=oe[J]*this.intensity[ae[J]];return{position:ie[1],index:ae[ie[0]],cell:ae,cellId:X,intensity:ne,dataCoordinate:this.positions[ae[ie[0]]]}},S.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(j){var X=i(j,u.vertex,u.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function R(j){var X=i(j,A.vertex,A.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function O(j){var X=i(j,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function z(j){var X=i(j,p.vertex,p.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function H(j){var X=i(j,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function Y(j){var X=i(j,h.vertex,h.fragment);return X.attributes.position.location=0,X}function ee(j,X){arguments.length===1&&(X=j,j=X.gl);var ae=j.getExtension("OES_standard_derivatives")||j.getExtension("MOZ_OES_standard_derivatives")||j.getExtension("WEBKIT_OES_standard_derivatives");if(!ae)throw new Error("derivatives not supported");var fe=D(j),K=R(j),J=O(j),U=z(j),V=H(j),q=Y(j),re=v(j,g(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=j.LINEAR_MIPMAP_LINEAR,re.magFilter=j.LINEAR;var Z=n(j),Q=n(j),ie=n(j),oe=n(j),ne=n(j),se=r(j,[{buffer:Z,type:j.FLOAT,size:3},{buffer:ne,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:j.FLOAT,size:4},{buffer:ie,type:j.FLOAT,size:2},{buffer:oe,type:j.FLOAT,size:3}]),_e=n(j),ue=n(j),ge=n(j),xe=n(j),ye=r(j,[{buffer:_e,type:j.FLOAT,size:3},{buffer:xe,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:j.FLOAT,size:4},{buffer:ge,type:j.FLOAT,size:2}]),be=n(j),Se=n(j),Re=n(j),Ve=n(j),Ae=n(j),Ce=r(j,[{buffer:be,type:j.FLOAT,size:3},{buffer:Ae,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Se,type:j.FLOAT,size:4},{buffer:Re,type:j.FLOAT,size:2},{buffer:Ve,type:j.FLOAT,size:1}]),Ze=n(j),Ye=r(j,[{buffer:Ze,type:j.FLOAT,size:3}]),ze=new E(j,re,fe,K,J,U,V,q,Z,ne,Q,ie,oe,se,_e,xe,ue,ge,ye,be,Ae,Se,Re,Ve,Ce,Ze,Ye);return ze.update(X),ze}M.exports=ee},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(f,M,T){M.exports=v;var e=f("gl-buffer"),a=f("gl-shader"),i=f("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var s=[0,0],o=[0,0];return function(b,g,d,c,m){var l=this.plot,y=this.shader,u=l.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=c,y.uniforms.lo=s,y.uniforms.hi=o,y.uniforms.color=m,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[0,0,0,1,1,0,1,1]),g=a(o,i.boxVert,i.lineFrag);return new n(s,b,g)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(f,M,T){M.exports=o;var e=f("gl-buffer"),a=f("gl-shader"),i=f("binary-search-bounds"),n=f("./shaders");function r(b,g,d,c){this.plot=b,this.vbo=g,this.shader=d,this.tickShader=c,this.ticks=[[],[]]}function v(b,g){return b-g}var s=r.prototype;s.draw=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){for(var c=this.plot,m=this.vbo,l=this.shader,y=this.ticks,u=c.gl,A=c._tickBounds,_=c.dataBox,p=c.viewBox,w=c.gridLineWidth,h=c.gridLineColor,L=c.gridLineEnable,E=c.pixelRatio,S=0;S<2;++S){var P=A[S],F=A[S+2],I=F-P,D=.5*(_[S+2]+_[S]),R=_[S+2]-_[S];g[S]=2*I/R,b[S]=2*(P-D)/R}l.bind(),m.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=b,l.uniforms.dataScale=g;for(var O=0,S=0;S<2;++S){d[0]=d[1]=0,d[S]=1,l.uniforms.dataAxis=d,l.uniforms.lineWidth=w[S]/(p[S+2]-p[S])*E,l.uniforms.color=h[S];var z=y[S].length*6;L[S]&&z&&u.drawArrays(u.TRIANGLES,O,z),O+=z}}}(),s.drawTickMarks=function(){var b=[0,0],g=[0,0],d=[1,0],c=[0,1],m=[0,0],l=[0,0];return function(){for(var y=this.plot,u=this.vbo,A=this.tickShader,_=this.ticks,p=y.gl,w=y._tickBounds,h=y.dataBox,L=y.viewBox,E=y.pixelRatio,S=y.screenBox,P=S[2]-S[0],F=S[3]-S[1],I=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var O=w[R],z=w[R+2],H=z-O,Y=.5*(h[R+2]+h[R]),ee=h[R+2]-h[R];g[R]=2*H/ee,b[R]=2*(O-Y)/ee}g[0]*=I/P,b[0]*=I/P,g[1]*=D/F,b[1]*=D/F,A.bind(),u.bind(),A.attributes.dataCoord.pointer();var j=A.uniforms;j.dataShift=b,j.dataScale=g;var X=y.tickMarkLength,ae=y.tickMarkWidth,fe=y.tickMarkColor,K=0,J=_[0].length*6,U=Math.min(i.ge(_[0],(h[0]-w[0])/(w[2]-w[0]),v),_[0].length),V=Math.min(i.gt(_[0],(h[2]-w[0])/(w[2]-w[0]),v),_[0].length),q=K+6*U,re=6*Math.max(0,V-U),Z=Math.min(i.ge(_[1],(h[1]-w[1])/(w[3]-w[1]),v),_[1].length),Q=Math.min(i.gt(_[1],(h[3]-w[1])/(w[3]-w[1]),v),_[1].length),ie=J+6*Z,oe=6*Math.max(0,Q-Z);m[0]=2*(L[0]-X[1])/P-1,m[1]=(L[3]+L[1])/F-1,l[0]=X[1]*E/P,l[1]=ae[1]*E/F,oe&&(j.color=fe[1],j.tickScale=l,j.dataAxis=c,j.screenOffset=m,p.drawArrays(p.TRIANGLES,ie,oe)),m[0]=(L[2]+L[0])/P-1,m[1]=2*(L[1]-X[0])/F-1,l[0]=ae[0]*E/P,l[1]=X[0]*E/F,re&&(j.color=fe[0],j.tickScale=l,j.dataAxis=d,j.screenOffset=m,p.drawArrays(p.TRIANGLES,q,re)),m[0]=2*(L[2]+X[3])/P-1,m[1]=(L[3]+L[1])/F-1,l[0]=X[3]*E/P,l[1]=ae[3]*E/F,oe&&(j.color=fe[3],j.tickScale=l,j.dataAxis=c,j.screenOffset=m,p.drawArrays(p.TRIANGLES,ie,oe)),m[0]=(L[2]+L[0])/P-1,m[1]=2*(L[3]+X[2])/F-1,l[0]=ae[2]*E/P,l[1]=X[2]*E/F,re&&(j.color=fe[2],j.tickScale=l,j.dataAxis=d,j.screenOffset=m,p.drawArrays(p.TRIANGLES,q,re))}}(),s.update=function(){var b=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1];return function(d){var c=d.ticks,m=d.bounds,l=new Float32Array(6*3*(c[0].length+c[1].length));this.plot.zeroLineEnable;for(var y=0,u=[[],[]],A=0;A<2;++A)for(var _=u[A],p=c[A],w=m[A],h=m[A+2],L=0;L<p.length;++L){var E=(p[L].x-w)/(h-w);_.push(E);for(var S=0;S<6;++S)l[y++]=E,l[y++]=b[S],l[y++]=g[S]}this.ticks=u,this.vbo.update(l)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(b){var g=b.gl,d=e(g),c=a(g,n.gridVert,n.gridFrag),m=a(g,n.tickVert,n.gridFrag),l=new r(b,d,c,m);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(f,M,T){M.exports=v;var e=f("gl-buffer"),a=f("gl-shader"),i=f("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var s=[0,0],o=[0,0];return function(b,g,d,c,m,l){var y=this.plot,u=this.shader,A=y.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=c,u.uniforms.start=s,u.uniforms.end=o,u.uniforms.width=m*y.pixelRatio,u.uniforms.color=l,A.drawArrays(A.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[-1,-1,-1,1,1,-1,1,1]),g=a(o,i.lineVert,i.lineFrag),d=new n(s,b,g);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(f,M,T){var e=f("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);M.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(f,M,T){M.exports=o;var e=f("gl-buffer"),a=f("gl-shader"),i=f("text-cache"),n=f("binary-search-bounds"),r=f("./shaders");function v(b,g,d){this.plot=b,this.vbo=g,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=v.prototype;s.drawTicks=function(){var b=[0,0],g=[0,0],d=[0,0];return function(c){var m=this.plot,l=this.shader,y=this.tickX[c],u=this.tickOffset[c],A=m.gl,_=m.viewBox,p=m.dataBox,w=m.screenBox,h=m.pixelRatio,L=m.tickEnable,E=m.tickPad,S=m.tickColor,P=m.tickAngle,F=m.labelEnable,I=m.labelPad,D=m.labelColor,R=m.labelAngle,O=this.labelOffset[c],z=this.labelCount[c],H=n.lt(y,p[c]),Y=n.le(y,p[c+2]);b[0]=b[1]=0,b[c]=1,g[c]=(_[2+c]+_[c])/(w[2+c]-w[c])-1;var ee=2/w[2+(c^1)]-w[c^1];g[c^1]=ee*_[c^1]-1,L[c]&&(g[c^1]-=ee*h*E[c],H<Y&&u[Y]>u[H]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=S[c],l.uniforms.angle=P[c],A.drawArrays(A.TRIANGLES,u[H],u[Y]-u[H]))),F[c]&&z&&(g[c^1]-=ee*h*I[c],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[c],l.uniforms.angle=R[c],A.drawArrays(A.TRIANGLES,O,z)),g[c^1]=ee*_[2+(c^1)]-1,L[c+2]&&(g[c^1]+=ee*h*E[c+2],H<Y&&u[Y]>u[H]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=S[c+2],l.uniforms.angle=P[c+2],A.drawArrays(A.TRIANGLES,u[H],u[Y]-u[H]))),F[c+2]&&z&&(g[c^1]+=ee*h*I[c+2],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[c+2],l.uniforms.angle=R[c+2],A.drawArrays(A.TRIANGLES,O,z))}}(),s.drawTitle=function(){var b=[0,0],g=[0,0];return function(){var d=this.plot,c=this.shader,m=d.gl,l=d.screenBox,y=d.titleCenter,u=d.titleAngle,A=d.titleColor,_=d.pixelRatio;if(!!this.titleCount){for(var p=0;p<2;++p)g[p]=2*(y[p]*_-l[p])/(l[2+p]-l[p])-1;c.bind(),c.uniforms.dataAxis=b,c.uniforms.screenOffset=g,c.uniforms.angle=u,c.uniforms.color=A,m.drawArrays(m.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){var c=this.plot,m=this.shader,l=c._tickBounds,y=c.dataBox,u=c.screenBox,A=c.viewBox;m.bind();for(var _=0;_<2;++_){var p=l[_],w=l[_+2],h=w-p,L=.5*(y[_+2]+y[_]),E=y[_+2]-y[_],S=A[_],P=A[_+2],F=P-S,I=u[_],D=u[_+2],R=D-I;g[_]=2*h/E*F/R,b[_]=2*(p-L)/E*F/R}d[1]=2*c.pixelRatio/(u[3]-u[1]),d[0]=d[1]*(u[3]-u[1])/(u[2]-u[0]),m.uniforms.dataScale=g,m.uniforms.dataShift=b,m.uniforms.textScale=d,this.vbo.bind(),m.attributes.textCoordinate.pointer()}}(),s.update=function(b){var g=[],d=b.ticks,c=b.bounds,m,l,y,u,A;for(A=0;A<2;++A){var _=[Math.floor(g.length/3)],p=[-1/0],w=d[A];for(m=0;m<w.length;++m){var h=w[m],L=h.x,E=h.text,S=h.font||"sans-serif";u=h.fontSize||12;for(var P=1/(c[A+2]-c[A]),F=c[A],I=E.split(`
`),D=0;D<I.length;D++)for(y=i(S,I[D]).data,l=0;l<y.length;l+=2)g.push(y[l]*u,-y[l+1]*u-D*u*1.2,(L-F)*P);_.push(Math.floor(g.length/3)),p.push(L)}this.tickOffset[A]=_,this.tickX[A]=p}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(g.length/3),y=i(b.labelFont[A],b.labels[A],{textAlign:"center"}).data,u=b.labelSize[A],m=0;m<y.length;m+=2)g.push(y[m]*u,-y[m+1]*u,0);this.labelCount[A]=Math.floor(g.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(g.length/3),y=i(b.titleFont,b.title).data,u=b.titleSize,m=0;m<y.length;m+=2)g.push(y[m]*u,-y[m+1]*u,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(b){var g=b.gl,d=e(g),c=a(g,r.textVert,r.textFrag),m=new v(b,d,c);return m}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(f,M,T){M.exports=g;var e=f("gl-select-static"),a=f("./lib/grid"),i=f("./lib/text"),n=f("./lib/line"),r=f("./lib/box");function v(d,c){this.gl=d,this.pickBuffer=c,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=v.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var d=this.gl,c=this.screenBox,m=this.viewBox,l=this.dataBox,y=this.pixelRatio,u=this.grid,A=this.line,_=this.text,p=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var w=this.borderColor;d.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),d.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var h=this.backgroundColor;d.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),d.clear(d.COLOR_BUFFER_BIT),u.draw();var L=this.zeroLineEnable,E=this.zeroLineColor,S=this.zeroLineWidth;if(L[0]||L[1]){A.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(l[P]<=0&&l[P+2]>=0))){var F=c[P]-l[P]*(c[P+2]-c[P])/(l[P+2]-l[P]);P===0?A.drawLine(F,c[1],F,c[3],S[P],E[P]):A.drawLine(c[0],F,c[2],F,S[P],E[P])}}for(var P=0;P<p.length;++P)p[P].draw();d.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]),d.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),this.grid.drawTickMarks(),A.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&A.drawLine(m[0],m[1]-.5*D[1]*y,m[0],m[3]+.5*D[3]*y,D[1],R[1]),I[0]&&A.drawLine(m[0]-.5*D[0]*y,m[1],m[2]+.5*D[2]*y,m[1],D[0],R[0]),I[3]&&A.drawLine(m[2],m[1]-.5*D[1]*y,m[2],m[3]+.5*D[3]*y,D[3],R[3]),I[2]&&A.drawLine(m[0]-.5*D[0]*y,m[3],m[2]+.5*D[2]*y,m[3],D[2],R[2]),_.bind();for(var P=0;P<2;++P)_.drawTicks(P);this.titleEnable&&_.drawTitle();for(var O=this.overlays,P=0;P<O.length;++P)O[P].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var c=1,m=this.objects,l=0;l<m.length;++l)c=m[l].drawPick(c);d.end()}}}(),s.pick=function(){return function(d,c){if(!this.static){var m=this.pixelRatio,l=this.pickPixelRatio,y=this.viewBox,u=Math.round((d-y[0]/m)*l)|0,A=Math.round((c-y[1]/m)*l)|0,_=this.pickBuffer.query(u,A,this.pickRadius);if(!_)return null;for(var p=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),w=this.objects,h=0;h<w.length;++h){var L=w[h].pick(u,A,p);if(L)return L}return null}}}();function o(d){for(var c=d.slice(),m=0;m<c.length;++m)c[m]=c[m].slice();return c}function b(d,c){return d.x-c.x}s.setScreenBox=function(d){var c=this.screenBox,m=this.pixelRatio;c[0]=Math.round(d[0]*m)|0,c[1]=Math.round(d[1]*m)|0,c[2]=Math.round(d[2]*m)|0,c[3]=Math.round(d[3]*m)|0,this.setDirty()},s.setDataBox=function(d){var c=this.dataBox,m=c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3];m&&(c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],this.setDirty())},s.setViewBox=function(d){var c=this.pixelRatio,m=this.viewBox;m[0]=Math.round(d[0]*c)|0,m[1]=Math.round(d[1]*c)|0,m[2]=Math.round(d[2]*c)|0,m[3]=Math.round(d[3]*c)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*l)|0,Math.round((d[3]-d[1])*l)|0],this.setDirty()},s.update=function(d){d=d||{};var c=this.gl;this.pixelRatio=d.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(d.screenBox||[0,0,c.drawingBufferWidth/m,c.drawingBufferHeight/m]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var l=this.viewBox,y=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(d.dataBox||[-10,-10/y,10,10/y]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(l[0]+l[2])/m,(l[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=d.ticks||[[],[]],A=this._tickBounds;A[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(var _=0;_<2;++_){var p=u[_].slice(0);p.length!==0&&(p.sort(b),A[_]=Math.min(A[_],p[0].x),A[_+2]=Math.max(A[_+2],p[p.length-1].x))}this.grid.update({bounds:A,ticks:u}),this.text.update({bounds:A,ticks:u,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},s.removeObject=function(d){for(var c=this.objects,m=0;m<c.length;++m)if(c[m]===d){c.splice(m,1),this.setDirty();break}},s.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},s.removeOverlay=function(d){for(var c=this.overlays,m=0;m<c.length;++m)if(c[m]===d){c.splice(m,1),this.setOverlayDirty();break}};function g(d){var c=d.gl,m=e(c,[c.drawingBufferWidth,c.drawingBufferHeight]),l=new v(c,m);return l.grid=a(l),l.text=i(l),l.line=n(l),l.box=r(l),l.update(d),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(f,M,T){M.exports=s;var e=f("right-now"),a=f("3d-view"),i=f("mouse-change"),n=f("mouse-wheel"),r=f("mouse-event-offset"),v=f("has-passive-events");function s(o,b){o=o||document.body,b=b||{};var g=[.01,1/0];"distanceLimits"in b&&(g[0]=b.distanceLimits[0],g[1]=b.distanceLimits[1]),"zoomMin"in b&&(g[0]=b.zoomMin),"zoomMax"in b&&(g[1]=b.zoomMax);var d=a({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:g}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,l=o.clientWidth,y=o.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:d,element:o,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,_ortho:b._ortho||b.projection&&b.projection.type==="orthographic"||!1,tick:function(){var A=e(),_=this.delay,p=A-2*_;d.idle(A-_),d.recalcMatrix(p),d.flush(A-(100+_*2));for(var w=!0,h=d.computedMatrix,L=0;L<16;++L)w=w&&c[L]===h[L],c[L]=h[L];var E=o.clientWidth===l&&o.clientHeight===y;return l=o.clientWidth,y=o.clientHeight,w?!E:(m=Math.exp(d.computedRadius[0]),!0)},lookAt:function(A,_,p){d.lookAt(d.lastT(),A,_,p)},rotate:function(A,_,p){d.rotate(d.lastT(),A,_,p)},pan:function(A,_,p){d.pan(d.lastT(),A,_,p)},translate:function(A,_,p){d.translate(d.lastT(),A,_,p)}};return Object.defineProperties(u,{matrix:{get:function(){return d.computedMatrix},set:function(A){return d.setMatrix(d.lastT(),A),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(A){var _=d.computedUp.slice(),p=d.computedEye.slice(),w=d.computedCenter.slice();if(d.setMode(A),A==="turntable"){var h=e();d._active.lookAt(h,p,w,_),d._active.lookAt(h+500,p,w,[0,0,1]),d._active.flush(h)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(A){return d.lookAt(d.lastT(),null,A),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(A){return d.lookAt(d.lastT(),A),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(A){return d.lookAt(d.lastT(),null,null,A),d.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(A){return d.setDistance(d.lastT(),A),A},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(g)},set:function(A){return d.setDistanceLimits(A),A},enumerable:!0}}),o.addEventListener("contextmenu",function(A){return A.preventDefault(),!1}),u._lastX=-1,u._lastY=-1,u._lastMods={shift:!1,control:!1,alt:!1,meta:!1},u.enableMouseListeners=function(){u.mouseListener=i(o,A),o.addEventListener("touchstart",function(_){var p=r(_.changedTouches[0],o);A(0,p[0],p[1],u._lastMods),A(1,p[0],p[1],u._lastMods)},v?{passive:!0}:!1),o.addEventListener("touchmove",function(_){var p=r(_.changedTouches[0],o);A(1,p[0],p[1],u._lastMods),_.preventDefault()},v?{passive:!1}:!1),o.addEventListener("touchend",function(_){A(0,u._lastX,u._lastY,u._lastMods)},v?{passive:!0}:!1);function A(_,p,w,h){var L=u.keyBindingMode;if(L!==!1){var E=L==="rotate",S=L==="pan",P=L==="zoom",F=!!h.control,I=!!h.alt,D=!!h.shift,R=!!(_&1),O=!!(_&2),z=!!(_&4),H=1/o.clientHeight,Y=H*(p-u._lastX),ee=H*(w-u._lastY),j=u.flipX?1:-1,X=u.flipY?1:-1,ae=Math.PI*u.rotateSpeed,fe=e();if(u._lastX!==-1&&u._lastY!==-1&&((E&&R&&!F&&!I&&!D||R&&!F&&!I&&D)&&d.rotate(fe,j*ae*Y,-X*ae*ee,0),(S&&R&&!F&&!I&&!D||O||R&&F&&!I&&!D)&&d.pan(fe,-u.translateSpeed*Y*m,u.translateSpeed*ee*m,0),P&&R&&!F&&!I&&!D||z||R&&!F&&I&&!D)){var K=-u.zoomSpeed*ee/window.innerHeight*(fe-d.lastT())*100;d.pan(fe,0,0,m*(Math.exp(K)-1))}return u._lastX=p,u._lastY=w,u._lastMods=h,!0}}u.wheelListener=n(o,function(_,p){if(u.keyBindingMode!==!1&&!!u.enableWheel){var w=u.flipX?1:-1,h=u.flipY?1:-1,L=e();if(Math.abs(_)>Math.abs(p))d.rotate(L,0,0,-_*w*Math.PI*u.rotateSpeed/window.innerWidth);else if(!u._ortho){var E=-u.zoomSpeed*h*p/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,m*(Math.exp(E)-1))}}},!0)},u.enableMouseListeners(),u}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),n=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);M.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(f,M,T){var e=f("./camera.js"),a=f("gl-axes3d"),i=f("gl-axes3d/properties"),n=f("gl-spikes3d"),r=f("gl-select-static"),v=f("gl-fbo"),s=f("a-big-triangle"),o=f("mouse-change"),b=f("gl-mat4/perspective"),g=f("gl-mat4/ortho"),d=f("./lib/shader"),c=f("is-mobile")({tablet:!0,featureDetect:!0});M.exports={createScene:A,createCamera:e};function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(p,w){var h=null;try{h=p.getContext("webgl",w),h||(h=p.getContext("experimental-webgl",w))}catch{return null}return h}function y(p){var w=Math.round(Math.log(Math.abs(p))/Math.log(10));if(w<0){var h=Math.round(Math.pow(10,-w));return Math.ceil(p*h)/h}else if(w>0){var h=Math.round(Math.pow(10,w));return Math.ceil(p/h)*h}return Math.ceil(p)}function u(p){return typeof p=="boolean"?p:!0}function A(p){p=p||{},p.camera=p.camera||{};var w=p.canvas;if(!w)if(w=document.createElement("canvas"),p.container){var h=p.container;h.appendChild(w)}else document.body.appendChild(w);var L=p.gl;if(L||(p.glOptions&&(c=!!p.glOptions.preserveDrawingBuffer),L=l(w,p.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:c})),!L)throw new Error("webgl not supported");var E=p.bounds||[[-10,-10,-10],[10,10,10]],S=new m,P=v(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!c}),F=d(L),I=p.cameraObject&&p.cameraObject._ortho===!0||p.camera.projection&&p.camera.projection.type==="orthographic"||!1,D={eye:p.camera.eye||[2,0,0],center:p.camera.center||[0,0,0],up:p.camera.up||[0,1,0],zoomMin:p.camera.zoomMax||.1,zoomMax:p.camera.zoomMin||100,mode:p.camera.mode||"turntable",_ortho:I},R=p.axes||{},O=a(L,R);O.enable=!R.disable;var z=p.spikes||{},H=n(L,z),Y=[],ee=[],j=[],X=[],ae=!0,U=!0,fe=new Array(16),K=new Array(16),J={view:null,projection:fe,model:K,_ortho:!1},U=!0,V=[L.drawingBufferWidth,L.drawingBufferHeight],q=p.cameraObject||e(w,D),re={gl:L,contextLost:!1,pixelRatio:p.pixelRatio||1,canvas:w,selection:S,camera:q,axes:O,axesPixels:null,spikes:H,bounds:E,objects:Y,shape:V,aspect:p.aspectRatio||[1,1,1],pickRadius:p.pickRadius||10,zNear:p.zNear||.01,zFar:p.zFar||1e3,fovy:p.fovy||Math.PI/4,clearColor:p.clearColor||[0,0,0,0],autoResize:u(p.autoResize),autoBounds:u(p.autoBounds),autoScale:!!p.autoScale,autoCenter:u(p.autoCenter),clipToBounds:u(p.clipToBounds),snapToData:!!p.snapToData,onselect:p.onselect||null,onrender:p.onrender||null,onclick:p.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,U=!0},setBounds:function(xe,ye){this.bounds[0][xe]=ye.min,this.bounds[1][xe]=ye.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Z=[L.drawingBufferWidth/re.pixelRatio|0,L.drawingBufferHeight/re.pixelRatio|0];function Q(){if(!re._stopped&&!!re.autoResize){var xe=w.parentNode,ye=1,be=1;xe&&xe!==document.body?(ye=xe.clientWidth,be=xe.clientHeight):(ye=window.innerWidth,be=window.innerHeight);var Se=Math.ceil(ye*re.pixelRatio)|0,Re=Math.ceil(be*re.pixelRatio)|0;if(Se!==w.width||Re!==w.height){w.width=Se,w.height=Re;var Ve=w.style;Ve.position=Ve.position||"absolute",Ve.left="0px",Ve.top="0px",Ve.width=ye+"px",Ve.height=be+"px",ae=!0}}}re.autoResize&&Q(),window.addEventListener("resize",Q);function ie(){for(var xe=Y.length,ye=X.length,be=0;be<ye;++be)j[be]=0;e:for(var be=0;be<xe;++be){var Se=Y[be],Re=Se.pickSlots;if(!Re){ee[be]=-1;continue}for(var Ve=0;Ve<ye;++Ve)if(j[Ve]+Re<255){ee[be]=Ve,Se.setPickBase(j[Ve]+1),j[Ve]+=Re;continue e}var Ae=r(L,V);ee[be]=ye,X.push(Ae),j.push(Re),Se.setPickBase(1),ye+=1}for(;ye>0&&j[ye-1]===0;)j.pop(),X.pop().dispose()}re.update=function(xe){re._stopped||(ae=!0,U=!0)},re.add=function(xe){re._stopped||(xe.axes=O,Y.push(xe),ee.push(-1),ae=!0,U=!0,ie())},re.remove=function(xe){if(!re._stopped){var ye=Y.indexOf(xe);ye<0||(Y.splice(ye,1),ee.pop(),ae=!0,U=!0,ie())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",Q),w.removeEventListener("webglcontextlost",oe),re.mouseListener.enabled=!1,!re.contextLost)){O.dispose(),H.dispose();for(var xe=0;xe<Y.length;++xe)Y[xe].dispose();P.dispose();for(var xe=0;xe<X.length;++xe)X[xe].dispose();F.dispose(),L=null,O=null,H=null,Y=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=o(w,function(xe,ye,be){if(!re._stopped){var Se=X.length,Re=Y.length,Ve=S.object;S.distance=1/0,S.mouse[0]=ye,S.mouse[1]=be,S.object=null,S.screen=null,S.dataCoordinate=S.dataPosition=null;var Ae=!1;if(xe&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(U=!0),re._mouseRotating=!1;for(var Ce=0;Ce<Se;++Ce){var Ze=X[Ce].query(ye,Z[1]-be-1,re.pickRadius);if(Ze){if(Ze.distance>S.distance)continue;for(var Ye=0;Ye<Re;++Ye){var ze=Y[Ye];if(ee[Ye]===Ce){var Ie=ze.pick(Ze);Ie&&(S.buttons=xe,S.screen=Ze.coord,S.distance=Ze.distance,S.object=ze,S.index=Ie.distance,S.dataPosition=Ie.position,S.dataCoordinate=Ie.dataCoordinate,S.data=Ie,Ae=!0)}}}}}Ve&&Ve!==S.object&&(Ve.highlight&&Ve.highlight(null),ae=!0),S.object&&(S.object.highlight&&S.object.highlight(S.data),ae=!0),Ae=Ae||S.object!==Ve,Ae&&re.onselect&&re.onselect(S),xe&1&&!(re._prevButtons&1)&&re.onclick&&re.onclick(S),re._prevButtons=xe}})};function oe(){if(re.contextLost)return!0;L.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}w.addEventListener("webglcontextlost",oe);function ne(){if(!oe()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var xe=Y.length,ye=X.length,be=0;be<ye;++be){var Se=X[be];Se.shape=Z,Se.begin();for(var Re=0;Re<xe;++Re)if(ee[Re]===be){var Ve=Y[Re];Ve.drawPick&&(Ve.pixelRatio=1,Ve.drawPick(J))}Se.end()}}}var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=[se[0].slice(),se[1].slice()];function ue(){if(!oe()){Q();var xe=re.camera.tick();J.view=re.camera.matrix,ae=ae||xe,U=U||xe,O.pixelRatio=re.pixelRatio,H.pixelRatio=re.pixelRatio;var ye=Y.length,be=se[0],Se=se[1];be[0]=be[1]=be[2]=1/0,Se[0]=Se[1]=Se[2]=-1/0;for(var Re=0;Re<ye;++Re){var Ve=Y[Re];Ve.pixelRatio=re.pixelRatio,Ve.axes=re.axes,ae=ae||!!Ve.dirty,U=U||!!Ve.dirty;var Ae=Ve.bounds;if(Ae)for(var Ce=Ae[0],Ze=Ae[1],Ye=0;Ye<3;++Ye)be[Ye]=Math.min(be[Ye],Ce[Ye]),Se[Ye]=Math.max(Se[Ye],Ze[Ye])}var ze=re.bounds;if(re.autoBounds)for(var Ye=0;Ye<3;++Ye){if(Se[Ye]<be[Ye])be[Ye]=-1,Se[Ye]=1;else{be[Ye]===Se[Ye]&&(be[Ye]-=1,Se[Ye]+=1);var Ie=.05*(Se[Ye]-be[Ye]);be[Ye]=be[Ye]-Ie,Se[Ye]=Se[Ye]+Ie}ze[0][Ye]=be[Ye],ze[1][Ye]=Se[Ye]}for(var Ge=!1,Ye=0;Ye<3;++Ye)Ge=Ge||_e[0][Ye]!==ze[0][Ye]||_e[1][Ye]!==ze[1][Ye],_e[0][Ye]=ze[0][Ye],_e[1][Ye]=ze[1][Ye];if(U=U||Ge,ae=ae||Ge,!!ae){if(Ge){for(var dt=[0,0,0],Re=0;Re<3;++Re)dt[Re]=y((ze[1][Re]-ze[0][Re])/10);O.autoTicks?O.update({bounds:ze,tickSpacing:dt}):O.update({bounds:ze})}var Rt=L.drawingBufferWidth,Qt=L.drawingBufferHeight;V[0]=Rt,V[1]=Qt,Z[0]=Math.max(Rt/re.pixelRatio,1)|0,Z[1]=Math.max(Qt/re.pixelRatio,1)|0,_(re,I);for(var Re=0;Re<ye;++Re){var Ve=Y[Re];Ve.axesBounds=ze,re.clipToBounds&&(Ve.clipBounds=ze)}S.object&&(re.snapToData?H.position=S.dataCoordinate:H.position=S.dataPosition,H.bounds=ze),U&&(U=!1,ne()),re.axesPixels=i(re.axes,J,Rt,Qt),re.onrender&&re.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Rt,Qt),re.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var Bt=!1;O.enable&&(Bt=Bt||O.isTransparent(),O.draw(J)),H.axes=O,S.object&&H.draw(J),L.disable(L.CULL_FACE);for(var Re=0;Re<ye;++Re){var Ve=Y[Re];Ve.axes=O,Ve.pixelRatio=re.pixelRatio,Ve.isOpaque&&Ve.isOpaque()&&Ve.draw(J),Ve.isTransparent&&Ve.isTransparent()&&(Bt=!0)}if(Bt){P.shape=V,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(J);for(var Re=0;Re<ye;++Re){var Ve=Y[Re];Ve.isOpaque&&Ve.isOpaque()&&Ve.draw(J)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(J);for(var Re=0;Re<ye;++Re){var Ve=Y[Re];Ve.isTransparent&&Ve.isTransparent()&&Ve.drawTransparent(J)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),F.bind(),P.color[0].bind(0),F.uniforms.accumBuffer=0,s(L),L.disable(L.BLEND)}ae=!1;for(var Re=0;Re<ye;++Re)Y[Re].dirty=!1}}}function ge(){re._stopped||re.contextLost||(ue(),requestAnimationFrame(ge))}return re.enableMouseListeners(),ge(),re.redraw=function(){re._stopped||(ae=!0,ue())},re}function _(p,w){var h=p.bounds,L=p.cameraParams,E=L.projection,S=L.model,P=p.gl.drawingBufferWidth,F=p.gl.drawingBufferHeight,I=p.zNear,D=p.zFar,R=p.fovy,O=P/F;w?(g(E,-O,O,-1,1,I,D),L._ortho=!0):(b(E,R,O,I,D),L._ortho=!1);for(var z=0;z<16;++z)S[z]=0;S[15]=1;for(var H=0,z=0;z<3;++z)H=Math.max(H,h[1][z]-h[0][z]);for(var z=0;z<3;++z)p.autoScale?S[5*z]=p.aspect[z]/(h[1][z]-h[0][z]):S[5*z]=1/H,p.autoCenter&&(S[12+z]=-S[5*z]*.5*(h[0][z]+h[1][z]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(f,M,T){var e=f("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),i=f("typedarray-pool"),n=f("./lib/shader");M.exports=o;function r(b,g,d,c,m){this.plot=b,this.offsetBuffer=g,this.pickBuffer=d,this.shader=c,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var v=r.prototype;v.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},v.update=function(b){var g;b=b||{};function d(_,p){return _ in b?b[_]:p}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var c=b.positions.length>>>1,m=b.positions instanceof Float32Array,l=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=c,y=b.positions,u=m?y:i.mallocFloat32(y.length),A=l?b.idToIndex:i.mallocInt32(c);if(m||u.set(y),!l)for(u.set(y),g=0;g<c;g++)A[g]=g;this.points=y,this.offsetBuffer.update(u),this.pickBuffer.update(A),m||i.free(u),l||i.free(A),this.pointCount=c,this.pickOffset=0};function s(b,g){var d=0,c=b.length>>>1,m;for(m=0;m<c;m++){var l=b[m*2],y=b[m*2+1];l>=g[0]&&l<=g[2]&&y>=g[1]&&y<=g[3]&&d++}return d}v.unifiedDraw=function(){var b=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(d){var c=d!==void 0,m=c?this.pickShader:this.shader,l=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return d;var u=y[2]-y[0],A=y[3]-y[1],_=s(this.points,y),p=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));b[0]=2/u,b[4]=2/A,b[6]=-2*y[0]/u-1,b[7]=-2*y[1]/A-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=b,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=p<5,m.uniforms.pointSize=p,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(g[0]=d&255,g[1]=d>>8&255,g[2]=d>>16&255,g[3]=d>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(l.UNSIGNED_BYTE),m.uniforms.pickOffset=g,this.pickOffset=d);var w=l.getParameter(l.BLEND),h=l.getParameter(l.DITHER);return w&&!this.blend&&l.disable(l.BLEND),h&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),w&&!this.blend&&l.enable(l.BLEND),h&&l.enable(l.DITHER),d+this.pointCount}}(),v.draw=v.unifiedDraw,v.drawPick=v.unifiedDraw,v.pick=function(b,g,d){var c=this.pickOffset,m=this.pointCount;if(d<c||d>=c+m)return null;var l=d-c,y=this.points;return{object:this,pointId:l,dataCoord:[y[2*l],y[2*l+1]]}};function o(b,g){var d=b.gl,c=a(d),m=a(d),l=e(d,n.pointVertex,n.pointFragment),y=e(d,n.pickVertex,n.pickFragment),u=new r(b,c,m,l,y);return u.update(g),b.addObject(u),u}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3],g=n[0],d=n[1],c=n[2],m=n[3],l,y,u,A,_;return y=v*g+s*d+o*c+b*m,y<0&&(y=-y,g=-g,d=-d,c=-c,m=-m),1-y>1e-6?(l=Math.acos(y),u=Math.sin(l),A=Math.sin((1-r)*l)/u,_=Math.sin(r*l)/u):(A=1-r,_=r),a[0]=A*v+_*g,a[1]=A*s+_*d,a[2]=A*o+_*c,a[3]=A*b+_*m,a}},{}],125:[function(f,M,T){M.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(f,M,T){var e=f("vectorize-text");M.exports=i;var a={};function i(n,r,v){var s=a[r];if(s||(s=a[r]={}),n in s)return s[n];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var b=e(n,o);o.triangles=!1;var g=e(n,o),d,c;if(v&&v!==1){for(d=0;d<b.positions.length;++d)for(c=0;c<b.positions[d].length;++c)b.positions[d][c]/=v;for(d=0;d<g.positions.length;++d)for(c=0;c<g.positions[d].length;++c)g.positions[d][c]/=v}var m=[[1/0,1/0],[-1/0,-1/0]],l=g.positions.length;for(d=0;d<l;++d){var y=g.positions[d];for(c=0;c<2;++c)m[0][c]=Math.min(m[0][c],y[c]),m[1][c]=Math.max(m[1][c],y[c])}return s[n]=[b,g,m]}},{"vectorize-text":311}],127:[function(f,M,T){var e=f("gl-shader"),a=f("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:i,fragment:v,attributes:o},g={vertex:n,fragment:v,attributes:o},d={vertex:r,fragment:v,attributes:o},c={vertex:i,fragment:s,attributes:o},m={vertex:n,fragment:s,attributes:o},l={vertex:r,fragment:s,attributes:o};function y(u,A){var _=e(u,A),p=_.attributes;return p.position.location=0,p.color.location=1,p.glyph.location=2,p.id.location=3,_}T.createPerspective=function(u){return y(u,b)},T.createOrtho=function(u){return y(u,g)},T.createProject=function(u){return y(u,d)},T.createPickPerspective=function(u){return y(u,c)},T.createPickOrtho=function(u){return y(u,m)},T.createPickProject=function(u){return y(u,l)}},{"gl-shader":132,glslify:231}],128:[function(f,M,T){var e=f("is-string-blank"),a=f("gl-buffer"),i=f("gl-vao"),n=f("typedarray-pool"),r=f("gl-mat4/multiply"),v=f("./lib/shaders"),s=f("./lib/glyphs"),o=f("./lib/get-simple-string"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M.exports=ee;function g(j,X){var ae=j[0],fe=j[1],K=j[2],J=j[3];return j[0]=X[0]*ae+X[4]*fe+X[8]*K+X[12]*J,j[1]=X[1]*ae+X[5]*fe+X[9]*K+X[13]*J,j[2]=X[2]*ae+X[6]*fe+X[10]*K+X[14]*J,j[3]=X[3]*ae+X[7]*fe+X[11]*K+X[15]*J,j}function d(j,X,ae,fe){return g(fe,fe),g(fe,fe),g(fe,fe)}function c(j,X){this.index=j,this.dataCoordinate=this.position=X}function m(j){return j===!0||j>1?1:j}function l(j,X,ae,fe,K,J,U,V,q,re,Z,Q){this.gl=j,this.pixelRatio=1,this.shader=X,this.orthoShader=ae,this.projectShader=fe,this.pointBuffer=K,this.colorBuffer=J,this.glyphBuffer=U,this.idBuffer=V,this.vao=q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=re,this.pickOrthoShader=Z,this.pickProjectShader=Q,this.points=[],this._selectResult=new c(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var y=l.prototype;y.pickSlots=1,y.setPickBase=function(j){this.pickId=j},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],A=[0,0,0],_=[0,0,0],p=[0,0,0,1],w=[0,0,0,1],h=b.slice(),L=[0,0,0],E=[[0,0,0],[0,0,0]];function S(j){return j[0]=j[1]=j[2]=0,j}function P(j,X){return j[0]=X[0],j[1]=X[1],j[2]=X[2],j[3]=1,j}function F(j,X,ae,fe){return j[0]=X[0],j[1]=X[1],j[2]=X[2],j[ae]=fe,j}function I(j){for(var X=E,ae=0;ae<2;++ae)for(var fe=0;fe<3;++fe)X[ae][fe]=Math.max(Math.min(j[ae][fe],1e8),-1e8);return X}function D(j,X,ae,fe){var K=X.axesProject,J=X.gl,U=j.uniforms,V=ae.model||b,q=ae.view||b,re=ae.projection||b,Z=X.axesBounds,Q=I(X.clipBounds),ie;X.axes&&X.axes.lastCubeProps?ie=X.axes.lastCubeProps.axis:ie=[1,1,1],u[0]=2/J.drawingBufferWidth,u[1]=2/J.drawingBufferHeight,j.bind(),U.view=q,U.projection=re,U.screenSize=u,U.highlightId=X.highlightId,U.highlightScale=X.highlightScale,U.clipBounds=Q,U.pickGroup=X.pickId/255,U.pixelRatio=fe;for(var oe=0;oe<3;++oe)if(!!K[oe]){U.scale=X.projectScale[oe],U.opacity=X.projectOpacity[oe];for(var ne=h,se=0;se<16;++se)ne[se]=0;for(var se=0;se<4;++se)ne[5*se]=1;ne[5*oe]=0,ie[oe]<0?ne[12+oe]=Z[0][oe]:ne[12+oe]=Z[1][oe],r(ne,V,ne),U.model=ne;var _e=(oe+1)%3,ue=(oe+2)%3,ge=S(A),xe=S(_);ge[_e]=1,xe[ue]=1;var ye=d(re,q,V,P(p,ge)),be=d(re,q,V,P(w,xe));if(Math.abs(ye[1])>Math.abs(be[1])){var Se=ye;ye=be,be=Se,Se=ge,ge=xe,xe=Se;var Re=_e;_e=ue,ue=Re}ye[0]<0&&(ge[_e]=-1),be[1]>0&&(xe[ue]=-1);for(var Ve=0,Ae=0,se=0;se<4;++se)Ve+=Math.pow(V[4*_e+se],2),Ae+=Math.pow(V[4*ue+se],2);ge[_e]/=Math.sqrt(Ve),xe[ue]/=Math.sqrt(Ae),U.axes[0]=ge,U.axes[1]=xe,U.fragClipBounds[0]=F(L,Q[0],oe,-1e8),U.fragClipBounds[1]=F(L,Q[1],oe,1e8),X.vao.bind(),X.vao.draw(J.TRIANGLES,X.vertexCount),X.lineWidth>0&&(J.lineWidth(X.lineWidth*fe),X.vao.draw(J.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],z=[R,O];function H(j,X,ae,fe,K,J,U){var V=ae.gl;if((J===ae.projectHasAlpha||U)&&D(X,ae,fe,K),J===ae.hasAlpha||U){j.bind();var q=j.uniforms;q.model=fe.model||b,q.view=fe.view||b,q.projection=fe.projection||b,u[0]=2/V.drawingBufferWidth,u[1]=2/V.drawingBufferHeight,q.screenSize=u,q.highlightId=ae.highlightId,q.highlightScale=ae.highlightScale,q.fragClipBounds=z,q.clipBounds=ae.axes.bounds,q.opacity=ae.opacity,q.pickGroup=ae.pickId/255,q.pixelRatio=K,ae.vao.bind(),ae.vao.draw(V.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(V.lineWidth(ae.lineWidth*K),ae.vao.draw(V.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}y.draw=function(j){var X=this.useOrtho?this.orthoShader:this.shader;H(X,this.projectShader,this,j,this.pixelRatio,!1,!1)},y.drawTransparent=function(j){var X=this.useOrtho?this.orthoShader:this.shader;H(X,this.projectShader,this,j,this.pixelRatio,!0,!1)},y.drawPick=function(j){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;H(X,this.pickProjectShader,this,j,1,!0,!0)},y.pick=function(j){if(!j||j.id!==this.pickId)return null;var X=j.value[2]+(j.value[1]<<8)+(j.value[0]<<16);if(X>=this.pointCount||X<0)return null;var ae=this.points[X],fe=this._selectResult;fe.index=X;for(var K=0;K<3;++K)fe.position[K]=fe.dataCoordinate[K]=ae[K];return fe},y.highlight=function(j){if(!j)this.highlightId=[1,1,1,1];else{var X=j.index,ae=X&255,fe=X>>8&255,K=X>>16&255;this.highlightId=[ae/255,fe/255,K/255,0]}};function Y(j,X,ae,fe){var K;Array.isArray(j)?X<j.length?K=j[X]:K=void 0:K=j,K=o(K);var J=!0;e(K)&&(K="\u25BC",J=!1);var U=s(K,ae,fe);return{mesh:U[0],lines:U[1],bounds:U[2],visible:J}}y.update=function(j){if(j=j||{},"perspective"in j&&(this.useOrtho=!j.perspective),"orthographic"in j&&(this.useOrtho=!!j.orthographic),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"project"in j)if(Array.isArray(j.project))this.axesProject=j.project;else{var X=!!j.project;this.axesProject=[X,X,X]}if("projectScale"in j)if(Array.isArray(j.projectScale))this.projectScale=j.projectScale.slice();else{var ae=+j.projectScale;this.projectScale=[ae,ae,ae]}if(this.projectHasAlpha=!1,"projectOpacity"in j){if(Array.isArray(j.projectOpacity))this.projectOpacity=j.projectOpacity.slice();else{var ae=+j.projectOpacity;this.projectOpacity=[ae,ae,ae]}for(var fe=0;fe<3;++fe)this.projectOpacity[fe]=m(this.projectOpacity[fe]),this.projectOpacity[fe]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in j&&(this.opacity=m(j.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=j.position,J=j.font||"normal",U=j.alignment||[0,0],V,q;if(U.length===2)V=U[0],q=U[1];else{V=[],q=[];for(var fe=0;fe<U.length;++fe)V[fe]=U[fe][0],q[fe]=U[fe][1]}var re=[1/0,1/0,1/0],Z=[-1/0,-1/0,-1/0],Q=j.glyph,ie=j.color,oe=j.size,ne=j.angle,se=j.lineColor,_e=-1,ue=0,ge=0,xe=0;if(K.length){xe=K.length;e:for(var fe=0;fe<xe;++fe){for(var ye=K[fe],be=0;be<3;++be)if(isNaN(ye[be])||!isFinite(ye[be]))continue e;var Se=Y(Q,fe,J,this.pixelRatio),Re=Se.mesh,Ve=Se.lines,Ae=Se.bounds;ue+=Re.cells.length*3,ge+=Ve.edges.length*2}}var Ce=ue+ge,Ze=n.mallocFloat(3*Ce),Ye=n.mallocFloat(4*Ce),ze=n.mallocFloat(2*Ce),Ie=n.mallocUint32(Ce);if(Ce>0){var Ge=0,dt=ue,Rt=[0,0,0,1],Qt=[0,0,0,1],Bt=Array.isArray(ie)&&Array.isArray(ie[0]),Ct=Array.isArray(se)&&Array.isArray(se[0]);e:for(var fe=0;fe<xe;++fe){_e+=1;for(var ye=K[fe],be=0;be<3;++be){if(isNaN(ye[be])||!isFinite(ye[be]))continue e;Z[be]=Math.max(Z[be],ye[be]),re[be]=Math.min(re[be],ye[be])}var Se=Y(Q,fe,J,this.pixelRatio),Re=Se.mesh,Ve=Se.lines,Ae=Se.bounds,Kt=Se.visible;if(!Kt)Rt=[1,1,1,0];else if(Array.isArray(ie)){var Ot;if(Bt?fe<ie.length?Ot=ie[fe]:Ot=[0,0,0,0]:Ot=ie,Ot.length===3){for(var be=0;be<3;++be)Rt[be]=Ot[be];Rt[3]=1}else if(Ot.length===4){for(var be=0;be<4;++be)Rt[be]=Ot[be];!this.hasAlpha&&Ot[3]<1&&(this.hasAlpha=!0)}}else Rt[0]=Rt[1]=Rt[2]=0,Rt[3]=1;if(!Kt)Qt=[1,1,1,0];else if(Array.isArray(se)){var Ot;if(Ct?fe<se.length?Ot=se[fe]:Ot=[0,0,0,0]:Ot=se,Ot.length===3){for(var be=0;be<3;++be)Qt[be]=Ot[be];Qt[be]=1}else if(Ot.length===4){for(var be=0;be<4;++be)Qt[be]=Ot[be];!this.hasAlpha&&Ot[3]<1&&(this.hasAlpha=!0)}}else Qt[0]=Qt[1]=Qt[2]=0,Qt[3]=1;var St=.5;Kt?Array.isArray(oe)?fe<oe.length?St=+oe[fe]:St=12:oe?St=+oe:this.useOrtho&&(St=12):St=0;var Xe=0;Array.isArray(ne)?fe<ne.length?Xe=+ne[fe]:Xe=0:ne&&(Xe=+ne);for(var at=Math.cos(Xe),We=Math.sin(Xe),ye=K[fe],be=0;be<3;++be)Z[be]=Math.max(Z[be],ye[be]),re[be]=Math.min(re[be],ye[be]);var Ee=V,He=q,Ee=0;Array.isArray(V)?fe<V.length?Ee=V[fe]:Ee=0:V&&(Ee=V);var He=0;Array.isArray(q)?fe<q.length?He=q[fe]:He=0:q&&(He=q),Ee*=Ee>0?1-Ae[0][0]:Ee<0?1+Ae[1][0]:1,He*=He>0?1-Ae[0][1]:He<0?1+Ae[1][1]:1;for(var Ke=[Ee,He],Gt=Re.cells||[],zt=Re.positions||[],be=0;be<Gt.length;++be)for(var et=Gt[be],At=0;At<3;++At){for(var mt=0;mt<3;++mt)Ze[3*Ge+mt]=ye[mt];for(var mt=0;mt<4;++mt)Ye[4*Ge+mt]=Rt[mt];Ie[Ge]=_e;var Mt=zt[et[At]];ze[2*Ge]=St*(at*Mt[0]-We*Mt[1]+Ke[0]),ze[2*Ge+1]=St*(We*Mt[0]+at*Mt[1]+Ke[1]),Ge+=1}for(var Gt=Ve.edges,zt=Ve.positions,be=0;be<Gt.length;++be)for(var et=Gt[be],At=0;At<2;++At){for(var mt=0;mt<3;++mt)Ze[3*dt+mt]=ye[mt];for(var mt=0;mt<4;++mt)Ye[4*dt+mt]=Qt[mt];Ie[dt]=_e;var Mt=zt[et[At]];ze[2*dt]=St*(at*Mt[0]-We*Mt[1]+Ke[0]),ze[2*dt+1]=St*(We*Mt[0]+at*Mt[1]+Ke[1]),dt+=1}}}this.bounds=[re,Z],this.points=K,this.pointCount=K.length,this.vertexCount=ue,this.lineVertexCount=ge,this.pointBuffer.update(Ze),this.colorBuffer.update(Ye),this.glyphBuffer.update(ze),this.idBuffer.update(Ie),n.free(Ze),n.free(Ye),n.free(ze),n.free(Ie)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ee(j){var X=j.gl,ae=v.createPerspective(X),fe=v.createOrtho(X),K=v.createProject(X),J=v.createPickPerspective(X),U=v.createPickOrtho(X),V=v.createPickProject(X),q=a(X),re=a(X),Z=a(X),Q=a(X),ie=i(X,[{buffer:q,size:3,type:X.FLOAT},{buffer:re,size:4,type:X.FLOAT},{buffer:Z,size:2,type:X.FLOAT},{buffer:Q,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),oe=new l(X,ae,fe,K,q,re,Z,Q,ie,J,U,V);return oe.update(j),oe}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(f,M,T){var e=f("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),i=f("./lib/shaders");M.exports=v;function n(s,o,b){this.plot=s,this.boxBuffer=o,this.boxShader=b,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=n.prototype;r.draw=function(){if(!!this.enabled){var s=this.plot,o=this.selectBox,b=this.borderWidth;this.innerFill;var g=this.innerColor;this.outerFill;var d=this.outerColor,c=this.borderColor,m=s.box,l=s.screenBox,y=s.dataBox,u=s.viewBox,A=s.pixelRatio,_=(o[0]-y[0])*(u[2]-u[0])/(y[2]-y[0])+u[0],p=(o[1]-y[1])*(u[3]-u[1])/(y[3]-y[1])+u[1],w=(o[2]-y[0])*(u[2]-u[0])/(y[2]-y[0])+u[0],h=(o[3]-y[1])*(u[3]-u[1])/(y[3]-y[1])+u[1];if(_=Math.max(_,u[0]),p=Math.max(p,u[1]),w=Math.min(w,u[2]),h=Math.min(h,u[3]),!(w<_||h<p)){m.bind();var L=l[2]-l[0],E=l[3]-l[1];if(this.outerFill&&(m.drawBox(0,0,L,p,d),m.drawBox(0,p,_,h,d),m.drawBox(0,h,L,E,d),m.drawBox(w,p,L,h,d)),this.innerFill&&m.drawBox(_,p,w,h,g),b>0){var S=b*A;m.drawBox(_-S,p-S,w+S,p+S,c),m.drawBox(_-S,h-S,w+S,h+S,c),m.drawBox(_-S,p-S,_+S,h+S,c),m.drawBox(w-S,p-S,w+S,h+S,c)}}}},r.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function v(s,o){var b=s.gl,g=a(b,[0,0,0,1,1,0,1,1]),d=e(b,i.boxVertex,i.boxFragment),c=new n(s,g,d);return c.update(o),s.addOverlay(c),c}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(f,M,T){M.exports=b;var e=f("gl-fbo"),a=f("typedarray-pool"),i=f("ndarray"),n=f("bit-twiddle").nextPow2,r=function(g,d,c){for(var m=1e8,l=-1,y=-1,u=g.shape[0],A=g.shape[1],_=0;_<u;_++)for(var p=0;p<A;p++){var w=g.get(_,p,0),h=g.get(_,p,1),L=g.get(_,p,2),E=g.get(_,p,3);if(w<255||h<255||L<255||E<255){var S=d-_,P=c-p,F=S*S+P*P;F<m&&(m=F,l=_,y=p)}}return[l,y,m]};function v(g,d,c,m,l){this.coord=[g,d],this.id=c,this.value=m,this.distance=l}function s(g,d,c){this.gl=g,this.fbo=d,this.buffer=c,this._readTimeout=null;var m=this;this._readCallback=function(){!m.gl||(d.bind(),g.readPixels(0,0,d.shape[0],d.shape[1],g.RGBA,g.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var o=s.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(!!this.gl){this.fbo.shape=g;var d=this.fbo.shape[0],c=this.fbo.shape[1];if(c*d*4>this.buffer.length){a.free(this.buffer);for(var m=this.buffer=a.mallocUint8(n(c*d*4)),l=0;l<c*d*4;++l)m[l]=255}return g}}}),o.begin=function(){var g=this.gl;this.shape,g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))},o.end=function(){var g=this.gl;!g||(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(g,d,c){if(!this.gl)return null;var m=this.fbo.shape.slice();g=g|0,d=d|0,typeof c!="number"&&(c=1);var l=Math.min(Math.max(g-c,0),m[0])|0,y=Math.min(Math.max(g+c,0),m[0])|0,u=Math.min(Math.max(d-c,0),m[1])|0,A=Math.min(Math.max(d+c,0),m[1])|0;if(y<=l||A<=u)return null;var _=[y-l,A-u],p=i(this.buffer,[_[0],_[1],4],[4,m[0]*4,1],4*(l+m[0]*u)),w=r(p.hi(_[0],_[1],1),c,c),h=w[0],L=w[1];if(h<0||Math.pow(this.radius,2)<w[2])return null;var E=p.get(h,L,0),S=p.get(h,L,1),P=p.get(h,L,2),F=p.get(h,L,3);return new v(h+l|0,L+u|0,E,[S,P,F],Math.sqrt(w[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function b(g,d){var c=d[0],m=d[1],l={},y=e(g,c,m,l),u=a.mallocUint8(c*m*4);return new s(g,y,u)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(f,M,T){var e=f("./lib/create-uniforms"),a=f("./lib/create-attributes"),i=f("./lib/reflect"),n=f("./lib/shader-cache"),r=f("./lib/runtime-reflect"),v=f("./lib/GLError");function s(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=s.prototype;o.bind=function(){this.program||this._relink();var d,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(c>m)for(d=m;d<c;d++)this.gl.enableVertexAttribArray(d);else if(m>c)for(d=c;d<m;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=c,this.gl.useProgram(this.program)},o.dispose=function(){for(var d=this.gl.lastAttribCount,c=0;c<d;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function b(d,c){return d.name<c.name?-1:1}o.update=function(d,c,m,l){if(!c||arguments.length===1){var y=d;d=y.vertex,c=y.fragment,m=y.uniforms,l=y.attributes}var u=this,A=u.gl,_=u._vref;u._vref=n.shader(A,A.VERTEX_SHADER,d),_&&_.dispose(),u.vertShader=u._vref.shader;var p=this._fref;if(u._fref=n.shader(A,A.FRAGMENT_SHADER,c),p&&p.dispose(),u.fragShader=u._fref.shader,!m||!l){var w=A.createProgram();if(A.attachShader(w,u.fragShader),A.attachShader(w,u.vertShader),A.linkProgram(w),!A.getProgramParameter(w,A.LINK_STATUS)){var h=A.getProgramInfoLog(w);throw new v(h,"Error linking program:"+h)}m=m||r.uniforms(A,w),l=l||r.attributes(A,w),A.deleteProgram(w)}l=l.slice(),l.sort(b);var L=[],E=[],S=[],P;for(P=0;P<l.length;++P){var F=l[P];if(F.type.indexOf("mat")>=0){for(var I=F.type.charAt(F.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=S.length,E.push(F.name+"["+R+"]"),typeof F.location=="number"?S.push(F.location+R):Array.isArray(F.location)&&F.location.length===I&&typeof F.location[R]=="number"?S.push(F.location[R]|0):S.push(-1);L.push({name:F.name,type:F.type,locations:D})}else L.push({name:F.name,type:F.type,locations:[S.length]}),E.push(F.name),typeof F.location=="number"?S.push(F.location|0):S.push(-1)}var O=0;for(P=0;P<S.length;++P)if(S[P]<0){for(;S.indexOf(O)>=0;)O+=1;S[P]=O}var z=new Array(m.length);function H(){u.program=n.program(A,u._vref,u._fref,E,S);for(var Y=0;Y<m.length;++Y)z[Y]=A.getUniformLocation(u.program,m[Y].name)}H(),u._relink=H,u.types={uniforms:i(m),attributes:i(l)},u.attributes=a(A,u,L,S),Object.defineProperty(u,"uniforms",e(A,u,m,z))};function g(d,c,m,l,y){var u=new s(d);return u.update(c,m,l,y),u}M.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(f,M,T){function e(a,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=a||"",this.message="gl-shader: "+(i||a||"")+(n?`
`+n:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,M.exports=e},{}],134:[function(f,M,T){M.exports=s;var e=f("./GLError");function a(o,b,g,d,c,m){this._gl=o,this._wrapper=b,this._index=g,this._locations=d,this._dimension=c,this._constFunc=m}var i=a.prototype;i.pointer=function(b,g,d,c){var m=this,l=m._gl,y=m._locations[m._index];l.vertexAttribPointer(y,m._dimension,b||l.FLOAT,!!g,d||0,c||0),l.enableVertexAttribArray(y)},i.set=function(o,b,g,d){return this._constFunc(this._locations[this._index],o,b,g,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var n=[function(o,b,g){return g.length===void 0?o.vertexAttrib1f(b,g):o.vertexAttrib1fv(b,g)},function(o,b,g,d){return g.length===void 0?o.vertexAttrib2f(b,g,d):o.vertexAttrib2fv(b,g)},function(o,b,g,d,c){return g.length===void 0?o.vertexAttrib3f(b,g,d,c):o.vertexAttrib3fv(b,g)},function(o,b,g,d,c,m){return g.length===void 0?o.vertexAttrib4f(b,g,d,c,m):o.vertexAttrib4fv(b,g)}];function r(o,b,g,d,c,m,l){var y=n[c],u=new a(o,b,g,d,c,y);Object.defineProperty(m,l,{set:function(A){return o.disableVertexAttribArray(d[g]),y(o,d[g],A),A},get:function(){return u},enumerable:!0})}function v(o,b,g,d,c,m,l){for(var y=new Array(c),u=new Array(c),A=0;A<c;++A)r(o,b,g[A],d,c,y,A),u[A]=y[A];Object.defineProperty(y,"location",{set:function(w){if(Array.isArray(w))for(var h=0;h<c;++h)u[h].location=w[h];else for(var h=0;h<c;++h)u[h].location=w+h;return w},get:function(){for(var w=new Array(c),h=0;h<c;++h)w[h]=d[g[h]];return w},enumerable:!0}),y.pointer=function(w,h,L,E){w=w||o.FLOAT,h=!!h,L=L||c*c,E=E||0;for(var S=0;S<c;++S){var P=d[g[S]];o.vertexAttribPointer(P,c,w,h,L,E+S*c),o.enableVertexAttribArray(P)}};var _=new Array(c),p=o["vertexAttrib"+c+"fv"];Object.defineProperty(m,l,{set:function(w){for(var h=0;h<c;++h){var L=d[g[h]];if(o.disableVertexAttribArray(L),Array.isArray(w[0]))p.call(o,L,w[h]);else{for(var E=0;E<c;++E)_[E]=w[c*h+E];p.call(o,L,_)}}return w},get:function(){return y},enumerable:!0})}function s(o,b,g,d){for(var c={},m=0,l=g.length;m<l;++m){var y=g[m],u=y.name,A=y.type,_=y.locations;switch(A){case"bool":case"int":case"float":r(o,b,_[0],d,1,c,u);break;default:if(A.indexOf("vec")>=0){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+u+": "+A);r(o,b,_[0],d,p,c,u)}else if(A.indexOf("mat")>=0){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+u+": "+A);v(o,b,_,d,p,c,u)}else throw new e("","Unknown data type for attribute "+u+": "+A);break}}return c}},{"./GLError":133}],135:[function(f,M,T){var e=f("./reflect"),a=f("./GLError");M.exports=r;function i(v){return function(){return v}}function n(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=s;return o}function r(v,s,o,b){function g(A){return function(_,p,w){return _.getUniform(p.program,w[A])}}function d(A){return function(p){for(var w=c("",A),h=0;h<w.length;++h){var L=w[h],E=L[0],S=L[1];if(b[S]){var P=p;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var F=E;if(E.indexOf(".")===0&&(F=E.slice(1)),F.indexOf("]")===F.length-1){var I=F.indexOf("["),D=F.slice(0,I),R=F.slice(I+1,F.length-1);P=D?p[D][R]:p[R]}else P=p[F]}var O=o[S].type,z;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":v.uniform1i(b[S],P);break;case"float":v.uniform1f(b[S],P);break;default:var H=O.indexOf("vec");if(0<=H&&H<=1&&O.length===4+H){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":v["uniform"+z+"iv"](b[S],P);break;case"v":v["uniform"+z+"fv"](b[S],P);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);v["uniformMatrix"+z+"fv"](b[S],!1,P);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}}}function c(A,_){if(typeof _!="object")return[[A,_]];var p=[];for(var w in _){var h=_[w],L=A;parseInt(w)+""===w?L+="["+w+"]":L+="."+w,typeof h=="object"?p.push.apply(p,c(L,h)):p.push([L,h])}return p}function m(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var _=A.indexOf("vec");if(0<=_&&_<=1&&A.length===4+_){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new a("","Invalid data type");return A.charAt(0)==="b"?n(p,!1):n(p,0)}else if(A.indexOf("mat")===0&&A.length===4){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+A);return n(p*p,0)}else throw new a("","Unknown uniform data type for "+name+": "+A)}}function l(A,_,p){if(typeof p=="object"){var w=y(p);Object.defineProperty(A,_,{get:i(w),set:d(p),enumerable:!0,configurable:!1})}else b[p]?Object.defineProperty(A,_,{get:g(p),set:d(p),enumerable:!0,configurable:!1}):A[_]=m(o[p].type)}function y(A){var _;if(Array.isArray(A)){_=new Array(A.length);for(var p=0;p<A.length;++p)l(_,p,A[p])}else{_={};for(var w in A)l(_,w,A[w])}return _}var u=e(o,!0);return{get:i(y(u)),set:d(u),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(f,M,T){M.exports=e;function e(a,i){for(var n={},r=0;r<a.length;++r)for(var v=a[r].name,s=v.split("."),o=n,b=0;b<s.length;++b){var g=s[b].split("[");if(g.length>1){g[0]in o||(o[g[0]]=[]),o=o[g[0]];for(var d=1;d<g.length;++d){var c=parseInt(g[d]);d<g.length-1||b<s.length-1?(c in o||(d<g.length-1?o[c]=[]:o[c]={}),o=o[c]):i?o[c]=r:o[c]=a[r].type}}else b<s.length-1?(g[0]in o||(o[g[0]]={}),o=o[g[0]]):i?o[g[0]]=r:o[g[0]]=a[r].type}return n}},{}],137:[function(f,M,T){T.uniforms=n,T.attributes=r;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(v,s){if(!a){var o=Object.keys(e);a={};for(var b=0;b<o.length;++b){var g=o[b];a[v[g]]=e[g]}}return a[s]}function n(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_UNIFORMS),b=[],g=0;g<o;++g){var d=v.getActiveUniform(s,g);if(d){var c=i(v,d.type);if(d.size>1)for(var m=0;m<d.size;++m)b.push({name:d.name.replace("[0]","["+m+"]"),type:c});else b.push({name:d.name,type:c})}}return b}function r(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_ATTRIBUTES),b=[],g=0;g<o;++g){var d=v.getActiveAttrib(s,g);d&&b.push({name:d.name,type:i(v,d.type)})}return b}},{}],138:[function(f,M,T){T.shader=c,T.program=m;var e=f("./GLError"),a=f("gl-format-compiler-error"),i=typeof WeakMap>"u"?f("weakmap-shim"):WeakMap,n=new i,r=0;function v(l,y,u,A,_,p,w){this.id=l,this.src=y,this.type=u,this.shader=A,this.count=p,this.programs=[],this.cache=w}v.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,y=l.gl,u=this.programs,A=0,_=u.length;A<_;++A){var p=l.programs[u[A]];p&&(delete l.programs[A],y.deleteProgram(p))}y.deleteShader(this.shader),delete l.shaders[this.type===y.FRAGMENT_SHADER|0][this.src]}};function s(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var o=s.prototype;function b(l,y,u){var A=l.createShader(y);if(l.shaderSource(A,u),l.compileShader(A),!l.getShaderParameter(A,l.COMPILE_STATUS)){var _=l.getShaderInfoLog(A);try{var p=a(_,u,y)}catch(w){throw console.warn("Failed to format compiler error: "+w),new e(_,`Error compiling shader:
`+_)}throw new e(_,p.short,p.long)}return A}o.getShaderReference=function(l,y){var u=this.gl,A=this.shaders[l===u.FRAGMENT_SHADER|0],_=A[y];if(!_||!u.isShader(_.shader)){var p=b(u,l,y);_=A[y]=new v(r++,y,l,p,[],1,this)}else _.count+=1;return _};function g(l,y,u,A,_){var p=l.createProgram();l.attachShader(p,y),l.attachShader(p,u);for(var w=0;w<A.length;++w)l.bindAttribLocation(p,_[w],A[w]);if(l.linkProgram(p),!l.getProgramParameter(p,l.LINK_STATUS)){var h=l.getProgramInfoLog(p);throw new e(h,"Error linking program: "+h)}return p}o.getProgram=function(l,y,u,A){var _=[l.id,y.id,u.join(":"),A.join(":")].join("@"),p=this.programs[_];return(!p||!this.gl.isProgram(p))&&(this.programs[_]=p=g(this.gl,l.shader,y.shader,u,A),l.programs.push(_),y.programs.push(_)),p};function d(l){var y=n.get(l);return y||(y=new s(l),n.set(l,y)),y}function c(l,y,u){return d(l).getShaderReference(y,u)}function m(l,y,u,A,_){return d(l).getProgram(y,u,A,_)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(f,M,T){M.exports=i;function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var n=this.enable,r=this.width,v=this.color,s=this.center,o=this.plot,b=o.line,g=o.dataBox,d=o.viewBox;if(b.bind(),g[0]<=s[0]&&s[0]<=g[2]&&g[1]<=s[1]&&s[1]<=g[3]){var c=d[0]+(s[0]-g[0])/(g[2]-g[0])*(d[2]-d[0]),m=d[1]+(s[1]-g[1])/(g[3]-g[1])*(d[3]-d[1]);n[0]&&b.drawLine(c,m,d[0],m,r[0],v[0]),n[1]&&b.drawLine(c,m,c,d[1],r[1],v[1]),n[2]&&b.drawLine(c,m,d[2],m,r[2],v[2]),n[3]&&b.drawLine(c,m,c,d[3],r[3],v[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function i(n,r){var v=new e(n);return v.update(r),n.addOverlay(v),v}},{}],140:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),n=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);M.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(f,M,T){var e=f("gl-buffer"),a=f("gl-vao"),i=f("./shaders/index");M.exports=g;var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,c,m,l){this.gl=d,this.buffer=c,this.vao=m,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=r.prototype,s=[0,0,0],o=[0,0,0],b=[0,0];v.isTransparent=function(){return!1},v.drawTransparent=function(d){},v.draw=function(d){var c=this.gl,m=this.vao,l=this.shader;m.bind(),l.bind();var y=d.model||n,u=d.view||n,A=d.projection||n,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var p=s,w=o,h=0;h<3;++h)_&&_[h]<0?(p[h]=this.bounds[0][h],w[h]=this.bounds[1][h]):(p[h]=this.bounds[1][h],w[h]=this.bounds[0][h]);b[0]=c.drawingBufferWidth,b[1]=c.drawingBufferHeight,l.uniforms.model=y,l.uniforms.view=u,l.uniforms.projection=A,l.uniforms.coordinates=[this.position,p,w],l.uniforms.colors=this.colors,l.uniforms.screenShape=b;for(var h=0;h<3;++h)l.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(m.draw(c.TRIANGLES,6,6*h),this.drawSides[h]&&m.draw(c.TRIANGLES,12,18+12*h));m.unbind()},v.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function g(d,c){var m=[];function l(p,w,h,L,E,S){var P=[p,w,h,0,0,0,1];P[L+3]=1,P[L]=E,m.push.apply(m,P),P[6]=-1,m.push.apply(m,P),P[L]=S,m.push.apply(m,P),m.push.apply(m,P),P[6]=1,m.push.apply(m,P),P[L]=E,m.push.apply(m,P)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var y=e(d,m),u=a(d,[{type:d.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:y,size:1,offset:24,stride:28}]),A=i(d);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.weight.location=2;var _=new r(d,y,u,A);return _.update(c),_}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(f,M,T){var e=f("gl-vec3"),a=f("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(m,l,y,u){for(var A=m.points,_=m.velocities,p=m.divergences,w=[],h=[],L=[],E=[],S=[],P=[],F=0,I=0,D=a.create(),R=a.create(),O=8,z=0;z<A.length;z++){var H=A[z],Y=_[z],ee=p[z];l===0&&(ee=y*.05),I=e.length(Y)/u,D=a.create(),e.copy(D,Y),D[3]=ee;for(var j=0;j<O;j++)S[j]=[H[0],H[1],H[2],j];if(E.length>0)for(var j=0;j<O;j++){var X=(j+1)%O;w.push(E[j],S[j],S[X],S[X],E[X],E[j]),L.push(R,D,D,D,R,R),P.push(F,I,I,I,F,F);var ae=w.length;h.push([ae-6,ae-5,ae-4],[ae-3,ae-2,ae-1])}var fe=E;E=S,S=fe;var K=R;R=D,D=K;var J=F;F=I,I=J}return{positions:w,cells:h,vectors:L,vertexIntensity:P}},r=function(m,l,y,u){for(var A=0,_=0;_<m.length;_++)for(var p=m[_].velocities,w=0;w<p.length;w++)A=Math.max(A,e.length(p[w]));for(var h=m.map(function(z){return n(z,y,u,A)}),L=[],E=[],S=[],P=[],_=0;_<h.length;_++){var F=h[_],I=L.length;L=L.concat(F.positions),S=S.concat(F.vectors),P=P.concat(F.vertexIntensity);for(var w=0;w<F.cells.length;w++){var D=F.cells[w],R=[];E.push(R);for(var O=0;O<D.length;O++)R.push(D[O]+I)}}return{positions:L,cells:E,vectors:S,vertexIntensity:P,colormap:l}},v=function(m,l){var y=m.length,u;for(u=0;u<y;u++){var A=m[u];if(A===l)return u;if(A>l)return u-1}return u},s=function(m,l,y){return m<l?l:m>y?y:m},o=function(m,l,y){var u=l.vectors,A=l.meshgrid,_=m[0],p=m[1],w=m[2],h=A[0].length,L=A[1].length,E=A[2].length,S=v(A[0],_),P=v(A[1],p),F=v(A[2],w),I=S+1,D=P+1,R=F+1;if(S=s(S,0,h-1),I=s(I,0,h-1),P=s(P,0,L-1),D=s(D,0,L-1),F=s(F,0,E-1),R=s(R,0,E-1),S<0||P<0||F<0||I>h-1||D>L-1||R>E-1)return e.create();var O=A[0][S],z=A[0][I],H=A[1][P],Y=A[1][D],ee=A[2][F],j=A[2][R],X=(_-O)/(z-O),ae=(p-H)/(Y-H),fe=(w-ee)/(j-ee);isFinite(X)||(X=.5),isFinite(ae)||(ae=.5),isFinite(fe)||(fe=.5);var K,J,U,V,q,re;switch(y.reversedX&&(S=h-1-S,I=h-1-I),y.reversedY&&(P=L-1-P,D=L-1-D),y.reversedZ&&(F=E-1-F,R=E-1-R),y.filled){case 5:q=F,re=R,U=P*E,V=D*E,K=S*E*L,J=I*E*L;break;case 4:q=F,re=R,K=S*E,J=I*E,U=P*E*h,V=D*E*h;break;case 3:U=P,V=D,q=F*L,re=R*L,K=S*L*E,J=I*L*E;break;case 2:U=P,V=D,K=S*L,J=I*L,q=F*L*h,re=R*L*h;break;case 1:K=S,J=I,q=F*h,re=R*h,U=P*h*E,V=D*h*E;break;default:K=S,J=I,U=P*h,V=D*h,q=F*h*L,re=R*h*L;break}var Z=u[K+U+q],Q=u[K+U+re],ie=u[K+V+q],oe=u[K+V+re],ne=u[J+U+q],se=u[J+U+re],_e=u[J+V+q],ue=u[J+V+re],ge=e.create(),xe=e.create(),ye=e.create(),be=e.create();e.lerp(ge,Z,ne,X),e.lerp(xe,Q,se,X),e.lerp(ye,ie,_e,X),e.lerp(be,oe,ue,X);var Se=e.create(),Re=e.create();e.lerp(Se,ge,ye,ae),e.lerp(Re,xe,be,ae);var Ve=e.create();return e.lerp(Ve,Se,Re,fe),Ve},b=function(m){var l=1/0;m.sort(function(_,p){return _-p});for(var y=m.length,u=1;u<y;u++){var A=Math.abs(m[u]-m[u-1]);A<l&&(l=A)}return l},g=function(m){for(var l=[],y=[],u=[],A={},_={},p={},w=m.length,h=0;h<w;h++){var L=m[h],E=L[0],S=L[1],P=L[2];A[E]||(l.push(E),A[E]=!0),_[S]||(y.push(S),_[S]=!0),p[P]||(u.push(P),p[P]=!0)}var F=b(l),I=b(y),D=b(u),R=Math.min(F,I,D);return isFinite(R)?R:1};M.exports=function(m,l){var y=m.startingPositions,u=m.maxLength||1e3,A=m.tubeSize||1,_=m.absoluteTubeSize,p=m.gridFill||"+x+y+z",w={};p.indexOf("-x")!==-1&&(w.reversedX=!0),p.indexOf("-y")!==-1&&(w.reversedY=!0),p.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=i.indexOf(p.replace(/-/g,"").replace(/\+/g,""));var h=m.getVelocity||function(se){return o(se,m,w)},L=m.getDivergence||function(se,_e){var ue=e.create(),ge=1e-4;e.add(ue,se,[ge,0,0]);var xe=h(ue);e.subtract(xe,xe,_e),e.scale(xe,xe,1/ge),e.add(ue,se,[0,ge,0]);var ye=h(ue);e.subtract(ye,ye,_e),e.scale(ye,ye,1/ge),e.add(ue,se,[0,0,ge]);var be=h(ue);return e.subtract(be,be,_e),e.scale(be,be,1/ge),e.add(ue,xe,ye),e.add(ue,ue,be),ue},E=[],S=l[0][0],P=l[0][1],F=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],O=function(se){var _e=se[0],ue=se[1],ge=se[2];return!(_e<S||_e>I||ue<P||ue>D||ge<F||ge>R)},z=e.distance(l[0],l[1]),H=10*z/u,Y=H*H,ee=1,j=0,X=y.length;X>1&&(ee=g(y));for(var ae=0;ae<X;ae++){var fe=e.create();e.copy(fe,y[ae]);var K=[fe],J=[],U=h(fe),V=fe;J.push(U);var q=[],re=L(fe,U),Z=e.length(re);isFinite(Z)&&Z>j&&(j=Z),q.push(Z),E.push({points:K,velocities:J,divergences:q});for(var Q=0;Q<u*100&&K.length<u&&O(fe);){Q++;var ie=e.clone(U),oe=e.squaredLength(ie);if(oe===0)break;if(oe>Y&&e.scale(ie,ie,H/Math.sqrt(oe)),e.add(ie,ie,fe),U=h(ie),e.squaredDistance(V,ie)-Y>-1e-4*Y){K.push(ie),V=ie,J.push(U);var re=L(ie,U),Z=e.length(re);isFinite(Z)&&Z>j&&(j=Z),q.push(Z)}fe=ie}}var ne=r(E,m.colormap,j,ee);return _?ne.tubeScale=_:(j===0&&(j=1),ne.tubeScale=A*.5*ee/j),ne};var d=f("./lib/shaders"),c=f("gl-cone3d").createMesh;M.exports.createTubeMesh=function(m,l){return c(m,l,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(f,M,T){var e=f("gl-shader"),a=f("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(s){var o=e(s,i,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createPickShader=function(s){var o=e(s,i,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createContourShader=function(s){var o=e(s,r,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},T.createPickContourShader=function(s){var o=e(s,r,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(f,M,T){M.exports=J;var e=f("bit-twiddle"),a=f("gl-buffer"),i=f("gl-vao"),n=f("gl-texture2d"),r=f("typedarray-pool"),v=f("colormap"),s=f("ndarray-ops"),o=f("ndarray-pack"),b=f("ndarray"),g=f("surface-nets"),d=f("gl-mat4/multiply"),c=f("gl-mat4/invert"),m=f("binary-search-bounds"),l=f("ndarray-gradient"),y=f("./lib/shaders"),u=y.createShader,A=y.createContourShader,_=y.createPickShader,p=y.createPickContourShader,w=4*(4+3+3),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],E=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;U<3;++U){var V=E[U],q=(U+1)%3,re=(U+2)%3;V[q+0]=1,V[re+3]=1,V[U+6]=1}})();function S(U,V,q,re,Z){this.position=U,this.index=V,this.uv=q,this.level=re,this.dataCoordinate=Z}var P=256;function F(U,V,q,re,Z,Q,ie,oe,ne,se,_e,ue,ge,xe,ye){this.gl=U,this.shape=V,this.bounds=q,this.objectOffset=ye,this.intensityBounds=[],this._shader=re,this._pickShader=Z,this._coordinateBuffer=Q,this._vao=ie,this._colorMap=oe,this._contourShader=ne,this._contourPickShader=se,this._contourBuffer=_e,this._contourVAO=ue,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new S([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ge,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=F.prototype;I.genColormap=function(U,V){var q=!1,re=o([v({colormap:U,nshades:P,format:"rgba"}).map(function(Z,Q){var ie=V?D(Q/255,V):Z[3];return ie<1&&(q=!0),[Z[0],Z[1],Z[2],255*ie]})]);return s.divseq(re,255),this.hasAlphaScale=q,re},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};function D(U,V){if(!V||!V.length)return 1;for(var q=0;q<V.length;++q){if(V.length<2)return 1;if(V[q][0]===U)return V[q][1];if(V[q][0]>U&&q>0){var re=(V[q][0]-U)/(V[q][0]-V[q-1][0]);return V[q][1]*(1-re)+re*V[q-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[h.slice(),h.slice(),h.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(U,V){var q,re,Z,Q=V.axes&&V.axes.lastCubeProps.axis||R,ie=V.showSurface,oe=V.showContour;for(q=0;q<3;++q)for(ie=ie||V.surfaceProject[q],re=0;re<3;++re)oe=oe||V.contourProject[q][re];for(q=0;q<3;++q){var ne=O.projections[q];for(re=0;re<16;++re)ne[re]=0;for(re=0;re<4;++re)ne[5*re]=1;ne[5*q]=0,ne[12+q]=V.axesBounds[+(Q[q]>0)][q],d(ne,U.model,ne);var se=O.clipBounds[q];for(Z=0;Z<2;++Z)for(re=0;re<3;++re)se[Z][re]=U.clipBounds[Z][re];se[0][q]=-1e8,se[1][q]=1e8}return O.showSurface=ie,O.showContour=oe,O}var H={model:h,view:h,projection:h,inverseModel:h.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=h.slice(),ee=[1,0,0,0,1,0,0,0,1];function j(U,V){U=U||{};var q=this.gl;q.disable(q.CULL_FACE),this._colorMap.bind(0);var re=H;re.model=U.model||h,re.view=U.view||h,re.projection=U.projection||h,re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],re.objectOffset=this.objectOffset,re.contourColor=this.contourColor[0],re.inverseModel=c(re.inverseModel,re.model);for(var Z=0;Z<2;++Z)for(var Q=re.clipBounds[Z],ie=0;ie<3;++ie)Q[ie]=Math.min(Math.max(this.clipBounds[Z][ie],-1e8),1e8);re.kambient=this.ambientLight,re.kdiffuse=this.diffuseLight,re.kspecular=this.specularLight,re.roughness=this.roughness,re.fresnel=this.fresnel,re.opacity=this.opacity,re.height=0,re.permutation=ee,re.vertexColor=this.vertexColor;var oe=Y;for(d(oe,re.view,re.model),d(oe,re.projection,oe),c(oe,oe),Z=0;Z<3;++Z)re.eyePosition[Z]=oe[12+Z]/oe[15];var ne=oe[15];for(Z=0;Z<3;++Z)ne+=this.lightPosition[Z]*oe[4*Z+3];for(Z=0;Z<3;++Z){var se=oe[12+Z];for(ie=0;ie<3;++ie)se+=oe[4*ie+Z]*this.lightPosition[ie];re.lightPosition[Z]=se/ne}var _e=z(re,this);if(_e.showSurface){for(this._shader.bind(),this._shader.uniforms=re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(q.TRIANGLES,this._vertexCount),Z=0;Z<3;++Z)!this.surfaceProject[Z]||!this.vertexCount||(this._shader.uniforms.model=_e.projections[Z],this._shader.uniforms.clipBounds=_e.clipBounds[Z],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var ue=this._contourShader;re.kambient=1,re.kdiffuse=0,re.kspecular=0,re.opacity=1,ue.bind(),ue.uniforms=re;var ge=this._contourVAO;for(ge.bind(),Z=0;Z<3;++Z)for(ue.uniforms.permutation=E[Z],q.lineWidth(this.contourWidth[Z]*this.pixelRatio),ie=0;ie<this.contourLevels[Z].length;++ie)ie===this.highlightLevel[Z]?(ue.uniforms.contourColor=this.highlightColor[Z],ue.uniforms.contourTint=this.highlightTint[Z]):(ie===0||ie-1===this.highlightLevel[Z])&&(ue.uniforms.contourColor=this.contourColor[Z],ue.uniforms.contourTint=this.contourTint[Z]),this._contourCounts[Z][ie]&&(ue.uniforms.height=this.contourLevels[Z][ie],ge.draw(q.LINES,this._contourCounts[Z][ie],this._contourOffsets[Z][ie]));for(Z=0;Z<3;++Z)for(ue.uniforms.model=_e.projections[Z],ue.uniforms.clipBounds=_e.clipBounds[Z],ie=0;ie<3;++ie)if(!!this.contourProject[Z][ie]){ue.uniforms.permutation=E[ie],q.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ie].length;++xe)xe===this.highlightLevel[ie]?(ue.uniforms.contourColor=this.highlightColor[ie],ue.uniforms.contourTint=this.highlightTint[ie]):(xe===0||xe-1===this.highlightLevel[ie])&&(ue.uniforms.contourColor=this.contourColor[ie],ue.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][xe]&&(ue.uniforms.height=this.contourLevels[ie][xe],ge.draw(q.LINES,this._contourCounts[ie][xe],this._contourOffsets[ie][xe]))}for(ge.unbind(),ge=this._dynamicVAO,ge.bind(),Z=0;Z<3;++Z)if(this._dynamicCounts[Z]!==0)for(ue.uniforms.model=re.model,ue.uniforms.clipBounds=re.clipBounds,ue.uniforms.permutation=E[Z],q.lineWidth(this.dynamicWidth[Z]*this.pixelRatio),ue.uniforms.contourColor=this.dynamicColor[Z],ue.uniforms.contourTint=this.dynamicTint[Z],ue.uniforms.height=this.dynamicLevel[Z],ge.draw(q.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]),ie=0;ie<3;++ie)!this.contourProject[ie][Z]||(ue.uniforms.model=_e.projections[ie],ue.uniforms.clipBounds=_e.clipBounds[ie],ge.draw(q.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]));ge.unbind()}}I.draw=function(U){return j.call(this,U,!1)},I.drawTransparent=function(U){return j.call(this,U,!0)};var X={model:h,view:h,projection:h,inverseModel:h,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(U){U=U||{};var V=this.gl;V.disable(V.CULL_FACE);var q=X;q.model=U.model||h,q.view=U.view||h,q.projection=U.projection||h,q.shape=this._field[2].shape,q.pickId=this.pickId/255,q.lowerBound=this.bounds[0],q.upperBound=this.bounds[1],q.objectOffset=this.objectOffset,q.permutation=ee;for(var re=0;re<2;++re)for(var Z=q.clipBounds[re],Q=0;Q<3;++Q)Z[Q]=Math.min(Math.max(this.clipBounds[re][Q],-1e8),1e8);var ie=z(q,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=q,this._vao.bind(),this._vao.draw(V.TRIANGLES,this._vertexCount),re=0;re<3;++re)!this.surfaceProject[re]||(this._pickShader.uniforms.model=ie.projections[re],this._pickShader.uniforms.clipBounds=ie.clipBounds[re],this._vao.draw(V.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var oe=this._contourPickShader;oe.bind(),oe.uniforms=q;var ne=this._contourVAO;for(ne.bind(),Q=0;Q<3;++Q)for(V.lineWidth(this.contourWidth[Q]*this.pixelRatio),oe.uniforms.permutation=E[Q],re=0;re<this.contourLevels[Q].length;++re)this._contourCounts[Q][re]&&(oe.uniforms.height=this.contourLevels[Q][re],ne.draw(V.LINES,this._contourCounts[Q][re],this._contourOffsets[Q][re]));for(re=0;re<3;++re)for(oe.uniforms.model=ie.projections[re],oe.uniforms.clipBounds=ie.clipBounds[re],Q=0;Q<3;++Q)if(!!this.contourProject[re][Q]){oe.uniforms.permutation=E[Q],V.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var se=0;se<this.contourLevels[Q].length;++se)this._contourCounts[Q][se]&&(oe.uniforms.height=this.contourLevels[Q][se],ne.draw(V.LINES,this._contourCounts[Q][se],this._contourOffsets[Q][se]))}ne.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var V=this._field[2].shape,q=this._pickResult,re=V[0]*(U.value[0]+(U.value[2]>>4)/16)/255,Z=Math.floor(re),Q=re-Z,ie=V[1]*(U.value[1]+(U.value[2]&15)/16)/255,oe=Math.floor(ie),ne=ie-oe;Z+=1,oe+=1;var se=q.position;se[0]=se[1]=se[2]=0;for(var _e=0;_e<2;++_e)for(var ue=_e?Q:1-Q,ge=0;ge<2;++ge)for(var xe=ge?ne:1-ne,ye=Z+_e,be=oe+ge,Se=ue*xe,Re=0;Re<3;++Re)se[Re]+=this._field[Re].get(ye,be)*Se;for(var Ve=this._pickResult.level,Ae=0;Ae<3;++Ae)if(Ve[Ae]=m.le(this.contourLevels[Ae],se[Ae]),Ve[Ae]<0)this.contourLevels[Ae].length>0&&(Ve[Ae]=0);else if(Ve[Ae]<this.contourLevels[Ae].length-1){var Ce=this.contourLevels[Ae][Ve[Ae]],Ze=this.contourLevels[Ae][Ve[Ae]+1];Math.abs(Ce-se[Ae])>Math.abs(Ze-se[Ae])&&(Ve[Ae]+=1)}for(q.index[0]=Q<.5?Z:Z+1,q.index[1]=ne<.5?oe:oe+1,q.uv[0]=re/V[0],q.uv[1]=ie/V[1],Re=0;Re<3;++Re)q.dataCoordinate[Re]=this._field[Re].get(q.index[0],q.index[1]);return q},I.padField=function(U,V){var q=V.shape.slice(),re=U.shape.slice();s.assign(U.lo(1,1).hi(q[0],q[1]),V),s.assign(U.lo(1).hi(q[0],1),V.hi(q[0],1)),s.assign(U.lo(1,re[1]-1).hi(q[0],1),V.lo(0,q[1]-1).hi(q[0],1)),s.assign(U.lo(0,1).hi(1,q[1]),V.hi(1)),s.assign(U.lo(re[0]-1,1).hi(1,q[1]),V.lo(q[0]-1)),U.set(0,0,V.get(0,0)),U.set(0,re[1]-1,V.get(0,q[1]-1)),U.set(re[0]-1,0,V.get(q[0]-1,0)),U.set(re[0]-1,re[1]-1,V.get(q[0]-1,q[1]-1))};function ae(U,V){return Array.isArray(U)?[V(U[0]),V(U[1]),V(U[2])]:[V(U),V(U),V(U)]}function fe(U){return Array.isArray(U)?U.length===3?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function K(U){if(Array.isArray(U)){if(Array.isArray(U))return[fe(U[0]),fe(U[1]),fe(U[2])];var V=fe(U);return[V.slice(),V.slice(),V.slice()]}}I.update=function(U){U=U||{},this.objectOffset=U.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=ae(U.contourWidth,Number)),"showContour"in U&&(this.showContour=ae(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=ae(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=K(U.contourColor)),"contourProject"in U&&(this.contourProject=ae(U.contourProject,function(ut){return ae(ut,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=K(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=ae(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=ae(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var V=U.field||U.coords&&U.coords[2]||null,q=!1;if(V||(this._field[2].shape[0]||this._field[2].shape[2]?V=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):V=this._field[2].hi(0,0)),"field"in U||"coords"in U){var re=(V.shape[0]+2)*(V.shape[1]+2);re>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(re))),this._field[2]=b(this._field[2].data,[V.shape[0]+2,V.shape[1]+2]),this.padField(this._field[2],V),this.shape=V.shape.slice();for(var Z=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(r.freeFloat(this._field[Q].data),this._field[Q].data=r.mallocFloat(this._field[2].size)),this._field[Q]=b(this._field[Q].data,[Z[0]+2,Z[1]+2]);if(U.coords){var ie=U.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var oe=ie[Q];for(ge=0;ge<2;++ge)if(oe.shape[ge]!==Z[ge])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],oe)}}else if(U.ticks){var ne=U.ticks;if(!Array.isArray(ne)||ne.length!==2)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var se=ne[Q];if((Array.isArray(se)||se.length)&&(se=b(se)),se.shape[0]!==Z[Q])throw new Error("gl-surface: invalid tick length");var _e=b(se.data,Z);_e.stride[Q]=se.stride[0],_e.stride[Q^1]=0,this.padField(this._field[Q],_e)}}else{for(Q=0;Q<2;++Q){var ue=[0,0];ue[Q]=1,this._field[Q]=b(this._field[Q].data,[Z[0]+2,Z[1]+2],ue,0)}this._field[0].set(0,0,0);for(var ge=0;ge<Z[0];++ge)this._field[0].set(ge+1,0,ge);for(this._field[0].set(Z[0]+1,0,Z[0]-1),this._field[1].set(0,0,0),ge=0;ge<Z[1];++ge)this._field[1].set(0,ge+1,ge);this._field[1].set(0,Z[1]+1,Z[1]-1)}var xe=this._field,ye=b(r.mallocFloat(xe[2].size*3*2),[3,Z[0]+2,Z[1]+2,2]);for(Q=0;Q<3;++Q)l(ye.pick(Q),xe[Q],"mirror");var be=b(r.mallocFloat(xe[2].size*3),[Z[0]+2,Z[1]+2,3]);for(Q=0;Q<Z[0]+2;++Q)for(ge=0;ge<Z[1]+2;++ge){var Se=ye.get(0,Q,ge,0),Re=ye.get(0,Q,ge,1),Ve=ye.get(1,Q,ge,0),Ae=ye.get(1,Q,ge,1),Ce=ye.get(2,Q,ge,0),Ze=ye.get(2,Q,ge,1),Ye=Ve*Ze-Ae*Ce,ze=Ce*Re-Ze*Se,Ie=Se*Ae-Re*Ve,Ge=Math.sqrt(Ye*Ye+ze*ze+Ie*Ie);Ge<1e-8?(Ge=Math.max(Math.abs(Ye),Math.abs(ze),Math.abs(Ie)),Ge<1e-8?(Ie=1,ze=Ye=0,Ge=1):Ge=1/Ge):Ge=1/Math.sqrt(Ge),be.set(Q,ge,0,Ye*Ge),be.set(Q,ge,1,ze*Ge),be.set(Q,ge,2,Ie*Ge)}r.free(ye.data);var dt=[1/0,1/0,1/0],Rt=[-1/0,-1/0,-1/0],Qt=1/0,Bt=-1/0,Ct=(Z[0]-1)*(Z[1]-1)*6,Kt=r.mallocFloat(e.nextPow2(10*Ct)),Ot=0,St=0;for(Q=0;Q<Z[0]-1;++Q){e:for(ge=0;ge<Z[1]-1;++ge){for(var Xe=0;Xe<2;++Xe)for(var at=0;at<2;++at)for(var We=0;We<3;++We){var Ee=this._field[We].get(1+Q+Xe,1+ge+at);if(isNaN(Ee)||!isFinite(Ee))continue e}for(We=0;We<6;++We){var He=Q+L[We][0],Ke=ge+L[We][1],et=this._field[0].get(He+1,Ke+1),At=this._field[1].get(He+1,Ke+1);Ee=this._field[2].get(He+1,Ke+1),Ye=be.get(He+1,Ke+1,0),ze=be.get(He+1,Ke+1,1),Ie=be.get(He+1,Ke+1,2),U.intensity&&(mt=U.intensity.get(He,Ke));var mt=U.intensity?U.intensity.get(He,Ke):Ee+this.objectOffset[2];Kt[Ot++]=He,Kt[Ot++]=Ke,Kt[Ot++]=et,Kt[Ot++]=At,Kt[Ot++]=Ee,Kt[Ot++]=0,Kt[Ot++]=mt,Kt[Ot++]=Ye,Kt[Ot++]=ze,Kt[Ot++]=Ie,dt[0]=Math.min(dt[0],et+this.objectOffset[0]),dt[1]=Math.min(dt[1],At+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ee+this.objectOffset[2]),Qt=Math.min(Qt,mt),Rt[0]=Math.max(Rt[0],et+this.objectOffset[0]),Rt[1]=Math.max(Rt[1],At+this.objectOffset[1]),Rt[2]=Math.max(Rt[2],Ee+this.objectOffset[2]),Bt=Math.max(Bt,mt),St+=1}}}for(U.intensityBounds&&(Qt=+U.intensityBounds[0],Bt=+U.intensityBounds[1]),Q=6;Q<Ot;Q+=10)Kt[Q]=(Kt[Q]-Qt)/(Bt-Qt);this._vertexCount=St,this._coordinateBuffer.update(Kt.subarray(0,Ot)),r.freeFloat(Kt),r.free(be.data),this.bounds=[dt,Rt],this.intensity=U.intensity||this._field[2],(this.intensityBounds[0]!==Qt||this.intensityBounds[1]!==Bt)&&(q=!0),this.intensityBounds=[Qt,Bt]}if("levels"in U){var Mt=U.levels;for(Array.isArray(Mt[0])?Mt=Mt.slice():Mt=[[],[],Mt],Q=0;Q<3;++Q)Mt[Q]=Mt[Q].slice(),Mt[Q].sort(function(ut,pt){return ut-pt});for(Q=0;Q<3;++Q)for(ge=0;ge<Mt[Q].length;++ge)Mt[Q][ge]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(Mt[Q].length!==this.contourLevels[Q].length){q=!0;break}for(ge=0;ge<Mt[Q].length;++ge)if(Mt[Q][ge]!==this.contourLevels[Q][ge]){q=!0;break e}}this.contourLevels=Mt}if(q){xe=this._field,Z=this.shape;for(var Gt=[],zt=0;zt<3;++zt){var Ht=this.contourLevels[zt],Xt=[],Wt=[],sr=[0,0,0];for(Q=0;Q<Ht.length;++Q){var Gr=g(this._field[zt],Ht[Q]);Xt.push(Gt.length/5|0),St=0;e:for(ge=0;ge<Gr.cells.length;++ge){var cn=Gr.cells[ge];for(We=0;We<2;++We){var en=Gr.positions[cn[We]],st=en[0],rr=Math.floor(st)|0,er=st-rr,jt=en[1],Mr=Math.floor(jt)|0,it=jt-Mr,Qe=!1;t:for(var ft=0;ft<3;++ft){sr[ft]=0;var ct=(zt+ft+1)%3;for(Xe=0;Xe<2;++Xe){var Et=Xe?er:1-er;for(He=Math.min(Math.max(rr+Xe,0),Z[0])|0,at=0;at<2;++at){var Nt=at?it:1-it;if(Ke=Math.min(Math.max(Mr+at,0),Z[1])|0,ft<2?Ee=this._field[ct].get(He,Ke):Ee=(this.intensity.get(He,Ke)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ee)||isNaN(Ee)){Qe=!0;break t}var Pe=Et*Nt;sr[ft]+=Pe*Ee}}}if(!Qe)Gt.push(sr[0],sr[1],en[0],en[1],sr[2]),St+=1;else{if(We>0){for(var Le=0;Le<5;++Le)Gt.pop();St-=1}continue e}}}Wt.push(St)}this._contourOffsets[zt]=Xt,this._contourCounts[zt]=Wt}var ot=r.mallocFloat(Gt.length);for(Q=0;Q<Gt.length;++Q)ot[Q]=Gt[Q];this._contourBuffer.update(ot),r.freeFloat(ot)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)r.freeFloat(this._field[U].data)},I.highlight=function(U){var V;if(!U){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(V=0;V<3;++V)this.enableHighlight[V]?this.highlightLevel[V]=U.level[V]:this.highlightLevel[V]=-1;var q;for(this.snapToData?q=U.dataCoordinate:q=U.position,V=0;V<3;++V)q[V]-=this.objectOffset[V];if(!((!this.enableDynamic[0]||q[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||q[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||q[2]===this.dynamicLevel[2]))){for(var re=0,Z=this.shape,Q=r.mallocFloat(12*Z[0]*Z[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=q[ie];var oe=(ie+1)%3,ne=(ie+2)%3,se=this._field[ie],_e=this._field[oe],ue=this._field[ne],ge=g(se,q[ie]),xe=ge.cells,ye=ge.positions;for(this._dynamicOffsets[ie]=re,V=0;V<xe.length;++V)for(var be=xe[V],Se=0;Se<2;++Se){var Re=ye[be[Se]],Ve=+Re[0],Ae=Ve|0,Ce=Math.min(Ae+1,Z[0])|0,Ze=Ve-Ae,Ye=1-Ze,ze=+Re[1],Ie=ze|0,Ge=Math.min(Ie+1,Z[1])|0,dt=ze-Ie,Rt=1-dt,Qt=Ye*Rt,Bt=Ye*dt,Ct=Ze*Rt,Kt=Ze*dt,Ot=Qt*_e.get(Ae,Ie)+Bt*_e.get(Ae,Ge)+Ct*_e.get(Ce,Ie)+Kt*_e.get(Ce,Ge),St=Qt*ue.get(Ae,Ie)+Bt*ue.get(Ae,Ge)+Ct*ue.get(Ce,Ie)+Kt*ue.get(Ce,Ge);if(isNaN(Ot)||isNaN(St)){Se&&(re-=1);break}Q[2*re+0]=Ot,Q[2*re+1]=St,re+=1}this._dynamicCounts[ie]=re-this._dynamicOffsets[ie]}this._dynamicBuffer.update(Q.subarray(0,2*re)),r.freeFloat(Q)}};function J(U){var V=U.gl,q=u(V),re=_(V),Z=A(V),Q=p(V),ie=a(V),oe=i(V,[{buffer:ie,size:4,stride:w,offset:0},{buffer:ie,size:3,stride:w,offset:16},{buffer:ie,size:3,stride:w,offset:28}]),ne=a(V),se=i(V,[{buffer:ne,size:4,stride:20,offset:0},{buffer:ne,size:1,stride:20,offset:16}]),_e=a(V),ue=i(V,[{buffer:_e,size:2,type:V.FLOAT}]),ge=n(V,1,P,V.RGBA,V.UNSIGNED_BYTE);ge.minFilter=V.LINEAR,ge.magFilter=V.LINEAR;var xe=new F(V,[0,0],[[0,0,0],[0,0,0]],q,re,ie,oe,ge,Z,Q,ne,se,_e,ue,[0,0,0]),ye={levels:[[],[],[]]};for(var be in U)ye[be]=U[be];return ye.colormap=ye.colormap||"jet",xe.update(ye),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(f,M,T){var e=f("ndarray"),a=f("ndarray-ops"),i=f("typedarray-pool");M.exports=p;var n=null,r=null,v=null;function s(w){n=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],r=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],v=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}function o(w){return typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&w instanceof HTMLVideoElement||typeof ImageData<"u"&&w instanceof ImageData}var b=function(w,h){a.muls(w,h,255)};function g(w,h,L){var E=w.gl,S=E.getParameter(E.MAX_TEXTURE_SIZE);if(h<0||h>S||L<0||L>S)throw new Error("gl-texture2d: Invalid texture size");return w._shape=[h,L],w.bind(),E.texImage2D(E.TEXTURE_2D,0,w.format,h,L,0,w.format,w.type,null),w._mipLevels=[0],w}function d(w,h,L,E,S,P){this.gl=w,this.handle=h,this.format=S,this.type=P,this._shape=[L,E],this._mipLevels=[0],this._magFilter=w.NEAREST,this._minFilter=w.NEAREST,this._wrapS=w.CLAMP_TO_EDGE,this._wrapT=w.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(R){return F.wrapS=R}},{get:function(){return F._wrapT},set:function(R){return F.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return F._shape[0]},set:function(R){return F.width=R}},{get:function(){return F._shape[1]},set:function(R){return F.height=R}}]),this._shapeVector=D}var c=d.prototype;Object.defineProperties(c,{minFilter:{get:function(){return this._minFilter},set:function(w){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(w)>=0&&(h.getExtension("OES_texture_float_linear")||(w=h.NEAREST)),r.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,w),this._minFilter=w}},magFilter:{get:function(){return this._magFilter},set:function(w){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(w)>=0&&(h.getExtension("OES_texture_float_linear")||(w=h.NEAREST)),r.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,w),this._magFilter=w}},mipSamples:{get:function(){return this._anisoSamples},set:function(w){var h=this._anisoSamples;if(this._anisoSamples=Math.max(w,1)|0,h!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(w){if(this.bind(),v.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,w),this._wrapS=w}},wrapT:{get:function(){return this._wrapT},set:function(w){if(this.bind(),v.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,w),this._wrapT=w}},wrap:{get:function(){return this._wrapVector},set:function(w){if(Array.isArray(w)||(w=[w,w]),w.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(v.indexOf(w[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);this._wrapS=w[0],this._wrapT=w[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),w}},shape:{get:function(){return this._shapeVector},set:function(w){if(!Array.isArray(w))w=[w|0,w|0];else if(w.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return g(this,w[0]|0,w[1]|0),[w[0]|0,w[1]|0]}},width:{get:function(){return this._shape[0]},set:function(w){return w=w|0,g(this,w,this._shape[1]),w}},height:{get:function(){return this._shape[1]},set:function(w){return w=w|0,g(this,this._shape[0],w),w}}}),c.bind=function(w){var h=this.gl;return w!==void 0&&h.activeTexture(h.TEXTURE0+(w|0)),h.bindTexture(h.TEXTURE_2D,this.handle),w!==void 0?w|0:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},c.dispose=function(){this.gl.deleteTexture(this.handle)},c.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var w=Math.min(this._shape[0],this._shape[1]),h=0;w>0;++h,w>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},c.setPixels=function(w,h,L,E){var S=this.gl;this.bind(),Array.isArray(h)?(E=L,L=h[1]|0,h=h[0]|0):(h=h||0,L=L||0),E=E||0;var P=o(w)?w:w.raw;if(P){var F=this._mipLevels.indexOf(E)<0;F?(S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(E)):S.texSubImage2D(S.TEXTURE_2D,E,h,L,this.format,this.type,P)}else if(w.shape&&w.stride&&w.data){if(w.shape.length<2||h+w.shape[1]>this._shape[1]>>>E||L+w.shape[0]>this._shape[0]>>>E||h<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(S,h,L,E,this.format,this.type,this._mipLevels,w)}else throw new Error("gl-texture2d: Unsupported data type")};function m(w,h){return w.length===3?h[2]===1&&h[1]===w[0]*w[2]&&h[0]===w[2]:h[0]===1&&h[1]===w[0]}function l(w,h,L,E,S,P,F,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,z=0,H=m(R,I.stride.slice());if(D==="float32"?O=w.FLOAT:D==="float64"?(O=w.FLOAT,H=!1,D="float32"):D==="uint8"?O=w.UNSIGNED_BYTE:(O=w.UNSIGNED_BYTE,H=!1,D="uint8"),R.length===2)z=w.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3){if(R[2]===1)z=w.ALPHA;else if(R[2]===2)z=w.LUMINANCE_ALPHA;else if(R[2]===3)z=w.RGB;else if(R[2]===4)z=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((z===w.LUMINANCE||z===w.ALPHA)&&(S===w.LUMINANCE||S===w.ALPHA)&&(z=S),z!==S)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=I.size,ee=F.indexOf(E)<0;if(ee&&F.push(E),O===P&&H)I.offset===0&&I.data.length===Y?ee?w.texImage2D(w.TEXTURE_2D,E,S,R[0],R[1],0,S,P,I.data):w.texSubImage2D(w.TEXTURE_2D,E,h,L,R[0],R[1],S,P,I.data):ee?w.texImage2D(w.TEXTURE_2D,E,S,R[0],R[1],0,S,P,I.data.subarray(I.offset,I.offset+Y)):w.texSubImage2D(w.TEXTURE_2D,E,h,L,R[0],R[1],S,P,I.data.subarray(I.offset,I.offset+Y));else{var j;P===w.FLOAT?j=i.mallocFloat32(Y):j=i.mallocUint8(Y);var X=e(j,R,[R[2],R[2]*R[0],1]);O===w.FLOAT&&P===w.UNSIGNED_BYTE?b(X,I):a.assign(X,I),ee?w.texImage2D(w.TEXTURE_2D,E,S,R[0],R[1],0,S,P,j.subarray(0,Y)):w.texSubImage2D(w.TEXTURE_2D,E,h,L,R[0],R[1],S,P,j.subarray(0,Y)),P===w.FLOAT?i.freeFloat32(j):i.freeUint8(j)}}function y(w){var h=w.createTexture();return w.bindTexture(w.TEXTURE_2D,h),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),h}function u(w,h,L,E,S){var P=w.getParameter(w.MAX_TEXTURE_SIZE);if(h<0||h>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(S===w.FLOAT&&!w.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=y(w);return w.texImage2D(w.TEXTURE_2D,0,E,h,L,0,E,S,null),new d(w,F,h,L,E,S)}function A(w,h,L,E,S,P){var F=y(w);return w.texImage2D(w.TEXTURE_2D,0,S,S,P,h),new d(w,F,L,E,S,P)}function _(w,h){var L=h.dtype,E=h.shape.slice(),S=w.getParameter(w.MAX_TEXTURE_SIZE);if(E[0]<0||E[0]>S||E[1]<0||E[1]>S)throw new Error("gl-texture2d: Invalid texture size");var P=m(E,h.stride.slice()),F=0;L==="float32"?F=w.FLOAT:L==="float64"?(F=w.FLOAT,P=!1,L="float32"):L==="uint8"?F=w.UNSIGNED_BYTE:(F=w.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(E.length===2)I=w.LUMINANCE,E=[E[0],E[1],1],h=e(h.data,E,[h.stride[0],h.stride[1],1],h.offset);else if(E.length===3)if(E[2]===1)I=w.ALPHA;else if(E[2]===2)I=w.LUMINANCE_ALPHA;else if(E[2]===3)I=w.RGB;else if(E[2]===4)I=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===w.FLOAT&&!w.getExtension("OES_texture_float")&&(F=w.UNSIGNED_BYTE,P=!1);var D,R,O=h.size;if(P)h.offset===0&&h.data.length===O?D=h.data:D=h.data.subarray(h.offset,h.offset+O);else{var z=[E[2],E[2]*E[0],1];R=i.malloc(O,L);var H=e(R,E,z,0);(L==="float32"||L==="float64")&&F===w.UNSIGNED_BYTE?b(H,h):a.assign(H,h),D=R.subarray(0,O)}var Y=y(w);return w.texImage2D(w.TEXTURE_2D,0,I,E[0],E[1],0,I,F,D),P||i.free(R),new d(w,Y,E[0],E[1],I,F)}function p(w){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(n||s(w),typeof arguments[1]=="number")return u(w,arguments[1],arguments[2],arguments[3]||w.RGBA,arguments[4]||w.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return u(w,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],L=o(h)?h:h.raw;if(L)return A(w,L,h.width|0,h.height|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return _(w,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(f,M,T){function e(a,i,n){i?i.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var r=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var v=0;v<n.length;++v){var s=n[v];if(s.buffer){var o=s.buffer,b=s.size||4,g=s.type||a.FLOAT,d=!!s.normalized,c=s.stride||0,m=s.offset||0;o.bind(),a.enableVertexAttribArray(v),a.vertexAttribPointer(v,b,g,d,c,m)}else{if(typeof s=="number")a.vertexAttrib1f(v,s);else if(s.length===1)a.vertexAttrib1f(v,s[0]);else if(s.length===2)a.vertexAttrib2f(v,s[0],s[1]);else if(s.length===3)a.vertexAttrib3f(v,s[0],s[1],s[2]);else if(s.length===4)a.vertexAttrib4f(v,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(v)}}for(;v<r;++v)a.disableVertexAttribArray(v)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var v=0;v<r;++v)a.disableVertexAttribArray(v)}}M.exports=e},{}],148:[function(f,M,T){var e=f("./do-bind.js");function a(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(n,r,v){this._elements=r,this._attributes=n,this._elementsType=v||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(n,r,v){v=v||0;var s=this.gl;this._elements?s.drawElements(n,r,this._elementsType,v):s.drawArrays(n,v,r)};function i(n){return new a(n)}M.exports=i},{"./do-bind.js":147}],149:[function(f,M,T){var e=f("./do-bind.js");function a(r,v,s,o,b,g){this.location=r,this.dimension=v,this.a=s,this.b=o,this.c=b,this.d=g}a.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(r,v,s){this.gl=r,this._ext=v,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(r,v,s){if(this.bind(),e(this.gl,v,r),this.unbind(),this._attribs.length=0,r)for(var o=0;o<r.length;++o){var b=r[o];typeof b=="number"?this._attribs.push(new a(o,1,b)):Array.isArray(b)&&this._attribs.push(new a(o,b.length,b[0],b[1],b[2],b[3]))}this._useElements=!!v,this._elementsType=s||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(r,v,s){s=s||0;var o=this.gl;this._useElements?o.drawElements(r,v,this._elementsType,s):o.drawArrays(r,s,v)};function n(r,v){return new i(r,v,v.createVertexArrayOES())}M.exports=n},{"./do-bind.js":147}],150:[function(f,M,T){var e=f("./lib/vao-native.js"),a=f("./lib/vao-emulated.js");function i(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function n(r,v,s,o){var b=r.createVertexArray?new i(r):r.getExtension("OES_vertex_array_object"),g;return b?g=e(r,b):g=a(r),g.update(v,s,o),g}M.exports=n},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a}},{}],152:[function(f,M,T){M.exports=n;var e=f("./fromValues"),a=f("./normalize"),i=f("./dot");function n(r,v){var s=e(r[0],r[1],r[2]),o=e(v[0],v[1],v[2]);a(s,s),a(o,o);var b=i(s,o);return b>1?0:Math.acos(b)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=Math.ceil(i[0]),a[1]=Math.ceil(i[1]),a[2]=Math.ceil(i[2]),a}},{}],154:[function(f,M,T){M.exports=e;function e(a){var i=new Float32Array(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],155:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],156:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return a[0]=v*g-s*b,a[1]=s*o-r*g,a[2]=r*b-v*o,a}},{}],158:[function(f,M,T){M.exports=f("./distance")},{"./distance":159}],159:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return Math.sqrt(n*n+r*r+v*v)}},{}],160:[function(f,M,T){M.exports=f("./divide")},{"./divide":161}],161:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a}},{}],162:[function(f,M,T){M.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}},{}],163:[function(f,M,T){M.exports=1e-6},{}],164:[function(f,M,T){M.exports=a;var e=f("./epsilon");function a(i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return Math.abs(r-o)<=e*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(v-b)<=e*Math.max(1,Math.abs(v),Math.abs(b))&&Math.abs(s-g)<=e*Math.max(1,Math.abs(s),Math.abs(g))}},{"./epsilon":163}],165:[function(f,M,T){M.exports=e;function e(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]}},{}],166:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=Math.floor(i[0]),a[1]=Math.floor(i[1]),a[2]=Math.floor(i[2]),a}},{}],167:[function(f,M,T){M.exports=a;var e=f("./create")();function a(i,n,r,v,s,o){var b,g;for(n||(n=3),r||(r=0),v?g=Math.min(v*n+r,i.length):g=i.length,b=r;b<g;b+=n)e[0]=i[b],e[1]=i[b+1],e[2]=i[b+2],s(e,e,o),i[b]=e[0],i[b+1]=e[1],i[b+2]=e[2];return i}},{"./create":156}],168:[function(f,M,T){M.exports=e;function e(a,i,n){var r=new Float32Array(3);return r[0]=a,r[1]=i,r[2]=n,r}},{}],169:[function(f,M,T){M.exports={EPSILON:f("./epsilon"),create:f("./create"),clone:f("./clone"),angle:f("./angle"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),equals:f("./equals"),exactEquals:f("./exactEquals"),add:f("./add"),subtract:f("./subtract"),sub:f("./sub"),multiply:f("./multiply"),mul:f("./mul"),divide:f("./divide"),div:f("./div"),min:f("./min"),max:f("./max"),floor:f("./floor"),ceil:f("./ceil"),round:f("./round"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),dist:f("./dist"),squaredDistance:f("./squaredDistance"),sqrDist:f("./sqrDist"),length:f("./length"),len:f("./len"),squaredLength:f("./squaredLength"),sqrLen:f("./sqrLen"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),cross:f("./cross"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformMat3:f("./transformMat3"),transformQuat:f("./transformQuat"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),forEach:f("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a}},{}],171:[function(f,M,T){M.exports=f("./length")},{"./length":172}],172:[function(f,M,T){M.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return Math.sqrt(i*i+n*n+r*r)}},{}],173:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a}},{}],174:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a}},{}],175:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a}},{}],176:[function(f,M,T){M.exports=f("./multiply")},{"./multiply":177}],177:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a}},{}],178:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a}},{}],179:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=n*n+r*r+v*v;return s>0&&(s=1/Math.sqrt(s),a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s),a}},{}],180:[function(f,M,T){M.exports=e;function e(a,i){i=i||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,v=Math.sqrt(1-r*r)*i;return a[0]=Math.cos(n)*v,a[1]=Math.sin(n)*v,a[2]=r*i,a}},{}],181:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=n[1],s=n[2],o=i[1]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=i[0],a[1]=v+o*d-b*g,a[2]=s+o*g+b*d,a}},{}],182:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=n[0],s=n[2],o=i[0]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+b*g+o*d,a[1]=i[1],a[2]=s+b*d-o*g,a}},{}],183:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=n[0],s=n[1],o=i[0]-v,b=i[1]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+o*d-b*g,a[1]=s+o*g+b*d,a[2]=i[2],a}},{}],184:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=Math.round(i[0]),a[1]=Math.round(i[1]),a[2]=Math.round(i[2]),a}},{}],185:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a}},{}],186:[function(f,M,T){M.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a}},{}],187:[function(f,M,T){M.exports=e;function e(a,i,n,r){return a[0]=i,a[1]=n,a[2]=r,a}},{}],188:[function(f,M,T){M.exports=f("./squaredDistance")},{"./squaredDistance":190}],189:[function(f,M,T){M.exports=f("./squaredLength")},{"./squaredLength":191}],190:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return n*n+r*r+v*v}},{}],191:[function(f,M,T){M.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return i*i+n*n+r*r}},{}],192:[function(f,M,T){M.exports=f("./subtract")},{"./subtract":193}],193:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a}},{}],194:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2];return a[0]=r*n[0]+v*n[3]+s*n[6],a[1]=r*n[1]+v*n[4]+s*n[7],a[2]=r*n[2]+v*n[5]+s*n[8],a}},{}],195:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[3]*r+n[7]*v+n[11]*s+n[15];return o=o||1,a[0]=(n[0]*r+n[4]*v+n[8]*s+n[12])/o,a[1]=(n[1]*r+n[5]*v+n[9]*s+n[13])/o,a[2]=(n[2]*r+n[6]*v+n[10]*s+n[14])/o,a}},{}],196:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],c=d*r+b*s-g*v,m=d*v+g*r-o*s,l=d*s+o*v-b*r,y=-o*r-b*v-g*s;return a[0]=c*d+y*-o+m*-g-l*-b,a[1]=m*d+y*-b+l*-o-c*-g,a[2]=l*d+y*-g+c*-b-m*-o,a}},{}],197:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a[3]=i[3]+n[3],a}},{}],198:[function(f,M,T){M.exports=e;function e(a){var i=new Float32Array(4);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],199:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],200:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return Math.sqrt(n*n+r*r+v*v+s*s)}},{}],202:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a[3]=i[3]/n[3],a}},{}],203:[function(f,M,T){M.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]}},{}],204:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=new Float32Array(4);return v[0]=a,v[1]=i,v[2]=n,v[3]=r,v}},{}],205:[function(f,M,T){M.exports={create:f("./create"),clone:f("./clone"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),add:f("./add"),subtract:f("./subtract"),multiply:f("./multiply"),divide:f("./divide"),min:f("./min"),max:f("./max"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),squaredDistance:f("./squaredDistance"),length:f("./length"),squaredLength:f("./squaredLength"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformQuat:f("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a[3]=1/i[3],a}},{}],207:[function(f,M,T){M.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return Math.sqrt(i*i+n*n+r*r+v*v)}},{}],208:[function(f,M,T){M.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a[3]=b+r*(n[3]-b),a}},{}],209:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a[3]=Math.max(i[3],n[3]),a}},{}],210:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a[3]=Math.min(i[3],n[3]),a}},{}],211:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a[3]=i[3]*n[3],a}},{}],212:[function(f,M,T){M.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=-i[3],a}},{}],213:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n*n+r*r+v*v+s*s;return o>0&&(o=1/Math.sqrt(o),a[0]=n*o,a[1]=r*o,a[2]=v*o,a[3]=s*o),a}},{}],214:[function(f,M,T){var e=f("./normalize"),a=f("./scale");M.exports=i;function i(n,r){return r=r||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),a(n,n,r),n}},{"./normalize":213,"./scale":215}],215:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a[3]=i[3]*n,a}},{}],216:[function(f,M,T){M.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a[3]=i[3]+n[3]*r,a}},{}],217:[function(f,M,T){M.exports=e;function e(a,i,n,r,v){return a[0]=i,a[1]=n,a[2]=r,a[3]=v,a}},{}],218:[function(f,M,T){M.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return n*n+r*r+v*v+s*s}},{}],219:[function(f,M,T){M.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return i*i+n*n+r*r+v*v}},{}],220:[function(f,M,T){M.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a[3]=i[3]-n[3],a}},{}],221:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3];return a[0]=n[0]*r+n[4]*v+n[8]*s+n[12]*o,a[1]=n[1]*r+n[5]*v+n[9]*s+n[13]*o,a[2]=n[2]*r+n[6]*v+n[10]*s+n[14]*o,a[3]=n[3]*r+n[7]*v+n[11]*s+n[15]*o,a}},{}],222:[function(f,M,T){M.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],c=d*r+b*s-g*v,m=d*v+g*r-o*s,l=d*s+o*v-b*r,y=-o*r-b*v-g*s;return a[0]=c*d+y*-o+m*-g-l*-b,a[1]=m*d+y*-b+l*-o-c*-g,a[2]=l*d+y*-g+c*-b-m*-o,a[3]=i[3],a}},{}],223:[function(f,M,T){var e=f("glsl-tokenizer"),a=f("atob-lite");M.exports=i;function i(n){for(var r=Array.isArray(n)?n:e(n),v=0;v<r.length;v++){var s=r[v];if(s.type==="preprocessor"){var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var b=o[1],g=o[2];return(b?a(g):g).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(f,M,T){M.exports=h;var e=f("./lib/literals"),a=f("./lib/operators"),i=f("./lib/builtins"),n=f("./lib/literals-300es"),r=f("./lib/builtins-300es"),v=999,s=9999,o=0,b=1,g=2,d=3,c=4,m=5,l=6,y=7,u=8,A=9,_=10,p=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function h(L){var E=0,S=0,P=v,F,I,D=[],R=[],O=1,z=0,H=0,Y=!1,ee=!1,j="",X;L=L||{};var ae=i,fe=e;L.version==="300 es"&&(ae=r,fe=n);for(var K={},J={},E=0;E<ae.length;E++)K[ae[E]]=!0;for(var E=0;E<fe.length;E++)J[fe[E]]=!0;return function(ye){return R=[],ye!==null?V(ye):q()};function U(ye){ye.length&&R.push({type:w[P],data:ye,position:H,line:O,column:z})}function V(ye){E=0,ye.toString&&(ye=ye.toString()),j+=ye.replace(/\r\n/g,`
`),X=j.length;for(var be;F=j[E],E<X;){switch(be=E,P){case o:E=oe();break;case b:E=ie();break;case g:E=Q();break;case d:E=ne();break;case c:E=ue();break;case p:E=_e();break;case m:E=ge();break;case s:E=xe();break;case A:E=Z();break;case v:E=re();break}if(be!==E)switch(j[be]){case`
`:z=0,++O;break;default:++z;break}}return S+=E,j=j.slice(E),R}function q(ye){return D.length&&U(D.join("")),P=_,U("(eof)"),R}function re(){return D=D.length?[]:D,I==="/"&&F==="*"?(H=S+E-1,P=o,I=F,E+1):I==="/"&&F==="/"?(H=S+E-1,P=b,I=F,E+1):F==="#"?(P=g,H=S+E,E):/\s/.test(F)?(P=A,H=S+E,E):(Y=/\d/.test(F),ee=/[^\w_]/.test(F),H=S+E,P=Y?c:ee?d:s,E)}function Z(){return/[^\s]/g.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function Q(){return(F==="\r"||F===`
`)&&I!=="\\"?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function ie(){return Q()}function oe(){return F==="/"&&I==="*"?(D.push(F),U(D.join("")),P=v,E+1):(D.push(F),I=F,E+1)}function ne(){if(I==="."&&/\d/.test(F))return P=m,E;if(I==="/"&&F==="*")return P=o,E;if(I==="/"&&F==="/")return P=b,E;if(F==="."&&D.length){for(;se(D););return P=m,E}if(F===";"||F===")"||F==="("){if(D.length)for(;se(D););return U(F),P=v,E+1}var ye=D.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||ye){for(;se(D););return P=v,E}return D.push(F),I=F,E+1}function se(ye){var be=0,Se,Re;do{if(Se=a.indexOf(ye.slice(0,ye.length+be).join("")),Re=a[Se],Se===-1){if(be--+ye.length>0)continue;Re=ye.slice(0,1).join("")}return U(Re),H+=Re.length,D=D.slice(Re.length),D.length}while(1)}function _e(){return/[^a-fA-F0-9]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function ue(){return F==="."||/[eE]/.test(F)?(D.push(F),P=m,I=F,E+1):F==="x"&&D.length===1&&D[0]==="0"?(P=p,D.push(F),I=F,E+1):/[^\d]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function ge(){return F==="f"&&(D.push(F),I=F,E+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(I)?(D.push(F),I=F,E+1):/[^\d]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function xe(){if(/[^\d\w_]/.test(F)){var ye=D.join("");return J[ye]?P=u:K[ye]?P=y:P=l,U(D.join("")),P=v,E}return D.push(F),I=F,E+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(f,M,T){var e=f("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),M.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(f,M,T){M.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(f,M,T){var e=f("./literals");M.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(f,M,T){M.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(f,M,T){M.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(f,M,T){var e=f("./index");M.exports=a;function a(i,n){var r=e(n),v=[];return v=v.concat(r(i)),v=v.concat(r(null)),v}},{"./index":224}],231:[function(f,M,T){M.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),i=[],n=0;n<e.length-1;n++)i.push(e[n],a[n]||"");return i.push(e[n]),i.join("")}},{}],232:[function(f,M,T){var e=f("is-browser");function a(){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{i=!1}return i}M.exports=e&&a()},{"is-browser":236}],233:[function(f,M,T){M.exports=d;var e=f("robust-orientation"),a=f("simplicial-complex").compareCells;function i(c,m,l){this.vertices=c,this.adjacent=m,this.boundary=l,this.lastVisited=-1}i.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};function n(c,m,l){this.vertices=c,this.cell=m,this.index=l}function r(c,m){return a(c.vertices,m.vertices)}function v(c){return function(){var m=this.tuple;return c.apply(this,m)}}function s(c){var m=e[c+1];return m||(m=e),v(m)}var o=[];function b(c,m,l){this.dimension=c,this.vertices=m,this.simplices=l,this.interior=l.filter(function(A){return!A.boundary}),this.tuple=new Array(c+1);for(var y=0;y<=c;++y)this.tuple[y]=this.vertices[y];var u=o[c];u||(u=o[c]=s(c)),this.orient=u}var g=b.prototype;g.handleBoundaryDegeneracy=function(c,m){var l=this.dimension,y=this.vertices.length-1,u=this.tuple,A=this.vertices,_=[c];for(c.lastVisited=-y;_.length>0;){c=_.pop();for(var p=c.adjacent,w=0;w<=l;++w){var h=p[w];if(!(!h.boundary||h.lastVisited<=-y)){for(var L=h.vertices,E=0;E<=l;++E){var S=L[E];S<0?u[E]=m:u[E]=A[S]}var P=this.orient();if(P>0)return h;h.lastVisited=-y,P===0&&_.push(h)}}}return null},g.walk=function(c,m){var l=this.vertices.length-1,y=this.dimension,u=this.vertices,A=this.tuple,_=m?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[_];e:for(;!p.boundary;){for(var w=p.vertices,h=p.adjacent,L=0;L<=y;++L)A[L]=u[w[L]];p.lastVisited=l;for(var L=0;L<=y;++L){var E=h[L];if(!(E.lastVisited>=l)){var S=A[L];A[L]=c;var P=this.orient();if(A[L]=S,P<0){p=E;continue e}else E.boundary?E.lastVisited=-l:E.lastVisited=l}}return}return p},g.addPeaks=function(c,m){var l=this.vertices.length-1,y=this.dimension,u=this.vertices,A=this.tuple,_=this.interior,p=this.simplices,w=[m];m.lastVisited=l,m.vertices[m.vertices.indexOf(-1)]=l,m.boundary=!1,_.push(m);for(var h=[];w.length>0;){var m=w.pop(),L=m.vertices,E=m.adjacent,S=L.indexOf(l);if(!(S<0)){for(var P=0;P<=y;++P)if(P!==S){var F=E[P];if(!(!F.boundary||F.lastVisited>=l)){var I=F.vertices;if(F.lastVisited!==-l){for(var D=0,R=0;R<=y;++R)I[R]<0?(D=R,A[R]=c):A[R]=u[I[R]];var O=this.orient();if(O>0){I[D]=l,F.boundary=!1,_.push(F),w.push(F),F.lastVisited=l;continue}else F.lastVisited=-l}var z=F.adjacent,H=L.slice(),Y=E.slice(),ee=new i(H,Y,!0);p.push(ee);var j=z.indexOf(m);if(!(j<0)){z[j]=ee,Y[S]=F,H[P]=-1,Y[P]=m,E[P]=ee,ee.flip();for(var R=0;R<=y;++R){var X=H[R];if(!(X<0||X===l)){for(var ae=new Array(y-1),fe=0,K=0;K<=y;++K){var J=H[K];J<0||K===R||(ae[fe++]=J)}h.push(new n(ae,ee,R))}}}}}}}h.sort(r);for(var P=0;P+1<h.length;P+=2){var U=h[P],V=h[P+1],q=U.index,re=V.index;q<0||re<0||(U.cell.adjacent[U.index]=V.cell,V.cell.adjacent[V.index]=U.cell)}},g.insert=function(c,m){var l=this.vertices;l.push(c);var y=this.walk(c,m);if(!!y){for(var u=this.dimension,A=this.tuple,_=0;_<=u;++_){var p=y.vertices[_];p<0?A[_]=c:A[_]=l[p]}var w=this.orient(A);w<0||w===0&&(y=this.handleBoundaryDegeneracy(y,c),!y)||this.addPeaks(c,y)}},g.boundary=function(){for(var c=this.dimension,m=[],l=this.simplices,y=l.length,u=0;u<y;++u){var A=l[u];if(A.boundary){for(var _=new Array(c),p=A.vertices,w=0,h=0,L=0;L<=c;++L)p[L]>=0?_[w++]=p[L]:h=L&1;if(h===(c&1)){var E=_[0];_[0]=_[1],_[1]=E}m.push(_)}}return m};function d(c,m){var l=c.length;if(l===0)throw new Error("Must have at least d+1 points");var y=c[0].length;if(l<=y)throw new Error("Must input at least d+1 points");var u=c.slice(0,y+1),A=e.apply(void 0,u);if(A===0)throw new Error("Input not in general position");for(var _=new Array(y+1),p=0;p<=y;++p)_[p]=p;A<0&&(_[0]=1,_[1]=0);for(var w=new i(_,new Array(y+1),!1),h=w.adjacent,L=new Array(y+2),p=0;p<=y;++p){for(var E=_.slice(),S=0;S<=y;++S)S===p&&(E[S]=-1);var P=E[0];E[0]=E[1],E[1]=P;var F=new i(E,new Array(y+1),!0);h[p]=F,L[p]=F}L[y+1]=w;for(var p=0;p<=y;++p)for(var E=h[p].vertices,I=h[p].adjacent,S=0;S<=y;++S){var D=E[S];if(D<0){I[S]=w;continue}for(var R=0;R<=y;++R)h[R].vertices.indexOf(D)<0&&(I[S]=h[R])}for(var O=new b(y,u,L),z=!!m,p=y+1;p<l;++p)O.insert(c[p],z);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(f,M,T){var e=f("binary-search-bounds"),a=0,i=1,n=2;M.exports=w;function r(h,L,E,S,P){this.mid=h,this.left=L,this.right=E,this.leftPoints=S,this.rightPoints=P,this.count=(L?L.count:0)+(E?E.count:0)+S.length}var v=r.prototype;function s(h,L){h.mid=L.mid,h.left=L.left,h.right=L.right,h.leftPoints=L.leftPoints,h.rightPoints=L.rightPoints,h.count=L.count}function o(h,L){var E=A(L);h.mid=E.mid,h.left=E.left,h.right=E.right,h.leftPoints=E.leftPoints,h.rightPoints=E.rightPoints,h.count=E.count}function b(h,L){var E=h.intervals([]);E.push(L),o(h,E)}function g(h,L){var E=h.intervals([]),S=E.indexOf(L);return S<0?a:(E.splice(S,1),o(h,E),i)}v.intervals=function(h){return h.push.apply(h,this.leftPoints),this.left&&this.left.intervals(h),this.right&&this.right.intervals(h),h},v.insert=function(h){var L=this.count-this.leftPoints.length;if(this.count+=1,h[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?b(this,h):this.left.insert(h):this.left=A([h]);else if(h[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?b(this,h):this.right.insert(h):this.right=A([h]);else{var E=e.ge(this.leftPoints,h,y),S=e.ge(this.rightPoints,h,u);this.leftPoints.splice(E,0,h),this.rightPoints.splice(S,0,h)}},v.remove=function(h){var L=this.count-this.leftPoints;if(h[1]<this.mid){if(!this.left)return a;var E=this.right?this.right.count:0;if(4*E>3*(L-1))return g(this,h);var S=this.left.remove(h);return S===n?(this.left=null,this.count-=1,i):(S===i&&(this.count-=1),S)}else if(h[0]>this.mid){if(!this.right)return a;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return g(this,h);var S=this.right.remove(h);return S===n?(this.right=null,this.count-=1,i):(S===i&&(this.count-=1),S)}else{if(this.count===1)return this.leftPoints[0]===h?n:a;if(this.leftPoints.length===1&&this.leftPoints[0]===h){if(this.left&&this.right){for(var F=this,I=this.left;I.right;)F=I,I=I.right;if(F===this)I.right=this.right;else{var D=this.left,S=this.right;F.count-=I.count,F.right=I.left,I.left=D,I.right=S}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return i}for(var D=e.ge(this.leftPoints,h,y);D<this.leftPoints.length&&this.leftPoints[D][0]===h[0];++D)if(this.leftPoints[D]===h){this.count-=1,this.leftPoints.splice(D,1);for(var S=e.ge(this.rightPoints,h,u);S<this.rightPoints.length&&this.rightPoints[S][1]===h[1];++S)if(this.rightPoints[S]===h)return this.rightPoints.splice(S,1),i}return a}};function d(h,L,E){for(var S=0;S<h.length&&h[S][0]<=L;++S){var P=E(h[S]);if(P)return P}}function c(h,L,E){for(var S=h.length-1;S>=0&&h[S][1]>=L;--S){var P=E(h[S]);if(P)return P}}function m(h,L){for(var E=0;E<h.length;++E){var S=L(h[E]);if(S)return S}}v.queryPoint=function(h,L){if(h<this.mid){if(this.left){var E=this.left.queryPoint(h,L);if(E)return E}return d(this.leftPoints,h,L)}else if(h>this.mid){if(this.right){var E=this.right.queryPoint(h,L);if(E)return E}return c(this.rightPoints,h,L)}else return m(this.leftPoints,L)},v.queryInterval=function(h,L,E){if(h<this.mid&&this.left){var S=this.left.queryInterval(h,L,E);if(S)return S}if(L>this.mid&&this.right){var S=this.right.queryInterval(h,L,E);if(S)return S}return L<this.mid?d(this.leftPoints,L,E):h>this.mid?c(this.rightPoints,h,E):m(this.leftPoints,E)};function l(h,L){return h-L}function y(h,L){var E=h[0]-L[0];return E||h[1]-L[1]}function u(h,L){var E=h[1]-L[1];return E||h[0]-L[0]}function A(h){if(h.length===0)return null;for(var L=[],E=0;E<h.length;++E)L.push(h[E][0],h[E][1]);L.sort(l);for(var S=L[L.length>>1],P=[],F=[],I=[],E=0;E<h.length;++E){var D=h[E];D[1]<S?P.push(D):S<D[0]?F.push(D):I.push(D)}var R=I,O=I.slice();return R.sort(y),O.sort(u),new r(S,A(P),A(F),R,O)}function _(h){this.root=h}var p=_.prototype;p.insert=function(h){this.root?this.root.insert(h):this.root=new r(h[0],null,null,[h],[h])},p.remove=function(h){if(this.root){var L=this.root.remove(h);return L===n&&(this.root=null),L!==a}return!1},p.queryPoint=function(h,L){if(this.root)return this.root.queryPoint(h,L)},p.queryInterval=function(h,L,E){if(h<=L&&this.root)return this.root.queryInterval(h,L,E)},Object.defineProperty(p,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(p,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(h){return!h||h.length===0?new _(null):new _(A(h))}},{"binary-search-bounds":31}],235:[function(f,M,T){function e(a){for(var i=new Array(a),n=0;n<a;++n)i[n]=n;return i}M.exports=e},{}],236:[function(f,M,T){M.exports=!0},{}],237:[function(f,M,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */M.exports=function(i){return i!=null&&(e(i)||a(i)||!!i._isBuffer)};function e(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function a(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&e(i.slice(0,0))}},{}],238:[function(f,M,T){M.exports=i,M.exports.isMobile=i,M.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(n){n||(n={});var r=n.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var v=n.tablet?a.test(r):e.test(r);return!v&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(v=!0),v}},{}],239:[function(f,M,T){M.exports=function(e){for(var a=e.length,i,n=0;n<a;n++)if(i=e.charCodeAt(n),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},{}],240:[function(f,M,T){function e(a,i,n){return a*(1-n)+i*n}M.exports=e},{}],241:[function(f,M,T){var e=f("./normalize"),a=f("gl-mat4/create"),i=f("gl-mat4/clone"),n=f("gl-mat4/determinant"),r=f("gl-mat4/invert"),v=f("gl-mat4/transpose"),s={length:f("gl-vec3/length"),normalize:f("gl-vec3/normalize"),dot:f("gl-vec3/dot"),cross:f("gl-vec3/cross")},o=a(),b=a(),g=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];M.exports=function(A,_,p,w,h,L){if(_||(_=[0,0,0]),p||(p=[0,0,0]),w||(w=[0,0,0]),h||(h=[0,0,0,1]),L||(L=[0,0,0,1]),!e(o,A)||(i(b,o),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(n(b)<1e-8)))return!1;var E=o[3],S=o[7],P=o[11],F=o[12],I=o[13],D=o[14],R=o[15];if(E!==0||S!==0||P!==0){g[0]=E,g[1]=S,g[2]=P,g[3]=R;var O=r(b,b);if(!O)return!1;v(b,b),m(h,g,b)}else h[0]=h[1]=h[2]=0,h[3]=1;if(_[0]=F,_[1]=I,_[2]=D,l(d,o),p[0]=s.length(d[0]),s.normalize(d[0],d[0]),w[0]=s.dot(d[0],d[1]),y(d[1],d[1],d[0],1,-w[0]),p[1]=s.length(d[1]),s.normalize(d[1],d[1]),w[0]/=p[1],w[1]=s.dot(d[0],d[2]),y(d[2],d[2],d[0],1,-w[1]),w[2]=s.dot(d[1],d[2]),y(d[2],d[2],d[1],1,-w[2]),p[2]=s.length(d[2]),s.normalize(d[2],d[2]),w[1]/=p[2],w[2]/=p[2],s.cross(c,d[1],d[2]),s.dot(d[0],c)<0)for(var z=0;z<3;z++)p[z]*=-1,d[z][0]*=-1,d[z][1]*=-1,d[z][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function m(u,A,_){var p=A[0],w=A[1],h=A[2],L=A[3];return u[0]=_[0]*p+_[4]*w+_[8]*h+_[12]*L,u[1]=_[1]*p+_[5]*w+_[9]*h+_[13]*L,u[2]=_[2]*p+_[6]*w+_[10]*h+_[14]*L,u[3]=_[3]*p+_[7]*w+_[11]*h+_[15]*L,u}function l(u,A){u[0][0]=A[0],u[0][1]=A[1],u[0][2]=A[2],u[1][0]=A[4],u[1][1]=A[5],u[1][2]=A[6],u[2][0]=A[8],u[2][1]=A[9],u[2][2]=A[10]}function y(u,A,_,p,w){u[0]=A[0]*p+_[0]*w,u[1]=A[1]*p+_[1]*w,u[2]=A[2]*p+_[2]*w}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(f,M,T){M.exports=function(a,i){var n=i[15];if(n===0)return!1;for(var r=1/n,v=0;v<16;v++)a[v]=i[v]*r;return!0}},{}],243:[function(f,M,T){var e=f("gl-vec3/lerp"),a=f("mat4-recompose"),i=f("mat4-decompose"),n=f("gl-mat4/determinant"),r=f("quat-slerp"),v=g(),s=g(),o=g();M.exports=b;function b(m,l,y,u){if(n(l)===0||n(y)===0)return!1;var A=i(l,v.translate,v.scale,v.skew,v.perspective,v.quaternion),_=i(y,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!A||!_?!1:(e(o.translate,v.translate,s.translate,u),e(o.skew,v.skew,s.skew,u),e(o.scale,v.scale,s.scale,u),e(o.perspective,v.perspective,s.perspective,u),r(o.quaternion,v.quaternion,s.quaternion,u),a(m,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function g(){return{translate:d(),scale:d(1),skew:d(),perspective:c(),quaternion:c()}}function d(m){return[m||0,m||0,m||0]}function c(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(f,M,T){var e={identity:f("gl-mat4/identity"),translate:f("gl-mat4/translate"),multiply:f("gl-mat4/multiply"),create:f("gl-mat4/create"),scale:f("gl-mat4/scale"),fromRotationTranslation:f("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();M.exports=function(n,r,v,s,o,b){return e.identity(n),e.fromRotationTranslation(n,b,r),n[3]=o[0],n[7]=o[1],n[11]=o[2],n[15]=o[3],e.identity(a),s[2]!==0&&(a[9]=s[2],e.multiply(n,n,a)),s[1]!==0&&(a[9]=0,a[8]=s[1],e.multiply(n,n,a)),s[0]!==0&&(a[8]=0,a[4]=s[0],e.multiply(n,n,a)),e.scale(n,n,v),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(f,M,T){var e=f("binary-search-bounds"),a=f("mat4-interpolate"),i=f("gl-mat4/invert"),n=f("gl-mat4/rotateX"),r=f("gl-mat4/rotateY"),v=f("gl-mat4/rotateZ"),s=f("gl-mat4/lookAt"),o=f("gl-mat4/translate");f("gl-mat4/scale");var b=f("gl-vec3/normalize"),g=[0,0,0];M.exports=l;function d(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var c=d.prototype;c.recalcMatrix=function(y){var u=this._time,A=e.le(u,y),_=this.computedMatrix;if(!(A<0)){var p=this._components;if(A===u.length-1)for(var w=16*A,h=0;h<16;++h)_[h]=p[w++];else{for(var L=u[A+1]-u[A],w=16*A,E=this.prevMatrix,S=!0,h=0;h<16;++h)E[h]=p[w++];for(var P=this.nextMatrix,h=0;h<16;++h)P[h]=p[w++],S=S&&E[h]===P[h];if(L<1e-6||S)for(var h=0;h<16;++h)_[h]=E[h];else a(_,E,P,(y-u[A])/L)}var F=this.computedUp;F[0]=_[1],F[1]=_[5],F[2]=_[9],b(F,F);var I=this.computedInverse;i(I,_);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var O=this.computedCenter,z=Math.exp(this.computedRadius[0]),h=0;h<3;++h)O[h]=D[h]-_[2+4*h]*z}},c.idle=function(y){if(!(y<this.lastT())){for(var u=this._components,A=u.length-16,_=0;_<16;++_)u.push(u[A++]);this._time.push(y)}},c.flush=function(y){var u=e.gt(this._time,y)-2;u<0||(this._time.splice(0,u),this._components.splice(0,16*u))},c.lastT=function(){return this._time[this._time.length-1]},c.lookAt=function(y,u,A,_){this.recalcMatrix(y),u=u||this.computedEye,A=A||g,_=_||this.computedUp,this.setMatrix(y,s(this.computedMatrix,u,A,_));for(var p=0,w=0;w<3;++w)p+=Math.pow(A[w]-u[w],2);p=Math.log(Math.sqrt(p)),this.computedRadius[0]=p},c.rotate=function(y,u,A,_){this.recalcMatrix(y);var p=this.computedInverse;u&&r(p,p,u),A&&n(p,p,A),_&&v(p,p,_),this.setMatrix(y,i(this.computedMatrix,p))};var m=[0,0,0];c.pan=function(y,u,A,_){m[0]=-(u||0),m[1]=-(A||0),m[2]=-(_||0),this.recalcMatrix(y);var p=this.computedInverse;o(p,p,m),this.setMatrix(y,i(p,p))},c.translate=function(y,u,A,_){m[0]=u||0,m[1]=A||0,m[2]=_||0,this.recalcMatrix(y);var p=this.computedMatrix;o(p,p,m),this.setMatrix(y,p)},c.setMatrix=function(y,u){if(!(y<this.lastT())){this._time.push(y);for(var A=0;A<16;++A)this._components.push(u[A])}},c.setDistance=function(y,u){this.computedRadius[0]=u},c.setDistanceLimits=function(y,u){var A=this._limits;A[0]=y,A[1]=u},c.getDistanceLimits=function(y){var u=this._limits;return y?(y[0]=u[0],y[1]=u[1],y):u};function l(y){y=y||{};var u=y.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(u)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(f,M,T){M.exports=a;var e=f("robust-orientation")[3];function a(i){var n=i.length;if(n<3){for(var c=new Array(n),r=0;r<n;++r)c[r]=r;return n===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:c}for(var v=new Array(n),r=0;r<n;++r)v[r]=r;v.sort(function(u,A){var _=i[u][0]-i[A][0];return _||i[u][1]-i[A][1]});for(var s=[v[0],v[1]],o=[v[0],v[1]],r=2;r<n;++r){for(var b=v[r],g=i[b],d=s.length;d>1&&e(i[s[d-2]],i[s[d-1]],g)<=0;)d-=1,s.pop();for(s.push(b),d=o.length;d>1&&e(i[o[d-2]],i[o[d-1]],g)>=0;)d-=1,o.pop();o.push(b)}for(var c=new Array(o.length+s.length-2),m=0,r=0,l=s.length;r<l;++r)c[m++]=s[r];for(var y=o.length-2;y>0;--y)c[m++]=o[y];return c}},{"robust-orientation":284}],247:[function(f,M,T){M.exports=a;var e=f("mouse-event");function a(i,n){n||(n=i,i=window);var r=0,v=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},b=!1;function g(h){var L=!1;return"altKey"in h&&(L=L||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(L=L||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(L=L||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(L=L||h.metaKey!==o.meta,o.meta=!!h.metaKey),L}function d(h,L){var E=e.x(L),S=e.y(L);"buttons"in L&&(h=L.buttons|0),(h!==r||E!==v||S!==s||g(L))&&(r=h|0,v=E||0,s=S||0,n&&n(r,v,s,o))}function c(h){d(0,h)}function m(){(r||v||s||o.shift||o.alt||o.meta||o.control)&&(v=s=0,r=0,o.shift=o.alt=o.control=o.meta=!1,n&&n(0,0,0,o))}function l(h){g(h)&&n&&n(r,v,s,o)}function y(h){e.buttons(h)===0?d(0,h):d(r,h)}function u(h){d(r|e.buttons(h),h)}function A(h){d(r&~e.buttons(h),h)}function _(){b||(b=!0,i.addEventListener("mousemove",y),i.addEventListener("mousedown",u),i.addEventListener("mouseup",A),i.addEventListener("mouseleave",c),i.addEventListener("mouseenter",c),i.addEventListener("mouseout",c),i.addEventListener("mouseover",c),i.addEventListener("blur",m),i.addEventListener("keyup",l),i.addEventListener("keydown",l),i.addEventListener("keypress",l),i!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function p(){!b||(b=!1,i.removeEventListener("mousemove",y),i.removeEventListener("mousedown",u),i.removeEventListener("mouseup",A),i.removeEventListener("mouseleave",c),i.removeEventListener("mouseenter",c),i.removeEventListener("mouseout",c),i.removeEventListener("mouseover",c),i.removeEventListener("blur",m),i.removeEventListener("keyup",l),i.removeEventListener("keydown",l),i.removeEventListener("keypress",l),i!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}_();var w={element:i};return Object.defineProperties(w,{enabled:{get:function(){return b},set:function(h){h?_():p()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),w}},{"mouse-event":249}],248:[function(f,M,T){var e={left:0,top:0};M.exports=a;function a(n,r,v){r=r||n.currentTarget||n.srcElement,Array.isArray(v)||(v=[0,0]);var s=n.clientX||0,o=n.clientY||0,b=i(r);return v[0]=s-b.left,v[1]=o-b.top,v}function i(n){return n===window||n===document||n===document.body?e:n.getBoundingClientRect()}},{}],249:[function(f,M,T){function e(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var v=r.which;if(v===2)return 4;if(v===3)return 2;if(v>0)return 1<<v-1}else if("button"in r){var v=r.button;if(v===1)return 4;if(v===2)return 2;if(v>=0)return 1<<v}}return 0}T.buttons=e;function a(r){return r.target||r.srcElement||window}T.element=a;function i(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var v=a(r),s=v.getBoundingClientRect();return r.clientX-s.left}return 0}T.x=i;function n(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var v=a(r),s=v.getBoundingClientRect();return r.clientY-s.top}return 0}T.y=n},{}],250:[function(f,M,T){var e=f("to-px");M.exports=a;function a(i,n,r){typeof i=="function"&&(r=!!n,n=i,i=window);var v=e("ex",i),s=function(o){r&&o.preventDefault();var b=o.deltaX||0,g=o.deltaY||0,d=o.deltaZ||0,c=o.deltaMode,m=1;switch(c){case 1:m=v;break;case 2:m=window.innerHeight;break}if(b*=m,g*=m,d*=m,b||g||d)return n(b,g,d,o)};return i.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(f,M,T){var e=f("typedarray-pool");M.exports=n;var a={"false,0,1":function(v,s,o,b,g){return function(c,m,l,y){var u=c.shape[0]|0,A=c.shape[1]|0,_=c.data,p=c.offset|0,w=c.stride[0]|0,h=c.stride[1]|0,L=p,E,S=-w|0,P=0,F=-h|0,I=0,D=-w-h|0,R=0,O=w|0,z=h-w*u|0,H=0,Y=0,ee=0,j=2*u|0,X=b(j),ae=b(j),fe=0,K=0,J=-1,U=-1,V=0,q=-u|0,re=u|0,Z=0,Q=-u-1|0,ie=u-1|0,oe=0,ne=0,se=0;for(H=0;H<u;++H)X[fe++]=o(_[L],m,l,y),L+=O;if(L+=z,A>0){if(Y=1,X[fe++]=o(_[L],m,l,y),L+=O,u>0)for(H=1,E=_[L],K=X[fe]=o(E,m,l,y),V=X[fe+J],Z=X[fe+q],oe=X[fe+Q],(K!==V||K!==Z||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,V,Z,oe,m,l,y),ne=ae[fe]=ee++),fe+=1,L+=O,H=2;H<u;++H)E=_[L],K=X[fe]=o(E,m,l,y),V=X[fe+J],Z=X[fe+q],oe=X[fe+Q],(K!==V||K!==Z||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,V,Z,oe,m,l,y),ne=ae[fe]=ee++,oe!==V&&s(ae[fe+J],ne,R,P,oe,V,m,l,y)),fe+=1,L+=O;for(L+=z,fe=0,se=J,J=U,U=se,se=q,q=re,re=se,se=Q,Q=ie,ie=se,Y=2;Y<A;++Y){if(X[fe++]=o(_[L],m,l,y),L+=O,u>0)for(H=1,E=_[L],K=X[fe]=o(E,m,l,y),V=X[fe+J],Z=X[fe+q],oe=X[fe+Q],(K!==V||K!==Z||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,V,Z,oe,m,l,y),ne=ae[fe]=ee++,oe!==Z&&s(ae[fe+q],ne,I,R,Z,oe,m,l,y)),fe+=1,L+=O,H=2;H<u;++H)E=_[L],K=X[fe]=o(E,m,l,y),V=X[fe+J],Z=X[fe+q],oe=X[fe+Q],(K!==V||K!==Z||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,V,Z,oe,m,l,y),ne=ae[fe]=ee++,oe!==Z&&s(ae[fe+q],ne,I,R,Z,oe,m,l,y),oe!==V&&s(ae[fe+J],ne,R,P,oe,V,m,l,y)),fe+=1,L+=O;Y&1&&(fe=0),se=J,J=U,U=se,se=q,q=re,re=se,se=Q,Q=ie,ie=se,L+=z}}g(ae),g(X)}},"false,1,0":function(v,s,o,b,g){return function(c,m,l,y){var u=c.shape[0]|0,A=c.shape[1]|0,_=c.data,p=c.offset|0,w=c.stride[0]|0,h=c.stride[1]|0,L=p,E,S=-w|0,P=0,F=-h|0,I=0,D=-w-h|0,R=0,O=h|0,z=w-h*A|0,H=0,Y=0,ee=0,j=2*A|0,X=b(j),ae=b(j),fe=0,K=0,J=-1,U=-1,V=0,q=-A|0,re=A|0,Z=0,Q=-A-1|0,ie=A-1|0,oe=0,ne=0,se=0;for(Y=0;Y<A;++Y)X[fe++]=o(_[L],m,l,y),L+=O;if(L+=z,u>0){if(H=1,X[fe++]=o(_[L],m,l,y),L+=O,A>0)for(Y=1,E=_[L],K=X[fe]=o(E,m,l,y),Z=X[fe+q],V=X[fe+J],oe=X[fe+Q],(K!==Z||K!==V||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,Z,V,oe,m,l,y),ne=ae[fe]=ee++),fe+=1,L+=O,Y=2;Y<A;++Y)E=_[L],K=X[fe]=o(E,m,l,y),Z=X[fe+q],V=X[fe+J],oe=X[fe+Q],(K!==Z||K!==V||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,Z,V,oe,m,l,y),ne=ae[fe]=ee++,oe!==V&&s(ae[fe+J],ne,I,R,V,oe,m,l,y)),fe+=1,L+=O;for(L+=z,fe=0,se=q,q=re,re=se,se=J,J=U,U=se,se=Q,Q=ie,ie=se,H=2;H<u;++H){if(X[fe++]=o(_[L],m,l,y),L+=O,A>0)for(Y=1,E=_[L],K=X[fe]=o(E,m,l,y),Z=X[fe+q],V=X[fe+J],oe=X[fe+Q],(K!==Z||K!==V||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,Z,V,oe,m,l,y),ne=ae[fe]=ee++,oe!==Z&&s(ae[fe+q],ne,R,P,oe,Z,m,l,y)),fe+=1,L+=O,Y=2;Y<A;++Y)E=_[L],K=X[fe]=o(E,m,l,y),Z=X[fe+q],V=X[fe+J],oe=X[fe+Q],(K!==Z||K!==V||K!==oe)&&(P=_[L+S],I=_[L+F],R=_[L+D],v(H,Y,E,P,I,R,K,Z,V,oe,m,l,y),ne=ae[fe]=ee++,oe!==V&&s(ae[fe+J],ne,I,R,V,oe,m,l,y),oe!==Z&&s(ae[fe+q],ne,R,P,oe,Z,m,l,y)),fe+=1,L+=O;H&1&&(fe=0),se=q,q=re,re=se,se=J,J=U,U=se,se=Q,Q=ie,ie=se,L+=z}}g(ae),g(X)}}};function i(r,v,s,o,b,g){var d=[g,b].join(","),c=a[d];return c(r,v,s,e.mallocUint32,e.freeUint32)}function n(r){function v(m){throw new Error("ndarray-extract-contour: "+m)}typeof r!="object"&&v("Must specify arguments");var s=r.order;Array.isArray(s)||v("Must specify order");var o=r.arrayArguments||1;o<1&&v("Must have at least one array argument");var b=r.scalarArguments||0;b<0&&v("Scalar arg count must be > 0"),typeof r.vertex!="function"&&v("Must specify vertex creation function"),typeof r.cell!="function"&&v("Must specify cell creation function"),typeof r.phase!="function"&&v("Must specify phase function");for(var g=r.getters||[],d=new Array(o),c=0;c<o;++c)g.indexOf(c)>=0?d[c]=!0:d[c]=!1;return i(r.vertex,r.cell,r.phase,b,s,d)}},{"typedarray-pool":308}],252:[function(f,M,T){var e=f("dup"),a={zero:function(l,y,u,A){var _=l[0],p=u[0];A|=0;var w=0,h=p;for(w=0;w<_;++w)y[A]=0,A+=h},fdTemplate1:function(l,y,u,A,_,p,w){var h=l[0],L=u[0],E=p[0],S=-1*L,P=L;A|=0,w|=0;var F=0,I=L,D=E;for(F=0;F<h;++F)_[w]=.5*(y[A+S]-y[A+P]),A+=I,w+=D},fdTemplate2:function(l,y,u,A,_,p,w,h,L,E){var S=l[0],P=l[1],F=u[0],I=u[1],D=p[0],R=p[1],O=L[0],z=L[1],H=-1*F,Y=F,ee=-1*I,j=I;A|=0,w|=0,E|=0;var X=0,ae=0,fe=I,K=F-P*I,J=R,U=D-P*R,V=z,q=O-P*z;for(ae=0;ae<S;++ae){for(X=0;X<P;++X)_[w]=.5*(y[A+H]-y[A+Y]),h[E]=.5*(y[A+ee]-y[A+j]),A+=fe,w+=J,E+=V;A+=K,w+=U,E+=q}}},i={cdiff:function(l){var y={};return function(A,_,p){var w=A.dtype,h=A.order,L=_.dtype,E=_.order,S=p.dtype,P=p.order,F=[w,h.join(),L,E.join(),S,P.join()].join(),I=y[F];return I||(y[F]=I=l([w,h,L,E,S,P])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0,p.data,p.stride,p.offset|0)}},zero:function(l){var y={};return function(A){var _=A.dtype,p=A.order,w=[_,p.join()].join(),h=y[w];return h||(y[w]=h=l([_,p])),h(A.shape.slice(0),A.data,A.stride,A.offset|0)}},fdTemplate1:function(l){var y={};return function(A,_){var p=A.dtype,w=A.order,h=_.dtype,L=_.order,E=[p,w.join(),h,L.join()].join(),S=y[E];return S||(y[E]=S=l([p,w,h,L])),S(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0)}},fdTemplate2:function(l){var y={};return function(A,_,p){var w=A.dtype,h=A.order,L=_.dtype,E=_.order,S=p.dtype,P=p.order,F=[w,h.join(),L,E.join(),S,P.join()].join(),I=y[F];return I||(y[F]=I=l([w,h,L,E,S,P])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0,p.data,p.stride,p.offset|0)}}};function n(l){var y=i[l.funcName];return y(r.bind(void 0,l))}function r(l){return a[l.funcName]}function v(l){return n({funcName:l.funcName})}var s={},o={},b=v({funcName:"cdiff"}),g=v({funcName:"zero"});function d(l){return l in s?s[l]:s[l]=v({funcName:"fdTemplate"+l})}function c(l,y,u,A){return function(_,p){var w=p.shape.slice();return w[0]>2&&w[1]>2&&A(p.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(u(p.pick(0,-1).lo(1).hi(w[1]-2),_.pick(0,-1,1).lo(1).hi(w[1]-2)),y(_.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(u(p.pick(w[0]-1,-1).lo(1).hi(w[1]-2),_.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),y(_.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(u(p.pick(-1,0).lo(1).hi(w[0]-2),_.pick(-1,0,0).lo(1).hi(w[0]-2)),y(_.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(u(p.pick(-1,w[1]-1).lo(1).hi(w[0]-2),_.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),y(_.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(w[0]-1,0,0,0),_.set(w[0]-1,0,1,0),_.set(0,w[1]-1,0,0),_.set(0,w[1]-1,1,0),_.set(w[0]-1,w[1]-1,0,0),_.set(w[0]-1,w[1]-1,1,0),_}}function m(l){var y=l.join(),w=o[y];if(w)return w;for(var u=l.length,A=[b,g],_=1;_<=u;++_)A.push(d(_));var p=c,w=p.apply(void 0,A);return o[y]=w,w}M.exports=function(y,u,A){if(Array.isArray(A)||(typeof A=="string"?A=e(u.dimension,A):A=e(u.dimension,"clamp")),u.size===0)return y;if(u.dimension===0)return y.set(0),y;var _=m(A);return _(y,u)}},{dup:65}],253:[function(f,M,T){function e(v,s){var o=Math.floor(s),b=s-o,g=0<=o&&o<v.shape[0],d=0<=o+1&&o+1<v.shape[0],c=g?+v.get(o):0,m=d?+v.get(o+1):0;return(1-b)*c+b*m}function a(v,s,o){var b=Math.floor(s),g=s-b,d=0<=b&&b<v.shape[0],c=0<=b+1&&b+1<v.shape[0],m=Math.floor(o),l=o-m,y=0<=m&&m<v.shape[1],u=0<=m+1&&m+1<v.shape[1],A=d&&y?v.get(b,m):0,_=d&&u?v.get(b,m+1):0,p=c&&y?v.get(b+1,m):0,w=c&&u?v.get(b+1,m+1):0;return(1-l)*((1-g)*A+g*p)+l*((1-g)*_+g*w)}function i(v,s,o,b){var g=Math.floor(s),d=s-g,c=0<=g&&g<v.shape[0],m=0<=g+1&&g+1<v.shape[0],l=Math.floor(o),y=o-l,u=0<=l&&l<v.shape[1],A=0<=l+1&&l+1<v.shape[1],_=Math.floor(b),p=b-_,w=0<=_&&_<v.shape[2],h=0<=_+1&&_+1<v.shape[2],L=c&&u&&w?v.get(g,l,_):0,E=c&&A&&w?v.get(g,l+1,_):0,S=m&&u&&w?v.get(g+1,l,_):0,P=m&&A&&w?v.get(g+1,l+1,_):0,F=c&&u&&h?v.get(g,l,_+1):0,I=c&&A&&h?v.get(g,l+1,_+1):0,D=m&&u&&h?v.get(g+1,l,_+1):0,R=m&&A&&h?v.get(g+1,l+1,_+1):0;return(1-p)*((1-y)*((1-d)*L+d*S)+y*((1-d)*E+d*P))+p*((1-y)*((1-d)*F+d*D)+y*((1-d)*I+d*R))}function n(v){var s=v.shape.length|0,o=new Array(s),b=new Array(s),g=new Array(s),d=new Array(s),c,m;for(c=0;c<s;++c)m=+arguments[c+1],o[c]=Math.floor(m),b[c]=m-o[c],g[c]=0<=o[c]&&o[c]<v.shape[c],d[c]=0<=o[c]+1&&o[c]+1<v.shape[c];var l=0,y,u,A;e:for(c=0;c<1<<s;++c){for(u=1,A=v.offset,y=0;y<s;++y)if(c&1<<y){if(!d[y])continue e;u*=b[y],A+=v.stride[y]*(o[y]+1)}else{if(!g[y])continue e;u*=1-b[y],A+=v.stride[y]*o[y]}l+=u*v.data[A]}return l}function r(v,s,o,b){switch(v.shape.length){case 0:return 0;case 1:return e(v,s);case 2:return a(v,s,o);case 3:return i(v,s,o,b);default:return n.apply(void 0,arguments)}}M.exports=r,M.exports.d1=e,M.exports.d2=a,M.exports.d3=i},{}],254:[function(f,M,T){var e={"float64,2,1,0":function(){return function(b,g,d,c,m){var l=b[0],y=b[1],u=b[2],A=d[0],_=d[1],p=d[2];c|=0;var w=0,h=0,L=0,E=p,S=_-u*p,P=A-y*_;for(L=0;L<l;++L){for(h=0;h<y;++h){for(w=0;w<u;++w)g[c]/=m,c+=E;c+=S}c+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(b,g,d,c,m,l,y,u){var A=b[0],_=b[1],p=b[2],w=d[0],h=d[1],L=d[2],E=l[0],S=l[1],P=l[2];c|=0,y|=0;for(var F=c,I=y,D=b[0]|0;D>0;){D<64?(A=D,D=0):(A=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(_=R,R=0):(_=64,R-=64),c=F+D*w+R*h,y=I+D*E+R*S;var O=0,z=0,H=0,Y=L,ee=w-p*L,j=h-A*w,X=P,ae=E-p*P,fe=S-A*E;for(H=0;H<_;++H){for(z=0;z<A;++z){for(O=0;O<p;++O)g[c]=m[y]*u,c+=Y,y+=X;c+=ee,y+=ae}c+=j,y+=fe}}}}},"float32,1,0,float32,1,0":function(){return function(b,g,d,c,m,l,y){var u=b[0],A=b[1],_=d[0],p=d[1],w=l[0],h=l[1];c|=0,y|=0;var L=0,E=0,S=p,P=_-A*p,F=h,I=w-A*h;for(E=0;E<u;++E){for(L=0;L<A;++L)g[c]=m[y],c+=S,y+=F;c+=P,y+=I}}},"float32,1,0,float32,0,1":function(){return function(b,g,d,c,m,l,y){var u=b[0],A=b[1],_=d[0],p=d[1],w=l[0],h=l[1];c|=0,y|=0;for(var L=c,E=y,S=b[1]|0;S>0;){S<64?(A=S,S=0):(A=64,S-=64);for(var P=b[0]|0;P>0;){P<64?(u=P,P=0):(u=64,P-=64),c=L+S*p+P*_,y=E+S*h+P*w;var F=0,I=0,D=p,R=_-A*p,O=h,z=w-A*h;for(I=0;I<u;++I){for(F=0;F<A;++F)g[c]=m[y],c+=D,y+=O;c+=R,y+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(b,g,d,c,m,l,y){var u=b[0],A=b[1],_=b[2],p=d[0],w=d[1],h=d[2],L=l[0],E=l[1],S=l[2];c|=0,y|=0;for(var P=c,F=y,I=b[2]|0;I>0;){I<64?(_=I,I=0):(_=64,I-=64);for(var D=b[0]|0;D>0;){D<64?(u=D,D=0):(u=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(A=R,R=0):(A=64,R-=64),c=P+I*h+D*p+R*w,y=F+I*S+D*L+R*E;var O=0,z=0,H=0,Y=h,ee=p-_*h,j=w-u*p,X=S,ae=L-_*S,fe=E-u*L;for(H=0;H<A;++H){for(z=0;z<u;++z){for(O=0;O<_;++O)g[c]=m[y],c+=Y,y+=X;c+=ee,y+=ae}c+=j,y+=fe}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(b,g,d,c,m,l,y){var u=b[0],A=b[1],_=b[2],p=d[0],w=d[1],h=d[2],L=l[0],E=l[1],S=l[2];c|=0,y|=0;var P=0,F=0,I=0,D=h,R=p-_*h,O=w-u*p,z=S,H=L-_*S,Y=E-u*L;for(I=0;I<A;++I){for(F=0;F<u;++F){for(P=0;P<_;++P)g[c]=m[y],c+=D,y+=z;c+=R,y+=H}c+=O,y+=Y}}}};function a(o,b){var g=b.join(","),d=e[g];return d()}var i=a,n={mul:function(o){var b={};return function(d,c,m){var l=d.dtype,y=d.order,u=c.dtype,A=c.order,_=m.dtype,p=m.order,w=[l,y.join(),u,A.join(),_,p.join()].join(),h=b[w];return h||(b[w]=h=o([l,y,u,A,_,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,c.data,c.stride,c.offset|0,m.data,m.stride,m.offset|0)}},muls:function(o){var b={};return function(d,c,m){var l=d.dtype,y=d.order,u=c.dtype,A=c.order,_=[l,y.join(),u,A.join()].join(),p=b[_];return p||(b[_]=p=o([l,y,u,A])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,c.data,c.stride,c.offset|0,m)}},mulseq:function(o){var b={};return function(d,c){var m=d.dtype,l=d.order,y=[m,l.join()].join(),u=b[y];return u||(b[y]=u=o([m,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,c)}},div:function(o){var b={};return function(d,c,m){var l=d.dtype,y=d.order,u=c.dtype,A=c.order,_=m.dtype,p=m.order,w=[l,y.join(),u,A.join(),_,p.join()].join(),h=b[w];return h||(b[w]=h=o([l,y,u,A,_,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,c.data,c.stride,c.offset|0,m.data,m.stride,m.offset|0)}},divs:function(o){var b={};return function(d,c,m){var l=d.dtype,y=d.order,u=c.dtype,A=c.order,_=[l,y.join(),u,A.join()].join(),p=b[_];return p||(b[_]=p=o([l,y,u,A])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,c.data,c.stride,c.offset|0,m)}},divseq:function(o){var b={};return function(d,c){var m=d.dtype,l=d.order,y=[m,l.join()].join(),u=b[y];return u||(b[y]=u=o([m,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,c)}},assign:function(o){var b={};return function(d,c){var m=d.dtype,l=d.order,y=c.dtype,u=c.order,A=[m,l.join(),y,u.join()].join(),_=b[A];return _||(b[A]=_=o([m,l,y,u])),_(d.shape.slice(0),d.data,d.stride,d.offset|0,c.data,c.stride,c.offset|0)}}};function r(o){var b=n[o.funcName];return b(i.bind(void 0,o))}function v(o){return r({funcName:o.funcName})}var s={mul:"*",div:"/"};(function(){for(var o in s)T[o]=v({funcName:o}),T[o+"s"]=v({funcName:o+"s"}),T[o+"seq"]=v({funcName:o+"seq"})})(),T.assign=v({funcName:"assign"})},{}],255:[function(f,M,T){var e=f("ndarray"),a=f("./doConvert.js");M.exports=function(n,r){for(var v=[],s=n,o=1;Array.isArray(s);)v.push(s.length),o*=s.length,s=s[0];return v.length===0?e():(r||(r=e(new Float64Array(o),v)),a(r,n),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(f,M,T){function e(){return function(s,o,b,g,d){var c=s[0],m=s[1],l=s[2],y=b[0],u=b[1],A=b[2],_=[0,0,0];g|=0;var p=0,w=0,h=0,L=A,E=u-l*A,S=y-m*u;for(h=0;h<c;++h){for(w=0;w<m;++w){for(p=0;p<l;++p){{var P=d,F;for(F=0;F<_.length-1;++F)P=P[_[F]];o[g]=P[_[_.length-1]]}g+=L,++_[2]}g+=E,_[2]-=l,++_[1]}g+=S,_[1]-=m,++_[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d){var c=g.dtype,m=g.order,l=[c,m.join()].join(),y=o[l];return y||(o[l]=y=s([c,m])),y(g.shape.slice(0),g.data,g.stride,g.offset|0,d)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}M.exports=v({funcName:"convert"})},{}],257:[function(f,M,T){var e=f("typedarray-pool");function a(b){switch(b){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var i={"uint32,1,0":function(b,g){return function(c,m,l,y,u,A,_,p,w,h,L){var E,S,P,F=c*u+y,I,D=b(p),R,O,z,H;for(E=c+1;E<=m;++E){for(S=E,F+=u,P=F,R=0,O=F,I=0;I<p;++I)D[R++]=l[O],O+=w;e:for(;S-- >c;){R=0,O=P-u;t:for(I=0;I<p;++I){if(z=l[O],H=D[R],z<H)break e;if(z>H)break t;O+=h,R+=L}for(R=P,O=P-u,I=0;I<p;++I)l[R]=l[O],R+=w,O+=w;P-=u}for(R=P,O=0,I=0;I<p;++I)l[R]=D[O++],R+=w}g(D)}}};function n(b,g){var d=a(g),c=[g,b].join(","),m=i[c];return d?m(d[0],d[1]):m()}var r={"uint32,1,0":function(b,g,d){return function c(m,l,y,u,A,_,p,w,h,L,E){var S=(l-m+1)/6|0,P=m+S,F=l-S,I=m+l>>1,D=I-S,R=I+S,O=P,z=D,H=I,Y=R,ee=F,j=m+1,X=l-1,ae=!0,fe,K,J,U,V,q,re,Z,Q,ie=0,oe=0,ne=0,se,_e,ue,ge,xe,ye,be,Se,Re,Ve,Ae,Ce,Ze,Ye,ze,Ie,Ge=w,dt=g(Ge),Rt=g(Ge);_e=A*O,ue=A*z,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=O,O=z,z=K;break e}if(ne<0)break e;Ie+=L}_e=A*Y,ue=A*ee,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=Y,Y=ee,ee=K;break e}if(ne<0)break e;Ie+=L}_e=A*O,ue=A*H,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=O,O=H,H=K;break e}if(ne<0)break e;Ie+=L}_e=A*z,ue=A*H,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=z,z=H,H=K;break e}if(ne<0)break e;Ie+=L}_e=A*O,ue=A*Y,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=O,O=Y,Y=K;break e}if(ne<0)break e;Ie+=L}_e=A*H,ue=A*Y,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=H,H=Y,Y=K;break e}if(ne<0)break e;Ie+=L}_e=A*z,ue=A*ee,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=z,z=ee,ee=K;break e}if(ne<0)break e;Ie+=L}_e=A*z,ue=A*H,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=z,z=H,H=K;break e}if(ne<0)break e;Ie+=L}_e=A*Y,ue=A*ee,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,Z=ue+Ie,ne=y[re]-y[Z],ne>0){K=Y,Y=ee,ee=K;break e}if(ne<0)break e;Ie+=L}for(_e=A*O,ue=A*z,ge=A*H,xe=A*Y,ye=A*ee,be=A*P,Se=A*I,Re=A*F,ze=0,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,Q=ge+Ie,Ve=xe+Ie,Ae=ye+Ie,Ce=be+Ie,Ze=Se+Ie,Ye=Re+Ie,dt[ze]=y[Z],Rt[ze]=y[Ve],ae=ae&&dt[ze]===Rt[ze],J=y[re],U=y[Q],V=y[Ae],y[Ce]=J,y[Ze]=U,y[Ye]=V,++ze,Ie+=h;for(_e=A*D,ue=A*m,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,y[re]=y[Z],Ie+=h;for(_e=A*R,ue=A*l,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,y[re]=y[Z],Ie+=h;if(ae)for(q=j;q<=X;++q){re=u+q*A,ze=0;e:for(se=0;se<w;++se){if(ne=y[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne!==0)if(ne<0){if(q!==j)for(_e=A*q,ue=A*j,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,fe=y[re],y[re]=y[Z],y[Z]=fe,Ie+=h;++j}else for(;;){re=u+X*A,ze=0;e:for(se=0;se<w;++se){if(ne=y[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne>0)X--;else if(ne<0){for(_e=A*q,ue=A*j,ge=A*X,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,Q=ge+Ie,fe=y[re],y[re]=y[Z],y[Z]=y[Q],y[Q]=fe,Ie+=h;++j,--X;break}else{for(_e=A*q,ue=A*X,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,fe=y[re],y[re]=y[Z],y[Z]=fe,Ie+=h;--X;break}}}else for(q=j;q<=X;++q){re=u+q*A,ze=0;e:for(se=0;se<w;++se){if(ie=y[re]-dt[ze],ie!==0)break e;ze+=E,re+=L}if(ie<0){if(q!==j)for(_e=A*q,ue=A*j,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,fe=y[re],y[re]=y[Z],y[Z]=fe,Ie+=h;++j}else{re=u+q*A,ze=0;e:for(se=0;se<w;++se){if(oe=y[re]-Rt[ze],oe!==0)break e;ze+=E,re+=L}if(oe>0)for(;;){re=u+X*A,ze=0;e:for(se=0;se<w;++se){if(ne=y[re]-Rt[ze],ne!==0)break e;ze+=E,re+=L}if(ne>0){if(--X<q)break;continue}else{re=u+X*A,ze=0;e:for(se=0;se<w;++se){if(ne=y[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne<0){for(_e=A*q,ue=A*j,ge=A*X,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,Q=ge+Ie,fe=y[re],y[re]=y[Z],y[Z]=y[Q],y[Q]=fe,Ie+=h;++j,--X}else{for(_e=A*q,ue=A*X,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,fe=y[re],y[re]=y[Z],y[Z]=fe,Ie+=h;--X}break}}}}for(_e=A*m,ue=A*(j-1),ze=0,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,y[re]=y[Z],y[Z]=dt[ze],++ze,Ie+=h;for(_e=A*l,ue=A*(X+1),ze=0,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,y[re]=y[Z],y[Z]=Rt[ze],++ze,Ie+=h;if(j-2-m<=32?b(m,j-2,y,u,A,_,p,w,h,L,E):c(m,j-2,y,u,A,_,p,w,h,L,E),l-(X+2)<=32?b(X+2,l,y,u,A,_,p,w,h,L,E):c(X+2,l,y,u,A,_,p,w,h,L,E),ae){d(dt),d(Rt);return}if(j<P&&X>F){e:for(;;){for(re=u+j*A,ze=0,Ie=u,se=0;se<w;++se){if(y[re]!==dt[ze])break e;++ze,re+=h}++j}e:for(;;){for(re=u+X*A,ze=0,Ie=u,se=0;se<w;++se){if(y[re]!==Rt[ze])break e;++ze,re+=h}--X}for(q=j;q<=X;++q){re=u+q*A,ze=0;e:for(se=0;se<w;++se){if(ie=y[re]-dt[ze],ie!==0)break e;ze+=E,re+=L}if(ie===0){if(q!==j)for(_e=A*q,ue=A*j,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,fe=y[re],y[re]=y[Z],y[Z]=fe,Ie+=h;++j}else{re=u+q*A,ze=0;e:for(se=0;se<w;++se){if(oe=y[re]-Rt[ze],oe!==0)break e;ze+=E,re+=L}if(oe===0)for(;;){re=u+X*A,ze=0;e:for(se=0;se<w;++se){if(ne=y[re]-Rt[ze],ne!==0)break e;ze+=E,re+=L}if(ne===0){if(--X<q)break;continue}else{re=u+X*A,ze=0;e:for(se=0;se<w;++se){if(ne=y[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne<0){for(_e=A*q,ue=A*j,ge=A*X,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,Q=ge+Ie,fe=y[re],y[re]=y[Z],y[Z]=y[Q],y[Q]=fe,Ie+=h;++j,--X}else{for(_e=A*q,ue=A*X,Ie=u,se=0;se<w;++se)re=_e+Ie,Z=ue+Ie,fe=y[re],y[re]=y[Z],y[Z]=fe,Ie+=h;--X}break}}}}}d(dt),d(Rt),X-j<=32?b(j,X,y,u,A,_,p,w,h,L,E):c(j,X,y,u,A,_,p,w,h,L,E)}}};function v(b,g,d){var c=a(g),m=[g,b].join(","),l=r[m];return b.length>1&&c?l(d,c[0],c[1]):l(d)}var s={"uint32,1,0":function(b,g){return function(d){var c=d.data,m=d.offset|0,l=d.shape,y=d.stride,u=y[0]|0,A=l[0]|0,_=y[1]|0,p=l[1]|0,w=_,h=_,L=1;A<=32?b(0,A-1,c,m,u,_,A,p,w,h,L):g(0,A-1,c,m,u,_,A,p,w,h,L)}}};function o(b,g){var d=[g,b].join(","),c=s[d],m=n(b,g),l=v(b,g,m);return c(m,l)}M.exports=o},{"typedarray-pool":308}],258:[function(f,M,T){var e=f("./lib/compile_sort.js"),a={};function i(n){var r=n.order,v=n.dtype,s=[r,v],o=s.join(":"),b=a[o];return b||(a[o]=b=e(r,v)),b(n),n}M.exports=i},{"./lib/compile_sort.js":257}],259:[function(f,M,T){var e=f("is-buffer"),a=typeof Float64Array<"u";function i(g,d){return g[0]-d[0]}function n(){var g=this.stride,d=new Array(g.length),c;for(c=0;c<d.length;++c)d[c]=[Math.abs(g[c]),c];d.sort(i);var m=new Array(d.length);for(c=0;c<m.length;++c)m[c]=d[c][1];return m}var r={T:function(g){function d(m){this.data=m}var c=d.prototype;return c.dtype=g,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new d(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(l){return new d(l)}},0:function(g,d){function c(l,y){this.data=l,this.offset=y}var m=c.prototype;return m.dtype=g,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new c(this.data,this.offset)},m.pick=function(){return d(this.data)},m.valueOf=m.get=function(){return g==="generic"?this.data.get(this.offset):this.data[this.offset]},m.set=function(y){return g==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,u,A,_){return new c(y,_)}},1:function(g,d,c){function m(y,u,A,_){this.data=y,this.shape=[u],this.stride=[A],this.offset=_|0}var l=m.prototype;return l.dtype=g,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(u,A){return g==="generic"?this.data.set(this.offset+this.stride[0]*u,A):this.data[this.offset+this.stride[0]*u]=A},l.get=function(u){return g==="generic"?this.data.get(this.offset+this.stride[0]*u):this.data[this.offset+this.stride[0]*u]},l.index=function(u){return this.offset+this.stride[0]*u},l.hi=function(u){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,this.stride[0],this.offset)},l.lo=function(u){var A=this.offset,_=0,p=this.shape[0],w=this.stride[0];return typeof u=="number"&&u>=0&&(_=u|0,A+=w*_,p-=_),new m(this.data,p,w,A)},l.step=function(u){var A=this.shape[0],_=this.stride[0],p=this.offset,w=0,h=Math.ceil;return typeof u=="number"&&(w=u|0,w<0?(p+=_*(A-1),A=h(-A/w)):A=h(A/w),_*=w),new m(this.data,A,_,p)},l.transpose=function(u){u=u===void 0?0:u|0;var A=this.shape,_=this.stride;return new m(this.data,A[u],_[u],this.offset)},l.pick=function(u){var A=[],_=[],p=this.offset;typeof u=="number"&&u>=0?p=p+this.stride[0]*u|0:(A.push(this.shape[0]),_.push(this.stride[0]));var w=d[A.length+1];return w(this.data,A,_,p)},function(u,A,_,p){return new m(u,A[0],_[0],p)}},2:function(g,d,c){function m(y,u,A,_,p,w){this.data=y,this.shape=[u,A],this.stride=[_,p],this.offset=w|0}var l=m.prototype;return l.dtype=g,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(u,A,_){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A,_):this.data[this.offset+this.stride[0]*u+this.stride[1]*A]=_},l.get=function(u,A){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A):this.data[this.offset+this.stride[0]*u+this.stride[1]*A]},l.index=function(u,A){return this.offset+this.stride[0]*u+this.stride[1]*A},l.hi=function(u,A){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(u,A){var _=this.offset,p=0,w=this.shape[0],h=this.shape[1],L=this.stride[0],E=this.stride[1];return typeof u=="number"&&u>=0&&(p=u|0,_+=L*p,w-=p),typeof A=="number"&&A>=0&&(p=A|0,_+=E*p,h-=p),new m(this.data,w,h,L,E,_)},l.step=function(u,A){var _=this.shape[0],p=this.shape[1],w=this.stride[0],h=this.stride[1],L=this.offset,E=0,S=Math.ceil;return typeof u=="number"&&(E=u|0,E<0?(L+=w*(_-1),_=S(-_/E)):_=S(_/E),w*=E),typeof A=="number"&&(E=A|0,E<0?(L+=h*(p-1),p=S(-p/E)):p=S(p/E),h*=E),new m(this.data,_,p,w,h,L)},l.transpose=function(u,A){u=u===void 0?0:u|0,A=A===void 0?1:A|0;var _=this.shape,p=this.stride;return new m(this.data,_[u],_[A],p[u],p[A],this.offset)},l.pick=function(u,A){var _=[],p=[],w=this.offset;typeof u=="number"&&u>=0?w=w+this.stride[0]*u|0:(_.push(this.shape[0]),p.push(this.stride[0])),typeof A=="number"&&A>=0?w=w+this.stride[1]*A|0:(_.push(this.shape[1]),p.push(this.stride[1]));var h=d[_.length+1];return h(this.data,_,p,w)},function(u,A,_,p){return new m(u,A[0],A[1],_[0],_[1],p)}},3:function(g,d,c){function m(y,u,A,_,p,w,h,L){this.data=y,this.shape=[u,A,_],this.stride=[p,w,h],this.offset=L|0}var l=m.prototype;return l.dtype=g,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var u=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return u>A?A>_?[2,1,0]:u>_?[1,2,0]:[1,0,2]:u>_?[2,0,1]:_>A?[0,1,2]:[0,2,1]}}),l.set=function(u,A,_,p){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_,p):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_]=p},l.get=function(u,A,_){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_]},l.index=function(u,A,_){return this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_},l.hi=function(u,A,_){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof _!="number"||_<0?this.shape[2]:_|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(u,A,_){var p=this.offset,w=0,h=this.shape[0],L=this.shape[1],E=this.shape[2],S=this.stride[0],P=this.stride[1],F=this.stride[2];return typeof u=="number"&&u>=0&&(w=u|0,p+=S*w,h-=w),typeof A=="number"&&A>=0&&(w=A|0,p+=P*w,L-=w),typeof _=="number"&&_>=0&&(w=_|0,p+=F*w,E-=w),new m(this.data,h,L,E,S,P,F,p)},l.step=function(u,A,_){var p=this.shape[0],w=this.shape[1],h=this.shape[2],L=this.stride[0],E=this.stride[1],S=this.stride[2],P=this.offset,F=0,I=Math.ceil;return typeof u=="number"&&(F=u|0,F<0?(P+=L*(p-1),p=I(-p/F)):p=I(p/F),L*=F),typeof A=="number"&&(F=A|0,F<0?(P+=E*(w-1),w=I(-w/F)):w=I(w/F),E*=F),typeof _=="number"&&(F=_|0,F<0?(P+=S*(h-1),h=I(-h/F)):h=I(h/F),S*=F),new m(this.data,p,w,h,L,E,S,P)},l.transpose=function(u,A,_){u=u===void 0?0:u|0,A=A===void 0?1:A|0,_=_===void 0?2:_|0;var p=this.shape,w=this.stride;return new m(this.data,p[u],p[A],p[_],w[u],w[A],w[_],this.offset)},l.pick=function(u,A,_){var p=[],w=[],h=this.offset;typeof u=="number"&&u>=0?h=h+this.stride[0]*u|0:(p.push(this.shape[0]),w.push(this.stride[0])),typeof A=="number"&&A>=0?h=h+this.stride[1]*A|0:(p.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?h=h+this.stride[2]*_|0:(p.push(this.shape[2]),w.push(this.stride[2]));var L=d[p.length+1];return L(this.data,p,w,h)},function(u,A,_,p){return new m(u,A[0],A[1],A[2],_[0],_[1],_[2],p)}},4:function(g,d,c){function m(y,u,A,_,p,w,h,L,E,S){this.data=y,this.shape=[u,A,_,p],this.stride=[w,h,L,E],this.offset=S|0}var l=m.prototype;return l.dtype=g,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:c}),l.set=function(u,A,_,p,w){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*p,w):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*p]=w},l.get=function(u,A,_,p){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*p):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*p]},l.index=function(u,A,_,p){return this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*p},l.hi=function(u,A,_,p){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof _!="number"||_<0?this.shape[2]:_|0,typeof p!="number"||p<0?this.shape[3]:p|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(u,A,_,p){var w=this.offset,h=0,L=this.shape[0],E=this.shape[1],S=this.shape[2],P=this.shape[3],F=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof u=="number"&&u>=0&&(h=u|0,w+=F*h,L-=h),typeof A=="number"&&A>=0&&(h=A|0,w+=I*h,E-=h),typeof _=="number"&&_>=0&&(h=_|0,w+=D*h,S-=h),typeof p=="number"&&p>=0&&(h=p|0,w+=R*h,P-=h),new m(this.data,L,E,S,P,F,I,D,R,w)},l.step=function(u,A,_,p){var w=this.shape[0],h=this.shape[1],L=this.shape[2],E=this.shape[3],S=this.stride[0],P=this.stride[1],F=this.stride[2],I=this.stride[3],D=this.offset,R=0,O=Math.ceil;return typeof u=="number"&&(R=u|0,R<0?(D+=S*(w-1),w=O(-w/R)):w=O(w/R),S*=R),typeof A=="number"&&(R=A|0,R<0?(D+=P*(h-1),h=O(-h/R)):h=O(h/R),P*=R),typeof _=="number"&&(R=_|0,R<0?(D+=F*(L-1),L=O(-L/R)):L=O(L/R),F*=R),typeof p=="number"&&(R=p|0,R<0?(D+=I*(E-1),E=O(-E/R)):E=O(E/R),I*=R),new m(this.data,w,h,L,E,S,P,F,I,D)},l.transpose=function(u,A,_,p){u=u===void 0?0:u|0,A=A===void 0?1:A|0,_=_===void 0?2:_|0,p=p===void 0?3:p|0;var w=this.shape,h=this.stride;return new m(this.data,w[u],w[A],w[_],w[p],h[u],h[A],h[_],h[p],this.offset)},l.pick=function(u,A,_,p){var w=[],h=[],L=this.offset;typeof u=="number"&&u>=0?L=L+this.stride[0]*u|0:(w.push(this.shape[0]),h.push(this.stride[0])),typeof A=="number"&&A>=0?L=L+this.stride[1]*A|0:(w.push(this.shape[1]),h.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(w.push(this.shape[2]),h.push(this.stride[2])),typeof p=="number"&&p>=0?L=L+this.stride[3]*p|0:(w.push(this.shape[3]),h.push(this.stride[3]));var E=d[w.length+1];return E(this.data,w,h,L)},function(u,A,_,p){return new m(u,A[0],A[1],A[2],A[3],_[0],_[1],_[2],_[3],p)}},5:function(d,c,m){function l(u,A,_,p,w,h,L,E,S,P,F,I){this.data=u,this.shape=[A,_,p,w,h],this.stride=[L,E,S,P,F],this.offset=I|0}var y=l.prototype;return y.dtype=d,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:m}),y.set=function(A,_,p,w,h,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h,L):this.data[this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h]=L},y.get=function(A,_,p,w,h){return d==="generic"?this.data.get(this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h):this.data[this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h]},y.index=function(A,_,p,w,h){return this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h},y.hi=function(A,_,p,w,h){return new l(this.data,typeof A!="number"||A<0?this.shape[0]:A|0,typeof _!="number"||_<0?this.shape[1]:_|0,typeof p!="number"||p<0?this.shape[2]:p|0,typeof w!="number"||w<0?this.shape[3]:w|0,typeof h!="number"||h<0?this.shape[4]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(A,_,p,w,h){var L=this.offset,E=0,S=this.shape[0],P=this.shape[1],F=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],O=this.stride[1],z=this.stride[2],H=this.stride[3],Y=this.stride[4];return typeof A=="number"&&A>=0&&(E=A|0,L+=R*E,S-=E),typeof _=="number"&&_>=0&&(E=_|0,L+=O*E,P-=E),typeof p=="number"&&p>=0&&(E=p|0,L+=z*E,F-=E),typeof w=="number"&&w>=0&&(E=w|0,L+=H*E,I-=E),typeof h=="number"&&h>=0&&(E=h|0,L+=Y*E,D-=E),new l(this.data,S,P,F,I,D,R,O,z,H,Y,L)},y.step=function(A,_,p,w,h){var L=this.shape[0],E=this.shape[1],S=this.shape[2],P=this.shape[3],F=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],O=this.stride[3],z=this.stride[4],H=this.offset,Y=0,ee=Math.ceil;return typeof A=="number"&&(Y=A|0,Y<0?(H+=I*(L-1),L=ee(-L/Y)):L=ee(L/Y),I*=Y),typeof _=="number"&&(Y=_|0,Y<0?(H+=D*(E-1),E=ee(-E/Y)):E=ee(E/Y),D*=Y),typeof p=="number"&&(Y=p|0,Y<0?(H+=R*(S-1),S=ee(-S/Y)):S=ee(S/Y),R*=Y),typeof w=="number"&&(Y=w|0,Y<0?(H+=O*(P-1),P=ee(-P/Y)):P=ee(P/Y),O*=Y),typeof h=="number"&&(Y=h|0,Y<0?(H+=z*(F-1),F=ee(-F/Y)):F=ee(F/Y),z*=Y),new l(this.data,L,E,S,P,F,I,D,R,O,z,H)},y.transpose=function(A,_,p,w,h){A=A===void 0?0:A|0,_=_===void 0?1:_|0,p=p===void 0?2:p|0,w=w===void 0?3:w|0,h=h===void 0?4:h|0;var L=this.shape,E=this.stride;return new l(this.data,L[A],L[_],L[p],L[w],L[h],E[A],E[_],E[p],E[w],E[h],this.offset)},y.pick=function(A,_,p,w,h){var L=[],E=[],S=this.offset;typeof A=="number"&&A>=0?S=S+this.stride[0]*A|0:(L.push(this.shape[0]),E.push(this.stride[0])),typeof _=="number"&&_>=0?S=S+this.stride[1]*_|0:(L.push(this.shape[1]),E.push(this.stride[1])),typeof p=="number"&&p>=0?S=S+this.stride[2]*p|0:(L.push(this.shape[2]),E.push(this.stride[2])),typeof w=="number"&&w>=0?S=S+this.stride[3]*w|0:(L.push(this.shape[3]),E.push(this.stride[3])),typeof h=="number"&&h>=0?S=S+this.stride[4]*h|0:(L.push(this.shape[4]),E.push(this.stride[4]));var P=c[L.length+1];return P(this.data,L,E,S)},function(A,_,p,w){return new l(A,_[0],_[1],_[2],_[3],_[4],p[0],p[1],p[2],p[3],p[4],w)}}};function v(g,d){var c=d===-1?"T":String(d),m=r[c];return d===-1?m(g):d===0?m(g,o[g][0]):m(g,o[g],n)}function s(g){if(e(g))return"buffer";if(a)switch(Object.prototype.toString.call(g)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(g)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function b(g,d,c,m){if(g===void 0){var p=o.array[0];return p([])}else typeof g=="number"&&(g=[g]);d===void 0&&(d=[g.length]);var l=d.length;if(c===void 0){c=new Array(l);for(var y=l-1,u=1;y>=0;--y)c[y]=u,u*=d[y]}if(m===void 0){m=0;for(var y=0;y<l;++y)c[y]<0&&(m-=(d[y]-1)*c[y])}for(var A=s(g),_=o[A];_.length<=l+1;)_.push(v(A,_.length-1));var p=_[l+1];return p(g,d,c,m)}M.exports=b},{"is-buffer":237}],260:[function(f,M,T){var e=f("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;M.exports=n;function n(r,v){if(isNaN(r)||isNaN(v))return NaN;if(r===v)return r;if(r===0)return v<0?-a:a;var s=e.hi(r),o=e.lo(r);return v>r==r>0?o===i?(s+=1,o=0):o+=1:o===0?(o=i,s-=1):o-=1,e.pack(o,s)}},{"double-bits":64}],261:[function(f,M,T){var e=1e-6,a=1e-6;T.vertexNormals=function(i,n,r){for(var v=n.length,s=new Array(v),o=r===void 0?e:r,b=0;b<v;++b)s[b]=[0,0,0];for(var b=0;b<i.length;++b)for(var g=i[b],d=0,c=g[g.length-1],m=g[0],l=0;l<g.length;++l){d=c,c=m,m=g[(l+1)%g.length];for(var y=n[d],u=n[c],A=n[m],_=new Array(3),p=0,w=new Array(3),h=0,L=0;L<3;++L)_[L]=y[L]-u[L],p+=_[L]*_[L],w[L]=A[L]-u[L],h+=w[L]*w[L];if(p*h>o)for(var E=s[c],S=1/Math.sqrt(p*h),L=0;L<3;++L){var P=(L+1)%3,F=(L+2)%3;E[L]+=S*(w[P]*_[F]-w[F]*_[P])}}for(var b=0;b<v;++b){for(var E=s[b],I=0,L=0;L<3;++L)I+=E[L]*E[L];if(I>o)for(var S=1/Math.sqrt(I),L=0;L<3;++L)E[L]*=S;else for(var L=0;L<3;++L)E[L]=0}return s},T.faceNormals=function(i,n,r){for(var v=i.length,s=new Array(v),o=r===void 0?a:r,b=0;b<v;++b){for(var g=i[b],d=new Array(3),c=0;c<3;++c)d[c]=n[g[c]];for(var m=new Array(3),l=new Array(3),c=0;c<3;++c)m[c]=d[1][c]-d[0][c],l[c]=d[2][c]-d[0][c];for(var y=new Array(3),u=0,c=0;c<3;++c){var A=(c+1)%3,_=(c+2)%3;y[c]=m[A]*l[_]-m[_]*l[A],u+=y[c]*y[c]}u>o?u=1/Math.sqrt(u):u=0;for(var c=0;c<3;++c)y[c]*=u;s[b]=y}return s}},{}],262:[function(f,M,T){M.exports=e;function e(a,i,n,r,v,s,o,b,g,d){var c=i+s+d;if(m>0){var m=Math.sqrt(c+1);a[0]=.5*(o-g)/m,a[1]=.5*(b-r)/m,a[2]=.5*(n-s)/m,a[3]=.5*m}else{var l=Math.max(i,s,d),m=Math.sqrt(2*l-c+1);i>=l?(a[0]=.5*m,a[1]=.5*(v+n)/m,a[2]=.5*(b+r)/m,a[3]=.5*(o-g)/m):s>=l?(a[0]=.5*(n+v)/m,a[1]=.5*m,a[2]=.5*(g+o)/m,a[3]=.5*(b-r)/m):(a[0]=.5*(r+b)/m,a[1]=.5*(o+g)/m,a[2]=.5*m,a[3]=.5*(n-v)/m)}return a}},{}],263:[function(f,M,T){M.exports=d;var e=f("filtered-vector"),a=f("gl-mat4/lookAt"),i=f("gl-mat4/fromQuat"),n=f("gl-mat4/invert"),r=f("./lib/quatFromFrame");function v(c,m,l){return Math.sqrt(Math.pow(c,2)+Math.pow(m,2)+Math.pow(l,2))}function s(c,m,l,y){return Math.sqrt(Math.pow(c,2)+Math.pow(m,2)+Math.pow(l,2)+Math.pow(y,2))}function o(c,m){var l=m[0],y=m[1],u=m[2],A=m[3],_=s(l,y,u,A);_>1e-6?(c[0]=l/_,c[1]=y/_,c[2]=u/_,c[3]=A/_):(c[0]=c[1]=c[2]=0,c[3]=1)}function b(c,m,l){this.radius=e([l]),this.center=e(m),this.rotation=e(c),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=b.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(c){this.radius.curve(c),this.center.curve(c),this.rotation.curve(c);var m=this.computedRotation;o(m,m);var l=this.computedMatrix;i(l,m);var y=this.computedCenter,u=this.computedEye,A=this.computedUp,_=Math.exp(this.computedRadius[0]);u[0]=y[0]+_*l[2],u[1]=y[1]+_*l[6],u[2]=y[2]+_*l[10],A[0]=l[1],A[1]=l[5],A[2]=l[9];for(var p=0;p<3;++p){for(var w=0,h=0;h<3;++h)w+=l[p+4*h]*u[h];l[12+p]=-w}},g.getMatrix=function(c,m){this.recalcMatrix(c);var l=this.computedMatrix;if(m){for(var y=0;y<16;++y)m[y]=l[y];return m}return l},g.idle=function(c){this.center.idle(c),this.radius.idle(c),this.rotation.idle(c)},g.flush=function(c){this.center.flush(c),this.radius.flush(c),this.rotation.flush(c)},g.pan=function(c,m,l,y){m=m||0,l=l||0,y=y||0,this.recalcMatrix(c);var u=this.computedMatrix,A=u[1],_=u[5],p=u[9],w=v(A,_,p);A/=w,_/=w,p/=w;var h=u[0],L=u[4],E=u[8],S=h*A+L*_+E*p;h-=A*S,L-=_*S,E-=p*S;var P=v(h,L,E);h/=P,L/=P,E/=P,u[2],u[6],u[10];var F=h*m+A*l,I=L*m+_*l,D=E*m+p*l;this.center.move(c,F,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+y),this.radius.set(c,Math.log(R))},g.rotate=function(c,m,l,y){this.recalcMatrix(c),m=m||0,l=l||0;var u=this.computedMatrix,A=u[0],_=u[4],p=u[8],w=u[1],h=u[5],L=u[9],E=u[2],S=u[6],P=u[10],F=m*A+l*w,I=m*_+l*h,D=m*p+l*L,R=-(S*D-P*I),O=-(P*F-E*D),z=-(E*I-S*F),H=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(z,2))),Y=s(R,O,z,H);Y>1e-6?(R/=Y,O/=Y,z/=Y,H/=Y):(R=O=z=0,H=1);var ee=this.computedRotation,j=ee[0],X=ee[1],ae=ee[2],fe=ee[3],K=j*H+fe*R+X*z-ae*O,J=X*H+fe*O+ae*R-j*z,U=ae*H+fe*z+j*O-X*R,V=fe*H-j*R-X*O-ae*z;if(y){R=E,O=S,z=P;var q=Math.sin(y)/v(R,O,z);R*=q,O*=q,z*=q,H=Math.cos(m),K=K*H+V*R+J*z-U*O,J=J*H+V*O+U*R-K*z,U=U*H+V*z+K*O-J*R,V=V*H-K*R-J*O-U*z}var re=s(K,J,U,V);re>1e-6?(K/=re,J/=re,U/=re,V/=re):(K=J=U=0,V=1),this.rotation.set(c,K,J,U,V)},g.lookAt=function(c,m,l,y){this.recalcMatrix(c),l=l||this.computedCenter,m=m||this.computedEye,y=y||this.computedUp;var u=this.computedMatrix;a(u,m,l,y);var A=this.computedRotation;r(A,u[0],u[1],u[2],u[4],u[5],u[6],u[8],u[9],u[10]),o(A,A),this.rotation.set(c,A[0],A[1],A[2],A[3]);for(var _=0,p=0;p<3;++p)_+=Math.pow(l[p]-m[p],2);this.radius.set(c,.5*Math.log(Math.max(_,1e-6))),this.center.set(c,l[0],l[1],l[2])},g.translate=function(c,m,l,y){this.center.move(c,m||0,l||0,y||0)},g.setMatrix=function(c,m){var l=this.computedRotation;r(l,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),o(l,l),this.rotation.set(c,l[0],l[1],l[2],l[3]);var y=this.computedMatrix;n(y,m);var u=y[15];if(Math.abs(u)>1e-6){var A=y[12]/u,_=y[13]/u,p=y[14]/u;this.recalcMatrix(c);var w=Math.exp(this.computedRadius[0]);this.center.set(c,A-y[2]*w,_-y[6]*w,p-y[10]*w),this.radius.idle(c)}else this.center.idle(c),this.radius.idle(c)},g.setDistance=function(c,m){m>0&&this.radius.set(c,Math.log(m))},g.setDistanceLimits=function(c,m){c>0?c=Math.log(c):c=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(c){var m=this.radius.bounds;return c?(c[0]=Math.exp(m[0][0]),c[1]=Math.exp(m[1][0]),c):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(c){var m=this.lastT(),l=c.center;l&&this.center.set(m,l[0],l[1],l[2]);var y=c.rotation;y&&this.rotation.set(m,y[0],y[1],y[2],y[3]);var u=c.distance;u&&u>0&&this.radius.set(m,Math.log(u)),this.setDistanceLimits(c.zoomMin,c.zoomMax)};function d(c){c=c||{};var m=c.center||[0,0,0],l=c.rotation||[0,0,0,1],y=c.radius||1;m=[].slice.call(m,0,3),l=[].slice.call(l,0,4),o(l,l);var u=new b(l,m,Math.log(y));return u.setDistanceLimits(c.zoomMin,c.zoomMax),("eye"in c||"up"in c)&&u.lookAt(0,c.eye,c.center,c.up),u}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(f,M,T){var e=f("repeat-string");M.exports=function(i,n,r){return r=typeof r<"u"?r+"":" ",e(r,n)+i}},{"repeat-string":277}],265:[function(f,M,T){M.exports=function(a,i){i||(i=[0,""]),a=String(a);var n=parseFloat(a,10);return i[0]=n,i[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(f,M,T){M.exports=a;var e=f("compare-angle");function a(i,n){for(var r=n.length|0,v=i.length,s=[new Array(r),new Array(r)],o=0;o<r;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<v;++o){var b=i[o];s[0][b[0]].push(b),s[1][b[1]].push(b)}for(var g=[],o=0;o<r;++o)s[0][o].length+s[1][o].length===0&&g.push([o]);function d(_,p){var w=s[p][_[p]];w.splice(w.indexOf(_),1)}function c(_,p,w){for(var h,L,E,S=0;S<2;++S)if(s[S][p].length>0){h=s[S][p][0],E=S;break}L=h[E^1];for(var P=0;P<2;++P)for(var F=s[P][p],I=0;I<F.length;++I){var D=F[I],R=D[P^1],O=e(n[_],n[p],n[L],n[R]);O>0&&(h=D,L=R,E=P)}return w||h&&d(h,E),L}function m(_,p){var w=s[p][_][0],h=[_];d(w,p);for(var L=w[p^1];;){for(;L!==_;)h.push(L),L=c(h[h.length-2],L,!1);if(s[0][_].length+s[1][_].length===0)break;var E=h[h.length-1],S=_,P=h[1],F=c(E,S,!0);if(e(n[E],n[S],n[P],n[F])<0)break;h.push(_),L=c(E,S)}return h}function l(_,p){return p[1]===p[p.length-1]}for(var o=0;o<r;++o)for(var y=0;y<2;++y){for(var u=[];s[y][o].length>0;){s[0][o].length;var A=m(o,y);l(u,A)?u.push.apply(u,A):(u.length>0&&g.push(u),u=A)}u.length>0&&g.push(u)}return g}},{"compare-angle":54}],267:[function(f,M,T){M.exports=a;var e=f("edges-to-adjacency-list");function a(i,n){for(var r=e(i,n.length),v=new Array(n.length),s=new Array(n.length),o=[],b=0;b<n.length;++b){var g=r[b].length;s[b]=g,v[b]=!0,g<=1&&o.push(b)}for(;o.length>0;){var d=o.pop();v[d]=!1;for(var c=r[d],b=0;b<c.length;++b){var m=c[b];--s[m]===0&&o.push(m)}}for(var l=new Array(n.length),y=[],b=0;b<n.length;++b)if(v[b]){var d=y.length;l[b]=d,y.push(n[b])}else l[b]=-1;for(var u=[],b=0;b<i.length;++b){var A=i[b];v[A[0]]&&v[A[1]]&&u.push([l[A[0]],l[A[1]]])}return[u,y]}},{"edges-to-adjacency-list":66}],268:[function(f,M,T){M.exports=g;var e=f("edges-to-adjacency-list"),a=f("planar-dual"),i=f("point-in-big-polygon"),n=f("two-product"),r=f("robust-sum"),v=f("uniq"),s=f("./lib/trim-leaves");function o(d,c){for(var m=new Array(d),l=0;l<d;++l)m[l]=c;return m}function b(d){for(var c=new Array(d),m=0;m<d;++m)c[m]=[];return c}function g(d,c){var V=s(d,c);d=V[0],c=V[1];var m=c.length;d.length;for(var l=e(d,c.length),y=0;y<m;++y)if(l[y].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u=a(d,c);function A(ne){for(var se=ne.length,_e=[0],ue=0;ue<se;++ue){var ge=c[ne[ue]],xe=c[ne[(ue+1)%se]],ye=n(-ge[0],ge[1]),be=n(-ge[0],xe[1]),Se=n(xe[0],ge[1]),Re=n(xe[0],xe[1]);_e=r(_e,r(r(ye,be),r(Se,Re)))}return _e[_e.length-1]>0}u=u.filter(A);for(var _=u.length,p=new Array(_),w=new Array(_),y=0;y<_;++y){p[y]=y;var h=new Array(_),L=u[y].map(function(se){return c[se]}),E=i([L]),S=0;e:for(var P=0;P<_;++P)if(h[P]=0,y!==P){for(var F=u[P],I=F.length,D=0;D<I;++D){var R=E(c[F[D]]);if(R!==0){R<0&&(h[P]=1,S+=1);continue e}}h[P]=1,S+=1}w[y]=[S,y,h]}w.sort(function(ne,se){return se[0]-ne[0]});for(var y=0;y<_;++y)for(var h=w[y],O=h[1],z=h[2],P=0;P<_;++P)z[P]&&(p[P]=O);for(var H=b(_),y=0;y<_;++y)H[y].push(p[y]),H[p[y]].push(y);for(var Y={},ee=o(m,!1),y=0;y<_;++y)for(var F=u[y],I=F.length,P=0;P<I;++P){var j=F[P],X=F[(P+1)%I],ae=Math.min(j,X)+":"+Math.max(j,X);if(ae in Y){var fe=Y[ae];H[fe].push(y),H[y].push(fe),ee[j]=ee[X]=!0}else Y[ae]=y}function K(ne){for(var se=ne.length,_e=0;_e<se;++_e)if(!ee[ne[_e]])return!1;return!0}for(var J=[],U=o(_,-1),y=0;y<_;++y)p[y]===y&&!K(u[y])?(J.push(y),U[y]=0):U[y]=-1;for(var V=[];J.length>0;){var q=J.pop(),re=H[q];v(re,function(ne,se){return ne-se});var Z=re.length,Q=U[q],ie;if(Q===0){var F=u[q];ie=[F]}for(var y=0;y<Z;++y){var oe=re[y];if(!(U[oe]>=0)&&(U[oe]=Q^1,J.push(oe),Q===0)){var F=u[oe];K(F)||(F.reverse(),ie.push(F))}}Q===0&&V.push(ie)}return V}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(f,M,T){M.exports=c;var e=f("robust-orientation")[3],a=f("slab-decomposition"),i=f("interval-tree-1d"),n=f("binary-search-bounds");function r(){return!0}function v(m){return function(l,y){var u=m[l];return u?!!u.queryPoint(y,r):!1}}function s(m){for(var l={},y=0;y<m.length;++y){var u=m[y],A=u[0][0],_=u[0][1],p=u[1][1],w=[Math.min(_,p),Math.max(_,p)];A in l?l[A].push(w):l[A]=[w]}for(var h={},L=Object.keys(l),y=0;y<L.length;++y){var E=l[L[y]];h[L[y]]=i(E)}return v(h)}function o(m,l){return function(y){var u=n.le(l,y[0]);if(u<0)return 1;var A=m[u];if(!A)if(u>0&&l[u]===y[0])A=m[u-1];else return 1;for(var _=1;A;){var p=A.key,w=e(y,p[0],p[1]);if(p[0][0]<p[1][0])if(w<0)A=A.left;else if(w>0)_=-1,A=A.right;else return 0;else if(w>0)A=A.left;else if(w<0)_=1,A=A.right;else return 0}return _}}function b(m){return 1}function g(m){return function(y){return m(y[0],y[1])?0:1}}function d(m,l){return function(u){return m(u[0],u[1])?0:l(u)}}function c(m){for(var l=m.length,y=[],u=[],A=0;A<l;++A)for(var _=m[A],p=_.length,w=p-1,h=0;h<p;w=h++){var L=_[w],E=_[h];L[0]===E[0]?u.push([L,E]):y.push([L,E])}if(y.length===0)return u.length===0?b:g(s(u));var S=a(y),P=o(S.slabs,S.coordinates);return u.length===0?P:d(s(u),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(f,M,T){var e=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);function n(r,v,s,o,b){e.length<o.length&&(e=new Float64Array(o.length),a=new Float64Array(o.length),i=new Float64Array(o.length));for(var g=0;g<o.length;++g)e[g]=r[g]-o[g],a[g]=v[g]-r[g],i[g]=s[g]-r[g];for(var d=0,c=0,m=0,l=0,y=0,u=0,g=0;g<o.length;++g){var A=a[g],_=i[g],p=e[g];d+=A*A,c+=A*_,m+=_*_,l+=p*A,y+=p*_,u+=p*p}var w=Math.abs(d*m-c*c),h=c*y-m*l,L=c*l-d*y,E;if(h+L<=w)if(h<0)L<0&&l<0?(L=0,-l>=d?(h=1,E=d+2*l+u):(h=-l/d,E=l*h+u)):(h=0,y>=0?(L=0,E=u):-y>=m?(L=1,E=m+2*y+u):(L=-y/m,E=y*L+u));else if(L<0)L=0,l>=0?(h=0,E=u):-l>=d?(h=1,E=d+2*l+u):(h=-l/d,E=l*h+u);else{var S=1/w;h*=S,L*=S,E=h*(d*h+c*L+2*l)+L*(c*h+m*L+2*y)+u}else{var P,F,I,D;h<0?(P=c+l,F=m+y,F>P?(I=F-P,D=d-2*c+m,I>=D?(h=1,L=0,E=d+2*l+u):(h=I/D,L=1-h,E=h*(d*h+c*L+2*l)+L*(c*h+m*L+2*y)+u)):(h=0,F<=0?(L=1,E=m+2*y+u):y>=0?(L=0,E=u):(L=-y/m,E=y*L+u))):L<0?(P=c+y,F=d+l,F>P?(I=F-P,D=d-2*c+m,I>=D?(L=1,h=0,E=m+2*y+u):(L=I/D,h=1-L,E=h*(d*h+c*L+2*l)+L*(c*h+m*L+2*y)+u)):(L=0,F<=0?(h=1,E=d+2*l+u):l>=0?(h=0,E=u):(h=-l/d,E=l*h+u))):(I=m+y-c-l,I<=0?(h=0,L=1,E=m+2*y+u):(D=d-2*c+m,I>=D?(h=1,L=0,E=d+2*l+u):(h=I/D,L=1-h,E=h*(d*h+c*L+2*l)+L*(c*h+m*L+2*y)+u)))}for(var R=1-h-L,g=0;g<o.length;++g)b[g]=R*r[g]+h*v[g]+L*s[g];return E<0?0:E}M.exports=n},{}],271:[function(f,M,T){M.exports=f("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(f,M,T){var e=f("big-rat/add");M.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/add":15}],273:[function(f,M,T){M.exports=a;var e=f("big-rat");function a(i){for(var n=new Array(i.length),r=0;r<i.length;++r)n[r]=e(i[r]);return n}},{"big-rat":18}],274:[function(f,M,T){var e=f("big-rat"),a=f("big-rat/mul");M.exports=i;function i(n,r){for(var v=e(r),s=n.length,o=new Array(s),b=0;b<s;++b)o[b]=a(n[b],v);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(f,M,T){var e=f("big-rat/sub");M.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/sub":29}],276:[function(f,M,T){var e=f("compare-cell"),a=f("compare-oriented-cell"),i=f("cell-orientation");M.exports=n;function n(r){r.sort(a);for(var v=r.length,s=0,o=0;o<v;++o){var b=r[o],g=i(b);if(g!==0){if(s>0){var d=r[s-1];if(e(b,d)===0&&i(d)!==g){s-=1;continue}}r[s++]=b}}return r.length=s,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(f,M,T){var e="",a;M.exports=i;function i(n,r){if(typeof n!="string")throw new TypeError("expected a string");if(r===1)return n;if(r===2)return n+n;var v=n.length*r;if(a!==n||typeof a>"u")a=n,e="";else if(e.length>=v)return e.substr(0,v);for(;v>e.length&&r>1;)r&1&&(e+=n),r>>=1,n+=n;return e+=n,e=e.substr(0,v),e}},{}],278:[function(f,M,T){(function(e){(function(){M.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof x<"u"?x:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(f,M,T){M.exports=e;function e(a){for(var i=a.length,n=a[a.length-1],r=i,v=i-2;v>=0;--v){var s=n,o=a[v];n=s+o;var b=n-s,g=o-b;g&&(a[--r]=n,n=g)}for(var d=0,v=r;v<i;++v){var s=a[v],o=n;n=s+o;var b=n-s,g=o-b;g&&(a[d++]=g)}return a[d++]=n,a.length=d,a}},{}],280:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),i=f("robust-scale"),n=f("robust-compress"),r=6;function v(l,y,u,A){return function(p){return A(l(u(p[0][0],p[1][1]),u(-p[0][1],p[1][0])))}}function s(l,y,u,A){return function(p){return A(l(y(l(u(p[1][1],p[2][2]),u(-p[1][2],p[2][1])),p[0][0]),l(y(l(u(p[1][0],p[2][2]),u(-p[1][2],p[2][0])),-p[0][1]),y(l(u(p[1][0],p[2][1]),u(-p[1][1],p[2][0])),p[0][2]))))}}function o(l,y,u,A){return function(p){return A(l(l(y(l(y(l(u(p[2][2],p[3][3]),u(-p[2][3],p[3][2])),p[1][1]),l(y(l(u(p[2][1],p[3][3]),u(-p[2][3],p[3][1])),-p[1][2]),y(l(u(p[2][1],p[3][2]),u(-p[2][2],p[3][1])),p[1][3]))),p[0][0]),y(l(y(l(u(p[2][2],p[3][3]),u(-p[2][3],p[3][2])),p[1][0]),l(y(l(u(p[2][0],p[3][3]),u(-p[2][3],p[3][0])),-p[1][2]),y(l(u(p[2][0],p[3][2]),u(-p[2][2],p[3][0])),p[1][3]))),-p[0][1])),l(y(l(y(l(u(p[2][1],p[3][3]),u(-p[2][3],p[3][1])),p[1][0]),l(y(l(u(p[2][0],p[3][3]),u(-p[2][3],p[3][0])),-p[1][1]),y(l(u(p[2][0],p[3][1]),u(-p[2][1],p[3][0])),p[1][3]))),p[0][2]),y(l(y(l(u(p[2][1],p[3][2]),u(-p[2][2],p[3][1])),p[1][0]),l(y(l(u(p[2][0],p[3][2]),u(-p[2][2],p[3][0])),-p[1][1]),y(l(u(p[2][0],p[3][1]),u(-p[2][1],p[3][0])),p[1][2]))),-p[0][3]))))}}function b(l,y,u,A){return function(p){return A(l(l(y(l(l(y(l(y(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][2]),l(y(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),-p[2][3]),y(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][4]))),p[1][1]),y(l(y(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][1]),l(y(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][3]),y(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][4]))),-p[1][2])),l(y(l(y(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][1]),l(y(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][2]),y(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][4]))),p[1][3]),y(l(y(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][1]),l(y(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),-p[2][2]),y(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][3]))),-p[1][4]))),p[0][0]),y(l(l(y(l(y(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][2]),l(y(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),-p[2][3]),y(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][4]))),p[1][0]),y(l(y(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][0]),l(y(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][3]),y(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),p[2][4]))),-p[1][2])),l(y(l(y(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][0]),l(y(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][2]),y(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][4]))),p[1][3]),y(l(y(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][0]),l(y(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][2]),y(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][3]))),-p[1][4]))),-p[0][1])),l(y(l(l(y(l(y(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][1]),l(y(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][3]),y(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][4]))),p[1][0]),y(l(y(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][0]),l(y(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][3]),y(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),p[2][4]))),-p[1][1])),l(y(l(y(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),p[2][0]),l(y(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][1]),y(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][4]))),p[1][3]),y(l(y(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][0]),l(y(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][1]),y(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][3]))),-p[1][4]))),p[0][2]),l(y(l(l(y(l(y(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][1]),l(y(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][2]),y(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][4]))),p[1][0]),y(l(y(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][0]),l(y(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][2]),y(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][4]))),-p[1][1])),l(y(l(y(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),p[2][0]),l(y(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][1]),y(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][4]))),p[1][2]),y(l(y(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][0]),l(y(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),-p[2][1]),y(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][2]))),-p[1][4]))),-p[0][3]),y(l(l(y(l(y(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][1]),l(y(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),-p[2][2]),y(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][3]))),p[1][0]),y(l(y(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][0]),l(y(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][2]),y(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][3]))),-p[1][1])),l(y(l(y(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][0]),l(y(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][1]),y(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][3]))),p[1][2]),y(l(y(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][0]),l(y(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),-p[2][1]),y(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][2]))),-p[1][3]))),p[0][4])))))}}function g(l){var y=l===2?v:l===3?s:l===4?o:l===5?b:void 0;return y(a,i,e,n)}var d=[function(){return[0]},function(y){return[y[0][0]]}];function c(l,y,u,A,_,p,w,h){return function(E){switch(E.length){case 0:return l(E);case 1:return y(E);case 2:return u(E);case 3:return A(E);case 4:return _(E);case 5:return p(E)}var S=w[E.length];return S||(S=w[E.length]=h(E.length)),S(E)}}function m(){for(;d.length<r;)d.push(g(d.length));M.exports=c.apply(void 0,d.concat([d,g]));for(var l=0;l<d.length;++l)M.exports[l]=d[l]}m()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(f,M,T){var e=f("two-product"),a=f("robust-sum");M.exports=i;function i(n,r){for(var v=e(n[0],r[0]),s=1;s<n.length;++s)v=a(v,e(n[s],r[s]));return v}},{"robust-sum":289,"two-product":306}],282:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),i=f("robust-subtract"),n=f("robust-scale"),r=6;function v(_){var p=_===3?g:_===4?d:_===5?c:m;return p(a,i,e,n)}function s(){return 0}function o(){return 0}function b(){return 0}function g(_,p,w,h){function L(E,S,P){var F=w(E[0],E[0]),I=h(F,S[0]),D=h(F,P[0]),R=w(S[0],S[0]),O=h(R,E[0]),z=h(R,P[0]),H=w(P[0],P[0]),Y=h(H,E[0]),ee=h(H,S[0]),j=_(p(ee,z),p(O,I)),X=p(Y,D),ae=p(j,X);return ae[ae.length-1]}return L}function d(_,p,w,h){function L(E,S,P,F){var I=_(w(E[0],E[0]),w(E[1],E[1])),D=h(I,S[0]),R=h(I,P[0]),O=h(I,F[0]),z=_(w(S[0],S[0]),w(S[1],S[1])),H=h(z,E[0]),Y=h(z,P[0]),ee=h(z,F[0]),j=_(w(P[0],P[0]),w(P[1],P[1])),X=h(j,E[0]),ae=h(j,S[0]),fe=h(j,F[0]),K=_(w(F[0],F[0]),w(F[1],F[1])),J=h(K,E[0]),U=h(K,S[0]),V=h(K,P[0]),q=_(_(h(p(V,fe),S[1]),_(h(p(U,ee),-P[1]),h(p(ae,Y),F[1]))),_(h(p(U,ee),E[1]),_(h(p(J,O),-S[1]),h(p(H,D),F[1])))),re=_(_(h(p(V,fe),E[1]),_(h(p(J,O),-P[1]),h(p(X,R),F[1]))),_(h(p(ae,Y),E[1]),_(h(p(X,R),-S[1]),h(p(H,D),P[1])))),Z=p(q,re);return Z[Z.length-1]}return L}function c(_,p,w,h){function L(E,S,P,F,I){var D=_(w(E[0],E[0]),_(w(E[1],E[1]),w(E[2],E[2]))),R=h(D,S[0]),O=h(D,P[0]),z=h(D,F[0]),H=h(D,I[0]),Y=_(w(S[0],S[0]),_(w(S[1],S[1]),w(S[2],S[2]))),ee=h(Y,E[0]),j=h(Y,P[0]),X=h(Y,F[0]),ae=h(Y,I[0]),fe=_(w(P[0],P[0]),_(w(P[1],P[1]),w(P[2],P[2]))),K=h(fe,E[0]),J=h(fe,S[0]),U=h(fe,F[0]),V=h(fe,I[0]),q=_(w(F[0],F[0]),_(w(F[1],F[1]),w(F[2],F[2]))),re=h(q,E[0]),Z=h(q,S[0]),Q=h(q,P[0]),ie=h(q,I[0]),oe=_(w(I[0],I[0]),_(w(I[1],I[1]),w(I[2],I[2]))),ne=h(oe,E[0]),se=h(oe,S[0]),_e=h(oe,P[0]),ue=h(oe,F[0]),ge=_(_(_(h(_(h(p(ue,ie),P[1]),_(h(p(_e,V),-F[1]),h(p(Q,U),I[1]))),S[2]),_(h(_(h(p(ue,ie),S[1]),_(h(p(se,ae),-F[1]),h(p(Z,X),I[1]))),-P[2]),h(_(h(p(_e,V),S[1]),_(h(p(se,ae),-P[1]),h(p(J,j),I[1]))),F[2]))),_(h(_(h(p(Q,U),S[1]),_(h(p(Z,X),-P[1]),h(p(J,j),F[1]))),-I[2]),_(h(_(h(p(ue,ie),S[1]),_(h(p(se,ae),-F[1]),h(p(Z,X),I[1]))),E[2]),h(_(h(p(ue,ie),E[1]),_(h(p(ne,H),-F[1]),h(p(re,z),I[1]))),-S[2])))),_(_(h(_(h(p(se,ae),E[1]),_(h(p(ne,H),-S[1]),h(p(ee,R),I[1]))),F[2]),_(h(_(h(p(Z,X),E[1]),_(h(p(re,z),-S[1]),h(p(ee,R),F[1]))),-I[2]),h(_(h(p(Q,U),S[1]),_(h(p(Z,X),-P[1]),h(p(J,j),F[1]))),E[2]))),_(h(_(h(p(Q,U),E[1]),_(h(p(re,z),-P[1]),h(p(K,O),F[1]))),-S[2]),_(h(_(h(p(Z,X),E[1]),_(h(p(re,z),-S[1]),h(p(ee,R),F[1]))),P[2]),h(_(h(p(J,j),E[1]),_(h(p(K,O),-S[1]),h(p(ee,R),P[1]))),-F[2]))))),xe=_(_(_(h(_(h(p(ue,ie),P[1]),_(h(p(_e,V),-F[1]),h(p(Q,U),I[1]))),E[2]),h(_(h(p(ue,ie),E[1]),_(h(p(ne,H),-F[1]),h(p(re,z),I[1]))),-P[2])),_(h(_(h(p(_e,V),E[1]),_(h(p(ne,H),-P[1]),h(p(K,O),I[1]))),F[2]),h(_(h(p(Q,U),E[1]),_(h(p(re,z),-P[1]),h(p(K,O),F[1]))),-I[2]))),_(_(h(_(h(p(_e,V),S[1]),_(h(p(se,ae),-P[1]),h(p(J,j),I[1]))),E[2]),h(_(h(p(_e,V),E[1]),_(h(p(ne,H),-P[1]),h(p(K,O),I[1]))),-S[2])),_(h(_(h(p(se,ae),E[1]),_(h(p(ne,H),-S[1]),h(p(ee,R),I[1]))),P[2]),h(_(h(p(J,j),E[1]),_(h(p(K,O),-S[1]),h(p(ee,R),P[1]))),-I[2])))),ye=p(ge,xe);return ye[ye.length-1]}return L}function m(_,p,w,h){function L(E,S,P,F,I,D){var R=_(_(w(E[0],E[0]),w(E[1],E[1])),_(w(E[2],E[2]),w(E[3],E[3]))),O=h(R,S[0]),z=h(R,P[0]),H=h(R,F[0]),Y=h(R,I[0]),ee=h(R,D[0]),j=_(_(w(S[0],S[0]),w(S[1],S[1])),_(w(S[2],S[2]),w(S[3],S[3]))),X=h(j,E[0]),ae=h(j,P[0]),fe=h(j,F[0]),K=h(j,I[0]),J=h(j,D[0]),U=_(_(w(P[0],P[0]),w(P[1],P[1])),_(w(P[2],P[2]),w(P[3],P[3]))),V=h(U,E[0]),q=h(U,S[0]),re=h(U,F[0]),Z=h(U,I[0]),Q=h(U,D[0]),ie=_(_(w(F[0],F[0]),w(F[1],F[1])),_(w(F[2],F[2]),w(F[3],F[3]))),oe=h(ie,E[0]),ne=h(ie,S[0]),se=h(ie,P[0]),_e=h(ie,I[0]),ue=h(ie,D[0]),ge=_(_(w(I[0],I[0]),w(I[1],I[1])),_(w(I[2],I[2]),w(I[3],I[3]))),xe=h(ge,E[0]),ye=h(ge,S[0]),be=h(ge,P[0]),Se=h(ge,F[0]),Re=h(ge,D[0]),Ve=_(_(w(D[0],D[0]),w(D[1],D[1])),_(w(D[2],D[2]),w(D[3],D[3]))),Ae=h(Ve,E[0]),Ce=h(Ve,S[0]),Ze=h(Ve,P[0]),Ye=h(Ve,F[0]),ze=h(Ve,I[0]),Ie=_(_(_(h(_(_(h(_(h(p(ze,Re),F[1]),_(h(p(Ye,ue),-I[1]),h(p(Se,_e),D[1]))),P[2]),h(_(h(p(ze,Re),P[1]),_(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),P[1]),_(h(p(Ze,Q),-F[1]),h(p(se,re),D[1]))),I[2]),h(_(h(p(Se,_e),P[1]),_(h(p(be,Z),-F[1]),h(p(se,re),I[1]))),-D[2]))),S[3]),_(h(_(_(h(_(h(p(ze,Re),F[1]),_(h(p(Ye,ue),-I[1]),h(p(Se,_e),D[1]))),S[2]),h(_(h(p(ze,Re),S[1]),_(h(p(Ce,J),-I[1]),h(p(ye,K),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),S[1]),_(h(p(Ce,J),-F[1]),h(p(ne,fe),D[1]))),I[2]),h(_(h(p(Se,_e),S[1]),_(h(p(ye,K),-F[1]),h(p(ne,fe),I[1]))),-D[2]))),-P[3]),h(_(_(h(_(h(p(ze,Re),P[1]),_(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),S[2]),h(_(h(p(ze,Re),S[1]),_(h(p(Ce,J),-I[1]),h(p(ye,K),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),S[1]),_(h(p(Ce,J),-P[1]),h(p(q,ae),D[1]))),I[2]),h(_(h(p(be,Z),S[1]),_(h(p(ye,K),-P[1]),h(p(q,ae),I[1]))),-D[2]))),F[3]))),_(_(h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(Ze,Q),-F[1]),h(p(se,re),D[1]))),S[2]),h(_(h(p(Ye,ue),S[1]),_(h(p(Ce,J),-F[1]),h(p(ne,fe),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),S[1]),_(h(p(Ce,J),-P[1]),h(p(q,ae),D[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(ne,fe),-P[1]),h(p(q,ae),F[1]))),-D[2]))),-I[3]),h(_(_(h(_(h(p(Se,_e),P[1]),_(h(p(be,Z),-F[1]),h(p(se,re),I[1]))),S[2]),h(_(h(p(Se,_e),S[1]),_(h(p(ye,K),-F[1]),h(p(ne,fe),I[1]))),-P[2])),_(h(_(h(p(be,Z),S[1]),_(h(p(ye,K),-P[1]),h(p(q,ae),I[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(ne,fe),-P[1]),h(p(q,ae),F[1]))),-I[2]))),D[3])),_(h(_(_(h(_(h(p(ze,Re),F[1]),_(h(p(Ye,ue),-I[1]),h(p(Se,_e),D[1]))),S[2]),h(_(h(p(ze,Re),S[1]),_(h(p(Ce,J),-I[1]),h(p(ye,K),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),S[1]),_(h(p(Ce,J),-F[1]),h(p(ne,fe),D[1]))),I[2]),h(_(h(p(Se,_e),S[1]),_(h(p(ye,K),-F[1]),h(p(ne,fe),I[1]))),-D[2]))),E[3]),h(_(_(h(_(h(p(ze,Re),F[1]),_(h(p(Ye,ue),-I[1]),h(p(Se,_e),D[1]))),E[2]),h(_(h(p(ze,Re),E[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),E[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,H),D[1]))),I[2]),h(_(h(p(Se,_e),E[1]),_(h(p(xe,Y),-F[1]),h(p(oe,H),I[1]))),-D[2]))),-S[3])))),_(_(_(h(_(_(h(_(h(p(ze,Re),S[1]),_(h(p(Ce,J),-I[1]),h(p(ye,K),D[1]))),E[2]),h(_(h(p(ze,Re),E[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-S[2])),_(h(_(h(p(Ce,J),E[1]),_(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),I[2]),h(_(h(p(ye,K),E[1]),_(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),-D[2]))),F[3]),h(_(_(h(_(h(p(Ye,ue),S[1]),_(h(p(Ce,J),-F[1]),h(p(ne,fe),D[1]))),E[2]),h(_(h(p(Ye,ue),E[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,H),D[1]))),-S[2])),_(h(_(h(p(Ce,J),E[1]),_(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),F[2]),h(_(h(p(ne,fe),E[1]),_(h(p(oe,H),-S[1]),h(p(X,O),F[1]))),-D[2]))),-I[3])),_(h(_(_(h(_(h(p(Se,_e),S[1]),_(h(p(ye,K),-F[1]),h(p(ne,fe),I[1]))),E[2]),h(_(h(p(Se,_e),E[1]),_(h(p(xe,Y),-F[1]),h(p(oe,H),I[1]))),-S[2])),_(h(_(h(p(ye,K),E[1]),_(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),F[2]),h(_(h(p(ne,fe),E[1]),_(h(p(oe,H),-S[1]),h(p(X,O),F[1]))),-I[2]))),D[3]),h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(Ze,Q),-F[1]),h(p(se,re),D[1]))),S[2]),h(_(h(p(Ye,ue),S[1]),_(h(p(Ce,J),-F[1]),h(p(ne,fe),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),S[1]),_(h(p(Ce,J),-P[1]),h(p(q,ae),D[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(ne,fe),-P[1]),h(p(q,ae),F[1]))),-D[2]))),E[3]))),_(_(h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(Ze,Q),-F[1]),h(p(se,re),D[1]))),E[2]),h(_(h(p(Ye,ue),E[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,H),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),E[1]),_(h(p(Ae,ee),-P[1]),h(p(V,z),D[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(oe,H),-P[1]),h(p(V,z),F[1]))),-D[2]))),-S[3]),h(_(_(h(_(h(p(Ye,ue),S[1]),_(h(p(Ce,J),-F[1]),h(p(ne,fe),D[1]))),E[2]),h(_(h(p(Ye,ue),E[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,H),D[1]))),-S[2])),_(h(_(h(p(Ce,J),E[1]),_(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),F[2]),h(_(h(p(ne,fe),E[1]),_(h(p(oe,H),-S[1]),h(p(X,O),F[1]))),-D[2]))),P[3])),_(h(_(_(h(_(h(p(Ze,Q),S[1]),_(h(p(Ce,J),-P[1]),h(p(q,ae),D[1]))),E[2]),h(_(h(p(Ze,Q),E[1]),_(h(p(Ae,ee),-P[1]),h(p(V,z),D[1]))),-S[2])),_(h(_(h(p(Ce,J),E[1]),_(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),P[2]),h(_(h(p(q,ae),E[1]),_(h(p(V,z),-S[1]),h(p(X,O),P[1]))),-D[2]))),-F[3]),h(_(_(h(_(h(p(se,re),S[1]),_(h(p(ne,fe),-P[1]),h(p(q,ae),F[1]))),E[2]),h(_(h(p(se,re),E[1]),_(h(p(oe,H),-P[1]),h(p(V,z),F[1]))),-S[2])),_(h(_(h(p(ne,fe),E[1]),_(h(p(oe,H),-S[1]),h(p(X,O),F[1]))),P[2]),h(_(h(p(q,ae),E[1]),_(h(p(V,z),-S[1]),h(p(X,O),P[1]))),-F[2]))),D[3]))))),Ge=_(_(_(h(_(_(h(_(h(p(ze,Re),F[1]),_(h(p(Ye,ue),-I[1]),h(p(Se,_e),D[1]))),P[2]),h(_(h(p(ze,Re),P[1]),_(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),P[1]),_(h(p(Ze,Q),-F[1]),h(p(se,re),D[1]))),I[2]),h(_(h(p(Se,_e),P[1]),_(h(p(be,Z),-F[1]),h(p(se,re),I[1]))),-D[2]))),E[3]),_(h(_(_(h(_(h(p(ze,Re),F[1]),_(h(p(Ye,ue),-I[1]),h(p(Se,_e),D[1]))),E[2]),h(_(h(p(ze,Re),E[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),E[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,H),D[1]))),I[2]),h(_(h(p(Se,_e),E[1]),_(h(p(xe,Y),-F[1]),h(p(oe,H),I[1]))),-D[2]))),-P[3]),h(_(_(h(_(h(p(ze,Re),P[1]),_(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),E[2]),h(_(h(p(ze,Re),E[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),E[1]),_(h(p(Ae,ee),-P[1]),h(p(V,z),D[1]))),I[2]),h(_(h(p(be,Z),E[1]),_(h(p(xe,Y),-P[1]),h(p(V,z),I[1]))),-D[2]))),F[3]))),_(_(h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(Ze,Q),-F[1]),h(p(se,re),D[1]))),E[2]),h(_(h(p(Ye,ue),E[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,H),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),E[1]),_(h(p(Ae,ee),-P[1]),h(p(V,z),D[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(oe,H),-P[1]),h(p(V,z),F[1]))),-D[2]))),-I[3]),h(_(_(h(_(h(p(Se,_e),P[1]),_(h(p(be,Z),-F[1]),h(p(se,re),I[1]))),E[2]),h(_(h(p(Se,_e),E[1]),_(h(p(xe,Y),-F[1]),h(p(oe,H),I[1]))),-P[2])),_(h(_(h(p(be,Z),E[1]),_(h(p(xe,Y),-P[1]),h(p(V,z),I[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(oe,H),-P[1]),h(p(V,z),F[1]))),-I[2]))),D[3])),_(h(_(_(h(_(h(p(ze,Re),P[1]),_(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),S[2]),h(_(h(p(ze,Re),S[1]),_(h(p(Ce,J),-I[1]),h(p(ye,K),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),S[1]),_(h(p(Ce,J),-P[1]),h(p(q,ae),D[1]))),I[2]),h(_(h(p(be,Z),S[1]),_(h(p(ye,K),-P[1]),h(p(q,ae),I[1]))),-D[2]))),E[3]),h(_(_(h(_(h(p(ze,Re),P[1]),_(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),E[2]),h(_(h(p(ze,Re),E[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),_(h(_(h(p(Ze,Q),E[1]),_(h(p(Ae,ee),-P[1]),h(p(V,z),D[1]))),I[2]),h(_(h(p(be,Z),E[1]),_(h(p(xe,Y),-P[1]),h(p(V,z),I[1]))),-D[2]))),-S[3])))),_(_(_(h(_(_(h(_(h(p(ze,Re),S[1]),_(h(p(Ce,J),-I[1]),h(p(ye,K),D[1]))),E[2]),h(_(h(p(ze,Re),E[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-S[2])),_(h(_(h(p(Ce,J),E[1]),_(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),I[2]),h(_(h(p(ye,K),E[1]),_(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),-D[2]))),P[3]),h(_(_(h(_(h(p(Ze,Q),S[1]),_(h(p(Ce,J),-P[1]),h(p(q,ae),D[1]))),E[2]),h(_(h(p(Ze,Q),E[1]),_(h(p(Ae,ee),-P[1]),h(p(V,z),D[1]))),-S[2])),_(h(_(h(p(Ce,J),E[1]),_(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),P[2]),h(_(h(p(q,ae),E[1]),_(h(p(V,z),-S[1]),h(p(X,O),P[1]))),-D[2]))),-I[3])),_(h(_(_(h(_(h(p(be,Z),S[1]),_(h(p(ye,K),-P[1]),h(p(q,ae),I[1]))),E[2]),h(_(h(p(be,Z),E[1]),_(h(p(xe,Y),-P[1]),h(p(V,z),I[1]))),-S[2])),_(h(_(h(p(ye,K),E[1]),_(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),P[2]),h(_(h(p(q,ae),E[1]),_(h(p(V,z),-S[1]),h(p(X,O),P[1]))),-I[2]))),D[3]),h(_(_(h(_(h(p(Se,_e),P[1]),_(h(p(be,Z),-F[1]),h(p(se,re),I[1]))),S[2]),h(_(h(p(Se,_e),S[1]),_(h(p(ye,K),-F[1]),h(p(ne,fe),I[1]))),-P[2])),_(h(_(h(p(be,Z),S[1]),_(h(p(ye,K),-P[1]),h(p(q,ae),I[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(ne,fe),-P[1]),h(p(q,ae),F[1]))),-I[2]))),E[3]))),_(_(h(_(_(h(_(h(p(Se,_e),P[1]),_(h(p(be,Z),-F[1]),h(p(se,re),I[1]))),E[2]),h(_(h(p(Se,_e),E[1]),_(h(p(xe,Y),-F[1]),h(p(oe,H),I[1]))),-P[2])),_(h(_(h(p(be,Z),E[1]),_(h(p(xe,Y),-P[1]),h(p(V,z),I[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(oe,H),-P[1]),h(p(V,z),F[1]))),-I[2]))),-S[3]),h(_(_(h(_(h(p(Se,_e),S[1]),_(h(p(ye,K),-F[1]),h(p(ne,fe),I[1]))),E[2]),h(_(h(p(Se,_e),E[1]),_(h(p(xe,Y),-F[1]),h(p(oe,H),I[1]))),-S[2])),_(h(_(h(p(ye,K),E[1]),_(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),F[2]),h(_(h(p(ne,fe),E[1]),_(h(p(oe,H),-S[1]),h(p(X,O),F[1]))),-I[2]))),P[3])),_(h(_(_(h(_(h(p(be,Z),S[1]),_(h(p(ye,K),-P[1]),h(p(q,ae),I[1]))),E[2]),h(_(h(p(be,Z),E[1]),_(h(p(xe,Y),-P[1]),h(p(V,z),I[1]))),-S[2])),_(h(_(h(p(ye,K),E[1]),_(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),P[2]),h(_(h(p(q,ae),E[1]),_(h(p(V,z),-S[1]),h(p(X,O),P[1]))),-I[2]))),-F[3]),h(_(_(h(_(h(p(se,re),S[1]),_(h(p(ne,fe),-P[1]),h(p(q,ae),F[1]))),E[2]),h(_(h(p(se,re),E[1]),_(h(p(oe,H),-P[1]),h(p(V,z),F[1]))),-S[2])),_(h(_(h(p(ne,fe),E[1]),_(h(p(oe,H),-S[1]),h(p(X,O),F[1]))),P[2]),h(_(h(p(q,ae),E[1]),_(h(p(V,z),-S[1]),h(p(X,O),P[1]))),-F[2]))),I[3]))))),dt=p(Ie,Ge);return dt[dt.length-1]}return L}var l=[s,o,b];function y(_){var p=l[_.length];return p||(p=l[_.length]=v(_.length)),p.apply(void 0,_)}function u(_,p,w,h,L,E,S,P){function F(I,D,R,O,z,H){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,D);case 3:return L(I,D,R);case 4:return E(I,D,R,O);case 5:return S(I,D,R,O,z);case 6:return P(I,D,R,O,z,H)}for(var Y=new Array(arguments.length),ee=0;ee<arguments.length;++ee)Y[ee]=arguments[ee];return _(Y)}return F}function A(){for(;l.length<=r;)l.push(v(l.length));M.exports=u.apply(void 0,[y].concat(l));for(var _=0;_<=r;++_)M.exports[_]=l[_]}A()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(f,M,T){var e=f("robust-determinant"),a=6;function i(l){var y=l===2?v:l===3?s:l===4?o:l===5?b:g;return l<6?y(e[l]):y(e)}function n(){return[[0]]}function r(l,y){return[[y[0]],[l[0][0]]]}function v(l){return function(u,A){return[l([[+A[0],+u[0][1]],[+A[1],+u[1][1]]]),l([[+u[0][0],+A[0]],[+u[1][0],+A[1]]]),l(u)]}}function s(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2]],[+A[1],+u[1][1],+u[1][2]],[+A[2],+u[2][1],+u[2][2]]]),l([[+u[0][0],+A[0],+u[0][2]],[+u[1][0],+A[1],+u[1][2]],[+u[2][0],+A[2],+u[2][2]]]),l([[+u[0][0],+u[0][1],+A[0]],[+u[1][0],+u[1][1],+A[1]],[+u[2][0],+u[2][1],+A[2]]]),l(u)]}}function o(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3]],[+A[1],+u[1][1],+u[1][2],+u[1][3]],[+A[2],+u[2][1],+u[2][2],+u[2][3]],[+A[3],+u[3][1],+u[3][2],+u[3][3]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3]],[+u[1][0],+A[1],+u[1][2],+u[1][3]],[+u[2][0],+A[2],+u[2][2],+u[2][3]],[+u[3][0],+A[3],+u[3][2],+u[3][3]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3]],[+u[1][0],+u[1][1],+A[1],+u[1][3]],[+u[2][0],+u[2][1],+A[2],+u[2][3]],[+u[3][0],+u[3][1],+A[3],+u[3][3]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+A[3]]]),l(u)]}}function b(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4]],[+A[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4]],[+A[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4]],[+A[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4]],[+A[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3],+u[0][4]],[+u[1][0],+A[1],+u[1][2],+u[1][3],+u[1][4]],[+u[2][0],+A[2],+u[2][2],+u[2][3],+u[2][4]],[+u[3][0],+A[3],+u[3][2],+u[3][3],+u[3][4]],[+u[4][0],+A[4],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3],+u[0][4]],[+u[1][0],+u[1][1],+A[1],+u[1][3],+u[1][4]],[+u[2][0],+u[2][1],+A[2],+u[2][3],+u[2][4]],[+u[3][0],+u[3][1],+A[3],+u[3][3],+u[3][4]],[+u[4][0],+u[4][1],+A[4],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0],+u[0][4]],[+u[1][0],+u[1][1],+u[1][2],+A[1],+u[1][4]],[+u[2][0],+u[2][1],+u[2][2],+A[2],+u[2][4]],[+u[3][0],+u[3][1],+u[3][2],+A[3],+u[3][4]],[+u[4][0],+u[4][1],+u[4][2],+A[4],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+A[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+A[4]]]),l(u)]}}function g(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+A[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+A[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+A[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+A[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+A[5],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+A[1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+A[2],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+A[3],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+A[4],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+A[5],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+A[1],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+A[2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+A[3],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+A[4],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+A[5],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+A[1],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+A[2],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+A[3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+A[4],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+A[5],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+A[0],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+A[1],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+A[2],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+A[3],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+A[4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+A[5],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+A[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+A[4]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+A[5]]]),l(u)]}}var d=[n,r];function c(l,y,u,A,_,p,w,h){return function(E,S){switch(E.length){case 0:return l(E,S);case 1:return y(E,S);case 2:return u(E,S);case 3:return A(E,S);case 4:return _(E,S);case 5:return p(E,S)}var P=w[E.length];return P||(P=w[E.length]=h(E.length)),P(E,S)}}function m(){for(;d.length<a;)d.push(i(d.length));M.exports=c.apply(void 0,d.concat([d,i]));for(var l=0;l<a;++l)M.exports[l]=d[l]}m()},{"robust-determinant":280}],284:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),i=f("robust-scale"),n=f("robust-subtract"),r=5,v=11102230246251565e-32,s=(3+16*v)*v,o=(7+56*v)*v;function b(p,w,h,L){return function(S,P,F){var I=p(p(w(P[1],F[0]),w(-F[1],P[0])),p(w(S[1],P[0]),w(-P[1],S[0]))),D=p(w(S[1],F[0]),w(-F[1],S[0])),R=L(I,D);return R[R.length-1]}}function g(p,w,h,L){return function(S,P,F,I){var D=p(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),P[2]),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),S[2]),p(h(p(w(S[1],I[0]),w(-I[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),I[2])))),R=p(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),S[2]),p(h(p(w(S[1],I[0]),w(-I[1],S[0])),-F[2]),h(p(w(S[1],F[0]),w(-F[1],S[0])),I[2]))),p(h(p(w(P[1],F[0]),w(-F[1],P[0])),S[2]),p(h(p(w(S[1],F[0]),w(-F[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),F[2])))),O=L(D,R);return O[O.length-1]}}function d(p,w,h,L){return function(S,P,F,I,D){var R=p(p(p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),F[2]),p(h(p(w(F[1],D[0]),w(-D[1],F[0])),-I[2]),h(p(w(F[1],I[0]),w(-I[1],F[0])),D[2]))),P[3]),p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-I[2]),h(p(w(P[1],I[0]),w(-I[1],P[0])),D[2]))),-F[3]),h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),D[2]))),I[3]))),p(h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),P[2]),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),-D[3]),p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-I[2]),h(p(w(P[1],I[0]),w(-I[1],P[0])),D[2]))),S[3]),h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),S[2]),p(h(p(w(S[1],D[0]),w(-D[1],S[0])),-I[2]),h(p(w(S[1],I[0]),w(-I[1],S[0])),D[2]))),-P[3])))),p(p(h(p(h(p(w(P[1],D[0]),w(-D[1],P[0])),S[2]),p(h(p(w(S[1],D[0]),w(-D[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),D[2]))),I[3]),p(h(p(h(p(w(P[1],I[0]),w(-I[1],P[0])),S[2]),p(h(p(w(S[1],I[0]),w(-I[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),I[2]))),-D[3]),h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),P[2]),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),S[3]))),p(h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),S[2]),p(h(p(w(S[1],I[0]),w(-I[1],S[0])),-F[2]),h(p(w(S[1],F[0]),w(-F[1],S[0])),I[2]))),-P[3]),p(h(p(h(p(w(P[1],I[0]),w(-I[1],P[0])),S[2]),p(h(p(w(S[1],I[0]),w(-I[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),I[2]))),F[3]),h(p(h(p(w(P[1],F[0]),w(-F[1],P[0])),S[2]),p(h(p(w(S[1],F[0]),w(-F[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),F[2]))),-I[3]))))),O=p(p(p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),F[2]),p(h(p(w(F[1],D[0]),w(-D[1],F[0])),-I[2]),h(p(w(F[1],I[0]),w(-I[1],F[0])),D[2]))),S[3]),h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),S[2]),p(h(p(w(S[1],D[0]),w(-D[1],S[0])),-I[2]),h(p(w(S[1],I[0]),w(-I[1],S[0])),D[2]))),-F[3])),p(h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),S[2]),p(h(p(w(S[1],D[0]),w(-D[1],S[0])),-F[2]),h(p(w(S[1],F[0]),w(-F[1],S[0])),D[2]))),I[3]),h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),S[2]),p(h(p(w(S[1],I[0]),w(-I[1],S[0])),-F[2]),h(p(w(S[1],F[0]),w(-F[1],S[0])),I[2]))),-D[3]))),p(p(h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),D[2]))),S[3]),h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),S[2]),p(h(p(w(S[1],D[0]),w(-D[1],S[0])),-F[2]),h(p(w(S[1],F[0]),w(-F[1],S[0])),D[2]))),-P[3])),p(h(p(h(p(w(P[1],D[0]),w(-D[1],P[0])),S[2]),p(h(p(w(S[1],D[0]),w(-D[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),D[2]))),F[3]),h(p(h(p(w(P[1],F[0]),w(-F[1],P[0])),S[2]),p(h(p(w(S[1],F[0]),w(-F[1],S[0])),-P[2]),h(p(w(S[1],P[0]),w(-P[1],S[0])),F[2]))),-D[3])))),z=L(R,O);return z[z.length-1]}}function c(p){var w=p===3?b:p===4?g:d;return w(a,e,i,n)}var m=c(3),l=c(4),y=[function(){return 0},function(){return 0},function(w,h){return h[0]-w[0]},function(w,h,L){var E=(w[1]-L[1])*(h[0]-L[0]),S=(w[0]-L[0])*(h[1]-L[1]),P=E-S,F;if(E>0){if(S<=0)return P;F=E+S}else if(E<0){if(S>=0)return P;F=-(E+S)}else return P;var I=s*F;return P>=I||P<=-I?P:m(w,h,L)},function(w,h,L,E){var S=w[0]-E[0],P=h[0]-E[0],F=L[0]-E[0],I=w[1]-E[1],D=h[1]-E[1],R=L[1]-E[1],O=w[2]-E[2],z=h[2]-E[2],H=L[2]-E[2],Y=P*R,ee=F*D,j=F*I,X=S*R,ae=S*D,fe=P*I,K=O*(Y-ee)+z*(j-X)+H*(ae-fe),J=(Math.abs(Y)+Math.abs(ee))*Math.abs(O)+(Math.abs(j)+Math.abs(X))*Math.abs(z)+(Math.abs(ae)+Math.abs(fe))*Math.abs(H),U=o*J;return K>U||-K>U?K:l(w,h,L,E)}];function u(p){var w=y[p.length];return w||(w=y[p.length]=c(p.length)),w.apply(void 0,p)}function A(p,w,h,L,E,S,P){return function(I,D,R,O,z){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,D);case 3:return E(I,D,R);case 4:return S(I,D,R,O);case 5:return P(I,D,R,O,z)}for(var H=new Array(arguments.length),Y=0;Y<arguments.length;++Y)H[Y]=arguments[Y];return p(H)}}function _(){for(;y.length<=r;)y.push(c(y.length));M.exports=A.apply(void 0,[u].concat(y));for(var p=0;p<=r;++p)M.exports[p]=y[p]}_()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(f,M,T){var e=f("robust-sum"),a=f("robust-scale");M.exports=i;function i(n,r){if(n.length===1)return a(r,n[0]);if(r.length===1)return a(n,r[0]);if(n.length===0||r.length===0)return[0];var v=[0];if(n.length<r.length)for(var s=0;s<n.length;++s)v=e(v,a(r,n[s]));else for(var s=0;s<r.length;++s)v=e(v,a(n,r[s]));return v}},{"robust-scale":286,"robust-sum":289}],286:[function(f,M,T){var e=f("two-product"),a=f("two-sum");M.exports=i;function i(n,r){var v=n.length;if(v===1){var s=e(n[0],r);return s[0]?s:[s[1]]}var o=new Array(2*v),b=[.1,.1],g=[.1,.1],d=0;e(n[0],r,b),b[0]&&(o[d++]=b[0]);for(var c=1;c<v;++c){e(n[c],r,g);var m=b[1];a(m,g[0],b),b[0]&&(o[d++]=b[0]);var l=g[1],y=b[1],u=l+y,A=u-l,_=y-A;b[1]=u,_&&(o[d++]=_)}return b[1]&&(o[d++]=b[1]),d===0&&(o[d++]=0),o.length=d,o}},{"two-product":306,"two-sum":307}],287:[function(f,M,T){M.exports=i;var e=f("robust-orientation")[3];function a(n,r,v,s){for(var o=0;o<2;++o){var b=n[o],g=r[o],d=Math.min(b,g),c=Math.max(b,g),m=v[o],l=s[o],y=Math.min(m,l),u=Math.max(m,l);if(u<d||c<y)return!1}return!0}function i(n,r,v,s){var o=e(n,v,s),b=e(r,v,s);if(o>0&&b>0||o<0&&b<0)return!1;var g=e(v,n,r),d=e(s,n,r);return g>0&&d>0||g<0&&d<0?!1:o===0&&b===0&&g===0&&d===0?a(n,r,v,s):!0}},{"robust-orientation":284}],288:[function(f,M,T){M.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],-n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,c=Math.abs,m=i[g],l=c(m),y=-n[d],u=c(y),A,_;l<u?(_=m,g+=1,g<r&&(m=i[g],l=c(m))):(_=y,d+=1,d<v&&(y=-n[d],u=c(y))),g<r&&l<u||d>=v?(A=m,g+=1,g<r&&(m=i[g],l=c(m))):(A=y,d+=1,d<v&&(y=-n[d],u=c(y)));for(var p=A+_,w=p-A,h=_-w,L=h,E=p,S,P,F,I,D;g<r&&d<v;)l<u?(A=m,g+=1,g<r&&(m=i[g],l=c(m))):(A=y,d+=1,d<v&&(y=-n[d],u=c(y))),_=L,p=A+_,w=p-A,h=_-w,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S;for(;g<r;)A=m,_=L,p=A+_,w=p-A,h=_-w,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,g+=1,g<r&&(m=i[g]);for(;d<v;)A=y,_=L,p=A+_,w=p-A,h=_-w,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,d+=1,d<v&&(y=-n[d]);return L&&(o[b++]=L),E&&(o[b++]=E),b||(o[b++]=0),o.length=b,o}},{}],289:[function(f,M,T){M.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,c=Math.abs,m=i[g],l=c(m),y=n[d],u=c(y),A,_;l<u?(_=m,g+=1,g<r&&(m=i[g],l=c(m))):(_=y,d+=1,d<v&&(y=n[d],u=c(y))),g<r&&l<u||d>=v?(A=m,g+=1,g<r&&(m=i[g],l=c(m))):(A=y,d+=1,d<v&&(y=n[d],u=c(y)));for(var p=A+_,w=p-A,h=_-w,L=h,E=p,S,P,F,I,D;g<r&&d<v;)l<u?(A=m,g+=1,g<r&&(m=i[g],l=c(m))):(A=y,d+=1,d<v&&(y=n[d],u=c(y))),_=L,p=A+_,w=p-A,h=_-w,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S;for(;g<r;)A=m,_=L,p=A+_,w=p-A,h=_-w,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,g+=1,g<r&&(m=i[g]);for(;d<v;)A=y,_=L,p=A+_,w=p-A,h=_-w,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,d+=1,d<v&&(y=n[d]);return L&&(o[b++]=L),E&&(o[b++]=E),b||(o[b++]=0),o.length=b,o}},{}],290:[function(f,M,T){M.exports=i;var e=f("boundary-cells"),a=f("reduce-simplicial-complex");function i(n){return a(e(n))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(f,M,T){M.exports=d;var e=f("ndarray"),a=f("typedarray-pool"),i=f("ndarray-sort"),n=f("./lib/codegen");function r(c){for(var m=c.length,l=0,y=0;y<m;++y)l=Math.max(l,c[y].length)|0;return l-1}function v(c,m){for(var l=c.length,y=a.mallocUint8(l),u=0;u<l;++u)y[u]=c[u]<m|0;return y}function s(c,m){for(var l=c.length,y=m*(m+1)/2*l|0,u=a.mallocUint32(y*2),A=0,_=0;_<l;++_)for(var p=c[_],m=p.length,w=0;w<m;++w)for(var h=0;h<w;++h){var L=p[h],E=p[w];u[A++]=Math.min(L,E)|0,u[A++]=Math.max(L,E)|0}var S=A/2|0;i(e(u,[S,2]));for(var P=2,_=2;_<A;_+=2)u[_-2]===u[_]&&u[_-1]===u[_+1]||(u[P++]=u[_],u[P++]=u[_+1]);return e(u,[P/2|0,2])}function o(c,m,l,y){for(var u=c.data,A=c.shape[0],_=a.mallocDouble(A),p=0,w=0;w<A;++w){var h=u[2*w],L=u[2*w+1];if(l[h]!==l[L]){var E=m[h],S=m[L];u[2*p]=h,u[2*p+1]=L,_[p++]=(S-y)/(S-E)}}return c.shape[0]=p,e(_,[p])}function b(c,m){var l=a.mallocInt32(m*2),y=c.shape[0],u=c.data;l[0]=0;for(var A=0,_=0;_<y;++_){var p=u[2*_];if(p!==A){for(l[2*A+1]=_;++A<p;)l[2*A]=_,l[2*A+1]=_;l[2*A]=_}}for(l[2*A+1]=y;++A<m;)l[2*A]=l[2*A+1]=y;return l}function g(c){for(var m=c.shape[0]|0,l=c.data,y=new Array(m),u=0;u<m;++u)y[u]=[l[2*u],l[2*u+1]];return y}function d(c,m,l,y){l=l||0,typeof y>"u"&&(y=r(c));var u=c.length;if(u===0||y<1)return{cells:[],vertexIds:[],vertexWeights:[]};var A=v(m,+l),_=s(c,y),p=o(_,m,A,+l),w=b(_,m.length|0),h=n(y)(c,_.data,w,A),L=g(_),E=[].slice.call(p.data,0,p.shape[0]);return a.free(A),a.free(_.data),a.free(p.data),a.free(w),{cells:h,vertexIds:L,vertexWeights:E}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(f,M,T){M.exports=a;var e=[function(){function n(r,v,s,o){for(var b=r.length,g=[],d=0;d<b;++d){var c=r[d];c.length}return g}return n},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,c=v[2*g],m=v[2*g+1];c<m;){var l=c+m>>1,y=s[2*l+1];if(y===d)return l;d<y?m=l:c=l+1}return c}function r(v,s,o,b){for(var g=v.length,d=[],c=0;c<g;++c){var m=v[c],l=m.length;if(l===2){var y=(b[m[0]]<<0)+(b[m[1]]<<1);if(y===0||y===3)continue;switch(y){case 0:break;case 1:d.push([n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,c=v[2*g],m=v[2*g+1];c<m;){var l=c+m>>1,y=s[2*l+1];if(y===d)return l;d<y?m=l:c=l+1}return c}function r(v,s,o,b){for(var g=v.length,d=[],c=0;c<g;++c){var m=v[c],l=m.length;if(l===3){var y=(b[m[0]]<<0)+(b[m[1]]<<1)+(b[m[2]]<<2);if(y===0||y===7)continue;switch(y){case 0:break;case 1:d.push([n(o,s,m[0],m[2]),n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0]),n(o,s,m[1],m[2])]);break;case 3:d.push([n(o,s,m[0],m[2]),n(o,s,m[1],m[2])]);break;case 4:d.push([n(o,s,m[2],m[1]),n(o,s,m[2],m[0])]);break;case 5:d.push([n(o,s,m[2],m[1]),n(o,s,m[0],m[1])]);break;case 6:d.push([n(o,s,m[1],m[0]),n(o,s,m[2],m[0])]);break}}else if(l===2){var y=(b[m[0]]<<0)+(b[m[1]]<<1);if(y===0||y===3)continue;switch(y){case 0:break;case 1:d.push([n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,c=v[2*g],m=v[2*g+1];c<m;){var l=c+m>>1,y=s[2*l+1];if(y===d)return l;d<y?m=l:c=l+1}return c}function r(v,s,o,b){for(var g=v.length,d=[],c=0;c<g;++c){var m=v[c],l=m.length;if(l===4){var y=(b[m[0]]<<0)+(b[m[1]]<<1)+(b[m[2]]<<2)+(b[m[3]]<<3);if(y===0||y===15)continue;switch(y){case 0:break;case 1:d.push([n(o,s,m[0],m[1]),n(o,s,m[0],m[2]),n(o,s,m[0],m[3])]);break;case 2:d.push([n(o,s,m[1],m[2]),n(o,s,m[1],m[0]),n(o,s,m[1],m[3])]);break;case 3:d.push([n(o,s,m[1],m[2]),n(o,s,m[0],m[2]),n(o,s,m[0],m[3])],[n(o,s,m[1],m[3]),n(o,s,m[1],m[2]),n(o,s,m[0],m[3])]);break;case 4:d.push([n(o,s,m[2],m[0]),n(o,s,m[2],m[1]),n(o,s,m[2],m[3])]);break;case 5:d.push([n(o,s,m[0],m[1]),n(o,s,m[2],m[1]),n(o,s,m[0],m[3])],[n(o,s,m[2],m[1]),n(o,s,m[2],m[3]),n(o,s,m[0],m[3])]);break;case 6:d.push([n(o,s,m[2],m[0]),n(o,s,m[1],m[0]),n(o,s,m[1],m[3])],[n(o,s,m[2],m[3]),n(o,s,m[2],m[0]),n(o,s,m[1],m[3])]);break;case 7:d.push([n(o,s,m[0],m[3]),n(o,s,m[1],m[3]),n(o,s,m[2],m[3])]);break;case 8:d.push([n(o,s,m[3],m[1]),n(o,s,m[3],m[0]),n(o,s,m[3],m[2])]);break;case 9:d.push([n(o,s,m[3],m[1]),n(o,s,m[0],m[1]),n(o,s,m[0],m[2])],[n(o,s,m[3],m[2]),n(o,s,m[3],m[1]),n(o,s,m[0],m[2])]);break;case 10:d.push([n(o,s,m[1],m[0]),n(o,s,m[3],m[0]),n(o,s,m[1],m[2])],[n(o,s,m[3],m[0]),n(o,s,m[3],m[2]),n(o,s,m[1],m[2])]);break;case 11:d.push([n(o,s,m[1],m[2]),n(o,s,m[0],m[2]),n(o,s,m[3],m[2])]);break;case 12:d.push([n(o,s,m[3],m[0]),n(o,s,m[2],m[0]),n(o,s,m[2],m[1])],[n(o,s,m[3],m[1]),n(o,s,m[3],m[0]),n(o,s,m[2],m[1])]);break;case 13:d.push([n(o,s,m[0],m[1]),n(o,s,m[2],m[1]),n(o,s,m[3],m[1])]);break;case 14:d.push([n(o,s,m[2],m[0]),n(o,s,m[1],m[0]),n(o,s,m[3],m[0])]);break}}else if(l===3){var y=(b[m[0]]<<0)+(b[m[1]]<<1)+(b[m[2]]<<2);if(y===0||y===7)continue;switch(y){case 0:break;case 1:d.push([n(o,s,m[0],m[2]),n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0]),n(o,s,m[1],m[2])]);break;case 3:d.push([n(o,s,m[0],m[2]),n(o,s,m[1],m[2])]);break;case 4:d.push([n(o,s,m[2],m[1]),n(o,s,m[2],m[0])]);break;case 5:d.push([n(o,s,m[2],m[1]),n(o,s,m[0],m[1])]);break;case 6:d.push([n(o,s,m[1],m[0]),n(o,s,m[2],m[0])]);break}}else if(l===2){var y=(b[m[0]]<<0)+(b[m[1]]<<1);if(y===0||y===3)continue;switch(y){case 0:break;case 1:d.push([n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0])]);break}}}return d}return r}];function a(i){return e[i]()}},{}],293:[function(f,M,T){var e=f("bit-twiddle"),a=f("union-find");function i(p){for(var w=0,h=Math.max,L=0,E=p.length;L<E;++L)w=h(w,p[L].length);return w-1}T.dimension=i;function n(p){for(var w=-1,h=Math.max,L=0,E=p.length;L<E;++L)for(var S=p[L],P=0,F=S.length;P<F;++P)w=h(w,S[P]);return w+1}T.countVertices=n;function r(p){for(var w=new Array(p.length),h=0,L=p.length;h<L;++h)w[h]=p[h].slice(0);return w}T.cloneCells=r;function v(p,w){var h=p.length,L=p.length-w.length,E=Math.min;if(L)return L;switch(h){case 0:return 0;case 1:return p[0]-w[0];case 2:var D=p[0]+p[1]-w[0]-w[1];return D||E(p[0],p[1])-E(w[0],w[1]);case 3:var S=p[0]+p[1],P=w[0]+w[1];if(D=S+p[2]-(P+w[2]),D)return D;var F=E(p[0],p[1]),I=E(w[0],w[1]),D=E(F,p[2])-E(I,w[2]);return D||E(F+p[2],S)-E(I+w[2],P);default:var R=p.slice(0);R.sort();var O=w.slice(0);O.sort();for(var z=0;z<h;++z)if(L=R[z]-O[z],L)return L;return 0}}T.compareCells=v;function s(p,w){return v(p[0],w[0])}function o(p,w){if(w){for(var h=p.length,L=new Array(h),E=0;E<h;++E)L[E]=[p[E],w[E]];L.sort(s);for(var E=0;E<h;++E)p[E]=L[E][0],w[E]=L[E][1];return p}else return p.sort(v),p}T.normalize=o;function b(p){if(p.length===0)return[];for(var w=1,h=p.length,L=1;L<h;++L){var E=p[L];if(v(E,p[L-1])){if(L===w){w++;continue}p[w++]=E}}return p.length=w,p}T.unique=b;function g(p,w){for(var h=0,L=p.length-1,E=-1;h<=L;){var S=h+L>>1,P=v(p[S],w);P<=0?(P===0&&(E=S),h=S+1):P>0&&(L=S-1)}return E}T.findCell=g;function d(p,w){for(var h=new Array(p.length),L=0,E=h.length;L<E;++L)h[L]=[];for(var S=[],L=0,P=w.length;L<P;++L)for(var F=w[L],I=F.length,D=1,R=1<<I;D<R;++D){S.length=e.popCount(D);for(var O=0,z=0;z<I;++z)D&1<<z&&(S[O++]=F[z]);var H=g(p,S);if(!(H<0))for(;h[H++].push(L),!(H>=p.length||v(p[H],S)!==0););}return h}T.incidence=d;function c(p,w){if(!w)return d(b(l(p,0)),p);for(var h=new Array(w),L=0;L<w;++L)h[L]=[];for(var L=0,E=p.length;L<E;++L)for(var S=p[L],P=0,F=S.length;P<F;++P)h[S[P]].push(L);return h}T.dual=c;function m(p){for(var w=[],h=0,L=p.length;h<L;++h)for(var E=p[h],S=E.length|0,P=1,F=1<<S;P<F;++P){for(var I=[],D=0;D<S;++D)P>>>D&1&&I.push(E[D]);w.push(I)}return o(w)}T.explode=m;function l(p,w){if(w<0)return[];for(var h=[],L=(1<<w+1)-1,E=0;E<p.length;++E)for(var S=p[E],P=L;P<1<<S.length;P=e.nextCombination(P)){for(var F=new Array(w+1),I=0,D=0;D<S.length;++D)P&1<<D&&(F[I++]=S[D]);h.push(F)}return o(h)}T.skeleton=l;function y(p){for(var w=[],h=0,L=p.length;h<L;++h)for(var E=p[h],S=0,P=E.length;S<P;++S){for(var F=new Array(E.length-1),I=0,D=0;I<P;++I)I!==S&&(F[D++]=E[I]);w.push(F)}return o(w)}T.boundary=y;function u(p,w){for(var h=new a(w),L=0;L<p.length;++L)for(var E=p[L],S=0;S<E.length;++S)for(var P=S+1;P<E.length;++P)h.link(E[S],E[P]);for(var F=[],I=h.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<p.length;++L){var D=h.find(p[L][0]);I[D]<0?(I[D]=F.length,F.push([p[L].slice(0)])):F[I[D]].push(p[L].slice(0))}return F}function A(p){for(var w=b(o(l(p,0))),h=new a(w.length),L=0;L<p.length;++L)for(var E=p[L],S=0;S<E.length;++S)for(var P=g(w,[E[S]]),F=S+1;F<E.length;++F)h.link(P,g(w,[E[F]]));for(var I=[],D=h.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<p.length;++L){var R=h.find(g(w,[p[L][0]]));D[R]<0?(D[R]=I.length,I.push([p[L].slice(0)])):I[D[R]].push(p[L].slice(0))}return I}function _(p,w){return w?u(p,w):A(p)}T.connectedComponents=_},{"bit-twiddle":32,"union-find":309}],294:[function(f,M,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(f,M,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(f,M,T){M.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var i=this.roots;i[a]!==a;){var n=i[a];i[a]=i[n],a=n}return a},e.prototype.link=function(a,i){var n=this.find(a),r=this.find(i);if(n!==r){var v=this.ranks,s=this.roots,o=v[n],b=v[r];o<b?s[n]=r:b<o?s[r]=n:(s[r]=n,++v[n])}}},{}],297:[function(f,M,T){M.exports=n;var e=f("robust-orientation"),a=f("simplicial-complex");function i(r,v,s){var o=Math.abs(e(r,v,s)),b=Math.sqrt(Math.pow(v[0]-s[0],2)+Math.pow(v[1]-s[1],2));return o/b}function n(r,v,s){for(var o=v.length,b=r.length,g=new Array(o),d=new Array(o),c=new Array(o),m=new Array(o),l=0;l<o;++l)g[l]=d[l]=-1,c[l]=1/0,m[l]=!1;for(var l=0;l<b;++l){var y=r[l];if(y.length!==2)throw new Error("Input must be a graph");var u=y[1],A=y[0];d[A]!==-1?d[A]=-2:d[A]=u,g[u]!==-1?g[u]=-2:g[u]=A}function _(j){if(m[j])return 1/0;var X=g[j],ae=d[j];return X<0||ae<0?1/0:i(v[j],v[X],v[ae])}function p(j,X){var ae=I[j],fe=I[X];I[j]=fe,I[X]=ae,D[ae]=X,D[fe]=j}function w(j){return c[I[j]]}function h(j){return j&1?j-1>>1:(j>>1)-1}function L(j){for(var X=w(j);;){var ae=X,fe=2*j+1,K=2*(j+1),J=j;if(fe<O){var U=w(fe);U<ae&&(J=fe,ae=U)}if(K<O){var V=w(K);V<ae&&(J=K)}if(J===j)return j;p(j,J),j=J}}function E(j){for(var X=w(j);j>0;){var ae=h(j);if(ae>=0){var fe=w(ae);if(X<fe){p(j,ae),j=ae;continue}}return j}}function S(){if(O>0){var j=I[0];return p(0,O-1),O-=1,L(0),j}return-1}function P(j,X){var ae=I[j];return c[ae]===X?j:(c[ae]=-1/0,E(j),S(),c[ae]=X,O+=1,E(O-1))}function F(j){if(!m[j]){m[j]=!0;var X=g[j],ae=d[j];g[ae]>=0&&(g[ae]=X),d[X]>=0&&(d[X]=ae),D[X]>=0&&P(D[X],_(X)),D[ae]>=0&&P(D[ae],_(ae))}}for(var I=[],D=new Array(o),l=0;l<o;++l){var R=c[l]=_(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var O=I.length,l=O>>1;l>=0;--l)L(l);for(;;){var z=S();if(z<0||c[z]>s)break;F(z)}for(var H=[],l=0;l<o;++l)m[l]||(D[l]=H.length,H.push(v[l].slice()));H.length;function Y(j,X){if(j[X]<0)return X;var ae=X,fe=X;do{var K=j[fe];if(!m[fe]||K<0||K===fe||(fe=K,K=j[fe],!m[fe]||K<0||K===fe))break;fe=K,ae=j[ae]}while(ae!==fe);for(var J=X;J!==fe;J=j[J])j[J]=fe;return fe}var ee=[];return r.forEach(function(j){var X=Y(g,j[0]),ae=Y(d,j[1]);if(X>=0&&ae>=0&&X!==ae){var fe=D[X],K=D[ae];fe!==K&&ee.push([fe,K])}}),a.unique(a.normalize(ee)),{positions:H,edges:ee}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(f,M,T){M.exports=i;var e=f("robust-orientation");function a(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else{var o=Math.min(n[0][1],n[1][1]),b=Math.max(n[0][1],n[1][1]),g=Math.min(r[0][1],r[1][1]),d=Math.max(r[0][1],r[1][1]);return b<g?b-g:o>d?o-d:b-d}var c,m;n[0][1]<n[1][1]?(c=n[0],m=n[1]):(c=n[1],m=n[0]);var l=e(s,v,c);return l||(l=e(s,v,m),l)?l:m-s}function i(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else return a(r,n);var o,b;if(n[0][0]<n[1][0])o=n[0],b=n[1];else if(n[0][0]>n[1][0])o=n[1],b=n[0];else return-a(n,r);var g=e(v,s,b),d=e(v,s,o);if(g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;if(g=e(b,o,s),d=e(b,o,v),g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;return s[0]-b[0]}},{"robust-orientation":284}],299:[function(f,M,T){M.exports=d;var e=f("binary-search-bounds"),a=f("functional-red-black-tree"),i=f("robust-orientation"),n=f("./lib/order-segments");function r(c,m,l){this.slabs=c,this.coordinates=m,this.horizontal=l}var v=r.prototype;function s(c,m){return c.y-m}function o(c,m){for(var l=null;c;){var y=c.key,u,A;y[0][0]<y[1][0]?(u=y[0],A=y[1]):(u=y[1],A=y[0]);var _=i(u,A,m);if(_<0)c=c.left;else if(_>0)if(m[0]!==y[1][0])l=c,c=c.right;else{var p=o(c.right,m);if(p)return p;c=c.left}else{if(m[0]!==y[1][0])return c;var p=o(c.right,m);if(p)return p;c=c.left}}return l}v.castUp=function(c){var m=e.le(this.coordinates,c[0]);if(m<0)return-1;this.slabs[m];var l=o(this.slabs[m],c),y=-1;if(l&&(y=l.value),this.coordinates[m]===c[0]){var u=null;if(l&&(u=l.key),m>0){var A=o(this.slabs[m-1],c);A&&(u?n(A.key,u)>0&&(u=A.key,y=A.value):(y=A.value,u=A.key))}var _=this.horizontal[m];if(_.length>0){var p=e.ge(_,c[1],s);if(p<_.length){var w=_[p];if(c[1]===w.y){if(w.closed)return w.index;for(;p<_.length-1&&_[p+1].y===c[1];)if(p=p+1,w=_[p],w.closed)return w.index;if(w.y===c[1]&&!w.start){if(p=p+1,p>=_.length)return y;w=_[p]}}if(w.start)if(u){var h=i(u[0],u[1],[c[0],w.y]);u[0][0]>u[1][0]&&(h=-h),h>0&&(y=w.index)}else y=w.index;else w.y!==c[1]&&(y=w.index)}}}return y};function b(c,m,l,y){this.y=c,this.index=m,this.start=l,this.closed=y}function g(c,m,l,y){this.x=c,this.segment=m,this.create=l,this.index=y}function d(c){for(var m=c.length,l=2*m,y=new Array(l),u=0;u<m;++u){var A=c[u],_=A[0][0]<A[1][0];y[2*u]=new g(A[0][0],A,_,u),y[2*u+1]=new g(A[1][0],A,!_,u)}y.sort(function(F,I){var D=F.x-I.x;return D||(D=F.create-I.create,D)?D:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var p=a(n),w=[],h=[],L=[],u=0;u<l;){for(var E=y[u].x,S=[];u<l;){var P=y[u];if(P.x!==E)break;u+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(S.push(new b(P.segment[0][1],P.index,!0,!0)),S.push(new b(P.segment[1][1],P.index,!1,!1))):(S.push(new b(P.segment[1][1],P.index,!0,!1)),S.push(new b(P.segment[0][1],P.index,!1,!0)))):P.create?p=p.insert(P.segment,P.index):p=p.remove(P.segment)}w.push(p.root),h.push(E),L.push(S)}return new r(w,h,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(f,M,T){var e=f("robust-dot-product"),a=f("robust-sum");M.exports=r,M.exports.positive=v,M.exports.negative=s;function i(o,b){var g=a(e(o,b),[b[b.length-1]]);return g[g.length-1]}function n(o,b,g,d){var c=d-b,m=-b/c;m<0?m=0:m>1&&(m=1);for(var l=1-m,y=o.length,u=new Array(y),A=0;A<y;++A)u[A]=m*o[A]+l*g[A];return u}function r(o,b){for(var g=[],d=[],c=i(o[o.length-1],b),m=o[o.length-1],l=o[0],y=0;y<o.length;++y,m=l){l=o[y];var u=i(l,b);if(c<0&&u>0||c>0&&u<0){var A=n(m,u,l,c);g.push(A),d.push(A.slice())}u<0?d.push(l.slice()):u>0?g.push(l.slice()):(g.push(l.slice()),d.push(l.slice())),c=u}return{positive:g,negative:d}}function v(o,b){for(var g=[],d=i(o[o.length-1],b),c=o[o.length-1],m=o[0],l=0;l<o.length;++l,c=m){m=o[l];var y=i(m,b);(d<0&&y>0||d>0&&y<0)&&g.push(n(c,y,m,d)),y>=0&&g.push(m.slice()),d=y}return g}function s(o,b){for(var g=[],d=i(o[o.length-1],b),c=o[o.length-1],m=o[0],l=0;l<o.length;++l,c=m){m=o[l];var y=i(m,b);(d<0&&y>0||d>0&&y<0)&&g.push(n(c,y,m,d)),y<=0&&g.push(m.slice()),d=y}return g}},{"robust-dot-product":281,"robust-sum":289}],301:[function(f,M,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(s){return n(v(s),arguments)}function i(s,o){return a.apply(null,[s].concat(o||[]))}function n(s,o){var b=1,g=s.length,d,c="",m,l,y,u,A,_,p,w;for(m=0;m<g;m++)if(typeof s[m]=="string")c+=s[m];else if(typeof s[m]=="object"){if(y=s[m],y.keys)for(d=o[b],l=0;l<y.keys.length;l++){if(d==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[l],y.keys[l-1]));d=d[y.keys[l]]}else y.param_no?d=o[y.param_no]:d=o[b++];if(e.not_type.test(y.type)&&e.not_primitive.test(y.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(y.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));switch(e.number.test(y.type)&&(p=d>=0),y.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,y.width?parseInt(y.width):0);break;case"e":d=y.precision?parseFloat(d).toExponential(y.precision):parseFloat(d).toExponential();break;case"f":d=y.precision?parseFloat(d).toFixed(y.precision):parseFloat(d);break;case"g":d=y.precision?String(Number(d.toPrecision(y.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=y.precision?d.substring(0,y.precision):d;break;case"t":d=String(!!d),d=y.precision?d.substring(0,y.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=y.precision?d.substring(0,y.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=y.precision?d.substring(0,y.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}e.json.test(y.type)?c+=d:(e.number.test(y.type)&&(!p||y.sign)?(w=p?"+":"-",d=d.toString().replace(e.sign,"")):w="",A=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",_=y.width-(w+d).length,u=y.width&&_>0?A.repeat(_):"",c+=y.align?w+d+u:A==="0"?w+u+d:u+w+d)}return c}var r=Object.create(null);function v(s){if(r[s])return r[s];for(var o=s,b,g=[],d=0;o;){if((b=e.text.exec(o))!==null)g.push(b[0]);else if((b=e.modulo.exec(o))!==null)g.push("%");else if((b=e.placeholder.exec(o))!==null){if(b[2]){d|=1;var c=[],m=b[2],l=[];if((l=e.key.exec(m))!==null)for(c.push(l[1]);(m=m.substring(l[0].length))!=="";)if((l=e.key_access.exec(m))!==null)c.push(l[1]);else if((l=e.index_access.exec(m))!==null)c.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=c}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(b[0].length)}return r[s]=g}typeof T<"u"&&(T.sprintf=a,T.vsprintf=i),typeof window<"u"&&(window.sprintf=a,window.vsprintf=i)})()},{}],302:[function(f,M,T){M.exports=s;var e=f("ndarray-extract-contour"),a=f("zero-crossings"),i={"2d":function(o,b,g){var d=o({order:b,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:function(m,l,y,u){return m>u|0},vertex:function(m,l,y,u,A,_,p,w,h,L,E,S,P){var F=(p<<0)+(w<<1)+(h<<2)+(L<<3)|0;if(!(F===0||F===15))switch(F){case 0:E.push([m-.5,l-.5]);break;case 1:E.push([m-.25-.25*(u+y-2*P)/(y-u),l-.25-.25*(A+y-2*P)/(y-A)]);break;case 2:E.push([m-.75-.25*(-u-y+2*P)/(u-y),l-.25-.25*(_+u-2*P)/(u-_)]);break;case 3:E.push([m-.5,l-.5-.5*(A+y+_+u-4*P)/(y-A+u-_)]);break;case 4:E.push([m-.25-.25*(_+A-2*P)/(A-_),l-.75-.25*(-A-y+2*P)/(A-y)]);break;case 5:E.push([m-.5-.5*(u+y+_+A-4*P)/(y-u+A-_),l-.5]);break;case 6:E.push([m-.5-.25*(-u-y+_+A)/(u-y+A-_),l-.5-.25*(-A-y+_+u)/(A-y+u-_)]);break;case 7:E.push([m-.75-.25*(_+A-2*P)/(A-_),l-.75-.25*(_+u-2*P)/(u-_)]);break;case 8:E.push([m-.75-.25*(-_-A+2*P)/(_-A),l-.75-.25*(-_-u+2*P)/(_-u)]);break;case 9:E.push([m-.5-.25*(u+y+-_-A)/(y-u+_-A),l-.5-.25*(A+y+-_-u)/(y-A+_-u)]);break;case 10:E.push([m-.5-.5*(-u-y+-_-A+4*P)/(u-y+_-A),l-.5]);break;case 11:E.push([m-.25-.25*(-_-A+2*P)/(_-A),l-.75-.25*(A+y-2*P)/(y-A)]);break;case 12:E.push([m-.5,l-.5-.5*(-A-y+-_-u+4*P)/(A-y+_-u)]);break;case 13:E.push([m-.75-.25*(u+y-2*P)/(y-u),l-.25-.25*(-_-u+2*P)/(_-u)]);break;case 14:E.push([m-.25-.25*(-u-y+2*P)/(u-y),l-.25-.25*(-A-y+2*P)/(A-y)]);break;case 15:E.push([m-.5,l-.5]);break}},cell:function(m,l,y,u,A,_,p,w,h){A?w.push([m,l]):w.push([l,m])}});return function(c,m){var l=[],y=[];return d(c,l,y,m),{positions:l,cells:y}}}};function n(o,b){var g=o.length+"d",d=i[g];if(d)return d(e,o,b)}function r(o,b){for(var g=a(o,b),d=g.length,c=new Array(d),m=new Array(d),l=0;l<d;++l)c[l]=[g[l]],m[l]=[l];return{positions:c,cells:m}}var v={};function s(o,c){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return r(o,c);var g=o.order.join()+"-"+o.dtype,d=v[g],c=+c||0;return d||(d=v[g]=n(o.order,o.dtype)),d(o,c)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(f,M,T){(function(e){(function(){M.exports=v;var a=f("vectorize-text"),i=window||e.global||{},n=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function r(s){for(var o=s.cells,b=s.positions,g=new Float32Array(o.length*6),d=0,c=0,m=0;m<o.length;++m)for(var l=o[m],y=0;y<3;++y){var u=b[l[y]];g[d++]=u[0],g[d++]=u[1]+1.4,c=Math.max(u[0],c)}return{data:g,shape:c}}function v(s,o,g){var g=g||{},d=n[s];d||(d=n[s]={" ":{data:new Float32Array(0),shape:.2}});var c=d[o];if(!c)if(o.length<=1||!/\d/.test(o))c=d[o]=r(a(o,{triangles:!0,font:s,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=o.split(/(\d|\s)/),l=new Array(m.length),y=0,u=0,A=0;A<m.length;++A)l[A]=v(s,m[A]),y+=l[A].data.length,u+=l[A].shape,A>0&&(u+=.02);for(var _=new Float32Array(y),p=0,w=-.5*u,A=0;A<l.length;++A){for(var h=l[A].data,L=0;L<h.length;L+=2)_[p++]=h[L]+w,_[p++]=h[L+1];w+=l[A].shape+.02}c=d[o]={data:_,shape:u}}return c}}).call(this)}).call(this,f("_process"))},{_process:5,"vectorize-text":311}],304:[function(f,M,T){var e=f("parse-unit");M.exports=r;var a=96;function i(v,s){var o=e(getComputedStyle(v).getPropertyValue(s));return o[0]*r(o[1],v)}function n(v,s){var o=document.createElement("div");o.style["font-size"]="128"+v,s.appendChild(o);var b=i(o,"font-size")/128;return s.removeChild(o),b}function r(v,s){switch(s=s||document.body,v=(v||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),v){case"%":return s.clientHeight/100;case"ch":case"ex":return n(v,s);case"em":return i(s,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(f,M,T){M.exports=m;var e=f("filtered-vector"),a=f("gl-mat4/invert"),i=f("gl-mat4/rotate"),n=f("gl-vec3/cross"),r=f("gl-vec3/normalize"),v=f("gl-vec3/dot");function s(l,y,u){return Math.sqrt(Math.pow(l,2)+Math.pow(y,2)+Math.pow(u,2))}function o(l){return Math.min(1,Math.max(-1,l))}function b(l){var y=Math.abs(l[0]),u=Math.abs(l[1]),A=Math.abs(l[2]),_=[0,0,0];y>Math.max(u,A)?_[2]=1:u>Math.max(y,A)?_[0]=1:_[1]=1;for(var p=0,w=0,h=0;h<3;++h)p+=l[h]*l[h],w+=_[h]*l[h];for(var h=0;h<3;++h)_[h]-=w/p*l[h];return r(_,_),_}function g(l,y,u,A,_,p,w,h){this.center=e(u),this.up=e(A),this.right=e(_),this.radius=e([p]),this.angle=e([w,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=g.prototype;d.setDistanceLimits=function(l,y){l>0?l=Math.log(l):l=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=y},d.getDistanceLimits=function(l){var y=this.radius.bounds[0];return l?(l[0]=Math.exp(y[0][0]),l[1]=Math.exp(y[1][0]),l):[Math.exp(y[0][0]),Math.exp(y[1][0])]},d.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var y=this.computedUp,u=this.computedRight,A=0,_=0,p=0;p<3;++p)_+=y[p]*u[p],A+=y[p]*y[p];for(var w=Math.sqrt(A),h=0,p=0;p<3;++p)u[p]-=y[p]*_/A,h+=u[p]*u[p],y[p]/=w;for(var L=Math.sqrt(h),p=0;p<3;++p)u[p]/=L;var E=this.computedToward;n(E,y,u),r(E,E);for(var S=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],F=this.computedAngle[1],I=Math.cos(P),D=Math.sin(P),R=Math.cos(F),O=Math.sin(F),z=this.computedCenter,H=I*R,Y=D*R,ee=O,j=-I*O,X=-D*O,ae=R,fe=this.computedEye,K=this.computedMatrix,p=0;p<3;++p){var J=H*u[p]+Y*E[p]+ee*y[p];K[4*p+1]=j*u[p]+X*E[p]+ae*y[p],K[4*p+2]=J,K[4*p+3]=0}var U=K[1],V=K[5],q=K[9],re=K[2],Z=K[6],Q=K[10],ie=V*Q-q*Z,oe=q*re-U*Q,ne=U*Z-V*re,se=s(ie,oe,ne);ie/=se,oe/=se,ne/=se,K[0]=ie,K[4]=oe,K[8]=ne;for(var p=0;p<3;++p)fe[p]=z[p]+K[2+4*p]*S;for(var p=0;p<3;++p){for(var h=0,_e=0;_e<3;++_e)h+=K[p+4*_e]*fe[_e];K[12+p]=-h}K[15]=1},d.getMatrix=function(l,y){this.recalcMatrix(l);var u=this.computedMatrix;if(y){for(var A=0;A<16;++A)y[A]=u[A];return y}return u};var c=[0,0,0];d.rotate=function(l,y,u,A){if(this.angle.move(l,y,u),A){this.recalcMatrix(l);var _=this.computedMatrix;c[0]=_[2],c[1]=_[6],c[2]=_[10];for(var p=this.computedUp,w=this.computedRight,h=this.computedToward,L=0;L<3;++L)_[4*L]=p[L],_[4*L+1]=w[L],_[4*L+2]=h[L];i(_,_,A,c);for(var L=0;L<3;++L)p[L]=_[4*L],w[L]=_[4*L+1];this.up.set(l,p[0],p[1],p[2]),this.right.set(l,w[0],w[1],w[2])}},d.pan=function(l,y,u,A){y=y||0,u=u||0,A=A||0,this.recalcMatrix(l);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var p=_[1],w=_[5],h=_[9],L=s(p,w,h);p/=L,w/=L,h/=L;var E=_[0],S=_[4],P=_[8],F=E*p+S*w+P*h;E-=p*F,S-=w*F,P-=h*F;var I=s(E,S,P);E/=I,S/=I,P/=I;var D=E*y+p*u,R=S*y+w*u,O=P*y+h*u;this.center.move(l,D,R,O);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+A),this.radius.set(l,Math.log(z))},d.translate=function(l,y,u,A){this.center.move(l,y||0,u||0,A||0)},d.setMatrix=function(l,y,u,A){var _=1;typeof u=="number"&&(_=u|0),(_<0||_>3)&&(_=1);var p=(_+2)%3;y||(this.recalcMatrix(l),y=this.computedMatrix);var w=y[_],h=y[_+4],L=y[_+8];if(A){var S=Math.abs(w),P=Math.abs(h),F=Math.abs(L),I=Math.max(S,P,F);S===I?(w=w<0?-1:1,h=L=0):F===I?(L=L<0?-1:1,w=h=0):(h=h<0?-1:1,w=L=0)}else{var E=s(w,h,L);w/=E,h/=E,L/=E}var D=y[p],R=y[p+4],O=y[p+8],z=D*w+R*h+O*L;D-=w*z,R-=h*z,O-=L*z;var H=s(D,R,O);D/=H,R/=H,O/=H;var Y=h*O-L*R,ee=L*D-w*O,j=w*R-h*D,X=s(Y,ee,j);Y/=X,ee/=X,j/=X,this.center.jump(l,ye,be,Se),this.radius.idle(l),this.up.jump(l,w,h,L),this.right.jump(l,D,R,O);var ae,fe;if(_===2){var K=y[1],J=y[5],U=y[9],V=K*D+J*R+U*O,q=K*Y+J*ee+U*j;ie<0?ae=-Math.PI/2:ae=Math.PI/2,fe=Math.atan2(q,V)}else{var re=y[2],Z=y[6],Q=y[10],ie=re*w+Z*h+Q*L,oe=re*D+Z*R+Q*O,ne=re*Y+Z*ee+Q*j;ae=Math.asin(o(ie)),fe=Math.atan2(ne,oe)}this.angle.jump(l,fe,ae),this.recalcMatrix(l);var se=y[2],_e=y[6],ue=y[10],ge=this.computedMatrix;a(ge,y);var xe=ge[15],ye=ge[12]/xe,be=ge[13]/xe,Se=ge[14]/xe,Re=Math.exp(this.computedRadius[0]);this.center.jump(l,ye-se*Re,be-_e*Re,Se-ue*Re)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},d.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},d.setDistance=function(l,y){y>0&&this.radius.set(l,Math.log(y))},d.lookAt=function(l,y,u,A){this.recalcMatrix(l),y=y||this.computedEye,u=u||this.computedCenter,A=A||this.computedUp;var _=A[0],p=A[1],w=A[2],h=s(_,p,w);if(!(h<1e-6)){_/=h,p/=h,w/=h;var L=y[0]-u[0],E=y[1]-u[1],S=y[2]-u[2],P=s(L,E,S);if(!(P<1e-6)){L/=P,E/=P,S/=P;var F=this.computedRight,I=F[0],D=F[1],R=F[2],O=_*I+p*D+w*R;I-=O*_,D-=O*p,R-=O*w;var z=s(I,D,R);if(!(z<.01&&(I=p*S-w*E,D=w*L-_*S,R=_*E-p*L,z=s(I,D,R),z<1e-6))){I/=z,D/=z,R/=z,this.up.set(l,_,p,w),this.right.set(l,I,D,R),this.center.set(l,u[0],u[1],u[2]),this.radius.set(l,Math.log(P));var H=p*R-w*D,Y=w*I-_*R,ee=_*D-p*I,j=s(H,Y,ee);H/=j,Y/=j,ee/=j;var X=_*L+p*E+w*S,ae=I*L+D*E+R*S,fe=H*L+Y*E+ee*S,K=Math.asin(o(X)),J=Math.atan2(fe,ae),U=this.angle._state,V=U[U.length-1],q=U[U.length-2];V=V%(2*Math.PI);var re=Math.abs(V+2*Math.PI-J),Z=Math.abs(V-J),Q=Math.abs(V-2*Math.PI-J);re<Z&&(V+=2*Math.PI),Q<Z&&(V-=2*Math.PI),this.angle.jump(this.angle.lastT(),V,q),this.angle.set(l,J,K)}}}};function m(l){l=l||{};var y=l.center||[0,0,0],u=l.up||[0,1,0],A=l.right||b(u),_=l.radius||1,p=l.theta||0,w=l.phi||0;if(y=[].slice.call(y,0,3),u=[].slice.call(u,0,3),r(u,u),A=[].slice.call(A,0,3),r(A,A),"eye"in l){var h=l.eye,L=[h[0]-y[0],h[1]-y[1],h[2]-y[2]];n(A,L,u),s(A[0],A[1],A[2])<1e-6?A=b(u):r(A,A),_=s(L[0],L[1],L[2]);var E=v(u,L)/_,S=v(A,L)/_;w=Math.acos(E),p=Math.acos(S)}return _=Math.log(_),new g(l.zoomMin,l.zoomMax,y,u,A,_,p,w)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(f,M,T){M.exports=a;var e=+(Math.pow(2,27)+1);function a(i,n,r){var v=i*n,s=e*i,o=s-i,b=s-o,g=i-b,d=e*n,c=d-n,m=d-c,l=n-m,y=v-b*m,u=y-g*m,A=u-b*l,_=g*l-A;return r?(r[0]=_,r[1]=v,r):[_,v]}},{}],307:[function(f,M,T){M.exports=e;function e(a,i,n){var r=a+i,v=r-a,s=r-v,o=i-v,b=a-s;return n?(n[0]=b+o,n[1]=r,n):[b+o,r]}},{}],308:[function(f,M,T){(function(e){(function(){var a=f("bit-twiddle"),i=f("dup"),n=f("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r=typeof Uint8ClampedArray<"u",v=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=i([32,0])),o.BIGUINT64||(o.BIGUINT64=i([32,0])),o.BIGINT64||(o.BIGINT64=i([32,0])),o.BUFFER||(o.BUFFER=i([32,0]));var b=o.DATA,g=o.BUFFER;T.free=function(D){if(n.isBuffer(D))g[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,O=a.log2(R)|0;b[O].push(D)}};function d(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);b[R].push(I)}}function c(I){d(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=c,T.freeArrayBuffer=d,T.freeBuffer=function(D){g[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return m(D);switch(R){case"uint8":return l(D);case"uint16":return y(D);case"uint32":return u(D);case"int8":return A(D);case"int16":return _(D);case"int32":return p(D);case"float":case"float32":return w(D);case"double":case"float64":return h(D);case"uint8_clamped":return L(D);case"bigint64":return S(D);case"biguint64":return E(D);case"buffer":return F(D);case"data":case"dataview":return P(D);default:return null}return null};function m(D){var D=a.nextPow2(D),R=a.log2(D),O=b[R];return O.length>0?O.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=m;function l(I){return new Uint8Array(m(I),0,I)}T.mallocUint8=l;function y(I){return new Uint16Array(m(2*I),0,I)}T.mallocUint16=y;function u(I){return new Uint32Array(m(4*I),0,I)}T.mallocUint32=u;function A(I){return new Int8Array(m(I),0,I)}T.mallocInt8=A;function _(I){return new Int16Array(m(2*I),0,I)}T.mallocInt16=_;function p(I){return new Int32Array(m(4*I),0,I)}T.mallocInt32=p;function w(I){return new Float32Array(m(4*I),0,I)}T.mallocFloat32=T.mallocFloat=w;function h(I){return new Float64Array(m(8*I),0,I)}T.mallocFloat64=T.mallocDouble=h;function L(I){return r?new Uint8ClampedArray(m(I),0,I):l(I)}T.mallocUint8Clamped=L;function E(I){return v?new BigUint64Array(m(8*I),0,I):null}T.mallocBigUint64=E;function S(I){return s?new BigInt64Array(m(8*I),0,I):null}T.mallocBigInt64=S;function P(I){return new DataView(m(I),0,I)}T.mallocDataView=P;function F(I){I=a.nextPow2(I);var D=a.log2(I),R=g[D];return R.length>0?R.pop():new n(I)}T.mallocBuffer=F,T.clearCache=function(){for(var D=0;D<32;++D)o.UINT8[D].length=0,o.UINT16[D].length=0,o.UINT32[D].length=0,o.INT8[D].length=0,o.INT16[D].length=0,o.INT32[D].length=0,o.FLOAT[D].length=0,o.DOUBLE[D].length=0,o.BIGUINT64[D].length=0,o.BIGINT64[D].length=0,o.UINT8C[D].length=0,b[D].length=0,g[D].length=0}}).call(this)}).call(this,typeof x<"u"?x:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(f,M,T){M.exports=e;function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},a.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var v=r[n];r[n]=i,n=v}return i},a.link=function(i,n){var r=this.find(i),v=this.find(n);if(r!==v){var s=this.ranks,o=this.roots,b=s[r],g=s[v];b<g?o[r]=v:g<b?o[v]=r:(o[v]=r,++s[r])}}},{}],310:[function(f,M,T){function e(n,r){for(var v=1,s=n.length,o=n[0],b=n[0],g=1;g<s;++g)if(b=o,o=n[g],r(o,b)){if(g===v){v++;continue}n[v++]=o}return n.length=v,n}function a(n){for(var r=1,v=n.length,s=n[0],o=n[0],b=1;b<v;++b,o=s)if(o=s,s=n[b],s!==o){if(b===r){r++;continue}n[r++]=s}return n.length=r,n}function i(n,r,v){return n.length===0?n:r?(v||n.sort(r),e(n,r)):(v||n.sort(),a(n))}M.exports=i},{}],311:[function(f,M,T){M.exports=n;var e=f("./lib/vtext"),a=null,i=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,i=a.getContext("2d"));function n(r,v){return(typeof v!="object"||v===null)&&(v={}),e(r,v.canvas||a,v.context||i,v)}},{"./lib/vtext":312}],312:[function(f,M,T){M.exports=E,M.exports.processPixels=L;var e=f("surface-nets"),a=f("ndarray"),i=f("simplify-planar-graph"),n=f("clean-pslg"),r=f("cdt2d"),v=f("planar-graph-to-polyline"),s="b",o="b|",b="i",g="i|",d="sup",c="+",m="+1",l="sub",y="-",u="-1";function A(S,P,F,I){for(var D="<"+S+">",R="</"+S+">",O=D.length,z=R.length,H=P[0]===c||P[0]===y,Y=0,ee=-z;Y>-1&&(Y=F.indexOf(D,Y),!(Y===-1||(ee=F.indexOf(R,Y+O),ee===-1)||ee<=Y));){for(var j=Y;j<ee+z;++j)if(j<Y+O||j>=ee)I[j]=null,F=F.substr(0,j)+" "+F.substr(j+1);else if(I[j]!==null){var X=I[j].indexOf(P[0]);X===-1?I[j]+=P:H&&(I[j]=I[j].substr(0,X+1)+(1+parseInt(I[j][X+1]))+I[j].substr(X+2))}var ae=Y+O,fe=F.substr(ae,ee-ae),K=fe.indexOf(D);K!==-1?Y=K:Y=ee+z}return I}function _(S,P,F){for(var I=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],z=S.length,H=0;H<z;++H)for(var Y=S[H],ee=0;ee<2;++ee)R[ee]=Math.min(R[ee],Y[ee])|0,O[ee]=Math.max(O[ee],Y[ee])|0;var j=0;switch(I){case"center":j=-.5*(R[0]+O[0]);break;case"right":case"end":j=-O[0];break;case"left":case"start":j=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var X=0;switch(D){case"hanging":case"top":X=-R[1];break;case"middle":X=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":X=-3*F;break;case"bottom":X=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var ae=1/F;return"lineHeight"in P?ae*=+P.lineHeight:"width"in P?ae=P.width/(O[0]-R[0]):"height"in P&&(ae=P.height/(O[1]-R[1])),S.map(function(fe){return[ae*(fe[0]+j),ae*(fe[1]+X)]})}function p(S,P,F,I,D,R){F=F.replace(/\n/g,""),R.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var O="",z=[];for(V=0;V<F.length;++V)z[V]=O;R.bolds===!0&&(z=A(s,o,F,z)),R.italics===!0&&(z=A(b,g,F,z)),R.superscripts===!0&&(z=A(d,m,F,z)),R.subscripts===!0&&(z=A(l,u,F,z));var H=[],Y="";for(V=0;V<F.length;++V)z[V]!==null&&(Y+=F[V],H.push(z[V]));var ee=Y.split(`
`),j=ee.length,X=Math.round(D*I),ae=I,fe=I*2,K=0,J=j*X+fe;S.height<J&&(S.height=J),P.fillStyle="#000",P.fillRect(0,0,S.width,S.height),P.fillStyle="#fff";var U,V,q,re,Z,Q=0,ie="";function oe(){if(ie!==""){var Se=P.measureText(ie).width;P.fillText(ie,ae+q,fe+re),q+=Se}}function ne(){return""+Math.round(Z)+"px "}function se(Se,Re){var Ve=""+P.font;if(R.subscripts===!0){var Ae=Se.indexOf(y),Ce=Re.indexOf(y),Ze=Ae>-1?parseInt(Se[1+Ae]):0,Ye=Ce>-1?parseInt(Re[1+Ce]):0;Ze!==Ye&&(Ve=Ve.replace(ne(),"?px "),Z*=Math.pow(.75,Ye-Ze),Ve=Ve.replace("?px ",ne())),re+=.25*X*(Ye-Ze)}if(R.superscripts===!0){var ze=Se.indexOf(c),Ie=Re.indexOf(c),Ge=ze>-1?parseInt(Se[1+ze]):0,dt=Ie>-1?parseInt(Re[1+Ie]):0;Ge!==dt&&(Ve=Ve.replace(ne(),"?px "),Z*=Math.pow(.75,dt-Ge),Ve=Ve.replace("?px ",ne())),re-=.25*X*(dt-Ge)}if(R.bolds===!0){var Rt=Se.indexOf(o)>-1,Qt=Re.indexOf(o)>-1;!Rt&&Qt&&(Bt?Ve=Ve.replace("italic ","italic bold "):Ve="bold "+Ve),Rt&&!Qt&&(Ve=Ve.replace("bold ",""))}if(R.italics===!0){var Bt=Se.indexOf(g)>-1,Ct=Re.indexOf(g)>-1;!Bt&&Ct&&(Ve="italic "+Ve),Bt&&!Ct&&(Ve=Ve.replace("italic ",""))}P.font=Ve}for(U=0;U<j;++U){var _e=ee[U]+`
`;for(q=0,re=U*X,Z=I,ie="",V=0;V<_e.length;++V){var ue=V+Q<H.length?H[V+Q]:H[H.length-1];O===ue?ie+=_e[V]:(oe(),ie=_e[V],ue!==void 0&&(se(O,ue),O=ue))}oe(),Q+=_e.length;var ge=Math.round(q+2*ae)|0;K<ge&&(K=ge)}var xe=K,ye=fe+X*j,be=a(P.getImageData(0,0,xe,ye).data,[ye,xe,4]);return be.pick(-1,-1,0).transpose(1,0)}function w(S,P){var F=e(S,128);return P?i(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function h(S,P,F,I){var D=w(S,I),R=_(D.positions,P,F),O=D.edges,z=P.orientation==="ccw";if(n(R,O),P.polygons||P.polygon||P.polyline){for(var H=v(O,R),Y=new Array(H.length),ee=0;ee<H.length;++ee){for(var j=H[ee],X=new Array(j.length),ae=0;ae<j.length;++ae){for(var fe=j[ae],K=new Array(fe.length),J=0;J<fe.length;++J)K[J]=R[fe[J]].slice();z&&K.reverse(),X[ae]=K}Y[ee]=X}return Y}else return P.triangles||P.triangulate||P.triangle?{cells:r(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function L(S,P,F){try{return h(S,P,F,!0)}catch{}try{return h(S,P,F,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function E(S,P,F,I){var D=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),F.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(H){return H}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var z=p(P,F,S,D,R,O);return L(z,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(f,M,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(L){L.permitHostObjects___&&L.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var i=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var r=new n,v=Object.freeze({});if(r.set(v,1),r.get(v)!==1)i=!0;else{M.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,b=Object.isExtensible,g="weakmap:",d=g+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),m=new Uint8Array(c);crypto.getRandomValues(m),d=g+"rand:"+Array.prototype.map.call(m,function(L){return(L%36).toString(36)}).join("")+"___"}function l(L){return!(L.substr(0,g.length)==g&&L.substr(L.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(E){return s(E).filter(l)}}),"getPropertyNames"in Object){var y=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(E){return y(E).filter(l)}})}function u(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var E=L[d];if(E&&E.key===L)return E;if(!!b(L)){E={key:L};try{return o(L,d,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch{return}}}(function(){var L=Object.freeze;o(Object,"freeze",{value:function(F){return u(F),L(F)}});var E=Object.seal;o(Object,"seal",{value:function(F){return u(F),E(F)}});var S=Object.preventExtensions;o(Object,"preventExtensions",{value:function(F){return u(F),S(F)}})})();function A(L){return L.prototype=null,Object.freeze(L)}var _=!1;function p(){!_&&typeof console<"u"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var w=0,h=function(){this instanceof h||p();var L=[],E=[],S=w++;function P(R,O){var z,H=u(R);return H?S in H?H[S]:O:(z=L.indexOf(R),z>=0?E[z]:O)}function F(R){var O=u(R);return O?S in O:L.indexOf(R)>=0}function I(R,O){var z,H=u(R);return H?H[S]=O:(z=L.indexOf(R),z>=0?E[z]=O:(z=L.length,E[z]=O,L[z]=R)),this}function D(R){var O=u(R),z,H;return O?S in O&&delete O[S]:(z=L.indexOf(R),z<0?!1:(H=L.length-1,L[z]=void 0,E[z]=E[H],L[z]=L[H],L.length=H,E.length=H,!0))}return Object.create(h.prototype,{get___:{value:A(P)},has___:{value:A(F)},set___:{value:A(I)},delete___:{value:A(D)}})};h.prototype=Object.create(Object.prototype,{get:{value:function(E,S){return this.get___(E,S)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,S){return this.set___(E,S)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof n=="function"?function(){i&&typeof Proxy<"u"&&(Proxy=void 0);function L(){this instanceof h||p();var E=new n,S=void 0,P=!1;function F(O,z){return S?E.has(O)?E.get(O):S.get___(O,z):E.get(O,z)}function I(O){return E.has(O)||(S?S.has___(O):!1)}var D;i?D=function(O,z){return E.set(O,z),E.has(O)||(S||(S=new h),S.set(O,z)),this}:D=function(O,z){if(P)try{E.set(O,z)}catch{S||(S=new h),S.set___(O,z)}else E.set(O,z);return this};function R(O){var z=!!E.delete(O);return S&&S.delete___(O)||z}return Object.create(h.prototype,{get___:{value:A(F)},has___:{value:A(I)},set___:{value:A(D)},delete___:{value:A(R)},permitHostObjects___:{value:A(function(O){if(O===a)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=h.prototype,M.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),M.exports=h)})()},{}],314:[function(f,M,T){var e=f("./hidden-store.js");M.exports=a;function a(){var i={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var r=n.valueOf(i);return r&&r.identity===i?r:e(n,i)}}},{"./hidden-store.js":315}],315:[function(f,M,T){M.exports=e;function e(a,i){var n={identity:i},r=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(v){return v!==i?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(f,M,T){var e=f("./create-store.js");M.exports=a;function a(){var i=e();return{get:function(n,r){var v=i(n);return v.hasOwnProperty("value")?v.value:r},set:function(n,r){return i(n).value=r,this},has:function(n){return"value"in i(n)},delete:function(n){return delete i(n).value}}}},{"./create-store.js":314}],317:[function(f,M,T){function e(){return function(s,o,b,g,d,c){var m=s[0],l=b[0],y=[0],u=l;g|=0;var A=0,_=l;for(A=0;A<m;++A){{var p=o[g]-c,w=o[g+u]-c;p>=0!=w>=0&&d.push(y[0]+.5+.5*(p+w)/(p-w))}g+=_,++y[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d,c){var m=g.dtype,l=g.order,y=[m,l.join()].join(),u=o[y];return u||(o[y]=u=s([m,l])),u(g.shape.slice(0),g.data,g.stride,g.offset|0,d,c)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}M.exports=v({funcName:"zeroCrossings"})},{}],318:[function(f,M,T){M.exports=a;var e=f("./lib/zc-core");function a(i,n){var r=[];return n=+n||0,e(i.hi(i.shape[0]-1),r,n),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})($1);const vy=MT($1.exports),ST=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function kT(me){return ST.test(me)}function Q1(){var me=URL.createObjectURL(new Blob),ve=me.toString();return URL.revokeObjectURL(me),ve.split(/[:\/]/g).pop().toLowerCase()}Q1.valid=kT;const lg=AT("counter",()=>{const me=jc([]),ve=jc({}),t=jc({});me.value=py(),ve.value={displayModeBar:!0},t.value={margin:{l:20,r:20,t:30,b:20}};function B(){me.value=py()}function G(x){var f=me.value;x=="pie"&&(f=[{values:me.value[0].y,labels:me.value[0].x,type:x,sort:!1}]);const M=ve.value,T=t.value;return{data:JSON.parse(JSON.stringify(f)),config:JSON.parse(JSON.stringify(M)),layout:JSON.parse(JSON.stringify(T))}}return{data:me,config:ve,layout:t,changeData:B,getData:G}});function py(){return[{x:[1,2,3,4],y:[10+Math.random(),15+Math.random(),13+Math.random(),27*Math.random()],type:"scatter"}]}const CT=["id"],kh={__name:"PlotlyEx",props:["type","fill","hole"],setup(me){const ve=me,t=lg();jp({get(){return this.debouncedHeight},set(f){this.heightTimeout&&clearTimeout(this.heightTimeout),this.heightTimeout=setTimeout(()=>{this.debouncedHeight=f},1e3)}}),jp({get(){return this.debouncedWidth},set(f){this.widthTimeout&&clearTimeout(this.widthTimeout),this.widthTimeout=setTimeout(()=>{this.debouncedWidth=f},1e3)}});function B(f=!0){const M=x();f?vy.newPlot(G,M.data,M.layout,M.config):vy.react(G,M.data,M.layout,M.config)}const G=Q1();ld(()=>{window.removeEventListener("resize",B)}),rg(()=>{window.addEventListener("resize",B),B()}),t.$subscribe((f,M)=>{B(!1)});function x(){const f=t.getData(ve.type);return f.data[0].type=ve.type,f.data[0].fill=ve.fill,ve.hole&&(f.data[0].hole=ve.hole),ve.type=="bubble"&&(f.data[0].mode="markers",f.data[0].marker={size:f.data[0].y}),f}return(f,M)=>(Vv(),fd("div",{id:Yp(G)},null,8,CT))}},LT={__name:"DataChanger",setup(me){const ve=lg();return(t,B)=>(Vv(),fd("button",{onClick:B[0]||(B[0]=(...G)=>Yp(ve).changeData&&Yp(ve).changeData(...G)),class:"btn btn-outline-info"},"Change data "))}},PT={__name:"TimeTrigger",setup(me){const ve=lg(),t=jc(!1),B=jc();function G(){t.value?(t.value=!1,clearInterval(B.value)):(t.value=!0,B.value=setInterval(ve.changeData,1e3))}return(x,f)=>(Vv(),fd("button",{class:Qp([t.value?"btn btn-outline-danger":"btn btn-outline-info"]),onClick:G},$2(t.value?" ON ":"OFF"),3))}},DT={class:"container-fluid p-5 bg-primary text-white text-center"},RT=xo("h1",null,"Plotly with Vue.js 3, Pinia and Bootstrap 5",-1),IT=xo("p",null,"Presse one of the buttons.",-1),FT={class:"container mt-5"},zT={class:"row"},OT={class:"col-md-4 mb-3"},NT={class:"card"},BT=xo("h3",{class:"text-center"},"Line ",-1),UT={class:"col-md-4 mb-3"},VT={class:"card"},HT=xo("h3",{class:"text-center"},"Fill",-1),GT={class:"col-md-4 mb-3"},YT={class:"card"},WT=xo("h3",{class:"text-center"},"Bar",-1),XT={class:"row"},jT={class:"col-md-4 mb-3"},ZT={class:"card"},KT=xo("h3",{class:"text-center"},"Pie ",-1),JT={class:"col-md-4 mb-3"},$T={class:"card"},QT=xo("h3",{class:"text-center"},"Doughnut",-1),qT={class:"col-md-4 mb-3"},eA={class:"card"},tA=xo("h3",{class:"text-center"},"Bubble",-1),rA={__name:"MainPage",setup(me){return(ve,t)=>(Vv(),fd(df,null,[xo("div",DT,[RT,IT,Ul(LT),Ul(PT)]),xo("div",FT,[xo("div",zT,[xo("div",OT,[xo("div",NT,[BT,xo("div",null,[Ul(kh,{type:"scatter"})])])]),xo("div",UT,[xo("div",VT,[HT,xo("div",null,[Ul(kh,{type:"scatter",fill:"tozeroy"})])])]),xo("div",GT,[xo("div",YT,[WT,xo("div",null,[Ul(kh,{type:"bar"})])])])]),xo("div",XT,[xo("div",jT,[xo("div",ZT,[KT,xo("div",null,[Ul(kh,{type:"pie"})])])]),xo("div",JT,[xo("div",$T,[QT,xo("div",null,[Ul(kh,{type:"pie",hole:"0.4"})])])]),xo("div",qT,[xo("div",eA,[tA,xo("div",null,[Ul(kh,{type:"bubble"})])])])])])],64))}},nA={__name:"App",setup(me){return(ve,t)=>(Vv(),R3(rA))}};var ru="top",Bu="bottom",Uu="right",nu="left",vd="auto",qh=[ru,Bu,Uu,nu],Jc="start",Gh="end",q1="clippingParents",ug="viewport",Ph="popper",ex="reference",I0=qh.reduce(function(me,ve){return me.concat([ve+"-"+Jc,ve+"-"+Gh])},[]),fg=[].concat(qh,[vd]).reduce(function(me,ve){return me.concat([ve,ve+"-"+Jc,ve+"-"+Gh])},[]),tx="beforeRead",rx="read",nx="afterRead",ax="beforeMain",ix="main",ox="afterMain",sx="beforeWrite",lx="write",ux="afterWrite",fx=[tx,rx,nx,ax,ix,ox,sx,lx,ux];function zf(me){return me?(me.nodeName||"").toLowerCase():null}function af(me){if(me==null)return window;if(me.toString()!=="[object Window]"){var ve=me.ownerDocument;return ve&&ve.defaultView||window}return me}function $c(me){var ve=af(me).Element;return me instanceof ve||me instanceof Element}function rf(me){var ve=af(me).HTMLElement;return me instanceof ve||me instanceof HTMLElement}function cg(me){if(typeof ShadowRoot>"u")return!1;var ve=af(me).ShadowRoot;return me instanceof ve||me instanceof ShadowRoot}function aA(me){var ve=me.state;Object.keys(ve.elements).forEach(function(t){var B=ve.styles[t]||{},G=ve.attributes[t]||{},x=ve.elements[t];!rf(x)||!zf(x)||(Object.assign(x.style,B),Object.keys(G).forEach(function(f){var M=G[f];M===!1?x.removeAttribute(f):x.setAttribute(f,M===!0?"":M)}))})}function iA(me){var ve=me.state,t={popper:{position:ve.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(ve.elements.popper.style,t.popper),ve.styles=t,ve.elements.arrow&&Object.assign(ve.elements.arrow.style,t.arrow),function(){Object.keys(ve.elements).forEach(function(B){var G=ve.elements[B],x=ve.attributes[B]||{},f=Object.keys(ve.styles.hasOwnProperty(B)?ve.styles[B]:t[B]),M=f.reduce(function(T,e){return T[e]="",T},{});!rf(G)||!zf(G)||(Object.assign(G.style,M),Object.keys(x).forEach(function(T){G.removeAttribute(T)}))})}}const hg={name:"applyStyles",enabled:!0,phase:"write",fn:aA,effect:iA,requires:["computeStyles"]};function If(me){return me.split("-")[0]}var Kc=Math.max,Zp=Math.min,Yh=Math.round;function F0(){var me=navigator.userAgentData;return me!=null&&me.brands?me.brands.map(function(ve){return ve.brand+"/"+ve.version}).join(" "):navigator.userAgent}function cx(){return!/^((?!chrome|android).)*safari/i.test(F0())}function Wh(me,ve,t){ve===void 0&&(ve=!1),t===void 0&&(t=!1);var B=me.getBoundingClientRect(),G=1,x=1;ve&&rf(me)&&(G=me.offsetWidth>0&&Yh(B.width)/me.offsetWidth||1,x=me.offsetHeight>0&&Yh(B.height)/me.offsetHeight||1);var f=$c(me)?af(me):window,M=f.visualViewport,T=!cx()&&t,e=(B.left+(T&&M?M.offsetLeft:0))/G,a=(B.top+(T&&M?M.offsetTop:0))/x,i=B.width/G,n=B.height/x;return{width:i,height:n,top:a,right:e+i,bottom:a+n,left:e,x:e,y:a}}function vg(me){var ve=Wh(me),t=me.offsetWidth,B=me.offsetHeight;return Math.abs(ve.width-t)<=1&&(t=ve.width),Math.abs(ve.height-B)<=1&&(B=ve.height),{x:me.offsetLeft,y:me.offsetTop,width:t,height:B}}function hx(me,ve){var t=ve.getRootNode&&ve.getRootNode();if(me.contains(ve))return!0;if(t&&cg(t)){var B=ve;do{if(B&&me.isSameNode(B))return!0;B=B.parentNode||B.host}while(B)}return!1}function Jf(me){return af(me).getComputedStyle(me)}function oA(me){return["table","td","th"].indexOf(zf(me))>=0}function Ac(me){return(($c(me)?me.ownerDocument:me.document)||window.document).documentElement}function pd(me){return zf(me)==="html"?me:me.assignedSlot||me.parentNode||(cg(me)?me.host:null)||Ac(me)}function dy(me){return!rf(me)||Jf(me).position==="fixed"?null:me.offsetParent}function sA(me){var ve=/firefox/i.test(F0()),t=/Trident/i.test(F0());if(t&&rf(me)){var B=Jf(me);if(B.position==="fixed")return null}var G=pd(me);for(cg(G)&&(G=G.host);rf(G)&&["html","body"].indexOf(zf(G))<0;){var x=Jf(G);if(x.transform!=="none"||x.perspective!=="none"||x.contain==="paint"||["transform","perspective"].indexOf(x.willChange)!==-1||ve&&x.willChange==="filter"||ve&&x.filter&&x.filter!=="none")return G;G=G.parentNode}return null}function Hv(me){for(var ve=af(me),t=dy(me);t&&oA(t)&&Jf(t).position==="static";)t=dy(t);return t&&(zf(t)==="html"||zf(t)==="body"&&Jf(t).position==="static")?ve:t||sA(me)||ve}function pg(me){return["top","bottom"].indexOf(me)>=0?"x":"y"}function Dv(me,ve,t){return Kc(me,Zp(ve,t))}function lA(me,ve,t){var B=Dv(me,ve,t);return B>t?t:B}function vx(){return{top:0,right:0,bottom:0,left:0}}function px(me){return Object.assign({},vx(),me)}function dx(me,ve){return ve.reduce(function(t,B){return t[B]=me,t},{})}var uA=function(ve,t){return ve=typeof ve=="function"?ve(Object.assign({},t.rects,{placement:t.placement})):ve,px(typeof ve!="number"?ve:dx(ve,qh))};function fA(me){var ve,t=me.state,B=me.name,G=me.options,x=t.elements.arrow,f=t.modifiersData.popperOffsets,M=If(t.placement),T=pg(M),e=[nu,Uu].indexOf(M)>=0,a=e?"height":"width";if(!(!x||!f)){var i=uA(G.padding,t),n=vg(x),r=T==="y"?ru:nu,v=T==="y"?Bu:Uu,s=t.rects.reference[a]+t.rects.reference[T]-f[T]-t.rects.popper[a],o=f[T]-t.rects.reference[T],b=Hv(x),g=b?T==="y"?b.clientHeight||0:b.clientWidth||0:0,d=s/2-o/2,c=i[r],m=g-n[a]-i[v],l=g/2-n[a]/2+d,y=Dv(c,l,m),u=T;t.modifiersData[B]=(ve={},ve[u]=y,ve.centerOffset=y-l,ve)}}function cA(me){var ve=me.state,t=me.options,B=t.element,G=B===void 0?"[data-popper-arrow]":B;G!=null&&(typeof G=="string"&&(G=ve.elements.popper.querySelector(G),!G)||!hx(ve.elements.popper,G)||(ve.elements.arrow=G))}const gx={name:"arrow",enabled:!0,phase:"main",fn:fA,effect:cA,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xh(me){return me.split("-")[1]}var hA={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vA(me){var ve=me.x,t=me.y,B=window,G=B.devicePixelRatio||1;return{x:Yh(ve*G)/G||0,y:Yh(t*G)/G||0}}function gy(me){var ve,t=me.popper,B=me.popperRect,G=me.placement,x=me.variation,f=me.offsets,M=me.position,T=me.gpuAcceleration,e=me.adaptive,a=me.roundOffsets,i=me.isFixed,n=f.x,r=n===void 0?0:n,v=f.y,s=v===void 0?0:v,o=typeof a=="function"?a({x:r,y:s}):{x:r,y:s};r=o.x,s=o.y;var b=f.hasOwnProperty("x"),g=f.hasOwnProperty("y"),d=nu,c=ru,m=window;if(e){var l=Hv(t),y="clientHeight",u="clientWidth";if(l===af(t)&&(l=Ac(t),Jf(l).position!=="static"&&M==="absolute"&&(y="scrollHeight",u="scrollWidth")),l=l,G===ru||(G===nu||G===Uu)&&x===Gh){c=Bu;var A=i&&l===m&&m.visualViewport?m.visualViewport.height:l[y];s-=A-B.height,s*=T?1:-1}if(G===nu||(G===ru||G===Bu)&&x===Gh){d=Uu;var _=i&&l===m&&m.visualViewport?m.visualViewport.width:l[u];r-=_-B.width,r*=T?1:-1}}var p=Object.assign({position:M},e&&hA),w=a===!0?vA({x:r,y:s}):{x:r,y:s};if(r=w.x,s=w.y,T){var h;return Object.assign({},p,(h={},h[c]=g?"0":"",h[d]=b?"0":"",h.transform=(m.devicePixelRatio||1)<=1?"translate("+r+"px, "+s+"px)":"translate3d("+r+"px, "+s+"px, 0)",h))}return Object.assign({},p,(ve={},ve[c]=g?s+"px":"",ve[d]=b?r+"px":"",ve.transform="",ve))}function pA(me){var ve=me.state,t=me.options,B=t.gpuAcceleration,G=B===void 0?!0:B,x=t.adaptive,f=x===void 0?!0:x,M=t.roundOffsets,T=M===void 0?!0:M,e={placement:If(ve.placement),variation:Xh(ve.placement),popper:ve.elements.popper,popperRect:ve.rects.popper,gpuAcceleration:G,isFixed:ve.options.strategy==="fixed"};ve.modifiersData.popperOffsets!=null&&(ve.styles.popper=Object.assign({},ve.styles.popper,gy(Object.assign({},e,{offsets:ve.modifiersData.popperOffsets,position:ve.options.strategy,adaptive:f,roundOffsets:T})))),ve.modifiersData.arrow!=null&&(ve.styles.arrow=Object.assign({},ve.styles.arrow,gy(Object.assign({},e,{offsets:ve.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:T})))),ve.attributes.popper=Object.assign({},ve.attributes.popper,{"data-popper-placement":ve.placement})}const dg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pA,data:{}};var kp={passive:!0};function dA(me){var ve=me.state,t=me.instance,B=me.options,G=B.scroll,x=G===void 0?!0:G,f=B.resize,M=f===void 0?!0:f,T=af(ve.elements.popper),e=[].concat(ve.scrollParents.reference,ve.scrollParents.popper);return x&&e.forEach(function(a){a.addEventListener("scroll",t.update,kp)}),M&&T.addEventListener("resize",t.update,kp),function(){x&&e.forEach(function(a){a.removeEventListener("scroll",t.update,kp)}),M&&T.removeEventListener("resize",t.update,kp)}}const gg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dA,data:{}};var gA={left:"right",right:"left",bottom:"top",top:"bottom"};function Bp(me){return me.replace(/left|right|bottom|top/g,function(ve){return gA[ve]})}var mA={start:"end",end:"start"};function my(me){return me.replace(/start|end/g,function(ve){return mA[ve]})}function mg(me){var ve=af(me),t=ve.pageXOffset,B=ve.pageYOffset;return{scrollLeft:t,scrollTop:B}}function yg(me){return Wh(Ac(me)).left+mg(me).scrollLeft}function yA(me,ve){var t=af(me),B=Ac(me),G=t.visualViewport,x=B.clientWidth,f=B.clientHeight,M=0,T=0;if(G){x=G.width,f=G.height;var e=cx();(e||!e&&ve==="fixed")&&(M=G.offsetLeft,T=G.offsetTop)}return{width:x,height:f,x:M+yg(me),y:T}}function xA(me){var ve,t=Ac(me),B=mg(me),G=(ve=me.ownerDocument)==null?void 0:ve.body,x=Kc(t.scrollWidth,t.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),f=Kc(t.scrollHeight,t.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),M=-B.scrollLeft+yg(me),T=-B.scrollTop;return Jf(G||t).direction==="rtl"&&(M+=Kc(t.clientWidth,G?G.clientWidth:0)-x),{width:x,height:f,x:M,y:T}}function xg(me){var ve=Jf(me),t=ve.overflow,B=ve.overflowX,G=ve.overflowY;return/auto|scroll|overlay|hidden/.test(t+G+B)}function mx(me){return["html","body","#document"].indexOf(zf(me))>=0?me.ownerDocument.body:rf(me)&&xg(me)?me:mx(pd(me))}function Rv(me,ve){var t;ve===void 0&&(ve=[]);var B=mx(me),G=B===((t=me.ownerDocument)==null?void 0:t.body),x=af(B),f=G?[x].concat(x.visualViewport||[],xg(B)?B:[]):B,M=ve.concat(f);return G?M:M.concat(Rv(pd(f)))}function z0(me){return Object.assign({},me,{left:me.x,top:me.y,right:me.x+me.width,bottom:me.y+me.height})}function bA(me,ve){var t=Wh(me,!1,ve==="fixed");return t.top=t.top+me.clientTop,t.left=t.left+me.clientLeft,t.bottom=t.top+me.clientHeight,t.right=t.left+me.clientWidth,t.width=me.clientWidth,t.height=me.clientHeight,t.x=t.left,t.y=t.top,t}function yy(me,ve,t){return ve===ug?z0(yA(me,t)):$c(ve)?bA(ve,t):z0(xA(Ac(me)))}function _A(me){var ve=Rv(pd(me)),t=["absolute","fixed"].indexOf(Jf(me).position)>=0,B=t&&rf(me)?Hv(me):me;return $c(B)?ve.filter(function(G){return $c(G)&&hx(G,B)&&zf(G)!=="body"}):[]}function wA(me,ve,t,B){var G=ve==="clippingParents"?_A(me):[].concat(ve),x=[].concat(G,[t]),f=x[0],M=x.reduce(function(T,e){var a=yy(me,e,B);return T.top=Kc(a.top,T.top),T.right=Zp(a.right,T.right),T.bottom=Zp(a.bottom,T.bottom),T.left=Kc(a.left,T.left),T},yy(me,f,B));return M.width=M.right-M.left,M.height=M.bottom-M.top,M.x=M.left,M.y=M.top,M}function yx(me){var ve=me.reference,t=me.element,B=me.placement,G=B?If(B):null,x=B?Xh(B):null,f=ve.x+ve.width/2-t.width/2,M=ve.y+ve.height/2-t.height/2,T;switch(G){case ru:T={x:f,y:ve.y-t.height};break;case Bu:T={x:f,y:ve.y+ve.height};break;case Uu:T={x:ve.x+ve.width,y:M};break;case nu:T={x:ve.x-t.width,y:M};break;default:T={x:ve.x,y:ve.y}}var e=G?pg(G):null;if(e!=null){var a=e==="y"?"height":"width";switch(x){case Jc:T[e]=T[e]-(ve[a]/2-t[a]/2);break;case Gh:T[e]=T[e]+(ve[a]/2-t[a]/2);break}}return T}function jh(me,ve){ve===void 0&&(ve={});var t=ve,B=t.placement,G=B===void 0?me.placement:B,x=t.strategy,f=x===void 0?me.strategy:x,M=t.boundary,T=M===void 0?q1:M,e=t.rootBoundary,a=e===void 0?ug:e,i=t.elementContext,n=i===void 0?Ph:i,r=t.altBoundary,v=r===void 0?!1:r,s=t.padding,o=s===void 0?0:s,b=px(typeof o!="number"?o:dx(o,qh)),g=n===Ph?ex:Ph,d=me.rects.popper,c=me.elements[v?g:n],m=wA($c(c)?c:c.contextElement||Ac(me.elements.popper),T,a,f),l=Wh(me.elements.reference),y=yx({reference:l,element:d,strategy:"absolute",placement:G}),u=z0(Object.assign({},d,y)),A=n===Ph?u:l,_={top:m.top-A.top+b.top,bottom:A.bottom-m.bottom+b.bottom,left:m.left-A.left+b.left,right:A.right-m.right+b.right},p=me.modifiersData.offset;if(n===Ph&&p){var w=p[G];Object.keys(_).forEach(function(h){var L=[Uu,Bu].indexOf(h)>=0?1:-1,E=[ru,Bu].indexOf(h)>=0?"y":"x";_[h]+=w[E]*L})}return _}function TA(me,ve){ve===void 0&&(ve={});var t=ve,B=t.placement,G=t.boundary,x=t.rootBoundary,f=t.padding,M=t.flipVariations,T=t.allowedAutoPlacements,e=T===void 0?fg:T,a=Xh(B),i=a?M?I0:I0.filter(function(v){return Xh(v)===a}):qh,n=i.filter(function(v){return e.indexOf(v)>=0});n.length===0&&(n=i);var r=n.reduce(function(v,s){return v[s]=jh(me,{placement:s,boundary:G,rootBoundary:x,padding:f})[If(s)],v},{});return Object.keys(r).sort(function(v,s){return r[v]-r[s]})}function AA(me){if(If(me)===vd)return[];var ve=Bp(me);return[my(me),ve,my(ve)]}function MA(me){var ve=me.state,t=me.options,B=me.name;if(!ve.modifiersData[B]._skip){for(var G=t.mainAxis,x=G===void 0?!0:G,f=t.altAxis,M=f===void 0?!0:f,T=t.fallbackPlacements,e=t.padding,a=t.boundary,i=t.rootBoundary,n=t.altBoundary,r=t.flipVariations,v=r===void 0?!0:r,s=t.allowedAutoPlacements,o=ve.options.placement,b=If(o),g=b===o,d=T||(g||!v?[Bp(o)]:AA(o)),c=[o].concat(d).reduce(function(H,Y){return H.concat(If(Y)===vd?TA(ve,{placement:Y,boundary:a,rootBoundary:i,padding:e,flipVariations:v,allowedAutoPlacements:s}):Y)},[]),m=ve.rects.reference,l=ve.rects.popper,y=new Map,u=!0,A=c[0],_=0;_<c.length;_++){var p=c[_],w=If(p),h=Xh(p)===Jc,L=[ru,Bu].indexOf(w)>=0,E=L?"width":"height",S=jh(ve,{placement:p,boundary:a,rootBoundary:i,altBoundary:n,padding:e}),P=L?h?Uu:nu:h?Bu:ru;m[E]>l[E]&&(P=Bp(P));var F=Bp(P),I=[];if(x&&I.push(S[w]<=0),M&&I.push(S[P]<=0,S[F]<=0),I.every(function(H){return H})){A=p,u=!1;break}y.set(p,I)}if(u)for(var D=v?3:1,R=function(Y){var ee=c.find(function(j){var X=y.get(j);if(X)return X.slice(0,Y).every(function(ae){return ae})});if(ee)return A=ee,"break"},O=D;O>0;O--){var z=R(O);if(z==="break")break}ve.placement!==A&&(ve.modifiersData[B]._skip=!0,ve.placement=A,ve.reset=!0)}}const xx={name:"flip",enabled:!0,phase:"main",fn:MA,requiresIfExists:["offset"],data:{_skip:!1}};function xy(me,ve,t){return t===void 0&&(t={x:0,y:0}),{top:me.top-ve.height-t.y,right:me.right-ve.width+t.x,bottom:me.bottom-ve.height+t.y,left:me.left-ve.width-t.x}}function by(me){return[ru,Uu,Bu,nu].some(function(ve){return me[ve]>=0})}function EA(me){var ve=me.state,t=me.name,B=ve.rects.reference,G=ve.rects.popper,x=ve.modifiersData.preventOverflow,f=jh(ve,{elementContext:"reference"}),M=jh(ve,{altBoundary:!0}),T=xy(f,B),e=xy(M,G,x),a=by(T),i=by(e);ve.modifiersData[t]={referenceClippingOffsets:T,popperEscapeOffsets:e,isReferenceHidden:a,hasPopperEscaped:i},ve.attributes.popper=Object.assign({},ve.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}const bx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:EA};function SA(me,ve,t){var B=If(me),G=[nu,ru].indexOf(B)>=0?-1:1,x=typeof t=="function"?t(Object.assign({},ve,{placement:me})):t,f=x[0],M=x[1];return f=f||0,M=(M||0)*G,[nu,Uu].indexOf(B)>=0?{x:M,y:f}:{x:f,y:M}}function kA(me){var ve=me.state,t=me.options,B=me.name,G=t.offset,x=G===void 0?[0,0]:G,f=fg.reduce(function(a,i){return a[i]=SA(i,ve.rects,x),a},{}),M=f[ve.placement],T=M.x,e=M.y;ve.modifiersData.popperOffsets!=null&&(ve.modifiersData.popperOffsets.x+=T,ve.modifiersData.popperOffsets.y+=e),ve.modifiersData[B]=f}const _x={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kA};function CA(me){var ve=me.state,t=me.name;ve.modifiersData[t]=yx({reference:ve.rects.reference,element:ve.rects.popper,strategy:"absolute",placement:ve.placement})}const bg={name:"popperOffsets",enabled:!0,phase:"read",fn:CA,data:{}};function LA(me){return me==="x"?"y":"x"}function PA(me){var ve=me.state,t=me.options,B=me.name,G=t.mainAxis,x=G===void 0?!0:G,f=t.altAxis,M=f===void 0?!1:f,T=t.boundary,e=t.rootBoundary,a=t.altBoundary,i=t.padding,n=t.tether,r=n===void 0?!0:n,v=t.tetherOffset,s=v===void 0?0:v,o=jh(ve,{boundary:T,rootBoundary:e,padding:i,altBoundary:a}),b=If(ve.placement),g=Xh(ve.placement),d=!g,c=pg(b),m=LA(c),l=ve.modifiersData.popperOffsets,y=ve.rects.reference,u=ve.rects.popper,A=typeof s=="function"?s(Object.assign({},ve.rects,{placement:ve.placement})):s,_=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),p=ve.modifiersData.offset?ve.modifiersData.offset[ve.placement]:null,w={x:0,y:0};if(!!l){if(x){var h,L=c==="y"?ru:nu,E=c==="y"?Bu:Uu,S=c==="y"?"height":"width",P=l[c],F=P+o[L],I=P-o[E],D=r?-u[S]/2:0,R=g===Jc?y[S]:u[S],O=g===Jc?-u[S]:-y[S],z=ve.elements.arrow,H=r&&z?vg(z):{width:0,height:0},Y=ve.modifiersData["arrow#persistent"]?ve.modifiersData["arrow#persistent"].padding:vx(),ee=Y[L],j=Y[E],X=Dv(0,y[S],H[S]),ae=d?y[S]/2-D-X-ee-_.mainAxis:R-X-ee-_.mainAxis,fe=d?-y[S]/2+D+X+j+_.mainAxis:O+X+j+_.mainAxis,K=ve.elements.arrow&&Hv(ve.elements.arrow),J=K?c==="y"?K.clientTop||0:K.clientLeft||0:0,U=(h=p==null?void 0:p[c])!=null?h:0,V=P+ae-U-J,q=P+fe-U,re=Dv(r?Zp(F,V):F,P,r?Kc(I,q):I);l[c]=re,w[c]=re-P}if(M){var Z,Q=c==="x"?ru:nu,ie=c==="x"?Bu:Uu,oe=l[m],ne=m==="y"?"height":"width",se=oe+o[Q],_e=oe-o[ie],ue=[ru,nu].indexOf(b)!==-1,ge=(Z=p==null?void 0:p[m])!=null?Z:0,xe=ue?se:oe-y[ne]-u[ne]-ge+_.altAxis,ye=ue?oe+y[ne]+u[ne]-ge-_.altAxis:_e,be=r&&ue?lA(xe,oe,ye):Dv(r?xe:se,oe,r?ye:_e);l[m]=be,w[m]=be-oe}ve.modifiersData[B]=w}}const wx={name:"preventOverflow",enabled:!0,phase:"main",fn:PA,requiresIfExists:["offset"]};function DA(me){return{scrollLeft:me.scrollLeft,scrollTop:me.scrollTop}}function RA(me){return me===af(me)||!rf(me)?mg(me):DA(me)}function IA(me){var ve=me.getBoundingClientRect(),t=Yh(ve.width)/me.offsetWidth||1,B=Yh(ve.height)/me.offsetHeight||1;return t!==1||B!==1}function FA(me,ve,t){t===void 0&&(t=!1);var B=rf(ve),G=rf(ve)&&IA(ve),x=Ac(ve),f=Wh(me,G,t),M={scrollLeft:0,scrollTop:0},T={x:0,y:0};return(B||!B&&!t)&&((zf(ve)!=="body"||xg(x))&&(M=RA(ve)),rf(ve)?(T=Wh(ve,!0),T.x+=ve.clientLeft,T.y+=ve.clientTop):x&&(T.x=yg(x))),{x:f.left+M.scrollLeft-T.x,y:f.top+M.scrollTop-T.y,width:f.width,height:f.height}}function zA(me){var ve=new Map,t=new Set,B=[];me.forEach(function(x){ve.set(x.name,x)});function G(x){t.add(x.name);var f=[].concat(x.requires||[],x.requiresIfExists||[]);f.forEach(function(M){if(!t.has(M)){var T=ve.get(M);T&&G(T)}}),B.push(x)}return me.forEach(function(x){t.has(x.name)||G(x)}),B}function OA(me){var ve=zA(me);return fx.reduce(function(t,B){return t.concat(ve.filter(function(G){return G.phase===B}))},[])}function NA(me){var ve;return function(){return ve||(ve=new Promise(function(t){Promise.resolve().then(function(){ve=void 0,t(me())})})),ve}}function BA(me){var ve=me.reduce(function(t,B){var G=t[B.name];return t[B.name]=G?Object.assign({},G,B,{options:Object.assign({},G.options,B.options),data:Object.assign({},G.data,B.data)}):B,t},{});return Object.keys(ve).map(function(t){return ve[t]})}var _y={placement:"bottom",modifiers:[],strategy:"absolute"};function wy(){for(var me=arguments.length,ve=new Array(me),t=0;t<me;t++)ve[t]=arguments[t];return!ve.some(function(B){return!(B&&typeof B.getBoundingClientRect=="function")})}function dd(me){me===void 0&&(me={});var ve=me,t=ve.defaultModifiers,B=t===void 0?[]:t,G=ve.defaultOptions,x=G===void 0?_y:G;return function(M,T,e){e===void 0&&(e=x);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},_y,x),modifiersData:{},elements:{reference:M,popper:T},attributes:{},styles:{}},i=[],n=!1,r={state:a,setOptions:function(b){var g=typeof b=="function"?b(a.options):b;s(),a.options=Object.assign({},x,a.options,g),a.scrollParents={reference:$c(M)?Rv(M):M.contextElement?Rv(M.contextElement):[],popper:Rv(T)};var d=OA(BA([].concat(B,a.options.modifiers)));return a.orderedModifiers=d.filter(function(c){return c.enabled}),v(),r.update()},forceUpdate:function(){if(!n){var b=a.elements,g=b.reference,d=b.popper;if(!!wy(g,d)){a.rects={reference:FA(g,Hv(d),a.options.strategy==="fixed"),popper:vg(d)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(_){return a.modifiersData[_.name]=Object.assign({},_.data)});for(var c=0;c<a.orderedModifiers.length;c++){if(a.reset===!0){a.reset=!1,c=-1;continue}var m=a.orderedModifiers[c],l=m.fn,y=m.options,u=y===void 0?{}:y,A=m.name;typeof l=="function"&&(a=l({state:a,options:u,name:A,instance:r})||a)}}}},update:NA(function(){return new Promise(function(o){r.forceUpdate(),o(a)})}),destroy:function(){s(),n=!0}};if(!wy(M,T))return r;r.setOptions(e).then(function(o){!n&&e.onFirstUpdate&&e.onFirstUpdate(o)});function v(){a.orderedModifiers.forEach(function(o){var b=o.name,g=o.options,d=g===void 0?{}:g,c=o.effect;if(typeof c=="function"){var m=c({state:a,name:b,instance:r,options:d}),l=function(){};i.push(m||l)}})}function s(){i.forEach(function(o){return o()}),i=[]}return r}}var UA=dd(),VA=[gg,bg,dg,hg],HA=dd({defaultModifiers:VA}),GA=[gg,bg,dg,hg,_x,xx,wx,gx,bx],_g=dd({defaultModifiers:GA});const wg=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:dd,detectOverflow:jh,createPopperBase:UA,createPopper:_g,createPopperLite:HA,top:ru,bottom:Bu,right:Uu,left:nu,auto:vd,basePlacements:qh,start:Jc,end:Gh,clippingParents:q1,viewport:ug,popper:Ph,reference:ex,variationPlacements:I0,placements:fg,beforeRead:tx,read:rx,afterRead:nx,beforeMain:ax,main:ix,afterMain:ox,beforeWrite:sx,write:lx,afterWrite:ux,modifierPhases:fx,applyStyles:hg,arrow:gx,computeStyles:dg,eventListeners:gg,flip:xx,hide:bx,offset:_x,popperOffsets:bg,preventOverflow:wx},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.2 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const YA=1e6,WA=1e3,O0="transitionend",XA=me=>me==null?`${me}`:Object.prototype.toString.call(me).match(/\s([a-z]+)/i)[1].toLowerCase(),jA=me=>{do me+=Math.floor(Math.random()*YA);while(document.getElementById(me));return me},Tx=me=>{let ve=me.getAttribute("data-bs-target");if(!ve||ve==="#"){let t=me.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),ve=t&&t!=="#"?t.trim():null}return ve},Ax=me=>{const ve=Tx(me);return ve&&document.querySelector(ve)?ve:null},Xf=me=>{const ve=Tx(me);return ve?document.querySelector(ve):null},ZA=me=>{if(!me)return 0;let{transitionDuration:ve,transitionDelay:t}=window.getComputedStyle(me);const B=Number.parseFloat(ve),G=Number.parseFloat(t);return!B&&!G?0:(ve=ve.split(",")[0],t=t.split(",")[0],(Number.parseFloat(ve)+Number.parseFloat(t))*WA)},Mx=me=>{me.dispatchEvent(new Event(O0))},jf=me=>!me||typeof me!="object"?!1:(typeof me.jquery<"u"&&(me=me[0]),typeof me.nodeType<"u"),_c=me=>jf(me)?me.jquery?me[0]:me:typeof me=="string"&&me.length>0?document.querySelector(me):null,ev=me=>{if(!jf(me)||me.getClientRects().length===0)return!1;const ve=getComputedStyle(me).getPropertyValue("visibility")==="visible",t=me.closest("details:not([open])");if(!t)return ve;if(t!==me){const B=me.closest("summary");if(B&&B.parentNode!==t||B===null)return!1}return ve},wc=me=>!me||me.nodeType!==Node.ELEMENT_NODE||me.classList.contains("disabled")?!0:typeof me.disabled<"u"?me.disabled:me.hasAttribute("disabled")&&me.getAttribute("disabled")!=="false",Ex=me=>{if(!document.documentElement.attachShadow)return null;if(typeof me.getRootNode=="function"){const ve=me.getRootNode();return ve instanceof ShadowRoot?ve:null}return me instanceof ShadowRoot?me:me.parentNode?Ex(me.parentNode):null},Kp=()=>{},Gv=me=>{me.offsetHeight},Sx=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,o0=[],KA=me=>{document.readyState==="loading"?(o0.length||document.addEventListener("DOMContentLoaded",()=>{for(const ve of o0)ve()}),o0.push(me)):me()},nf=()=>document.documentElement.dir==="rtl",of=me=>{KA(()=>{const ve=Sx();if(ve){const t=me.NAME,B=ve.fn[t];ve.fn[t]=me.jQueryInterface,ve.fn[t].Constructor=me,ve.fn[t].noConflict=()=>(ve.fn[t]=B,me.jQueryInterface)}})},Yf=me=>{typeof me=="function"&&me()},kx=(me,ve,t=!0)=>{if(!t){Yf(me);return}const B=5,G=ZA(ve)+B;let x=!1;const f=({target:M})=>{M===ve&&(x=!0,ve.removeEventListener(O0,f),Yf(me))};ve.addEventListener(O0,f),setTimeout(()=>{x||Mx(ve)},G)},Tg=(me,ve,t,B)=>{const G=me.length;let x=me.indexOf(ve);return x===-1?!t&&B?me[G-1]:me[0]:(x+=t?1:-1,B&&(x=(x+G)%G),me[Math.max(0,Math.min(x,G-1))])},JA=/[^.]*(?=\..*)\.|.*/,$A=/\..*/,QA=/::\d+$/,s0={};let Ty=1;const Cx={mouseenter:"mouseover",mouseleave:"mouseout"},qA=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Lx(me,ve){return ve&&`${ve}::${Ty++}`||me.uidEvent||Ty++}function Px(me){const ve=Lx(me);return me.uidEvent=ve,s0[ve]=s0[ve]||{},s0[ve]}function e5(me,ve){return function t(B){return Ag(B,{delegateTarget:me}),t.oneOff&&Sa.off(me,B.type,ve),ve.apply(me,[B])}}function t5(me,ve,t){return function B(G){const x=me.querySelectorAll(ve);for(let{target:f}=G;f&&f!==this;f=f.parentNode)for(const M of x)if(M===f)return Ag(G,{delegateTarget:f}),B.oneOff&&Sa.off(me,G.type,ve,t),t.apply(f,[G])}}function Dx(me,ve,t=null){return Object.values(me).find(B=>B.callable===ve&&B.delegationSelector===t)}function Rx(me,ve,t){const B=typeof ve=="string",G=B?t:ve||t;let x=Ix(me);return qA.has(x)||(x=me),[B,G,x]}function Ay(me,ve,t,B,G){if(typeof ve!="string"||!me)return;let[x,f,M]=Rx(ve,t,B);ve in Cx&&(f=(v=>function(s){if(!s.relatedTarget||s.relatedTarget!==s.delegateTarget&&!s.delegateTarget.contains(s.relatedTarget))return v.call(this,s)})(f));const T=Px(me),e=T[M]||(T[M]={}),a=Dx(e,f,x?t:null);if(a){a.oneOff=a.oneOff&&G;return}const i=Lx(f,ve.replace(JA,"")),n=x?t5(me,t,f):e5(me,f);n.delegationSelector=x?t:null,n.callable=f,n.oneOff=G,n.uidEvent=i,e[i]=n,me.addEventListener(M,n,x)}function N0(me,ve,t,B,G){const x=Dx(ve[t],B,G);!x||(me.removeEventListener(t,x,Boolean(G)),delete ve[t][x.uidEvent])}function r5(me,ve,t,B){const G=ve[t]||{};for(const x of Object.keys(G))if(x.includes(B)){const f=G[x];N0(me,ve,t,f.callable,f.delegationSelector)}}function Ix(me){return me=me.replace($A,""),Cx[me]||me}const Sa={on(me,ve,t,B){Ay(me,ve,t,B,!1)},one(me,ve,t,B){Ay(me,ve,t,B,!0)},off(me,ve,t,B){if(typeof ve!="string"||!me)return;const[G,x,f]=Rx(ve,t,B),M=f!==ve,T=Px(me),e=T[f]||{},a=ve.startsWith(".");if(typeof x<"u"){if(!Object.keys(e).length)return;N0(me,T,f,x,G?t:null);return}if(a)for(const i of Object.keys(T))r5(me,T,i,ve.slice(1));for(const i of Object.keys(e)){const n=i.replace(QA,"");if(!M||ve.includes(n)){const r=e[i];N0(me,T,f,r.callable,r.delegationSelector)}}},trigger(me,ve,t){if(typeof ve!="string"||!me)return null;const B=Sx(),G=Ix(ve),x=ve!==G;let f=null,M=!0,T=!0,e=!1;x&&B&&(f=B.Event(ve,t),B(me).trigger(f),M=!f.isPropagationStopped(),T=!f.isImmediatePropagationStopped(),e=f.isDefaultPrevented());let a=new Event(ve,{bubbles:M,cancelable:!0});return a=Ag(a,t),e&&a.preventDefault(),T&&me.dispatchEvent(a),a.defaultPrevented&&f&&f.preventDefault(),a}};function Ag(me,ve){for(const[t,B]of Object.entries(ve||{}))try{me[t]=B}catch{Object.defineProperty(me,t,{configurable:!0,get(){return B}})}return me}const vc=new Map,l0={set(me,ve,t){vc.has(me)||vc.set(me,new Map);const B=vc.get(me);if(!B.has(ve)&&B.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(B.keys())[0]}.`);return}B.set(ve,t)},get(me,ve){return vc.has(me)&&vc.get(me).get(ve)||null},remove(me,ve){if(!vc.has(me))return;const t=vc.get(me);t.delete(ve),t.size===0&&vc.delete(me)}};function My(me){if(me==="true")return!0;if(me==="false")return!1;if(me===Number(me).toString())return Number(me);if(me===""||me==="null")return null;if(typeof me!="string")return me;try{return JSON.parse(decodeURIComponent(me))}catch{return me}}function u0(me){return me.replace(/[A-Z]/g,ve=>`-${ve.toLowerCase()}`)}const Zf={setDataAttribute(me,ve,t){me.setAttribute(`data-bs-${u0(ve)}`,t)},removeDataAttribute(me,ve){me.removeAttribute(`data-bs-${u0(ve)}`)},getDataAttributes(me){if(!me)return{};const ve={},t=Object.keys(me.dataset).filter(B=>B.startsWith("bs")&&!B.startsWith("bsConfig"));for(const B of t){let G=B.replace(/^bs/,"");G=G.charAt(0).toLowerCase()+G.slice(1,G.length),ve[G]=My(me.dataset[B])}return ve},getDataAttribute(me,ve){return My(me.getAttribute(`data-bs-${u0(ve)}`))}};class Yv{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(ve){return ve=this._mergeConfigObj(ve),ve=this._configAfterMerge(ve),this._typeCheckConfig(ve),ve}_configAfterMerge(ve){return ve}_mergeConfigObj(ve,t){const B=jf(t)?Zf.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof B=="object"?B:{},...jf(t)?Zf.getDataAttributes(t):{},...typeof ve=="object"?ve:{}}}_typeCheckConfig(ve,t=this.constructor.DefaultType){for(const B of Object.keys(t)){const G=t[B],x=ve[B],f=jf(x)?"element":XA(x);if(!new RegExp(G).test(f))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${B}" provided type "${f}" but expected type "${G}".`)}}}const n5="5.2.2";class bf extends Yv{constructor(ve,t){super(),ve=_c(ve),ve&&(this._element=ve,this._config=this._getConfig(t),l0.set(this._element,this.constructor.DATA_KEY,this))}dispose(){l0.remove(this._element,this.constructor.DATA_KEY),Sa.off(this._element,this.constructor.EVENT_KEY);for(const ve of Object.getOwnPropertyNames(this))this[ve]=null}_queueCallback(ve,t,B=!0){kx(ve,t,B)}_getConfig(ve){return ve=this._mergeConfigObj(ve,this._element),ve=this._configAfterMerge(ve),this._typeCheckConfig(ve),ve}static getInstance(ve){return l0.get(_c(ve),this.DATA_KEY)}static getOrCreateInstance(ve,t={}){return this.getInstance(ve)||new this(ve,typeof t=="object"?t:null)}static get VERSION(){return n5}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(ve){return`${ve}${this.EVENT_KEY}`}}const gd=(me,ve="hide")=>{const t=`click.dismiss${me.EVENT_KEY}`,B=me.NAME;Sa.on(document,t,`[data-bs-dismiss="${B}"]`,function(G){if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),wc(this))return;const x=Xf(this)||this.closest(`.${B}`);me.getOrCreateInstance(x)[ve]()})},a5="alert",i5="bs.alert",Fx=`.${i5}`,o5=`close${Fx}`,s5=`closed${Fx}`,l5="fade",u5="show";class md extends bf{static get NAME(){return a5}close(){if(Sa.trigger(this._element,o5).defaultPrevented)return;this._element.classList.remove(u5);const t=this._element.classList.contains(l5);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),Sa.trigger(this._element,s5),this.dispose()}static jQueryInterface(ve){return this.each(function(){const t=md.getOrCreateInstance(this);if(typeof ve=="string"){if(t[ve]===void 0||ve.startsWith("_")||ve==="constructor")throw new TypeError(`No method named "${ve}"`);t[ve](this)}})}}gd(md,"close");of(md);const f5="button",c5="bs.button",h5=`.${c5}`,v5=".data-api",p5="active",Ey='[data-bs-toggle="button"]',d5=`click${h5}${v5}`;class yd extends bf{static get NAME(){return f5}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(p5))}static jQueryInterface(ve){return this.each(function(){const t=yd.getOrCreateInstance(this);ve==="toggle"&&t[ve]()})}}Sa.on(document,d5,Ey,me=>{me.preventDefault();const ve=me.target.closest(Ey);yd.getOrCreateInstance(ve).toggle()});of(yd);const Xi={find(me,ve=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(ve,me))},findOne(me,ve=document.documentElement){return Element.prototype.querySelector.call(ve,me)},children(me,ve){return[].concat(...me.children).filter(t=>t.matches(ve))},parents(me,ve){const t=[];let B=me.parentNode.closest(ve);for(;B;)t.push(B),B=B.parentNode.closest(ve);return t},prev(me,ve){let t=me.previousElementSibling;for(;t;){if(t.matches(ve))return[t];t=t.previousElementSibling}return[]},next(me,ve){let t=me.nextElementSibling;for(;t;){if(t.matches(ve))return[t];t=t.nextElementSibling}return[]},focusableChildren(me){const ve=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(ve,me).filter(t=>!wc(t)&&ev(t))}},g5="swipe",tv=".bs.swipe",m5=`touchstart${tv}`,y5=`touchmove${tv}`,x5=`touchend${tv}`,b5=`pointerdown${tv}`,_5=`pointerup${tv}`,w5="touch",T5="pen",A5="pointer-event",M5=40,E5={endCallback:null,leftCallback:null,rightCallback:null},S5={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jp extends Yv{constructor(ve,t){super(),this._element=ve,!(!ve||!Jp.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return E5}static get DefaultType(){return S5}static get NAME(){return g5}dispose(){Sa.off(this._element,tv)}_start(ve){if(!this._supportPointerEvents){this._deltaX=ve.touches[0].clientX;return}this._eventIsPointerPenTouch(ve)&&(this._deltaX=ve.clientX)}_end(ve){this._eventIsPointerPenTouch(ve)&&(this._deltaX=ve.clientX-this._deltaX),this._handleSwipe(),Yf(this._config.endCallback)}_move(ve){this._deltaX=ve.touches&&ve.touches.length>1?0:ve.touches[0].clientX-this._deltaX}_handleSwipe(){const ve=Math.abs(this._deltaX);if(ve<=M5)return;const t=ve/this._deltaX;this._deltaX=0,t&&Yf(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Sa.on(this._element,b5,ve=>this._start(ve)),Sa.on(this._element,_5,ve=>this._end(ve)),this._element.classList.add(A5)):(Sa.on(this._element,m5,ve=>this._start(ve)),Sa.on(this._element,y5,ve=>this._move(ve)),Sa.on(this._element,x5,ve=>this._end(ve)))}_eventIsPointerPenTouch(ve){return this._supportPointerEvents&&(ve.pointerType===T5||ve.pointerType===w5)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const k5="carousel",C5="bs.carousel",Mc=`.${C5}`,zx=".data-api",L5="ArrowLeft",P5="ArrowRight",D5=500,Mv="next",Ch="prev",Dh="left",Up="right",R5=`slide${Mc}`,f0=`slid${Mc}`,I5=`keydown${Mc}`,F5=`mouseenter${Mc}`,z5=`mouseleave${Mc}`,O5=`dragstart${Mc}`,N5=`load${Mc}${zx}`,B5=`click${Mc}${zx}`,Ox="carousel",Cp="active",U5="slide",V5="carousel-item-end",H5="carousel-item-start",G5="carousel-item-next",Y5="carousel-item-prev",Nx=".active",Bx=".carousel-item",W5=Nx+Bx,X5=".carousel-item img",j5=".carousel-indicators",Z5="[data-bs-slide], [data-bs-slide-to]",K5='[data-bs-ride="carousel"]',J5={[L5]:Up,[P5]:Dh},$5={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Q5={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Wv extends bf{constructor(ve,t){super(ve,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Xi.findOne(j5,this._element),this._addEventListeners(),this._config.ride===Ox&&this.cycle()}static get Default(){return $5}static get DefaultType(){return Q5}static get NAME(){return k5}next(){this._slide(Mv)}nextWhenVisible(){!document.hidden&&ev(this._element)&&this.next()}prev(){this._slide(Ch)}pause(){this._isSliding&&Mx(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){Sa.one(this._element,f0,()=>this.cycle());return}this.cycle()}}to(ve){const t=this._getItems();if(ve>t.length-1||ve<0)return;if(this._isSliding){Sa.one(this._element,f0,()=>this.to(ve));return}const B=this._getItemIndex(this._getActive());if(B===ve)return;const G=ve>B?Mv:Ch;this._slide(G,t[ve])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(ve){return ve.defaultInterval=ve.interval,ve}_addEventListeners(){this._config.keyboard&&Sa.on(this._element,I5,ve=>this._keydown(ve)),this._config.pause==="hover"&&(Sa.on(this._element,F5,()=>this.pause()),Sa.on(this._element,z5,()=>this._maybeEnableCycle())),this._config.touch&&Jp.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const B of Xi.find(X5,this._element))Sa.on(B,O5,G=>G.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(Dh)),rightCallback:()=>this._slide(this._directionToOrder(Up)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),D5+this._config.interval))}};this._swipeHelper=new Jp(this._element,t)}_keydown(ve){if(/input|textarea/i.test(ve.target.tagName))return;const t=J5[ve.key];t&&(ve.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(ve){return this._getItems().indexOf(ve)}_setActiveIndicatorElement(ve){if(!this._indicatorsElement)return;const t=Xi.findOne(Nx,this._indicatorsElement);t.classList.remove(Cp),t.removeAttribute("aria-current");const B=Xi.findOne(`[data-bs-slide-to="${ve}"]`,this._indicatorsElement);B&&(B.classList.add(Cp),B.setAttribute("aria-current","true"))}_updateInterval(){const ve=this._activeElement||this._getActive();if(!ve)return;const t=Number.parseInt(ve.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(ve,t=null){if(this._isSliding)return;const B=this._getActive(),G=ve===Mv,x=t||Tg(this._getItems(),B,G,this._config.wrap);if(x===B)return;const f=this._getItemIndex(x),M=r=>Sa.trigger(this._element,r,{relatedTarget:x,direction:this._orderToDirection(ve),from:this._getItemIndex(B),to:f});if(M(R5).defaultPrevented||!B||!x)return;const e=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(f),this._activeElement=x;const a=G?H5:V5,i=G?G5:Y5;x.classList.add(i),Gv(x),B.classList.add(a),x.classList.add(a);const n=()=>{x.classList.remove(a,i),x.classList.add(Cp),B.classList.remove(Cp,i,a),this._isSliding=!1,M(f0)};this._queueCallback(n,B,this._isAnimated()),e&&this.cycle()}_isAnimated(){return this._element.classList.contains(U5)}_getActive(){return Xi.findOne(W5,this._element)}_getItems(){return Xi.find(Bx,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(ve){return nf()?ve===Dh?Ch:Mv:ve===Dh?Mv:Ch}_orderToDirection(ve){return nf()?ve===Ch?Dh:Up:ve===Ch?Up:Dh}static jQueryInterface(ve){return this.each(function(){const t=Wv.getOrCreateInstance(this,ve);if(typeof ve=="number"){t.to(ve);return}if(typeof ve=="string"){if(t[ve]===void 0||ve.startsWith("_")||ve==="constructor")throw new TypeError(`No method named "${ve}"`);t[ve]()}})}}Sa.on(document,B5,Z5,function(me){const ve=Xf(this);if(!ve||!ve.classList.contains(Ox))return;me.preventDefault();const t=Wv.getOrCreateInstance(ve),B=this.getAttribute("data-bs-slide-to");if(B){t.to(B),t._maybeEnableCycle();return}if(Zf.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});Sa.on(window,N5,()=>{const me=Xi.find(K5);for(const ve of me)Wv.getOrCreateInstance(ve)});of(Wv);const q5="collapse",eM="bs.collapse",Xv=`.${eM}`,tM=".data-api",rM=`show${Xv}`,nM=`shown${Xv}`,aM=`hide${Xv}`,iM=`hidden${Xv}`,oM=`click${Xv}${tM}`,c0="show",Fh="collapse",Lp="collapsing",sM="collapsed",lM=`:scope .${Fh} .${Fh}`,uM="collapse-horizontal",fM="width",cM="height",hM=".collapse.show, .collapse.collapsing",B0='[data-bs-toggle="collapse"]',vM={parent:null,toggle:!0},pM={parent:"(null|element)",toggle:"boolean"};class Uv extends bf{constructor(ve,t){super(ve,t),this._isTransitioning=!1,this._triggerArray=[];const B=Xi.find(B0);for(const G of B){const x=Ax(G),f=Xi.find(x).filter(M=>M===this._element);x!==null&&f.length&&this._triggerArray.push(G)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return vM}static get DefaultType(){return pM}static get NAME(){return q5}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let ve=[];if(this._config.parent&&(ve=this._getFirstLevelChildren(hM).filter(M=>M!==this._element).map(M=>Uv.getOrCreateInstance(M,{toggle:!1}))),ve.length&&ve[0]._isTransitioning||Sa.trigger(this._element,rM).defaultPrevented)return;for(const M of ve)M.hide();const B=this._getDimension();this._element.classList.remove(Fh),this._element.classList.add(Lp),this._element.style[B]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const G=()=>{this._isTransitioning=!1,this._element.classList.remove(Lp),this._element.classList.add(Fh,c0),this._element.style[B]="",Sa.trigger(this._element,nM)},f=`scroll${B[0].toUpperCase()+B.slice(1)}`;this._queueCallback(G,this._element,!0),this._element.style[B]=`${this._element[f]}px`}hide(){if(this._isTransitioning||!this._isShown()||Sa.trigger(this._element,aM).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Gv(this._element),this._element.classList.add(Lp),this._element.classList.remove(Fh,c0);for(const G of this._triggerArray){const x=Xf(G);x&&!this._isShown(x)&&this._addAriaAndCollapsedClass([G],!1)}this._isTransitioning=!0;const B=()=>{this._isTransitioning=!1,this._element.classList.remove(Lp),this._element.classList.add(Fh),Sa.trigger(this._element,iM)};this._element.style[t]="",this._queueCallback(B,this._element,!0)}_isShown(ve=this._element){return ve.classList.contains(c0)}_configAfterMerge(ve){return ve.toggle=Boolean(ve.toggle),ve.parent=_c(ve.parent),ve}_getDimension(){return this._element.classList.contains(uM)?fM:cM}_initializeChildren(){if(!this._config.parent)return;const ve=this._getFirstLevelChildren(B0);for(const t of ve){const B=Xf(t);B&&this._addAriaAndCollapsedClass([t],this._isShown(B))}}_getFirstLevelChildren(ve){const t=Xi.find(lM,this._config.parent);return Xi.find(ve,this._config.parent).filter(B=>!t.includes(B))}_addAriaAndCollapsedClass(ve,t){if(!!ve.length)for(const B of ve)B.classList.toggle(sM,!t),B.setAttribute("aria-expanded",t)}static jQueryInterface(ve){const t={};return typeof ve=="string"&&/show|hide/.test(ve)&&(t.toggle=!1),this.each(function(){const B=Uv.getOrCreateInstance(this,t);if(typeof ve=="string"){if(typeof B[ve]>"u")throw new TypeError(`No method named "${ve}"`);B[ve]()}})}}Sa.on(document,oM,B0,function(me){(me.target.tagName==="A"||me.delegateTarget&&me.delegateTarget.tagName==="A")&&me.preventDefault();const ve=Ax(this),t=Xi.find(ve);for(const B of t)Uv.getOrCreateInstance(B,{toggle:!1}).toggle()});of(Uv);const Sy="dropdown",dM="bs.dropdown",Qc=`.${dM}`,Mg=".data-api",gM="Escape",ky="Tab",mM="ArrowUp",Cy="ArrowDown",yM=2,xM=`hide${Qc}`,bM=`hidden${Qc}`,_M=`show${Qc}`,wM=`shown${Qc}`,Ux=`click${Qc}${Mg}`,Vx=`keydown${Qc}${Mg}`,TM=`keyup${Qc}${Mg}`,Rh="show",AM="dropup",MM="dropend",EM="dropstart",SM="dropup-center",kM="dropdown-center",Yc='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',CM=`${Yc}.${Rh}`,Vp=".dropdown-menu",LM=".navbar",PM=".navbar-nav",DM=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",RM=nf()?"top-end":"top-start",IM=nf()?"top-start":"top-end",FM=nf()?"bottom-end":"bottom-start",zM=nf()?"bottom-start":"bottom-end",OM=nf()?"left-start":"right-start",NM=nf()?"right-start":"left-start",BM="top",UM="bottom",VM={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},HM={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ff extends bf{constructor(ve,t){super(ve,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Xi.next(this._element,Vp)[0]||Xi.prev(this._element,Vp)[0]||Xi.findOne(Vp,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return VM}static get DefaultType(){return HM}static get NAME(){return Sy}toggle(){return this._isShown()?this.hide():this.show()}show(){if(wc(this._element)||this._isShown())return;const ve={relatedTarget:this._element};if(!Sa.trigger(this._element,_M,ve).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(PM))for(const B of[].concat(...document.body.children))Sa.on(B,"mouseover",Kp);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Rh),this._element.classList.add(Rh),Sa.trigger(this._element,wM,ve)}}hide(){if(wc(this._element)||!this._isShown())return;const ve={relatedTarget:this._element};this._completeHide(ve)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(ve){if(!Sa.trigger(this._element,xM,ve).defaultPrevented){if("ontouchstart"in document.documentElement)for(const B of[].concat(...document.body.children))Sa.off(B,"mouseover",Kp);this._popper&&this._popper.destroy(),this._menu.classList.remove(Rh),this._element.classList.remove(Rh),this._element.setAttribute("aria-expanded","false"),Zf.removeDataAttribute(this._menu,"popper"),Sa.trigger(this._element,bM,ve)}}_getConfig(ve){if(ve=super._getConfig(ve),typeof ve.reference=="object"&&!jf(ve.reference)&&typeof ve.reference.getBoundingClientRect!="function")throw new TypeError(`${Sy.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return ve}_createPopper(){if(typeof wg>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let ve=this._element;this._config.reference==="parent"?ve=this._parent:jf(this._config.reference)?ve=_c(this._config.reference):typeof this._config.reference=="object"&&(ve=this._config.reference);const t=this._getPopperConfig();this._popper=_g(ve,this._menu,t)}_isShown(){return this._menu.classList.contains(Rh)}_getPlacement(){const ve=this._parent;if(ve.classList.contains(MM))return OM;if(ve.classList.contains(EM))return NM;if(ve.classList.contains(SM))return BM;if(ve.classList.contains(kM))return UM;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return ve.classList.contains(AM)?t?IM:RM:t?zM:FM}_detectNavbar(){return this._element.closest(LM)!==null}_getOffset(){const{offset:ve}=this._config;return typeof ve=="string"?ve.split(",").map(t=>Number.parseInt(t,10)):typeof ve=="function"?t=>ve(t,this._element):ve}_getPopperConfig(){const ve={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Zf.setDataAttribute(this._menu,"popper","static"),ve.modifiers=[{name:"applyStyles",enabled:!1}]),{...ve,...typeof this._config.popperConfig=="function"?this._config.popperConfig(ve):this._config.popperConfig}}_selectMenuItem({key:ve,target:t}){const B=Xi.find(DM,this._menu).filter(G=>ev(G));!B.length||Tg(B,t,ve===Cy,!B.includes(t)).focus()}static jQueryInterface(ve){return this.each(function(){const t=Ff.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(typeof t[ve]>"u")throw new TypeError(`No method named "${ve}"`);t[ve]()}})}static clearMenus(ve){if(ve.button===yM||ve.type==="keyup"&&ve.key!==ky)return;const t=Xi.find(CM);for(const B of t){const G=Ff.getInstance(B);if(!G||G._config.autoClose===!1)continue;const x=ve.composedPath(),f=x.includes(G._menu);if(x.includes(G._element)||G._config.autoClose==="inside"&&!f||G._config.autoClose==="outside"&&f||G._menu.contains(ve.target)&&(ve.type==="keyup"&&ve.key===ky||/input|select|option|textarea|form/i.test(ve.target.tagName)))continue;const M={relatedTarget:G._element};ve.type==="click"&&(M.clickEvent=ve),G._completeHide(M)}}static dataApiKeydownHandler(ve){const t=/input|textarea/i.test(ve.target.tagName),B=ve.key===gM,G=[mM,Cy].includes(ve.key);if(!G&&!B||t&&!B)return;ve.preventDefault();const x=this.matches(Yc)?this:Xi.prev(this,Yc)[0]||Xi.next(this,Yc)[0]||Xi.findOne(Yc,ve.delegateTarget.parentNode),f=Ff.getOrCreateInstance(x);if(G){ve.stopPropagation(),f.show(),f._selectMenuItem(ve);return}f._isShown()&&(ve.stopPropagation(),f.hide(),x.focus())}}Sa.on(document,Vx,Yc,Ff.dataApiKeydownHandler);Sa.on(document,Vx,Vp,Ff.dataApiKeydownHandler);Sa.on(document,Ux,Ff.clearMenus);Sa.on(document,TM,Ff.clearMenus);Sa.on(document,Ux,Yc,function(me){me.preventDefault(),Ff.getOrCreateInstance(this).toggle()});of(Ff);const Ly=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Py=".sticky-top",Pp="padding-right",Dy="margin-right";class U0{constructor(){this._element=document.body}getWidth(){const ve=document.documentElement.clientWidth;return Math.abs(window.innerWidth-ve)}hide(){const ve=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Pp,t=>t+ve),this._setElementAttributes(Ly,Pp,t=>t+ve),this._setElementAttributes(Py,Dy,t=>t-ve)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Pp),this._resetElementAttributes(Ly,Pp),this._resetElementAttributes(Py,Dy)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(ve,t,B){const G=this.getWidth(),x=f=>{if(f!==this._element&&window.innerWidth>f.clientWidth+G)return;this._saveInitialAttribute(f,t);const M=window.getComputedStyle(f).getPropertyValue(t);f.style.setProperty(t,`${B(Number.parseFloat(M))}px`)};this._applyManipulationCallback(ve,x)}_saveInitialAttribute(ve,t){const B=ve.style.getPropertyValue(t);B&&Zf.setDataAttribute(ve,t,B)}_resetElementAttributes(ve,t){const B=G=>{const x=Zf.getDataAttribute(G,t);if(x===null){G.style.removeProperty(t);return}Zf.removeDataAttribute(G,t),G.style.setProperty(t,x)};this._applyManipulationCallback(ve,B)}_applyManipulationCallback(ve,t){if(jf(ve)){t(ve);return}for(const B of Xi.find(ve,this._element))t(B)}}const Hx="backdrop",GM="fade",Ry="show",Iy=`mousedown.bs.${Hx}`,YM={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},WM={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Gx extends Yv{constructor(ve){super(),this._config=this._getConfig(ve),this._isAppended=!1,this._element=null}static get Default(){return YM}static get DefaultType(){return WM}static get NAME(){return Hx}show(ve){if(!this._config.isVisible){Yf(ve);return}this._append();const t=this._getElement();this._config.isAnimated&&Gv(t),t.classList.add(Ry),this._emulateAnimation(()=>{Yf(ve)})}hide(ve){if(!this._config.isVisible){Yf(ve);return}this._getElement().classList.remove(Ry),this._emulateAnimation(()=>{this.dispose(),Yf(ve)})}dispose(){!this._isAppended||(Sa.off(this._element,Iy),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const ve=document.createElement("div");ve.className=this._config.className,this._config.isAnimated&&ve.classList.add(GM),this._element=ve}return this._element}_configAfterMerge(ve){return ve.rootElement=_c(ve.rootElement),ve}_append(){if(this._isAppended)return;const ve=this._getElement();this._config.rootElement.append(ve),Sa.on(ve,Iy,()=>{Yf(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(ve){kx(ve,this._getElement(),this._config.isAnimated)}}const XM="focustrap",jM="bs.focustrap",$p=`.${jM}`,ZM=`focusin${$p}`,KM=`keydown.tab${$p}`,JM="Tab",$M="forward",Fy="backward",QM={autofocus:!0,trapElement:null},qM={autofocus:"boolean",trapElement:"element"};class Yx extends Yv{constructor(ve){super(),this._config=this._getConfig(ve),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return QM}static get DefaultType(){return qM}static get NAME(){return XM}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Sa.off(document,$p),Sa.on(document,ZM,ve=>this._handleFocusin(ve)),Sa.on(document,KM,ve=>this._handleKeydown(ve)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Sa.off(document,$p))}_handleFocusin(ve){const{trapElement:t}=this._config;if(ve.target===document||ve.target===t||t.contains(ve.target))return;const B=Xi.focusableChildren(t);B.length===0?t.focus():this._lastTabNavDirection===Fy?B[B.length-1].focus():B[0].focus()}_handleKeydown(ve){ve.key===JM&&(this._lastTabNavDirection=ve.shiftKey?Fy:$M)}}const eE="modal",tE="bs.modal",_f=`.${tE}`,rE=".data-api",nE="Escape",aE=`hide${_f}`,iE=`hidePrevented${_f}`,Wx=`hidden${_f}`,Xx=`show${_f}`,oE=`shown${_f}`,sE=`resize${_f}`,lE=`click.dismiss${_f}`,uE=`mousedown.dismiss${_f}`,fE=`keydown.dismiss${_f}`,cE=`click${_f}${rE}`,zy="modal-open",hE="fade",Oy="show",h0="modal-static",vE=".modal.show",pE=".modal-dialog",dE=".modal-body",gE='[data-bs-toggle="modal"]',mE={backdrop:!0,focus:!0,keyboard:!0},yE={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Zh extends bf{constructor(ve,t){super(ve,t),this._dialog=Xi.findOne(pE,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new U0,this._addEventListeners()}static get Default(){return mE}static get DefaultType(){return yE}static get NAME(){return eE}toggle(ve){return this._isShown?this.hide():this.show(ve)}show(ve){this._isShown||this._isTransitioning||Sa.trigger(this._element,Xx,{relatedTarget:ve}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(zy),this._adjustDialog(),this._backdrop.show(()=>this._showElement(ve)))}hide(){!this._isShown||this._isTransitioning||Sa.trigger(this._element,aE).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Oy),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const ve of[window,this._dialog])Sa.off(ve,_f);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Gx({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Yx({trapElement:this._element})}_showElement(ve){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Xi.findOne(dE,this._dialog);t&&(t.scrollTop=0),Gv(this._element),this._element.classList.add(Oy);const B=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Sa.trigger(this._element,oE,{relatedTarget:ve})};this._queueCallback(B,this._dialog,this._isAnimated())}_addEventListeners(){Sa.on(this._element,fE,ve=>{if(ve.key===nE){if(this._config.keyboard){ve.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),Sa.on(window,sE,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Sa.on(this._element,uE,ve=>{Sa.one(this._element,lE,t=>{if(!(this._element!==ve.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(zy),this._resetAdjustments(),this._scrollBar.reset(),Sa.trigger(this._element,Wx)})}_isAnimated(){return this._element.classList.contains(hE)}_triggerBackdropTransition(){if(Sa.trigger(this._element,iE).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,B=this._element.style.overflowY;B==="hidden"||this._element.classList.contains(h0)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(h0),this._queueCallback(()=>{this._element.classList.remove(h0),this._queueCallback(()=>{this._element.style.overflowY=B},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const ve=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),B=t>0;if(B&&!ve){const G=nf()?"paddingLeft":"paddingRight";this._element.style[G]=`${t}px`}if(!B&&ve){const G=nf()?"paddingRight":"paddingLeft";this._element.style[G]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(ve,t){return this.each(function(){const B=Zh.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(typeof B[ve]>"u")throw new TypeError(`No method named "${ve}"`);B[ve](t)}})}}Sa.on(document,cE,gE,function(me){const ve=Xf(this);["A","AREA"].includes(this.tagName)&&me.preventDefault(),Sa.one(ve,Xx,G=>{G.defaultPrevented||Sa.one(ve,Wx,()=>{ev(this)&&this.focus()})});const t=Xi.findOne(vE);t&&Zh.getInstance(t).hide(),Zh.getOrCreateInstance(ve).toggle(this)});gd(Zh);of(Zh);const xE="offcanvas",bE="bs.offcanvas",Qf=`.${bE}`,jx=".data-api",_E=`load${Qf}${jx}`,wE="Escape",Ny="show",By="showing",Uy="hiding",TE="offcanvas-backdrop",Zx=".offcanvas.show",AE=`show${Qf}`,ME=`shown${Qf}`,EE=`hide${Qf}`,Vy=`hidePrevented${Qf}`,Kx=`hidden${Qf}`,SE=`resize${Qf}`,kE=`click${Qf}${jx}`,CE=`keydown.dismiss${Qf}`,LE='[data-bs-toggle="offcanvas"]',PE={backdrop:!0,keyboard:!0,scroll:!1},DE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Tc extends bf{constructor(ve,t){super(ve,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return PE}static get DefaultType(){return DE}static get NAME(){return xE}toggle(ve){return this._isShown?this.hide():this.show(ve)}show(ve){if(this._isShown||Sa.trigger(this._element,AE,{relatedTarget:ve}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new U0().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(By);const B=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ny),this._element.classList.remove(By),Sa.trigger(this._element,ME,{relatedTarget:ve})};this._queueCallback(B,this._element,!0)}hide(){if(!this._isShown||Sa.trigger(this._element,EE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Uy),this._backdrop.hide();const t=()=>{this._element.classList.remove(Ny,Uy),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new U0().reset(),Sa.trigger(this._element,Kx)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const ve=()=>{if(this._config.backdrop==="static"){Sa.trigger(this._element,Vy);return}this.hide()},t=Boolean(this._config.backdrop);return new Gx({className:TE,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?ve:null})}_initializeFocusTrap(){return new Yx({trapElement:this._element})}_addEventListeners(){Sa.on(this._element,CE,ve=>{if(ve.key===wE){if(!this._config.keyboard){Sa.trigger(this._element,Vy);return}this.hide()}})}static jQueryInterface(ve){return this.each(function(){const t=Tc.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(t[ve]===void 0||ve.startsWith("_")||ve==="constructor")throw new TypeError(`No method named "${ve}"`);t[ve](this)}})}}Sa.on(document,kE,LE,function(me){const ve=Xf(this);if(["A","AREA"].includes(this.tagName)&&me.preventDefault(),wc(this))return;Sa.one(ve,Kx,()=>{ev(this)&&this.focus()});const t=Xi.findOne(Zx);t&&t!==ve&&Tc.getInstance(t).hide(),Tc.getOrCreateInstance(ve).toggle(this)});Sa.on(window,_E,()=>{for(const me of Xi.find(Zx))Tc.getOrCreateInstance(me).show()});Sa.on(window,SE,()=>{for(const me of Xi.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(me).position!=="fixed"&&Tc.getOrCreateInstance(me).hide()});gd(Tc);of(Tc);const RE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),IE=/^aria-[\w-]*$/i,FE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,zE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,OE=(me,ve)=>{const t=me.nodeName.toLowerCase();return ve.includes(t)?RE.has(t)?Boolean(FE.test(me.nodeValue)||zE.test(me.nodeValue)):!0:ve.filter(B=>B instanceof RegExp).some(B=>B.test(t))},Jx={"*":["class","dir","id","lang","role",IE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function NE(me,ve,t){if(!me.length)return me;if(t&&typeof t=="function")return t(me);const G=new window.DOMParser().parseFromString(me,"text/html"),x=[].concat(...G.body.querySelectorAll("*"));for(const f of x){const M=f.nodeName.toLowerCase();if(!Object.keys(ve).includes(M)){f.remove();continue}const T=[].concat(...f.attributes),e=[].concat(ve["*"]||[],ve[M]||[]);for(const a of T)OE(a,e)||f.removeAttribute(a.nodeName)}return G.body.innerHTML}const BE="TemplateFactory",UE={allowList:Jx,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},VE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},HE={entry:"(string|element|function|null)",selector:"(string|element)"};class GE extends Yv{constructor(ve){super(),this._config=this._getConfig(ve)}static get Default(){return UE}static get DefaultType(){return VE}static get NAME(){return BE}getContent(){return Object.values(this._config.content).map(ve=>this._resolvePossibleFunction(ve)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(ve){return this._checkContent(ve),this._config.content={...this._config.content,...ve},this}toHtml(){const ve=document.createElement("div");ve.innerHTML=this._maybeSanitize(this._config.template);for(const[G,x]of Object.entries(this._config.content))this._setContent(ve,x,G);const t=ve.children[0],B=this._resolvePossibleFunction(this._config.extraClass);return B&&t.classList.add(...B.split(" ")),t}_typeCheckConfig(ve){super._typeCheckConfig(ve),this._checkContent(ve.content)}_checkContent(ve){for(const[t,B]of Object.entries(ve))super._typeCheckConfig({selector:t,entry:B},HE)}_setContent(ve,t,B){const G=Xi.findOne(B,ve);if(!!G){if(t=this._resolvePossibleFunction(t),!t){G.remove();return}if(jf(t)){this._putElementInTemplate(_c(t),G);return}if(this._config.html){G.innerHTML=this._maybeSanitize(t);return}G.textContent=t}}_maybeSanitize(ve){return this._config.sanitize?NE(ve,this._config.allowList,this._config.sanitizeFn):ve}_resolvePossibleFunction(ve){return typeof ve=="function"?ve(this):ve}_putElementInTemplate(ve,t){if(this._config.html){t.innerHTML="",t.append(ve);return}t.textContent=ve.textContent}}const YE="tooltip",WE=new Set(["sanitize","allowList","sanitizeFn"]),v0="fade",XE="modal",Dp="show",jE=".tooltip-inner",Hy=`.${XE}`,Gy="hide.bs.modal",Ev="hover",p0="focus",ZE="click",KE="manual",JE="hide",$E="hidden",QE="show",qE="shown",eS="inserted",tS="click",rS="focusin",nS="focusout",aS="mouseenter",iS="mouseleave",oS={AUTO:"auto",TOP:"top",RIGHT:nf()?"left":"right",BOTTOM:"bottom",LEFT:nf()?"right":"left"},sS={allowList:Jx,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},lS={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class rv extends bf{constructor(ve,t){if(typeof wg>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(ve,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return sS}static get DefaultType(){return lS}static get NAME(){return YE}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Sa.off(this._element.closest(Hy),Gy,this._hideModalHandler),this.tip&&this.tip.remove(),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const ve=Sa.trigger(this._element,this.constructor.eventName(QE)),B=(Ex(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(ve.defaultPrevented||!B)return;this.tip&&(this.tip.remove(),this.tip=null);const G=this._getTipElement();this._element.setAttribute("aria-describedby",G.getAttribute("id"));const{container:x}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(x.append(G),Sa.trigger(this._element,this.constructor.eventName(eS))),this._popper?this._popper.update():this._popper=this._createPopper(G),G.classList.add(Dp),"ontouchstart"in document.documentElement)for(const M of[].concat(...document.body.children))Sa.on(M,"mouseover",Kp);const f=()=>{Sa.trigger(this._element,this.constructor.eventName(qE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(f,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Sa.trigger(this._element,this.constructor.eventName(JE)).defaultPrevented)return;const t=this._getTipElement();if(t.classList.remove(Dp),"ontouchstart"in document.documentElement)for(const G of[].concat(...document.body.children))Sa.off(G,"mouseover",Kp);this._activeTrigger[ZE]=!1,this._activeTrigger[p0]=!1,this._activeTrigger[Ev]=!1,this._isHovered=null;const B=()=>{this._isWithActiveTrigger()||(this._isHovered||t.remove(),this._element.removeAttribute("aria-describedby"),Sa.trigger(this._element,this.constructor.eventName($E)),this._disposePopper())};this._queueCallback(B,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(ve){const t=this._getTemplateFactory(ve).toHtml();if(!t)return null;t.classList.remove(v0,Dp),t.classList.add(`bs-${this.constructor.NAME}-auto`);const B=jA(this.constructor.NAME).toString();return t.setAttribute("id",B),this._isAnimated()&&t.classList.add(v0),t}setContent(ve){this._newContent=ve,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(ve){return this._templateFactory?this._templateFactory.changeContent(ve):this._templateFactory=new GE({...this._config,content:ve,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[jE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(ve){return this.constructor.getOrCreateInstance(ve.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(v0)}_isShown(){return this.tip&&this.tip.classList.contains(Dp)}_createPopper(ve){const t=typeof this._config.placement=="function"?this._config.placement.call(this,ve,this._element):this._config.placement,B=oS[t.toUpperCase()];return _g(this._element,ve,this._getPopperConfig(B))}_getOffset(){const{offset:ve}=this._config;return typeof ve=="string"?ve.split(",").map(t=>Number.parseInt(t,10)):typeof ve=="function"?t=>ve(t,this._element):ve}_resolvePossibleFunction(ve){return typeof ve=="function"?ve.call(this._element):ve}_getPopperConfig(ve){const t={placement:ve,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:B=>{this._getTipElement().setAttribute("data-popper-placement",B.state.placement)}}]};return{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const ve=this._config.trigger.split(" ");for(const t of ve)if(t==="click")Sa.on(this._element,this.constructor.eventName(tS),this._config.selector,B=>{this._initializeOnDelegatedTarget(B).toggle()});else if(t!==KE){const B=t===Ev?this.constructor.eventName(aS):this.constructor.eventName(rS),G=t===Ev?this.constructor.eventName(iS):this.constructor.eventName(nS);Sa.on(this._element,B,this._config.selector,x=>{const f=this._initializeOnDelegatedTarget(x);f._activeTrigger[x.type==="focusin"?p0:Ev]=!0,f._enter()}),Sa.on(this._element,G,this._config.selector,x=>{const f=this._initializeOnDelegatedTarget(x);f._activeTrigger[x.type==="focusout"?p0:Ev]=f._element.contains(x.relatedTarget),f._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Sa.on(this._element.closest(Hy),Gy,this._hideModalHandler)}_fixTitle(){const ve=this._element.getAttribute("title");!ve||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",ve),this._element.setAttribute("data-bs-original-title",ve),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(ve,t){clearTimeout(this._timeout),this._timeout=setTimeout(ve,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(ve){const t=Zf.getDataAttributes(this._element);for(const B of Object.keys(t))WE.has(B)&&delete t[B];return ve={...t,...typeof ve=="object"&&ve?ve:{}},ve=this._mergeConfigObj(ve),ve=this._configAfterMerge(ve),this._typeCheckConfig(ve),ve}_configAfterMerge(ve){return ve.container=ve.container===!1?document.body:_c(ve.container),typeof ve.delay=="number"&&(ve.delay={show:ve.delay,hide:ve.delay}),typeof ve.title=="number"&&(ve.title=ve.title.toString()),typeof ve.content=="number"&&(ve.content=ve.content.toString()),ve}_getDelegateConfig(){const ve={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(ve[t]=this._config[t]);return ve.selector=!1,ve.trigger="manual",ve}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(ve){return this.each(function(){const t=rv.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(typeof t[ve]>"u")throw new TypeError(`No method named "${ve}"`);t[ve]()}})}}of(rv);const uS="popover",fS=".popover-header",cS=".popover-body",hS={...rv.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},vS={...rv.DefaultType,content:"(null|string|element|function)"};class Eg extends rv{static get Default(){return hS}static get DefaultType(){return vS}static get NAME(){return uS}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fS]:this._getTitle(),[cS]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(ve){return this.each(function(){const t=Eg.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(typeof t[ve]>"u")throw new TypeError(`No method named "${ve}"`);t[ve]()}})}}of(Eg);const pS="scrollspy",dS="bs.scrollspy",Sg=`.${dS}`,gS=".data-api",mS=`activate${Sg}`,Yy=`click${Sg}`,yS=`load${Sg}${gS}`,xS="dropdown-item",Lh="active",bS='[data-bs-spy="scroll"]',d0="[href]",_S=".nav, .list-group",Wy=".nav-link",wS=".nav-item",TS=".list-group-item",AS=`${Wy}, ${wS} > ${Wy}, ${TS}`,MS=".dropdown",ES=".dropdown-toggle",SS={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},kS={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class xd extends bf{constructor(ve,t){super(ve,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return SS}static get DefaultType(){return kS}static get NAME(){return pS}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const ve of this._observableSections.values())this._observer.observe(ve)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(ve){return ve.target=_c(ve.target)||document.body,ve.rootMargin=ve.offset?`${ve.offset}px 0px -30%`:ve.rootMargin,typeof ve.threshold=="string"&&(ve.threshold=ve.threshold.split(",").map(t=>Number.parseFloat(t))),ve}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(Sa.off(this._config.target,Yy),Sa.on(this._config.target,Yy,d0,ve=>{const t=this._observableSections.get(ve.target.hash);if(t){ve.preventDefault();const B=this._rootElement||window,G=t.offsetTop-this._element.offsetTop;if(B.scrollTo){B.scrollTo({top:G,behavior:"smooth"});return}B.scrollTop=G}}))}_getNewObserver(){const ve={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),ve)}_observerCallback(ve){const t=f=>this._targetLinks.get(`#${f.target.id}`),B=f=>{this._previousScrollData.visibleEntryTop=f.target.offsetTop,this._process(t(f))},G=(this._rootElement||document.documentElement).scrollTop,x=G>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=G;for(const f of ve){if(!f.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(f));continue}const M=f.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(x&&M){if(B(f),!G)return;continue}!x&&!M&&B(f)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const ve=Xi.find(d0,this._config.target);for(const t of ve){if(!t.hash||wc(t))continue;const B=Xi.findOne(t.hash,this._element);ev(B)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,B))}}_process(ve){this._activeTarget!==ve&&(this._clearActiveClass(this._config.target),this._activeTarget=ve,ve.classList.add(Lh),this._activateParents(ve),Sa.trigger(this._element,mS,{relatedTarget:ve}))}_activateParents(ve){if(ve.classList.contains(xS)){Xi.findOne(ES,ve.closest(MS)).classList.add(Lh);return}for(const t of Xi.parents(ve,_S))for(const B of Xi.prev(t,AS))B.classList.add(Lh)}_clearActiveClass(ve){ve.classList.remove(Lh);const t=Xi.find(`${d0}.${Lh}`,ve);for(const B of t)B.classList.remove(Lh)}static jQueryInterface(ve){return this.each(function(){const t=xd.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(t[ve]===void 0||ve.startsWith("_")||ve==="constructor")throw new TypeError(`No method named "${ve}"`);t[ve]()}})}}Sa.on(window,yS,()=>{for(const me of Xi.find(bS))xd.getOrCreateInstance(me)});of(xd);const CS="tab",LS="bs.tab",qc=`.${LS}`,PS=`hide${qc}`,DS=`hidden${qc}`,RS=`show${qc}`,IS=`shown${qc}`,FS=`click${qc}`,zS=`keydown${qc}`,OS=`load${qc}`,NS="ArrowLeft",Xy="ArrowRight",BS="ArrowUp",jy="ArrowDown",Wc="active",Zy="fade",g0="show",US="dropdown",VS=".dropdown-toggle",HS=".dropdown-menu",m0=":not(.dropdown-toggle)",GS='.list-group, .nav, [role="tablist"]',YS=".nav-item, .list-group-item",WS=`.nav-link${m0}, .list-group-item${m0}, [role="tab"]${m0}`,$x='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',y0=`${WS}, ${$x}`,XS=`.${Wc}[data-bs-toggle="tab"], .${Wc}[data-bs-toggle="pill"], .${Wc}[data-bs-toggle="list"]`;class Kh extends bf{constructor(ve){super(ve),this._parent=this._element.closest(GS),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Sa.on(this._element,zS,t=>this._keydown(t)))}static get NAME(){return CS}show(){const ve=this._element;if(this._elemIsActive(ve))return;const t=this._getActiveElem(),B=t?Sa.trigger(t,PS,{relatedTarget:ve}):null;Sa.trigger(ve,RS,{relatedTarget:t}).defaultPrevented||B&&B.defaultPrevented||(this._deactivate(t,ve),this._activate(ve,t))}_activate(ve,t){if(!ve)return;ve.classList.add(Wc),this._activate(Xf(ve));const B=()=>{if(ve.getAttribute("role")!=="tab"){ve.classList.add(g0);return}ve.removeAttribute("tabindex"),ve.setAttribute("aria-selected",!0),this._toggleDropDown(ve,!0),Sa.trigger(ve,IS,{relatedTarget:t})};this._queueCallback(B,ve,ve.classList.contains(Zy))}_deactivate(ve,t){if(!ve)return;ve.classList.remove(Wc),ve.blur(),this._deactivate(Xf(ve));const B=()=>{if(ve.getAttribute("role")!=="tab"){ve.classList.remove(g0);return}ve.setAttribute("aria-selected",!1),ve.setAttribute("tabindex","-1"),this._toggleDropDown(ve,!1),Sa.trigger(ve,DS,{relatedTarget:t})};this._queueCallback(B,ve,ve.classList.contains(Zy))}_keydown(ve){if(![NS,Xy,BS,jy].includes(ve.key))return;ve.stopPropagation(),ve.preventDefault();const t=[Xy,jy].includes(ve.key),B=Tg(this._getChildren().filter(G=>!wc(G)),ve.target,t,!0);B&&(B.focus({preventScroll:!0}),Kh.getOrCreateInstance(B).show())}_getChildren(){return Xi.find(y0,this._parent)}_getActiveElem(){return this._getChildren().find(ve=>this._elemIsActive(ve))||null}_setInitialAttributes(ve,t){this._setAttributeIfNotExists(ve,"role","tablist");for(const B of t)this._setInitialAttributesOnChild(B)}_setInitialAttributesOnChild(ve){ve=this._getInnerElement(ve);const t=this._elemIsActive(ve),B=this._getOuterElement(ve);ve.setAttribute("aria-selected",t),B!==ve&&this._setAttributeIfNotExists(B,"role","presentation"),t||ve.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(ve,"role","tab"),this._setInitialAttributesOnTargetPanel(ve)}_setInitialAttributesOnTargetPanel(ve){const t=Xf(ve);!t||(this._setAttributeIfNotExists(t,"role","tabpanel"),ve.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${ve.id}`))}_toggleDropDown(ve,t){const B=this._getOuterElement(ve);if(!B.classList.contains(US))return;const G=(x,f)=>{const M=Xi.findOne(x,B);M&&M.classList.toggle(f,t)};G(VS,Wc),G(HS,g0),B.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(ve,t,B){ve.hasAttribute(t)||ve.setAttribute(t,B)}_elemIsActive(ve){return ve.classList.contains(Wc)}_getInnerElement(ve){return ve.matches(y0)?ve:Xi.findOne(y0,ve)}_getOuterElement(ve){return ve.closest(YS)||ve}static jQueryInterface(ve){return this.each(function(){const t=Kh.getOrCreateInstance(this);if(typeof ve=="string"){if(t[ve]===void 0||ve.startsWith("_")||ve==="constructor")throw new TypeError(`No method named "${ve}"`);t[ve]()}})}}Sa.on(document,FS,$x,function(me){["A","AREA"].includes(this.tagName)&&me.preventDefault(),!wc(this)&&Kh.getOrCreateInstance(this).show()});Sa.on(window,OS,()=>{for(const me of Xi.find(XS))Kh.getOrCreateInstance(me)});of(Kh);const jS="toast",ZS="bs.toast",Ec=`.${ZS}`,KS=`mouseover${Ec}`,JS=`mouseout${Ec}`,$S=`focusin${Ec}`,QS=`focusout${Ec}`,qS=`hide${Ec}`,e4=`hidden${Ec}`,t4=`show${Ec}`,r4=`shown${Ec}`,n4="fade",Ky="hide",Rp="show",Ip="showing",a4={animation:"boolean",autohide:"boolean",delay:"number"},i4={animation:!0,autohide:!0,delay:5e3};class bd extends bf{constructor(ve,t){super(ve,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return i4}static get DefaultType(){return a4}static get NAME(){return jS}show(){if(Sa.trigger(this._element,t4).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(n4);const t=()=>{this._element.classList.remove(Ip),Sa.trigger(this._element,r4),this._maybeScheduleHide()};this._element.classList.remove(Ky),Gv(this._element),this._element.classList.add(Rp,Ip),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||Sa.trigger(this._element,qS).defaultPrevented)return;const t=()=>{this._element.classList.add(Ky),this._element.classList.remove(Ip,Rp),Sa.trigger(this._element,e4)};this._element.classList.add(Ip),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Rp),super.dispose()}isShown(){return this._element.classList.contains(Rp)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(ve,t){switch(ve.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const B=ve.relatedTarget;this._element===B||this._element.contains(B)||this._maybeScheduleHide()}_setListeners(){Sa.on(this._element,KS,ve=>this._onInteraction(ve,!0)),Sa.on(this._element,JS,ve=>this._onInteraction(ve,!1)),Sa.on(this._element,$S,ve=>this._onInteraction(ve,!0)),Sa.on(this._element,QS,ve=>this._onInteraction(ve,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(ve){return this.each(function(){const t=bd.getOrCreateInstance(this,ve);if(typeof ve=="string"){if(typeof t[ve]>"u")throw new TypeError(`No method named "${ve}"`);t[ve](this)}})}}gd(bd);of(bd);var o4={exports:{}};const s4=ET(wg);/*!
  * Bootstrap v5.2.2 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(me,ve){(function(t,B){me.exports=B(s4)})(Vo,function(t){function B(Yr){if(Yr&&Yr.__esModule)return Yr;const qe=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(Yr){for(const $t in Yr)if($t!=="default"){const Jr=Object.getOwnPropertyDescriptor(Yr,$t);Object.defineProperty(qe,$t,Jr.get?Jr:{enumerable:!0,get:()=>Yr[$t]})}}return qe.default=Yr,Object.freeze(qe)}const G=B(t),x=1e6,f=1e3,M="transitionend",T=Yr=>Yr==null?`${Yr}`:Object.prototype.toString.call(Yr).match(/\s([a-z]+)/i)[1].toLowerCase(),e=Yr=>{do Yr+=Math.floor(Math.random()*x);while(document.getElementById(Yr));return Yr},a=Yr=>{let qe=Yr.getAttribute("data-bs-target");if(!qe||qe==="#"){let $t=Yr.getAttribute("href");if(!$t||!$t.includes("#")&&!$t.startsWith("."))return null;$t.includes("#")&&!$t.startsWith("#")&&($t=`#${$t.split("#")[1]}`),qe=$t&&$t!=="#"?$t.trim():null}return qe},i=Yr=>{const qe=a(Yr);return qe&&document.querySelector(qe)?qe:null},n=Yr=>{const qe=a(Yr);return qe?document.querySelector(qe):null},r=Yr=>{if(!Yr)return 0;let{transitionDuration:qe,transitionDelay:$t}=window.getComputedStyle(Yr);const Jr=Number.parseFloat(qe),Hn=Number.parseFloat($t);return!Jr&&!Hn?0:(qe=qe.split(",")[0],$t=$t.split(",")[0],(Number.parseFloat(qe)+Number.parseFloat($t))*f)},v=Yr=>{Yr.dispatchEvent(new Event(M))},s=Yr=>!Yr||typeof Yr!="object"?!1:(typeof Yr.jquery<"u"&&(Yr=Yr[0]),typeof Yr.nodeType<"u"),o=Yr=>s(Yr)?Yr.jquery?Yr[0]:Yr:typeof Yr=="string"&&Yr.length>0?document.querySelector(Yr):null,b=Yr=>{if(!s(Yr)||Yr.getClientRects().length===0)return!1;const qe=getComputedStyle(Yr).getPropertyValue("visibility")==="visible",$t=Yr.closest("details:not([open])");if(!$t)return qe;if($t!==Yr){const Jr=Yr.closest("summary");if(Jr&&Jr.parentNode!==$t||Jr===null)return!1}return qe},g=Yr=>!Yr||Yr.nodeType!==Node.ELEMENT_NODE||Yr.classList.contains("disabled")?!0:typeof Yr.disabled<"u"?Yr.disabled:Yr.hasAttribute("disabled")&&Yr.getAttribute("disabled")!=="false",d=Yr=>{if(!document.documentElement.attachShadow)return null;if(typeof Yr.getRootNode=="function"){const qe=Yr.getRootNode();return qe instanceof ShadowRoot?qe:null}return Yr instanceof ShadowRoot?Yr:Yr.parentNode?d(Yr.parentNode):null},c=()=>{},m=Yr=>{Yr.offsetHeight},l=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y=[],u=Yr=>{document.readyState==="loading"?(y.length||document.addEventListener("DOMContentLoaded",()=>{for(const qe of y)qe()}),y.push(Yr)):Yr()},A=()=>document.documentElement.dir==="rtl",_=Yr=>{u(()=>{const qe=l();if(qe){const $t=Yr.NAME,Jr=qe.fn[$t];qe.fn[$t]=Yr.jQueryInterface,qe.fn[$t].Constructor=Yr,qe.fn[$t].noConflict=()=>(qe.fn[$t]=Jr,Yr.jQueryInterface)}})},p=Yr=>{typeof Yr=="function"&&Yr()},w=(Yr,qe,$t=!0)=>{if(!$t){p(Yr);return}const Jr=5,Hn=r(qe)+Jr;let ta=!1;const ea=({target:vi})=>{vi===qe&&(ta=!0,qe.removeEventListener(M,ea),p(Yr))};qe.addEventListener(M,ea),setTimeout(()=>{ta||v(qe)},Hn)},h=(Yr,qe,$t,Jr)=>{const Hn=Yr.length;let ta=Yr.indexOf(qe);return ta===-1?!$t&&Jr?Yr[Hn-1]:Yr[0]:(ta+=$t?1:-1,Jr&&(ta=(ta+Hn)%Hn),Yr[Math.max(0,Math.min(ta,Hn-1))])},L=/[^.]*(?=\..*)\.|.*/,E=/\..*/,S=/::\d+$/,P={};let F=1;const I={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function R(Yr,qe){return qe&&`${qe}::${F++}`||Yr.uidEvent||F++}function O(Yr){const qe=R(Yr);return Yr.uidEvent=qe,P[qe]=P[qe]||{},P[qe]}function z(Yr,qe){return function $t(Jr){return J(Jr,{delegateTarget:Yr}),$t.oneOff&&K.off(Yr,Jr.type,qe),qe.apply(Yr,[Jr])}}function H(Yr,qe,$t){return function Jr(Hn){const ta=Yr.querySelectorAll(qe);for(let{target:ea}=Hn;ea&&ea!==this;ea=ea.parentNode)for(const vi of ta)if(vi===ea)return J(Hn,{delegateTarget:ea}),Jr.oneOff&&K.off(Yr,Hn.type,qe,$t),$t.apply(ea,[Hn])}}function Y(Yr,qe,$t=null){return Object.values(Yr).find(Jr=>Jr.callable===qe&&Jr.delegationSelector===$t)}function ee(Yr,qe,$t){const Jr=typeof qe=="string",Hn=Jr?$t:qe||$t;let ta=fe(Yr);return D.has(ta)||(ta=Yr),[Jr,Hn,ta]}function j(Yr,qe,$t,Jr,Hn){if(typeof qe!="string"||!Yr)return;let[ta,ea,vi]=ee(qe,$t,Jr);qe in I&&(ea=(Ue=>function(Be){if(!Be.relatedTarget||Be.relatedTarget!==Be.delegateTarget&&!Be.delegateTarget.contains(Be.relatedTarget))return Ue.call(this,Be)})(ea));const Pi=O(Yr),Ki=Pi[vi]||(Pi[vi]={}),Di=Y(Ki,ea,ta?$t:null);if(Di){Di.oneOff=Di.oneOff&&Hn;return}const le=R(ea,qe.replace(L,"")),Te=ta?H(Yr,$t,ea):z(Yr,ea);Te.delegationSelector=ta?$t:null,Te.callable=ea,Te.oneOff=Hn,Te.uidEvent=le,Ki[le]=Te,Yr.addEventListener(vi,Te,ta)}function X(Yr,qe,$t,Jr,Hn){const ta=Y(qe[$t],Jr,Hn);!ta||(Yr.removeEventListener($t,ta,Boolean(Hn)),delete qe[$t][ta.uidEvent])}function ae(Yr,qe,$t,Jr){const Hn=qe[$t]||{};for(const ta of Object.keys(Hn))if(ta.includes(Jr)){const ea=Hn[ta];X(Yr,qe,$t,ea.callable,ea.delegationSelector)}}function fe(Yr){return Yr=Yr.replace(E,""),I[Yr]||Yr}const K={on(Yr,qe,$t,Jr){j(Yr,qe,$t,Jr,!1)},one(Yr,qe,$t,Jr){j(Yr,qe,$t,Jr,!0)},off(Yr,qe,$t,Jr){if(typeof qe!="string"||!Yr)return;const[Hn,ta,ea]=ee(qe,$t,Jr),vi=ea!==qe,Pi=O(Yr),Ki=Pi[ea]||{},Di=qe.startsWith(".");if(typeof ta<"u"){if(!Object.keys(Ki).length)return;X(Yr,Pi,ea,ta,Hn?$t:null);return}if(Di)for(const le of Object.keys(Pi))ae(Yr,Pi,le,qe.slice(1));for(const le of Object.keys(Ki)){const Te=le.replace(S,"");if(!vi||qe.includes(Te)){const De=Ki[le];X(Yr,Pi,ea,De.callable,De.delegationSelector)}}},trigger(Yr,qe,$t){if(typeof qe!="string"||!Yr)return null;const Jr=l(),Hn=fe(qe),ta=qe!==Hn;let ea=null,vi=!0,Pi=!0,Ki=!1;ta&&Jr&&(ea=Jr.Event(qe,$t),Jr(Yr).trigger(ea),vi=!ea.isPropagationStopped(),Pi=!ea.isImmediatePropagationStopped(),Ki=ea.isDefaultPrevented());let Di=new Event(qe,{bubbles:vi,cancelable:!0});return Di=J(Di,$t),Ki&&Di.preventDefault(),Pi&&Yr.dispatchEvent(Di),Di.defaultPrevented&&ea&&ea.preventDefault(),Di}};function J(Yr,qe){for(const[$t,Jr]of Object.entries(qe||{}))try{Yr[$t]=Jr}catch{Object.defineProperty(Yr,$t,{configurable:!0,get(){return Jr}})}return Yr}const U=new Map,V={set(Yr,qe,$t){U.has(Yr)||U.set(Yr,new Map);const Jr=U.get(Yr);if(!Jr.has(qe)&&Jr.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Jr.keys())[0]}.`);return}Jr.set(qe,$t)},get(Yr,qe){return U.has(Yr)&&U.get(Yr).get(qe)||null},remove(Yr,qe){if(!U.has(Yr))return;const $t=U.get(Yr);$t.delete(qe),$t.size===0&&U.delete(Yr)}};function q(Yr){if(Yr==="true")return!0;if(Yr==="false")return!1;if(Yr===Number(Yr).toString())return Number(Yr);if(Yr===""||Yr==="null")return null;if(typeof Yr!="string")return Yr;try{return JSON.parse(decodeURIComponent(Yr))}catch{return Yr}}function re(Yr){return Yr.replace(/[A-Z]/g,qe=>`-${qe.toLowerCase()}`)}const Z={setDataAttribute(Yr,qe,$t){Yr.setAttribute(`data-bs-${re(qe)}`,$t)},removeDataAttribute(Yr,qe){Yr.removeAttribute(`data-bs-${re(qe)}`)},getDataAttributes(Yr){if(!Yr)return{};const qe={},$t=Object.keys(Yr.dataset).filter(Jr=>Jr.startsWith("bs")&&!Jr.startsWith("bsConfig"));for(const Jr of $t){let Hn=Jr.replace(/^bs/,"");Hn=Hn.charAt(0).toLowerCase()+Hn.slice(1,Hn.length),qe[Hn]=q(Yr.dataset[Jr])}return qe},getDataAttribute(Yr,qe){return q(Yr.getAttribute(`data-bs-${re(qe)}`))}};class Q{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(qe){return qe=this._mergeConfigObj(qe),qe=this._configAfterMerge(qe),this._typeCheckConfig(qe),qe}_configAfterMerge(qe){return qe}_mergeConfigObj(qe,$t){const Jr=s($t)?Z.getDataAttribute($t,"config"):{};return{...this.constructor.Default,...typeof Jr=="object"?Jr:{},...s($t)?Z.getDataAttributes($t):{},...typeof qe=="object"?qe:{}}}_typeCheckConfig(qe,$t=this.constructor.DefaultType){for(const Jr of Object.keys($t)){const Hn=$t[Jr],ta=qe[Jr],ea=s(ta)?"element":T(ta);if(!new RegExp(Hn).test(ea))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Jr}" provided type "${ea}" but expected type "${Hn}".`)}}}const ie="5.2.2";class oe extends Q{constructor(qe,$t){super(),qe=o(qe),qe&&(this._element=qe,this._config=this._getConfig($t),V.set(this._element,this.constructor.DATA_KEY,this))}dispose(){V.remove(this._element,this.constructor.DATA_KEY),K.off(this._element,this.constructor.EVENT_KEY);for(const qe of Object.getOwnPropertyNames(this))this[qe]=null}_queueCallback(qe,$t,Jr=!0){w(qe,$t,Jr)}_getConfig(qe){return qe=this._mergeConfigObj(qe,this._element),qe=this._configAfterMerge(qe),this._typeCheckConfig(qe),qe}static getInstance(qe){return V.get(o(qe),this.DATA_KEY)}static getOrCreateInstance(qe,$t={}){return this.getInstance(qe)||new this(qe,typeof $t=="object"?$t:null)}static get VERSION(){return ie}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(qe){return`${qe}${this.EVENT_KEY}`}}const ne=(Yr,qe="hide")=>{const $t=`click.dismiss${Yr.EVENT_KEY}`,Jr=Yr.NAME;K.on(document,$t,`[data-bs-dismiss="${Jr}"]`,function(Hn){if(["A","AREA"].includes(this.tagName)&&Hn.preventDefault(),g(this))return;const ta=n(this)||this.closest(`.${Jr}`);Yr.getOrCreateInstance(ta)[qe]()})},se="alert",ue=".bs.alert",ge=`close${ue}`,xe=`closed${ue}`,ye="fade",be="show";class Se extends oe{static get NAME(){return se}close(){if(K.trigger(this._element,ge).defaultPrevented)return;this._element.classList.remove(be);const $t=this._element.classList.contains(ye);this._queueCallback(()=>this._destroyElement(),this._element,$t)}_destroyElement(){this._element.remove(),K.trigger(this._element,xe),this.dispose()}static jQueryInterface(qe){return this.each(function(){const $t=Se.getOrCreateInstance(this);if(typeof qe=="string"){if($t[qe]===void 0||qe.startsWith("_")||qe==="constructor")throw new TypeError(`No method named "${qe}"`);$t[qe](this)}})}}ne(Se,"close"),_(Se);const Re="button",Ae=".bs.button",Ce=".data-api",Ze="active",Ye='[data-bs-toggle="button"]',ze=`click${Ae}${Ce}`;class Ie extends oe{static get NAME(){return Re}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ze))}static jQueryInterface(qe){return this.each(function(){const $t=Ie.getOrCreateInstance(this);qe==="toggle"&&$t[qe]()})}}K.on(document,ze,Ye,Yr=>{Yr.preventDefault();const qe=Yr.target.closest(Ye);Ie.getOrCreateInstance(qe).toggle()}),_(Ie);const Ge={find(Yr,qe=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(qe,Yr))},findOne(Yr,qe=document.documentElement){return Element.prototype.querySelector.call(qe,Yr)},children(Yr,qe){return[].concat(...Yr.children).filter($t=>$t.matches(qe))},parents(Yr,qe){const $t=[];let Jr=Yr.parentNode.closest(qe);for(;Jr;)$t.push(Jr),Jr=Jr.parentNode.closest(qe);return $t},prev(Yr,qe){let $t=Yr.previousElementSibling;for(;$t;){if($t.matches(qe))return[$t];$t=$t.previousElementSibling}return[]},next(Yr,qe){let $t=Yr.nextElementSibling;for(;$t;){if($t.matches(qe))return[$t];$t=$t.nextElementSibling}return[]},focusableChildren(Yr){const qe=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map($t=>`${$t}:not([tabindex^="-"])`).join(",");return this.find(qe,Yr).filter($t=>!g($t)&&b($t))}},dt="swipe",Rt=".bs.swipe",Qt=`touchstart${Rt}`,Bt=`touchmove${Rt}`,Ct=`touchend${Rt}`,Kt=`pointerdown${Rt}`,Ot=`pointerup${Rt}`,St="touch",Xe="pen",at="pointer-event",We=40,Ee={endCallback:null,leftCallback:null,rightCallback:null},He={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ke extends Q{constructor(qe,$t){super(),this._element=qe,!(!qe||!Ke.isSupported())&&(this._config=this._getConfig($t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ee}static get DefaultType(){return He}static get NAME(){return dt}dispose(){K.off(this._element,Rt)}_start(qe){if(!this._supportPointerEvents){this._deltaX=qe.touches[0].clientX;return}this._eventIsPointerPenTouch(qe)&&(this._deltaX=qe.clientX)}_end(qe){this._eventIsPointerPenTouch(qe)&&(this._deltaX=qe.clientX-this._deltaX),this._handleSwipe(),p(this._config.endCallback)}_move(qe){this._deltaX=qe.touches&&qe.touches.length>1?0:qe.touches[0].clientX-this._deltaX}_handleSwipe(){const qe=Math.abs(this._deltaX);if(qe<=We)return;const $t=qe/this._deltaX;this._deltaX=0,$t&&p($t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(K.on(this._element,Kt,qe=>this._start(qe)),K.on(this._element,Ot,qe=>this._end(qe)),this._element.classList.add(at)):(K.on(this._element,Qt,qe=>this._start(qe)),K.on(this._element,Bt,qe=>this._move(qe)),K.on(this._element,Ct,qe=>this._end(qe)))}_eventIsPointerPenTouch(qe){return this._supportPointerEvents&&(qe.pointerType===Xe||qe.pointerType===St)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const et="carousel",mt=".bs.carousel",Mt=".data-api",Gt="ArrowLeft",zt="ArrowRight",Ht=500,Xt="next",Wt="prev",sr="left",Gr="right",cn=`slide${mt}`,en=`slid${mt}`,st=`keydown${mt}`,rr=`mouseenter${mt}`,er=`mouseleave${mt}`,jt=`dragstart${mt}`,Mr=`load${mt}${Mt}`,it=`click${mt}${Mt}`,Qe="carousel",ft="active",ct="slide",Et="carousel-item-end",Nt="carousel-item-start",Pe="carousel-item-next",Le="carousel-item-prev",ot=".active",ut=".carousel-item",pt=ot+ut,Pt=".carousel-item img",xt=".carousel-indicators",Lt="[data-bs-slide], [data-bs-slide-to]",Zt='[data-bs-ride="carousel"]',ur={[Gt]:Gr,[zt]:sr},Pr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ar={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class kr extends oe{constructor(qe,$t){super(qe,$t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ge.findOne(xt,this._element),this._addEventListeners(),this._config.ride===Qe&&this.cycle()}static get Default(){return Pr}static get DefaultType(){return Ar}static get NAME(){return et}next(){this._slide(Xt)}nextWhenVisible(){!document.hidden&&b(this._element)&&this.next()}prev(){this._slide(Wt)}pause(){this._isSliding&&v(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){K.one(this._element,en,()=>this.cycle());return}this.cycle()}}to(qe){const $t=this._getItems();if(qe>$t.length-1||qe<0)return;if(this._isSliding){K.one(this._element,en,()=>this.to(qe));return}const Jr=this._getItemIndex(this._getActive());if(Jr===qe)return;const Hn=qe>Jr?Xt:Wt;this._slide(Hn,$t[qe])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(qe){return qe.defaultInterval=qe.interval,qe}_addEventListeners(){this._config.keyboard&&K.on(this._element,st,qe=>this._keydown(qe)),this._config.pause==="hover"&&(K.on(this._element,rr,()=>this.pause()),K.on(this._element,er,()=>this._maybeEnableCycle())),this._config.touch&&Ke.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const Jr of Ge.find(Pt,this._element))K.on(Jr,jt,Hn=>Hn.preventDefault());const $t={leftCallback:()=>this._slide(this._directionToOrder(sr)),rightCallback:()=>this._slide(this._directionToOrder(Gr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ht+this._config.interval))}};this._swipeHelper=new Ke(this._element,$t)}_keydown(qe){if(/input|textarea/i.test(qe.target.tagName))return;const $t=ur[qe.key];$t&&(qe.preventDefault(),this._slide(this._directionToOrder($t)))}_getItemIndex(qe){return this._getItems().indexOf(qe)}_setActiveIndicatorElement(qe){if(!this._indicatorsElement)return;const $t=Ge.findOne(ot,this._indicatorsElement);$t.classList.remove(ft),$t.removeAttribute("aria-current");const Jr=Ge.findOne(`[data-bs-slide-to="${qe}"]`,this._indicatorsElement);Jr&&(Jr.classList.add(ft),Jr.setAttribute("aria-current","true"))}_updateInterval(){const qe=this._activeElement||this._getActive();if(!qe)return;const $t=Number.parseInt(qe.getAttribute("data-bs-interval"),10);this._config.interval=$t||this._config.defaultInterval}_slide(qe,$t=null){if(this._isSliding)return;const Jr=this._getActive(),Hn=qe===Xt,ta=$t||h(this._getItems(),Jr,Hn,this._config.wrap);if(ta===Jr)return;const ea=this._getItemIndex(ta),vi=De=>K.trigger(this._element,De,{relatedTarget:ta,direction:this._orderToDirection(qe),from:this._getItemIndex(Jr),to:ea});if(vi(cn).defaultPrevented||!Jr||!ta)return;const Ki=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ea),this._activeElement=ta;const Di=Hn?Nt:Et,le=Hn?Pe:Le;ta.classList.add(le),m(ta),Jr.classList.add(Di),ta.classList.add(Di);const Te=()=>{ta.classList.remove(Di,le),ta.classList.add(ft),Jr.classList.remove(ft,le,Di),this._isSliding=!1,vi(en)};this._queueCallback(Te,Jr,this._isAnimated()),Ki&&this.cycle()}_isAnimated(){return this._element.classList.contains(ct)}_getActive(){return Ge.findOne(pt,this._element)}_getItems(){return Ge.find(ut,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(qe){return A()?qe===sr?Wt:Xt:qe===sr?Xt:Wt}_orderToDirection(qe){return A()?qe===Wt?sr:Gr:qe===Wt?Gr:sr}static jQueryInterface(qe){return this.each(function(){const $t=kr.getOrCreateInstance(this,qe);if(typeof qe=="number"){$t.to(qe);return}if(typeof qe=="string"){if($t[qe]===void 0||qe.startsWith("_")||qe==="constructor")throw new TypeError(`No method named "${qe}"`);$t[qe]()}})}}K.on(document,it,Lt,function(Yr){const qe=n(this);if(!qe||!qe.classList.contains(Qe))return;Yr.preventDefault();const $t=kr.getOrCreateInstance(qe),Jr=this.getAttribute("data-bs-slide-to");if(Jr){$t.to(Jr),$t._maybeEnableCycle();return}if(Z.getDataAttribute(this,"slide")==="next"){$t.next(),$t._maybeEnableCycle();return}$t.prev(),$t._maybeEnableCycle()}),K.on(window,Mr,()=>{const Yr=Ge.find(Zt);for(const qe of Yr)kr.getOrCreateInstance(qe)}),_(kr);const Zr="collapse",br=".bs.collapse",Or=".data-api",Hr=`show${br}`,Lr=`shown${br}`,nt=`hide${br}`,It=`hidden${br}`,Jt=`click${br}${Or}`,fr="show",Nr="collapse",Vr="collapsing",Dr="collapsed",Er=`:scope .${Nr} .${Nr}`,jr="collapse-horizontal",kn="width",mn="height",Wn=".collapse.show, .collapse.collapsing",In='[data-bs-toggle="collapse"]',$n={parent:null,toggle:!0},Kn={parent:"(null|element)",toggle:"boolean"};class ma extends oe{constructor(qe,$t){super(qe,$t),this._isTransitioning=!1,this._triggerArray=[];const Jr=Ge.find(In);for(const Hn of Jr){const ta=i(Hn),ea=Ge.find(ta).filter(vi=>vi===this._element);ta!==null&&ea.length&&this._triggerArray.push(Hn)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $n}static get DefaultType(){return Kn}static get NAME(){return Zr}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let qe=[];if(this._config.parent&&(qe=this._getFirstLevelChildren(Wn).filter(vi=>vi!==this._element).map(vi=>ma.getOrCreateInstance(vi,{toggle:!1}))),qe.length&&qe[0]._isTransitioning||K.trigger(this._element,Hr).defaultPrevented)return;for(const vi of qe)vi.hide();const Jr=this._getDimension();this._element.classList.remove(Nr),this._element.classList.add(Vr),this._element.style[Jr]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Hn=()=>{this._isTransitioning=!1,this._element.classList.remove(Vr),this._element.classList.add(Nr,fr),this._element.style[Jr]="",K.trigger(this._element,Lr)},ea=`scroll${Jr[0].toUpperCase()+Jr.slice(1)}`;this._queueCallback(Hn,this._element,!0),this._element.style[Jr]=`${this._element[ea]}px`}hide(){if(this._isTransitioning||!this._isShown()||K.trigger(this._element,nt).defaultPrevented)return;const $t=this._getDimension();this._element.style[$t]=`${this._element.getBoundingClientRect()[$t]}px`,m(this._element),this._element.classList.add(Vr),this._element.classList.remove(Nr,fr);for(const Hn of this._triggerArray){const ta=n(Hn);ta&&!this._isShown(ta)&&this._addAriaAndCollapsedClass([Hn],!1)}this._isTransitioning=!0;const Jr=()=>{this._isTransitioning=!1,this._element.classList.remove(Vr),this._element.classList.add(Nr),K.trigger(this._element,It)};this._element.style[$t]="",this._queueCallback(Jr,this._element,!0)}_isShown(qe=this._element){return qe.classList.contains(fr)}_configAfterMerge(qe){return qe.toggle=Boolean(qe.toggle),qe.parent=o(qe.parent),qe}_getDimension(){return this._element.classList.contains(jr)?kn:mn}_initializeChildren(){if(!this._config.parent)return;const qe=this._getFirstLevelChildren(In);for(const $t of qe){const Jr=n($t);Jr&&this._addAriaAndCollapsedClass([$t],this._isShown(Jr))}}_getFirstLevelChildren(qe){const $t=Ge.find(Er,this._config.parent);return Ge.find(qe,this._config.parent).filter(Jr=>!$t.includes(Jr))}_addAriaAndCollapsedClass(qe,$t){if(!!qe.length)for(const Jr of qe)Jr.classList.toggle(Dr,!$t),Jr.setAttribute("aria-expanded",$t)}static jQueryInterface(qe){const $t={};return typeof qe=="string"&&/show|hide/.test(qe)&&($t.toggle=!1),this.each(function(){const Jr=ma.getOrCreateInstance(this,$t);if(typeof qe=="string"){if(typeof Jr[qe]>"u")throw new TypeError(`No method named "${qe}"`);Jr[qe]()}})}}K.on(document,Jt,In,function(Yr){(Yr.target.tagName==="A"||Yr.delegateTarget&&Yr.delegateTarget.tagName==="A")&&Yr.preventDefault();const qe=i(this),$t=Ge.find(qe);for(const Jr of $t)ma.getOrCreateInstance(Jr,{toggle:!1}).toggle()}),_(ma);const Ra="dropdown",Ka=".bs.dropdown",ri=".data-api",ei="Escape",Sr="Tab",bn="ArrowUp",dn="ArrowDown",Ln=2,ra=`hide${Ka}`,ya=`hidden${Ka}`,sa=`show${Ka}`,Bn=`shown${Ka}`,Qn=`click${Ka}${ri}`,Xa=`keydown${Ka}${ri}`,mi=`keyup${Ka}${ri}`,Yt="show",gr="dropup",un="dropend",yn="dropstart",sn="dropup-center",Cn="dropdown-center",Tn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',gn=`${Tn}.${Yt}`,_r=".dropdown-menu",wr=".navbar",Br=".navbar-nav",An=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Yn=A()?"top-end":"top-start",ua=A()?"top-start":"top-end",Sn=A()?"bottom-end":"bottom-start",na=A()?"bottom-start":"bottom-end",ca=A()?"left-start":"right-start",Ma=A()?"right-start":"left-start",ka="top",ga="bottom",Ia={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Mo={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ro extends oe{constructor(qe,$t){super(qe,$t),this._popper=null,this._parent=this._element.parentNode,this._menu=Ge.next(this._element,_r)[0]||Ge.prev(this._element,_r)[0]||Ge.findOne(_r,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ia}static get DefaultType(){return Mo}static get NAME(){return Ra}toggle(){return this._isShown()?this.hide():this.show()}show(){if(g(this._element)||this._isShown())return;const qe={relatedTarget:this._element};if(!K.trigger(this._element,sa,qe).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Br))for(const Jr of[].concat(...document.body.children))K.on(Jr,"mouseover",c);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Yt),this._element.classList.add(Yt),K.trigger(this._element,Bn,qe)}}hide(){if(g(this._element)||!this._isShown())return;const qe={relatedTarget:this._element};this._completeHide(qe)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(qe){if(!K.trigger(this._element,ra,qe).defaultPrevented){if("ontouchstart"in document.documentElement)for(const Jr of[].concat(...document.body.children))K.off(Jr,"mouseover",c);this._popper&&this._popper.destroy(),this._menu.classList.remove(Yt),this._element.classList.remove(Yt),this._element.setAttribute("aria-expanded","false"),Z.removeDataAttribute(this._menu,"popper"),K.trigger(this._element,ya,qe)}}_getConfig(qe){if(qe=super._getConfig(qe),typeof qe.reference=="object"&&!s(qe.reference)&&typeof qe.reference.getBoundingClientRect!="function")throw new TypeError(`${Ra.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return qe}_createPopper(){if(typeof G>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let qe=this._element;this._config.reference==="parent"?qe=this._parent:s(this._config.reference)?qe=o(this._config.reference):typeof this._config.reference=="object"&&(qe=this._config.reference);const $t=this._getPopperConfig();this._popper=G.createPopper(qe,this._menu,$t)}_isShown(){return this._menu.classList.contains(Yt)}_getPlacement(){const qe=this._parent;if(qe.classList.contains(un))return ca;if(qe.classList.contains(yn))return Ma;if(qe.classList.contains(sn))return ka;if(qe.classList.contains(Cn))return ga;const $t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return qe.classList.contains(gr)?$t?ua:Yn:$t?na:Sn}_detectNavbar(){return this._element.closest(wr)!==null}_getOffset(){const{offset:qe}=this._config;return typeof qe=="string"?qe.split(",").map($t=>Number.parseInt($t,10)):typeof qe=="function"?$t=>qe($t,this._element):qe}_getPopperConfig(){const qe={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Z.setDataAttribute(this._menu,"popper","static"),qe.modifiers=[{name:"applyStyles",enabled:!1}]),{...qe,...typeof this._config.popperConfig=="function"?this._config.popperConfig(qe):this._config.popperConfig}}_selectMenuItem({key:qe,target:$t}){const Jr=Ge.find(An,this._menu).filter(Hn=>b(Hn));!Jr.length||h(Jr,$t,qe===dn,!Jr.includes($t)).focus()}static jQueryInterface(qe){return this.each(function(){const $t=ro.getOrCreateInstance(this,qe);if(typeof qe=="string"){if(typeof $t[qe]>"u")throw new TypeError(`No method named "${qe}"`);$t[qe]()}})}static clearMenus(qe){if(qe.button===Ln||qe.type==="keyup"&&qe.key!==Sr)return;const $t=Ge.find(gn);for(const Jr of $t){const Hn=ro.getInstance(Jr);if(!Hn||Hn._config.autoClose===!1)continue;const ta=qe.composedPath(),ea=ta.includes(Hn._menu);if(ta.includes(Hn._element)||Hn._config.autoClose==="inside"&&!ea||Hn._config.autoClose==="outside"&&ea||Hn._menu.contains(qe.target)&&(qe.type==="keyup"&&qe.key===Sr||/input|select|option|textarea|form/i.test(qe.target.tagName)))continue;const vi={relatedTarget:Hn._element};qe.type==="click"&&(vi.clickEvent=qe),Hn._completeHide(vi)}}static dataApiKeydownHandler(qe){const $t=/input|textarea/i.test(qe.target.tagName),Jr=qe.key===ei,Hn=[bn,dn].includes(qe.key);if(!Hn&&!Jr||$t&&!Jr)return;qe.preventDefault();const ta=this.matches(Tn)?this:Ge.prev(this,Tn)[0]||Ge.next(this,Tn)[0]||Ge.findOne(Tn,qe.delegateTarget.parentNode),ea=ro.getOrCreateInstance(ta);if(Hn){qe.stopPropagation(),ea.show(),ea._selectMenuItem(qe);return}ea._isShown()&&(qe.stopPropagation(),ea.hide(),ta.focus())}}K.on(document,Xa,Tn,ro.dataApiKeydownHandler),K.on(document,Xa,_r,ro.dataApiKeydownHandler),K.on(document,Qn,ro.clearMenus),K.on(document,mi,ro.clearMenus),K.on(document,Qn,Tn,function(Yr){Yr.preventDefault(),ro.getOrCreateInstance(this).toggle()}),_(ro);const Jo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ks=".sticky-top",Vs="padding-right",Gl="margin-right";class Ai{constructor(){this._element=document.body}getWidth(){const qe=document.documentElement.clientWidth;return Math.abs(window.innerWidth-qe)}hide(){const qe=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vs,$t=>$t+qe),this._setElementAttributes(Jo,Vs,$t=>$t+qe),this._setElementAttributes(Ks,Gl,$t=>$t-qe)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vs),this._resetElementAttributes(Jo,Vs),this._resetElementAttributes(Ks,Gl)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(qe,$t,Jr){const Hn=this.getWidth(),ta=ea=>{if(ea!==this._element&&window.innerWidth>ea.clientWidth+Hn)return;this._saveInitialAttribute(ea,$t);const vi=window.getComputedStyle(ea).getPropertyValue($t);ea.style.setProperty($t,`${Jr(Number.parseFloat(vi))}px`)};this._applyManipulationCallback(qe,ta)}_saveInitialAttribute(qe,$t){const Jr=qe.style.getPropertyValue($t);Jr&&Z.setDataAttribute(qe,$t,Jr)}_resetElementAttributes(qe,$t){const Jr=Hn=>{const ta=Z.getDataAttribute(Hn,$t);if(ta===null){Hn.style.removeProperty($t);return}Z.removeDataAttribute(Hn,$t),Hn.style.setProperty($t,ta)};this._applyManipulationCallback(qe,Jr)}_applyManipulationCallback(qe,$t){if(s(qe)){$t(qe);return}for(const Jr of Ge.find(qe,this._element))$t(Jr)}}const Hs="backdrop",Gs="fade",ji="show",Io=`mousedown.bs.${Hs}`,Ml={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ws={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ii extends Q{constructor(qe){super(),this._config=this._getConfig(qe),this._isAppended=!1,this._element=null}static get Default(){return Ml}static get DefaultType(){return ws}static get NAME(){return Hs}show(qe){if(!this._config.isVisible){p(qe);return}this._append();const $t=this._getElement();this._config.isAnimated&&m($t),$t.classList.add(ji),this._emulateAnimation(()=>{p(qe)})}hide(qe){if(!this._config.isVisible){p(qe);return}this._getElement().classList.remove(ji),this._emulateAnimation(()=>{this.dispose(),p(qe)})}dispose(){!this._isAppended||(K.off(this._element,Io),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const qe=document.createElement("div");qe.className=this._config.className,this._config.isAnimated&&qe.classList.add(Gs),this._element=qe}return this._element}_configAfterMerge(qe){return qe.rootElement=o(qe.rootElement),qe}_append(){if(this._isAppended)return;const qe=this._getElement();this._config.rootElement.append(qe),K.on(qe,Io,()=>{p(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(qe){w(qe,this._getElement(),this._config.isAnimated)}}const fl="focustrap",Fi=".bs.focustrap",po=`focusin${Fi}`,no=`keydown.tab${Fi}`,us="Tab",Js="forward",au="backward",es={autofocus:!0,trapElement:null},bu={autofocus:"boolean",trapElement:"element"};class Ds extends Q{constructor(qe){super(),this._config=this._getConfig(qe),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return es}static get DefaultType(){return bu}static get NAME(){return fl}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),K.off(document,Fi),K.on(document,po,qe=>this._handleFocusin(qe)),K.on(document,no,qe=>this._handleKeydown(qe)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,K.off(document,Fi))}_handleFocusin(qe){const{trapElement:$t}=this._config;if(qe.target===document||qe.target===$t||$t.contains(qe.target))return;const Jr=Ge.focusableChildren($t);Jr.length===0?$t.focus():this._lastTabNavDirection===au?Jr[Jr.length-1].focus():Jr[0].focus()}_handleKeydown(qe){qe.key===us&&(this._lastTabNavDirection=qe.shiftKey?au:Js)}}const No="modal",ko=".bs.modal",Rs=".data-api",Yl="Escape",Vu=`hide${ko}`,Hu=`hidePrevented${ko}`,Ys=`hidden${ko}`,El=`show${ko}`,Is=`shown${ko}`,iu=`resize${ko}`,cl=`click.dismiss${ko}`,ou=`mousedown.dismiss${ko}`,_u=`keydown.dismiss${ko}`,Wl=`click${ko}${Rs}`,wu="modal-open",$s="fade",Xl="show",hl="modal-static",Ts=".modal.show",Sl=".modal-dialog",su=".modal-body",Tu='[data-bs-toggle="modal"]',Au={backdrop:!0,focus:!0,keyboard:!0},jl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Qs extends oe{constructor(qe,$t){super(qe,$t),this._dialog=Ge.findOne(Sl,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ai,this._addEventListeners()}static get Default(){return Au}static get DefaultType(){return jl}static get NAME(){return No}toggle(qe){return this._isShown?this.hide():this.show(qe)}show(qe){this._isShown||this._isTransitioning||K.trigger(this._element,El,{relatedTarget:qe}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(wu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(qe)))}hide(){!this._isShown||this._isTransitioning||K.trigger(this._element,Vu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const qe of[window,this._dialog])K.off(qe,ko);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ii({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ds({trapElement:this._element})}_showElement(qe){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const $t=Ge.findOne(su,this._dialog);$t&&($t.scrollTop=0),m(this._element),this._element.classList.add(Xl);const Jr=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,K.trigger(this._element,Is,{relatedTarget:qe})};this._queueCallback(Jr,this._dialog,this._isAnimated())}_addEventListeners(){K.on(this._element,_u,qe=>{if(qe.key===Yl){if(this._config.keyboard){qe.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),K.on(window,iu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),K.on(this._element,ou,qe=>{K.one(this._element,cl,$t=>{if(!(this._element!==qe.target||this._element!==$t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(wu),this._resetAdjustments(),this._scrollBar.reset(),K.trigger(this._element,Ys)})}_isAnimated(){return this._element.classList.contains($s)}_triggerBackdropTransition(){if(K.trigger(this._element,Hu).defaultPrevented)return;const $t=this._element.scrollHeight>document.documentElement.clientHeight,Jr=this._element.style.overflowY;Jr==="hidden"||this._element.classList.contains(hl)||($t||(this._element.style.overflowY="hidden"),this._element.classList.add(hl),this._queueCallback(()=>{this._element.classList.remove(hl),this._queueCallback(()=>{this._element.style.overflowY=Jr},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const qe=this._element.scrollHeight>document.documentElement.clientHeight,$t=this._scrollBar.getWidth(),Jr=$t>0;if(Jr&&!qe){const Hn=A()?"paddingLeft":"paddingRight";this._element.style[Hn]=`${$t}px`}if(!Jr&&qe){const Hn=A()?"paddingRight":"paddingLeft";this._element.style[Hn]=`${$t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(qe,$t){return this.each(function(){const Jr=Qs.getOrCreateInstance(this,qe);if(typeof qe=="string"){if(typeof Jr[qe]>"u")throw new TypeError(`No method named "${qe}"`);Jr[qe]($t)}})}}K.on(document,Wl,Tu,function(Yr){const qe=n(this);["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),K.one(qe,El,Hn=>{Hn.defaultPrevented||K.one(qe,Ys,()=>{b(this)&&this.focus()})});const $t=Ge.findOne(Ts);$t&&Qs.getInstance($t).hide(),Qs.getOrCreateInstance(qe).toggle(this)}),ne(Qs),_(Qs);const Mu="offcanvas",Wo=".bs.offcanvas",qs=".data-api",lu=`load${Wo}${qs}`,As="Escape",Fo="show",kl="showing",Ms="hiding",Fs="offcanvas-backdrop",go=".offcanvas.show",Cl=`show${Wo}`,Ll=`shown${Wo}`,el=`hide${Wo}`,cs=`hidePrevented${Wo}`,vl=`hidden${Wo}`,pl=`resize${Wo}`,Zl=`click${Wo}${qs}`,Pl=`keydown.dismiss${Wo}`,tl='[data-bs-toggle="offcanvas"]',Gu={backdrop:!0,keyboard:!0,scroll:!1},hs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ws extends oe{constructor(qe,$t){super(qe,$t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Gu}static get DefaultType(){return hs}static get NAME(){return Mu}toggle(qe){return this._isShown?this.hide():this.show(qe)}show(qe){if(this._isShown||K.trigger(this._element,Cl,{relatedTarget:qe}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ai().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(kl);const Jr=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Fo),this._element.classList.remove(kl),K.trigger(this._element,Ll,{relatedTarget:qe})};this._queueCallback(Jr,this._element,!0)}hide(){if(!this._isShown||K.trigger(this._element,el).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ms),this._backdrop.hide();const $t=()=>{this._element.classList.remove(Fo,Ms),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ai().reset(),K.trigger(this._element,vl)};this._queueCallback($t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const qe=()=>{if(this._config.backdrop==="static"){K.trigger(this._element,cs);return}this.hide()},$t=Boolean(this._config.backdrop);return new Ii({className:Fs,isVisible:$t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:$t?qe:null})}_initializeFocusTrap(){return new Ds({trapElement:this._element})}_addEventListeners(){K.on(this._element,Pl,qe=>{if(qe.key===As){if(!this._config.keyboard){K.trigger(this._element,cs);return}this.hide()}})}static jQueryInterface(qe){return this.each(function(){const $t=Ws.getOrCreateInstance(this,qe);if(typeof qe=="string"){if($t[qe]===void 0||qe.startsWith("_")||qe==="constructor")throw new TypeError(`No method named "${qe}"`);$t[qe](this)}})}}K.on(document,Zl,tl,function(Yr){const qe=n(this);if(["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),g(this))return;K.one(qe,vl,()=>{b(this)&&this.focus()});const $t=Ge.findOne(go);$t&&$t!==qe&&Ws.getInstance($t).hide(),Ws.getOrCreateInstance(qe).toggle(this)}),K.on(window,lu,()=>{for(const Yr of Ge.find(go))Ws.getOrCreateInstance(Yr).show()}),K.on(window,pl,()=>{for(const Yr of Ge.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(Yr).position!=="fixed"&&Ws.getOrCreateInstance(Yr).hide()}),ne(Ws),_(Ws);const uu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),dl=/^aria-[\w-]*$/i,Dl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,rl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Rl=(Yr,qe)=>{const $t=Yr.nodeName.toLowerCase();return qe.includes($t)?uu.has($t)?Boolean(Dl.test(Yr.nodeValue)||rl.test(Yr.nodeValue)):!0:qe.filter(Jr=>Jr instanceof RegExp).some(Jr=>Jr.test($t))},fu={"*":["class","dir","id","lang","role",dl],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Eu(Yr,qe,$t){if(!Yr.length)return Yr;if($t&&typeof $t=="function")return $t(Yr);const Hn=new window.DOMParser().parseFromString(Yr,"text/html"),ta=[].concat(...Hn.body.querySelectorAll("*"));for(const ea of ta){const vi=ea.nodeName.toLowerCase();if(!Object.keys(qe).includes(vi)){ea.remove();continue}const Pi=[].concat(...ea.attributes),Ki=[].concat(qe["*"]||[],qe[vi]||[]);for(const Di of Pi)Rl(Di,Ki)||ea.removeAttribute(Di.nodeName)}return Hn.body.innerHTML}const lf="TemplateFactory",Bi={allowList:fu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ml={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},nl={entry:"(string|element|function|null)",selector:"(string|element)"};class ts extends Q{constructor(qe){super(),this._config=this._getConfig(qe)}static get Default(){return Bi}static get DefaultType(){return ml}static get NAME(){return lf}getContent(){return Object.values(this._config.content).map(qe=>this._resolvePossibleFunction(qe)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(qe){return this._checkContent(qe),this._config.content={...this._config.content,...qe},this}toHtml(){const qe=document.createElement("div");qe.innerHTML=this._maybeSanitize(this._config.template);for(const[Hn,ta]of Object.entries(this._config.content))this._setContent(qe,ta,Hn);const $t=qe.children[0],Jr=this._resolvePossibleFunction(this._config.extraClass);return Jr&&$t.classList.add(...Jr.split(" ")),$t}_typeCheckConfig(qe){super._typeCheckConfig(qe),this._checkContent(qe.content)}_checkContent(qe){for(const[$t,Jr]of Object.entries(qe))super._typeCheckConfig({selector:$t,entry:Jr},nl)}_setContent(qe,$t,Jr){const Hn=Ge.findOne(Jr,qe);if(!!Hn){if($t=this._resolvePossibleFunction($t),!$t){Hn.remove();return}if(s($t)){this._putElementInTemplate(o($t),Hn);return}if(this._config.html){Hn.innerHTML=this._maybeSanitize($t);return}Hn.textContent=$t}}_maybeSanitize(qe){return this._config.sanitize?Eu(qe,this._config.allowList,this._config.sanitizeFn):qe}_resolvePossibleFunction(qe){return typeof qe=="function"?qe(this):qe}_putElementInTemplate(qe,$t){if(this._config.html){$t.innerHTML="",$t.append(qe);return}$t.textContent=qe.textContent}}const vs="tooltip",Il=new Set(["sanitize","allowList","sanitizeFn"]),uo="fade",Su="modal",Xo="show",Xs=".tooltip-inner",zs=`.${Su}`,Es="hide.bs.modal",Ho="hover",Zi="focus",Bo="click",ps="manual",ku="hide",Kl="hidden",Cu="show",bt="shown",Ut="inserted",dr="click",cr="focusin",zr="focusout",ln="mouseenter",_n="mouseleave",Pn={AUTO:"auto",TOP:"top",RIGHT:A()?"left":"right",BOTTOM:"bottom",LEFT:A()?"right":"left"},zn={allowList:fu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class wn extends oe{constructor(qe,$t){if(typeof G>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(qe,$t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zn}static get DefaultType(){return Xn}static get NAME(){return vs}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),K.off(this._element.closest(zs),Es,this._hideModalHandler),this.tip&&this.tip.remove(),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const qe=K.trigger(this._element,this.constructor.eventName(Cu)),Jr=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(qe.defaultPrevented||!Jr)return;this.tip&&(this.tip.remove(),this.tip=null);const Hn=this._getTipElement();this._element.setAttribute("aria-describedby",Hn.getAttribute("id"));const{container:ta}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ta.append(Hn),K.trigger(this._element,this.constructor.eventName(Ut))),this._popper?this._popper.update():this._popper=this._createPopper(Hn),Hn.classList.add(Xo),"ontouchstart"in document.documentElement)for(const vi of[].concat(...document.body.children))K.on(vi,"mouseover",c);const ea=()=>{K.trigger(this._element,this.constructor.eventName(bt)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(ea,this.tip,this._isAnimated())}hide(){if(!this._isShown()||K.trigger(this._element,this.constructor.eventName(ku)).defaultPrevented)return;const $t=this._getTipElement();if($t.classList.remove(Xo),"ontouchstart"in document.documentElement)for(const Hn of[].concat(...document.body.children))K.off(Hn,"mouseover",c);this._activeTrigger[Bo]=!1,this._activeTrigger[Zi]=!1,this._activeTrigger[Ho]=!1,this._isHovered=null;const Jr=()=>{this._isWithActiveTrigger()||(this._isHovered||$t.remove(),this._element.removeAttribute("aria-describedby"),K.trigger(this._element,this.constructor.eventName(Kl)),this._disposePopper())};this._queueCallback(Jr,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(qe){const $t=this._getTemplateFactory(qe).toHtml();if(!$t)return null;$t.classList.remove(uo,Xo),$t.classList.add(`bs-${this.constructor.NAME}-auto`);const Jr=e(this.constructor.NAME).toString();return $t.setAttribute("id",Jr),this._isAnimated()&&$t.classList.add(uo),$t}setContent(qe){this._newContent=qe,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(qe){return this._templateFactory?this._templateFactory.changeContent(qe):this._templateFactory=new ts({...this._config,content:qe,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Xs]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(qe){return this.constructor.getOrCreateInstance(qe.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(uo)}_isShown(){return this.tip&&this.tip.classList.contains(Xo)}_createPopper(qe){const $t=typeof this._config.placement=="function"?this._config.placement.call(this,qe,this._element):this._config.placement,Jr=Pn[$t.toUpperCase()];return G.createPopper(this._element,qe,this._getPopperConfig(Jr))}_getOffset(){const{offset:qe}=this._config;return typeof qe=="string"?qe.split(",").map($t=>Number.parseInt($t,10)):typeof qe=="function"?$t=>qe($t,this._element):qe}_resolvePossibleFunction(qe){return typeof qe=="function"?qe.call(this._element):qe}_getPopperConfig(qe){const $t={placement:qe,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Jr=>{this._getTipElement().setAttribute("data-popper-placement",Jr.state.placement)}}]};return{...$t,...typeof this._config.popperConfig=="function"?this._config.popperConfig($t):this._config.popperConfig}}_setListeners(){const qe=this._config.trigger.split(" ");for(const $t of qe)if($t==="click")K.on(this._element,this.constructor.eventName(dr),this._config.selector,Jr=>{this._initializeOnDelegatedTarget(Jr).toggle()});else if($t!==ps){const Jr=$t===Ho?this.constructor.eventName(ln):this.constructor.eventName(cr),Hn=$t===Ho?this.constructor.eventName(_n):this.constructor.eventName(zr);K.on(this._element,Jr,this._config.selector,ta=>{const ea=this._initializeOnDelegatedTarget(ta);ea._activeTrigger[ta.type==="focusin"?Zi:Ho]=!0,ea._enter()}),K.on(this._element,Hn,this._config.selector,ta=>{const ea=this._initializeOnDelegatedTarget(ta);ea._activeTrigger[ta.type==="focusout"?Zi:Ho]=ea._element.contains(ta.relatedTarget),ea._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},K.on(this._element.closest(zs),Es,this._hideModalHandler)}_fixTitle(){const qe=this._element.getAttribute("title");!qe||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",qe),this._element.setAttribute("data-bs-original-title",qe),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(qe,$t){clearTimeout(this._timeout),this._timeout=setTimeout(qe,$t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(qe){const $t=Z.getDataAttributes(this._element);for(const Jr of Object.keys($t))Il.has(Jr)&&delete $t[Jr];return qe={...$t,...typeof qe=="object"&&qe?qe:{}},qe=this._mergeConfigObj(qe),qe=this._configAfterMerge(qe),this._typeCheckConfig(qe),qe}_configAfterMerge(qe){return qe.container=qe.container===!1?document.body:o(qe.container),typeof qe.delay=="number"&&(qe.delay={show:qe.delay,hide:qe.delay}),typeof qe.title=="number"&&(qe.title=qe.title.toString()),typeof qe.content=="number"&&(qe.content=qe.content.toString()),qe}_getDelegateConfig(){const qe={};for(const $t in this._config)this.constructor.Default[$t]!==this._config[$t]&&(qe[$t]=this._config[$t]);return qe.selector=!1,qe.trigger="manual",qe}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(qe){return this.each(function(){const $t=wn.getOrCreateInstance(this,qe);if(typeof qe=="string"){if(typeof $t[qe]>"u")throw new TypeError(`No method named "${qe}"`);$t[qe]()}})}}_(wn);const Un="popover",On=".popover-header",jn=".popover-body",ia={...wn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ga={...wn.DefaultType,content:"(null|string|element|function)"};class za extends wn{static get Default(){return ia}static get DefaultType(){return Ga}static get NAME(){return Un}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[On]:this._getTitle(),[jn]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(qe){return this.each(function(){const $t=za.getOrCreateInstance(this,qe);if(typeof qe=="string"){if(typeof $t[qe]>"u")throw new TypeError(`No method named "${qe}"`);$t[qe]()}})}}_(za);const Ya="scrollspy",aa=".bs.scrollspy",ba=".data-api",Qa=`activate${aa}`,si=`click${aa}`,Mi=`load${aa}${ba}`,Ei="dropdown-item",wi="active",Li='[data-bs-spy="scroll"]',hi="[href]",Co=".nav, .list-group",ao=".nav-link",Si=`${ao}, .nav-item > ${ao}, .list-group-item`,_o=".dropdown",Eo=".dropdown-toggle",ds={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Os={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Lo extends oe{constructor(qe,$t){super(qe,$t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ds}static get DefaultType(){return Os}static get NAME(){return Ya}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const qe of this._observableSections.values())this._observer.observe(qe)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(qe){return qe.target=o(qe.target)||document.body,qe.rootMargin=qe.offset?`${qe.offset}px 0px -30%`:qe.rootMargin,typeof qe.threshold=="string"&&(qe.threshold=qe.threshold.split(",").map($t=>Number.parseFloat($t))),qe}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(K.off(this._config.target,si),K.on(this._config.target,si,hi,qe=>{const $t=this._observableSections.get(qe.target.hash);if($t){qe.preventDefault();const Jr=this._rootElement||window,Hn=$t.offsetTop-this._element.offsetTop;if(Jr.scrollTo){Jr.scrollTo({top:Hn,behavior:"smooth"});return}Jr.scrollTop=Hn}}))}_getNewObserver(){const qe={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver($t=>this._observerCallback($t),qe)}_observerCallback(qe){const $t=ea=>this._targetLinks.get(`#${ea.target.id}`),Jr=ea=>{this._previousScrollData.visibleEntryTop=ea.target.offsetTop,this._process($t(ea))},Hn=(this._rootElement||document.documentElement).scrollTop,ta=Hn>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Hn;for(const ea of qe){if(!ea.isIntersecting){this._activeTarget=null,this._clearActiveClass($t(ea));continue}const vi=ea.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ta&&vi){if(Jr(ea),!Hn)return;continue}!ta&&!vi&&Jr(ea)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const qe=Ge.find(hi,this._config.target);for(const $t of qe){if(!$t.hash||g($t))continue;const Jr=Ge.findOne($t.hash,this._element);b(Jr)&&(this._targetLinks.set($t.hash,$t),this._observableSections.set($t.hash,Jr))}}_process(qe){this._activeTarget!==qe&&(this._clearActiveClass(this._config.target),this._activeTarget=qe,qe.classList.add(wi),this._activateParents(qe),K.trigger(this._element,Qa,{relatedTarget:qe}))}_activateParents(qe){if(qe.classList.contains(Ei)){Ge.findOne(Eo,qe.closest(_o)).classList.add(wi);return}for(const $t of Ge.parents(qe,Co))for(const Jr of Ge.prev($t,Si))Jr.classList.add(wi)}_clearActiveClass(qe){qe.classList.remove(wi);const $t=Ge.find(`${hi}.${wi}`,qe);for(const Jr of $t)Jr.classList.remove(wi)}static jQueryInterface(qe){return this.each(function(){const $t=Lo.getOrCreateInstance(this,qe);if(typeof qe=="string"){if($t[qe]===void 0||qe.startsWith("_")||qe==="constructor")throw new TypeError(`No method named "${qe}"`);$t[qe]()}})}}K.on(window,Mi,()=>{for(const Yr of Ge.find(Li))Lo.getOrCreateInstance(Yr)}),_(Lo);const al="tab",zo=".bs.tab",Po=`hide${zo}`,Jl=`hidden${zo}`,cu=`show${zo}`,gs=`shown${zo}`,Lu=`click${zo}`,$l=`keydown${zo}`,Of=`load${zo}`,Yu="ArrowLeft",hu="ArrowRight",Wu="ArrowUp",Ss="ArrowDown",yl="active",Pu="fade",vu="show",jo="dropdown",Xu=".dropdown-toggle",wf=".dropdown-menu",rs=":not(.dropdown-toggle)",Du='.list-group, .nav, [role="tablist"]',Ru=".nav-item, .list-group-item",ju=`.nav-link${rs}, .list-group-item${rs}, [role="tab"]${rs}`,Oe='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',je=`${ju}, ${Oe}`,rt=`.${yl}[data-bs-toggle="tab"], .${yl}[data-bs-toggle="pill"], .${yl}[data-bs-toggle="list"]`;class lt extends oe{constructor(qe){super(qe),this._parent=this._element.closest(Du),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),K.on(this._element,$l,$t=>this._keydown($t)))}static get NAME(){return al}show(){const qe=this._element;if(this._elemIsActive(qe))return;const $t=this._getActiveElem(),Jr=$t?K.trigger($t,Po,{relatedTarget:qe}):null;K.trigger(qe,cu,{relatedTarget:$t}).defaultPrevented||Jr&&Jr.defaultPrevented||(this._deactivate($t,qe),this._activate(qe,$t))}_activate(qe,$t){if(!qe)return;qe.classList.add(yl),this._activate(n(qe));const Jr=()=>{if(qe.getAttribute("role")!=="tab"){qe.classList.add(vu);return}qe.removeAttribute("tabindex"),qe.setAttribute("aria-selected",!0),this._toggleDropDown(qe,!0),K.trigger(qe,gs,{relatedTarget:$t})};this._queueCallback(Jr,qe,qe.classList.contains(Pu))}_deactivate(qe,$t){if(!qe)return;qe.classList.remove(yl),qe.blur(),this._deactivate(n(qe));const Jr=()=>{if(qe.getAttribute("role")!=="tab"){qe.classList.remove(vu);return}qe.setAttribute("aria-selected",!1),qe.setAttribute("tabindex","-1"),this._toggleDropDown(qe,!1),K.trigger(qe,Jl,{relatedTarget:$t})};this._queueCallback(Jr,qe,qe.classList.contains(Pu))}_keydown(qe){if(![Yu,hu,Wu,Ss].includes(qe.key))return;qe.stopPropagation(),qe.preventDefault();const $t=[hu,Ss].includes(qe.key),Jr=h(this._getChildren().filter(Hn=>!g(Hn)),qe.target,$t,!0);Jr&&(Jr.focus({preventScroll:!0}),lt.getOrCreateInstance(Jr).show())}_getChildren(){return Ge.find(je,this._parent)}_getActiveElem(){return this._getChildren().find(qe=>this._elemIsActive(qe))||null}_setInitialAttributes(qe,$t){this._setAttributeIfNotExists(qe,"role","tablist");for(const Jr of $t)this._setInitialAttributesOnChild(Jr)}_setInitialAttributesOnChild(qe){qe=this._getInnerElement(qe);const $t=this._elemIsActive(qe),Jr=this._getOuterElement(qe);qe.setAttribute("aria-selected",$t),Jr!==qe&&this._setAttributeIfNotExists(Jr,"role","presentation"),$t||qe.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(qe,"role","tab"),this._setInitialAttributesOnTargetPanel(qe)}_setInitialAttributesOnTargetPanel(qe){const $t=n(qe);!$t||(this._setAttributeIfNotExists($t,"role","tabpanel"),qe.id&&this._setAttributeIfNotExists($t,"aria-labelledby",`#${qe.id}`))}_toggleDropDown(qe,$t){const Jr=this._getOuterElement(qe);if(!Jr.classList.contains(jo))return;const Hn=(ta,ea)=>{const vi=Ge.findOne(ta,Jr);vi&&vi.classList.toggle(ea,$t)};Hn(Xu,yl),Hn(wf,vu),Jr.setAttribute("aria-expanded",$t)}_setAttributeIfNotExists(qe,$t,Jr){qe.hasAttribute($t)||qe.setAttribute($t,Jr)}_elemIsActive(qe){return qe.classList.contains(yl)}_getInnerElement(qe){return qe.matches(je)?qe:Ge.findOne(je,qe)}_getOuterElement(qe){return qe.closest(Ru)||qe}static jQueryInterface(qe){return this.each(function(){const $t=lt.getOrCreateInstance(this);if(typeof qe=="string"){if($t[qe]===void 0||qe.startsWith("_")||qe==="constructor")throw new TypeError(`No method named "${qe}"`);$t[qe]()}})}}K.on(document,Lu,Oe,function(Yr){["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),!g(this)&&lt.getOrCreateInstance(this).show()}),K.on(window,Of,()=>{for(const Yr of Ge.find(rt))lt.getOrCreateInstance(Yr)}),_(lt);const Tt="toast",kt=".bs.toast",vr=`mouseover${kt}`,mr=`mouseout${kt}`,hr=`focusin${kt}`,Tr=`focusout${kt}`,Fr=`hide${kt}`,Qr=`hidden${kt}`,on=`show${kt}`,En=`shown${kt}`,Nn="fade",Jn="hide",Ta="show",Ea="showing",ni={animation:"boolean",autohide:"boolean",delay:"number"},qa={animation:!0,autohide:!0,delay:5e3};class ai extends oe{constructor(qe,$t){super(qe,$t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return qa}static get DefaultType(){return ni}static get NAME(){return Tt}show(){if(K.trigger(this._element,on).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Nn);const $t=()=>{this._element.classList.remove(Ea),K.trigger(this._element,En),this._maybeScheduleHide()};this._element.classList.remove(Jn),m(this._element),this._element.classList.add(Ta,Ea),this._queueCallback($t,this._element,this._config.animation)}hide(){if(!this.isShown()||K.trigger(this._element,Fr).defaultPrevented)return;const $t=()=>{this._element.classList.add(Jn),this._element.classList.remove(Ea,Ta),K.trigger(this._element,Qr)};this._element.classList.add(Ea),this._queueCallback($t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ta),super.dispose()}isShown(){return this._element.classList.contains(Ta)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(qe,$t){switch(qe.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=$t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=$t;break}}if($t){this._clearTimeout();return}const Jr=qe.relatedTarget;this._element===Jr||this._element.contains(Jr)||this._maybeScheduleHide()}_setListeners(){K.on(this._element,vr,qe=>this._onInteraction(qe,!0)),K.on(this._element,mr,qe=>this._onInteraction(qe,!1)),K.on(this._element,hr,qe=>this._onInteraction(qe,!0)),K.on(this._element,Tr,qe=>this._onInteraction(qe,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(qe){return this.each(function(){const $t=ai.getOrCreateInstance(this,qe);if(typeof qe=="string"){if(typeof $t[qe]>"u")throw new TypeError(`No method named "${qe}"`);$t[qe](this)}})}}return ne(ai),_(ai),{Alert:Se,Button:Ie,Carousel:kr,Collapse:ma,Dropdown:ro,Modal:Qs,Offcanvas:Ws,Popover:za,ScrollSpy:Lo,Tab:lt,Toast:ai,Tooltip:wn}})})(o4);const Qx=gT(nA);Qx.use(xT());Qx.mount("#app");
